#!/usr/bin/env node
const path = require('path');
const delDist = path.resolve(__dirname, '..', 'step1', 'delDist.js');
const indexDist = path.resolve(__dirname, '..', 'step1', 'index.js');
const weappDist = path.resolve(__dirname, '..', 'step1', 'weapp.js');
excuteFn(`node ./step1/getAllWxml.js && node ./step1/Weapp2Taro.js`)

function excuteFn(command, callback) {
  require('child_process')
    .exec(command, {encoding: 'utf-8'}, (err, stdout, stderr) => {
      if (err) {
          console.log(err.stack);
          console.log('err code: ' + err.code);
          console.log('Signal received: ' + err.signal);
      }
      //console.log(err, stdout, stderr);
      console.log('data : ' + stdout);
      callback && callback()
    }).on('exit', function (code) {
        console.log('子进程已退出, 退出码 ' + code);
    });
}