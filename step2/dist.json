{"convertDir/pages/activity/activity":{"js":"// pages/activity/activity.js\nimport {\n  getH5AbsoluteUrl,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      link: '',\n      url_link: cdnStaticResourceUrl,\n    };\n  },\n  onLoad: function (options) {\n    let activity = options.activity ? options.activity : '';\n    let source = options.source ? options.source : '';\n    if (source) {\n      getApp().globalData.globalSource = source;\n    }\n    let hash = `/${activity}?source=${source}`;\n    if (activity == 'commonSpecialTml') {\n      hash += `&activityPageId=${options.activityPageId}`;\n    }\n    this.setData({\n      link: getH5AbsoluteUrl(`?_t=${new Date().getTime()}/#${hash}`)\n    })\n    console.log('webview实际访问url: ', this.data.link)\n  }\n};","json":{},"wxml":"\n  <view class=\"activity-auto-container\">\n    <web-view :src=\"link\" :style=\"{top:navBarHeightpx}\"></web-view>\n  </view>","wxss":"/* pages/activity/activity.wxss */"},"convertDir/pages/appealDetail/appealDetail":{"js":"export default {\n\n  data: function() {\n   return {\n\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","json":{},"wxml":"\n  <view class=\"appealDetail-auto-container\">\n    <text>pages/appealDetail/appealDetail.wxml\n    </text>\n  </view>","wxss":"/* pages/appealDetail/appealDetail.wxss */"},"convertDir/pages/b2c/pages/goodsDetail/goodsDetail":{"json":{"countDown":"/component/countDown/countDown","missingData-view":"/component/missingData/missingData","shop-cart":"/component/b2cShopCart/shopCart"},"js":"// pages/goodsDetail/goodsDetail.js\nconst app = getApp()\n//接口\nconst apiUrl = {\n  pullCouponUrl:'couponController/pullCoupon', //一键领取\n  getGoodsDetail:'mimiapp/grouparea/onLineGoodsDetail', //获取商品详情\n  subsidyInfo: 'miniapp/marketing/getSkuListSubsidyInfo'\n}\nimport {\n  ajax,\n  ajax2,\n  indexGetLocation,\n  cdnStaticResourceUrl,\n  getMedicineCateNum\n} from \"../../../../utils/util\";\nimport {\n  wxParse,\n} from \"../../../../wxParse/wxParse\";\n\nexport default {\n  data: function() {\n    return {\n      isIPX:false,\n      goodsDetail:{},\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      isLayer1Show: false,\n      json_data: '',\n      //轮播图配置\n      swiperConfig: {\n        current: 0\n      },\n      cartNumber: 1, //购物车数量\n      coupon_text: true,\n      pageShow: false,\n      sj_stock: '',\n      drugStoreId: null,\n      classifyId: null,\n      drugStoreDisable: false,\n      drugDisable: false,\n      cdnLink: cdnStaticResourceUrl,\n      medicineNum: 0,\n      footerAlert: false,\n      btnType: 1, //  区分是加入清单还是提交需求（1:加入清单 2:提交需求） \n      productSubsidyDoc: ''\n    };\n  },\n\n  onLoad: function(options) {\n    let goodsId = options.goodsId;\n    let drugStoreId = options.drugStoreId;\n    let classifyId = options.classifyId;\n    this.setData({\n      isIPX: getApp().globalData.isIPX\n    })\n    // 设置来源\n    if (options.source) {\n      getApp().globalData.globalSource = options.source;\n    }\n    this.data.shareSratus = options.share ? options.share : '';\n    this.data.userId = options.userId ? options.userId : '';\n    this.data.drugStoreId = drugStoreId ? drugStoreId : '';\n\n    if (goodsId) {\n      this.setData({\n        goodsDetail: {\n          id: goodsId\n        },\n        classifyId: classifyId\n      })\n    }\n    // 推广扫码逻辑处理：leo\n    this.handlePromotion(options)\n  },\n  onShow: function() {\n    let that = this;\n    // 购物车组建节点\n    this.shopCart = this.selectComponent(\".shop-cart\");\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      medicineNum: getMedicineCateNum()\n    })\n    // 判断是否有经纬度\n    if (getApp().address_data.latitude) {\n      this.getGoodsDetail();\n    } else {\n      // 没有去尝试拿经纬度\n      indexGetLocation((longitude, latitude) => {\n        if (!longitude) {\n          this.setData({\n            isLayer1Show: true\n          })\n          return false;\n        }\n        // 更新app.js的经纬度\n        getApp().address_data.longitude = longitude;\n        getApp().address_data.latitude = latitude;\n        // 获取商品详情\n        that.getGoodsDetail();\n      })\n    }\n\n    if (app.scene_val.val_zhi == 1036 || app.scene_val.val_zhi == 1007) {\n      Taro.reportAnalytics('clickmainmap', {\n        view_entry: '微信分享入口'\n      });\n    }\n\n    // 详情展示页面埋点\n    getApp().globalData.burySpotSDK.track(`page_goodsDetailExpo`);\n  },\n  // 推广扫码逻辑:leo 渠道类型a\n  handlePromotion(options){\n    if (options.scene) {\n      // 药店id-商品id-推广人员id-任务id ， 示例：a-1-1000-10817-2\n      let scene = options.scene.split('-');\n      if(scene.length > 0){\n        // 页面参数赋值\n        this.setData({\n          drugStoreId: scene[1],\n          goodsDetail: {\n            id: scene[2]\n          },\n        })\n        console.log(this.data.drugStoreId)\n        // 打标（存到缓存） promoterId\tint\t推广员ID;popularizeId\tint\t任务ID;productId\tint\t商品ID;promoterDrugstoreId int\t推广员的药店id\n        let promotion = Taro.getStorageSync('promotion');\n        console.log(promotion);\n        if(promotion){ // 如果缓存有promotion标\n          promotion[scene[1]+scene[2]] = {\n            promoterDrugstoreId:scene[1],\n            productId: scene[2],\n            promoterId: scene[3],\n            popularizeId: scene[4],\n            storageTime: Date.parse(new Date())//记录当前存储时间戳\n          }\n          Taro.setStorage({\n            key: 'promotion',\n            data: promotion\n          })\n        }else{ //没有promotion标直接存储\n          Taro.setStorage({\n            key: 'promotion',\n            data: {\n              [scene[1]+scene[2]]:{\n                promoterDrugstoreId: scene[1],\n                productId: scene[2],\n                promoterId: scene[3],\n                popularizeId: scene[4],\n                storageTime: Date.parse(new Date())//记录当前存储时间戳\n              }\n            }\n          })\n        }\n      }else{\n        Taro.showToast({\n          title: '参数异常',\n          icon: 'none'\n        })\n      }\n    }\n  },\n  // 倒计时结束触发\n  handleUpdataList(){\n    let that = this;\n\n    console.log('0s更新数据')\n    setTimeout(() => {\n      that.getGoodsDetail();\n    }, 1500);\n  },\n  // 跳转需求清单\n  handleDetailedListNum(){\n    // 详情页面点击需求清单埋点\n    getApp().globalData.burySpotSDK.track(`action_goodsDetail_requirementsListClick`);\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/requirementList/requirementList`\n    })\n  },\n  // 减商品\n  handleLessDrug(){\n    if(this.data.cartNumber > 1){\n      this.setData({\n        cartNumber: this.data.cartNumber-1\n      })\n    }else{\n      Taro.showToast({\n        title: '最少购买一件哦',\n        icon: 'none'\n      })\n    }\n  },\n  // 增商品\n  handleAddDrug(){\n    this.setData({\n      cartNumber: this.data.cartNumber+1\n    })\n  },\n  handleJoin(e){\n    if(this.data.json_data.goods[0].stock <= 0 || this.data.json_data.goods[0].status == 'DOWN') {\n      \n      return false;\n    }\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n      return false;\n    }\n    let type = e.currentTarget.dataset.type;\n    this.setData({\n      footerAlert: true,\n      btnType: type \n    })\n  },\n  handleClose(){\n    this.setData({\n      footerAlert: false,\n    })\n  },\n  handleSubmit(){\n    let res = this.data.json_data;\n    if(this.data.btnType == 2){ //1:加入清单，2:立即购买\n      let getData = [{\n        drugstoreId: res.drugstoreId,\n        skus: [{\n          skuId: res.goods[0].id,\n          skuNum: this.data.cartNumber,\n        }]\n      }]\n      getApp().globalData.burySpotSDK.track(`action_goodsDetail_submitRequirements_ConfirmClick`);\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/placeOrder/placeOrder?orderDetailList=${ JSON.stringify(getData) }&donNotCleanCart=true`\n      })\n    }else{\n      let data = { //给购物清单传的参数\n        drugstoreId: res.drugstoreId,\n        skuId: res.goods[0].id,\n        skuNum: this.data.cartNumber,\n        stock: res.goods[0].stock,\n        surplusLimitPurchaseNum: res.goods[0].limitPurchaseAct ? res.goods[0].limitPurchaseAct.surplusLimitPurchaseNum : null,\n      };\n      this.shopCart.addGoods(data);\n      this.setData({\n        medicineNum: getMedicineCateNum(),\n        footerAlert: false\n      })\n      getApp().globalData.burySpotSDK.track(`action_goodsDetail_addGoods_ConfirmClick`);\n    }\n  },\n  // 跳转药店\n  handleGoDrugstore(e){\n    let drugStoreId = e.currentTarget.dataset.id;\n    \n    Taro.navigateTo({\n      url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${ drugStoreId }`\n    })\n  },\n  //轮播事件\n  handleSwiperChange: function(event) {\n    this.setData({\n      [\"swiperConfig.current\"]: event.detail.current\n    })\n  },\n  // 一键领取\n  handleCollection: function() {\n    let that = this;\n\n    if (that.data.coupon_text) {\n      that.setData({\n        coupon_text: false\n      })\n      ajax('get', apiUrl.pullCouponUrl, {\n        productId: that.data.goodsDetail.id,\n        clientType: 'mini',\n        drugstoreId:this.data.drugStoreId\n      }, res => {\n        if (res.data.code == 0) {\n          Taro.showToast({\n            title: '领取成功',\n            image: '/images/successIcon.png',\n            mask: true,\n            duration: 2000\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none',\n            mask: true,\n            duration: 2000\n          })\n        }\n      })\n    }\n  },\n  onShareAppMessage: function(e) {\n    let { json_data } = this.data;\n    //share=1  分享标识\n    let shareObj = {\n      title: json_data.goods[0].medicinesName + ' ' + json_data.goods[0].medicinesCommonName + ' ' + json_data.goods[0].medicinesSpecifications + '  ¥' + json_data.goods[0].medicinesPrice,\n      path: \"/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=\" + json_data.goods[0].medicinesId + \"&share=1&drugStoreId=\" + json_data.goods[0].drugstoreId,\n      imageUrl: json_data.goods[0].medicinesSharePhoto\n    };\n\n    // 埋点\n    Taro.reportAnalytics('invitation', {\n      sharing_type: '分享商品'\n    });\n\n    return shareObj;\n  },\n  // 手动选择地址\n  editcard() {\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?address_data=${ JSON.stringify({}) }`\n    })\n  },\n  //获取商品详情\n  getGoodsDetail() {\n    let data = {\n      productId: this.data.goodsDetail.id,\n      lng: getApp().address_data.longitude,\n      lat: getApp().address_data.latitude,\n      clientType: \"mini\"\n    }\n    Taro.showLoading({\n      title: '加载中',\n    })\n    console.log(2)\n    data.drugstoreId = this.data.drugStoreId ? this.data.drugStoreId : '';\n    ajax('POST', apiUrl.getGoodsDetail, data, res => {\n      Taro.hideLoading();\n      this.handleSuccess(res);\n    })\n  },\n  handleSuccess(res){\n    if (res.data.code == 0) {\n      this.setData({\n        isLayer1Show: false,\n      })\n\n      if (res.data.result.goods.length > 0) {\n        let data = res.data.result;\n  \n        this.setData({\n          json_data: data,\n          coupon_text: data.couponStatus,\n          pageShow: true,\n          sj_stock: data.goods[0].stock,\n          drugStoreId: this.data.drugStoreId\n        })\n\n        this.getSubsidyInfo();\n\n        if (data.goods.length > 0) {\n          wxParse('article', 'html', data.goods[0].medicinesDescription, this, 0);\n        }\n      } else {\n        Taro.showToast({\n          title: '药品已下架',\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.switchTab({\n            url: '/pages/noteIndex/noteIndex'\n          })\n        }, 2000)\n      }\n    } else {\n      this.handleError(res);\n    }\n  },\n  handleError(res){\n    switch (res.data.code) {\n      case -1:\n        this.setData({\n          drugStoreDisable: true\n        });\n        break;\n      case -2:\n        this.setData({\n          drugDisable: true\n        });\n        break;\n      default:\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.switchTab({\n            url: '/pages/noteIndex/noteIndex'\n          })\n        }, 1000);\n    }\n  },\n  /**\n   * 获取活动返现规则\n   */\n  getSubsidyInfo() {\n    let drugstoreIdList = [this.data.drugStoreId];\n    ajax2('post', apiUrl.subsidyInfo, { drugstoreIdList: drugstoreIdList }, res => {\n      if (res.data.code == 0 && res.data.result) { \n        this.setData({\n          productSubsidyDoc: res.data.result.productSubsidyDoc\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n};","wxml":"\n  <view class=\"goodsDetail-auto-container\">   \n    <wxs module=\"filter\"></wxs>\n    <import></import>\n    <navBar title-text=\"商品详情\" :titleColor=\" '#111334' \"></navBar>\n    <shop-cart :class=\"[shop-cart,(isDjk?'djk':'')]\">      \n      <view class=\"container\" v-if=\" pageShow \">         \n        <view class=\"swiper-box\">     \n          <swiper indicator-color=\"#efeff4\" indicator-active-color=\"#f16a33\" circular=\"true\" interval=\"2000\" duration=\"600\" bindchange=\"handleSwiperChange\">\n            <block v-for=\"(item, index) in  json_data.goods[0].images \" :key=\"index\" wx:for-index=\"index\">\n              <swiper-item>\n                <image :src=\" filter.getCutSrc(item.img_url, '@750x750') \" class=\"swiper-image\" mode=\"aspectFit\"></image>\n              </swiper-item>\n            </block>\n          </swiper>\n          <button class=\"share-box\" open-type=\"share\">\n            <image src=\"../../images/share-icon.png\"></image>\n          </button>\n          <view :class=\"[swiper-subscript,( drugStore.is_medicare==1?'':'hide' )]\">支持医保卡\n          </view>\n          <view class=\"swiper-pager\">/\n            <text>{{swiperConfig.current+1}}\n            </text>\n            <text class=\"gray-text\">{{json_data.goods[0].images.length}}\n            </text>\n          </view>\n          <view class=\"swiper-finish-mark\" v-if=\" json_data.goods[0].stock <= 0 \">已抢光\n          </view>\n          <view class=\"swiper-finish-mark\" v-else-if=\" json_data.goods[0].status == 'DOWN' \">已下架\n          </view>\n        </view>\n        <view class=\"activity-box\" v-if=\" json_data.goods[0].activityInfo \">\n          <view class=\"activity-box__content\"> \n            <view class=\"activity-box__left\"> \n              <image v-if=\" json_data.goods[0].activityInfo.label == '限时秒杀' \" :src=\" cdnLink + 'images/seconds-kill-new.png'\" mode=\"aspectFit\"></image>\n              <image v-if=\" json_data.goods[0].activityInfo.label == '限时促销' \" :src=\" cdnLink + 'images/limited-time.png'\" mode=\"aspectFit\"></image>\n            </view>\n            <view class=\"activity-box__right\">  \n              <image class=\"lightning-icon\" src=\"../../images/Lightning.png\"></image>\n              <view class=\"seconds-kill-info\"> \n                <view>仅剩{{ json_data.goods[0].activityInfo.surplusStock }}件\n                </view>\n                <view class=\"activity-box__text-mini\" v-if=\" json_data.goods[0].activityInfo.limitNum > 0 && json_data.goods[0].activityInfo.actType != 4 \">每人限购{{ json_data.goods[0].activityInfo.limitNum }}件\n                </view>\n              </view>\n              <view class=\"seconds-kill-time\"> \n                <text>剩余时间\n                </text>\n                <countDown bind:updataList=\"handleUpdataList\" class=\"timer-stepper\" class-type=\"4\" :endtime=\" json_data.goods[0].activityInfo.endTime \"></countDown>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"goods_detail_boxs\">\n          <view class=\"goods_detail\">\n            <view class=\"detail-left\">\n              <view class=\"price_con\">\n\t\t\t\t\t\t￥ \n                <text class=\"new_price\">{{ json_data.goods[0].medicinesPrice }}\n                </text>\n                <text class=\"common-line-price\" v-if=\" json_data.goods[0].activityInfo \">¥{{ json_data.goods[0].medicinesSellPrice }}\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"good-title\">{{ json_data.goods[0].medicinesName }} {{ json_data.goods[0].medicinesCommonName }} {{ json_data.goods[0].medicinesSpecifications }}\n\t\t\n          <view class=\"b2c_cf\" v-if=\" json_data.goods[0].medicinesIsPrescribe \">处方药\n          </view>\n          <text v-if=\" json_data.goods[0].limitPurchaseAct \">限{{ json_data.goods[0].limitPurchaseAct.limitNum }}件\n          </text>\n        </view>\n        <view class=\"coupon active-cell\" v-if=\" json_data.goods[0].activityType || productSubsidyDoc \"> \n          <text class=\"coupon_left\">限时促销\n          </text>\n          <view class=\"coupon_center\"> \n            <text v-if=\" json_data.goods[0].activityName \">{{ json_data.goods[0].activityName }}\n            </text>\n            <text v-if=\" productSubsidyDoc \">{{ productSubsidyDoc }}\n            </text>\n          </view>\n        </view>\n        <view class=\"back-color\">\n          <view class=\"coupon\" v-if=\" json_data.coupons.length > 0 \"> \n            <view class=\"coupon_left\"> \n              <text class=\"coupon_left_title\">优惠券\n              </text>\n              <view class=\"coupon_center\">\n                <block v-for=\"(item, {{ item }}) in  json_data.coupons \" :wx:key=\" item \" v-if=\" index<3 \">\n                  <view class=\"coupon_list\"> \n                    <text :class=\"[coupon_list_text,( item.canPull && coupon_text?\"\":\"coupon_hui\" )]\" v-if=\" item.couponDiscountWay==1 \">{{ item.couponCash }}元\n                    </text>\n                    <text :class=\"[coupon_list_text,( item.canPull && coupon_text?\"\":\"coupon_hui\" )]\" v-else>{{ item.couponDiscountFactorStr }}折\n                    </text>\n                  </view>\n                </block>\n              </view>\n            </view>\n            <view class=\"coupon_right\" bindtap=\"handleCollection\">{{ coupon_text?\"一键领取\":\"已领取\" }}\n            </view>\n          </view>\n        </view>\n        <view class=\"points-box5\">\n          <view class=\"point-item\" v-for=\"(item, index) in  json_data.supportAttr \" :key=\"index\">{{ item }}\n\t\t\n            <image :src=\"'../../../../images/store-tag'+ index +'.png'\"></image>\n          </view>\n        </view>\n        <view class=\"go-drugstore-back\">\n          <view class=\"go-drugstore\" :data-id=\"json_data.drugstoreId\" bindtap=\"handleGoDrugstore\">  \n            <view class=\"img-warp\">\n              <block>\n                <image class=\"go-drugstore-img\" :src=\" json_data.headPhoto ? json_data.headPhoto: cdnLink + 'images/drugstore-mr-new.png' \" mode=\"widthFix\"></image>\n              </block>\n            </view>\n            <view class=\"go-drugstore-name\">\n\t\t\t\t{{ json_data.drugstoreName }}\n\t\t\t\n            </view>\n            <image class=\"to-drugstore-icon\" src=\"../../../../images/icon-arrow.png\"></image>\n          </view>\n        </view>\n        <view class=\"descript-box7\"> \n          <view class=\"descript-title\">商品描述\n          </view>\n          <view class=\"descript-content\">\n            <template is=\"wxParse\" :data=\"wxParseData:article.nodes\"></template>\n          </view>\n        </view>\n        <view :class=\"[b2c_footer,(isIPX?'b2c_footer_bottom':'')]\">  \n          <text class=\"require-list-label\">需求清单\n          </text>\n          <view class=\"b2c_footer_left\" bindtap=\"handleDetailedListNum\"> \n            <view class=\"b2c_footer_text\" v-if=\" medicineNum > 0 \">{{ medicineNum }}\n            </view>\n            <image class=\"b2c_footer_icon\" src=\"../../images/require-list-icon.png\" mode=\"widthFix\"></image>\n          </view>\n          <view class=\"b2c_footer_right\"> \n            <view class=\"b2c_footer_btn\" bindtap=\"handleJoin\" data-type=\"1\">加入清单\n            </view>\n            <view class=\"b2c_footer_btn ljgm\" bindtap=\"handleJoin\" data-type=\"2\">提交需求\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"white_bg\" v-else-if=\" drugStoreDisable \">\n        <block>\n          <missingData-view zhi=\"new1\" textval2=\"很抱歉，您查看的药店不存在可能已下线或被禁用\" :imageUrl=\" cdnLink + 'images/empty-log.png' \"></missingData-view>\n        </block>\n      </view>\n      <view class=\"white_bg\" v-else-if=\" drugDisable \">\n        <block>\n          <missingData-view zhi=\"new1\" textval2=\"很抱歉，您查看的商品不存在可能已下架或被移除\" :imageUrl=\" cdnLink + 'images/empty-log.png' \"></missingData-view>\n        </block>\n      </view>\n      <view class=\"b2c_footer_alert\" v-if=\"footerAlert\">   \n        <view class=\"b2c_footer_title\">\n\t\t\t选择产品数量\n\t\t\n        </view>\n        <view class=\"b2c_footer_goods\"> \n          <image :src=\"json_data.goods[0].images[0].img_url\" class=\"b2c_footer_goods_left\"></image>\n          <view class=\"b2c_footer_goods_right\">\n            <view class=\"b2c_footer_goods_price\">\n\t\t\t\t\t￥{{ json_data.goods[0].medicinesPrice }} \n              <text class=\"common-line-price\" v-if=\" json_data.goods[0].activityInfo \">¥{{ json_data.goods[0].medicinesSellPrice }}\n              </text>\n              <view class=\"b2c_footer_goods_specifications\">{{ json_data.goods[0].medicinesSpecifications }}\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"b2c_footer_add\"> \n          <view class=\"b2c_footer_add_left\">选择数量\n          </view>\n          <view class=\"b2c_footer_add_right\">\n            <view class=\"cart_button\">  \n              <view class=\"button less\" catchtap=\"handleLessDrug\">\n                <view>-\n                </view>\n              </view>\n              <view class=\"text\">{{cartNumber}}\n              </view>\n              <view class=\"button\" catchtap=\"handleAddDrug\">\n                <view>+\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"b2c_footer_alert_btn\" bindtap=\"handleSubmit\">确定\n        </view>\n      </view>\n      <view class=\"b2c_footer_alert_back\" v-if=\"footerAlert\" bindtap=\"handleClose\"></view>\n      <view class=\"black_box\" catchtouchmove=\"true\" v-if=\" isLayer1Show \"></view>\n      <view class=\"alert_box\" catchtouchmove=\"true\" v-if=\" isLayer1Show \">  \n        <view class=\"title\">定位失败\n        </view>\n        <view class=\"detail\">请检查网络环境或者手机定位权限设置\n        </view>\n        <view class=\"btns_box\"> \n          <button class=\"left\" bindtap=\"editcard\">手动定位\n          </button>\n          <form class=\"button right\" report-submit=\"true\" bindsubmit=\"onShow\">\n            <button class=\"right\" form-type=\"submit\">重新定位\n            </button>\n          </form>\n        </view>\n      </view>\n    </shop-cart>\n  </view>","wxss":"/* pages/goodsDetail/goodsDetail.wxss */\n@import '../../../../common/tableView.wxss';\npage{\n  padding-bottom: 100rpx;\n  background: #f5f6fa;\n}\n\n.container {\n  /* background: #fff; */\n}\n\n.group_msg {\n  position: absolute;\n  top: 37rpx;\n  left: 23rpx;\n}\n.swiper-box {\n  width: 100%;\n  height: 750rpx;\n  position: relative;\n  background-color: #fff;\n}\n\n.swiper-box swiper {\n  width: 100%;\n  height: 100%;\n}\n\n.swiper-box .swiper-image {\n  width: 100%;\n  height: 100%;\n}\n\n.swiper-box .swiper-subscript {\n  width: 215rpx;\n  height: 58rpx;\n  line-height: 58rpx;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  bottom: 21rpx;\n  color: #FFFFFF;\n  font-size: 28rpx;\n  border-top-right-radius: 30rpx;\n  border-bottom-right-radius: 30rpx;\n  background: linear-gradient(to right, #5bcbf8, #4182f6);\n}\n.swiper-box .swiper-pager {\n  width: 81rpx;\n  height: 36rpx;\n  line-height: 36rpx;\n  font-size: 28rpx;\n  color: #EFEFF5;\n  text-align: center;\n  position: absolute;\n  right: 24rpx;\n  bottom: 30rpx;\n  background: rgba(0,0,0,0.2);\n  border-radius: 20rpx;\n}\n\n.swiper-box .swiper-pager text:nth-child(1) {\n  color: #fff;\n  margin-right: 4rpx;\n}\n\n.swiper-box .swiper-pager .gray-text {\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #EFEFF5;\n  margin-left: 4rpx;\n}\n\n.swiper-box .swiper-finish-mark {\n  width: 180rpx;\n  height: 180rpx;\n  line-height: 180rpx;\n  text-align: center;\n  font-size: 30rpx;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 90rpx;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.share-box {\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  top: 30rpx;\n  right: 20rpx;\n  background: none;\n  border-radius: 90%;\n}\n\n.share-box image {\n  width: 60rpx;\n  height: 60rpx;\n}\n\n.goods_detail_boxs {\n  background-color: #fff;\n  position: relative;\n}\n.price_con {\n  font-family: PingFangSC, PingFangSC-Semibold;\n  height: 75rpx;\n  font-size: 36rpx;\n  color: #F93A4A;\n  line-height: 75rpx;\n  position: relative;\n  font-weight: 600;\n}\n\n.price_con .new_price {\n  font-size: 56rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.price_con .old_price {\n  margin-left: 12rpx;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-decoration: line-through;\n}\n.goods-avtive{\n  height: 170rpx;\n}\n.goods-avtive .detail-left {\n  flex: 1;\n}\n.goods-avtive .price_con{\n color: #FFFFFF;\n margin-top: 36rpx;\n}\n.common-line-price {\n  margin-left: 20rpx;\n  font-size: 28rpx;\n  color: #858A9C !important;\n  font-weight: 400;\n}\n.goods-avtive .common-line-price {\n  color: #FFFFFF !important;\n}\n.goods-avtive .common-line-price::before {\n  background: #FFFFFF;\n}\n.goods-avtive .online_shopping {\n  background: #FFFFFF;\n  color: #FF3232;\n  font-size: 28rpx;\n  font-weight: bold;\n  box-shadow:0px 8px 12px 0px rgba(186,25,25,0.33);\n  width: 186rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n}\n.goods_detail {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 23rpx 32rpx;\n  padding-bottom: 0;\n  padding-top: 10rpx;\n}\n.goods-avtive .goods_detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  box-sizing: border-box;\n}\n.goods_detail .avtive-tag {\n  color: #FFF2D3;\n  font-size: 24rpx;\n  width: 96rpx;\n  height: 38rpx;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: linear-gradient(to right,#FFB559, #FF9247);\n  border-bottom-right-radius: 20rpx;\n}\n.goods_detail_boxs .active-bg {\n  width: 100%;\n  height: 170rpx;\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-weight: bold\n}\n\n.status0_box {\n  width: 100%;\n  height: 32rpx;\n  background-color: #fff;\n}\n\n.price-timer-box2 {\n  width: 100%;\n  height: 90rpx;\n  position: relative;\n}\n\n.box2-bgimg {\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-image: linear-gradient(-269deg, #fe9e20 0%, #ff5800 100%);\n}\n\n.box2-info {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  line-height: 90rpx;\n  z-index: 2;\n  padding: 0 23rpx;\n  font-size: 28rpx;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.sale-price {\n  font-size: 54rpx;\n  font-weight: bold;\n}\n\n.through-price {\n  margin-left: 20rpx;\n  text-decoration: line-through;\n}\n\n.box2-finish-prompt {\n  height: 100%;\n  line-height: 90rpx;\n  z-index: 2;\n  font-size: 28rpx;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  right: 23rpx;\n}\n\n.box2-timer {\n  box-sizing: border-box;\n  width: 340rpx;\n  height: 100%;\n  z-index: 2;\n  font-size: 26rpx;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.timer-tips {\n  display: inline-block;\n  width: 100%;\n  margin: 10rpx 0 6rpx;\n  height: 24rpx;\n  line-height: 24rpx;\n  font-size: 22rpx;\n}\n\n.timer-stepper {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n}\n\n.notBeginning {\n  background: #fef9ba;\n  color: #333;\n}\n\n.good-title {\n  color: #111334;\n  font-size: 36rpx;\n  font-weight: bold;\n  padding: 4rpx 24rpx 24rpx 24rpx;\n  background: #FFFFFF;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  height: 72rpx;\n  padding: 20rpx 32rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fff;\n  flex-wrap:wrap;\n}\n\n.point-item {\n  font-size: 22rpx;\n  position: relative;\n  /* margin-right: 24rpx; */\n  margin-bottom: 20rpx;\n  box-sizing: border-box;\n  color: #666d83;\n}\n\n.point-item icon {\n  margin-right: 9rpx;\n  top: 2rpx;\n}\n\n.point-item image {\n  width: 24rpx;\n  height: 24rpx;\n  position: relative;\n  top: 4rpx;\n  left: -8rpx;\n}\n\n.rules-box6 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 23rpx;\n  background: #fff;\n  margin-bottom: 20rpx;\n}\n\n.rules-title {\n  font-size: 30rpx;\n  border-bottom: 1rpx solid #e4e4e4;\n  padding: 23rpx 0 15rpx;\n  font-weight: 700;\n}\n\n.rules-content {\n  font-size: 28rpx;\n  padding: 15rpx 0;\n}\n\n.descript-box7 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 23rpx;\n  background: #fff;\n  margin-bottom: 20rpx;\n  margin-top: 20rpx;\n}\n\n.descript-title {\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-size: 32rpx;\n  padding: 32rpx 0 31rpx;\n  font-weight: 500;\n  color: #111734;\n}\n.descript-content {\n  padding: 15rpx 0 48rpx 0;\n  width: 100%;\n}\n\n.addrshow-box8 {\n  box-sizing: border-box;\n  width: 100%;\n  background: #fff;\n  /*margin-bottom: 20rpx;*/\n}\n\n.addrshow-title {\n  font-size: 30rpx;\n  border-bottom: 1rpx solid #e4e4e4;\n  padding: 23rpx 23rpx 15rpx;\n  font-weight: 700;\n}\n.descript-content image{\n  width: 100%;\n}\n.addrshow-content {\n  /*padding: 15rpx 0;*/\n  font-size: 0;\n}\n\n.addrshow-content image {\n  width: 100%;\n  margin-bottom: 15rpx;\n}\n\n.addrshow-content image:last-child {\n  margin-bottom: 0;\n}\n\n/* 底部footer */\n\n.footer {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100rpx;\n  line-height: 100rpx;\n  display: flex;\n  background-color: #fff;\n  color: #fff;\n  z-index: 9;\n}\n\n.footer view {\n  text-align: center;\n}\n\n.footer .icon_times {\n  display: inline-block;\n  width: 37rpx;\n  height: 39rpx;\n  vertical-align: middle;\n}\n\n.footer .f_remind {\n  width: 210rpx;\n  font-size: 26rpx;\n  color: #999;\n}\n\n.footer .f_msg {\n  flex: 1;\n  width: 200rpx;\n  background: #cacaca;\n  font-size: 36rpx;\n  font-weight: 600;\n}\n\n.footer .f_focus {\n  width: 175rpx;\n  font-size: 26rpx;\n  color: #666;\n  letter-spacing: 1.44rpx;\n}\n\n.footer .f_focus .icon_focus {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: middle;\n}\n\n.footer .f_phone_group {\n  width: 287rpx;\n  font-weight: 600;\n  background: #fe8916;\n}\n\n.footer .f_open_group {\n  flex: 1;\n  width: 100rpx;\n  font-weight: 600;\n  background: #e4393b;\n}\n\n.footer .f_remind_again {\n  width: 265rpx;\n  font-size: 26rpx;\n  color: #999;\n}\n\n/* modal */\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  color: #333;\n  z-index: 99;\n}\n\n.modal .modal_con {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -360rpx 0 0 -300rpx;\n  width: 600rpx;\n  height: 720rpx;\n  background: #fff;\n  border-radius: 14rpx;\n}\n\n.modal .modal_con .modal_header {\n  height: 108rpx;\n  margin: 40rpx 38rpx 0;\n  font-weight: 600;\n  font-size: 30rpx;\n  letter-spacing: 1.11rpx;\n}\n\n.modal .modal_con .store_list {\n  margin: 10rpx 50rpx;\n  height: 462rpx;\n}\n\n.modal .modal_con .store_list .store_con {\n  width: 500rpx;\n  height: 120rpx;\n  margin-bottom: 20rpx;\n  background: #f9f9f9;\n  border-radius: 6rpx;\n  padding: 20rpx;\n  box-sizing: border-box;\n  border: 2px solid transparent;\n}\n\n.modal .modal_con .store_list .store_con .store_title {\n  display: flex;\n  font-size: 30rpx;\n  height: 43rpx;\n  line-height: 42rpx;\n}\n\n.modal .modal_con .store_list .store_con .store_title .name {\n  width: 270rpx;\n}\n\n.modal .modal_con .store_list .store_con .store_title .dist {\n  flex: 1;\n  font-size: 24rpx;\n  color: #999;\n  text-align: right\n}\n\n.modal .modal_con .store_list .store_con .store_addr {\n  width: 100%;\n  margin-top: 10rpx;\n  height: 33rpx;\n  line-height: 33rpx;\n  font-size: 24rpx;\n  color: #666;\n}\n\n.modal .modal_con .store_list .active {\n  background: #fff6f6;\n  border: 2px solid #e4393b;\n}\n\n.modal .modal_con .modal_footer {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 88rpx;\n  display: flex;\n  border-top: 1px solid #eee;\n}\n\n.modal .modal_con .modal_footer .modal_btn {\n  flex: 1;\n  width: 300rpx;\n  line-height: 88rpx;\n  text-align: center;\n  font-size: 30rpx;\n  letter-spacing: 1.11rpx;\n}\n\n.modal .modal_con .modal_footer .cancel {\n  border-right: 1px solid #EEEEEE;\n}\n\n.modal .modal_con .modal_footer .confirm {\n  color: #e4393b;\n}\n\n.wxParse-tr{\n  border-color: #EEEEEE;\n}\n\n.wxParse-tr:not(:last-child) {\n  border-bottom: none !important;\n}\n\n.wxParse-th, .wxParse-td{\n  border-color: #EEEEEE;\n}\n/* 优惠券 */\n.coupon_list_text{\n  position: relative;\n  z-index: 1;\n  font-size: 22rpx;\n  color: #f93a4a;\n  background: #ffeeef;\n  border-radius: 6rpx;\n  padding: 3rpx 12rpx;\n}\n.coupon_hui{\n  opacity: .45;\n  border: none;\n}\n.coupon_left_title{\n  font-size: 26rpx;\n  line-height: 52rpx;\n  color: #858a97;\n  position: relative;\n  top: 2rpx;\n}\n.coupon_center{\n  display: flex;\n  align-items: center;\n  padding-left: 40rpx;\n}\n.coupon_list{\n  height: 40rpx;\n  position: relative;\n  text-align: center;\n  line-height: 40rpx;\n  margin-right: 12rpx;\n}\n.coupon_list image{\n  position: absolute;\n  left: 0rpx;\n  top: 0rpx;\n  width: 100%;\n  height: 100%;\n}\n.coupon{\n  font-size: 30rpx;\n  width: 100%;\n  margin: 0 auto;\n  padding: 10rpx 24rpx;\n  background-color: #ffffff;\n  display: flex;\n  justify-content:space-between;\n  align-items: center;\n  border-bottom: 1px solid #eff0f5;\n  box-sizing: border-box;\n}\n.coupon_left{\n  font-size: 26rpx;\n  color: #999;\n  display: flex;\n  justify-content:flex-start;\n}\n.coupon_right{\n  width: 144rpx;\n  height: 52rpx;\n  background: #e8fff3;\n  border-radius: 24rpx;\n  line-height: 52rpx;\n  text-align: center;\n  font-size: 24rpx;\n  color: #00b955;\n}\n\n.active-cell {\n  border-bottom: 1rpx solid #F4F4F4;\n  padding-bottom: 20rpx;\n}\n.active-cell .coupon_center {\n  color: #666666;\n  flex: 1;\n  font-size: 28rpx;\n}\n\n.active-cell .coupon_center text{\n  color: #F93A4A;\n  margin-right: 40rpx;\n}\n\n.online_shopping{\n  width: 194rpx;\n  height: 54rpx;\n  background: #00b955;\n  color: #FFFFFF;\n  text-align: center;\n  line-height: 54rpx;\n  border-radius: 33rpx;\n  font-size: 28rpx;\n}\n.online_shopping.gray {\n  background: #D3D3D3;\n}\n\n.cart_button {\n  display: flex;\n  align-items: center;\n}\n.cart_button .text {\n  padding: 0 20rpx;\n  font-size: 26rpx;\n}\n.cart_button .button {\n  padding: 10rpx;\n}\n.cart_button .button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00B955;\n  color: #FFFFFF;\n  font-size: 40rpx;\n}\n.cart_button .less view{\n  border: 1px solid #00B955;\n  background: none;\n  color: #00B955;\n}\n.goods-avtive .cart_button {\n  color: #FFFFFF\n}\n.goods-avtive .cart_button .less view{\n  border-color: #FFFFFF;\n  background: none;\n}\n.goods-avtive .cart_button .button view{\n  background: #FFFFFF;\n  color: #FFFFFF;\n  color: #FF3232;\n}\n.white_bg {\n  background: #FFFFFF;\n  height: 100vh;\n}\n/* 药店入口 */\n.go-drugstore{\n  width: calc(100vw - 32rpx - 32rpx);\n  height: 114rpx;\n  margin: 0 auto;\n  padding-right: 24rpx;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #F8F8FD;\n  border-radius: 12rpx;\n}\n\n.img-warp {\n  margin-left: 24rpx;\n  width: 110rpx;\n  height: 74rpx;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.go-drugstore-img{\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.to-drugstore-icon {\n  width: 28rpx;\n  height: 28rpx;\n}\n.go-drugstore-name{\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  font-size: 28rpx;\n  color: #41435d;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n  max-width: 416rpx;\n  flex: 1;\n  position: relative;\n  left: -40rpx;\n}\n.go-drugstore-btn{\n  color: #00b955;\n  font-size: 28rpx;\n  text-align: center;\n  width: 152rpx;\n  height: 60rpx;\n  border: 1px solid #00b955;\n  line-height: 60rpx;\n  border-radius: 80rpx;\n}\n/* 活动 */\n.activity-box__content {\n  height: 88rpx;\n  position: relative;\n  background-image: linear-gradient(to right, #FFE1CC , #FFB68E);\n  display: flex;\n}\n\n.activity-box__bg {\n  display: block;\n  position: absolute;\n  height: 88rpx;\n  top: 0;\n  left: 0;\n  width: 497rpx;\n}\n\n.activity-box__left {\n  width: 291rpx;\n}\n\n.activity-box__left image {\n  width: 100%;\n  height: 88rpx;\n}\n\n.activity-box__tag {\n  width: 74rpx;\n  height: 74rpx;\n  padding: 9rpx 10rpx;\n  box-sizing: border-box;\n  font-weight: bold;\n  font-size: 26rpx;\n  line-height: 30rpx;\n  color: #FFFFFF;\n  font-style: italic;\n  background: #F7322E;\n  border-radius: 10rpx;\n  margin: 0 20rpx 0 24rpx;\n}\n\n.activity-box__right {\n  display: flex;\n  align-items: center;\n  justify-content: space-between; \n  flex: 1;\n  padding-right: 20rpx;\n}\n\n.activity-box__right .lightning-icon {\n  width: 36rpx;\n  height: 41rpx;\n  margin-left: 32rpx;\n  margin-right: 12rpx;\n}\n\n.seconds-kill-info {\n  display: flex;\n  flex: 1;\n  /* padding-top: 15rpx; */\n  text-align: left;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.seconds-kill-info view:nth-child(1) {\n  color: #F93A4A !important;\n  font-size: 24rpx;\n  font-weight: 500;\n}\n\n.activity-box__text-mini {\n  font-size: 20rpx;\n  color: #F93A4A;\n}\n\n.seconds-kill-time {\n  display: flex;\n  flex-direction: column;\n  font-size: 22rpx;\n  text-align: center;\n}\n\n.seconds-kill-time text:nth-child(1) {\n  color: #994517;\n}\n\n.seconds-kill-info view:nth-child(1) {\n  color: #994517;\n  display: inline;\n  font-weight: 600;\n}\n\n/* b2c */\n.label{\n  display: flex;\n  background-color: #fff;\n  padding: 23rpx;\n  border-top: 1rpx solid #F4F4F4;\n}\n.label_list{\n  font-size: 22rpx;\n  color: #666666;\n  height: 25rpx;\n  line-height: 25rpx;\n  margin-right: 27rpx;\n}\n.label_list image{\n  display: inline-block;\n  width: 23rpx;\n  height: 23rpx;\n  margin-right: 10rpx;\n  vertical-align: middle;\n  margin-top: -2rpx;\n}\n.b2c_footer{\n  width: calc(100% - 64rpx);\n  padding-left: 32rpx;\n  padding-right: 32rpx;\n  height: 100rpx;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background-color: #fff;\n  border-top: 1px solid #eff0f5;\n  z-index: 9999;\n  display: flex;\n  justify-content: space-between; /* 横向中间自动空间 */\n  align-content: space-between;  /* 竖向中间自动空间 */\n}\n.b2c_footer_left{\n  width: 45rpx;\n  height: 48rpx;\n  margin-top: 26rpx;\n  position: relative;\n}\n.b2c_footer_icon{\n  width: 45rpx;\n  position: relative;\n  top: -10rpx;\n  left: 20rpx;\n}\n.b2c_footer_text{\n  width: 30rpx;\n  height: 30rpx;\n  background: #ff4531;\n  border: 2rpx solid #ffffff;\n  position: absolute;\n  top: -19rpx;\n  right: -34rpx;\n  text-align: center;\n  color: #fff;\n  line-height: 30rpx;\n  border-radius: 90%;\n  font-size: 24rpx;\n  z-index: 1;\n}\n.b2c_footer_btn{\n  width: 200rpx;\n  height: 72rpx;\n  border: 2rpx solid #c5c6d5;\n  border-radius: 36rpx;\n  text-align: center;\n  line-height: 70rpx;\n  font-size: 28rpx;\n  color: #111334;\n  font-weight: 500;\n  box-sizing: border-box;\n}\n.b2c_footer_right{\n  display: flex;\n}\n.ljgm{\n  border: 2rpx solid #00b955;\n  background-color: #00b955;\n  color: #fff;\n  margin-left: 20rpx;\n}\n.b2c_footer_right{\n  margin-top: 15rpx;\n}\n.b2c_footer_alert{\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  width: 100%;\n  background-color: #fff;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  z-index: 3;\n  padding-bottom: 30rpx;\n  z-index: 99999;\n}\n.b2c_footer_title{\n  height: 90rpx;\n  font-weight: bold;\n  line-height: 90rpx;\n  text-align: center;\n  font-size: 36rpx;\n  color: #000;\n}\n.b2c_footer_alert_back{\n  height: 100%;\n  width: 100%;\n  background-color: #000;\n  opacity: 0.4;\n  position: fixed;\n  z-index: 2;\n  left: 0;\n  top: 0;\n}\n.b2c_footer_goods{\n  display: flex;\n  padding-left: 30rpx;\n}\n.b2c_footer_goods_left{\n  display: block;\n  width: 228rpx;\n  height: 228rpx;\n  max-width: 228rpx;\n  max-height: 228rpx;\n  margin-right: 30rpx;\n}\n.b2c_footer_goods_right{\n  width: 40%;\n  position: relative;\n}\n.b2c_footer_goods_price{\n  font-size: 30rpx;\n  color: #FF2121;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n.b2c_footer_goods_price text{\n  font-size: 20rpx;\n  color: #999999;\n  margin-left: 10rpx;\n}\n.b2c_footer_goods_specifications{\n  font-size: 20rpx;\n  color: #999999;\n}\n.b2c_footer_add{\n  margin-top: 20rpx;\n  width: calc(100% - 60rpx);\n  padding: 0 30rpx 0 30rpx;\n  display: flex;\n  justify-content: space-between; /* 横向中间自动空间 */\n  align-content: space-between;  /* 竖向中间自动空间 */\n}\n.b2c_footer_alert_btn{\n  font-weight: bold;\n  width: 690rpx;\n  height: 88rpx;\n  background: #00b955;\n  border-radius: 50rpx;\n  margin: 0 auto;\n  margin-top: 120rpx;\n  text-align: center;\n  color: #fff;\n  font-size: 36rpx;\n  line-height: 88rpx;\n}\n/* 处方药，限购件数css */\n.b2c_cf{\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 0rpx 8rpx;\n  height: 36rpx;\n  line-height: 36rpx;\n  text-align: center;\n  background: #ff3232;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n  border-radius: 6rpx;\n}\n.good-title text {\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background: linear-gradient(270deg,#ff884a, #ff3232);\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n\n.richext{\n  word-wrap:break-word;\n}\n\n.require-list-label {\n  position: absolute;\n  color: #666883;\n  font-size: 20rpx;\n  top: 60rpx;\n  left: 35rpx;\n}\n.go-drugstore-back{\n  background-color: #ffffff;\n  padding-bottom: 32rpx;\n}\n.back-color{\n  background-color: #ffffff;\n}\n.b2c_footer_bottom{\n  padding-bottom: 22rpx;\n}"},"convertDir/pages/b2c/pages/pharmacyCouponsToUse/pharmacyCouponsToUse":{"js":"// pages/b2c/pages/pharmacyCouponsToUse/pharmacyCouponsToUse.js\nimport {\n  ajax,\n  getMedicineCateNum,\n  cdnStaticResourceUrl,\n  bezier\n} from \"../../../../utils/util\";\nconst apiUrl = {\n  getGoodsList: 'couponController/queryMedicinesByCouponId' //获取药店列表\n}\nvar app = getApp();\n\nexport default {\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      couponId: null,\n      coupon: {},\n      medicineNum: 0,\n      list: [],\n      // 加购特效\n      interval: 1500,\n      duration: 1000,\n      hideCount: true, //角标初始是隐藏的\n      count: 0, //角标数\n      hideGoodsBox: true,\n      feiBox: \"\", //当前加购图片\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    // 购物车组建节点\n    this.shopCart = this.selectComponent(\".shop-cart\");\n    this.setData({\n      medicineNum: getMedicineCateNum(),\n      couponId: options.couponId,\n      coupon: options.coupon ? JSON.parse(options.coupon) : '',//优惠券展示商品聚合页面\n    })\n    this.getGoodsList();\n    //可视窗口x,y坐标\n    this.busPos = {};\n    this.busPos['x'] = app.globalData.ww * .85;\n    this.busPos['y'] = app.globalData.hh * .85;\n  },\n  //点击商品触发的事件\n  touchOnGoods: function(e) {\n    //把点击每一项的对应的商品图保存下来，就是飞向购物车的图片\n    this.setData({\n        feiBox: e.currentTarget.dataset.img\n    })\n    // 如果good_box正在运动\n    if (!this.data.hideGoodsBox) return;\n    //当前点击位置的x，y坐标\n    this.finger = {};\n    var topPoint = {};\n    this.finger['x'] = 89;\n    this.finger['y'] = e.touches[\"0\"].clientY - 60;\n    if (this.finger['y'] < this.busPos['y']) {\n        topPoint['y'] = this.finger['y'] - 150;\n    } else {\n        topPoint['y'] = this.busPos['y'] - 150;\n    }\n\n    if (this.finger['x'] < this.busPos['x']) {\n        topPoint['x'] = Math.abs(this.finger['x'] - this.busPos['x']) / 2 + this.finger['x'];\n    } else {\n        topPoint['x'] = this.busPos['x'];\n        this.finger['x'] = this.busPos['x']\n    }\n    this.linePos = bezier([this.finger, topPoint, this.busPos], 30);\n    this.startAnimation();\n  },\n  //开始动画\n  startAnimation: function() {\n      var index = 0,\n          that = this,\n          bezier_points = that.linePos['bezier_points'];\n      this.setData({\n          hideGoodsBox: false,\n          bus_x: that.finger['x'],\n          bus_y: that.finger['y']\n      })\n      this.timer = setInterval(function() {\n          index++;\n          that.setData({\n              bus_x: bezier_points[index]['x'],\n              bus_y: bezier_points[index]['y']\n          })\n          if (index >= 28) {\n              clearInterval(that.timer);\n              that.setData({\n                  hideGoodsBox: true,\n                  hideCount: false,\n                  count: that.data.count += 1\n              })\n          }\n      }, 16);\n  },\n  getGoodsList(){\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax('get', apiUrl.getGoodsList, {\n      couponId:this.data.couponId\n    }, res => {\n      Taro.hideLoading({});\n      if(res.data.code == 0) {\n        console.log(res);\n        this.setData({\n          list: res.data.result.list\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  handleRoterGoodsDetail(e){\n    let item = e.currentTarget.dataset.item;\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ item.medicinesId }&drugStoreId=${ item.drugstoreId }`,\n    })\n  },\n  // 跳转需求清单\n  handleDetailedListNum(){\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/requirementList/requirementList`\n    })\n  },\n  // 加购\n  handlePurchase(e){\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n      return false;\n    }\n    let item = e.currentTarget.dataset.item;\n    let data = {\n      drugstoreId: item.drugstoreId,\n      skuId: item.medicinesId,\n      skuNum: 1,\n      stock: item.medicinesDrugstoreStock,\n      surplusLimitPurchaseNum: item.limitPurchaseAct ? item.limitPurchaseAct.surplusLimitPurchaseNum : null,\n    }\n    let addStatus = this.shopCart.addGoods(data);\n\n    if(!addStatus){\n      return false;\n    }\n    this.setData({\n      medicineNum: getMedicineCateNum()\n    })\n    // 调用加购特效\n    this.touchOnGoods(e);\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","json":{"shop-cart":"/component/b2cShopCart/shopCart","missingData-view":"/component/missingData/missingData"},"wxml":"\n  <view class=\"pharmacyCouponsToUse-auto-container\"> \n    <navBar title-text=\"去使用\"></navBar>\n    <shop-cart :class=\"[shop-cart,( isDjk ? 'djk' : '' )]\"> \n      <block v-if=\"list.length > 0\">   \n        <view class=\"header\"> \n          <view class=\"tips\" v-if=\"coupon.couponDiscountWay == 3\">以下商品可使用下单立减{{ coupon.couponCash }}的优惠券\n          </view>\n          <view class=\"tips\" v-else>以下商品可使用满{{ coupon.couponUseLimit }}减{{ coupon.couponCash }}的优惠券\n          </view>\n        </view>\n        <view class=\"proItem\" v-for=\"(item, index) in list\" :key=\"index\">\n          <view class=\"itemTop flex\" :data-item=\" item \" :data-index=\" index \" bindtap=\"handleRoterGoodsDetail\"> \n            <image :src=\" item.img \"></image>\n            <view class=\"itemInfo\">   \n              <view class=\"title\">{{item.medicinesName}} {{item.commonName}} {{ item.medicineSpecifications }}\n              </view>\n              <view class=\"gg\">{{item.product_spec}}\n              </view>\n              <view class=\"active_tag\">\n                <view class=\"tag\" v-for=\"(item, key) in  item.activityNameList \" :key=\"key\">{{ item }}\n                </view>\n              </view>\n              <view class=\"price\">\n\t\t\t\t\t\t\t¥{{ item.activityInfo.actPrice ? item.activityInfo.actPrice : item.customPrice }} \n                <text v-if=\" item.activityInfo.actPrice \">¥{{ item.customPrice }}\n                </text>\n                <view class=\"button\" catchtap=\"handlePurchase\" :data-item=\" item \" :data-img=\" item.img \">\n                  <view>+\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"b2c_detailed_list\" bindtap=\"handleDetailedListNum\">\n\t\t\t\t清单\n\t\t\t\n          <view class=\"b2c_detailed_list_num\" v-if=\"medicineNum > 0\">{{ medicineNum }}\n          </view>\n        </view>\n        <view class=\"good_box\" :hidden=\"hideGoodsBox\" :style=\"{left: bus_xpx, top: bus_ypx}\">\n          <image :src=\"feiBox\"></image>\n        </view>\n      </block>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval=\"暂无商品，敬请期待\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n      </block>\n    </shop-cart>\n  </view>","wxss":"/* pages/b2c/pages/pharmacyCouponsToUse/pharmacyCouponsToUse.wxss */\n.header{\n  height: 100rpx;\n  line-height: 100rpx;\n  background: #FDFCEC;\n  font-size: 28rpx;\n  color: #F86E21;\n  text-align: center;\n}\n.flex {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  padding-bottom: 30rpx;\n  position: relative;\n  padding: 30rpx;\n  background-color: #fff;\n}\n.proItem::after{\n  content: '';\n  width: 100%;\n  height: 1rpx;\n  background-color: #f2f2f2;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.proItem .itemTop image {\n  width: 228rpx;\n  min-width: 228rpx;\n  height: 228rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: 500rpx;\n  height: 228rpx;\n  position: relative;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: rgba(41, 38, 38, 1);\n  line-height: 34rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  width: 150rpx;\n  height: 50rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  font-size: 30rpx;\n  color: rgba(0, 185, 173, 1);\n  text-align: center;\n  line-height: 50rpx;\n}\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 21rpx;\n}\n.active_tag2{\n  margin-top: 13rpx;\n}\n.active_tag .tag {\n  padding: 0 9rpx;\n  height: 30rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  border: 1px solid #FF8A8A;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  color: #FF2121;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n.active_tag2 .tag{\n  background: #fff;\n  border: 1px solid #e1e1e1;\n  color: #666666;\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n.price{\n  color: #FF2121;\n  font-size: 40rpx;\n  margin-top: 29rpx;\n  position: relative;\n  font-weight: bold;\n}\n.price text{\n  font-size: 20rpx;\n  color: #999999;\n  margin-left: 12rpx;\n  text-decoration:line-through;\n}\n.button{\n  padding: 10rpx;\n  position: absolute;\n  bottom: -10rpx;\n  right: 0;\n}\n.button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00b955;\n  color: #fff;\n  font-size: 40rpx;\n}\n.gg{\n  font-size: 20rpx;\n  color: #999999;\n  margin-top: 20rpx;\n}\n.b2c_detailed_list{\n  width: 100rpx;\n  height: 100rpx;\n  background: linear-gradient(90deg,#09c1cb, #05d9a0);\n  box-shadow: 0px 20rpx 20rpx 0rpx rgba(0,204,187,0.15); \n  border-radius: 90%;\n  text-align: center;\n  line-height: 100rpx;\n  color: #FFFBFB;\n  font-size: 30rpx;\n  position: fixed;\n  right: 30rpx;\n  bottom: 160rpx;\n}\n.b2c_detailed_list_num{\n  width: 43rpx;\n  height: 43rpx;\n  background: #ff4531;\n  border: 2rpx solid #ffffff;\n  position: absolute;\n  top: -20rpx;\n  right: 0;\n  line-height: 43rpx;\n  text-align: center;\n  font-size: 24rpx;\n  color: #fff;\n  border-radius: 90%;\n}\n.b2c_cf{\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background: #ff3232;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n.title text {\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background: linear-gradient(270deg,#ff884a, #ff3232);\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n/* 加购特效 */\n.good_box {\n  width: 40px;\n  height: 40px;\n  position: fixed;\n  border-radius: 50%;\n  overflow: hidden;\n  left: 50%;\n  top: 50%;\n  z-index: +99;\n  border: 1px solid #fff;\n  background: rgba(120, 188, 255, 0.2);\n}\n\n.good_box image {\n  display: block;\n  width: 100%;\n  height: 100%;\n}"},"convertDir/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage":{"json":{"shop-cart":"../../../../component/b2cShopCart/shopCart","missingData-view":"/component/missingData/missingData"},"wxss":"/* pages/b2c/pages/pharmacyHomepage/pharmacyHomepage.wxss */\n@import \"pharmacyHomepage.skeleton.wxss\";\npage{\n  background-color: #fff;\n}\n.b2c_ph_header{\n  width: 100%;\n  position: relative;\n  position: fixed;\n  left: 0;\n  top: 0;\n  padding-bottom: 42rpx;\n  z-index: 9;\n}\n.no-cover::after {\n  display: none !important;\n}\n.b2c_ph_header::after{\n  content: '';\n  display: block;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  background-color: #000;\n  opacity: 0.5;\n}\n.b2c_ph_h_info{\n  width: calc(100% - 60rpx);\n  margin:0 auto;\n  position: relative;\n}\n.b2c_ph_h_info_title{\n  font-size: 36rpx;\n  color: #fff;\n  position: relative;\n  width: 80%;\n}\n.b2c_ph_h_info_gz{\n  width: 120rpx;\n  position: absolute;\n  right: 0;\n  top: 90rpx;\n}\n.b2c_ph_h_info_btn{\n  width: 120rpx;\n  height: 48rpx;\n  border-radius: 25rpx;\n  line-height: 48rpx;\n  text-align: center;\n  color: #fff;\n  opacity: 1;\n  font-size: 24rpx;\n  border: 1px solid #fff;\n}\n.b2c_ph_h_info_title text{\n  border: solid #fff;\n  border-width: 0 1px 1px 0;\n  display: inline-block;\n  padding: 3px;\n  transform: rotate(-45deg);\n  -webkit-transform: rotate(-45deg);\n  vertical-align: middle;\n  margin-top: -2rpx;\n}\n.b2c_ph_h_info_notice{\n  width: 80%;\n  font-size: 24rpx;\n  color: #FFFFFF;\n  height: 24rpx;\n  line-height: 24rpx;\n  margin-top: 8rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.b2c_ph_h_info_btn_text{\n  font-size: 20rpx;\n  color: #fff;\n  text-align: center;\n  margin-top: 6rpx;\n}\n/* 商品list */\n.flex {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  padding-bottom: 30rpx;\n  position: relative;\n  padding: 30rpx;\n}\n.proItem::after{\n  content: '';\n  width: 100%;\n  height: 1rpx;\n  background-color: #f2f2f2;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.proItem .itemTop image {\n  width: 180rpx;\n  min-width: 180rpx;\n  height: 180rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: 500rpx;\n  position: relative;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-weight:bold;\n  font-size: 28rpx;\n  color: rgba(41, 38, 38, 1);\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  width: 150rpx;\n  height: 50rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  font-size: 30rpx;\n  color: rgba(0, 185, 173, 1);\n  text-align: center;\n  line-height: 50rpx;\n}\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 21rpx;\n}\n.active_tag2{\n  margin-top: 13rpx;\n}\n.active_tag .tag {\n  padding: 0 9rpx;\n  height: 30rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  border: 1px solid #FF8A8A;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  color: #FF2121;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n.active_tag2 .tag{\n  background: #fff;\n  border: 1px solid #e1e1e1;\n  color: #666666;\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n.price{\n  color: #FF2121;\n  font-size: 40rpx;\n  font-weight: bold;\n  margin-top: 29rpx;\n  position: relative;\n}\n.price text{\n  font-size: 20rpx;\n  color: #999999;\n  margin-left: 12rpx;\n  text-decoration:line-through;\n}\n.button{\n  padding: 10rpx;\n  position: absolute;\n  bottom: -10rpx;\n  right: 0;\n}\n.button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00b955;\n  color: #fff;\n  font-size: 40rpx;\n}\n/* 优惠券 */\n.drug_store_coupons {\n  background-color: #fff;\n  padding-top: 10rpx;\n  width: 690rpx;\n  left: 30rpx;\n  border-radius: 8rpx;\n  box-shadow: 0px 8rpx 40rpx 0px rgba(0,0,0,0.06); \n  position: fixed;\n  z-index: 99;\n  height: 140rpx;\n}\n.drug_store_coupons .cell_center {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n  color: #333333;\n  font-weight: 500;\n}\n.drug_store_coupons .cell_center .name {\n  font-weight: bold;\n}\n.drug_store_coupons .cell_center image {\n  width: 34rpx;\n  height: 34rpx;\n  margin-left: 10rpx;\n}\n.drug_store_coupons .cell_right {\n  font-size: 24rpx;\n  color: #999999;\n  padding-right: 10rpx;\n  width: 60rpx;\n  text-align: right;\n}\n.drug_store_coupons .coupons_list {\n  display: flex;\n  overflow-x: auto;\n  padding: 15rpx 24rpx 30rpx;\n}\n.drug_store_coupons .coupons_list .coupon{\n  background: linear-gradient(to right, #FF8549, #FF3432);\n  padding: 8rpx;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #FFFFFF;\n  height: 44rpx;\n  line-height: 44rpx;\n  margin-right: 20rpx;\n  box-sizing: border-box;\n  display: inline-flex;\n  align-items: center;\n  flex-shrink: 0;\n}\n.drug_store_coupons .coupons_list .coupon .text {\n  padding: 0 5rpx;\n}\n.drug_store_coupons .coupons_list .coupon .bold {\n  font-weight: bold;\n}\n.drug_store_coupons .coupons_list .coupon image {\n  width: 10rpx;\n  height: 44rpx;\n  margin: 0 3rpx;\n}\n.drug_store_coupons .coupons_list .get_disable {\n  background: #F4F4F4;\n  border: 2rpx solid #D3D3D3;\n  color: #AFAFAF;\n}\n.drug_store_coupons .coupons_list .get_coupon {\n  background: #FFFFFF;\n  border: 2rpx solid #FF8A7B;\n  color: #FF8A7B;\n}\n.coupons-dialog {\n  height: 846rpx;\n  overflow-y: auto;\n  padding-bottom: 20rpx;\n}\n.common_section {\n  font-size: 30rpx;\n  background: #ffffff;\n}\n.common_section .cell {\n  display: flex;  \n  align-items: center; \n  position: relative;\n  box-sizing: border-box;\n  padding: 0 30rpx\n}\n.common_section .cell::before {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  border-bottom: 2rpx solid #EEEEEE;\n  transform: scaleY(0.5);\n}\n.common_section .cell:last-child:before {\n  border: 0\n}\n.arrow_icon {\n  width: 42rpx;\n  height: 42rpx;\n  margin-left: 4rpx;\n}\n.header-box{\n  position: relative;\n  z-index: 2;\n}\n.moreSelect {\n  background: none;\n  border: 1px solid #ffffff;\n  color: #fff;\n}\n.b2c_detailed_list{\n  width: 100rpx;\n  height: 100rpx;\n  background: #fff;\n  box-shadow: 0rpx 5rpx 17rpx 0rpx rgba(17,19,52,0.11); \n  border-radius: 90%;\n  text-align: center;\n  line-height: 100rpx;\n  color: #111334;\n  font-size: 30rpx;\n  position: fixed;\n  right: 30rpx;\n  bottom: 160rpx;\n}\n.b2c_detailed_list_num {\n  width: 43rpx;\n  height: 43rpx;\n  background: #ff4531;\n  border: 2rpx solid #ffffff;\n  position: absolute;\n  top: -20rpx;\n  right: 0;\n  line-height: 43rpx;\n  text-align: center;\n  font-size: 24rpx;\n  color: #fff;\n  border-radius: 90%;\n}\n/* 处方药，限购件数css */\n.b2c_cf{\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background:#F93A4A;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n.title text {\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background: linear-gradient(270deg,#ff884a, #ff3232);\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n/* 加购特效 */\n.good_box {\n  width: 40px;\n  height: 40px;\n  position: fixed;\n  border-radius: 50%;\n  overflow: hidden;\n  left: 50%;\n  top: 50%;\n  z-index: +99;\n  border: 1px solid #fff;\n  background: rgba(120, 188, 255, 0.2);\n}\n\n.good_box image {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n/* 加购特效end */\n.djk .b2c_detailed_list{\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}\n/* 大健康 */\n.djk .button view{\n  background-color: #00B955;\n}\n.djk .b2c_ph_h_info_btn{\n  color: #00B955;\n}\n/* 扫码营销 */\n.ms-alert-box {\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  z-index: 9999;\n  height: 100vh;\n}\n\n.ms-alert-shadow {\n  width: 100%;\n  height: 100%;\n  background: rgba(4, 4, 4, 1);\n  opacity: 0.5;\n}\n\n.ms-alert-nr {\n  width: 572rpx;\n  position: absolute;\n  left: calc(50% - 286rpx);\n  top: 30%;\n  z-index: 2;\n  background-color: #ff3131;\n  border-bottom-right-radius: 20px;\n  border-bottom-left-radius: 20px;\n  padding-bottom: 30rpx;\n}\n\n.scroll-view-item {\n  height: 100rpx;\n}\n\n.ms-alert-nr-title {\n  font-size: 34rpx;\n  color: #fff;\n  text-align: center;\n  padding-top: 30rpx;\n}\n\n.ms-alert-nr-text {\n  font-size: 24rpx;\n  color: #fff;\n  text-align: center;\n  padding-top: 4rpx;\n}\n\n.ms-alert-yhq {\n  width: 532rpx;\n  height: 157rpx;\n  border-radius: 8rpx;\n  background-color: #fff;\n  margin: 0 auto;\n  margin-top: 25rpx;\n  display: flex;\n  overflow: hidden;\n  position: relative;\n}\n\n.ms-alert-msg {\n  text-align: center;\n  color: #fff;\n  font-size: 24rpx;\n  padding-top: 34rpx;\n}\n\n.ms-alert-yhq-left {\n  width: 70%;\n  height: 100%;\n  position: relative;\n}\n\n.ms-alert-yhq-left::after {\n  content: '';\n  display: block;\n  right: -8rpx;\n  width: 14rpx;\n  height: 14rpx;\n  border-radius: 90%;\n  top: -7rpx;\n  position: absolute;\n  background-color: #ff3131;\n  z-index: 999;\n}\n\n.ms-alert-yhq-left::before {\n  content: '';\n  display: block;\n  bottom: -8rpx;\n  right: -8rpx;\n  width: 14rpx;\n  height: 14rpx;\n  border-radius: 90%;\n  position: absolute;\n  background-color: #ff3131;\n  z-index: 999;\n}\n\n.ms-alert-yhq-right {\n  width: 30%;\n  height: 100%;\n  position: relative;\n}\n\n.ms-alert-yhq-right::after {\n  content: '';\n  display: block;\n  position: absolute;\n  top: 0px;\n  left: 0;\n  width: 1rpx;\n  height: 100%;\n  border-left: 2px dashed rgba(245, 245, 245, 1);\n}\n\n.ms-alert-yhq-left-name {\n  display: flex;\n  padding-left: 16rpx;\n  padding-top: 20rpx;\n}\n\n.ms-yhq-type {\n  width: 73rpx;\n  height: 30rpx;\n  border-radius: 45rpx;\n  font-size: 20rpx;\n  color: #e4393b;\n  text-align: center;\n  line-height: 30rpx;\n  border: 1px solid rgba(230, 64, 63, 1);\n}\n\n.ms-yhq-text {\n  font-size: 28rpx;\n  color: #333;\n  margin-left: 16rpx;\n  margin-top: -2rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.ms-alert-yhq-left-tj {\n  font-size: 20rpx;\n  color: #666;\n  margin-top: 30rpx;\n  padding-left: 16rpx;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.ms-alert-yhq-left-time {\n  font-size: 20rpx;\n  padding-left: 16rpx;\n  color: #999;\n}\n\n.ms-jg {\n  font-size: 58rpx;\n  color: #e4393b;\n  text-align: center;\n  padding-top: 40rpx;\n}\n\n.ms-jg text {\n  font-size: 28rpx;\n  color: #e4393b;\n}\n\n.ms-btn {\n  width: 100rpx;\n  height: 34rpx;\n  background: rgba(228, 57, 59, 1);\n  border-radius: 17rpx;\n  line-height: 34rpx;\n  text-align: center;\n  color: #fff;\n  margin: 0 auto;\n  margin-top: 8rpx;\n}\n\n.ms-alert-nr-clear{\n  display: block;\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  bottom: -94rpx;\n  left: calc(50% - 30rpx);\n}\n\n.ms-alert-top-img{\n  position: absolute;\n  width: 100%;\n  height: 200rpx;\n  top: -200rpx;\n  left: 0;\n}\n.ms-lc{\n  display: block;\n  width: 100%;\n  padding-top: 20rpx;\n}\n.ms-alert-yhq-box{\n  height: auto;\n  min-height: 360rpx;\n  overflow: hidden;\n}\n/* 新增搜索 */\n.b2c_ph_h_ss{\n  display: block;\n  padding-left: 70rpx;\n  height: 60rpx;\n  opacity: 0.95;\n  background: #ffffff;\n  border-radius: 36rpx;\n  margin-bottom: 30rpx;\n  font-size:28rpx;\n  position: relative;\n}\n.b2c_ph_h_ss_img{\n  width: 34rpx;\n  height: 40rpx;\n  position: absolute;\n  top: 8rpx;\n  left: 17rpx;\n  display: block;\n}\n.b2c_ph_h_ss_sm_img{\n  position: absolute;\n  width: 32rpx;\n  height: 32rpx;\n  right: 31rpx;\n  top: 12rpx;\n  display: block;\n}\n.drug-store_coupons .coupons_list {\n  display: flex;\n  align-items: center;\n  padding-top: 20rpx;\n}\n\n.drug-store_coupons .coupons_list .coupons {\n  display: flex;\n  overflow-x: auto;\n  padding: 0 24rpx;\n  flex: 1;\n}\n\n.drug-store_coupons .coupons_list .coupon, .yb-tag {\n  background: #F93A4A;\n  padding: 8rpx;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #FFFFFF;\n  height: 44rpx;\n  line-height: 44rpx;\n  margin-right: 20rpx;\n  box-sizing: border-box;\n  display: inline-flex;\n  align-items: center;\n  flex-shrink: 0;\n}\n.drug-store_coupons .coupons_list .arrow_icon {\n  transform: rotate(90deg);\n  margin-left: 0;\n}\n\n.drug-store_coupons .coupons_list .coupon .text {\n  padding: 0 5rpx;\n}\n\n.drug-store_coupons .coupons_list .coupon image {\n  width: 2rpx;\n  height: 20rpx;\n  margin: 0 12rpx;\n}\n.drug-store_coupons .coupons_list .get_disable {\n  background: #F5F6FA;\n  color: #9D9FB8;\n}\n.drug-store_coupons .coupons_list .get_coupon {\n  background: #FEF4F3;\n  color: #F93A4A;\n}\n.b2c_ph_h_ss_box{\n  position: relative;\n}","js":"// pages/b2c/pages/pharmacyHomepage/pharmacyHomepage.js\n//接口\nimport {\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl,\n  getMedicineCateNum,\n  bezier\n} from \"../../../../utils/util\";\nconst apiUrl = {\n  drugStoreInfoUrl: 'miniapp/ykqDrugStore/getDrugstoreDetailsV2',//药店信息\n  pullCoupon: 'couponController/pullCoupon',\n  drugstoreAttention: 'miniapp/miniappDrugstore/drugstoreAttention',\n  couponsList: 'couponController/queryCouponsByDrugstoreId',\n  getMedicinesByDrugstoreId: 'mimiapp/grouparea/getMedicinesByDrugstoreId' //获取药店列表\n}\nvar app = getApp();\n\nexport default {\n  data: function() {\n    return {\n      goodsListType: true,//true为有数据，false无商品数据\n      isAlertType: false,\n      checkNewUserData: {},\n      isAlert: false,\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      moreType: false,\n      navBarHeight: app.globalData.navBarHeight,\n      getSystemInfo: {},\n      scrollHeight: 0,\n      headerHeight: 0,\n      drugStoreInfo: {},//药店信息\n      couponsList: [],//优惠券list\n      drugStoreId: null,\n      receiveStatusTxt: [{\n        'text': '领取',\n        'number': '1'\n      }, {\n        'text': '已领光',\n        'number': '3'\n      }, {\n        'text': '已领取',\n        'number': '2'\n      }, {\n        'text': '去使用',\n        'number': '2'\n      }],\n      pageNum: 1,\n      pageSize: 10,\n      goodsList: [],\n      medicineNum: 0,\n      couponsHeight: 70,\n      // 加购特效\n      interval: 1500,\n      duration: 1000,\n      hideCount: true, //角标初始是隐藏的\n      count: 0, //角标数\n      hideGoodsBox: true,\n      feiBox: \"\", //当前加购图片\n      hasNextPage: true, //是否还有下一页\n      url_link: cdnStaticResourceUrl,\n      pageShow: true\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    // 营销扫码判断\n    if (options.scene) {//扫码小程序码进入\n      let data = JSON.parse(options.scene);\n      // data赋值\n      this.setData({\n        activityData: data,\n        drugStoreId: data.drugstoreId\n      })\n      // 判断是否登录\n      if (!getApp().globalData.sess_key) {\n        Taro.navigateTo({\n          url: `/pages/note/login/login`,\n        })\n        return false;\n      }\n    } else {\n      // 获取药店id\n      this.setData({\n        drugStoreId: options.drugstoreId\n      })\n    }\n    // 购物车组建节点\n    this.shopCart = this.selectComponent(\".shop-cart\");\n    // 获取药店信息（包含优惠券）\n    this.getDrugStoreInfo();\n    // 获取药店商品列表\n    this.getDrugStoreGoodsList();\n    //可视窗口x,y坐标\n    this.busPos = {};\n    this.busPos['x'] = app.globalData.ww * .85;\n    this.busPos['y'] = app.globalData.hh * .85;\n\n  },\n\n  // 跳转需求清单\n  handleDetailedListNum() {\n    // 加购埋点\n    getApp().globalData.burySpotSDK.track(`action_shopMainPage_requirementsListClick`);\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/requirementList/requirementList`\n    })\n  },\n  // 扫码购\n  scancodeOpen() {\n    // 判断是否登录\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: `/pages/note/login/login`\n      })\n      return false;\n    }\n    Taro.scanCode({\n      success: (res)=> {\n        console.log('扫码结果', res)\n        if(res.result){\n          this.searchDrug(res.result)\n        };\n      },\n      fail(res){\n        console.log(res)\n      }\n    })\n  },\n  searchDrug(barCode) {\n    ajax('get', 'product/ykq/mini/v1/b2c/queryProductByBarCode', {\n      drugstoreId: this.data.drugStoreInfo.id,\n      barCode: barCode\n    }, res => {\n      console.log('搜索结果', res)\n      if(res.data.code == 0 && res.data.result){\n        let item = res.data.result;\n        let data = {\n          drugstoreId: item.drugstoreId,\n          skuId: item.medicineId,\n          skuNum: 1,\n          stock: item.medicinesDrugstoreStock,\n          surplusLimitPurchaseNum: item.limitPurchaseAct ? item.limitPurchaseAct.surplusLimitPurchaseNum : null,\n        }\n        let addStatus = this.shopCart.addGoods(data);\n        this.setData({\n          medicineNum: getMedicineCateNum()\n        })\n      }else {\n        Taro.showModal({\n          content: res.data.msg,\n          showCancel: false,\n          confirmText: '知道了',\n          confirmColor: getApp().globalData.mainColor\n        })\n      }\n    })\n  },\n  handleGoSearch(){\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/productSearch/productSearch?storeId=${this.data.drugStoreInfo.id}`\n    })\n  },\n  //向用户发起订阅请求\n  subscribeMessage() {\n    this.setData({\n      isAlert: false\n    })\n    let tmplIds = ['osYBy0kFCHt6qiQd0xb2valQr6rr3afPxYja_y6ZztA', 'HBB_4Lbg3XAFiAOM9jTVADNC-ddTQBKFRM4mzfIOW_o']\n    Taro.requestSubscribeMessage({\n      tmplIds: tmplIds,\n      success(res) {\n        ajax('get', 'api/wechat/saveSubscribeUser', {\n          templateId: tmplIds[0],\n          status: res && res[tmplIds[0]]\n        }, res1 => {\n          // console.log('订阅结果上报', res, res1)\n        })\n      }\n    })\n  },\n  //点击商品触发的事件\n  touchOnGoods: function (e) {\n    //把点击每一项的对应的商品图保存下来，就是飞向购物车的图片\n    this.setData({\n      feiBox: e.currentTarget.dataset.img\n    })\n    // 如果good_box正在运动\n    if (!this.data.hideGoodsBox) return;\n    //当前点击位置的x，y坐标\n    this.finger = {};\n    var topPoint = {};\n    this.finger['x'] = 89;\n    this.finger['y'] = e.touches[\"0\"].clientY - 60;\n    if (this.finger['y'] < this.busPos['y']) {\n      topPoint['y'] = this.finger['y'] - 150;\n    } else {\n      topPoint['y'] = this.busPos['y'] - 150;\n    }\n\n    if (this.finger['x'] < this.busPos['x']) {\n      topPoint['x'] = Math.abs(this.finger['x'] - this.busPos['x']) / 2 + this.finger['x'];\n    } else {\n      topPoint['x'] = this.busPos['x'];\n      this.finger['x'] = this.busPos['x']\n    }\n    this.linePos = bezier([this.finger, topPoint, this.busPos], 30);\n    this.startAnimation();\n  },\n  //开始动画\n  startAnimation: function () {\n    var index = 0,\n      that = this,\n      bezier_points = that.linePos['bezier_points'];\n    this.setData({\n      hideGoodsBox: false,\n      bus_x: that.finger['x'],\n      bus_y: that.finger['y']\n    })\n    this.timer = setInterval(function () {\n      index++;\n      that.setData({\n        bus_x: bezier_points[index]['x'],\n        bus_y: bezier_points[index]['y']\n      })\n      if (index >= 28) {\n        clearInterval(that.timer);\n        that.setData({\n          hideGoodsBox: true,\n          hideCount: false,\n          count: that.data.count += 1\n        })\n      }\n    }, 16);\n  },\n  // 加购方法\n  handlePurchase(e) {\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n      return false;\n    }\n    let item = e.currentTarget.dataset.item;\n    let data = {\n      drugstoreId: item.drugstoreId,\n      skuId: item.medicineId,\n      skuNum: 1,\n      stock: item.medicinesDrugstoreStock,\n      surplusLimitPurchaseNum: item.limitPurchaseAct ? item.limitPurchaseAct.surplusLimitPurchaseNum : null,\n    }\n    let addStatus = this.shopCart.addGoods(data);\n\n    if (!addStatus) {\n      return false;\n    }\n    this.setData({\n      medicineNum: getMedicineCateNum()\n    })\n    // 调用加购特效\n    this.touchOnGoods(e);\n    // 加购埋点\n    getApp().globalData.burySpotSDK.track(`action_shopMainPage_goodsAddClick`, {\n      goodsId: item.medicineId\n    });\n  },\n  pullCoupon(coupon) {\n    ajax('get', apiUrl.pullCoupon, {\n      drugstoreId: this.data.drugStoreId,\n      couponId: coupon.id\n    }, res => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          title: '领取成功',\n          icon: 'none'\n        })\n        this.data.couponsList.forEach(item => {\n          if (item.id == coupon.id) {\n            item.receiveStatus = item.couponType == 'GOODS' ? 3 : 2;\n            item.couponUseStartDate = res.data.result && res.data.result.couponUseStartDate;\n            item.couponUseEndDate = res.data.result && res.data.result.couponUseEndDate;\n          }\n        })\n        this.setData({\n          couponsList: this.data.couponsList\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      medicineNum: getMedicineCateNum()\n    })\n    if (this.data.activityData && !this.data.isAlertType) {\n      this.handleCoupon();\n    }\n  },\n  handleCoupon() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true\n    })\n    ajax('get', 'mimiapp/homepage/checkNewUser', this.data.activityData, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        let data = res.data.result;\n        this.setData({\n          isAlert: data.isNewUser,\n          checkNewUserData: data\n        })\n        if (data.isNewUser) {\n          this.setData({\n            isAlertType: true\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  // 获取药店商品列表   type：true(分页) ：false（初始请求）\n  getDrugStoreGoodsList(type) {\n    let that = this;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    let data = {\n      drugstoreId: this.data.drugStoreId,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize\n    }\n    ajax2('get', apiUrl.getMedicinesByDrugstoreId, data, res => {\n      Taro.hideLoading({});\n      if (res.data.code == 0) {\n        // 没有商品的场景\n        if (this.data.pageNum == 1 && res.data.result.pageInfo.list.length == 0) {\n          this.setData({\n            goodsListType: false\n          })\n        }\n        this.setData({\n          goodsList: type ? [...this.data.goodsList, ...res.data.result.pageInfo.list] : [...res.data.result.pageInfo.list],\n          hasNextPage: res.data.result.pageInfo.hasNextPage\n        })\n      } else {\n        that.toast(res.data.msg);\n      }\n    }, function () {\n      that.toast('请求失败');\n    })\n  },\n  handleRoterGoodsDetail(e) {\n    let id = e.currentTarget.dataset.id;\n    getApp().globalData.burySpotSDK.track(`action_shopMainPage_goodsClick`, {\n      goodsId: id\n    });\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${id}&drugStoreId=${this.data.drugStoreInfo.id}`,\n    })\n  },\n  //获取药店信息\n  getDrugStoreInfo() {\n    let that = this;\n    let data = {\n      drugstoreId: this.data.drugStoreId,\n    }\n\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n\n    ajax2('get', apiUrl.drugStoreInfoUrl, data, res => {\n      Taro.hideLoading({});\n\n      if (res.data.code == 0 && res.data.result) {\n        this.setData({\n          drugStoreInfo: res.data.result.ykqDrugstore,\n          couponList: res.data.result.couponList,\n          moreType: res.data.result.ykqDrugstore.isAttention,\n          pageShow: false\n        })\n        // 获取优惠券列表\n        this.getCouponsList();\n      } else {\n        that.toast(res.data.msg);\n      }\n    }, function () {\n      that.toast('请求失败');\n    })\n  },\n  toast(e) {\n    Taro.showToast({\n      title: e,\n      icon: 'none',\n    })\n  },\n  // 跳转药店详情\n  handleToDrugStoreDetail() {\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugStoreDetail/drugStoreDetail?drugStoreId=${this.data.drugStoreInfo.id}`,\n    })\n  },\n  // 关注接口\n  getFollow(type) {\n    ajax('post', apiUrl.drugstoreAttention, {\n      drugstoreId: this.data.drugStoreInfo.id,\n      status: type // 0：取消关注   1：关注\n    }, res => {\n      // console.log(res);\n    })\n  },\n  // 关注状态\n  handleFollow() {\n    let that = this;\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n\n      return false;\n    }\n\n    if (this.data.moreType) { //判断关注状态 true：已关注  false：未关注\n      that.toast('已取消，将无法在[我的→我关注的店铺]中找到我');\n      this.setData({\n        moreType: false,\n        [\"drugStoreInfo.attentionUserCount\"]: this.data.drugStoreInfo.attentionUserCount - 1\n      })\n      this.getFollow(0);\n    } else {\n      that.toast('已关注，您可在[我的→我关注的店铺]中找到我');\n      this.setData({\n        moreType: true,\n        [\"drugStoreInfo.attentionUserCount\"]: this.data.drugStoreInfo.attentionUserCount + 1\n      })\n      this.getFollow(1);\n    }\n  },\n  // 说明\n  handleAlertTips() {\n    Taro.showModal({\n      title: '说明',\n      confirmColor: getApp().globalData.mainColor,\n      showCancel: false,\n      content: this.data.drugStoreInfo.instructions\n    })\n  },\n  //获取优惠券列表\n  getCouponsList() {\n    let that = this;\n    ajax('get', apiUrl.couponsList, {\n      drugstoreId: this.data.drugStoreId\n    }, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          couponsList: res.data.result,\n          couponsHeight: res.data.result.length > 0 ? 70 : 0\n        })\n        let that = this;\n        //计算页面tab高度\n        let info = Taro.getSystemInfoSync();\n        // 获取header高度\n        const query = Taro.createSelectorQuery();\n\n        query.select('#header').boundingClientRect();\n        query.selectViewport().scrollOffset();\n        query.exec(res => {\n          if (!res[0]) {\n            return false\n          }\n          that.setData({\n            headerHeight: res[0].height,\n            getSystemInfo: info,\n            scrollHeight: info.screenHeight - res[0].height - this.data.couponsHeight\n          })\n        })\n      } else {\n        that.toast(res.data.msg);\n      }\n    }, err => {\n      // console.log(err)\n    })\n  },\n  userCoupon(e) {\n    let coupon = e.type == 'action' ? e.detail : e.currentTarget.dataset.coupon;\n    if (coupon.receiveStatus == 1 || coupon.receiveStatus == 2) {\n      return false;\n    }\n    // 判断是否登录\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: `/pages/note/login/login`\n      })\n      return false;\n    }\n\n    if (coupon.receiveStatus == 0) {\n      this.pullCoupon(coupon);\n    } else if (coupon.receiveStatus == 3) {\n      //跳转商品聚合页面\n      let text = (coupon.couponDiscountWay == '3' ? `下单立` : `${coupon.couponUseLimit}`) + `减 ${coupon.couponCash}`\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/pharmacyCouponsToUse/pharmacyCouponsToUse?couponId=${coupon.couponId}&text=${text}`\n      })\n    }\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    let that = this;\n    if (this.data.hasNextPage) {\n      this.data.pageNum++;\n      this.getDrugStoreGoodsList(true);\n    } else {\n      that.toast('没有更多')\n    }\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"pharmacyHomepage-auto-container\">\n    <view class=\"sk-container\" style=\"background: #FFFFFF\"> \n      <view is=\"component/navBar/navBar\">\n        <view class=\"navBar--nav navBar--higher-nav sk-pseudo sk-pseudo-circle\" style=\"height: 64px;\"> \n          <view class=\"navBar--status\" style=\"height: 26px;background:none\"></view>\n          <view class=\"navBar--navbar\" style=\"height:32px;background:none;top:26px;\"> \n            <view class=\"navBar--capsule\" style=\"width: 87px; height: 32px; border: none;\">  \n              <view class=\"navBar--back-icon\">\n                <image class=\"navBar--img sk-image\"></image>\n              </view>\n              <view class=\"navBar--line\"></view>\n              <view class=\"navBar--home-icon\">\n                <image class=\"navBar--img sk-image\"></image>\n              </view>\n            </view>\n            <view class=\"navBar--nav-title\" style=\"line-height: 32px\">\n              <view>\n                <text style=\"color: \"></text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view is=\"component/b2cShopCart/shopCart\" class=\"shop-cart\">\n        <view class=\"shopCart--shop-cart-content\">   \n          <view class=\"b2c_ph_header sk-image sk-pseudo sk-pseudo-circle\" id=\"header\" style=\"background: url(https://upload.stage.ybm100.com/ykg_tuangou/product/73f3faf0-19df-4137-ab7e-5bc9787125c5.jpg) no-repeat center center;\">\n            <view class=\"header-box\">\n              <view class=\"b2c_ph_h_info\" style=\"margin-top:83px;\">  \n                <view class=\"b2c_ph_h_info_title sk-transparent\" style=\"background-image: #EEEEEE !important;font-size: 0; height: 80rpx\">炎炎测试药店（北京大药房旗舰店二七分店）\n                  <text style=\"border: none;\"></text>\n                </view>\n                <view class=\"b2c_ph_h_info_gz\"> \n                  <view class=\"b2c_ph_h_info_btn sk-transparent sk-text-25-0000-322 sk-text\" style=\"border: none; background-size: 39.3939% 1.625rem; background-position-x: 50%;\">关注\n                  </view>\n                  <view class=\"b2c_ph_h_info_btn_text sk-transparent sk-text-14-2857-814 sk-text\" style=\"background-size: 83.3333% 0.9625rem; background-position-x: 50%;font-size:0\">13人已关注\n                  </view>\n                </view>\n                <view class=\"b2c_ph_h_info_notice sk-transparent sk-text-0-0000-98 sk-text\" style=\"background-size: 100% 0.8125rem; background: #EEEEEE;font-size: 0\">公告：16545484844你女骨灰积极你就会你就会你民宿踢踢踢李敏速锐thus体力记录瑞虎李黎明集体静默1您1\n                </view>\n              </view>\n            </view>\n          </view>\n          <view style=\"margin-top:175px\">      \n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"248\" data-index=\"0\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">   \n                  <view class=\"title sk-transparent sk-text-14-2857-601 sk-text\" style=\"background-size: 100% 1.4rem;\">\n                三七粉（） 三七粉 极细粉 3g*10袋\n              \n                  </view>\n                  <view class=\"active_tag\"></view>\n                  <view class=\"active_tag2\"></view>\n                  <view class=\"price sk-transparent\">\n                ¥78.5\n                \n                    <view class=\"button\" data-img=\"https://upload.stage.ybm100.com/ykg_tuangou/product/b0866d6d-78b4-4b01-99fb-8bc5ced7e499.png\" data-item=\"[object Object]\">\n                      <view class=\"sk-transparent sk-text--14-7059-359 sk-text\" style=\"background-size: 66.4844% 1.0625rem; background-position-x: 50%;\">+\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"174\" data-index=\"1\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">   \n                  <view class=\"title sk-transparent sk-text-14-2857-744 sk-text\" style=\"background-size: 100% 1.4rem;\">\n                西咪替丁片 西咪替丁片 0.2克*100片/瓶\n              \n                  </view>\n                  <view class=\"active_tag\"></view>\n                  <view class=\"active_tag2\"></view>\n                  <view class=\"price sk-transparent\">\n                ¥0.02\n                \n                    <view class=\"button\" data-img=\"https://upload.test.ybm100.com//ykg_tuangou/product/2821a131-6f1e-42da-880f-f5afbb1705da.jpg\" data-item=\"[object Object]\">\n                      <view class=\"sk-transparent sk-text--14-7059-256 sk-text\" style=\"background-size: 66.4844% 1.0625rem; background-position-x: 50%;\">+\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"127\" data-index=\"2\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">   \n                  <view class=\"title sk-transparent sk-text-14-2857-446 sk-text\" style=\"background-size: 82.618% 1.4rem;\">\n                天王补心丸 天王补心丸 120g\n              \n                  </view>\n                  <view class=\"active_tag\"></view>\n                  <view class=\"active_tag2\"></view>\n                  <view class=\"price sk-transparent\">\n                ¥78.5\n                \n                    <view class=\"button\" data-img=\"https://tuan.test.ybm100.com/customerimages/750_750.png\" data-item=\"[object Object]\">\n                      <view class=\"sk-transparent sk-text--14-7059-718 sk-text\" style=\"background-size: 66.4844% 1.0625rem; background-position-x: 50%;\">+\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"40\" data-index=\"3\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">   \n                  <view class=\"title sk-transparent sk-text-14-2857-445 sk-text\" style=\"background-size: 100% 1.4rem;\">\n                北京人参蜂王浆口服液 北京人参蜂王浆口服液 10ml*10支\n              \n                  </view>\n                  <view class=\"active_tag\"></view>\n                  <view class=\"active_tag2\"></view>\n                  <view class=\"price sk-transparent\">\n                ¥78.5\n                \n                    <view class=\"button\" data-img=\"https://tuan.test.ybm100.com/customerimages/750_750.png\" data-item=\"[object Object]\">\n                      <view class=\"sk-transparent sk-text--14-7059-670 sk-text\" style=\"background-size: 66.4844% 1.0625rem; background-position-x: 50%;\">+\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"138\" data-index=\"4\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">   \n                  <view class=\"title sk-transparent\">\n                贝康安牌复合维生素B糖浆 贝康安牌复合维生素B糖浆 60ml\n              \n                    <view class=\"b2c_cf sk-transparent sk-text-15-6250-137 sk-text\" style=\"background-size: 100% 1rem; background-position-x: 50%;\">处方药\n                    </view>\n                  </view>\n                  <view class=\"active_tag\">\n                    <view class=\"tag sk-transparent sk-text-15-6250-402 sk-text\" style=\"border: none; background-size: 100% 1rem; background-position-x: 50%;\">限时促销\n                    </view>\n                  </view>\n                  <view class=\"active_tag2\"></view>\n                  <view class=\"price sk-transparent\">\n                ¥2 \n                    <text class=\"sk-transparent sk-text-14-2857-737 sk-text\" style=\"text-decoration-color: transparent; background-size: 100% 0.9625rem;\">¥22\n                    </text>\n                    <view class=\"button\" data-img=\"https://tuan.test.ybm100.com/customerimages/750_750.png\" data-item=\"[object Object]\">\n                      <view class=\"sk-transparent sk-text--14-7059-692 sk-text\" style=\"background-size: 66.4844% 1.0625rem; background-position-x: 50%;\">+\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"132\" data-index=\"5\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">   \n                  <view class=\"title sk-transparent\">\n                测试专用，勿动！！（不支持快递，支持门店自提） 洋参含片(无糖) 600mg*12片\n              \n                    <view class=\"b2c_cf sk-transparent sk-text-15-6250-645 sk-text\" style=\"background-size: 100% 1rem; background-position-x: 50%;\">处方药\n                    </view>\n                  </view>\n                  <view class=\"active_tag\"></view>\n                  <view class=\"active_tag2\"></view>\n                  <view class=\"price sk-transparent\">\n                ¥78.5\n                \n                    <view class=\"button\" data-img=\"https://tuan.test.ybm100.com/customerimages/750_750.png\" data-item=\"[object Object]\">\n                      <view class=\"sk-transparent sk-text--14-7059-206 sk-text\" style=\"background-size: 66.4844% 1.0625rem; background-position-x: 50%;\">+\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem sk-pseudo sk-pseudo-circle\">\n              <view class=\"itemTop flex\" data-id=\"5\" data-index=\"6\"> \n                <image lazy-load=\"true\" class=\"sk-image\"></image>\n                <view class=\"itemInfo\">  \n                  <view class=\"title sk-transparent sk-text-14-2857-833 sk-text\" style=\"background-size: 100% 1.4rem;\">\n                维血牌氨基酸胶囊 维血牌氨基酸胶囊 0.25g*100粒\n              \n                  </view>\n                  <view class=\"active_tag\"></view>\n                  <view class=\"active_tag2\"></view>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"b2c_detailed_list sk-transparent\">\n        清单\n      \n            <view class=\"b2c_detailed_list_num sk-transparent sk-text-21-7391-466 sk-text\" style=\"border: none; background-size: 33.8995% 1.4375rem; background-position-x: 50%;\">3\n            </view>\n          </view>\n          <view class=\"good_box\" hidden=\"true\" style=\"border: none;\">\n            <image class=\"sk-image\"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>"},"convertDir/pages/b2c/pages/placeOrder/placeOrder":{"json":{"shop-cart":"../../../../component/b2cShopCart/shopCart","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxss":"@import '/common/tableView.wxss';\n\n.common_section {\n  margin: 20rpx;\n  position: relative;\n  border-radius: 12rpx;\n}\n\n.common_section .cell-height {\n  height: 90rpx;\n}\n\n.common_section .cell-height .cell_right {\n  padding-left: 50rpx;\n}\n\n.common_section .cell .cell_center {\n  flex: 1;\n}\n\n.common_section .cell .cell_center .symbol {\n  display: inline-block;\n  width: 32rpx;\n  height: 32rpx;\n  text-align: center;\n  line-height: 32rpx;\n  border-radius: 32rpx;\n  color: #C5C6D5;\n  border: 1rpx solid #C5C6D5;\n  margin-left: 14rpx;\n} \n\n.common_section .cell .cell_right {\n  color: #999999;\n}\n\n.common_section .cell_right .user-name {\n  color: #00b955;\n}\n\n.common_section .cell .red {\n  color: #FF2121;\n  font-weight: bold;\n}\n\n.common_section .cell .small-size {\n  font-size: 24rpx;\n}\n\n.address_box .cell{\n  padding: 30rpx;\n  height: inherit;\n}\n.address_box .cell .cell_center {\n  width: 100%;\n}\n\n.address_box .cell::before {\n  border: 0;\n}\n\n.address_box .cell_center .empty {\n  text-align: center;\n  font-size: 30rpx;\n  color: #666;\n  height: 88rpx;\n  line-height: 88rpx;\n  border: 1rpx dashed #E1E1E1;\n}\n\n.address_box .cell_center .empty text {\n  margin-right: 5rpx;\n  font-size: 40rpx;\n}\n\n/* .address_box .colour_bar {\n  width: calc(100vw - 24rpx - 24rpx);\n  margin: 0 auto;\n  height: 2rpx;\n  background: #EFF0F5;\n} */\n\n.address_box .cell_center .name {\n  display: flex;\n  align-items: center;\n}\n.address_box .cell_center .name text {\n  font-size: 34rpx;\n  margin-right: 20rpx;\n}\n\n.address_box .cell_center .name .tag {\n  font-size: 24rpx;\n  background: rgba(0,122,255,0.08);\n  height: 30rpx;\n  line-height: 30rpx;\n  border-radius: 4rpx;\n  padding: 0 16rpx;\n  color: #00b955;\n}\n\n.address_box .cell_center .detail {\n  font-size: 28rpx;\n  color: #999999;\n}\n\n.sku-list_section .cell-bottom {\n  border-top: 1rpx solid #EEEEEE;\n}\n\n.cell-detail .flex-right input{\n  width: 100%;\n  color: #999999;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.rule-cell {\n  color: #FF6010;\n  font-size: 26rpx;\n  background: #FFF6D5;\n  height: 64rpx;\n  line-height: 64rpx;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  bottom: 140rpx;\n  width: 100%;\n  justify-content: center;\n}\n\n.rule-cell image {\n  width: 36rpx;\n  height: 36rpx;\n}\n\n.footer {\n  height: 140rpx;\n  width: 100%;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  font-size: 30rpx;\n  display: flex;\n  align-items: center;\n  background: #FFFFFF;\n  padding: 35rpx 30rpx;\n  box-sizing: border-box;\n  border-top: 1rpx solid #EEEEEE;\n  z-index: 1\n}\n\n.footer .footer__left {\n  flex: 1;\n  line-height: 35rpx;\n}\n\n.footer .footer__left .red {\n  color: #FF4531;\n  font-size: 30rpx;\n}\n\n.footer .footer__left .tips text {\n  margin-right: 20rpx;\n  color: #A9A7A7;\n  font-size: 20rpx;\n}\n\n.footer .footer__right {\n  width: 200rpx;\n  height: 70rpx;\n  line-height: 70rpx;\n  color: #FFFFFF;\n  background: #00b955;\n  font-weight: bold;\n  font-size: 36rpx;\n  margin-left: 20rpx;\n  text-align: center;\n  border-radius: 70rpx;\n}\n\n.phcolor {\n  color: #999999;\n  font-weight: 400;\n}\n\n.drugstore-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}","wxml":"\n  <view class=\"placeOrder-auto-container\">  \n    <navBar title-text=\"确认订单\" :higherNav=\" true \" background=\"#00b955\" titleColor=\"#fff\"></navBar>\n    <view :class=\"[container,( isSrc_whyb ? 'djk-view' : '' )]\" :style=\"{padding-top:  navBarHeight+6  + 'px' ,padding-bottom:  submitDetail.userSubsidyText ? '204rpx' : '140rpx'}\">       \n      <view class=\"common_section address_box\" bindtap=\"toSelectAddress\">\n        <view :class=\"[cell,( userAddress.id ? 'arrow' : '' )]\"> \n          <view class=\"cell_center\" v-if=\" userAddress.id \"> \n            <view class=\"name\">  \n              <text class=\"bold\">{{ userAddress.recipientName }}\n              </text>\n              <text class=\"bold\">{{ userAddress.insensitivePhone }}\n              </text>\n              <text class=\"tag\" v-if=\" userAddress.label \">{{ userAddress.label }}\n              </text>\n            </view>\n            <view class=\"detail\">{{ userAddress.selectNearbyAddress }}{{ userAddress.address }}\n            </view>\n          </view>\n          <view class=\"cell_center\" v-else>\n            <view class=\"empty\">请添加您的地址信息\n        \n              <text>+\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\">\n        <view class=\"cell arrow cell-height\" bindtap=\"toRegisterInfo\" v-if=\" submitDetail.showAntiepidemicRegister \"> \n          <view class=\"cell_center\">疾病防控登记\n            <text class=\"red\" v-if=\" submitDetail.mustInputAntiepidemicRegister \">*\n        \n            </text>\n          </view>\n          <view :class=\"[cell_right,( registerInfo ? 'theme-text' : '' )]\">\n        {{ registerInfo.patientName ? registerInfo.patientName : '请填写疫病防控登记信息'}}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\">  \n        <view :class=\"[cell,cell-height,( inquiryPrescription ? '' : 'arrow')]\" v-if=\" submitDetail.hasPrescribeMedicine || inquiryPrescription \" :bindtap=\" inquiryPrescription ? '' : 'toChoosePatient' \"> \n          <view class=\"cell_center\">用药人信息\n            <text class=\"red\">* \n            </text>\n          </view>\n          <view class=\"cell_right\"> \n            <text v-if=\" patientObj.patientName || inquiryPrescription \" class=\"user-name\">{{ patientObj.patientName }}\n            </text>\n            <text class=\"green\" v-else>请添加用药人信息\n            </text>\n          </view>\n        </view>\n        <view :class=\"[cell,cell-height,( inquiryPrescription ? '' : 'arrow')]\" v-if=\" submitDetail.hasPrescribeMedicine || inquiryPrescription \">   \n          <view class=\"cell_center\">处方信息\n            <text class=\"red\">* \n            </text>\n          </view>\n          <view class=\"cell_right\" v-if=\" (clickType == 1 && canUsePrescribeId) || inquiryPrescription \" bindtap=\"toPrescriptionDetail\">\n            <text>查看处方\n            </text>\n          </view>\n          <view class=\"cell_right\" v-else-if=\" clickType == 0 && uploadPrescriptionData.length > 0 \" bindtap=\"toAddPrescription\">\n            <text>已添加\n            </text>\n          </view>\n          <view class=\"cell_right\" v-else bindtap=\"checkMedicinesPrescribe\" data-type=\"tapAdd\">\n            <text class=\"green\">添加\n            </text>\n          </view>\n        </view>\n        <view class=\"cell arrow cell-height\" v-if=\" submitDetail.needRealName \" bindtap=\"toRegister\"> \n          <view class=\"cell_center\">实名认证\n            <text class=\"red\">* \n            </text>\n          </view>\n          <view class=\"cell_right\">\n            <text>{{ selectedUserInfo.name ? selectedUserInfo.name : '去认证' }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section sku-list_section\" v-for=\"(item, index) in  submitDetail.orderDetailList \" :key=\"index\">   \n        <view class=\"cell cell_title\">\n          <view class=\"cell_center bold drugstore-name\">{{ item.drugstoreName }}\n          </view>\n        </view>\n        <view class=\"cell sku-list__cell\" v-for=\"(order, index) in  item.skus \" :key=\"index\"> \n          <view class=\"cell_left\"> \n            <view class=\"is_medicare_tag\" v-if=\"item.isMedicare == 1\">支持医保卡\n            </view>\n            <image class=\"image\" :src=\" order.mainPhoto \" mode=\"aspectFit\"></image>\n          </view>\n          <view class=\"cell_center content-cell__detail\">   \n            <view class=\"content-cell--name\"> \n              <view class=\"name\">\n            {{ order.skuName }} {{ order.commonName }} {{ order.skuSpec }}\n          \n                <text class=\"cell-name__icon\" v-if=\" order.prescribeMedicine \">处方药\n                </text>\n              </view>\n              <view class=\"content-cell--number\">x{{ order.skuNum }}\n              </view>\n            </view>\n            <view v-if=\" order.activityInfos.length > 0 \">\n              <text class=\"mark-icon-ms\" v-for=\"(item, index) in  order.activityInfos \" :key=\"index\">{{ item.label }}\n              </text>\n            </view>\n            <view class=\"empty\"></view>\n            <view> \n              <text class=\"price bold\">￥{{ order.price }}\n              </text>\n              <text class=\"common-line-price\" v-if=\" order.salePrice \">¥{{ order.salePrice }}\n              </text>\n            </view>\n          </view>\n        </view>\n        <view class=\"cell-detail\">   \n          <view class=\"cell-detail__flex\"> \n            <view>配送方式\n            </view>\n            <view class=\"flex-right\">快递 {{ item.deliveryAmountDesc > 0 ? '¥' + item.deliveryAmountDesc : '免邮' }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.activityAmountDesc > 0 \"> \n            <view>活动优惠\n            </view>\n            <view class=\"flex-right\">-¥{{ item.activityAmountDesc }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.merchantCouponAmountDesc > 0 || item.hasCanUseCoupon \"> \n            <view>店铺优惠券\n            </view>\n            <view class=\"flex-right arrow\" bindtap=\"toChooseCoupon\" :data-store-id=\" item.drugstoreId \">\n          {{ item.merchantCouponAmountDesc > 0 ? '-¥' + item.merchantCouponAmountDesc : '不使用优惠券' }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\"> \n            <view>订单备注\n            </view>\n            <view class=\"flex-right\">\n              <input placeholder=\"选填，给商家留言\" maxlength=\"50\" placeholder-class=\"phcolor\" bindinput=\"getRemark\" :data-index=\" index \"></input>\n            </view>\n          </view>\n        </view>\n        <view class=\"cell-bottom\"> \n          <view class=\"total-price bold\">¥{{ item.totalAmountDesc }}\n          </view>\n          <view>共{{ item.skuTotal }}件 商品金额¥{{ item.originAmountDesc }}\n        \n        运费¥{{ item.deliveryAmountDesc }}\n            <text v-if=\" platformType !=3 \">优惠¥{{ item.actCouponAmountWithoutPlatformCouponDesc }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\"> \n        <view class=\"cell arrow cell-height\" v-if=\" platformType != 3 \"> \n          <view class=\"cell_center\">平台优惠券\n          </view>\n          <view class=\"cell_right\" bindtap=\"toChooseCoupon\" data-store-id=\"0\">\n            <text>{{ submitDetail.platformCouponAmountDesc > 0 ? '¥' + submitDetail.platformCouponAmountDesc : hasPlatformCoupon ? '不使用优惠券' : '暂无可用优惠券' }}\n            </text>\n          </view>\n        </view>\n        <view v-else-if=\" platformType ==3 \"> \n          <view class=\"cell cell-height\" bindtap=\"openRuleBox\" data-type=\"1\">  \n            <view class=\"cell_tag\">险\n            </view>\n            <view class=\"cell_center\">保险报销药费\n              <text class=\"symbol\">?\n              </text>\n            </view>\n            <view :class=\"[cell_right,( submitDetail.insuranceInfoResultVo.hasUseInsurance ? 'red' : 'small-size' )]\">\n              <text>{{ submitDetail.insuranceInfoResultVo.hasUseInsurance ? '-¥'+submitDetail.insuranceInfoResultVo.insuranceAmountDesc :  submitDetail.insuranceInfoResultVo.tip2 }}\n              </text>\n            </view>\n          </view>\n          <view class=\"cell cell-height\" bindtap=\"openRuleBox\" data-type=\"2\" v-if=\"submitDetail.insuranceInfoResultVo.insuranceDeliveryAmountDesc != 0\">  \n            <view class=\"cell_tag\">险\n            </view>\n            <view class=\"cell_center\">保险报销运费\n              <text class=\"symbol\">?\n              </text>\n            </view>\n            <view class=\"cell_right red\">\n              <text>-¥ {{submitDetail.insuranceInfoResultVo.insuranceDeliveryAmountDesc}}\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"rule-cell\" bindtap=\"openRuleBox\" data-type=\"3\" v-if=\" submitDetail.userSubsidyText \"> \n        <text>{{ submitDetail.userSubsidyText }}\n        </text>\n        <image mode=\"scaleToFill\" src=\"../../../../images/icon-question-mark.png\"></image>\n      </view>\n      <view class=\"footer\"> \n        <view class=\"footer__left\"> \n          <view class=\"red bold\">¥\n            <text style=\"font-size: 40rpx\">{{ submitDetail.payAmountDesc }}\n            </text>\n          </view>\n          <view class=\"tips\">   \n            <text>商品金额¥{{ submitDetail.originAmountDesc }}\n            </text>\n            <text v-if=\" platformType !=3 \">优惠¥{{ submitDetail.actCouponAmountDesc }}\n            </text>\n            <text>运费¥{{ submitDetail.deliveryAmountDesc }}\n            </text>\n            <text v-if=\" platformType ==3 && submitDetail.insuranceInfoResultVo \">保险报销{{ submitDetail.insuranceInfoResultVo.insuranceTotalAmountDesc }}\n            </text>\n          </view>\n        </view>\n        <view class=\"footer__right\" bindtap=\"toCheck\">去支付\n        </view>\n      </view>\n      <shop-cart class=\"shop-cart\"></shop-cart>\n    </view>\n    <halfScreenDialog :show=\" ruleBoxShow \" title=\"规则内容\" type=\"2\" btnText=\"知道了\">\n      <view slot=\"desc\">  \n        <block v-if=\" ruleType == 1 \">\n          <view v-for=\"(item, index) in  submitDetail.insuranceInfoResultVo.tip1 \" :key=\"index\">{{ item }}\n          </view>\n        </block>\n        <block v-else-if=\" ruleType == 2 \">\n          <view v-for=\"(item, index) in  submitDetail.insuranceInfoResultVo.deliveryInsuTip \" :key=\"index\">{{ item }}\n          </view>\n        </block>\n        <block v-else-if=\" ruleType == 3 \">\n          <view>{{submitDetail.userSubsidyTips}}\n          </view>\n        </block>\n      </view>\n    </halfScreenDialog>\n  </view>","js":"import {\n  ajax,\n  ajax2,\n  toWeixinPayNew\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      oderPromotion:[],//推广标记匹配当前订单的数组，用来删除下单成功的标记缓存\n      submitDetail: {},\n      patientObj: {}, //用药人信息\n      clickType: 1,//上传处方选择的方式\n      selectedUserInfo: {},//实名信息\n      orderDetailList: [],//请求详情参数集合\n      userAddress: {},//配送地址\n      uploadPrescriptionData: [],//上传的处方图片\n      usedCouponList: [],//可用优惠券列表\n      platformCoupon: {},//平台优惠券\n      selectedCoupon: {},//切换选中的优惠券\n      hasPlatformCoupon: false,//有可用平台优惠券\n      isSrc_whyb: getApp().globalData.src_whyb || '',\n      donNotCleanCart: false, // 默认支付完成清除购物车指定商品 从商品详情直接下单的商品不清除\n      selectUserPatientList: [], // 用药人信息列表\n      navBarHeight: getApp().globalData.navBarHeight,\n      registerInfo: {\n        patientName: '',\n        patientIdCard: '',\n        phone: '',\n        address: '',\n        temperature: '',\n        symptom: [],\n        hasBeenDangerousArea: false\n      },\n      platformType: 1,//平台类型1:宜块钱;2:武汉大健康;3:保险\n      ruleBoxShow: false,\n      supportCode: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.donNotCleanCart) this.data.donNotCleanCart = true;\n    console.log(this.data.donNotCleanCart)\n    getApp().globalData.burySpotSDK.track(`page_confirmOrderExpo`);\n\n    Taro.removeStorageSync('prescription_image_data');\n    Taro.removeStorageSync('upload_click_type');\n\n    //接受患者信息和处方，之后不可修改患者\n    if(options.inquiryPrescription) {\n      let inquiryPrescription = JSON.parse(options.inquiryPrescription);\n      console.log(inquiryPrescription)\n      this.setData({\n        inquiryPrescription,\n        platformType: inquiryPrescription.inquirySource == 5 ? 3 : 1,\n        supportCode: inquiryPrescription.thirdChannel\n      })\n    }\n    \n    // 如果传递了地址id 取当前地址请求数据\n    options.addressId && (this.data.userAddress.id = options.addressId);\n\n\n    this.data.orderDetailList = options.orderDetailList ? JSON.parse(options.orderDetailList) : [];\n    this.getCoupon();\n    this.handle24Hours();\n  },\n  // 清掉当前订单匹配的缓存标记leo\n  handleEliminatePromotion(){\n    //获取缓存标记\n    let promotion = Taro.getStorageSync('promotion'); \n    // 获取匹配的缓存数组\n    let storeList = this.data.oderPromotion;\n    // 如果有匹配的标记则遍历删除\n    if(storeList.length > 0){\n      storeList.forEach((item)=>{\n        delete promotion[item]\n      })\n      // 处理完的标记，则更新缓存\n      Taro.setStorage({\n        key: 'promotion',\n        data: promotion\n      })\n    }\n  },\n  // 缓存超过24小时清空处理；leo\n  handle24Hours(){\n    let that = this;\n    //获取缓存标记\n    let promotion = Taro.getStorageSync('promotion'); \n    //如果缓存有数据\n    if(promotion && JSON.stringify(promotion) != \"{}\"){\n      //当前时间戳\n      let time = Date.parse(new Date()); \n      for(let key  in promotion){\n        console.log(promotion[key])\n        // 如果超过24小时则删除标记     24*60*60*1000\n        if((time - promotion[key].storageTime)/(24*60*60*1000) > 1){\n          delete promotion[key]   \n        }else{ \n          //否则判断当前订单是否有满足当前标记的药店+商品，满足则把标记打到商品上\n          let goodsList = that.data.orderDetailList[0].skus;\n          let drugStore = that.data.orderDetailList[0].drugstoreId;\n          // 遍历订单商品list，查找匹配标记\n          goodsList.forEach((item,index)=>{\n            // 如果有匹配标记种在商品对象中'\n            if(key == (JSON.stringify(drugStore) + JSON.stringify(item.skuId))){\n              that.data.oderPromotion.push(key);\n              // 在订单商品list找到匹配推广标记的商品，将标记种在商品对象中\n              item = Object.assign(item,{\n                promoterId:parseInt(promotion[key].promoterId), // 推广员id\n                popularizeId:parseInt(promotion[key].popularizeId), // 任务id\n                promoterDrugstoreId:parseInt(promotion[key].promoterDrugstoreId) //药店id\n              })\n            }\n          })\n          console.log(goodsList)\n          that.data.orderDetailList[0].skus = goodsList;\n        }\n      }\n      // 处理完的标记，则更新缓存\n      Taro.setStorage({\n        key: 'promotion',\n        data: promotion\n      })\n    }\n  },\n  onShow: function () {\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || '',\n    })\n    Taro.removeStorageSync('selected_disgnosis_name');\n\n    //处方上传方式 1处方问诊 0图片\n    this.setData({\n      clickType: Taro.getStorageSync('upload_click_type') || 1,\n      uploadPrescriptionData: Taro.getStorageSync('prescription_image_data') || [],\n    })\n    \n    //切换地址返回刷新数据\n    if((this.data.userAddress && this.data.userAddress.id) != (this.data.submitDetail.userAddressVo && this.data.submitDetail.userAddressVo.id)) this.getGoodsDetail();\n    let userAddress = this.data.userAddress;\n    if(userAddress){\n      userAddress.recipientName = userAddress.consignee || userAddress.recipientName;\n      userAddress.insensitivePhone = userAddress.insensitivityPhone || userAddress.insensitivePhone;\n      userAddress.selectNearbyAddress = userAddress.selectNearyAddress || userAddress.selectNearbyAddress;\n      this.setData({ userAddress });\n    }\n    //切换优惠券返回 storeId区分平台店铺\n    if (this.data.selectedCoupon.storeId == 0) {\n      //使用平台券并清空店铺券\n      this.data.platformCoupon = this.data.selectedCoupon.notUse ? {} : this.data.selectedCoupon;\n      if(this.data.selectedCoupon.notUse) {\n        this.data.usedCouponList.forEach(couponsItem => {\n          this.data.orderDetailList.forEach(orderTtem => couponsItem.storeId == orderTtem.drugstoreId && (orderTtem.merchantCouponId = couponsItem.coupons[0].id));\n        })\n      }else{\n        this.data.orderDetailList.forEach(item => item.merchantCouponId = '');\n      }\n      this.getGoodsDetail();\n    }else if(this.data.selectedCoupon.storeId > 0) {\n      //使用店铺券，清除平台券\n      if(!this.data.selectedCoupon.notUse) this.data.platformCoupon = {};\n      this.data.orderDetailList.forEach((orderTtem, index) => {\n        this.data.usedCouponList.forEach(couponsItem => {\n          if(couponsItem.storeId == orderTtem.drugstoreId && !orderTtem.merchantCouponId){\n            orderTtem.merchantCouponId = couponsItem.coupons[0].id\n          }\n        });\n        if(orderTtem.drugstoreId == this.data.selectedCoupon.storeId) orderTtem.merchantCouponId = this.data.selectedCoupon.id;\n      });\n      // this.data.orderDetailList[index].merchantCouponId = this.data.selectedCoupon.id;\n      this.getGoodsDetail();\n    }\n    if (this.data.patientObj && this.data.patientObj.id) this.checkMedicinesPrescribe();\n    //防疫登记和处方用药人为同一人(防疫登记已填写不自动根据用药人变更)\n    if(this.data.submitDetail.hasPrescribeMedicine && !this.data.registerInfo.patientName) this.data.registerInfo.id = this.data.patientObj.id;\n  },\n  /**\n   * 查询是否有可用优惠券\n   */\n  getCoupon() {\n    ajax2('post', 'marketing/order/coupons/queryAvailableCoupons', {\n      storeParams: this.data.orderDetailList\n    }, res => {\n      if (res == 2) return false;\n      if (res.data.code == 0) {\n        res.data.result && res.data.result.forEach(responseData => {\n          if(responseData.storeId == 0) this.data.hasPlatformCoupon = true;\n          //区分是否是平台券最优还是店铺最优defaultOption=1最优\n          if(responseData.storeId == 0 && responseData.coupons[0].defaultOption == 1) {\n            this.data.platformCoupon = responseData.coupons[0];\n          }\n          this.data.orderDetailList.forEach(item => {\n            if(responseData.storeId == item.drugstoreId && responseData.coupons[0].defaultOption == 1) item.merchantCouponId = responseData.coupons[0].id;\n          });\n        })\n\n        this.getGoodsDetail();\n        this.data.usedCouponList = res.data.result;\n        this.setData({\n          hasPlatformCoupon: this.data.hasPlatformCoupon\n        })\n      }else{\n        this.getGoodsDetail();\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 获取下单详情\n   */\n  getGoodsDetail() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n\n    ajax2('post', 'api/ykq/order/r/submit/preview', {\n      orderDetailList: this.data.orderDetailList,\n      addressId: this.data.userAddress ? this.data.userAddress.id : '',\n      platformCouponId: this.data.platformCoupon.id,\n      platformType: this.data.platformType,\n      supportCode: this.data.supportCode\n    }, res => {\n      Taro.hideLoading()\n      if (res == 2) return false;\n      if(res.data.code == 0) {\n        //skuErrorType.val 大于0代表部分商品不足或者下架，需要提示剔除商品\n        if(res.data.result.skuErrorType.val > 0) {\n          Taro.showToast({\n            title: res.data.result.skuErrorType.desc,\n            icon: 'none'\n          })\n\n          // 用入参对比后台返回参数，过滤剔除的药店\n          let orderDetailList = this.data.orderDetailList.filter(item => res.data.result.orderDetailList.some( responseData => {\n            item.skus = [];\n            responseData.skus.forEach( sku => item.skus.push({ skuId: sku.skuId, skuNum: sku.skuNum }))\n            return item.drugstoreId == responseData.drugstoreId;\n          }))\n\n          this.data.orderDetailList = orderDetailList;\n        }\n\n        //控制是否展示店铺券入口，展示逻辑没有用券但是有可用券\n        this.data.usedCouponList.forEach(couponsItem => {\n          res.data.result.orderDetailList.forEach(orderItme => couponsItem.storeId == orderItme.drugstoreId && (orderItme.hasCanUseCoupon = true))\n        })\n\n        if (!this.data.registerInfo.phone && res.data.result.userAddressVo) {\n          this.data.registerInfo.phone = res.data.result.userAddressVo.insensitivePhone\n        }\n        if (!this.data.registerInfo.address && res.data.result.userAddressVo) {\n          this.data.registerInfo.address = res.data.result.userAddressVo.selectNearbyAddress + res.data.result.userAddressVo.address\n        }\n\n        this.setData({\n          submitDetail: res.data.result,\n          userAddress: res.data.result.userAddressVo,\n          usedCouponList: this.data.usedCouponList\n        })\n        if(this.data.inquiryPrescription) {\n          this.setData({\n            patientObj: this.data.inquiryPrescription.patientObj\n          })\n        }else {\n          this.getPatientList();\n        }\n        \n        this.getRealName();\n      }else{\n        //全部商品库存不足或已下架，返回上一页\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.navigateBack({\n            delta: 1\n          })\n        }, 1000);\n      }\n    })\n  },\n  /**\n   * 存在处方订单获取用药人列表\n   */\n  getPatientList() {\n    if(!this.data.submitDetail.hasPrescribeMedicine) return false;\n    ajax2('POST', 'api/userPatient/selectUserPatientList', {\n      userId: Taro.getStorageSync('userInfo').userId\n    }, res => {\n      if (res.data.code == 0) {\n        res.data.result && res.data.result.forEach(item => {\n          if (item.isDefaultSelected == 1 && item.patientIDCard.length > 0) {\n            // 只有isDefaultSelected== 1 的item 存在身份证号码时，才进行赋值\n            this.data.patientObj = item\n          }\n        })\n        this.setData({\n          patientObj: this.data.patientObj,\n          selectUserPatientList: res.data.result || []\n        })\n        //防疫登记和处方用药人为同一人(订单包含处方才设置默认用药人)\n        this.data.registerInfo.id = this.data.registerInfo.id || this.data.patientObj.id;\n\n        if(this.data.patientObj.id) this.checkMedicinesPrescribe();\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  /**\n   * 获取用户实名登记信息\n   */\n  getRealName(){\n    if(!this.data.submitDetail.needRealName) return false;\n    ajax('get', 'mimiapp/userCertification/getUserCertification', {}, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          selectedUserInfo:res.data.result\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          duration: 3000,\n          icon: 'none'\n        })\n      }\n    })\n  },\n   /**\n   * 添加/切换收货地址\n   */\n   toSelectAddress() {\n    Taro.navigateTo({\n      url: `/pages/note/selectAddress/selectAddress?userAddress=${ JSON.stringify(this.data.userAddress) }`\n    })\n  },\n  /**\n   * 跳转优惠券列表页面\n   */\n  toChooseCoupon(e) {\n    // if(this.data.usedCouponList.length <= 0) return false;\n\n    let { storeId } = e.currentTarget.dataset,\n        couponList = [],\n        selectedCoupon;\n    this.data.usedCouponList && this.data.usedCouponList.forEach(item => {\n      if(item.storeId == storeId) couponList = item.coupons;\n      if(storeId == 0) {\n        selectedCoupon = JSON.stringify(this.data.selectedCoupon) != '{}' ? \n        this.data.selectedCoupon : this.data.platformCoupon;\n      }else {\n        selectedCoupon = JSON.stringify(this.data.selectedCoupon) != '{}' ? this.data.selectedCoupon : item.coupons[0];\n      }\n    })\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/chooseCoupon/chooseCoupon?couponList=${ JSON.stringify(couponList) }&selectedCouponId=${ selectedCoupon && selectedCoupon.id }`\n    })\n  },\n  /**\n   * 添加/切换用药人信息\n   */\n  toChoosePatient() {\n    getApp().globalData.burySpotSDK.track(`action_confirmOrder_patientInformationClick`);\n    // if (this.data.patientObj.id) {\n    if (this.data.selectUserPatientList.length > 0) {\n      //有患者列表点击跳转患者管理，反之跳转新增患者\n      Taro.navigateTo({\n        url: `/pages/note/patient/patientInfoManage/patientInfoManage?currentPatientId=${ this.data.patientObj.id }`,\n      })\n    } else {\n      Taro.navigateTo({\n        url: '/pages/note/patient/patientInfo/patientInfo?pageFrom=inquiryInfo',\n      })\n    }\n  },\n  /**\n   * 实名认证\n   */\n  toRegister() {\n    Taro.navigateTo({\n      url: '/pages/note/realNameRegister/realNameRegister'\n    }) \n  },\n  /**\n   * 绑定备注\n   */\n  getRemark(e) {\n    let index = e.currentTarget.dataset.index;\n    this.data.orderDetailList[index].remark = e.detail.value;\n  },\n  /**\n   * 校验处方药品\n   */\n  checkMedicinesPrescribe(e, type) {\n    //避免重复点击\n    if (type !='orderSubmit' && (new Date().getTime() - this.data.prescribeClickTime < 2000)) return false;\n    this.data.prescribeClickTime = new Date().getTime();\n\n    if (e) type = e.currentTarget.dataset.type;\n\n    if(type == 'tapAdd') getApp().globalData.burySpotSDK.track(`action_confirmOrder_prescriptionInformationClick`);\n\n    //添加处方前先判断是否填写用药人信息\n    if (this.data.submitDetail.hasPrescribeMedicine && !this.data.patientObj.id) {\n      Taro.showToast({\n        title: '请填写用药人信息',\n        icon: 'none'\n      })\n      return false;\n    }\n\n    let productAndNums = this.skuListRename();\n\n    ajax2('post', 'mimiapp/grouparea/checkMedicinesPrescribe', {\n      patientGuid: this.data.patientObj.id,\n      productAndNums\n    }, res => {\n      //判断商品中包含处方药品是否超过5种且是否已有处方单,code=1代表超5种\n      if (res.data.code == 0) {\n        //存在处方单result返回处方ID，不存在返回空字符串\n        if(res.data.result) {\n          Taro.showToast({\n            title: '检测到您有未使用的处方，系统已为您自动添加',\n            icon: 'none'\n          })\n        }\n        //判断是否手动触发\n        if(type == 'tapAdd') this.toAddPrescription();\n        //点击下单按钮触发\n        if(type == 'orderSubmit') this.orderSubmit();\n        this.setData({\n          canUsePrescribeId: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n          duration:2000\n        })\n      }\n    })\n  },\n  /**\n   * 老接口参数key不一致，重命名\n   */\n  skuListRename() {\n    let result = [];\n    this.data.orderDetailList.forEach( item => {\n      item.skus.forEach( sku => {\n        result.push({\n          productId: sku.skuId,\n          productNum: sku.skuNum\n        })\n      })\n    })\n    return result;\n  },\n  toAddPrescription(){\n    //过滤非处方订单\n    let prescriptionData = [],\n        drugStoreId;\n    this.data.submitDetail.orderDetailList.forEach(item => {\n      item.skus.forEach(sku => {\n        if (sku.prescribeMedicine) {\n          prescriptionData.push({\n            productId: sku.skuId,\n            productNum: sku.skuNum\n          })\n        }\n      })\n    });\n    drugStoreId = this.data.submitDetail.orderDetailList.find(item => item.hasPrescribeMedicine).drugstoreId;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/uploadPrescription/uploadPrescription?medicinesList=${ JSON.stringify(prescriptionData )}&patientId=${ this.data.patientObj.id }&drugStoreId=${ drugStoreId }&type=${ this.data.clickType }`\n    })\n  },\n  toPrescriptionDetail() {\n    let url = this.data.inquiryPrescription ? \n    `/pages/inquiry/prescriptionDetails/prescriptionDetails?inquiryId=${ this.data.inquiryPrescription.prescriptionId }` :\n    `/pages/onlineGoods/prescriptionDetails/prescriptionDetails?inquiryId=${ this.data.canUsePrescribeId }`\n    Taro.navigateTo({\n      url \n    })\n  },\n  /**\n   * 校验提单参数\n   */\n  toCheck() {\n    let data = {\n      orderDetailList: this.data.orderDetailList,\n      addressId: this.data.userAddress && this.data.userAddress.id,\n      platformCouponId: this.data.platformCoupon.id,\n      buryPoint: getApp().globalData.pointData || '',\n      channel: getApp().globalData.globalSource || '',\n      showAntiepidemicRegister: this.data.submitDetail.showAntiepidemicRegister,\n      mustInputAntiepidemicRegister: this.data.submitDetail.mustInputAntiepidemicRegister,\n      platformType: this.data.platformType,\n      supportCode: this.data.supportCode\n    }\n    if (!this.data.userAddress){\n      Taro.showToast({\n        title: '请添加收货地址',\n        duration: 3000,\n        icon: 'none'\n      })\n      return false;\n    }\n\n    //校验疾病防控信息填写\n    if(this.data.submitDetail.mustInputAntiepidemicRegister && !this.data.registerInfo.patientIdCard) {\n      Taro.showModal({\n        title: '',\n        content: '请填写疫病防控登记信息',\n        confirmColor: getApp().globalData.mainColor,\n        cancelText: '取消',\n        confirmText: '去填写',\n        success: (res) => {\n          if (res.confirm) this.toRegisterInfo();\n        }\n      })\n      return false;\n    }else {\n      data.temperatureDetail = JSON.parse(JSON.stringify(this.data.registerInfo));\n      data.temperatureDetail.userPatientId = data.temperatureDetail.id;\n      delete data.temperatureDetail.id;\n      delete data.temperatureDetail.authStatus;\n      data.temperatureDetail.symptom.forEach(item => {\n        delete item.checked\n      })\n    }\n\n    // 添加处方前先判断是否填写用药人信息\n    if (this.data.submitDetail.hasPrescribeMedicine && !this.data.patientObj.id) {\n      Taro.showToast({\n        title: '请填写用药人信息',\n        icon: 'none'\n      })\n      return false;\n    }\n    \n    // 判断是否支持配送\n    // if (!this.data.submitDetail.canDelivery){\n    //   Taro.showToast({\n    //     title: '当前收货地址不在可购买地区',\n    //     duration: 3000,\n    //     icon: 'none'\n    //   })\n    //   return false;\n    // }\n    // if (this.data.submitDetail.hasPrescribeMedicine && !this.data.canUsePrescribeId) {\n    //   this.checkMedicinesPrescribe(null, 'orderSubmit');\n    // }\n\n    if (this.data.submitDetail.needRealName) {\n      if(!this.data.selectedUserInfo) {\n        Taro.showToast({\n          title: '您购买的商品需要实名登记',\n          duration: 3000,\n          icon: 'none'\n        })\n        return false;\n      }\n      data.realNameInfo = this.data.selectedUserInfo;\n    }\n    //是处方药但未上传处方图片 0是图片处方 1是在线处方\n    if(this.data.submitDetail.hasPrescribeMedicine || this.data.inquiryPrescription) {\n      data.prescriptionInfo = {\n        type: this.data.clickType\n      }\n\n      data.prescriptionInfo.patientGuid = this.data.patientObj && this.data.patientObj.id;\n      if(data.prescriptionInfo.type == 0) {\n        data.prescriptionInfo.images = this.data.uploadPrescriptionData;\n      }else {\n        if(this.data.inquiryPrescription) data.prescriptionInfo.prescriptionNo = this.data.inquiryPrescription.prescriptionId\n      }\n\n      if(this.data.inquiryPrescription) {\n        this.orderSubmit(data);\n        return;\n      }\n      if((data.prescriptionInfo.type == 0 && data.prescriptionInfo.images.length == 0) || (data.prescriptionInfo.type == 1 && !this.data.canUsePrescribeId)) {\n        Taro.showModal({\n          title: '',\n          content: '订单中含有处方药，请添加购药处方',\n          confirmColor: getApp().globalData.mainColor,\n          cancelText: '我再想想',\n          confirmText: '添加处方',\n          success: (res) => {\n            if (res.confirm) this.toAddPrescription();\n          }\n        })\n        return false;\n      }\n      if(!this.data.patientObj.id){\n        Taro.showToast({\n          title: '请填写用药人信息',\n          icon: 'none'\n        })\n        return false;\n      }\n    }\n\n    this.orderSubmit(data);\n  },\n  /**\n   * 请求提单接口\n   */\n  orderSubmit(data) {\n    //避免重复点击\n    if (new Date().getTime() - this.data.orederOpenClickTime < 2000) return false;\n    this.data.orederOpenClickTime = new Date().getTime();\n\n    Taro.showLoading({\n      title: '加载中'\n    })\n    ajax2('post', 'api/ykq/order/w/submit', data, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.handleEliminatePromotion();\n        let param = {\n          orderNo: res.data.result.orderNo,\n          payChannel: 20\n        }\n        this.data.selectedCoupon = {};\n        toWeixinPayNew(param, () => {\n          getApp().globalData.burySpotSDK.track(`action_confirmOrder_payClick`);\n          //支付成功 清除相应购物车\n          if(!this.data.donNotCleanCart) {\n            this.selectComponent(\".shop-cart\").batchRemove(this.data.orderDetailList, 'notImpactRankingAct');\n          }\n  \n          Taro.redirectTo({\n            url: '/pages/note/myGroupIndent/myGroupIndent'\n          })\n        }, ()=>{\n          //支付失败 清除相应购物车\n          if(!this.data.donNotCleanCart) {\n            this.selectComponent(\".shop-cart\").batchRemove(this.data.orderDetailList, 'notImpactRankingAct');\n          }\n         \n          Taro.redirectTo({\n            url: '/pages/note/myGroupIndent/myGroupIndent'\n          })\n        })\n      } else if(res.data.code == 1001 || res.data.code == 1002 || res.data.code == 3001) {//部分商品库存不足或者下架，重新刷新页面 3001保险余额不足\n        if(res.data.code == 3001) {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none'\n          })\n        }\n        this.data.supportCode = '';\n        setTimeout(()=>{\n          this.getGoodsDetail();\n        }, 1000)\n      }else if(res.data.code == 1003 || res.data.code == 1004 || res.data.code == 1005){//全部产品库存不足或者下架，返回上一页\n        Taro.navigateBack({\n          delta: 1\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n  * @description: 跳转防控登记\n  * @return: void\n  */\n  toRegisterInfo(){\n    let url;\n    if(this.data.submitDetail.hasPrescribeMedicine) {\n      url = `/pages/note/register/register?registerInfo=${ JSON.stringify(this.data.registerInfo)}&prescriberId=${ this.data.patientObj.id || '' }`\n    }else {\n      url = `/pages/note/register/register?registerInfo=${ JSON.stringify(this.data.registerInfo)}`\n    }\n    Taro.navigateTo({ url });\n  },\n  /**\n  * @description: 打开保险规则弹窗\n  * @return: void\n  */\n  openRuleBox(e){\n    let ruleType = e.currentTarget.dataset.type;\n    this.setData({\n      ruleBoxShow: true,\n      ruleType\n    })\n  }\n};"},"convertDir/pages/b2c/pages/productSearch/productSearch":{"json":{"missingData-view":"../../../../component/missingData/missingData","shop-cart":"../../../../component/b2cShopCart/shopCart"},"wxml":"\n  <view class=\"productSearch-auto-container\">  \n    <wxs module=\"filter\"></wxs>\n    <view class=\"index_z\">\n      <navBar :title-text=\" pageTitle \" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <shop-cart :class=\"[shop-cart,( isDjk ? 'djk' : '' )]\">    \n      <block v-if=\" pageType == 'searchPage' \"> \n        <view class=\"search_contion\" :hidden=\" scrollType \">  \n          <view class=\"search_hearder\">   \n            <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../../images/search-icon-black.png\"></image>\n            <image class=\"search_clear\" v-if=\" inputText \" bindtap=\"search_clear_btn\" mode=\"widthFix\" src=\"../../images/search_clear.png\"></image>\n            <view class=\"search_kuai\" v-if=\" inputText \" bindtap=\"search_clear_btn\"></view>\n            <input class=\"search_input\" :value=\" inputText \" bindinput=\"searchInput\" placeholder=\"搜一搜商品名称\" auto-focus bindconfirm=\"search_btn\"></input>\n          </view>\n          <text class=\"search_btn\" bindtap=\"search_btn\" v-if=\" inputText \">搜索\n          </text>\n          <text class=\"search_btn gray\" v-else>搜索\n          </text>\n        </view>\n        <view style=\"height:100rpx\"></view>\n      </block>\n      <block v-if=\" searcKeyBox \">\n        <view class=\"searcKeyBox\" :style=\"{height:calc(100vh - navBarHeight  + 50px),top:calc( navBarHeight + 50 )px}\" catchtouchmove=\"ture\">\n          <view class=\"searc_key_list\" bindtap=\"handleKeyWord\" v-if=\" relatedWord[0] \" v-for=\"(item, key) in  relatedWord \" :key=\"key\" :data-index=\" index \" data-text=\"{{ item[0].str?item[0].str:'' }}{{ item[1].str?item[1].str:'' }}{{ item[2].str?item[2].str:'' }}\">\n            <text :class=\"[( item[0].key?'text_color':'' )]\">{{ item[0].str }}\n            </text>\n            <text :class=\"[( item[1].key?'text_color':'' )]\">{{ item[1].str }}\n            </text>\n            <text :class=\"[( item[2].key?'text_color':'' )]\">{{ item[2].str }}\n            </text>\n          </view>\n        </view>\n      </block>\n      <view class=\"searchHistory\" v-if=\" historyShow \">\n        <block v-if=\" pageType == 'searchPage' \"> \n          <view class=\"searchHistory_text\" v-if=\" searchLog.length > 0 \">\n\t\t\t\t历史搜索\n\t\t\t\t\n            <image bindtap=\"clear_btn\" class=\"search_clear you\" mode=\"widthFix\" src=\"../../../../images/clear_ss.png\"></image>\n          </view>\n          <view class=\"searchHistory_nr\">\n            <block v-for=\"(item, key) in  searchLog \" :key=\"key\">\n              <view class=\"searchHistory_list\" bindtap=\"historySearchBtn\" :data-title=\" item.searchTitle \">{{ item.searchTitle }}\n              </view>\n            </block>\n          </view>\n        </block>\n      </view>\n      <block v-else> \n        <block> \n          <view class=\"proList sp_list\" v-if=\" proList.length \">   \n            <view class=\"nearbyDrugstore-list-warp\" v-if=\"ykqDrugstore\">\n              <view class=\"nearbyDrugstore-list\" :data-id=\"ykqDrugstore.id\" bindtap=\"handleGoDrugstore\">  \n                <view class=\"drug-left-photo-lable\">附近药店\n                </view>\n                <view class=\"drug-left-photo\"> \n                  <image :src=\" ykqDrugstore.doorheadPhoto ? ykqDrugstore.doorheadPhoto : cdnLink + '/images/drugstore-djk-mr.jpg' \"></image>\n                  <view class=\"drug-left-photo-text\">\n                    <image src=\"../../../../images/icon_time.png\"></image>\n                    <text>{{ykqDrugstore.businessHours}}\n                    </text>\n                  </view>\n                </view>\n                <view class=\"nearbyDrugstore-list-right\">    \n                  <view class=\"nl-right-title\">{{ ykqDrugstore.drugstore_name }}\n                  </view>\n                  <view class=\"nl-right-icon\" v-for=\"(item, key) in  ykqDrugstore.activities \" :key=\"key\">{{ item.label }}\n                  </view>\n                  <view class=\"nl-right-icon blue\" v-if=\" ykqDrugstore.conditionDeliveryLabel \">{{ ykqDrugstore.conditionDeliveryLabel }}\n                  </view>\n                  <view class=\"nl-right-flag\">\n                    <text v-for=\"(item, key) in  ykqDrugstore.labelList \" :key=\"key\">{{item}}\n                    </text>\n                  </view>\n                  <view class=\"nl-right-km\" catchtap=\"openMap\" :data-address=\" ykqDrugstore.address \"> \n                    <image mode=\"widthFix\" class=\"nl-right-km-icon\" src=\"../../images/index-fj-yd.png\"></image>\n                    <text>{{ ykqDrugstore.drugstoreDistanceDesc }}\n                    </text>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"proItem-warp\">\n              <view class=\"proItem\" v-for=\"(item, index) in  proList \" :key=\"index\"> \n                <view class=\"itemTop flex\" :data-item=\" item \" :data-index=\" index \" bindtap=\"toCheckPro\">  \n                  <view class=\"cover-image\"></view>\n                  <image lazy-load :src=\" filter.getCutSrc(item.medicineMainImage, '@144x144') \" class=\"image\"></image>\n                  <view class=\"itemInfo\">   \n                    <view class=\"title\">\n\t\t\t\t\t\t\t\t{{ item.medicineName }} {{ item.medicineCommonName }} {{ item.medicineSpecifications }}\n\t\t\t\t\t\t\t\n                      <view class=\"b2c_cf\" v-if=\" item.medicinesIsPrescribe \">处方药\n                      </view>\n                      <text v-if=\" item.limitPurchaseAct \">限{{ item.limitPurchaseAct.limitNum }}件\n                      </text>\n                    </view>\n                    <block v-if=\" !isDjk \"> \n                      <view class=\"active_tag\">\n                        <view class=\"tag\" v-for=\"(item, key) in  item.activityLabel \" :key=\"key\">{{ item }}\n                        </view>\n                      </view>\n                      <view class=\"active_tag2\">\n                        <view class=\"tag\" v-for=\"(item, key) in  item.title \" :key=\"key\">{{ item }}\n                        </view>\n                      </view>\n                    </block>\n                    <block v-if=\" isDjk && item.securitycardOnlinePayLabel \">\n                      <text class=\"active_tag3\">{{item.securitycardOnlinePayLabel}}\n                      </text>\n                    </block>\n                    <view class=\"price\">   \n                      <text class=\"price-fh\">¥\n                      </text>\n                      <text class=\"real-price\">{{ item.activityInfo.actPrice ? item.activityInfo.actPrice : item.customPrice }}\n                      </text>\n                      <text class=\"underline-price\" v-if=\" item.activityInfo.actPrice \">¥{{ item.customPrice }}\n                      </text>\n                      <view class=\"button\" catchtap=\"handlePurchase\" :data-item=\" item \" :data-img=\"item.medicineMainImage\" v-if=\" !isDjk || classify \">\n                        <image src=\"../../images/add-icon.png\" class=\"add-icon\"></image>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n                <view class=\"bottom\" v-if=\" isDjk && item.otherDrugstoreNum > 0 \" data-title=\"{{ item.medicineName }} {{ item.medicineCommonName }}\" :data-medicineid=\" item.medicineId \" bindtap=\"drugStoreList\">附近{{ item.otherDrugstoreNum }}家药店\n                </view>\n              </view>\n            </view>\n            <view class=\"tip\" v-if=\" isAjaxing \">加载中...\n            </view>\n            <view class=\"tip\" v-else-if=\" !hasNextPage \">已经到底了\n            </view>\n          </view>\n          <block v-if=\" proList.length == 0 &&  !isAjaxing \">\n            <view style=\"background-color:#fff;height: 100vh;\">\n              <missingData-view zhi=\"new1\" textval=\"未找到符合条件的商品\" textval2=\"继续逛逛\" :imageUrl=\" cdnLink + 'images/empty-check-list.png' \"></missingData-view>\n            </view>\n          </block>\n        </block>\n        <view class=\"b2c_detailed_list\" bindtap=\"handleDetailedListNum\" v-if=\" !isDjk || classify \">  \n          <view class=\"b2c_detailed_list_num\" v-if=\"medicineNum > 0\">{{ medicineNum }}\n          </view>\n          <image src=\"../../images/sort-icon.png\"></image>\n          <text>清单\n          </text>\n        </view>\n      </block>\n      <view class=\"good_box\" :hidden=\"hideGoodsBox\" :style=\"{left: bus_xpx, top: bus_ypx}\">\n        <image :src=\"feiBox\"></image>\n      </view>\n    </shop-cart>\n  </view>","wxss":"/* pages/onlineGoods/productSearch/productSearch.wxss */\n\n.index_z {\n  position: relative;\n  z-index: 99999999;\n}\n\npage {\n  background: #f5f6fa;\n  height: 100%;\n}\n.flex {\n  display: flex;\n  justify-content: space-between;\n  position: relative;\n}\n\n.flex .cover-image {\n  position: absolute;\n  top: 0;\n  left: 0rpx;\n  width: 144rpx;\n  height: 144rpx;\n  border-radius: 8rpx;\n  background: rgba(5, 13, 143, .02);\n  z-index: 1;\n}\n\n.search_contion {\n  padding: 20rpx 0;\n  background-color: #FDFDFD;\n  position: fixed;\n  width: 100%;\n  z-index: 9;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n}\n\n.search_hearder {\n  flex: 1;\n  height: 60rpx;\n  position: relative;\n  margin-left: 20rpx;\n  border-radius: 36rpx;\n  background-color: #F0F0F5;\n  overflow: hidden;\n}\n\n.search_input {\n  width: 500rpx;\n  height: 60rpx;\n  font-size: 25rpx;\n  padding-left: 65rpx;\n  color: #111334;\n  background: #f0f0f5;\n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  margin: 16rpx 12rpx 16rpx 15rpx;\n}\n\n.search_clear {\n  top: 0;\n  width: 26rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 5rpx;\n  z-index: 10;\n  padding: 17rpx;\n}\n\n.search_btn {\n  color: #00b955;\n  font-size: 28rpx;\n  width: 120rpx;\n  text-align: center;\n}\n\n.search_btn.gray {\n  color: #ccc;\n}\n\n.searchHistory {\n  width: 100%;\n  background-color: #fff;\n  overflow: hidden;\n}\n\n.searchHistory_text {\n  font-size: 26rpx;\n  color: #999;\n  padding-left: 20rpx;\n  padding-top: 20rpx;\n  margin-bottom: 26rpx;\n  position: relative;\n}\n\n.searchHistory_list {\n  padding: 0 20rpx 0 20rpx;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  box-sizing: border-box;\n  height: 60rpx;\n  background-color: rgba(245, 247, 248, 1);\n  border-radius: 30rpx;\n  line-height: 60rpx;\n  font-size: 24rpx;\n  text-align: center;\n  float: left;\n  margin-right: 20rpx;\n  margin-bottom: 20rpx;\n  color: #515163;\n}\n\n.searchHistory_nr {\n  width: calc(100% - 40rpx);\n  margin: 0 auto;\n  overflow: hidden;\n}\n\n.you {\n  top: 0;\n  width: 29rpx;\n  height: 32rpx;\n}\n\n.search_kuai {\n  top: 0;\n  right: 0;\n  position: absolute;\n  height: 100%;\n  z-index: 9;\n  background: #f0f0f5;\n}\n\n.proList, .drugstore_list {\n  /* background: #fff; */\n  overflow: hidden;\n}\n\n.proItem-warp {\n  background: #fff;\n}\n\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  padding-bottom: 24rpx;\n  position: relative;\n  padding: 24rpx 32rpx;\n}\n.proItem::after{\n  content: '';\n  width: 100%;\n  height: 1rpx;\n  background-color: #f2f2f2;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.proItem .itemTop .image {\n  position: relative;\n  width: 144rpx;\n  height: 144rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: calc(100vw - 32rpx - 32rpx - 144rpx - 24rpx);\n  position: relative;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-weight: bold;\n  font-size: 28rpx;\n  color: #111334;\n  /* line-height: 34rpx; */\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  width: 150rpx;\n  height: 50rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  font-size: 30rpx;\n  color: rgba(0, 185, 173, 1);\n  text-align: center;\n  line-height: 50rpx;\n}\n\n.djk .proItem {\n  padding-bottom: 0;\n  border-bottom: 20rpx solid #F7F7F7;\n}\n\n.proItem .bottom {\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n  border-top: 1rpx solid #f2f2f2;\n}\n\n.itemBottom {\n  height: 90rpx;\n  line-height: 90rpx;\n  padding: 0 30rpx;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n  position: relative;\n}\n\n.storeName {\n  max-width: 480rpx;\n  font-size: 24rpx;\n  color: rgba(153, 153, 153, 1);\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  margin-right: 10rpx;\n  -webkit-box-orient: vertical;\n  position: relative;\n  padding-right: 10rpx;\n}\n\n.storeName::after {\n  content: '';\n  display: block;\n  width: 1rpx;\n  height: 20rpx;\n  position: absolute;\n  top: 9rpx;\n  right: 1rpx;\n  background-color: rgba(238, 238, 238, 1);\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  background: #f7f7f7;\n}\n\n.flex2 {\n  display: flex;\n  margin-top: 20rpx;\n}\n\n.storeKm {\n  font-size: 26rpx;\n  color: rgba(153, 153, 153, 1);\n}\n\n.itemBottom .dr {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  padding-left: 192rpx;\n}\n\n.itemBottom_img {\n  width: 24rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 20rpx;\n  top: 34rpx;\n}\n\n/* 搜索改版 */\n\n.search_tab {\n  display: flex;\n}\n\n.search_tab_left, .search_tab_right {\n  width: 50%;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #999;\n  text-align: center;\n  position: relative;\n}\n\n.state {\n  color: #292626;\n  font-size: 34rpx;\n  font-weight: 500;\n}\n\n.state::after {\n  content: \"\";\n  width: 36rpx;\n  height: 6rpx;\n  border-radius: 8rpx;\n  background-color: #00b955;\n  position: absolute;\n  left: calc(50% - 18rpx);\n  bottom: 0;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-address {\n  width: 70%;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-time {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 8rpx;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #666;\n  position: absolute;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx;\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n\n.search_lable {\n  height: 108rpx;\n  line-height: 108rpx;\n  display: flex;\n  border-top: 1px solid rgba(238,238,238,1);\n  background-color: #fff;\n}\n\n.lable {\n  width: 150rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  background: rgba(245, 247, 248, 1);\n  border-radius: 30px;\n  font-size: 26rpx;\n  color: #666666;\n  text-align: center;\n  margin-top: 24rpx;\n  margin-left: 24rpx;\n}\n.lable_group{\n  display: flex;\n}\ncheckbox .wx-checkbox-input {\n    /* checkbox 前面选项框的背景样式 */\n    /* opacity: 0; */\n    display: none;\n}\n\n/* 搜索关键词 */\n.searcKeyBox{\n  background-color:#fff;\n  position: fixed;\n  left: 0;\n  z-index: 9999;\n  width: 100%;\n}\n.searc_key_list{\n  height: 87rpx;\n  line-height: 87rpx;\n  text-align: left;\n  font-size:28px;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(51,51,51,1);\n  font-size: 28rpx;\n  border-top: 1px solid #EEEEEE;\n  padding: 0 24rpx 0 24rpx;\n}\n.text_color{\n  color: #00b955;\n}\n/* 药店 */\n\n.nearbyDrugstore {\n  padding: 0 24rpx 0 24rpx;\n}\n\n.nearbyDrugstore-title {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 20rpx 0 20rpx 0;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n}\n\n.nearbyDrugstore-title-left {\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n  padding: 0;\n}\n\n.nearbyDrugstore-title-right {\n  font-size: 28rpx;\n  color: #999;\n  margin-top: 5rpx;\n  position: relative;\n  padding: 10rpx 30rpx;\n}\n\n.nearbyDrugstore-list-warp {\n  background: #fff;\n  margin-bottom: 20rpx;\n  padding: 18rpx 32rpx 24rpx;\n}\n\n.nearbyDrugstore-list {\n  display: flex;\n  position: relative;\n  border-radius: 8rpx;\n  padding-top: 56rpx;\n}\n.nearbyDrugstore-list:last-child {\n  border: 0;\n}\n\n.nearbyDrugstore-list image {\n  width: 182rpx;\n  height: 126rpx;\n  display: block;\n}\n\n.nearbyDrugstore-list-right {\n  flex: 1;\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 28rpx;\n  color: #111334;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-weight: bold;\n}\n\n.nl-right-icon {\n  display: inline-block;\n  margin-top: 12rpx;\n  margin-right: 10rpx;\n  padding: 2rpx 8rpx;\n  background: #ffeeef;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 22rpx;\n  color: #F93A4A;\n  border-radius: 4rpx;\n}\n\n.nearbyDrugstore-list-right .blue {\n  background: #F5FAFF;\n  color: #087AEF;\n  border: 0;\n  font-size: 22rpx;\n}\n\n.nl-right-icon image {\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 5rpx;\n  width: 10rpx;\n  height: 16rpx;\n  position: relative;\n  margin-top: -6rpx;\n}\n\n.nl-right-flag text {\n  display: inline-block;\n  color: #666883;\n  font-size: 22rpx;\n  padding: 0 8rpx;\n  margin-right: 10rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  border-radius: 2rpx;\n  background-color: #F6F8FD;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #999999;\n  position: absolute;\n  font-weight: 400;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx 0 20rpx;\n}\n.nl-right-km text{\n  font-size: 24rpx;\n  color: #C5C9D5;\n}\n.nearbyDrugstore-default {\n  width: 100%;\n  height: 210rpx;\n  background: rgba(250, 250, 250, 1);\n  border-radius: 6px;\n}\n\n.nearbyDrugstore-default-text {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  width: 90%;\n  margin: 0 auto;\n  padding-top: 40rpx;\n  text-align: center;\n}\n\n.nearbyDrugstore-default-btn {\n  width: 160rpx;\n  height: 60rpx;\n  text-align: center;\n  line-height: 60rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  color: rgba(0, 185, 173, 1);\n  margin: 0 auto;\n  margin-top: 30rpx;\n}\n\n.scrollbar1 {\n  width: 60rpx;\n  height: 4rpx;\n  background-color: rgba(239, 239, 239, 1);\n  margin: 0 auto;\n  margin-top: 20rpx;\n  border-radius: 6rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.scrollbar1 view {\n  height: 100%;\n  position: absolute;\n  transition: all 0.2s;\n  left: 0;\n  top: 0;\n  background-color: rgba(161, 165, 176, 1);\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n/* b2c */\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 13rpx;\n}\n.active_tag3{\n  background: rgba(255,59,48,0.05);\n  border: 1px solid #ff3b30;\n  border-radius: 8rpx;\n  color: #ff3b30;\n  text-align: center;\n  padding:0 8rpx;\n  font-size:22rpx;\n}\n.active_tag2{\n  margin-top: 0rpx;\n}\n.active_tag .tag {\n  height: 32rpx;\n  background: #FFEEEF;\n  border-radius: 4rpx;\n  line-height: 32rpx;\n  text-align: center;\n  font-size: 22rpx;\n  color: #F93A4A;\n  margin-right: 10rpx;\n  margin-bottom: 13rpx;\n  padding: 0 8rpx;\n}\n.active_tag2 .tag{\n  background: #fff;\n  border: 1px solid #e1e1e1;\n  color: #666666;\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n  \n.price{\n  color: #F93A4A;\n  font-size: 22rpx;\n  margin-top: 29rpx;\n  position: relative;\n  font-weight: bold;\n}\n\n.price .price-fh {\n  font-size: 22rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n}\n\n.price .real-price {\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n}\n\n.price .underline-price {\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-decoration: line-through;\n  color: #9d9fb8;\n  margin-left: 6rpx;\n}\n.button{\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 40rpx;\n  height: 40rpx;\n}\n.itemTop .button .add-icon{\n  width: 100%;\n  height: 100%;\n}\n.cart_button {\n  display: flex;\n  align-items: center;\n}\n.cart_button .text {\n  padding: 0 20rpx;\n  font-size: 26rpx;\n}\n.cart_button .button {\n  padding: 10rpx;\n}\n.cart_button .button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00b955;\n  color: #FFFFFF;\n  font-size: 40rpx;\n}\n.cart_button .less view{\n  border: 1px solid #00b955;\n  background: none;\n  color: #00b955;\n}\n.drug-left-photo{\n  position: relative;\n  border-radius: 8rpx;\n  overflow: hidden;\n}\n.drug-left-photo-text{\n  width: 100%;\n  height: 34rpx;\n  line-height: 34rpx;\n  color: #fff;\n  font-size: 20rpx;\n  overflow: hidden;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  text-align: center;\n  border-bottom-right-radius: 8rpx;\n  border-bottom-left-radius: 8rpx;\n  background: rgba(17,19,52,0.45);\n}\n\n.drug-left-photo-text text{\n  position: relative;\n  z-index: 2;\n}\n.drug-left-photo-text image{\n  display: inline-block;\n  vertical-align: middle;\n  width: 20rpx;\n  height: 20rpx;\n  position: relative;\n  z-index: 2;\n  margin-right: 10rpx;\n  margin-top: -2rpx;\n}\n.drug-left-photo-lable{\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #111334;\n  text-align: center;\n  position: absolute;\n  top: -1rpx;\n  left: -1rpx;\n}\n.b2c_detailed_list{\n  width: 100rpx;\n  height: 100rpx;\n  background: #fff;\n  box-shadow: 0rpx 5rpx 17rpx 0rpx rgba(17,19,52,0.11); \n  border-radius: 100rpx;\n  text-align: center;\n  font-weight: bold;\n  color: #00b955;\n  font-size: 22rpx;\n  position: fixed;\n  right: 30rpx;\n  bottom: 140rpx;\n}\n.b2c_detailed_list image {\n  width: 29rpx;\n  height: 28rpx;\n  display: block;\n  margin:  20rpx auto 7rpx;\n}\n.b2c_detailed_list_num{\n  width: 40rpx;\n  height: 40rpx;\n  background: #ff4531;\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n  line-height: 40rpx;\n  text-align: center;\n  font-size: 24rpx;\n  color: #fff;\n  border-radius: 90%;\n}\n/* 处方药，限购件数css */\n.b2c_cf{\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 0 8rpx;\n  line-height: 32rpx;\n  height: 32rpx;\n  text-align: center;\n  background: #ff3232;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 22rpx;\n  font-weight: 400;\n}\n.title text {\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background: linear-gradient(270deg,#ff884a, #ff3232);\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n/* 加购特效 */\n.good_box {\n  width: 40px;\n  height: 40px;\n  position: fixed;\n  border-radius: 50%;\n  overflow: hidden;\n  left: 50%;\n  top: 50%;\n  z-index: +99;\n  border: 1px solid #fff;\n  background: rgba(120, 188, 255, 0.2);\n}\n\n.good_box image {\n  display: block;\n  width: 100%;\n  height: 100%;\n}","js":"// pages/onlineGoods/productSearch/productSearch.js\nconst app = getApp();\n// 请求url\nconst apiUrl = {\n  keyWord: 'miniApp/search/getRelatedWordsByKeyword',//获取关键词\n  searchLog: 'miniapp/searchOnlineGoodsLog/getUserSearchLog',//搜索历史\n  djkSearchMedicinesV2: 'miniapp/bighealth/medicine/searchMedicine',//大健康搜索\n  queryProductListByKeyWord: 'product/ykq/mini/v1/b2c/queryProductListByKeyWord',//关键字搜索\n  queryProductListByDrugstoreIdAndKeyWord: 'product/ykq/mini/v1/b2c/queryProductListByDrugstoreIdAndKeyWord',//门店关键词搜索\n  queryProductListByClassifyId: 'product/ykq/mini/v1/b2c/queryProductListByClassifyId',//分类\n  queryProductListByZoneId: 'product/ykq/mini/v1/b2c/queryProductListByZoneId',//金刚位搜索\n  queryProductListByCouponId: 'product/ykq/mini/v1/b2c/queryProductListByCouponId',//优惠券可用商品\n}\n\nimport {\n  ajax2,\n  getLocation,\n  cdnStaticResourceUrl,\n  open_wechatMap,\n  getMedicineCateNum,\n  bezier\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      classify:null,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      searcKeyBox: false,\n      relatedWord: [],\n      historyShow: true, //显示历史搜索记录\n      searchLog: [],\n      longitude: 114.304695,\n      latitude: 30.59331,\n      pageNum: 1,\n      pageNumDurg: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      proList: [], //商品列表\n      pageType: '',\n      activeType: 'default',\n      isAjaxing: false,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      pageTitle: '',\n      scrollType: false,\n      id: null,\n      inputText: null, //搜索关键词\n      addressData: {},\n      options: '',\n      scrollTop: 0,\n      searchType: 1,\n      cdnLink: cdnStaticResourceUrl,\n      cartNumber: 0,\n      classifyId: null,\n      groupAreaId: null,\n      couponId: null,\n      medicineNum: 0,\n      // 加购特效\n      interval: 1500,\n      duration: 1000,\n      hideCount: true, //角标初始是隐藏的\n      count: 0, //角标数\n      hideGoodsBox: true,\n      feiBox: \"\", //当前加购图片\n      b2cStoreId: null,\n      couponType: '',\n      applicableStores: '',\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    // 设置来源\n    if (options.source) getApp().globalData.globalSource = options.source;\n\n    this.data.options = options;\n    // 购物车组建节点\n    this.shopCart = this.selectComponent(\".shop-cart\");\n    this.data.pageNumDurg = 1;\n    this.data.pageNum = 1;\n    //获取本地存储经纬度信息\n    const addressData = getApp().address_data;\n    //判断是否有经纬度，没有自动获取\n    if (addressData.latitude) {\n      this.data.addressData = addressData;\n      this.readyFun(this.data.options);\n    } else {\n      getLocation((longitude, latitude) => {\n        this.data.addressData = {\n          longitude,\n          latitude\n        };\n        this.readyFun(this.data.options);\n      })\n    }  \n    //可视窗口x,y坐标\n    this.busPos = {};\n    this.busPos['x'] = app.globalData.ww * .85;\n    this.busPos['y'] = app.globalData.hh * .85; \n  },\n  onShow: function() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      medicineNum: getMedicineCateNum()\n    })\n  },\n  // 获取医保药品数据\n  getMedicareDrugs() {\n    let params = {\n      latitude: this.data.addressData.latitude,\n      longitude: this.data.addressData.longitude,\n      pageNum: this.data.pageNum,\n      pageSize: 1,\n      cityCode: this.data.addressData.cityCode\n    }\n\n    Taro.showLoading({\n      title: '加载中...',\n      mask: true\n    })\n    ajax2('get', '/miniapp/bighealth/medicine/healthCareMedicine', params, res => {\n      if (res.data.code == 0) {\n        let proList = res.data.result && res.data.result.pageInfo;\n        proList && this.setData({\n          proList: proList.list,\n          // hasNextPageMedicareCardMed: (proList && proList.hasNextPage) || false,\n        });\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器开小差了，请您稍后尝试',\n          icon: 'none',\n        })\n      }\n      Taro.hideLoading();\n    }, ()=> {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  handlePurchase(e){\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n      return false;\n    }\n    let item = e.currentTarget.dataset.item;\n    let data = {\n      drugstoreId: item.drugstoreId,\n      skuId: item.medicineId,\n      skuNum: 1,\n      stock: item.medicinesDrugstoreStock,\n      surplusLimitPurchaseNum: item.limitPurchaseAct ? item.limitPurchaseAct.surplusLimitPurchaseNum : null,\n    }\n    let addStatus = this.shopCart.addGoods(data);\n\n    if(!addStatus){\n      return false;\n    }\n\n    this.setData({\n      medicineNum: getMedicineCateNum()\n    })\n    // 调用加购特效\n    this.touchOnGoods(e);\n  },\n  //点击商品触发的事件\n  touchOnGoods: function(e) {\n    //把点击每一项的对应的商品图保存下来，就是飞向购物车的图片\n    this.setData({\n      feiBox: e.currentTarget.dataset.img\n    })\n    // 如果good_box正在运动\n    if (!this.data.hideGoodsBox) return;\n    //当前点击位置的x，y坐标\n    this.finger = {};\n    var topPoint = {};\n    this.finger['x'] = 89;\n    this.finger['y'] = e.touches[\"0\"].clientY - 60;\n    if (this.finger['y'] < this.busPos['y']) {\n      topPoint['y'] = this.finger['y'] - 150;\n    } else {\n      topPoint['y'] = this.busPos['y'] - 150;\n    }\n\n    if (this.finger['x'] < this.busPos['x']) {\n      topPoint['x'] = Math.abs(this.finger['x'] - this.busPos['x']) / 2 + this.finger['x'];\n    } else {\n      topPoint['x'] = this.busPos['x'];\n      this.finger['x'] = this.busPos['x']\n    }\n    this.linePos = bezier([this.finger, topPoint, this.busPos], 30);\n    this.startAnimation();\n  },\n  //开始动画\n  startAnimation: function() {\n    var index = 0,\n      that = this,\n      bezier_points = that.linePos['bezier_points'];\n    this.setData({\n      hideGoodsBox: false,\n      bus_x: that.finger['x'],\n      bus_y: that.finger['y']\n    })\n    this.timer = setInterval(function() {\n      index++;\n      that.setData({\n          bus_x: bezier_points[index]['x'],\n          bus_y: bezier_points[index]['y']\n      })\n      if (index >= 28) {\n          clearInterval(that.timer);\n          that.setData({\n              hideGoodsBox: true,\n              hideCount: false,\n              count: that.data.count += 1\n          })\n      }\n    }, 16);\n  },\n  readyFun(options) {\n    if (options.groupAreaId) {\n      //首页药品专区\n      this.setData({\n        groupAreaId: options.groupAreaId || '',\n        pageType: 'groupArea',\n        pageTitle: decodeURIComponent(options.title),\n        id: options.id //专区ID\n      })\n      this.searchFn()\n    } else if(options.classify && options.title){\n      // 分类页面进来的\n      this.setData({\n        pageTitle: options.title,\n        pageType: 'classify',\n        classifyId: options.id,\n        classify: options.classify\n      })\n      this.searchFn()\n    } else if(options.couponId) {\n      // 优惠券跳转过来\n      this.setData({\n        pageTitle: '荷叶健康',\n        couponId: options.couponId,\n        couponType: options.couponType,\n        applicableStores: options.applicableStores\n      })\n      this.searchFn()\n    }else if(options.storeId) {\n      // B2C药店主页搜索跳转过来\n      this.setData({\n        pageType: 'searchPage',\n        pageTitle: '搜索商品',\n        b2cStoreId: options.storeId\n      })\n      this.getSearchLog();\n    }else if(options.type==='all'){\n      this.searchFn('all')\n      this.setData({\n        pageTitle: '便民购药',\n      })\n    }else {\n      this.setData({\n        pageType: 'searchPage',\n        pageTitle: '搜索商品',\n        classify:options.classify?options.classify:null\n      })\n      this.search_btn();\n      this.getSearchLog();\n    }\n  },\n  /**\n   * 输入检测\n   */\n  searchInput(e) {\n    this.setData({\n      inputText: e.detail.value,\n      searcKeyBox: !e.detail.value ? false : true\n    })\n    this.data.searchType = 1; // 输入框输入\n    this.getKeyWord(this.data.inputText)\n  },\n  // 跳转需求清单\n  handleDetailedListNum(){\n    getApp().globalData.burySpotSDK.track(`action_searchResult_requirementsListClick`);\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/requirementList/requirementList`\n    })\n  },\n  // 点击关键词\n  handleKeyWord(e){\n    let text = e.currentTarget.dataset.text;\n    let index = e.currentTarget.dataset.index;\n    this.setData({\n      inputText:text\n    })\n    let chooseSughData = {\n      choosenTerms: this.data.inputText,\n      choosenSeq: index\n    }\n    getApp().globalData.burySpotSDK.track('action_chooseSug', chooseSughData);\n    this.data.searchType = 3;//关联词自动补全\n    this.search_btn();\n\n  },\n  // 获取关键词\n  getKeyWord(inputText){\n    if (!inputText) return false;\n    let data = {\n      keyword:inputText\n    }\n    ajax2('get', apiUrl.keyWord, data, res => {\n      if(res.data.code == 0){\n        res.data.result && res.data.result.forEach((item, index)=>{\n          res.data.result[index] = this.hilightWord(this.data.inputText, item);\n        })\n        this.setData({\n          relatedWord: res.data.result\n        })\n      }\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  toCheckPro(e){\n    const proItem = e.currentTarget.dataset.item;\n    if(this.data.isDjk){\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/drugList/drugList?goodsId=${proItem.medicineId}&drugStoreId=${ proItem.drugstoreId }&areaId=${proItem.merchandiseClassifyId}`\n      })\n    }else{\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ proItem.medicineId }&drugStoreId=${ proItem.drugstoreId }`\n      })\n    }\n  },\n  //查看地图\n  openMap: function(e) {\n    let target = e.currentTarget.dataset.item;\n    open_wechatMap(target.latitude, target.longitude, target.drugstore_name, target.address);\n  },\n  handleGoDrugstore(e){//跳转lbs药店主页\n    const id = e.currentTarget.dataset.id;\n    // 点击药店埋点\n    getApp().globalData.burySpotSDK.track(`action_searchResult_shopClick`, {\n      drugstoreId: id\n    });\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${ id }`\n    })\n  },\n  // 搜索字符关键字拆分\n  hilightWord(key, word) {\n    if (!key) return false;\n    let idx = word.indexOf(key),strList = [];\n    if (idx > -1) {\n      if (idx == 0) {\n        strList = this.hilightWord(key, word.substr(key.length));\n        strList.unshift({\n          key: true,\n          str: key\n        });\n      } else if (idx > 0) {\n        strList = this.hilightWord(key, word.substr(idx));\n        strList.unshift({\n          key: false,\n          str: word.substring(0, idx)\n        });\n      }\n      return strList;\n    }\n    return [{\n      key: false,\n      str: word\n    }];\n  },\n\n  /**\n   * 搜索历史\n   */\n  getSearchLog() {\n    ajax2('post', apiUrl.searchLog, {}, res => {\n      this.setData({\n        searchLog: res.data.result\n      });\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n\n  /**\n   * 清空历史搜索记录\n   */\n  clear_btn() {\n    const that = this;\n    Taro.showModal({\n      content: \"确认清空历史搜索记录?\",\n      confirmText: \"确定\",\n      confirmColor: getApp().globalData.mainColor,\n      success: function(res) {\n        if (res.confirm) {\n          Taro.showToast({\n            title: '已清空',\n            image: '/images/successIcon.png',\n            mask: true,\n          })\n          that.setData({\n            searchLog: []\n          });\n          Taro.getStorage({\n            key: 'sess_key',\n            success: function(res) {\n              ajax2('delete', `miniapp/searchOnlineGoodsLog/deleteAllSearchLogByUserId/${ res.data }`, {}, res => {})\n            }\n          })\n        }\n      }\n    })\n  },\n  /**\n   * 历史记录搜索\n   */\n  historySearchBtn(e) {\n    const searchTitle = e.currentTarget.dataset.title;\n    this.setData({\n      inputText: searchTitle,\n      historyShow: false\n    }, () => {\n      this.data.searchType = 2;//历史记录点击\n      this.searchFn()\n    })\n  },\n  /**\n   * 删除按钮\n   */\n  search_clear_btn(){\n    this.data.pageNum = 1;\n    this.setData({\n      inputText:'',\n      historyShow: true,\n      proList:[],\n      activeType:'default'\n    });\n    this.getSearchLog()\n  },\n  /**\n   * 搜索Btn\n   */\n  search_btn() {\n    if (this.data.inputText) {\n      const inputText = (this.data.inputText).replace(/^\\s*|\\s*$/g, \"\");\n      console.log(inputText)\n      if (!inputText) {\n        Taro.showToast({\n          title: '请输入药品名',\n          icon: 'none',\n        })\n        this.setData({\n          inputText: ''\n        })\n        return false;\n      }\n      this.searchFn()\n    }\n    this.data.pageNum = 1;\n    this.setData({\n      proList: [],\n      searcKeyBox: false\n    });\n    // 展示搜索结果页\n    getApp().globalData.burySpotSDK.track(`page_searchResultExpo`);\n  },\n  onPageScroll: function(e) { // 获取滚动条当前位置\n    if (e.scrollTop <= 45) {\n      this.setData({\n        scrollType: false\n      })\n    } else {\n      this.setData({\n        scrollType: true\n      })\n    }\n    this.data.scrollTop = e.scrollTop\n  },\n  /**\n   * 搜索方法\n   */\n  searchFn(type) {\n    if (this.isAjaxing) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    const {\n       pageNum = 1, pageSize, groupAreaId\n    } = this.data\n    const sendData = {\n      pageNum,\n      pageSize,\n      longitude: this.data.addressData.longitude,\n      latitude: this.data.addressData.latitude,\n      cityCode: this.data.addressData.cityCode?this.data.addressData.cityCode:''\n    }\n    //专区或商品搜索\n    if(groupAreaId){\n      sendData.zoneId = groupAreaId;\n    } else if(this.data.classifyId){\n      sendData.classifyId = this.data.classifyId;\n    }else if(this.data.couponId){\n      sendData.couponId = this.data.couponId;\n      sendData.storeId = 0;\n      sendData.couponType = this.data.couponType;\n      sendData.applicableStores = this.data.applicableStores;\n    } else if(this.data.b2cStoreId){\n      sendData.drugstoreId = this.data.b2cStoreId;\n      sendData.keyword = this.data.inputText;\n    }else {\n      sendData.keyword = this.data.inputText\n    }\n    let url = apiUrl.queryProductListByKeyWord;//默认搜索接口\n    if(this.data.classify && this.data.classifyId) url = apiUrl.queryProductListByClassifyId;\n      else if(sendData.zoneId) url = apiUrl.queryProductListByZoneId;\n      else if(sendData.couponId) url = apiUrl.queryProductListByCouponId;\n      else if(sendData.drugstoreId) url = apiUrl.queryProductListByDrugstoreIdAndKeyWord;\n      else if(this.data.isDjk && !this.data.classify) url = apiUrl.djkSearchMedicinesV2;//大健康并且不是分类搜索（首页正常搜索调用）\n        \n    if(type==='all'){\n      url = '/miniapp/bighealth/medicine/healthCareMedicine',\n      sendData.keyword = ''\n    }\n    ajax2('get', url, sendData, res => {\n      if (res.data.code == 0) {\n        const resData = res.data.result;\n        //数据上报\n        let homeSearchData = {\n          searchTerms: sendData.keyword,\n          goodsNumber: resData.pageInfo ? resData.pageInfo.list.length : 0,\n          source: this.data.searchType\n        }\n        getApp().globalData.burySpotSDK.track('b2c_action_homeSearch', homeSearchData);\n        resData && this.setData({\n          proList: resData.pageInfo ? this.data.pageNum == 1 ? resData.pageInfo.list : [...this.data.proList, ...resData.pageInfo.list] : [],\n          hasNextPage: (resData.pageInfo && resData.pageInfo.hasNextPage) || false,\n          historyShow: false,\n          isAjaxing: false,\n          ykqDrugstore: resData.ykqDrugstore,\n          searcKeyBox: false\n        });\n        // 药店展示埋点\n        getApp().globalData.burySpotSDK.track(`page_searchResult_shopExpo`, {\n          drugstoreId: this.data.ykqDrugstore ? this.data.ykqDrugstore.id : ''\n        });\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器开小差了，请您稍后尝试',\n          icon: 'none',\n        })\n      }\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n    }, ()=> {\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    const hasNextPage = this.data.hasNextPage;\n    if (hasNextPage) {\n        this.data.pageNum = ++this.data.pageNum\n        if(this.data.isDjk){\n          this.searchFn('all');\n        }else{\n          this.searchFn();\n        }\n    }\n  },\n  select_address() {\n    // 如果没有经纬度跳转到选择地址清空绑定内容\n    if (!this.data.addressData.latitude) {\n      this.setData({\n        addressData: {}\n      })\n    }\n    let data = JSON.stringify(this.data.addressData).replace(/&/, 'ASCII38')\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?addressData=${ data }`\n    })\n  },\n  drugStoreList(e) {\n    let medicinesId = e.currentTarget.dataset.medicineid;\n    let title = e.currentTarget.dataset.title.length > 7 ? `${e.currentTarget.dataset.title.substr(0, 7)}...` : e.currentTarget.dataset.title;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/subscribeList/subscribeList?medicinesId=${ medicinesId }&navAreaId=${ this.data.id }`\n    })\n  },\n  // onShareAppMessage: function(e) {\n  //   let path;\n  //   if (this.data.pageType == 'groupArea') {\n  //     path = `/pages/b2c/pages/productSearch/productSearch?groupAreaId=${ this.data.groupAreaId }&title=${ this.data.pageTitle }&id=${ this.data.id }`;\n  //   } else {\n  //     path = `/pages/b2c/pages/productSearch/productSearch?key=${ this.data.inputText }`;\n  //   }\n  //   console.log(path);\n  //   let shareObj = {\n  //     title: `为您推荐${ this.data.inputText || this.data.pageTitle }相关商品`,\n  //     path: path,\n  //     imageUrl: '',\n  //   };\n  //   return shareObj;\n  // }\n};\n"},"convertDir/pages/b2c/pages/requirementList/requirementList":{"json":{"shop-cart":"../../../../component/b2cShopCart/shopCart","missingData-view":"../../../../component/missingData/missingData","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxml":"\n  <view class=\"requirementList-auto-container\">   \n    <navBar title-text=\"需求清单\" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    <view class=\"requirement-list\" v-if=\" sess_key \">\n      <shop-cart class=\"shop-cart\"> \n        <view v-if=\" cartList.length \">   \n          <view class=\"adress-view\" v-if=\" userAddress.address \">  \n            <image src=\"../../../../images/require-list-adreess.png\"></image>\n            <text bindtap=\"toSelectAddress\">切换地址\n            </text>\n            <text class=\"adress-desc\">配送至: {{ (userAddress.selectNearyAddress || '')  + (userAddress.address || '') }} \n            </text>\n          </view>\n          <view class=\"container\">\n            <view class=\"drugstore-item\" v-for=\"(drugstore, drugstoreId) in  cartList \" wx:for-index=\"drugstoreIdx\" :key=\"drugstoreId\"> \n              <view class=\"header\">    \n                <checkbox :data-drugstore-id=\" drugstore.drugstoreId \" data-flag=\"drugstore\" catchtap=\"slectCheckBox\" :checked=\" drugstore.checked \"></checkbox>\n                <text :class=\"[drugstore-name,( drugstore.drugstoreStatus ? '' : 'sold-out-durgstore-name' )]\" bindtap=\"linkTodrugstore\" :data-drugstore-id=\" drugstore.drugstoreId \">{{ drugstore.drugstoreName }}\n                </text>\n                <image bindtap=\"linkTodrugstore\" :data-drugstore-id=\" drugstore.drugstoreId \" class=\"arrow_icon\" src=\"../../../../images/icon-arrow.png\"></image>\n                <view class=\"post-tooltip\" bindtap=\"linkTodrugstore\" v-if=\" drugstore.postTooltipLabel \" :data-drugstore-id=\" drugstore.drugstoreId \">\n                {{drugstore.postTooltipLabel}}\n            \n                </view>\n                <image class=\"post-tooltip-icon\" v-if=\" drugstore.postTooltipLabel && drugstore.postTooltipLabel !== '已免运费' \" src=\"../../../../images/icon-arrow.png\" bindtap=\"linkTodrugstore\" :data-drugstore-id=\" drugstore.drugstoreId \">{{ drugstore.drugstoreName }}\n                </image>\n              </view>\n              <view :class=\"[touch-item,( medicine.isTouchMove ? 'touch-move-active' : '' ),( (!drugstore.drugstoreStatus || medicine.failure) ? 'sold-out' : '' )]\" bindtouchstart=\"touchstart\" bindtouchmove=\"touchmove\" v-for=\"(medicine, medicinesId) in  drugstore.medicinesList \" wx:for-index=\"medicinesIdx\" :key=\"medicinesId\" :data-cur-drugstore-index=\" drugstoreIdx \" :data-cur-medicine-index=\" medicinesIdx \" :data-drugstore-id=\" drugstore.drugstoreId \" :data-medicine-id=\" medicine.medicineId \" bindtap=\"linkToMedicinesDetail\"> \n                <view class=\"content med-item\">  \n                  <view class=\"check-box\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku=\" medicine \" data-flag=\"medicine\" catchtap=\"slectCheckBox\">\n                    <checkbox :checked=\" medicine.checked \"></checkbox>\n                  </view>\n                  <view class=\"med-logo\">\n                    <view class=\"med-div\">  \n                      <image :src=\" medicine.medicineMainImage \"></image>\n                      <view class=\"image-cover\"></view>\n                      <view class=\"cover\">\n                        <view class=\"circle\">已失效\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                  <view class=\"item-content\">   \n                    <view class=\"med-name\">    \n                      <text class=\"limit-flag\" v-if=\" medicine.limitPurchaseAct.limitNum \">{{ \"\b限\" + medicine.limitPurchaseAct.limitNum + \"件\" }}\n                      </text>\n                      <text class=\"prescription-flag\" v-if=\" medicine.medicinesIsPrescribe \">处方药\n                      </text>\n                      <text class=\"medicines-mame\">{{ medicine.medicineName }}\n                      </text>\n                      <text class=\"common-name\">{{ medicine.medicineCommonName }}\n                      </text>\n                      <text class=\"product_spec\">{{ medicine.medicineSpecifications }}\n                      </text>\n                    </view>\n                    <view class=\"tag-list\" v-if=\" drugstore.drugstoreStatus && !medicine.failure && medicine.activityLabel && medicine.activityLabel.length \">\n                      <text v-for=\"(label, labelKey) in  medicine.activityLabel \" wx:for-index=\"labelInx\" :key=\"labelKey\">{{ label }}\n                      </text>\n                    </view>\n                    <text class=\"act-number-desc\">{{ medicine.actNumDesc }}\n                    </text>\n                    <view :class=\"[med-footer,( !((drugstore.drugstoreStatus && !medicine.failure && medicine.activityLabel && medicine.activityLabel.length) || medicine.actNumDesc) ? 'more-top' : ''  )]\">      \n                      <text class=\"price-character\">¥\n                      </text>\n                      <text class=\"price failure-medicine\">{{ medicine.customPrice }}\n                      </text>\n                      <text class=\"price\" v-if=\"  medicine.actNumDesc !== '活动商品购买数量已达上限' \">{{  medicine.activityInfo.actPrice || medicine.customPrice }}\n                      </text>\n                      <text class=\"price\" v-if=\"  medicine.actNumDesc == '活动商品购买数量已达上限' \">{{ medicine.customPrice }}\n                      </text>\n                      <text class=\"underline-price\" v-if=\" medicine.activityInfo.actPrice \">{{ '¥' + medicine.customPrice }}\n                      </text>\n                      <text class=\"med-num\">{{ \"x\" + medicine.skuNum }}\n                      </text>\n                      <view class=\"cart_button custom-theme\">  \n                        <view :class=\"[button,less,( medicine.skuNum > 1 ? '' : 'gray-btn' )]\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku-id=\" medicine.medicineId \" :data-sku-num=\" medicine.skuNum \" catchtap=\"removeGoods\">\n                          <view>-\n                          </view>\n                        </view>\n                        <view class=\"text\">{{ medicine.skuNum }}\n                        </view>\n                        <view class=\"button\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku-id=\" medicine.medicineId \" :data-sku-stock=\" medicine.medicinesDrugstoreStock \" :data-sku-limit=\" medicine.limitPurchaseAct.surplusLimitPurchaseNum \" catchtap=\"addToCart\">\n                          <view>+\n                          </view>\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n                <view class=\"del\" catchtap=\"removeGoods\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku-id=\" medicine.medicineId \" data-sku-rm-num=\"all\" data-show-toast=\"true\" :data-index=\"index\">删除\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"rule-cell\" :style=\"{bottom:  isIPX ? '142rpx' : '120rpx'}\" bindtap=\"handleRule\" v-if=\" ruleDetail.userSubsidyRule \"> \n            <text>{{ ruleDetail.userSubsidyRule }}\n            </text>\n            <image mode=\"scaleToFill\" src=\"../../../../images/icon-question-mark.png\"></image>\n          </view>\n          <view :class=\"[footer-bar,(isIPX?'_bottom':'')]\">  \n            <label class=\"select-all\" data-flag=\"all\" bindtap=\"slectCheckBox\">全选\n        \n              <checkbox :checked=\"selectedAll\"></checkbox>\n            </label>\n            <view class=\"price-area\"> \n              <view class=\"top-line\">  \n                <text class=\"price-character\">¥\n                </text>\n                <text class=\"price\">{{  (priceInfo.sumPrice - priceInfo.totalDiscountAmount) / 1000 }}\n                </text>\n                <text class=\"shipping\">不含运费\n                </text>\n              </view>\n              <view class=\"bottom-line\">商品金额 ¥{{ priceInfo.sumPrice / 1000 }} 优惠 ¥{{ priceInfo.totalDiscountAmount / 1000 }}\n              </view>\n            </view>\n            <button :class=\"[( addUpNum ? 'theme-bg' : 'gray-button' )]\" bindtap=\"submit\">\n          {{ addUpNum ? '提交需求(' + addUpNum + ')' : '提交需求' }}\n        \n            </button>\n          </view>\n        </view>\n        <block v-if=\" defaultType \">\n          <missingData-view zhi=\"new1\" textval=\"清单中暂无商品\" textval2=\"继续逛逛~\" buttonText=\"去购买\" bind:action=\"toHome\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n        </block>\n      </shop-cart>\n    </view>\n    <block class=\"not-login-view\" v-if=\" !sess_key \">\n      <missingData-view zhi=\"new1\" textval2=\"登录后查看购物车\" :imageUrl=\" url_link + 'images/empty-log.png' \" bind:action=\"toLogin\" buttonText=\"点击登录\"></missingData-view>\n    </block>\n    <halfScreenDialog :show=\" ruleBoxShow \" title=\"规则内容\" type=\"2\" btnText=\"我知道了\">\n      <view slot=\"desc\">{{ ruleDetail.userSubsidyDoc }}\n      </view>\n    </halfScreenDialog>\n  </view>","wxss":"@import '../../../../common/tableView.wxss';\n\npage { \n  overflow-y: auto;\n  background-color: #f5f7fa;\n}\n\n.requirement-list {\n  padding-bottom: 130rpx;\n  overflow-y: auto;\n}\n\n/* 左滑卡片list */\n.touch-item {\n  background: #fff;\n  font-size: 26rpx;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  overflow: hidden;\n  padding-bottom: 10rpx;\n}\n\n.del {\n  background-color: orangered;\n  width: 120rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  -webkit-transform: translateX(240rpx);\n  transform: translateX(240rpx);\n  -webkit-transition: all 0.4s;\n  transition: all 0.4s;\n  border:1rpx solid #ccc;\n}\n\n.touch-move-active .med-item,.touch-move-active .del {\n  -webkit-transform: translateX(0);\n  transform: translateX(0);\n}\n\n.drugstore-item {\n  width: calc(100vw - 24rpx - 24rpx);\n  margin: 0 auto;\n  margin-bottom: 20rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n\n.drugstore-item .header {\n  display: flex;\n  align-items: center;\n  height: 72rpx;\n  line-height: 72rpx;\n  padding: 0 24rpx;\n  background: #ffffff;\n  border-bottom: 2rpx solid #EFF0F5;\n}\n\n.drugstore-item .header .drugstore-name {\n  display: inline-block;\n  max-width: 246rpx;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  font-weight: 700;\n  color: #111334;\n  font-size: 28rpx;\n}\n\n.drugstore-item .header checkbox {\n  margin-right: 20rpx;\n  position: relative;\n  top: -4rpx;\n}\n\n.drugstore-item .header .arrow_icon {\n  width: 28rpx;\n  height: 28rpx;\n  margin-left: 2rpx;\n}\n\n.drugstore-item .header .post-tooltip {\n  color: #666883;\n  flex: 1;\n  text-align: right;\n  font-size: 24rpx;\n}\n\n.drugstore-item .post-tooltip-icon {\n  /* float: right; */\n  /* position: relative;\n  top: 24rpx;\n  left: 8rpx; */\n  width: 20rpx;\n  height: 20rpx;\n}\n\n/* 商品item */\n.med-item {\n  display: flex;\n  padding: 0 24rpx;\n  width: 100%;\n  line-height: 40rpx;\n  margin-right: 0;\n  -webkit-transition: all 0.4s;\n  transition: all 0.4s;\n  -webkit-transform: translateX(240rpx);\n  transform: translateX(240rpx);\n  margin-left: -240rpx;\n}\n\n.med-item .check-box {\n  width: 34rpx;\n  padding-top: calc(24rpx + (150rpx / 2) - 22rpx);\n  padding-right: 24rpx;\n}\n\ncheckbox {\n  width: 34rpx;\n}\n\n.med-item .failure-medicine {\n  display: none;\n}\n\n.med-item .med-logo {\n  padding-top: 24rpx;\n  width: 150rpx;\n  position: relative;\n}\n\n.med-item .med-logo .med-div {\n  width: 150rpx;\n  height: 150rpx;\n  position: relative;\n}\n\n.med-item .med-logo .image-cover {\n  position: absolute !important;\n  top: 0rpx;\n  width: 150rpx;\n  height: 150rpx;\n  background: rgba(5, 13, 143, .02);\n}\n\n.med-item .med-logo image {\n  width: 150rpx;\n  height: 150rpx;\n}\n\n.med-item .med-logo .cover {\n  display: none;\n}\n\n.med-item .item-content {\n  position: relative;\n  flex: 1;\n  padding: 24rpx 48rpx 14rpx 24rpx;\n  word-break: break-all;\n}\n\n.med-item .item-content .med-name {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 30rpx;\n  font-weight: 500;\n  color: #111334;\n}\n\n.med-item .item-content .med-name .limit-flag, .med-item .item-content .med-name .prescription-flag {\n  position: relative;\n  top: -4rpx;\n  margin-right: 4rpx;\n  display: inline-block;\n  padding: 0rpx 8rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  text-align: center;\n  background: #F93A4A;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 22rpx;\n  font-weight: 400;\n}\n\n.med-item .item-content .med-name .common-name, .med-item .item-content .med-name .medicines-mame {\n  margin-right: 8rpx;\n}\n\n.med-item .item-content .tag-list {\n  margin-top: 12rpx;\n}\n\n.med-item .item-content .tag-list text {\n  display: inline-block;\n  padding: 0rpx 8rpx;\n  margin-right: 10rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  text-align: center;\n  background: #FFEEEF;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  font-weight: 400;\n  color: #f93a4a;\n}\n\n.med-footer .price-character {\n  color: #F93A4A;\n  font-size: 28rpx;\n  font-weight: 500;\n}\n\n.med-footer {\n  /* position: absolute;\n  bottom: 30rpx; */\n  width: 100%;\n  margin-top: 12rpx;\n}\n\n.med-footer .med-num {\n  display: none;\n}\n\n.med-footer .price {\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n  line-height: 40rpx;\n}\n\n.med-footer .underline-price {\n  font-family: PingFangSC, PingFangSC-Regular;\n  margin-left: 12rpx;\n  color: #9D9FB8;\n  font-size: 24rpx;\n  font-weight: 400;\n  text-decoration: line-through;\n}\n\n/* .med-footer .cart_button {\n  display: inline-block;\n  margin-left: 56rpx;\n} */\n\n/* 公用加减按钮样式 */\n\n.cart_button {\n  float: right;\n  /* margin-left: 52rpx; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  top: -8rpx;\n}\n\n.cart_button .text {\n  padding: 0 9rpx;\n  font-size: 26rpx;\n  color: #111334;\n}\n\n.cart_button .button {\n  padding: 10rpx;\n}\n\n.cart_button .button view {\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border: none;\n  text-align: center;\n  color: #111334;\n  font-size: 40rpx;\n}\n\n.cart_button .less view {\n  background: none;\n  box-sizing: border-box;\n  line-height: 31rpx;\n}\n\n/* 灰色按钮 */\n.cart_button .gray-btn view {\n  color: #C9CFCF !important;\n  background: #fff !important;\n}\n\n\n.rule-cell {\n  color: #FF6010;\n  font-size: 26rpx;\n  background: #FFF6D5;\n  padding: 10rpx 20rpx;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  bottom: 120rpx;\n  width: 100%;\n  justify-content: center;\n  box-sizing: border-box;\n}\n\n.rule-cell image {\n  width: 36rpx;\n  height: 36rpx;\n  flex-shrink: 0;\n}\n\n.footer-bar {\n  display: flex;\n  box-sizing: border-box;\n  padding: 0 24rpx;\n  width: 100%;\n  line-height: 120rpx;\n  position: fixed;\n  bottom: 0rpx;\n  background: #FFFFFF;\n  border: 1px solid #F2F2F2;\n  border-bottom: none;\n}\n\n.footer-bar .select-all {\n  font-family: PingFangSC, PingFangSC-Medium;\n  width: 102rpx;\n  height: 120rpx;\n  line-height: 120rpx;\n  font-size: 24rpx;\n  font-weight: 700;\n  color: #333333;\n}\n\n.footer-bar .select-all checkbox {\n  width: 36rpx;\n  margin-right: 12rpx;\n  position: relative;\n  top: -2rpx;\n}\n\n.footer-bar .price-area {\n  flex: 1;\n  margin-left: 6rpx;\n}\n\n.footer-bar .price-area .top-line {\n  margin-top: -15rpx;\n}\n\n.footer-bar .price-area .bottom-line {\n  font-size: 22rpx;\n  font-weight: 400;\n  color: #9AA0B5;\n}\n\n.footer-bar .price-area view {\n  height: 40rpx;\n}\n\n.footer-bar .price-area .shipping {\n  margin-left: 10rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #9AA0B5;\n}\n\n.footer-bar .price-area .price-character {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.footer-bar .price-area .price {\n  font-size: 40rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.footer-bar button {\n  float: right;\n  margin: 0;\n  margin-top: 23rpx;\n  padding: 0 20rpx;\n  height: 74rpx;\n  border-radius: 40rpx;\n  font-size: 30rpx;\n  font-weight: 700;\n  text-align: center;\n  color: #ffffff;\n  line-height: 74rpx;\n}\n\n/* 售罄卡片 */\n.sold-out-durgstore-name {\n  color: #999999;\n}\n\n.sold-out .med-item .cart_button {\n  visibility: hidden;\n}\n\n.sold-out .med-item .med-name {\n  color: #C5C6D5;\n  font-weight: 400 !important;\n}\n\n.sold-out .limit-flag {\n  display: none;\n}\n\n\n.sold-out .med-item .med-footer .failure-medicine {\n  display: inline-block !important;\n  color: #C5C6D5 !important;\n}\n\n.sold-out .med-item .med-footer .price-character {\n  color: #C5C6D5 !important;\n}\n\n.sold-out .med-item .med-footer .price, .sold-out .med-item .med-footer .underline-price {\n  display: none;\n}\n\n.sold-out .med-item .med-footer .med-num {\n  display: inline-block;\n  font-size: 24rpx;\n  font-weight: 400;\n  margin-left: 15rpx;\n  color: #C5C6D5;\n}\n\n.sold-out .med-item .med-logo view {\n  position: relative;\n}\n\n.sold-out .med-item .med-logo .cover {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 150rpx;\n  height: 150rpx;\n  background: rgba(0, 0, 0, .25);\n  border-radius: 8rpx;\n}\n\n.sold-out .med-item .med-logo .cover .circle {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 120rpx;\n  height: 120rpx;\n  color: #fff;\n  font-size: 30rpx;\n  font-weight: 500;\n}\n\n.act-number-desc {\n  color: #9d9fb8;\n  font-size: 20rpx;\n  font-weight: 400;\n  margin-top: 12rpx;\n}\n\n.gray-button {\n  color: #fff;\n  background: #9d9fb8 !important;\n}\n\n.not-login-view, .empty-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n}\n\n.not-login-view .missing-view, .empty-page .missing-view {\n  flex: 1;\n}\n\n/* 加减号样式优化 */\n.custom-theme {\n  border: 1px solid #e7eaec;\n  border-radius: 25rpx;\n  height: 50rpx;\n  box-sizing: border-box;\n  position: relative;\n  top: -3rpx;\n}\n/* 切换地址 */\n.adress-view {\n  margin-bottom: 20rpx;\n  height: 70rpx;\n  line-height: 70rpx;\n  background: #fff;\n  line-height: 70rpx;\n  padding: 0 24rpx;\n  color: #41435d;\n  font-size: 24rpx;\n}\n\n.adress-view text:nth-child(1) {\n  float: left;\n}\n\n.adress-view text:nth-child(2) {\n  float: right;\n}\n\n.adress-view .adress-desc {\n  display: inline-block;\n  width: calc(100vw - 24rpx - 24rpx - 32rpx - 12rpx - 140rpx);\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n}\n\n.adress-view image {\n  float: left;\n  width: 32rpx;\n  height: 32rpx;\n  vertical-align: middle;\n  margin-right: 12rpx;\n  position: relative;\n  top: 10px;\n}\n.parcels-icon{\n  width: 26rpx;\n  height: 26rpx;\n  position: relative;\n  top: 5rpx;\n}\n._bottom{\n  padding-bottom: 22rpx;\n}","js":"// pages/b2c/pages/requirements/requirementList.js\n\n// 请求的接口\nlet apiUrl = {\n  shoppingCart: 'mimiapp/homepage/shoppingCart',\n  subsidyInfo: 'miniapp/marketing/getSkuListSubsidyInfo'\n}\n\nimport {\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\n\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    url_link: cdnStaticResourceUrl,\n    isDjk: getApp().globalData.src_whyb ? true : false,\n    sess_key: null,\n    startX: 0, //开始坐标\n    startY: 0,\n    cartList: [],\n    defaultType:false,//缺省展示标识\n    removeBtnFlag: null,\n    selectedAll: false, // 默认不全部\n    addUpNum: null, // 商品总数\n    priceInfo: {\n      actSumPrice: 0, // 活动总金额\n      sumPrice: 0, // 商品总金额\n      totalDiscountAmount: 0, // 优惠总金额 \n      sumDrugstoreExpressCost: 0, // 运费总金额\n    },\n    userAddress: {\n    },\n    isIPX: false,\n    ruleBoxShow: false,\n    ruleDetail: ''\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function () {\n    this.setData({\n      isIPX: getApp().globalData.isIPX\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    let { id, city } = this.data.userAddress;\n    this.setData({\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      sess_key: getApp().globalData.sess_key,\n      // 切换地址回来重新赋值\n      userAddress: {\n        ...this.data.userAddress,\n        cityCode: city || 0,\n        addressId: id\n      }\n    }, function() {\n      this.shopCart = this.selectComponent(\".shop-cart\");\n      this.leftSwiperCartList = this.selectAllComponents(\".left-swiper-cart\");\n  \n      // 判断是否登录\n      if (this.data.sess_key) {\n        this.getShopCart();\n        this.getSubsidyInfo();\n      } \n    }) \n    getApp().globalData.burySpotSDK.track(`sy-fjyd-more`);\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  toLogin() {\n    wx.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  /**\n   * @description 跳转药店主页\n   * @param { Object } { 药店id }\n   * @returns void\n   */\n  linkTodrugstore(e) {\n    let { drugstoreId } = e.currentTarget.dataset;\n\n    getApp().globalData.burySpotSDK.track('action_requirementsList_shopClick', { \n      drugstoreId,\n      cate: 'b2c'\n    });\n\n    wx.navigateTo({\n      url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${ drugstoreId }`\n    })\n  },\n  /**\n   * @description 跳转商品详情\n   * @param { Object } { 药店id, 商品id }\n   * @returns void\n   */\n  linkToMedicinesDetail(e) {\n    let { drugstoreId, medicineId } = e.currentTarget.dataset;\n\n    getApp().globalData.burySpotSDK.track('action_requirementsList_goodsClick', { \n      drugstoreId,\n      medicineId,\n      cate: 'b2c'\n    });\n\n    wx.navigateTo({\n      url: `/pages/b2c/pages/goodsDetail/goodsDetail?drugStoreId=${ drugstoreId }&goodsId=${ medicineId }`\n    })\n  },\n  /**\n   * @description 获取购物车列表\n   * @returns void\n   */\n  getShopCart() {\n    wx.showLoading({\n      title: '加载中',\n      mask: true\n    })\n    const listFromStorage = wx.getStorageSync('b2cCart') || [];\n    \n    ajax2('get', apiUrl.shoppingCart, { \n      shoppingCartStr: JSON.stringify(listFromStorage),\n      cityCode: this.data.userAddress.cityCode || 0\n   }, res => {\n      wx.hideLoading();\n      if (res.data.code == 0 && res.data.result) { \n        let { address, addressId, cityCode, shoppingCartStr: cartList } = res.data.result;\n        \n        // 首次进入页面 从接口拿地址默认值\n        if (this.data.userAddress.cityCode == 0) {\n          this.setData({\n            userAddress: { address, addressId, cityCode }\n          });\n        }\n        this.calculationCartList(cartList);\n      } else {\n        this.setData({\n          cartList: [],\n          defaultType: true\n        });\n      }\n    }, function() {\n      wx.hideLoading();\n      wx.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n   * 根据缓存重新组织购物车数据 增加 checked num 等字段\n   * @param { Array } listFormServer 服务端返回的购物车数据\n   * @param { Array } listFromStorage 本地存储的购物车数据 包含商品数量 是否勾选等字段\n   * @returns { Array } 糅合后的购物车数据\n   */\n  calculationCartList(listFormServer) {\n    let listFromStorage = wx.getStorageSync('b2cCart') || [];\n    let totalArray = [];\n    let priceInfo = {\n      actSumPrice: 0,\n      sumPrice: 0,\n      totalDiscountAmount: 0, // 优惠总金额\n      sumDrugstoreExpressCost: 0 // 运费总金额\n    }\n\n    listFormServer.forEach(storeInServer => {\n      listFromStorage.forEach((storeInStorage, storeKeyInStorage) => {\n        // 同步药店数量\n        if (storeInStorage.drugstoreId == storeInServer.drugstoreId) {\n          // 共同药店\n          storeInServer.updateTime = storeInStorage.updateTime; // 同步更新时间\n          storeInServer.checked = storeInStorage.checked; // 同步勾选状态\n          \n          // 同一家药店下都存在的商品\n          let skus = [];\n          \n          storeInStorage.skus.forEach((skuInStorage, skuKeyInStorage) => {\n            const curSku = storeInServer.medicinesList.find(item => item.medicineId == skuInStorage.skuId); // 服务端与客户端缓存的共同商品\n\n            if (curSku) {\n              if (skuInStorage.skuNum) curSku.skuNum = skuInStorage.skuNum; // 同步number\n              if (skuInStorage.updateTime) curSku.updateTime = skuInStorage.updateTime; // 同步更新时间\n              curSku.checked = skuInStorage.checked ? true : false; // 同步勾选状态\n\n              if (curSku.checked) { // 选中的商品 计算价格 设置额外展示属性\n                priceInfo.sumPrice += (curSku.customPrice * 1000 * curSku.skuNum);\n\n                // 购物车购买目标数量超出享受优惠金额的活动件数 提示 包含 xx 件活动商品\n                if (curSku.activityInfo && curSku.activityInfo.realDiscountCount && curSku.activityInfo.realDiscountCount < curSku.skuNum) {\n                  curSku.actNumDesc = `包含${ curSku.activityInfo.realDiscountCount }件活动商品`;\n                } else if (curSku.activityInfo && curSku.activityInfo.realDiscountCount == 0) {\n                  // 如果有活动 且可享受优惠价活动商品数量为0（跟限购没有关系) 展示活动商品购买数量已达上限\n                  curSku.actNumDesc = '活动商品购买数量已达上限';\n                } else {\n                  curSku.actNumDesc = '';\n                }\n\n                // 计算优惠价格 购物车数量 对比 可享受优惠券的商品数量\n                if (curSku.activityInfo && curSku.activityInfo.realDiscountCount) {\n                  let num = (curSku.skuNum > curSku.activityInfo.realDiscountCount) ? curSku.activityInfo.realDiscountCount : curSku.skuNum;\n\n                  // 优惠金额 = 满足优惠条件的活动商品件数 * 价格差\n                  priceInfo.totalDiscountAmount +=  ((curSku.customPrice * 1000)  - (curSku.activityInfo.actPrice * 1000)) * num;\n                }\n              } \n\n              skus.push(curSku);\n            } else {\n              // 如果服务端拉下来的数据不包含药店下某药品 说明店铺和该药品解除绑定 则购物车缓存同步删除此商品\n              storeInStorage.skus.splice(skuKeyInStorage, 1);\n\n              // 如果药店下商品为空 缓存 服务端列表都清除该药店\n              !storeInStorage.skus.length && listFromStorage.splice(storeKeyInStorage, 1);\n            }\n          });\n\n          // skus更新完 排序\n          skus.sort((v1, v2) => v2.updateTime - v1.updateTime);\n\n          let unSelectedSkuList = skus.filter(sku => !sku.checked);\n\n          // 药店下商品全部未勾选 则不展示运费提示\n          if (skus.length == unSelectedSkuList.length) {\n            storeInServer.postTooltipLabel = null;\n          } else {\n            // 计算当前药店下商品价格总数 给出邮费提示label\n            storeInServer.postTooltipLabel = this.getPostMsg(storeInServer, skus);\n\n            // 计算当前药店是否免运费 计算当前已勾选清单需应付运费\n            if (storeInServer.postTooltipLabel !== '已免运费') {\n              priceInfo.sumDrugstoreExpressCost =  priceInfo.sumDrugstoreExpressCost + storeInServer.drugstoreExpressCost * 1000;\n            }\n          }\n\n          storeInServer.medicinesList = skus;\n\n          // 塞进目标数组\n          storeInServer.medicinesList.length && totalArray.push(storeInServer);\n\n          // 糅合好的药店列表数据排序\n          totalArray.sort((v1, v2) => v2.updateTime - v1.updateTime);\n        }\n      });\n    });\n\n    // 是否非全选 药店全选则底部全选勾上\n    let hasNotChecked = totalArray.find(item => !item.checked);\n\n    // 更新缓存\n    wx.setStorageSync('b2cCart', listFromStorage);\n    \n    // 计算商品总数\n    let addUpNum = this.shopCart.getCurMedicineNum();\n\n    this.setData({\n      cartList: totalArray,  \n      defaultType: totalArray.length > 0 ? false : true,\n      selectedAll: hasNotChecked ? false : true,\n      addUpNum,\n      priceInfo\n    });\n  },\n  /**\n   * @description 加入/批量加入购物车\n   * @returns void\n   */\n  addToCart: function(e) {\n    let { drugstoreId, skuId, skuStock, skuLimit } = e.currentTarget.dataset;\n\n    this.shopCart.addGoods({  // 携带来源字段 此处加购不更新排序\n      drugstoreId,\n      skuId,\n      stock: skuStock,\n      surplusLimitPurchaseNum: skuLimit, \n      source: 'notImpactRankingAct'\n    });\n\n    // 重新计算购物车     \n    this.calculationCartList(this.data.cartList);\n  },\n  /**\n   * @description 购物车删除商品\n   * @returns void\n   */\n  removeGoods: function(e) {\n    let { drugstoreId, skuId, skuNum, skuRmNum, showToast } = e.currentTarget.dataset;\n    \n    if (new Date().getTime() - this.data.removeBtnFlag < 200) return false;\n\n    this.data.removeBtnFlag = new Date().getTime();\n\n    if (skuNum == 1 && skuRmNum !== 'all') {\n      wx.showToast({\n        title: '不能再减啦',\n        icon: 'none',\n        mask: true\n      });\n      return;\n    }\n\n    this.shopCart.removeGoods(drugstoreId, skuId, skuRmNum, 'notImpactRankingAct', true); // 调用购物车组件的方法\n    \n    // 重新计算购物车     \n    this.calculationCartList(this.data.cartList);\n    showToast && wx.showToast({\n      title: '删除成功',\n      icon: 'none'\n    });\n  },\n  /**\n   * @description 清空购物车\n   * @returns void\n   */\n  clearCart() {\n    this.shopCart.clearCart();\n  },\n  /**\n   * @description 重置卡片位置\n   * @returns void\n   */\n  // resetSwiperCart() {\n  //   this.leftSwiperCartList.forEach(card => card.reset());\n  // },\n  /**\n   * 计算药店下运费总数 给出邮费提示label\n   * @param { Object } store 当前要处理的药店 \n   * @param { Array }  skus 当前药店内已勾选商品列表\n   * @returns { String } 店铺包邮计算结果提示文案\n   */\n  getPostMsg(store, skus) {\n    // totalMoney 店铺满包邮金额\n    // hasConditionExpress 是否开启满包邮 0 或 1\n    // drugstoreExpressCost 店铺默认运费\n    let { drugstorePostage: totalMoney, hasConditionExpress, drugstoreExpressCost } = store;\n    let sum = 0; // 店内勾选商品总的原价\n    let couponSum = 0; // 店内勾选商品的优惠的总价\n    let realPay = 0; // 店内实付金额\n    let returnStr = '';\n\n    // 运费为0展示 '已免运费'\n    if (drugstoreExpressCost == 0) return '已免运费';\n  \n    // 未勾选店铺满包邮且运费不为0 不显示文案\n    if (hasConditionExpress == 0) return null;\n\n    // 运费不为0 勾选满包邮 满包邮金额为0\n    if (drugstoreExpressCost !== 0 && hasConditionExpress == 1 && totalMoney == 0) return '已免运费';\n\n    // 运费不为0 而且勾选了满包邮 而且满包邮金额不为0 进行以下对比\n    skus.forEach(sku => {\n      let curPirce = sku.customPrice; // 单个商品实付价格\n\n      if (sku.checked) {\n        sum += curPirce * 1000 * sku.skuNum;\n      }\n\n      // 有可用优惠 计算店内总优惠价格\n      if (sku.activityInfo && sku.activityInfo.realDiscountCount) {\n        let couponNum = (sku.skuNum > sku.activityInfo.realDiscountCount) ? sku.activityInfo.realDiscountCount : sku.skuNum;\n\n        // 优惠金额 = 满足优惠条件的活动商品件数 * 价格差\n        couponSum +=  ((sku.customPrice * 1000)  - (sku.activityInfo.actPrice * 1000)) * couponNum;\n      }\n    });\n\n    realPay = sum - couponSum;\n\n    returnStr = (realPay / 1000) >= totalMoney ? '已免运费' : `还差${  (totalMoney * 1000 - realPay) / 1000  }元免运费, 去凑单`;\n\n    return returnStr;\n  },\n  /**\n   * 重置所有卡片\n   * @returns void\n   */\n  reset() {\n    this.data.cartList.forEach(function (v, i) {\n      if (v.isTouchMove){\n        //只操作为true的\n        v.isTouchMove = false;\n      }\n    })\n\n    this.setData({\n      cartList: this.data.cartList,\n      defaultType: this.data.cartList.length > 0 ? false : true // 缺省展示标识cartList 没有数据则为true，否则false\n    })\n  },\n  //手指触摸动作开始 记录起点X坐标\n  touchstart: function (e) {\n    //开始触摸时 重置所有删除\n    this.data.cartList.forEach(function (drugstore) {\n      const medicinesList = drugstore.medicinesList;\n\n      medicinesList.length && medicinesList.forEach(function (medicine) {\n        medicine.isTouchMove = false; // 重置所有滑片\n      });\n    })\n  \n    this.setData({\n      startX: e.changedTouches[0].clientX,\n      startY: e.changedTouches[0].clientY,\n      cartList: this.data.cartList,\n      defaultType: this.data.cartList.length > 0 ? false : true\n    })\n  },\n  // 滑动事件处理\n  touchmove: function (e) {\n    let that = this,\n    { curDrugstoreIndex, curMedicineIndex } = e.currentTarget.dataset,// 当前药店索引 药品\n    startX = that.data.startX,// 开始X坐标\n    startY = that.data.startY,// 开始Y坐标\n    touchMoveX = e.changedTouches[0].clientX,// 滑动变化坐标\n    touchMoveY = e.changedTouches[0].clientY,// 滑动变化坐标\n    // 获取滑动角度\n    angle = that.angle({ X: startX, Y: startY }, { X: touchMoveX, Y: touchMoveY });\n\n    // 滑动超过30度角 return\n    if (Math.abs(angle) > 30) return;\n\n    this.data.cartList.forEach(function (drugstore, storeIdx) {\n      const medicinesList = drugstore.medicinesList;\n\n      medicinesList.length && medicinesList.forEach(function (medicine, medIdx) {\n        medicine.isTouchMove = false; // 重置所有滑片\n        \n        // 当前操作商品卡片\n        if ((storeIdx == curDrugstoreIndex) && (medIdx == curMedicineIndex)) {\n          // 左滑拉开卡片 右滑收起卡片\n          medicine.isTouchMove = touchMoveX > startX ? false : true;\n        }\n      });\n    })\n\n    //更新数据\n    that.setData({\n      cartList: that.data.cartList,\n      defaultType: that.data.cartList.length > 0 ? false : true\n    })\n  },\n  /**\n  * 计算滑动角度\n  * @param {Object} start 起点坐标\n  * @param {Object} end 终点坐标\n  */\n  angle: function (start, end) {\n    var _X = end.X - start.X,\n    _Y = end.Y - start.Y\n    //返回角度 /Math.atan()返回数字的反正切值\n    return 360 * Math.atan(_Y / _X) / (2 * Math.PI);\n  },\n  /**\n   * 多选框选择\n   * @param { Object } e\n   * * @param { number } drugstoreId 药店ID\n   * * @param { number } medicineId 药品ID\n   * * @param { string } flag 'all' 全选, 'durgStore' 药店范围内全选, 'medicine' 药店勾选\n   */\n  slectCheckBox(e) {\n    let { drugstoreId, flag, sku } = e.currentTarget.dataset;\n    let listFromStorage = wx.getStorageSync('b2cCart') || [];\n    let curStore;\n    let eventDesc;\n    \n    switch(flag) {\n      case 'all':\n        // 全部选中\n        listFromStorage.forEach(list => {\n          list.checked = !this.data.selectedAll;\n\n          list.skus.forEach(item => {\n            item.checked = !this.data.selectedAll;\n          });\n        });\n        break;\n      case 'drugstore':\n        // 药店范围内全选\n        curStore = listFromStorage.find(store => store.drugstoreId == drugstoreId);\n\n        curStore.checked = !curStore.checked;\n        curStore.skus.forEach(item => {\n          item.checked = curStore.checked;\n        });\n\n        eventDesc = curStore.checked ? 'action_requirementsList_shopSelectClick' : 'action_requirementsList_shopCancleSelectClick'; \n\n        getApp().globalData.burySpotSDK.track(eventDesc, { \n          drugstoreId: curStore.drugstoreId,\n          cate: 'b2c'\n         });\n        break;\n      case 'medicine':\n        // 商品勾选\n        curStore = listFromStorage.find(store => store.drugstoreId == drugstoreId);\n        const curMedicineIndex = curStore.skus.findIndex(item => item.skuId == sku.medicineId);\n\n        curStore.skus[curMedicineIndex].checked = !sku.checked;\n\n        // 是否全选药店\n        const hasNotCheckedSku = curStore.skus.find(item => !item.checked);\n\n        curStore.checked = hasNotCheckedSku ? false : true;\n\n        // 埋点\n        eventDesc = curStore.skus[curMedicineIndex].checked ? 'action_requirementsList_goodsSelectClick' : 'action_requirementsList_goodsCancleSelectClick';\n\n        getApp().globalData.burySpotSDK.track(eventDesc, { \n          drugstoreId: curStore.drugstoreId,\n          medicine: curStore.skus[curMedicineIndex].skuId,\n          cate: 'b2c'\n         });\n        break;\n    }\n\n    // 重新计算页面\n    wx.setStorageSync('b2cCart', listFromStorage);\n    this.calculationCartList(this.data.cartList);\n  },\n  /**\n   * @description 缓存里获取选中的店 + 药品\n   */\n  getSelectedList() {\n    let b2cList = wx.getStorageSync('b2cCart') || [];\n    let selectedList = b2cList.filter(store => store.skus.find(sku => sku.checked));\n\n    selectedList.forEach((store, storeIdx) => {\n      store.skus = store.skus.filter(sku => sku.checked);\n    });\n\n    return selectedList;\n  },\n  /**\n   * 提交需求\n   * @param { object } e \n   */\n  submit(e) {\n    let selectedList = this.getSelectedList();\n    let id = this.data.userAddress.addressId;\n    \n    if (!selectedList.length) {\n      wx.showToast({\n        title: '未选择商品',\n        icon: 'none'\n      })\n\n      return;\n    }\n\n    // 提交需求埋点\n    getApp().globalData.burySpotSDK.track('action_requirementsList_submitRequirementsClick');\n\n    wx.navigateTo({\n      url: `/pages/b2c/pages/placeOrder/placeOrder?orderDetailList=${ JSON.stringify(selectedList) }&addressId=${ id }`\n    })\n  },\n  /**\n   * 切换收货地址\n   */\n  toSelectAddress() {\n    let id = this.data.userAddress.addressId;\n\n    wx.navigateTo({\n      url: `/pages/note/selectAddress/selectAddress?userAddress=${ JSON.stringify({ id }) }`\n    })\n  },\n  /**\n   * 跳转首页\n   */\n  toHome() {\n    wx.switchTab({\n      url: `/pages/noteIndex/noteIndex`\n    })\n  },\n  /**\n   * 控制活动返现规则弹窗\n   */\n  handleRule(){\n    this.setData({\n      ruleBoxShow: true\n    }) \n  },\n  /**\n   * 获取活动返现规则\n   */\n  getSubsidyInfo() {\n    const b2cCart = wx.getStorageSync('b2cCart') || [];\n    let drugstoreIdList = b2cCart.map(item => item.drugstoreId );\n    if(drugstoreIdList.length <= 0) return false;\n    ajax2('post', apiUrl.subsidyInfo, { drugstoreIdList: drugstoreIdList }, res => {\n      if (res.data.code == 0 && res.data.result) { \n        this.setData({\n          ruleDetail: res.data.result\n        })\n      }else {\n        wx.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n})"},"convertDir/pages/classify/classify":{"js":"//接口\nconst apiUrl = {\n  getClassificationUrl:'product/mini/common/v1/operateCategoryList',//搜索接口\n}\nconst app = getApp();\nimport {\n  ajax,\n  ajax2,\n  getMedicineCateNum,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      defaultType:false,\n      url_link: cdnStaticResourceUrl,\n      windowHeight:0,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      tabbarHeight:null,\n      identificationId: '',\n      tabBarHeight: 0,\n      navBarHeight: app.globalData.navBarHeight,\n      goodsArea: [],\n      goodsList: []\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let that = this;\n    Taro.getStorage({\n      key: 'tabbarHeight',\n      success (res) {\n        that.setData({\n          tabbarHeight: res.data || 82\n        })\n      }\n    })\n\n    // 计算页面tab高度\n    let info = Taro.getSystemInfoSync();\n    this.setData({\n      windowHeight: info.screenHeight,\n      tabBarHeight: info.screenHeight-info.screenHeight\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    //自定义底部导航，需要在当前页面修改selected的值 否则无效\n    if (typeof this.getTabBar === 'function' && this.getTabBar()) {\n      let cateNum = getMedicineCateNum();\n\n      this.getTabBar().setData({\n        selected: 1,  // 这里指的是该页面对应在tabBar的索引\n        brageNum: cateNum || 0\n      })\n    }\n    this.getClassification();\n  },\n  switchArea(e){//通过点击记录分类id标识\n    let item = e.currentTarget.dataset.item\n    this.setData({\n      identificationId: item.id,\n      goodsList: item.children\n    })\n  },\n  /**\n   * \n   * @param {跳转标识，如果为1则跳转分类列表页} e \n   */\n  handleSearch(e){\n    let type = e.currentTarget.dataset.type;\n    let item = e.currentTarget.dataset.item;\n    let linkVal;\n\n    // 如果点击右侧分类\n    linkVal = type == 1 ? `?classify=true&title=${ item.name }&id=${ item.id }` : '?classify=true';\n\n    Taro.navigateTo({\n      url: `/pages/b2c/pages/productSearch/productSearch${ linkVal }`\n    })\n  },\n  //获取分类列表\n  getClassification(e){\n    let that = this;\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax2('get', apiUrl.getClassificationUrl, {}, res => {\n      Taro.hideLoading({})\n      if (res.data.code == 0) {\n        let data  = res.data.result;\n        const totalArr = data.filter(item => item.children.length);\n        this.setData({\n          goodsArea: totalArr,\n          identificationId:totalArr[0] ? totalArr[0].id : '',\n          goodsList: totalArr[0] ? totalArr[0].children : [],\n          defaultType: totalArr.length > 0?false:true\n        })\n\n      } else {\n        that.toast( res.data.msg );\n      }\n    }, function() {\n      that.toast('请求失败');\n    })\n  },\n  toast(e){\n    Taro.showToast({\n      title: e,\n      icon: 'none'\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  }\n};","json":{"missingData-view":"/component/missingData/missingData"},"wxml":"\n  <view class=\"classify-auto-container\">  \n    <wxs module=\"filter\"></wxs>\n    <navBar title-text=\"分类\" :showCapsule=\" false \"></navBar>\n    <view :class=\"[classifyBox,(isDjk?'djk':'')]\" :style=\"{height:windowHeight - (navBarHeight + tabBarHeight + 62)px}\"> \n      <block v-if=\" goodsList.length > 0 \"> \n        <view class=\"search_hearder\">  \n          <image class=\"search_icon\" mode=\"widthFix\" src=\"../../images/search-icon-black.png\"></image>\n          <view class=\"search_kuai\" v-if=\" input_text \" bindtap=\"search_clear_btn\"></view>\n          <input class=\"search_input\" disabled=\"true\" :value=\" input_text \" placeholder-style=\"color: #9D9FB8;\" data-type=\"2\" bindtap=\"handleSearch\" placeholder=\"搜一搜商品名称\" bindconfirm=\"search_btn\"></input>\n        </view>\n        <view class=\"content\" style=\"height:100%;\"> \n          <view class=\"left\">\n            <scroll-view scroll-y=\"true\" :style=\"{padding-bottom:tabbarHeightpx}\" bindscrolltoupper=\"upper\" bindscrolltolower=\"lower\" bindscroll=\"scroll\">\n              <view :class=\"[item,( identificationId == item.id ? 'active' : '' )]\" :data-item=\" item \" v-for=\"(item, key) in  goodsArea \" :key=\"key\" bindtap=\"switchArea\">\n\t\t\t\t\t\t{{item.name}}\n\t\t\t\t\t\n              </view>\n            </scroll-view>\n          </view>\n          <view class=\"right\">\n            <scroll-view scroll-y=\"true\" :style=\"{padding-bottom:tabbarHeightpx}\" bindscrolltoupper=\"upper\" bindscrolltolower=\"lower\" bindscroll=\"scroll\">\n              <view class=\"scroll\">\n                <view class=\"right_list\" v-for=\"(item, key) in  goodsList \" :key=\"key\" :data-item=\"item\" data-type=\"1\" bindtap=\"handleSearch\"> \n                  <image class=\"right_img\" :src=\"''+ filter.getCutSrc(item.logo,'@216x216') +' '\"></image>\n                  <view class=\"right_text\">{{ item.name }}\n                  </view>\n                </view>\n              </view>\n            </scroll-view>\n          </view>\n        </view>\n      </block>\n      <block v-if=\"defaultType\">\n        <missingData-view zhi=\"new1\" textval=\"暂无内容，敬请期待\" textval2=\"继续逛逛\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      </block>\n    </view>\n  </view>","wxss":"page{\n  background-color: #fff;\n  height: 100%;\n}\n.search_hearder {\n  height: 64rpx;\n  position: relative;\n  padding-left: 20rpx;\n  border-radius: 36rpx;\n  background-color: #F0F0F5;\n  margin: 20rpx 24rpx 0;\n}\n\n.search_input {\n  width: 500rpx;\n  height: 64rpx;\n  font-size: 25rpx;\n  padding-left: 50rpx; \n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  padding: 18rpx 24rpx;\n}\n.content {\n  display: flex;\n  width: 100%;\n  margin-top: 24rpx;\n  height: 100%;\n}\n\n.content .left {\n  width: 170rpx;\n  background: #F3F3F7;\n  font-size: 26rpx;\n  overflow: scroll;\n  flex-shrink: 0;\n  -webkit-overflow-scrolling: touch;\n}\n.content .right {\n  width: calc(100% - 170rpx);\n  overflow: scroll;\n  \n}\n.scroll{\n  display: flex;\n  flex-flow: row wrap;\n  align-content: flex-start;   \n}\n.content .left .item {\n  color: #41435D;\n  padding: 25rpx 0;\n  position: relative;\n  text-align: center;\n  font-size: 24rpx;\n}\n.content .left .active {\n  background: #fff;\n  color: #111334;\n  font-weight: bold;\n  font-size: 28rpx;\n  position: relative;\n}\n\n.content .left .active::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 6rpx;\n  height: 24rpx;\n  background: #00b955;\n  border-radius: 0 4rpx 4rpx 0;\n  margin-top: -12rpx;\n}\n\n.right_list{\n  width: 160rpx;\n  height: auto;\n  margin-left: 27rpx;\n  margin-top: 21rpx;\n  margin-bottom: 21rpx;\n  position: relative;\n}\n\n.right_list::before {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 0;\n  width: 140rpx;\n  height: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin-left: -70rpx;\n}\n\n.right_img{\n  display: block;\n  height: 140rpx;\n  width: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin: auto;\n}\n.right_text{\n  font-size: 24rpx;\n  text-align: center;\n  color: #111334;\n  margin-top: 13rpx;\n}\n.classifyBox{\n  height: 100vh;\n}"},"convertDir/pages/djk/pages/authentication/authentication":{"js":"// pages/djk/pages/authentication/authentication.js\nimport {\n  ajax,\n  ajax2\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      formData: {\n        phone: \"\",//手机号\n        name:'',//姓名\n        id:'',//身份证号\n        socialSecurityCard:'',//社保卡\n        code:''//手机验证码\n      },\n      codeStatus: false,\n      sendMsg: \"60s重发\",\n      verificationCodeText:'发送验证码'\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n  // 验证字段\n  handleCheck(){\n    const regIdCard = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\n    let data = this.data.formData;\n    let dataType = true;\n    if(!data.name){\n      this.handleToast('请输入姓名');\n      dataType = false;\n      return false;\n    }\n    if (!regIdCard.test(data.id)) {\n      this.handleToast('请输入正确身份证号')\n      dataType = false;\n      return false\n    }\n    if (!data.socialSecurityCard) {\n      this.handleToast('请输社保卡号')\n      dataType = false;\n      return false\n    }\n    if (data.phone.length != 11 || isNaN(data.phone)) {\n      this.handleToast('请输入11位数手机号')\n      dataType = false;\n      return false\n    }\n    return dataType;\n  },\n  handleToast(e){\n    Taro.showToast({\n      title: e,\n      icon: 'none',\n      mask: true\n    });\n  },\n  handleSubmit(){\n    if(!this.handleCheck()){\n      return false\n    }\n    let data = this.data.formData;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    \n    ajax2(\"POST\", \"saas/medicarebind/bindingMedicalInsurance\", {\n      userName:data.name,\n      paperNo:data.id,\n      socialCardNo:data.socialSecurityCard,\n      mobilePhone:data.phone,\n      shortVerificationCode:data.code,\n      cityCode:'420100'\n    }, res => {\n      // \n      Taro.hideLoading()\n      if (res.data.code == 0) {\n        let getdata = JSON.stringify(this.data.formData);\n        Taro.redirectTo({\n          url: `/pages/djk/pages/medCardPassword/medCardPassword?info=${getdata}`\n        })\n      }else{\n        this.handleToast(res.data.msg)\n      }\n    }, res => {\n      Taro.hideLoading()\n      this.handleToast(请求失败)\n    })\n  },\n  nameInput(e){\n    this.data.formData.name = e.detail.value;\n  },\n  idInput(e){\n    this.data.formData.id = e.detail.value;\n  },\n  socialSecurityCardInput(e){\n    this.data.formData.socialSecurityCard = e.detail.value;\n  },\n  telInput(e){\n    const phone = e.detail.value.replace(/[^\\d]/g, '');\n    const formData = Object.assign({}, this.data.formData, {\n      phone\n    })\n    this.setData({\n      formData\n    });\n  },\n  yzmInput(e){\n    this.data.formData.code = e.detail.value;\n  },\n  //发送验证码\n  getCode: function() {\n    if(this.data.codeStatus){\n      return false\n    }\n    let phone = this.data.formData.phone;\n\n    if (phone) {\n      if (phone.length != 11 || isNaN(phone)) {\n        this.handleToast('请输入11位数手机号'); \n        return false\n      }\n      Taro.showLoading({\n        title: '加载中',\n        mask: true,\n      })\n      ajax(\"get\", `miniapp/usermanager/getMessageVerificationCode/${phone}`, {}, res => {\n        console.log(res);\n        if (res.data.code == 0) {\n          var time = 60;\n          var codeTime = setInterval(() => {\n            time--;\n            if (time <= 0) {\n              this.setData({\n                codeStatus: false,\n                sendMsg: '获取验证码'\n              });\n              clearInterval(codeTime);\n            } else {\n              this.setData({\n                codeStatus: true,\n                sendMsg: time + 's重发'\n              });\n            }\n          }, 1000)\n        }\n        Taro.hideLoading();\n        this.setData({\n          codeStatus: false,\n        });\n        this.handleToast(res.data.msg); \n      }, res => {\n        Taro.hideLoading();\n        this.handleToast('发送失败'); \n        this.setData({\n          codeStatus: false,\n        });\n      })\n    } else {\n      this.handleToast('请输入手机号码'); \n    }\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","json":{},"wxml":"\n  <view class=\"authentication-auto-container\">       \n    <navBar title-text=\"领取社保卡\"></navBar>\n    <view class=\"box_title\">实名认证\n    </view>\n    <view class=\"box_list\"> \n      <view class=\"box_list_left\">姓名\n      </view>\n      <view class=\"box_list_right\">\n        <input class=\"box_list_input\" bindinput=\"nameInput\" placeholder=\"请输入姓名\"></input>\n      </view>\n    </view>\n    <view class=\"box_list\"> \n      <view class=\"box_list_left\">身份证号码\n      </view>\n      <view class=\"box_list_right\">\n        <input class=\"box_list_input\" bindinput=\"idInput\" placeholder=\"请输入身份证号码\"></input>\n      </view>\n    </view>\n    <view class=\"box_list\"> \n      <view class=\"box_list_left\">社保卡号\n      </view>\n      <view class=\"box_list_right\">\n        <input class=\"box_list_input\" bindinput=\"socialSecurityCardInput\" placeholder=\"请输入社保卡号\"></input>\n      </view>\n    </view>\n    <view class=\"box_list\"> \n      <view class=\"box_list_left\">手机号\n      </view>\n      <view class=\"box_list_right\">\n        <input class=\"box_list_input\" bindinput=\"telInput\" placeholder=\"请输入手机号\" maxlength=\"11\" :value=\" formData.phone \"></input>\n      </view>\n    </view>\n    <view class=\"box_list\"> \n      <view class=\"box_list_left\">验证码\n      </view>\n      <view class=\"box_list_right yzm\"> \n        <input class=\"box_list_input\" bindinput=\"yzmInput\" placeholder=\"请输入验证码\"></input>\n        <view :class=\"[( !codeStatus ? 'box_list_yzm' : 'text_gray')]\" bindtap=\"getCode\">{{codeStatus?sendMsg:'发送验证码'}}\n        </view>\n      </view>\n    </view>\n    <view class=\"box_btn\" bindtap=\"handleSubmit\">下一步\n    </view>\n  </view>","wxss":"/* pages/djk/pages/authentication/authentication.wxss */\n.box_title{\n  padding-left: 30rpx;\n  height: 73rpx;\n  background: #ffffff;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: left;\n  color: #999999;\n  line-height: 73rpx;\n  border-bottom: 1px solid #eeeeee;\n}\n.box_list{\n  height: 96rpx;\n  line-height: 96rpx;\n  color: #333333;\n  display: flex;\n  background-color: #ffffff;\n  border-bottom: 1px solid #eeeeee;\n}\n.box_list .box_list_left{\n  width: 352rpx;\n  height: 100%;\n  text-indent: 30rpx;\n}\n.box_list .box_list_right{\n  width: 100%;\n  height: 100%;\n}\n.box_list_input{\n  height: 100%;\n}\n.yzm{\n  display: flex;\n}\n.box_list_yzm{\n  width: 218rpx;\n  font-size: 34rpx;\n  color: #1677FF;\n  text-align: center;\n  position: relative;\n  display: block;\n  line-height: 96rpx;\n  background-color: #ffffff;\n}\n.box_list_yzm::after{\n  content: '';\n  display: block;\n  position: absolute;\n  width: 2rpx;\n  height: 44rpx;\n  background: #eeeeee;\n  position: absolute;\n  left: 0;\n  top: 27rpx;\n}\n.text_gray {\n  color: #999;\n}\n.box_btn{\n  width: 690rpx;\n  height: 88rpx;\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n  border-radius: 50rpx;\n  text-align: center;\n  line-height: 88rpx;\n  font-size: 36rpx;\n  color:#ffffff;\n  margin: 0 auto;\n  margin-top: 82rpx;\n}"},"convertDir/pages/djk/pages/electronCard/electronCard":{"js":"// pages/djk/pages/electronCard/electronCard.js\nimport { cdnStaticResourceUrl,ajax2 } from '../../../../utils/util';\nlet apiUrl = {\n  // cardInfoApi: `api/ykq/order/r/queryMedicareCard`,\n  saveCardApi: `api/ykq/order/w/saveMedicareCard`,\n  ybCardInfoApi: `api/medicarecard/queryMedicareCard`,\n  ybBindCardPwdApi: `api/medicarecard/bindMedicareCard`,\n  getPwdStatus: `api/medicarecard/getPwdStatus`\n}\n\nexport default {\n\n  data: function() {\n    return {\n      loading:false,\n      isBindYBCard: false,\n      cdnPath: cdnStaticResourceUrl,\n      cardInfo:{},\n      sess_key: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    let _this = this\n    this.setData({\n      sess_key: getApp().globalData.sess_key\n    },function () {\n      _this.checkBind();\n    })\n    \n  },\n  // 查询是否绑定过医保卡\n  checkBind() {\n    Taro.showLoading({\n      title: '加载中',\n      mask:true\n    })\n    ajax2('get', 'api/medicarecard/queryMedicareCard', {}, ({ data } = { data: {} }) => {\n      if (data.code == 0) {\n        Taro.hideLoading();\n        this.setData({\n          isBindYBCard: true\n        });\n        this.getCard()\n      } else {\n        Taro.hideLoading();\n        this.setData({\n          isBindYBCard: false\n        });\n      }\n    }, res => {\n      Taro.hideLoading();\n      this.setData({\n        isBindYBCard: false\n      });\n    })\n  },\n  // 获取医保卡信息\n  getCard() {\n    let url = apiUrl.ybCardInfoApi\n    let cardInfo\n    Taro.showLoading({\n      title: '加载中',\n      mask:true\n    })\n    ajax2('get', url, {}, res => {\n      Taro.hideLoading();\n      if (res.data.code === 0) { \n        // cardInfo = this.handleCardInfoReset(res.data.result)\n        this.setData({\n          cardInfo:res.data.result\n        });\n      }else {\n        Taro.hideLoading();\n        Taro.showToast({\n          title: res.data.msg || '查询医保卡信息失败',\n          icon: 'none',\n        })\n      }\n    }, e => {\n      Taro.showToast({\n        title: e.msg || '查询医保卡信息失败',\n        icon: 'none',\n      })\n      Taro.hideLoading();\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  goNext() {\n    Taro.redirectTo({\n      url: '/pages/djk/pages/authentication/authentication'\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"electronCard-auto-container\">  \n    <navBar title-text=\"电子社保卡\"></navBar>\n    <view v-if=\"sess_key && !isBindYBCard\"> \n      <view class=\"imgBox\">  \n        <image mode=\"aspectFit\" class=\"topImg\" src=\"https://tuan-static.ybm100.com/ykq/miniapp/images/social-card.jpg\"></image>\n        <text class=\"name\">姓名  ***\n        </text>\n        <text class=\"num\">社会保障号码  ***************\n        </text>\n      </view>\n      <view class=\"box\"> \n        <view class=\"addr\"> \n          <text class=\"addr-left\">参保地\n          </text>\n          <text class=\"addr-right\">武汉\n          </text>\n        </view>\n        <view class=\"next\" bindtap=\"goNext\">领取\n        </view>\n      </view>\n    </view>\n    <view v-if=\"sess_key && isBindYBCard \">\n      <view class=\"imgBox\">  \n        <image mode=\"aspectFit\" class=\"topImg\" src=\"https://tuan-static.ybm100.com/ykq/miniapp/images/social-card.jpg\"></image>\n        <text class=\"name\">姓名  {{cardInfo.accountName}}\n        </text>\n        <text class=\"num\">社会保障号码  {{ cardInfo.userCardNo }}\n        </text>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/djk/pages/electronCard/electronCard.wxss */\npage{\n  background:white;\n}\n.imgBox{\n  position: relative;\n}\n.name{\n  position: absolute;\n  left:90rpx;\n  top:200rpx;\n}\n.num{\n  position: absolute;\n  left:90rpx;\n  top:255rpx;\n}\n.topImg{\n  width:calc(100% - 60rpx);\n  margin-left:30rpx;\n}\n.box{\n  background:white;\n  width:100%;\n}\n.bar{\n  width:calc(100% - 100rpx);\n  margin-left:50rpx;\n  display: flex;\n  justify-content: space-around;\n}\n.item{\n  display:flex;\n  flex-direction: column;\n  align-items: center;\n}\n.item image{\n  width:60rpx;\n  height:60rpx;\n}\n.item text{\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #666666;\n  line-height: 33px;\n  margin-top: 16rpx;\n  white-space: nowrap;\n}\n.title{\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #333333;\n  line-height: 45rpx;\n  margin-bottom:50rpx;\n  display:block;\n}\n.addr{\n  width:calc(100% - 150rpx);\n  margin:0 0 46rpx 0;\n  display:flex;\n  padding:0 60rpx;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  height:96rpx;\n  border-top: 1rpx solid #eeeeee;\n  border-bottom: 1rpx solid #eeeeee;\n\n}\n.addr .left{\n  font-size: 34rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: left;\n  color: #333333;\n}\n.addr .right{\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: right;\n  color: #333333;\n}\n.addr::before{\n  content: \"\";\n  position: absolute;\n  right: 30rpx;\n  top: 50%;\n  width: 16rpx;\n  height: 16rpx;\n  border: 2rpx solid #999999;\n  border-left: 0;\n  border-bottom: 0;\n  margin-top: -8rpx;\n  transform: rotate(45deg);\n}\n.next{\n  width:calc(100% - 120rpx);\n  margin-left:60rpx;\n  background:#00B955;\n  color:white;\n  height:88rpx;\n  text-align: center;\n  line-height:88rpx;\n  border-radius: 44rpx;\n}\n\n/* 卡片 */\n.card-container {\n  position: relative;\n  width: 690rpx;\n  height: 300rpx;\n  /* background: linear-gradient(270deg,#3c84ff, #4fb1ff); */\n  border-radius: 20rpx;\n  margin: 40rpx auto 0 auto;\n}\n\n.card-container {\n  box-sizing: border-box;\n  padding: 30rpx;\n}\n\n.card-container .header {\n  display: flex;\n}\n\n.card-container .header p {\n  margin-right: 16rpx;\n  width: 70rpx;\n  height: 70rpx;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.card-container .header p .card-icon {\n  width: 70rpx;\n  height: 70rpx;\n}\n\n.card-container .header .card-name {\n  color: #fff;\n  line-height: 33rpx;\n}\n\n.card-container .header .card-name view:nth-child(1) {\n  font-size: 24rpx;\n  font-weight: 700;\n}\n\n.card-container .header .card-name view:nth-child(2) {\n  font-size: 20rpx;\n}\n.wechat-code-img {\n  width: 40rpx;\n  height: 40rpx;\n  position: absolute;\n  top: 30rpx;\n  right: 30rpx;\n}"},"convertDir/pages/djk/pages/medCardPassword/medCardPassword":{"js":"// pages/note/medicareCard/medicareCard.js\nimport { ajax2 } from '../../../../utils/util';\n\nconst app = getApp();\n\nexport default {\n  data: function() {\n    return {\n      password: '',\n      repPassword: '',\n      sess_key: null,\n      loading: true,\n      // agreeRules: false,\n      sess_key: '',\n      isDjk: app.globalData.src_whyb ? true : false,\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log(\"options\", options)\n    this.getInfo()\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n  },\n  /**\n    * 获取跳转医保的路径及参数\n    */\n   getInfo: function () {\n    let _this = this\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    ajax2('get', 'api/medicarecard/getPwdStatus', {}, (res) => {\n      _this.data.loading = false\n      if (res.data.code == 0) {\n        if(res.data.result){\n          Taro.navigateTo({\n            url: '/pages/djk/pages/medicareCard/medicareCard',\n          })\n        }else{\n          console.log('init success')\n        }\n      }\n      Taro.hideLoading();\n    }, (res) => {\n      _this.showToast(res.msg || '获取实名认证信息失败');\n      Taro.hideLoading();\n    })\n  },\n  \n  /**\n   * 封装toast\n   * @param {*} text \n   */\n  showToast: function (text) {\n    Taro.showToast({\n      title: text,\n      icon: 'none',\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  setPassword(e) {\n    let { type } = e.target.dataset;\n    let curVal = e.detail.value.replace(/[^\\d]/g, '');\n    if (type === 'password') {\n      this.setData({\n        password: curVal\n      });\n    } else {\n      this.setData({\n        repPassword: curVal\n      });\n    }\n  },\n  \n  // checkboxChange(e) {\n  //   this.setData({\n  //     agreeRules:!this.data.agreeRules\n  //   })\n  // },\n  submit() {\n    // if (!this.data.agreeRules) {\n    //   Taro.showToast({\n    //     title: '请先勾选协议',\n    //     icon: 'none'\n    //   })\n    //   return false;\n    // }\n  \n    if (this.data.password && this.data.repPassword && this.data.password !== this.data.repPassword) {\n      Taro.showToast({\n        title: '请确认两次密码是否一致',\n        icon: 'none'\n      })\n      return false;\n    }\n    if (this.data.password.length !== 6 || this.data.repPassword.length !== 6) {\n      return false;\n    }\n    console.log(this.data);\n    this.setPwd()\n  },\n  setPwd(){\n    let _this = this\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    ajax2('post', '/api/medicarecard/bindMedicareCard', {password:this.data.password}, res => {\n      \n      if (res.data.code === 0) {\n        Taro.redirectTo({\n          url: `/pages/djk/pages/electronCard/electronCard`,\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg || '保存失败',\n          icon: 'none',\n        })\n      }\n      Taro.hideLoading();\n    }, e => {\n      Taro.showToast({\n        title: e.msg || '保存失败',\n        icon: 'none',\n      })\n      Taro.hideLoading();\n    })\n  }\n};","json":{},"wxss":".medicare-card {\n  height: 100vh;\n  background: #f7f7f7;\n}\n\n.header-tooltip {\n  height: 73rpx;\n  line-height: 73rpx;\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #999999;\n  padding: 0 30rpx;\n  background: #fff;\n  border-top: 1px solid #EEEEEE;\n}\n\n/* .form-content {\n\n} */\n\n.form-content .form-cell {\n  display: flex;\n  align-items: center;\n  height: 90rpx;\n  padding-left: 30rpx;\n  background: #fff;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n.form-content .form-cell .require-icon {\n  font-size: 28rpx;\n  color: #FF2121;\n  margin-right: 10rpx;\n}\n\n.form-content .form-cell .int-label {\n  font-size: 28rpx;\n  color: #333333;\n  width: 170rpx;\n  margin-right: 102rpx;\n}\n\n.form-content .form-cell input {\n  font-size: 28rpx;\n  font-weight: 400;\n  text-align: left;\n  color: #333333;\n  line-height: 40rpx;\n}\n\n.form-content .form-cell .adress {\n  font-family: UICTFontTextStyleBody;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #333333;\n}\n.text-tips {\n  display: flex;\n  align-items: top;\n  margin-top: 30rpx;\n  font-size: 22rpx;\n}\n.text-tips checkbox {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.text-tips checkbox .wx-checkbox-input {\n  width: 28rpx;\n  height: 28rpx;\n  position: relative;\n  left: -12rpx;\n  top: -4rpx;\n}\n\n.text-tips checkbox .wx-checkbox-input.wx-checkbox-input-checked::before {\n  content: '';\n  width: 24rpx;\n  height: 24rpx;\n  background-color: #2792ff;\n}\n\n.link-to-rules {\n  color: #4087ff;\n}\n\n.submit-btn-group button {\n  color: #fff;\n  width: 100%;\n  height: 88rpx;\n  background: linear-gradient(270deg,#3c84ff, #4f90ff);\n  border-radius: 50rpx;\n}\n\n.submit-btn-group  .gray-btn {\n  background: #c6cad4;\n}\n\n/* 卡片 */\n.card-container {\n  position: relative;\n  width: 690rpx;\n  height: 300rpx;\n  /* background: linear-gradient(270deg,#3c84ff, #4fb1ff); */\n  border-radius: 20rpx;\n  margin: 40rpx auto 0 auto;\n}\n\n.card-container {\n  box-sizing: border-box;\n  padding: 30rpx;\n}\n\n.card-container .header {\n  display: flex;\n}\n\n.card-container .header p {\n  margin-right: 16rpx;\n  width: 70rpx;\n  height: 70rpx;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.card-container .header p .card-icon {\n  width: 70rpx;\n  height: 70rpx;\n}\n\n.card-container .header .card-name {\n  color: #fff;\n  line-height: 33rpx;\n}\n\n.card-container .header .card-name view:nth-child(1) {\n  font-size: 24rpx;\n  font-weight: 700;\n}\n\n.card-container .header .card-name view:nth-child(2) {\n  font-size: 20rpx;\n}\n\n.wechat-code-img {\n  width: 40rpx;\n  height: 40rpx;\n  position: absolute;\n  top: 30rpx;\n  right: 30rpx;\n}\n\n.footer {\n  margin-top: 72rpx;\n  color: #fff;\n}\n\n.footer .user-name {\n  font-size: 30rpx;\n  font-weight: 700;\n}\n\n.footer .card-number {\n  font-size: 28rpx;\n  margin-top: 20rpx;\n}\n\n.not-login-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n}\n\n.not-login-view .missing-view {\n  flex: 1;\n}\n\n.page-content {\n  padding: 30rpx;\n}\n.medicare-card_container_header {\n  width: 690rpx;\n  height: 344rpx;\n  box-sizing: border-box;\n  padding: 130rpx 0 0 60rpx;\n}\n.medicare-card_container_header view {\n  padding: 10rpx 0;\n  font-weight: bold;\n  font-size: 28rpx;\n}\n.medicare-card_container_content {\n  padding: 0 30rpx;\n}\n.medicare-card_container_content .medicare-card_container_content_header {\n  font-size: 32rpx;\n  font-weight: bold;\n  margin: 40rpx 0 0;\n}\n.medicare-card_container_content .medicare-card_container_content_tips {\n  font-size: 24rpx;\n  color: #999;\n}\n.medicare-card_container_content .medicare-card_container_content_password {\n  margin: 44rpx 0;\n}\n.medicare-card_container_content .medicare-card_container_content_password input{\n  line-height: 48rpx;\n}","wxml":"\n  <view class=\"medCardPassword-auto-container\">\n    <view class=\"medicare-card\"> \n      <navBar title-text=\"医保卡\"></navBar>\n      <view class=\"page-content\">\n        <view class=\"medicare-card_container\"> \n          <view class=\"medicare-card_container_header\" style=\"background: url(https://tuan-static.ybm100.com/ykq/miniapp/images/social-card.jpg) no-repeat; background-size: 100%;\"> \n            <view class=\"username\">姓名 ***\n            </view>\n            <view class=\"medicare-number\">社会保障号码 ***********\n            </view>\n          </view>\n          <view class=\"medicare-card_container_content\">    \n            <view class=\"medicare-card_container_content_header\">请设置电子社保卡密码\n            </view>\n            <view class=\"medicare-card_container_content_tips\">注：密码不能是重复，连续的数字\n            </view>\n            <view class=\"medicare-card_container_content_password\">\n              <input type=\"password\" placeholder=\"请输入6位数字密码\" :value=\" password \" bindinput=\"setPassword\" data-type=\"password\" maxlength=\"6\"></input>\n            </view>\n            <view class=\"medicare-card_container_content_password\">\n              <input type=\"password\" placeholder=\"请再次输入6位数字密码\" :value=\" repPassword \" bindinput=\"setPassword\" data-type=\"repPassword\" maxlength=\"6\"></input>\n            </view>\n            <view class=\"submit-btn-group\">\n              <button :class=\"[( password.length === 6 && repPassword.length === 6 ? '' : 'gray-btn' )]\" bindtap=\"submit\">完成\n              </button>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>"},"convertDir/pages/djk/pages/medCardPasswordWX/medCardPasswordWX":{"json":{},"js":"/**\n * @author: wangqinfei\n * @desc: 获取微信医保卡流程后，填写密码、手机号进行绑定操作\n */\nimport { ajax2, ajax } from '../../../../utils/util';\n\nconst app = getApp();\nlet cardInfo\n\nexport default {\n  data: function() {\n    return {\n      phone: '', // 手机号\n      password: '',\n      repPassword: '',\n      sess_key: null,\n      loading: true,\n      // agreeRules: false,\n      sess_key: '',\n      isDjk: app.globalData.src_whyb ? true : false,\n      code: '',\n      codeStatus: false,\n      sendMsg: \"60s重发\",\n      verificationCodeText:'发送验证码',\n    };\n  },\n  setPassword(e) {\n    let { type } = e.target.dataset;\n    let curVal = e.detail.value.replace(/[^\\d]/g, '');\n    if (type === 'password') {\n      this.setData({\n        password: curVal\n      });\n    } else {\n      this.setData({\n        repPassword: curVal\n      });\n    }\n  },\n  \n  // checkboxChange(e) {\n  //   this.setData({\n  //     agreeRules:!this.data.agreeRules\n  //   })\n  // },\n  submit() {\n    let repetReg = /(\\d)\\1{2}/g // 重复三个数字正则\n    let conReg = /(0(?=1)|1(?=2)|2(?=3)|3(?=4)|4(?=5)|5(?=6)|6(?=7)|7(?=8)|8(?=9)){2}\\d/g // 连续的三个数字正则\n    // if (!this.data.agreeRules) {\n    //   Taro.showToast({\n    //     title: '请先勾选协议',\n    //     icon: 'none'\n    //   })\n    //   return false;\n    // }\n    if (this.data.password.length !== 6 || this.data.repPassword.length !== 6) {\n      return false;\n    }\n    if (this.data.password && this.data.repPassword && this.data.password !== this.data.repPassword) {\n      Taro.showToast({\n        title: '请确认两次密码是否一致',\n        icon: 'none'\n      })\n      return false;\n    }\n    if (repetReg.test(this.data.password) || conReg.test(this.data.password) ||\n      repetReg.test(this.data.repPassword) || repetReg.test(this.data.repPassword)) {\n        Taro.showToast({\n          title: '密码不能是重复，连续的数字',\n          icon: 'none'\n        })\n        return false;\n    }\n    console.log('password',this.data.password.length)\n    console.log('repPassword',this.data.repPassword.length)\n    console.log('phone',this.data.phone.length)\n    console.log('code',this.data.code.length)\n    this.handleBindMedicareInfo()\n  },\n  handleBindMedicareInfo(){\n    let _this = this\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    console.log('ccc:', this.cardInfo)\n    let params = {\n      userName: this.cardInfo.accountName,\n      password: this.data.password,\n      transType: 1,\n      socialCardNo: this.cardInfo.socialCardNo,\n      paperType: 1,\n      paperNo: this.cardInfo.userCardNo,\n      shortVerificationCode: this.data.code,\n      mobilePhone: this.data.phone,\n      cityCode: 420100,\n    }\n    ajax2('post', 'saas/medicarebind/bindingMedicalInsurance', params, res => {\n      if (res.data.code === 0) {\n        Taro.redirectTo({\n          url: `/pages/djk/pages/electronCard/electronCard`,\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg || '保存失败',\n          icon: 'none',\n        })\n      }\n      Taro.hideLoading();\n    }, e => {\n      Taro.showToast({\n        title: e.msg || '保存失败',\n        icon: 'none',\n      })\n      Taro.hideLoading();\n    })\n  },\n  telInput(e){\n    this.setData({\n      phone: e.detail.value\n    })\n  },\n  yzmInput(e){\n    this.setData({\n      code: e.detail.value\n    })\n  },\n  //发送验证码\n  getCode: function() {\n    console.log(111)\n    if(this.data.codeStatus){\n      return false\n    }\n    let phone = this.data.phone;\n    console.log('phone: ', this.data.phone)\n    if (phone) {\n      // if (phone.length != 11 || isNaN(phone)) {\n      //   this.handleToast('请输入11位数手机号'); \n      //   return false\n      // }\n      Taro.showLoading({\n        title: '加载中',\n        mask: true,\n      })\n      ajax(\"get\", `miniapp/usermanager/getMessageVerificationCode/${phone}`, {}, res => {\n        console.log(res);\n        if (res.data.code == 0) {\n          var time = 60;\n          var codeTime = setInterval(() => {\n            time--;\n            if (time <= 0) {\n              this.setData({\n                codeStatus: false,\n                sendMsg: '获取验证码'\n              });\n              clearInterval(codeTime);\n            } else {\n              this.setData({\n                codeStatus: true,\n                sendMsg: time + 's重发'\n              });\n            }\n          }, 1000)\n        }\n        Taro.hideLoading();\n        this.setData({\n          codeStatus: false,\n        });\n        this.handleToast(res.data.msg); \n      }, res => {\n        Taro.hideLoading();\n        this.handleToast('发送失败'); \n        this.setData({\n          codeStatus: false,\n        });\n      })\n    } else {\n      this.handleToast('请输入手机号码'); \n    }\n  },\n  handleToast(e){\n    Taro.showToast({\n      title: e,\n      icon: 'none',\n      mask: true\n    });\n  },\n  /**\n   * 封装toast\n   * @param {*} text \n   */\n  showToast: function (text) {\n    Taro.showToast({\n      title: text,\n      icon: 'none',\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log(\"options\", options)\n    this.cardInfo = JSON.parse(options.cardInfo)\n    console.log('cardInfo cardInfo:', this.cardInfo)\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"medCardPasswordWX-auto-container\">\n    <view class=\"medicare-card\"> \n      <navBar title-text=\"医保卡\"></navBar>\n      <view class=\"page-content\">\n        <view class=\"medicare-card_container\"> \n          <view class=\"medicare-card_container_header\" style=\"background: url(https://tuan-static.ybm100.com/ykq/miniapp/images/social-card.jpg) no-repeat; background-size: 100%;\"> \n            <view class=\"username\">姓名 ***\n            </view>\n            <view class=\"medicare-number\">社会保障号码 ***********\n            </view>\n          </view>\n          <view class=\"medicare-card_container_content\">      \n            <view class=\"medicare-card_container_content_header\">请设置电子社保卡密码\n            </view>\n            <view class=\"medicare-card_container_content_tips\">注：密码不能是重复，连续的数字\n            </view>\n            <view class=\"medicare-card_container_content_password\">\n              <input type=\"password\" placeholder=\"请输入6位数字密码\" :value=\" password \" bindinput=\"setPassword\" data-type=\"password\" maxlength=\"6\"></input>\n            </view>\n            <view class=\"medicare-card_container_content_password\">\n              <input type=\"password\" placeholder=\"请再次输入6位数字密码\" :value=\" repPassword \" bindinput=\"setPassword\" data-type=\"repPassword\" maxlength=\"6\"></input>\n            </view>\n            <view class=\"box_list\"> \n              <view class=\"box_list_left\">手机号\n              </view>\n              <view class=\"box_list_right\">\n                <input class=\"box_list_input\" bindinput=\"telInput\" placeholder=\"请输入手机号\" maxlength=\"11\" :value=\" phone \"></input>\n              </view>\n            </view>\n            <view class=\"box_list\"> \n              <view class=\"box_list_left\">验证码\n              </view>\n              <view class=\"box_list_right yzm\"> \n                <input class=\"box_list_input\" bindinput=\"yzmInput\" placeholder=\"请输入验证码\"></input>\n                <view :class=\"[( !codeStatus ? 'box_list_yzm' : 'text_gray')]\" bindtap=\"getCode\">{{codeStatus?sendMsg:'发送验证码'}}\n                </view>\n              </view>\n            </view>\n            <view class=\"submit-btn-group\">\n              <button :class=\"[( password.length === 6 && repPassword.length === 6  && phone.length === 11 && code.length === 6? '' : 'gray-btn' )]\" bindtap=\"submit\">完成\n              </button>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".medicare-card {\n  height: 100vh;\n  background: #f7f7f7;\n}\n\n.header-tooltip {\n  height: 73rpx;\n  line-height: 73rpx;\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #999999;\n  padding: 0 30rpx;\n  background: #fff;\n  border-top: 1px solid #EEEEEE;\n}\n\n/* .form-content {\n\n} */\n\n.form-content .form-cell {\n  display: flex;\n  align-items: center;\n  height: 90rpx;\n  padding-left: 30rpx;\n  background: #fff;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n.form-content .form-cell .require-icon {\n  font-size: 28rpx;\n  color: #FF2121;\n  margin-right: 10rpx;\n}\n\n.form-content .form-cell .int-label {\n  font-size: 28rpx;\n  color: #333333;\n  width: 170rpx;\n  margin-right: 102rpx;\n}\n\n.form-content .form-cell input {\n  font-size: 28rpx;\n  font-weight: 400;\n  text-align: left;\n  color: #333333;\n  line-height: 40rpx;\n}\n\n.form-content .form-cell .adress {\n  font-family: UICTFontTextStyleBody;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #333333;\n}\n.text-tips {\n  display: flex;\n  align-items: top;\n  margin-top: 30rpx;\n  font-size: 22rpx;\n}\n.text-tips checkbox {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.text-tips checkbox .wx-checkbox-input {\n  width: 28rpx;\n  height: 28rpx;\n  position: relative;\n  left: -12rpx;\n  top: -4rpx;\n}\n\n.text-tips checkbox .wx-checkbox-input.wx-checkbox-input-checked::before {\n  content: '';\n  width: 24rpx;\n  height: 24rpx;\n  background-color: #2792ff;\n}\n\n.link-to-rules {\n  color: #4087ff;\n}\n\n.submit-btn-group button {\n  color: #fff;\n  width: 100%;\n  height: 88rpx;\n  margin-top: 60rpx;\n  background: linear-gradient(270deg,#3c84ff, #4f90ff);\n  border-radius: 50rpx;\n}\n\n.submit-btn-group  .gray-btn {\n  background: #c6cad4;\n}\n\n/* 卡片 */\n.card-container {\n  position: relative;\n  width: 690rpx;\n  height: 300rpx;\n  /* background: linear-gradient(270deg,#3c84ff, #4fb1ff); */\n  border-radius: 20rpx;\n  margin: 40rpx auto 0 auto;\n}\n\n.card-container {\n  box-sizing: border-box;\n  padding: 30rpx;\n}\n\n.card-container .header {\n  display: flex;\n}\n\n.card-container .header p {\n  margin-right: 16rpx;\n  width: 70rpx;\n  height: 70rpx;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.card-container .header p .card-icon {\n  width: 70rpx;\n  height: 70rpx;\n}\n\n.card-container .header .card-name {\n  color: #fff;\n  line-height: 33rpx;\n}\n\n.card-container .header .card-name view:nth-child(1) {\n  font-size: 24rpx;\n  font-weight: 700;\n}\n\n.card-container .header .card-name view:nth-child(2) {\n  font-size: 20rpx;\n}\n\n.wechat-code-img {\n  width: 40rpx;\n  height: 40rpx;\n  position: absolute;\n  top: 30rpx;\n  right: 30rpx;\n}\n\n.footer {\n  margin-top: 72rpx;\n  color: #fff;\n}\n\n.footer .user-name {\n  font-size: 30rpx;\n  font-weight: 700;\n}\n\n.footer .card-number {\n  font-size: 28rpx;\n  margin-top: 20rpx;\n}\n\n.not-login-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n}\n\n.not-login-view .missing-view {\n  flex: 1;\n}\n\n.page-content {\n  padding: 30rpx;\n}\n.medicare-card_container_header {\n  width: 690rpx;\n  height: 344rpx;\n  box-sizing: border-box;\n  padding: 130rpx 0 0 60rpx;\n}\n.medicare-card_container_header view {\n  padding: 10rpx 0;\n  font-weight: bold;\n  font-size: 28rpx;\n}\n\n.medicare-card_container_content .medicare-card_container_content_header {\n  font-size: 32rpx;\n  font-weight: bold;\n  margin: 40rpx 0 0;\n}\n.medicare-card_container_content .medicare-card_container_content_tips {\n  font-size: 24rpx;\n  color: #999;\n}\n.medicare-card_container_content .medicare-card_container_content_password {\n  margin: 44rpx 0;\n}\n.medicare-card_container_content .medicare-card_container_content_password input{\n  line-height: 48rpx;\n}\n\n.box_list{\n  height: 96rpx;\n  line-height: 96rpx;\n  color: #333;\n  display: flex;\n  border-bottom: 1px solid #eeeeee;\n}\n.box_list .box_list_left{\n  width: 220rpx;\n  height: 100%;\n}\n.box_list .box_list_right{\n  width: 100%;\n  height: 100%;\n}\n.box_list_input{\n  height: 100%;\n}\n.yzm{\n  display: flex;\n}\n.box_list_yzm{\n  min-width: 230rpx;\n  font-size: 30rpx;\n  color: #1677FF;\n  text-align: center;\n  position: relative;\n  display: block;\n  line-height: 96rpx;\n}\n.box_list_yzm::after{\n  content: '';\n  display: block;\n  position: absolute;\n  width: 2rpx;\n  height: 44rpx;\n  background: #eeeeee;\n  position: absolute;\n  left: 0;\n  top: 27rpx;\n}\n.text_gray {\n  color: #999;\n}"},"convertDir/pages/djk/pages/medicalPay/medicalPay":{"js":"// pages/djk/pages/medicalPay/medicalPay.js\nimport {\n  ajax,\n  toWeixinPayNew\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      timeType:false,\n      indentInfo:{\n      },\n      passWordShow:false,\n      orderNo:'',\n      own:{},\n      yb:{}\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if(!options.id){\n      // 如果没有参数\n      Taro.showToast({\n        title: '参数错误',\n      })\n      Taro.navigateBack({\n        delta: 1,\n      })\n    }else{\n      this.data.orderNo = options.id\n      this.setData({\n        orderNo:options.id\n      })\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.getIndentInfo()\n  },\n  /**\n   * 支付成功\n   */\n  toSuccess(data){\n    Taro.redirectTo({\n      url: `/pages/djk/pages/paymentSuccessful/paymentSuccessful?price=${data}`\n    })\n  },\n  /**\n   * @description: 获取订单详情\n   * @return: void\n   */\n  getIndentInfo() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    ajax('get', `api/ykq/order/r/${ this.data.orderNo }`, {}, res => {\n      Taro.hideLoading();\n      if(res == 2) return false;\n      if (res.data.code == 0) {\n        let indentInfo = res.data.result;\n        if(indentInfo.payInfoDetail.length === 0){\n          Taro.showToast({\n            title: '订单状态有误',\n          })\n          Taro.navigateBack({\n            delta: 1,\n          })\n          return false\n        }\n        indentInfo.payInfoDetail.forEach(item=>{\n          if(item.payChannel === 40){\n            this.setData({\n              own:item\n            })      \n          }else if(item.payChannel === 70){\n            this.setData({\n              yb:item\n            })\n          }\n        })\n        if(this.data.yb.payStatus!==10 || this.data.own.payStatus!==30){\n          Taro.showToast({\n            title: '订单支付状态异常',\n            success:function(){\n              Taro.navigateBack({\n                delta: 1,\n              })\n            }\n          })\n          \n        }\n        this.setData({\n          indentInfo,\n          timeType:true\n        })\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  updataList(){\n    console.log('超时')\n    ajax('get', `api/ykq/order/r/${ this.data.orderNo }`, {}, res => {\n      Taro.hideLoading();\n      if(res == 2) return false;\n      if (res.data.code == 0) {\n        let indentInfo = res.data.result;\n        if(indentInfo&&!indentInfo.countDownTime){\n          Taro.showToast({\n            title: '订单支付超时',\n            success:function(){\n              Taro.navigateBack({\n                delta: 1,\n              })\n            }\n          })\n        }\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n\n\n    // Taro.showToast({\n    //   title: '支付超时',\n    // })\n    // Taro.redirectTo({\n    //   url: 'pages/onlineGoods/drugList/drugList',\n    // })\n  },\n  openPassWord(){\n    //医保卡支付\n    // if(this.data.indentInfo.payMethod == 30){\n      this.setData({\n        passWordShow: true\n      })\n  },\n  /**\n   * @description: 支付\n   * @return: void\n   */\n  topay(e) {\n    let param = {\n      // orderNo: this.data.indentInfo.orderNo\n      orderNo:this.data.orderNo\n    }\n    param.payChannel = 70\n    if(e.detail.length != 6) return false; \n      param.medicareInfo = {\n        medicareCardPassword: e.detail\n    }\n    toWeixinPayNew(param, () => {\n      console.log('支付成功')\n      //支付成功\n      this.toSuccess(this.data.indentInfo.medicareAmountDesc);\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"medicalPay-auto-container\"> \n    <navBar title-text=\"支付\" :showCapsule=\" false \"></navBar>\n    <view wx:if=\"indentInfo.payInfoDetail\">    \n      <view class=\"top\"> \n        <interrogationTime routeType=\"2\" :timeType=\" timeType \" :time=\" indentInfo.countDownTime \" bind:updataList=\"updataList\"></interrogationTime>\n        <image src=\"../../../../images/icon-order-status1.png\" alt></image>\n      </view>\n      <text class=\"tips\">订单支付时，都支付完成，才是付款成功。超时未支付将自动退款至原支付账号\n      </text>\n      <button class=\"pay\" bindtap=\"openPassWord\">继续医保支付 ¥{{yb.payAmountDesc}}\n      </button>\n      <view class=\"main\"> \n        <view class=\"item\">  \n          <view class=\"border\"></view>\n          <view class=\"item-left\">  \n            <view class=\"circle blue\">\n              <text class=\"inside\"></text>\n            </view>\n            <image src=\"../../../../images/wx-active.png\"></image>\n            <text class=\"type black\">个人支付\n            </text>\n          </view>\n          <view class=\"item-right\">\n            <text class=\"black\">{{own.payStatusDesc}}  \n            </text>\n            <text class=\"red\">¥{{own.payAmountDesc}}\n            </text>\n          </view>\n        </view>\n        <view class=\"item\"> \n          <view class=\"item-left\">  \n            <view class=\"circle\">\n              <text class=\"inside\"></text>\n            </view>\n            <image src=\"../../../../images/yb.png\"></image>\n            <text class=\"type gray\">医保支付\n            </text>\n          </view>\n          <view class=\"item-right\">\n            <text class=\"gray\">{{yb.payStatusDesc}}  \n            </text>\n            <text class=\"gray\">¥{{yb.payAmountDesc}}\n            </text>\n          </view>\n        </view>\n      </view>\n      <passWord defalutTitle=\"请输入医保支付密码\" bind:getPassVal=\"topay\" :showPayPwdInput=\" passWordShow \">\n        <view slot=\"desc\" class=\"pass-word-text\">医保支付金额：¥\n          <text>{{ indentInfo.medicareAmountDesc }}\n          </text>\n        </view>\n      </passWord>\n    </view>\n  </view>","json":{"countDown":"/component/countDown/countDown","interrogationTime":"/component/interrogationTime/interrogationTime","passWord":"/component/passWord/passWord"},"wxss":"/* pages/djk/pages/medicalPay/medicalPay.wxss */\n.top{\n  height: 190rpx;\n  background: linear-gradient(270deg,#00B955, #4fb1ff);\n  width:calc(100% - 60rpx);\n  padding: 0 30rpx;\n  display:flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 38rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: left;\n  color: #ffffff;\n  line-height: 38px;\n}\n.top image{\n  width:148rpx;\n  height:124rpx\n}\n.main{\n  width:calc(100% - 120rpx);\n  padding:0 60rpx;\n}\n.item{\n  width:100%;\n  display:flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom:70rpx;\n  height:60rpx;\n  position: relative;\n}\n.border{\n  position: absolute;\n  left:8rpx;\n  top:47rpx;\n  height:96rpx;\n  width:1px;\n  box-sizing: border-box;\n  border-left: 1px dotted #d3d3d3;\n}\n.item-left{\n  display:flex; \n  align-items: center;\n}\n.circle{\n  width:20rpx;\n  height:20rpx;\n  border-radius: 10rpx;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  background:#C5C9D5;\n}\n.inside{\n  display:block;\n  width:12rpx;\n  height: 12rpx;\n  border-radius: 6rpx;\n  background:#F7F7F7;\n}\n.item-right{\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #333333;\n  line-height: 40rpx;\n}\n.blue{\n  background:#307DFF;\n}\n.red{\n  color:rgb(255,74,54)\n}\n.item-left image{\n  display:block;\n  width:60rpx;\n  height:60rpx;\n  margin: 0 33rpx 0 30rpx;\n}\n.item-left .type{\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  line-height: 45rpx;\n}\n.gray{\n  color:#999!important;\n}\n.black{\n  color: #333333!important;\n}\n.tips{\n  padding:30rpx 30rpx 0;\n  width:calc(100% - 60rpx);\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: justify;\n  color: #999999;\n  line-height: 40rpx;\n  display: block;\n  margin-bottom:48rpx;\n}\n.pay{\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n  color:white;\n  width:calc(100% - 120rpx);\n  height:88rpx;\n  line-height:88rpx;\n  position: absolute;\n  bottom:100rpx;\n  left:60rpx;\n  border-radius:44rpx;\n}"},"convertDir/pages/djk/pages/medicareCard/medicareCard":{"wxml":"\n  <view class=\"medicareCard-auto-container\">\n    <view class=\"medicare-card\">    \n      <navBar title-text=\"社保卡\"></navBar>\n      <view v-if=\" !loading && sess_key && cardInfo && cardInfo.accountName \">\n        <view class=\"imgBox\">  \n          <image mode=\"aspectFit\" class=\"topImg\" src=\"https://tuan-static.ybm100.com/ykq/miniapp/images/social-card.jpg\"></image>\n          <text class=\"name\">姓名  {{cardInfo.accountName}}\n          </text>\n          <text class=\"num\">社会保障号码  {{ cardInfo.userCardNo }}\n          </text>\n        </view>\n      </view>\n      <view v-if=\" !loading && sess_key && !cardInfo.accountName \" class=\"handleYbBtn\">\n        <missingData-view zhi=\"new1\" :textval=\"'领取电子社保卡后，可使用医保在线支付'\" imageUrl=\"/images/noteImg/djk_qs.png\" buttonText=\"立即添加\" buttonColor=\"#1677ff\" bind:action=\"handleYbBtn\"></missingData-view>\n      </view>\n      <view v-if=\" authCode \" class=\"handleYbBtn\" bindtap=\"handleSendAuthCode\">发送授权码\n      </view>\n      <view class=\"not-login-view\" v-if=\" !sess_key \">\n        <missingData-view class=\"missing-view\" zhi=\"new1\" padding-value=\"0\" buttonColor=\"#00B955\" textval2=\"登录后查看医保卡\" imageUrl=\"../../images/noteImg/djk_qs.png\" buttonText=\"点击登录\" bind:action=\"toLogin\"></missingData-view>\n      </view>\n    </view>\n  </view>","json":{"missingData-view":"../../../../component/missingData/missingData"},"wxss":".medicare-card {\n  height: 100vh;\n  background: #f7f7f7;\n}\n\n.header-tooltip {\n  height: 73rpx;\n  line-height: 73rpx;\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #999999;\n  padding: 0 30rpx;\n  background: #fff;\n  border-top: 1px solid #EEEEEE;\n}\n\n/* .form-content {\n\n} */\n\n.form-content .form-cell {\n  display: flex;\n  align-items: center;\n  height: 90rpx;\n  padding-left: 30rpx;\n  background: #fff;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n.form-content .form-cell .require-icon {\n  font-size: 28rpx;\n  color: #FF2121;\n  margin-right: 10rpx;\n}\n\n.form-content .form-cell .int-label {\n  font-size: 28rpx;\n  color: #333333;\n  width: 170rpx;\n  margin-right: 102rpx;\n}\n\n.form-content .form-cell input {\n  font-size: 28rpx;\n  font-weight: 400;\n  text-align: left;\n  color: #333333;\n  line-height: 40rpx;\n}\n\n.form-content .form-cell .adress {\n  font-family: UICTFontTextStyleBody;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #333333;\n}\n\n.text-tips {\n  display: flex;\n  justify-content: center;\n  font-size: 24rpx;\n  position: fixed;\n  bottom:148rpx;\n  width: 100%;\n  text-align: center;\n}\n\n.text-tips checkbox {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.text-tips checkbox .wx-checkbox-input {\n  width: 28rpx;\n  height: 28rpx;\n  position: relative;\n  left: -12rpx;\n  top: -4rpx;\n}\n\n.text-tips checkbox .wx-checkbox-input.wx-checkbox-input-checked::before {\n  content: '';\n  width: 24rpx;\n  height: 24rpx;\n  background-color: #2792ff;\n}\n\n.link-to-rules {\n  color: #4087ff;\n}\n\n.submit-btn-group {\n  width: 100vw;\n  text-align: center;\n  position: fixed;\n  left: 0;\n  bottom: 30rpx;\n}\n\n.submit-btn-group button {\n  color: #fff;\n  width: 690rpx;\n  height: 88rpx;\n  background: linear-gradient(270deg,#3c84ff, #4f90ff);\n  border-radius: 50rpx;\n}\n\n.submit-btn-group  .gray-btn {\n  background: #c6cad4;\n}\n\n/* 卡片 */\n.card-container {\n  position: relative;\n  width: 690rpx;\n  height: 300rpx;\n  /* background: linear-gradient(270deg,#3c84ff, #4fb1ff); */\n  border-radius: 20rpx;\n  margin: 40rpx auto 0 auto;\n}\n\n.card-container {\n  box-sizing: border-box;\n  padding: 30rpx;\n}\n\n.card-container .header {\n  display: flex;\n}\n\n.card-container .header p {\n  margin-right: 16rpx;\n  width: 70rpx;\n  height: 70rpx;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.card-container .header p .card-icon {\n  width: 70rpx;\n  height: 70rpx;\n}\n\n.card-container .header .card-name {\n  color: #fff;\n  line-height: 33rpx;\n}\n\n.card-container .header .card-name view:nth-child(1) {\n  font-size: 24rpx;\n  font-weight: 700;\n}\n\n.card-container .header .card-name view:nth-child(2) {\n  font-size: 20rpx;\n}\n\n.wechat-code-img {\n  width: 40rpx;\n  height: 40rpx;\n  position: absolute;\n  top: 30rpx;\n  right: 30rpx;\n}\n\n.footer {\n  margin-top: 72rpx;\n  color: #fff;\n}\n\n.footer .user-name {\n  font-size: 30rpx;\n  font-weight: 700;\n}\n\n.footer .card-number {\n  font-size: 28rpx;\n  margin-top: 20rpx;\n}\n\n.not-login-view {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n}\n\n.not-login-view .missing-view {\n  flex: 1;\n}\n\n.imgBox{\n  position: relative;\n}\n.name{\n  position: absolute;\n  left:90rpx;\n  top:200rpx;\n}\n.num{\n  position: absolute;\n  left:90rpx;\n  top:255rpx;\n}\n.topImg{\n  width:calc(100% - 60rpx);\n  margin-left:30rpx;\n}","js":"/**\n * @auth: wangqinfei\n * @desc: 社保卡展示页面\n *  从微信（医保支付小程序）获取社保卡信息流程：（1）YbPath （2）YbAuthCode\n */\nimport { cdnStaticResourceUrl, ajax2 } from '../../../../utils/util';\n\nconst app = getApp();\nlet apiUrl = {\n  // cardInfoApi: `api/ykq/order/r/queryMedicareCard`,\n  saveCardApi: `api/ykq/order/w/saveMedicareCard`,\n  ybCardInfoApi: `api/medicarecard/queryMedicareCard`,\n  ybBindCardPwdApi: `api/medicarecard/bindMedicareCard`,\n  getPwdStatus: `api/medicarecard/getPwdStatus`\n}\nconst Api = {\n  getYbPath: 'api/medicalinsurance/pageAuth',\n  getYbAuthCode: 'api/medicalinsurance/userQuery'\n}\n\nexport default {\n  data: function() {\n    return {\n      sess_key: null,\n      loading: true,\n      cdnPath: cdnStaticResourceUrl,\n      form: {\n        accountName: null,\n        medicareAddress: '湖北省武汉市',\n        medicareCardNo: null\n      },\n      agreeRules: false,\n      cardInfo: {\n       \n      },\n      sess_key: '',\n      ybPath: '',\n      authCode: '',\n      // isShowPassWord: false\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.getYbPath()\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {},\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      sess_key: app.globalData.sess_key\n    }, function() {\n      // 判断是否登录 获取医保卡数据\n      if (this.data.sess_key) {\n        this.getCard()\n      }\n    })\n  },\n  /** \n   * 去第三方绑定医保卡逻辑\n   */\n  handleToBindCard: function() {\n    this.data.authCode = app.globalData.wxYBAuthCode\n    console.log('authCode:', app.globalData.wxYBAuthCode)\n    if (this.data.authCode) {\n      if (this.data.ybPath) {\n        this.setYbAuthCode(this.data.authCode)\n      } else {\n        this.getYbPath(this.setYbAuthCode(this.data.authCode))\n      }\n    }\n  },\n  /**\n    * 获取跳转医保的路径及参数\n    */\n  getYbPath: function (callback) {\n    let _this = this\n    ajax2('post', Api.getYbPath, {}, (res) => {\n      if (res.data.code == 0 && res.data.result) {\n        _this.setData({\n          ybPath: res.data.result.page\n        }, function() {\n          callback && callback()\n        })\n      }\n    }, (res) => {\n      _this.showToast(res.msg || '获取医保path 失败');\n    })\n  },\n  /**\n   * 设置医保授权码\n   * @param {*} authCode  将微信医保返回的authCode 传递给后端（从app.js onShow scene 中取到）\n   */\n  setYbAuthCode: function (authCode) {\n    let _this = this\n    let basicCardInfo\n    ajax2('post', Api.getYbAuthCode, { authCode: authCode }, (res) => {\n      if (res.data.code == 0 && res.data.result) {\n        // 展示医保卡卡片\n        console.log('getYbAuthCode:', res.data.result)\n        basicCardInfo = _this.handleCardInfoReset(res.data.result)\n        let cardInfoN = JSON.stringify(basicCardInfo)\n        console.log('cardInfoN:', cardInfoN)\n        Taro.redirectTo({\n          url: '/pages/djk/pages/medCardPasswordWX/medCardPasswordWX?cardInfo=' + cardInfoN,\n        })\n      }\n    }, (res) => {\n      _this.showToast(res.msg || '设置授权码失败');\n    })\n  },\n  /**\n   * 腾讯authCode获取社保信息 & 获取用户医保卡信息 数据兼容处理\n   */\n  handleCardInfoReset: function(cardInfo) {\n    let newCardInfo = {}\n    if (Object.keys(cardInfo).length && cardInfo) {\n      newCardInfo = {\n        accountName: cardInfo.userName || cardInfo.accountName,\n        userCardNo: cardInfo.userCardNo,\n        socialCardNo: cardInfo.medicareCardNo,\n      }\n    }\n    return newCardInfo\n  },\n  /**\n   * 手动发送授权码\n   * @param {*} path  请求微信医保小程序 path\n   */\n  handleSendAuthCode: function () {\n    this.setYbAuthCode(this.data.authCode)\n  },\n  /**\n   * 点击按钮跳微信医保小程序\n   * @param {*} path  请求微信医保小程序 path\n   */\n  handleYbBtn: function () {\n    let _this = this;\n    Taro.navigateToMiniProgram({ \n      appId: 'wxe183cd55df4b4369', \n      path: _this.data.ybPath, \n      envVersion: 'trial' \n    })\n  },\n  /**\n   * 授权操作\n   */\n  toLogin() {\n    Taro.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  /**\n   * 封装toast\n   * @param {*} text \n   */\n  showToast: function (text) {\n    Taro.showToast({\n      title: text,\n      icon: 'none',\n    })\n  },\n  // 获取医保卡信息\n  getCard() {\n    let url = apiUrl.ybCardInfoApi\n    let cardInfo\n    // apiUrl.cardInfoApi\n    ajax2('get', url, {}, res => {\n      this.setData({\n        loading: false\n      });\n\n      if (res.data.code === 0) { \n        // if (res.data.result && res.data.result.medicareCardNo) {\n        //   res.data.result.medicareCardNo = this.addStar(res.data.result.medicareCardNo, 2, 2);\n        // }\n        cardInfo = this.handleCardInfoReset(res.data.result)\n        this.setData({\n          cardInfo\n        });\n      } else if (res.data.code === 30007) { // 30007 当前账户未绑定医保卡\n        this.handleToBindCard()\n        // Taro.showToast({\n        //   title: res.data.msg || '当前账户未绑定医保卡',\n        //   icon: 'none',\n        // })\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '查询医保卡信息失败',\n          icon: 'none',\n        })\n      }\n    }, e => {\n      Taro.showToast({\n        title: e.msg || '查询医保卡信息失败',\n        icon: 'none',\n      })\n    })\n  },\n  toLogin() {\n    Taro.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  /**\n   * 设置密码\n   */\n  handleBindPwd: function (obj) {\n    let _this = this\n    let num = Number(obj.detail)\n    if (num.toString().length === 6) {\n      ajax2('post', apiUrl.ybBindCardPwdApi, { password: num }, (res) => {\n        if (res.data.code === 0 && res.data.result) {\n          _this.showToast('设置密码成功');\n        }\n      }, (res) => {\n        _this.showToast(res.msg || '设置密码失败');\n      })\n    }\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  // 保存医保卡信息\n  saveCard(data) {\n    ajax2('post', apiUrl.saveCardApi, data, res => {\n      if (res.data.code == 0) { \n        Taro.showToast({\n          title: '保存成功',\n          icon: 'none',\n        })\n        this.getCard();\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none',\n        })\n      }\n    }, e => {\n      Taro.showToast({\n        title: e.msg || '操作失败',\n        icon: 'none',\n      })\n    })\n  },\n  \n  setInput(e) {\n    let { type } = e.target.dataset;\n    let curVal = e.detail.value;\n    let totalFrom = type == 'name' ?\n      Object.assign(this.data.form, { accountName: curVal }) : \n      Object.assign(this.data.form, { medicareCardNo: curVal });\n\n\n    this.setData({\n      form: totalFrom\n    });\n  },\n  /**\n   * val 需要添加星号的值\n   * front 前面保留几位\n   * after 后面保留几位\n   */\n  addStar(val, front, after){\n    let str = val.substring(0, front) + '*'.repeat(val.length - (front + after)) + val.substring(val.length - after); // 添加星星\n    \n    str = str.replace(/\\s/g,'').replace(/(.{4})/g,\"$1 \"); // 添加空格\n    \n    return str;\n  },\n  checkboxChange(e) {\n    // console.error(e);\n    this.data.agreeRules = !this.data.agreeRules;\n    console.log(this.data.agreeRules)\n  },\n  linkToRules() {\n    Taro.navigateTo({\n      url: '/pages/djk/pages/medicareCardRules/medicareCardRules'\n    })\n  },\n  submit() {\n    if (!this.data.form.accountName || !this.data.form.medicareCardNo) {\n      return false;\n    }\n\n    if (!(/^\\d{16}$/.test(this.data.form.medicareCardNo))) {\n      Taro.showToast({\n        title: '医保卡号只能为16位数字',\n        icon: 'none'\n      })\n\n      return false;\n    }\n\n    if (!this.data.agreeRules) {\n      Taro.showToast({\n        title: '请先勾选《勾选医保卡使用说明》',\n        icon: 'none'\n      })\n\n      return false;\n    }\n    console.log(this.data.form);\n    this.saveCard(this.data.form);\n  }\n};"},"convertDir/pages/djk/pages/medicareCardRules/medicareCardRules":{"js":"export default {\n\n  data: function() {\n   return {\n\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"medicareCardRules-auto-container\"> \n    <navBar title-text=\"医保卡使用说明\"></navBar>\n    <view class=\"rules-content\">    \n      <view>您作为参保人知悉并同意，以下情况不在社保卡医疗保障服务的保障范围内：\n      </view>\n      <view>1、经调查或经初步证据合理判断，对参保人主张本人的资金未经本人授权支出的事实存疑或有理由认为可能由参保人本人操作或是参保人的配偶、亲属、朋友或雇员、代理人等所为的。\n      </view>\n      <view>2、经调查或经初步证据合理判断认为是参保人的故意行为、重大过失或违法行为造成参保人资金损失的。\n      </view>\n      <view>3、 经调查或经初步证据合理判断认为是因他人的欺诈、胁迫等行为造成参保人资金损失的。\n      </view>\n      <view>4、参保人未能提供所要求提供的全部或部分资料，或不积极配合调查的。\n      </view>\n    </view>\n  </view>","json":{},"wxss":".rules-content {\n  padding: 30rpx;\n}\n\n.rules-content view {\n  margin-bottom: 10rpx;\n}"},"convertDir/pages/djk/pages/networkStationDetail/networkStationDetail":{"js":"// pages/djk/pages/networkStationDetail/networkStationDetail.js\nimport { ajax2 } from '../../../../utils/util';\nlet apiUrl = {\n  bankPoint: `/api/ykq/order/r/ssc/list/bank/office/`\n}\n\nexport default {\n\n  data: function() {\n    return {\n      netList: []\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log(options.id);\n    this.getBankPoint(options.id);\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  // 获取银行网点信息\n  getBankPoint(id) {\n    ajax2('get', apiUrl.bankPoint + id, {}, res => {\n      if (res.data.code == 0 && res.data.result) { \n        console.log(res.data.result);\n        this.setData({\n          netList: res.data.result\n        });\n      } else {\n        this.setData({\n          netList: []\n        });\n      }\n    }, e => {\n      Taro.showToast({\n        title: e.message || '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n};","json":{},"wxml":"\n  <view class=\"networkStationDetail-auto-container\">\n    <view class=\"network-station-detail\"> \n      <navBar title-text=\"社保经办机构查询\"></navBar>\n      <view class=\"table\"> \n        <view class=\"th\">  \n          <view class=\"net-name\">网点名称\n          </view>\n          <view class=\"net-adress\">地址\n          </view>\n          <view class=\"net-tel\">电话\n          </view>\n        </view>\n        <view class=\"td\" v-for=\"(net, bankNo) in  netList \" :key=\"bankNo\">  \n          <view class=\"net-name\">{{ net.officeName }}\n          </view>\n          <view class=\"net-adress\">{{ net.address }}\n          </view>\n          <view class=\"net-tel\">{{ net.contactPhone }}\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".network-station-detail {\n  min-height: 100vh;\n  background: #fff;\n}\n\n.table .th, .table .td {\n  display: flex;\n  /* align-items: center; */\n  padding: 0 30rpx;\n  min-height: 90rpx;\n  font-weight: 700;\n  font-size: 28rpx;\n  color: #333333;\n  border-bottom: 1px solid #eeeeee;\n}\n\n.table .th {\n  line-height: 90rpx;\n}\n\n.table .td {\n  padding-top: 30rpx;\n  color: #999999;\n  font-size: 24rpx;\n  font-weight: 500;\n}\n\n.table .th .net-name, .table .td .net-name {\n  width: 174rpx;\n  padding-right: 30rpx;\n}\n\n.table .th .net-adress, .table .td .net-adress {\n  flex: 1;\n  padding-right: 30rpx;\n  padding-bottom: 14rpx;\n}\n\n.table .th .net-tel, .table .td .net-tel {\n  width: 208rpx;\n}"},"convertDir/pages/djk/pages/paymentSuccessful/paymentSuccessful":{"js":"export default {\n\n  data: function() {\n    return {\n      price:'',\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if(options.price){\n      this.setData({\n        price:options.price\n      })\n    }\n  },\n  toOrderLst() {\n    Taro.redirectTo({\n      url: `/pages/note/myGroupIndent/myGroupIndent`\n    })\n  },\n  handleIndex(){\n    Taro.switchTab({\n      url: '/pages/noteIndex/noteIndex'\n    })\n  },\n};","json":{},"wxml":"\n  <view class=\"paymentSuccessful-auto-container\">      \n    <navBar title-text=\"支付成功\" :showCapsule=\" false \"></navBar>\n    <image class=\"ps_title_icon\" src=\"../../../../images/success.png\"></image>\n    <view class=\"ps_title\">医保支付成功\n    </view>\n    <view class=\"ps_title_text\">医保支付金额\n    </view>\n    <view class=\"ps_price\">{{price}}\n\n      <text>¥\n      </text>\n    </view>\n    <view class=\"ps_btn\" bindtap=\"toOrderLst\">查看订单\n    </view>\n    <view class=\"ps_btn ps_btn2\" bindtap=\"handleIndex\">返回首页\n    </view>\n  </view>","wxss":"/* pages/djk/pages/paymentSuccessful/paymentSuccessful.wxss */\npage{\n  background-color: #fff;\n}\n.ps_title{\n  font-size: 36rpx;\n  font-weight: 400;\n  text-align: center;\n  margin-top: 29rpx;\n}\n.ps_title_icon{\n  width: 84rpx;\n  height: 84rpx;\n  display: block;\n  margin: 0 auto;\n  margin-top: 71rpx;\n}\n.ps_title_text{\n  font-size: 32rpx;\n  font-weight: 400;\n  text-align: center;\n  color: #666666;\n  margin-top: 40rpx;\n}\n.ps_price{\n  font-size: 72rpx;\n  font-weight: 500;\n  text-align: center;\n  color: #333333;\n  margin-top: 30rpx;\n  margin-bottom: 293rpx;\n}\n.ps_price text{\n  font-size: 40rpx;\n}\n.ps_btn{\n  width: 630rpx;\n  height: 88rpx;\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n  border-radius: 50rpx;\n  text-align: center;\n  line-height: 88rpx;\n  margin: 0 auto;\n  color: #fff;\n}\n.ps_btn2{\n  height: 84rpx;\n  line-height: 84rpx;\n  background: none;\n  border: 2rpx solid #307dff;\n  color: #307dff;\n  margin-top: 40rpx;\n}"},"convertDir/pages/djk/pages/serviceNetworkStation/serviceNetworkStation":{"js":"// pages/djk/pages/serviceNetworkStation/serviceNetworkStation.js\nimport { ajax2 } from '../../../../utils/util';\nlet apiUrl = {\n  bankListApi: `/api/ykq/order/r/ssc/list/bank`\n}\n\nexport default {\n\n  data: function() {\n    return {\n      bankList: []\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.getBankList();\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n  // 获取银行信息\n  getBankList() {\n    ajax2('get', apiUrl.bankListApi, {}, res => {\n      if (res.data.code == 0 && res.data.result) { \n        console.log(res.data.result);\n        this.setData({\n          bankList: res.data.result\n        });\n      } else {\n        this.setData({\n          bankList: []\n        });\n      }\n    }, e => {\n      Taro.showToast({\n        title: e.message || '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  linkToDetail(e) {\n    const { id } = e.currentTarget.dataset;\n\n    Taro.navigateTo({\n      url: `/pages/djk/pages/networkStationDetail/networkStationDetail?id=${ id }`,\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"serviceNetworkStation-auto-container\">\n    <view class=\"social-security\"> \n      <navBar title-text=\"社保经办机构查询\"></navBar>\n      <view class=\"common_section\">\n        <view class=\"cell arrow\" v-for=\"(bank, {{ bank.bankNo }}) in  bankList \" :wx:key=\" bank.bankNo \" :data-id=\" bank.bankNo \" bindtap=\"linkToDetail\">\n          <view class=\"left\">{{ bank.bankName }}\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"@import '../../../..//common/tableView.wxss';\n\n.common_section .cell {\n  padding: 0 30rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n}"},"convertDir/pages/djk/pages/severeIllnessList/severeIllnessList":{"json":{},"js":"// pages/djk//pages/severeIllnessList/severeIllnessList.js\nimport {\n  ajax\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      severeCaseClassify: []\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.getSevereCaseClassify();\n  },\n  getSevereCaseClassify() {\n    ajax('get', 'miniapp/bighealth/classify/getSevereCaseClassify', {}, res => {\n      if(res.data.code == 0) {\n        this.setData({\n          severeCaseClassify: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  jumpLink(e) {\n    let link = e.currentTarget.dataset.link;\n    if(!link) return false;\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${ encodeURIComponent(link) }`\n    })\n  }\n};","wxml":"\n  <view class=\"severeIllnessList-auto-container\"> \n    <navBar title-text=\"重症分类\" :showCapsule=\" true \"></navBar>\n    <view class=\"container\">\n      <view class=\"classifyList\">\n        <view class=\"item\" v-for=\"(item, index) in  severeCaseClassify \" :key=\"index\" bindtap=\"jumpLink\" :data-link=\" item.url \">\n          <text>{{ item.name }}\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/djk//pages/severeIllnessList/severeIllnessList.wxss */\npage {\n  background: #FFFFFF;\n}\n.classifyList {\n  padding: 30rpx 20rpx;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.classifyList .item {\n  background: #F5F8FC;\n  font-size: 28rpx;\n  color: #333333;\n  padding: 25rpx 20rpx;\n  margin: 10rpx;\n  border-radius: 8rpx;\n  width: calc(50% - 20rpx);\n  box-sizing: border-box;\n}\n\n.classifyList .item text {\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  word-break: break-all;\n}"},"convertDir/pages/djk/pages/socialSecurity/socialSecurity":{"js":"export default {\n\n  data: function() {\n   return {\n\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  linkToServiceNetworkStation() {\n    Taro.navigateTo({\n      url: '/pages/djk/pages/serviceNetworkStation/serviceNetworkStation',\n    })\n  },\n  linkToMedicinesList() {\n    Taro.navigateTo({\n      url: '/pages/djk/pages/socialSecurityMedicinesList/socialSecurityMedicinesList',\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"socialSecurity-auto-container\">\n    <view class=\"social-security\"> \n      <navBar title-text=\"社保保障\"></navBar>\n      <view class=\"common_section\">\n        <view class=\"cell arrow\" bindtap=\"linkToServiceNetworkStation\">\n          <view class=\"left\">社保经办机构查询\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"@import '../../../..//common/tableView.wxss';\n\n.common_section .cell {\n  padding: 0 30rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n}"},"convertDir/pages/djk/pages/socialSecurityMedicinesList/socialSecurityMedicinesList":{"js":"export default {\n\n  data: function() {\n   return {\n\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","json":{},"wxml":"\n  <view class=\"socialSecurityMedicinesList-auto-container\">\n    <view class=\"social-security-medicines-list\"> \n      <navBar title-text=\"定点药店\"></navBar>\n      <view class=\"common_section\">          \n        <view class=\"cell\">\n          <view class=\"left header\">武汉市门诊重症定点零售药店名单\n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>国药控股（湖北）汉口大药房有限公司黄石路店\n          </view>\n          <view class=\"adress\">\n        地址：京汉大道黄石路口安静小区33号楼1-3层\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>湖北新特药大药房航空路店\n          </view>\n          <view class=\"adress\">\n        地址：武汉市江汉区航空路3附10号\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>武汉健康人大药房有限公司友谊路分店\n          </view>\n          <view class=\"adress\">\n        地址：江汉区双洞正街特1号\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>好药师大药房连锁有限公司九州通大厦店\n          </view>\n          <view class=\"adress\">\n        地址：汉阳区龙阳大道特8号\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>老百姓大药房连锁（湖北）有限公司武汉彭刘杨路店\n          </view>\n          <view class=\"adress\">\n        地址：武昌区彭刘杨路232号\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>武汉科海园大药房有限公司星海路店\n          </view>\n          <view class=\"adress\">\n        地址：武昌区星海路特1号\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>国药控股武汉国大药房连锁有限公司石牌岭店\n          </view>\n          <view class=\"adress\">\n        地址：洪山区石牌岭东一路\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>武汉马应龙大药房连锁股份有限公司材质药店\n          </view>\n          <view class=\"adress\">\n        地址：青山区和平大道932号\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>武汉同仁美康大药店有限公司香榭店\n          </view>\n          <view class=\"adress\">\n        地址：武汉经济技术开发区7C块地\n      \n          </view>\n        </view>\n        <view class=\"cell\" bindtap=\"jumpQualification\"> \n          <view>湖北人福药房连锁有限公司关山大道店\n          </view>\n          <view class=\"adress\">\n        地址：东湖新技术开发区关山大道473号\n      \n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".social-security-medicines-list {\n  min-height: 100vh;\n  background: #fff;\n}\n\n.common_section .cell {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-bottom: 1px solid #eeeeee;\n  padding: 0 30rpx;\n  min-height: 143rpx;\n}\n\n.common_section .cell:first-child {\n  height: 90rpx;\n  min-height: unset;\n}\n\n.common_section .cell .header {\n  font-weight: 700;\n  color: #333333;\n}\n\n.common_section .cell .adress {\n  font-size: 24rpx;\n  margin-top: 8rpx;\n  color: #999999;\n}"},"convertDir/pages/famousDoctors/component/imTabBar/tabBar":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    active: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data: function() {\n    return {\n      tabbarHeight: null\n    };\n  },\n  lifetimes: {\n    attached() {\n      \n    }\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n\n  }\n};\n","json":{},"wxss":".im-tab-bar-container {\n  /* position: fixed; */\n  /* left: 0; */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 72rpx;\n  background-color: #FFFFFF;\n}\n\n.im-tab-bar-item {\n  font-size: 28rpx;\n  color: #999999;\n}\n\n.im-tab-bar-item.active {\n  color: #00b955;\n}\n\n.im-icon-right-tab-bar {\n  width: 20rpx;\n  height: 20rpx;\n}","wxml":"\n  <view class=\"tabBar-auto-container\">\n    <view class=\"im-tab-bar-container\">        \n      <view></view>\n      <view :class=\"[im-tab-bar-item,( active === '1'?'active':'' )]\">提交问题\n      </view>\n      <image mode=\"widthFix\" class=\"im-icon-right-tab-bar\" src=\"../../../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im-tab-bar-item,( active === '2'?'active':'' )]\">医生咨询\n      </view>\n      <image mode=\"widthFix\" class=\"im-icon-right-tab-bar\" src=\"../../../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im-tab-bar-item,( active === '3'?'active':'' )]\">咨询建议\n      </view>\n      <image mode=\"widthFix\" class=\"im-icon-right-tab-bar\" src=\"../../../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im-tab-bar-item,( active === '4'?'active':'' )]\">咨询评价\n      </view>\n      <view></view>\n    </view>\n  </view>"},"convertDir/pages/famousDoctors/component/patientInfo/patientInfo":{"js":"import {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2\n} from \"../../../../utils/util\";\nconst apiUrl = {\n}\n\nexport default {\n  // 组件所在页面的生命周期函数\n  onShow:function () {\n   this.getDate()\n  },\n  /**\n   * 组件的属性列表\n   */\n  props: {\n\n  },\n\n  data: function() {\n    return {\n      patientName: '', // 姓名\n      patientSex: [\n        {id: 1, value: '男', checked: true},\n        {id: 2, value: '女'}\n      ], // 性别\n      patientAge: '', // 年龄\n      patientDate: '', // 日期\n      patientInfo: {\n        name: '',\n        sex: 1,\n        age:'',\n        date: ''\n      }, // 患者信息数据\n      setToday: '' // 当天\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    // 获取当前日期\n    getDate() {\n      let now = new Date();\n      let year = now.getFullYear(); //得到年份\n      let month = now.getMonth();//得到月份\n      let date = now.getDate();//得到日期\n      month = month + 1;\n      if (month < 10) month = \"0\" + month;\n      if (date < 10) date = \"0\" + date;\n      let time = ''\n      time = year + \"-\" + month + \"-\" + date;\n      this.data.patientInfo.date = time\n      this.setData({\n        setToday: time,\n        patientInfo: this.data.patientInfo\n      })\n    },\n    // 输入名字\n    nameInput(e){\n      this.data.patientInfo.name = e.detail.value.replace(/\\s/g,\"\")\n      this.setData({\n        patientName: e.detail.value\n      })\n      this.triggerEvent('getPatientInfo', this.data.patientInfo)\n    },\n    // 男女切换\n    radioChange(e) {\n      const sex = this.data.patientSex\n      for (let i = 0, len = sex.length; i < len; ++i) {\n        sex[i].checked = sex[i].id == e.detail.value\n      }\n      this.setData({\n        patientSex: sex\n      })\n      this.data.patientInfo.sex = Number(e.detail.value)\n      this.triggerEvent('getPatientInfo', this.data.patientInfo)\n    },\n    // 选择时间\n    bindDateChange(e) {\n      this.data.patientInfo.date = e.detail.value\n      this.setData({\n        patientDate: e.detail.value\n      })\n      this.triggerEvent('getPatientInfo', this.data.patientInfo)\n    },\n    // 限制年龄1-150\n    ageInput (e){\n      let value = e.detail.value\n      return {\n        value: value.replace(/\\./g,\"\")\n      }\n      this.data.patientInfo.age = value\n      this.setData({\n        patientAge: value,\n      })\n      this.triggerEvent('getPatientInfo', this.data.patientInfo)\n    },\n    ageConfirm(e){\n      let age = Number(e.detail.value)\n      age < 1 ?  age = 1: ''\n      age > 150 ? age = 150 : ''\n      this.data.patientInfo.age = age\n      this.setData({\n        patientAge: age,\n      })\n      this.triggerEvent('getPatientInfo', this.data.patientInfo)\n    }\n  }\n};","wxml":"\n  <view class=\"patientInfo-auto-container\">\n    <view>\n      <view class=\"patient-reports-info\">   \n        <view>  \n          <view class=\"red\">*\n          </view>\n          <view>患者姓名\n          </view>\n          <input type=\"text\" :value=\"choosePatient.patientName\" :maxlength=\"10\" placeholder-class=\"grey\" bindinput=\"nameInput\" placeholder=\"请输入问诊人真实姓名\"></input>\n        </view>\n        <view>  \n          <view class=\"red\">*\n          </view>\n          <view>性别\n          </view>\n          <radio-group bindchange=\"radioChange\" class=\"age-group\">\n            <label v-for=\"(item, index) in patientSex\" :key=\"index\"> \n              <radio :value=\"item.id\" :checked=\"item.checked\"></radio>\n              <view>{{item.value}}\n              </view>\n            </label>\n          </radio-group>\n        </view>\n        <view>  \n          <view class=\"red\">*\n          </view>\n          <view>年龄\n          </view>\n          <input type=\"number\" placeholder-class=\"grey\" bindblur=\"ageConfirm\" bindconfirm=\"ageConfirm\" bindinput=\"ageInput\" :value=\"patientAge\" placeholder=\"请输入年龄\"></input>\n        </view>\n        <view>  \n          <view class=\"red\">*\n          </view>\n          <view>就诊日期\n          </view>\n          <view class=\"section\">\n            <picker :end=\"setToday\" mode=\"date\" :value=\"patientDate\" bindchange=\"bindDateChange\"> \n              <view v-if=\"!patientDate\">{{setToday}}\n              </view>\n              <view class=\"picker\">\n                        {{patientDate}}\n                    \n              </view>\n            </picker>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".patient-reports-info{\n    padding: 0 32rpx;\n}\n.red{\n    color: #F65455;\n}\n.grey{\n    color: #9AA0B5;\n}\n.patient-reports-info >view{\n    display: flex;\n    height: 96rpx;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 32rpx;\n    color: #111734;\n}\n.patient-reports-info >view >view:nth-child(2){\n    flex: 1;\n}\n.patient-reports-info >view >input{\n    width: 458rpx;\n}\n.age-group,.section{\n    display: flex;\n    align-items: center;\n    width: 458rpx;\n    height: 96rpx;\n}\n.picker{\n    width: 458rpx;\n}\n.age-group label{\n    display: flex;\n    align-items: center;\n}\n\n.age-group label:first-child >view{\n    margin-right: 100rpx;\n}","json":{}},"convertDir/pages/famousDoctors/page/addInfoMsg/addInfoMsg":{"json":{"im-tab-bar":"../../component/imTabBar/tabBar","uploader":"../../../../component/uploader/uploader","missingData-view":"../../../../component/missingData/missingData","patient-info":"../../../../component/patientInfo/patientInfo","halfScreenDialog":"../../../../component/halfScreenDialog/halfScreenDialog","couponsList":"../../../../component/couponsList/couponsList","my-tools":"/component/myTools/myTools"},"wxml":"\n  <view class=\"addInfoMsg-auto-container\">       \n    <navBar title-text=\"图文问诊\" :isCustom=\" drugstoreSource ? true : false \"></navBar>\n    <im-tab-bar active=\"1\"></im-tab-bar>\n    <scroll-view scroll-y=\"true\" :style=\"{height:  scrollHeightpx}\">\n      <view class=\"add-info\">  \n        <view class=\"add-info-patient\"> \n          <view style=\"font-weight: bold;\">您想为谁咨询\n          </view>\n          <view bindtap=\"openPatientList\">  \n            <view v-if=\"patientObj.length == 0 || !patientObj\">添加患者\n            </view>\n            <view v-else>{{ patientObj.patientName }} {{patientObj.patientSex == 1 ? '男' : '女'}} {{patientObj.patientAge}}岁\n            </view>\n            <image mode=\"widthFix\" src=\"../../../../images/icon_right_tab_bar.png\"></image>\n          </view>\n        </view>\n        <view class=\"add-info-msg\">  \n          <view class=\"add-info-msg-head\">  \n            <view style=\"font-weight: bold;\">请描述您的病情\n            </view>\n            <image bindtap=\"openDescribe\" mode=\"widthFix\" src=\"../../images/icon-care.png\"></image>\n            <view bindtap=\"openDescribe\">如何描述\n            </view>\n          </view>\n          <view class=\"add-info-msg-textarea\"> \n            <textarea class=\"textarea\" placeholder=\"为了更好的获得医生的帮助，请尽可能详细描述您的病情\" maxlength=\"200\" placeholder-class=\"phcolor\" bindinput=\"getIllness\" :value=\"illnessHistory\"></textarea>\n            <view class=\"count\">{{illnessHistory.length}}/200\n            </view>\n          </view>\n          <view class=\"add-info-pic\"> \n            <view class=\"add-info-pic-head\"> \n              <view>上传检查单/患处照片\n              </view>\n              <view>（最多上传6张）\n              </view>\n            </view>\n            <uploader bindfail=\"uploadError\" bindsuccess=\"uploadSuccess\" bindupdate=\"updateImg\" :select=\"selectFile\" :upload=\"uplaodFile\" :files=\"files\" max-count=\"6\"></uploader>\n          </view>\n        </view>\n        <view class=\"add-info-prompting\">\n            根据国家互联网诊疗相关政策的要求，请您在使用服务前仔细阅读如果您并非线上复诊，医生仅为您提供健康咨询服务，咨询意见供您参考，继续操作代表您知悉并同意上述告知内容。\n        \n          <view bindtap=\"toWebview\">《风险告知及患者知情同意书》\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n    <view class=\"add-info-describe\" v-if=\"describeShow\">\n      <view class=\"add-info-text\">   \n        <view>描述说明\n        </view>\n        <view>请描述疾病名称或症状，患病时间，做过什么检查，用药情况，目前病情是加重还是缓解，想要获得医生什么帮助，尽可能详细描述，有助于医生高效回复。\n        </view>\n        <view>【例】最近2个月反复咳嗽，早晨起来尤其严重，咳得时候胸闷气短，吃了一周阿奇霉素和复方甘草合剂效果不好，想问下医生这是什么原因，该如何治疗？\n        </view>\n        <view bindtap=\"closeDescribe\" class=\"add-info-describe-btn\">知道了\n        </view>\n      </view>\n    </view>\n    <view class=\"add-info-bottom\"> \n      <view class=\"add-info-ticket\" bindtap=\"openCouponsBox\">    \n        <view class=\"left\">优惠券\n          <text class=\"red\" v-if=\" selectedCoupon.defaultOption == 1 \">已选择最佳优惠\n          </text>\n        </view>\n        <view class=\"right blue\" v-if=\" couponsList.length > 0 && !selectedCoupon.id \">{{ couponsList.length }}\b张优惠券可用\n        </view>\n        <view class=\"right red\" v-else-if=\" couponsList.length > 0 \">-¥{{ selectedCoupon.actualDiscountDes }}\n        </view>\n        <view class=\"right\" v-else style=\"color: #9D9FB8;\">暂无可用优惠券\n        </view>\n        <image mode=\"widthFix\" src=\"../../../../images/icon_right_tab_bar.png\" v-if=\" couponsList.length > 0 \"></image>\n      </view>\n      <view class=\"add-info-pay\" v-if=\"inquiryData\">  \n        <view class=\"add-info-pay-askDoctorsPrice\">{{inquiryData.askDoctorsPrice}}\n          <text>¥\n          </text>\n        </view>\n        <view class=\"add-info-pay-price\" v-if=\" inquiryData.askDoctorsPrice != inquiryData.price \">¥{{inquiryData.price}}\n        </view>\n        <view class=\"add-info-pay-inquiry\" bindtap=\"createInquiry\">去支付\n        </view>\n      </view>\n    </view>\n    <halfScreenDialog :show=\" patientListShow \" maskClosable=\"ture\" title=\"患者管理\" bind:close=\"dialogClose\">\n      <view slot=\"desc\" class=\"patient-list-mask\" :style=\"{padding-bottom:  tabbarHeight px}\">   \n        <view class=\"common_section\" v-if=\" !editPatient \"> \n          <block v-if=\" patientList.length \">\n            <view class=\"cell\" v-for=\"(item, index) in  patientList \" :key=\"index\" bindtap=\"selectedPatient\" :data-item=\" item \"> \n              <view class=\"cell_center\"> \n                <view>{{ item.patientName }} {{ patientSex[item.patientSex] }} {{ item.patientAge }}岁\n                </view>\n                <view v-if=\"item.patientIDCard.length == 0\" class=\"idcard_text\">身份信息不全，请点击补充\n                </view>\n              </view>\n              <view class=\"cell_right\"> \n                <view class=\"img-box\" catchtap=\"toPatientInfo\" :data-id=\" item.id \">\n                  <image src=\"../../../../images/edit-icon.png\" mode=\"widthFix\"></image>\n                </view>\n                <view class=\"img-box\" catchtap=\"checkDeletePatient\" :data-item=\" item \">\n                  <image src=\"../../../../images/clear_ss.png\" mode=\"widthFix\"></image>\n                </view>\n              </view>\n            </view>\n          </block>\n          <missingData-view zhi=\"new1\" textval2=\"暂无患者，请添加~\" v-else-if=\" patientList.length <= 0 \" imageUrl=\"{{cf_chapter}}/images/require-list-empty.png\" paddingValue=\"30% 0\"></missingData-view>\n        </view>\n        <patient-info :currentPatientId=\" currentPatientId \" pageFrom=\"currentPage\" bind:updata=\"updataSuccess\" v-else></patient-info>\n        <view style=\"height: 60rpx\"></view>\n        <view class=\"btns\"> \n          <view class=\"tips\" v-if=\" patientList.length >= 10 \">每个账号最多可添加10个患者\n          </view>\n          <button bindtap=\"toPatientInfo\" :class=\"[button,( patientList.length >= 10 ? '' : 'active' )]\">添加患者信息\n          </button>\n        </view>\n      </view>\n    </halfScreenDialog>\n    <halfScreenDialog :show=\" couponsDialog \" maskClosable=\"ture\" title=\"优惠券\" hasData=\"true\">\n      <view slot=\"desc\" class=\"coupons-dialog\">\n        <couponsList :statusId=\"couponsId\" :source=\"myStatus\" :couponsData=\" couponsList \" pageFrom=\"guidance\" bind:action=\"userCoupon\"></couponsList>\n      </view>\n    </halfScreenDialog>\n    <my-tools v-if=\"drugstoreSource\"></my-tools>\n  </view>","wxss":".add-info{\n    padding: 0 20rpx;\n    margin-bottom: 40rpx;\n}\n.add-info-patient{\n    height: 116rpx;\n    line-height: 58rpx;\n    background: #fff;\n    margin-top: 20rpx;\n    padding: 24rpx;\n    color: #111334;\n    font-size: 32rpx;\n    border-radius: 12rpx;\n}\n.add-info-patient >view:last-child{\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.add-info-patient >view:last-child image{\n    width: 28rpx;\n    height: 28rpx;\n}\n.add-info-msg{\n    background: #fff;\n    border-radius: 12rpx;\n    margin-top: 20rpx;\n    padding: 0 25rpx;\n}\n.add-info-msg-head{\n    height: 85rpx;\n    display: flex;\n    align-items: center;\n}\n.add-info-msg-head >view:first-child,.add-info-pic-head >view:first-child{\n    font-size: 32rpx;\n    color: #111334;\n}\n.add-info-msg-head >image{\n    width: 32rpx;\n    height: 32rpx;\n    margin-left: 19rpx;\n    margin-right: 12rpx;\n}\n.add-info-msg-head >view:last-child{\n    font-size: 24rpx;\n    color: #72a5dd;\n}\n.add-info-msg-textarea{\n    position: relative;\n}\n.add-info-msg-textarea textarea{\n    width: 618rpx;\n    height: 164rpx;\n    background: #f7f8fa;\n    border-radius: 12rpx;\n    padding: 19rpx;\n    padding-bottom: 50rpx;\n}\n.phcolor{\n    font-size: 24rpx;\n    color: #9d9fb8;\n}\n.count{\n    position: absolute;\n    right: 19rpx;\n    bottom: 19rpx;\n    font-size: 24rpx;\n    color: #9d9fb8;\n}\n.add-info-pic{\n    padding-bottom: 7rpx;\n}\n.add-info-pic-head{\n    display: flex;\n    align-items: center;\n    margin-top: 24rpx;\n}\n.add-info-pic-head >view:last-child{\n    font-size: 24rpx;\n    color: #9d9fb8;\n}\n.add-info-prompting{\n    font-size: 24rpx;\n    color: #9d9fb8;\n    margin-top: 24rpx;\n}\n.add-info-prompting >view{\n    display: inline-block;\n    color: #00B955;\n}\n.add-info-bottom{\n    width: 100%;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    height: 210rpx;\n    opacity: 1;\n    background: #fff;\n    padding: 0 24rpx;\n    z-index: 50;\n}\n.add-info-ticket,.add-info-pay{\n    width: 702rpx;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 86rpx;\n    border-bottom: 1px solid #eff0f5;\n}\n.add-info-ticket >view:first-child{\n    color: #111334;\n    font-size: 28rpx;\n}\n.add-info-ticket >view:nth-child(2){\n    color: #f93a4a;\n    font-size: 22rpx;\n    flex: 1;\n    margin-left: 20rpx;\n}\n.add-info-ticket >view:nth-child(3){\n    color: #f93a4a;\n    font-size: 28rpx;\n}\n.add-info-ticket >image{\n    width: 20rpx;\n    height: 20rpx;\n}\n.add-info-pay{\n    border-bottom:none;\n    height: 105rpx;\n}\n.add-info-pay .add-info-pay-askDoctorsPrice{\n    color: #f93a4a;\n    font-size: 40rpx;\n}\n.add-info-pay .add-info-pay-askDoctorsPrice text{\n    color: #f93a4a;\n    font-size: 28rpx;\n}\n.add-info-pay .add-info-pay-price{\n    color: #666883;\n    font-size: 28rpx;\n    flex: 1;\n    margin-left: 16rpx;\n    text-decoration:line-through;\n    margin-top: 10rpx;\n}\n.add-info-pay .add-info-pay-inquiry{\n    width: 208rpx;\n    height: 72rpx;\n    background: #00b955;\n    border-radius: 36rpx;\n    font-size: 28rpx;\n    color: #fff;\n    text-align: center;\n    line-height: 72rpx;\n}\n/*描述说明*/\n.add-info-describe{\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 150;\n    background: rgba(0,0,0,.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.add-info-text{\n    width: 480rpx;\n    height: 525rpx;\n    background: #ffffff;\n    border-radius: 12rpx;\n    padding: 30rpx;\n    position: relative;\n}\n.add-info-text >view:nth-child(2), .add-info-text >view:nth-child(3){\n    font-size: 28rpx;\n    color: #666883;\n    margin-top: 20rpx;\n}\n.add-info-text >view:first-child{\n    font-size: 32rpx;\n    color: #333333;\n    margin-top: 0;\n    text-align: center;\n}\n.add-info-describe-btn{\n    width: 100%;\n    height: 97rpx;\n    line-height: 97rpx;\n    border-top: 1rpx solid #e2e4ea;\n    text-align: center;\n    font-size: 36rpx;\n    color: #00b955;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n}\n/*患者列表*/\n\n.patient-list-mask .common_section {\n    height: 800rpx;\n    overflow-y: scroll;\n    padding-bottom: 148rpx;\n    box-sizing: border-box;\n}\n\n.patient-list-mask .cell {\n    padding: 0;\n    height: 132rpx;\n    display: flex;\n    align-items: center;\n}\n.patient-list-mask .cell .idcard_text {\n    font-size: 24rpx;\n    color: #ff5f1b;\n}\n.patient-list-mask .cell_center {\n    flex: 1\n}\n\n.patient-list-mask .cell_right {\n    display: flex;\n    align-items: center;\n}\n\n.patient-list-mask .cell_right .img-box {\n    width: 70rpx;\n    height: 90rpx;\n    text-align: center;\n}\n\n.patient-list-mask .cell_right .img-box image {\n    width: 36rpx;\n    height: 36rpx;\n    margin: 27rpx auto;\n}\n\n.patient-list-mask .btns{\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    padding: 0 30rpx 10rpx;\n    width: 100%;\n    box-sizing: border-box;\n    background: #FFFFFF;\n}\n\n.patient-list-mask .btns .tips {\n    font-size: 26rpx;\n    color: #A9AEB7;\n    height: 80rpx;\n    line-height: 80rpx;\n    text-align: center;\n}\n.button {\n    border-radius: 50rpx;\n    height: 88rpx;\n    line-height: 88rpx;\n    color: #FFFFFF;\n    text-align: center;\n    font-weight: bold;\n    font-size: 36rpx;\n    box-sizing: border-box;\n    background: #C6CAD4;\n    display: block;\n    width: 100%;\n    margin-bottom: 20rpx;\n}\n.active{\n    background: #00b955;\n}\n/*优惠券*/\n.coupons-dialog {\n    height: 800rpx;\n    overflow-y: scroll;\n}\n\n.add-info-ticket .left {\n    flex: 1;\n    color: #333333\n}\n\n.add-info-ticket .left text {\n    font-size: 24rpx;\n    margin-left: 20rpx;\n}\n\n.add-info-ticket .right {\n    width: 260rpx;\n    text-align: right;\n}\n\n.add-info-ticket .red {\n    color: #F93A4A\n}\n\n.add-info-ticket .blue {\n    color: #00b955\n}","js":"import {\n  ajax,\n  ajax2, cdnStaticResourceUrl, getH5AbsoluteUrl, inquiryOrderPay,\n  url,\n} from '../../../../utils/util';\nimport xcxIM from '../../../../im/im.js';\nimport { handleToUnload, handleToWaiting, initJump } from '../../../../common/toChatroom';\nconst UPLOAD_IMAGE_DATE = 'prescription_image_data';\nlet inquiryReportGuid\n\nexport default {\n\n  data: function() {\n    return {\n      scrollHeight: '',\n      illnessHistory: '', // 病情描述\n      urlLink: url,\n      fileList: [],\n      files: [],\n      haveIdCardPatientList: [], // 有身份证号的列表\n      patientListShow: false,\n      editPatient: false,\n      patientList: [],\n      cf_chapter: cdnStaticResourceUrl,\n      patientObj: null,\n      describeShow: false, // 描述说明状态\n      couponsDialog: false,\n      couponsList: [],\n      selectedCoupon: {},\n      isRefresh: true,//判断onshow 是否执行\n      createInquiryTime: null,\n      waitingBoxShow: false,\n      doctorId: '',\n      patientId: '',\n      patientSex: {\n        '0': '未知',\n        '1': '男',\n        '2': '女'\n      },\n      isToNotification: false,\n      drugstoreSource: false\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let imageData = [];\n    let files = [];\n    imageData.forEach((item, index) => {\n      console.log(item, index)\n      files[index] = {\n        url: item\n      };\n    })\n    this.setData({\n      selectFile: this.selectFile.bind(this),\n      uplaodFile: this.uplaodFile.bind(this),\n      files: files,\n      fileList: imageData,\n    });\n    if (options.doctorId) {\n      this.setData({\n        doctorId: options.doctorId,\n      })\n    }\n    if (options.patientId) {\n      this.setData({\n        patientId: options.patientId,\n      })\n    }\n    if (!this.data.isRefresh) return false;\n    if (!this.data.isToNotification) {\n      this.getPatientList();\n    }\n    if(options.isHideBtn) this.setData({drugstoreSource: true})\n    if(options.drugstoreId)this.setData({drugstoreId:options.drugstoreId})\n    this.getCouponsNotify();\n    this.getInquiryData();\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    if (!this.data.isRefresh) return false;\n    console.log('判断是否点击过同意书', this.data.isToNotification)\n    // if (!this.data.isToNotification) {\n    //   this.getPatientList();\n    // }\n    // this.getCouponsNotify();\n    // this.getInquiryData();\n    this.computeScrollViewHeight();\n    Taro.setStorageSync('guidance', true)\n    // initJump(this.handleToChatroom)\n  },\n  //计算 scroll-view 的高度\n  computeScrollViewHeight() {\n    //获取屏幕可用高度\n    let screenHeight = Taro.getSystemInfoSync().windowHeight;\n    this.setData({\n      scrollHeight: screenHeight - 190\n    })\n  },\n  // 用户输入病情描述\n  getIllness(e) {\n    console.log('病情', e.detail.value);\n    if (e.detail.value.match(/^[ ]*$/)) {\n      console.log('为空或全为空格');\n      this.data.illnessHistory = ''\n    } else {\n      this.data.illnessHistory = e.detail.value\n    }\n    this.setData({\n      illnessHistory: this.data.illnessHistory\n    })\n  },\n  selectFile(files) {\n    console.log('files', files)\n    // 返回false可以阻止某次文件上传\n  },\n  uplaodFile(tempFilePaths, contents) {\n    let that = this;\n    return new Promise((resolve, reject) => {\n      Taro.uploadFile({\n        url: that.data.urlLink + 'app/upload/uploadImg',\n        filePath: tempFilePaths,\n        name: 'file',\n        header: {\n          'Content-Type': 'multipart/form-data'\n        },\n        formData: {\n          base: Taro.arrayBufferToBase64(contents),\n          index: 100\n        },\n        success(res) {\n          console.log(res)\n          res.data = JSON.parse(res.data)\n          // 服务器返回的数据 res.data = {url:'图片上传后的地址'}\n          if (res.data.code == 0) {\n            let urls = []\n            urls.push(res.data.result.path)\n            resolve({\n              urls: urls\n            });\n          } else {\n            reject(res)\n          }\n        },\n        fail(res) {\n          console.log(res)\n          reject(res)\n        }\n      })\n    })\n  },\n  //批量上传，依次push到数组中\n  uploadSuccess(e) {\n    console.log('upload success', e)\n    e.detail.urls.forEach(item => {\n      console.log(item)\n      this.data.fileList.push(item)\n    })\n    this.setData({\n      fileList: this.data.fileList\n    })\n    console.log(this.data.fileList)\n  },\n  //图片删除时更新列表\n  updateImg(index) {\n    console.log('updateImg', index.detail)\n    this.data.fileList.splice(index.detail, 1)\n    this.setData({\n      fileList: this.data.fileList\n    })\n  },\n  /**\n   * @description: 展示患者列表弹窗\n   * @return: void\n   */\n  openPatientList() {\n    if (this.data.patientList.length == 0) {\n      this.data.editPatient = true;\n    }\n    this.setData({\n      patientListShow: true,\n      editPatient: this.data.editPatient\n    })\n  },\n  /**\n   * @description: 获取患者列表\n   * @return: void\n   */\n  getPatientList() {\n    console.log('......获取患者', this.data.patientObj)\n    ajax2('POST', 'api/userPatient/selectUserPatientList', {\n      userId: Taro.getStorageSync('userInfo').userId\n    }, (res) => {\n      if (res.data.code == 0) {\n        res.data.result && res.data.result.forEach(item => {\n          if (item.isDefaultSelected == 1 && item.patientIDCard.length > 0) {\n            // 只有isDefaultSelected== 1 的item 存在身份证号码时，才进行赋值\n            this.data.patientObj = item\n          }\n        })\n        this.setData({\n          patientObj: this.data.patientObj,\n          patientList: res.data.result,\n          // haveIdCardPatientList: _retList\n        })\n        console.log('....删除患者', res.data.result)\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  //获取优惠券列表\n  getCouponsList() {\n    ajax2('post', 'couponController/queryAvailableCoupons', {\n      storeId: this.data.inquiryData.drugstoreId,\n      products: [{\n        productId: this.data.inquiryData.skuId,\n        count: 1\n      }],\n      classification: 2\n    }, res => {\n      if (res.data.code == 0) {\n        let couponsList = res.data.result;\n        if (couponsList.length > 0 && couponsList[0].defaultOption == 1) this.getDiscountAmount(couponsList[0]);\n        this.setData({\n          couponsList\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  updataSuccess() {\n    console.log(33);\n    this.getPatientList();\n    this.setData({\n      patientListShow: true,\n      editPatient: false\n    })\n  },\n  /**\n   * @description: 添加/编辑患者信息\n   * @return: void\n   */\n  toPatientInfo(e) {\n    let currentPatientId = e.currentTarget.dataset.id || '';\n    console.log(currentPatientId)\n    if (this.data.patientList.length >= 10 && !currentPatientId) {\n      Taro.showToast({\n        icon: 'none',\n        title: '添加患者不得超过10个'\n      })\n      return false;\n    }\n    this.setData({\n      editPatient: true,\n      currentPatientId\n    })\n  },\n  /**\n   * @description: 确认是否删除患者\n   * @return: void\n   */\n  checkDeletePatient(e) {\n    let patient = e.currentTarget.dataset.item;\n    Taro.showModal({\n      content: '删除当前患者信息？',\n      // confirmColor: getApp().globalData.mainColor,\n      success: (res) => {\n        if (res.confirm) {\n          this.deletePatient(patient);\n        }\n      }\n    })\n  },\n  /**\n   * @description: 选择患者\n   * @return: void\n   */\n  selectedPatient(e) {\n    console.log('select--', e.currentTarget.dataset.item);\n    let _pidcard = e.currentTarget.dataset.item.patientIDCard;\n    if (_pidcard.length == 0) {\n      console.log('用户没有身份证号');\n      let currentPatientId = e.currentTarget.dataset.item.id || '';\n      console.log(currentPatientId)\n      this.setData({\n        editPatient: true,\n        currentPatientId\n      })\n      return;\n    }\n    let item = e.currentTarget.dataset.item;\n    this.setData({\n      patientListShow: false,\n      patientObj: item\n    })\n  },\n  /**\n   * @description: 删除患者\n   * @return: void\n   */\n  deletePatient(patient) {\n    ajax2('POST', 'api/userPatient/deleteUserPatient', {\n      id: patient.id,\n      userId: Taro.getStorageSync('userInfo').userId\n    }, res => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n        this.setData({\n          patientObj: null\n        })\n        this.getPatientList();\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  dialogClose() {\n    this.setData({\n      editPatient: false\n    })\n  },\n  // 打开描述说明\n  openDescribe() {\n    this.setData({\n      describeShow: true\n    })\n  },\n  // 关闭描述说明\n  closeDescribe() {\n    this.setData({\n      describeShow: false\n    })\n  },\n  //获取优惠券通知列表\n  getCouponsNotify() {\n    ajax2('post', 'miniapp/marketing/pushAndGetDiagnosisCouponList', {\n      position: 1, //1.问诊首页发券 后台要求写死，便于后期扩展\n      channel: getApp().globalData.inquiryChannel//0：扫码购 1：平台（荷叶健康） 2：药店 3：保险 4：您健康\n    }, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          couponsNotify: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * @description: 获取问诊卡片\n   * @return: void\n   */\n  getInquiryData() {\n    console.log('。。。。。。。更新优惠券。。。。。。。')\n    ajax('POST', 'api/doctor/query/detail', {\n      doctorId: this.data.doctorId,\n      patientId: this.data.patientId\n    }, res => {\n      if (res.data.code === 0) {\n        if (res.data.result) {\n          res.data.result.doctorDetai.askDoctorsPrice = res.data.result.doctorDetai.price\n          this.setData({\n            inquiryData: res.data.result.doctorDetai\n          })\n        }\n        this.getCouponsList();\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  /**\n   * @description: 创建问诊单\n   * @return: void\n   */\n  createInquiry(isHandCrafted) {\n    // isHandCrafted 是否是im断开重连成功callback调用方式\n    if (!isHandCrafted&&(new Date().getTime() - this.data.createInquiryTime < 3000)) {\n      return false;\n    }\n    this.data.createInquiryTime = new Date().getTime();\n    let toastText = ''\n    console.log('......this.data.patientObj.id,', this.data.patientObj)\n    if (this.data.patientObj == null) {\n      toastText = '请选择本次就诊人'\n    } else if (!this.data.illnessHistory) {\n      toastText = '请详细描述您的病情'\n    }\n    if (toastText) {\n      Taro.showToast({\n        title: toastText,\n        icon: 'none',\n        duration: 2000\n      })\n      return\n    }\n    console.log('xcxIM.getStatus', xcxIM.status)\n    if (!xcxIM.checkStatus(this.createInquiry,true)) {\n      return\n    }\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    let data = {\n      userPatientId: this.data.patientObj.id,\n      inquiryDeptCode: '',\n      inquiryDeptName: '',\n      lastDiagnosis: {\n        'mainSuit': this.data.illnessHistory,\n        'offlineDiagnosis': 1,\n        'prescriptionDetail': [],\n        'diagnosis': \"\",\n        'diagnosisCode': \"\",\n        \"checkImageList\": this.data.fileList\n      },//mainSuit offlineDiagnosis 未必传，后面3个参数后台要求写死\n      orderNo: '',\n      inquirySource: this.data.drugstoreId?8:1,\n      thirdChannel: '',\n      inquiryChannel: 1,// 门店ID\n      clientType: 10,//0未定义，10小程序，20支付宝，30app（iOS），40app(androd),50pc,60H5\n      doctorGuid: this.data.doctorId\n      // doctorGuid: '5ee34f6e839e4e54871afb9ddc0e6b17'\n    }\n    if(this.data.selectedCoupon.id) data.couponIds = [this.data.selectedCoupon.id];\n    if(this.data.drugstoreId) data.drugstoreId = this.data.drugstoreId;\n    data.lastDiagnosis = JSON.stringify(data.lastDiagnosis);\n\n    ajax2('POST', 'api/extremeInterrogation/createFamousPrescription', data, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        //判断是否需要支付\n        if (res.data.result.channelPrice == 0) {\n          //免费问诊\n          this.paymentSuccess(res.data.result)\n        } else {\n          //支付\n          this.inquiryOrderPay(res.data.result);\n        }\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  //问诊订单支付\n  inquiryOrderPay(data) {\n    let param = {\n      orderNo: data.orderNo,\n      drugstoreId: this.data.inquiryData.drugstoreId\n    }\n    inquiryOrderPay(param, () => {\n      //支付成功\n      this.data.isRefresh = false; //吊起支付的情况不刷新页面\n      this.paymentSuccess(data);\n    }, () => {\n      //支付失败\n      setTimeout(() => {\n        this.paymentFailed();\n      }, 500)\n    })\n  },\n  /**\n   * 支付后跳转页面\n   */\n  paymentSuccess(data) {\n    this.setData({\n      waitingBoxShow: true,\n    })\n    let patientGuid = data && data.patientGuid;\n    inquiryReportGuid = data && data.inquiryReportGuid;\n    Taro.setStorageSync('inquiryId', inquiryReportGuid)\n    if (patientGuid) {\n      Taro.redirectTo({\n        url: `/pages/inquiry/chat/pages/chatroom?inquiryId=${inquiryReportGuid}&guidance=0`\n      })\n    }\n    // handleToWaiting({ patientGuid })\n  },\n  // 支付失败的回调接口\n  paymentFailed: function (e) {\n    Taro.redirectTo({\n      url: `/pages/note/inquiryRecord/inquiryRecord`\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    console.log('guidance onHide')\n    this.data.isRefresh = true;\n  },\n  // 打开选择优惠券弹窗\n  openCouponsBox() {\n    if (this.data.couponsList.length == 0) return;\n    this.setData({\n      couponsDialog: true\n    })\n  },\n  // 选择优惠券\n  userCoupon(e) {\n    this.getDiscountAmount(e.detail);\n\n    this.setData({\n      couponsDialog: false\n    })\n  },\n  //计算优惠金额\n  getDiscountAmount(selectedCoupon) {\n    this.data.inquiryData.askDoctorsPrice = this.data.inquiryData.price;\n    if (selectedCoupon.id) {\n      selectedCoupon.actualDiscountDes = (selectedCoupon.actualDiscount / 100).toFixed(2);\n      this.data.inquiryData.askDoctorsPrice = (this.data.inquiryData.price - selectedCoupon.actualDiscountDes).toFixed(2);\n    }\n\n    this.setData({\n      selectedCoupon,\n      inquiryData: this.data.inquiryData\n    })\n    //初始化数据\n    // this.data.discountAmount = null;\n    // this.data.inquiryData.askDoctorsPrice = this.data.inquiryData.price;\n\n    // let askDoctorsPrice = this.data.inquiryData.price;\n\n    //优惠方法:1:满减;2:折扣;\n    // if(selectedCoupon.couponDiscountWay == 1) {\n    //   this.data.discountAmount = askDoctorsPrice - (askDoctorsPrice - selectedCoupon.couponCash);\n    //   this.data.inquiryData.askDoctorsPrice = askDoctorsPrice - selectedCoupon.couponCash;\n    // }else if(selectedCoupon.couponDiscountWay == 2){\n    //   let discountPrice= (askDoctorsPrice * selectedCoupon.couponDiscountFactor).toFixed(2);\n    //   this.data.discountAmount = askDoctorsPrice - discountPrice;\n    //   this.data.inquiryData.askDoctorsPrice = discountPrice;\n    // }\n  },\n  // 关闭优惠券通知弹窗\n  //向用户发起订阅请求\n  couponsNotifyClose() {\n    this.setData({\n      couponsNotifyShow: false\n    })\n    let tmplIds = ['osYBy0kFCHt6qiQd0xb2valQr6rr3afPxYja_y6ZztA'];\n    if (!Taro.requestSubscribeMessage) return;\n    Taro.requestSubscribeMessage({\n      tmplIds: tmplIds,\n      success(res) {\n        ajax('get', 'api/wechat/saveSubscribeUser', {\n          templateId: tmplIds[0],\n          status: res && res[tmplIds[0]]\n        }, res1 => {\n          console.log('订阅结果上报', res, res1)\n        })\n      }\n    })\n  },\n  // 跳转患者知情同意书\n  toWebview() {\n    this.setData({\n      isToNotification: true\n    })\n    let url = getH5AbsoluteUrl(`#/informedConsentForm`);\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n    })\n  }\n};"},"convertDir/pages/famousDoctors/page/addPatient/addPatient":{"js":"import {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2, throttle\n} from '../../../../utils/util';\nconst app = getApp();\nconst apiUrl = {\n  registerInfo: 'api/userPatient/register' // 立即报到提交\n}\n\nexport default {\n\n  data: function() {\n    return {\n      windowHeight: Taro.getSystemInfoSync().windowHeight, // 屏幕高度\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      patientInfo: {}, // 患者信息\n      finishStatus: 0, // 信息是否填全\n      doctorId: '', // 医生ID\n      createInquiryTime: null,\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.doctorId) {\n      this.setData({\n        doctorId: options.doctorId\n      })\n    }\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n  // 保存\n  saveInfo(){\n    if (new Date().getTime() - this.data.createInquiryTime < 3000) {\n      return false;\n    }\n    this.data.createInquiryTime = new Date().getTime();\n    let toastText = ''\n    if(!this.data.patientInfo.name) {\n      toastText = '您还没有填写有效的姓名，快去完善信息吧~'\n    } else if (!this.data.patientInfo.age) {\n      toastText = '您还没有选择出生日期，快去完善信息吧~'\n    } else if (!this.data.patientInfo.date) {\n      toastText = '您还没有选择就诊时间，快去完善信息吧~'\n    }\n    if (toastText) {\n      Taro.showToast({\n        title: toastText,\n        icon: 'none',\n        duration: 2000\n      })\n      return false\n    }\n    this.registerInfo()\n  },\n  // 立即报到接口\n  registerInfo() {\n    let params = {\n      doctorId: this.data.doctorId,\n      // doctorId: '004d8737f3e641609abbf9be6170de89',\n      patientId: '',\n      patientName: this.data.patientInfo.name,\n      patientSex: this.data.patientInfo.sex,\n      patientAge: this.data.patientInfo.age,\n      clinicTime: this.data.patientInfo.date,\n    }\n    ajax2('post', apiUrl.registerInfo, params,res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        // 报到成功\n        Taro.showToast({\n          title: '报到成功',\n          duration: 3000,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.redirectTo({\n            url: `/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${this.data.doctorId}&reportStatus=1&patientId=${res.data.result}`\n          })\n        }, 3000)\n\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  // 子组件传信息给父组件\n  getPatientInfo(e) {\n    this.setData({\n      patientInfo: e.detail\n    })\n    if (e.detail.name != '' && e.detail.age != '' && e.detail.date != '') {\n      this.setData({\n        finishStatus: 1\n      })\n    } else {\n      this.setData({\n        finishStatus: 0\n      })\n    }\n  }\n};","json":{"patient-info":"../../component/patientInfo/patientInfo"},"wxml":"\n  <view class=\"addPatient-auto-container\"> \n    <navBar title-text=\"添加患者\"></navBar>\n    <view class=\"add-patient\" :style=\"{height: windowHeight - navBarHeight px}\"> \n      <patient-info bind:getPatientInfo=\"getPatientInfo\"></patient-info>\n      <view :class=\"[add-patient-btn,(finishStatus ? 'green': 'grey')]\" bindtap=\"saveInfo\">\n        立即报到\n    \n      </view>\n    </view>\n  </view>","wxss":".add-patient{\n    padding-top: 24rpx;\n    background: #fff;\n}\n.add-patient-btn{\n    position: fixed;\n    bottom: 55rpx;\n    left: 32rpx;\n    z-index: 30;\n    width: 686rpx;\n    height: 96rpx;\n    line-height: 96rpx;\n    text-align: center;\n    border-radius: 48rpx;\n    font-size: 32rpx;\n    color: #fff;\n    margin: auto;\n}\n.green{\n    background: #00b955;\n}\n.grey{\n    background: #c6cad4;\n}"},"convertDir/pages/famousDoctors/page/doctorDetailList/doctorDetailList":{"js":"import {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2\n} from '../../../../utils/util';\nconst app = getApp();\nconst apiUrl = {\n  getDepartmentTab: 'api/doctor/dept/list', // 医生搜索页科室列表\n  getDoctorList: 'api/doctor/query/list', // 医生搜索页科室列表\n  inquiringPrice: 'api/extremeInterrogation/inquiringPrice/V2' // 获取极速问诊卡面\n}\n\nexport default {\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      keyword: '', // 搜索框关键字\n      department: [], // 科室列表\n      inquiryData: {}, // 问医生\n      doctorList: [], // 医生列表\n      doctorSigns: [], // 医生标签\n      docDeptCode: '', // 科室ID\n      pageNum: 1,\n      pageSize: 50,\n      lastPage: null, // 总页数\n      isSearch: false // 是否搜索过\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n    this.getInquiryData()\n    this.getDepartmentTab()\n    this.getDoctorsNameByItem()\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n\n  },\n  /**\n   * @description: 获取问诊卡片\n   * @return: void\n   */\n  getInquiryData() {\n    ajax('POST', apiUrl.inquiringPrice, {\n      thirdChannel: 1 //渠道code 1:平台 2 药店 3 保险 4 您健康\n    }, res=> {\n      if (res.data.code == 0) {\n        this.setData({\n          inquiryData: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  // 医生搜索页科室列表\n  getDepartmentTab() {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    ajax2('post', apiUrl.getDepartmentTab, {}, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result && res.data.result.length) {\n          res.data.result[0].isActive = true\n          this.setData({\n            department: res.data.result,\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  // 清除输入内容\n  clearText(){\n    this.setData({\n      keyword: ''\n    })\n  },\n  // 搜索框input事件\n  onKeywordText(e) {\n    this.setData({\n      keyword: e.detail.value\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if (this.data.pageNum >= this.data.lastPage) {\n      Taro.showToast({\n        title: '没有更多了',\n        icon: 'none'\n      })\n    } else {\n      this.data.pageNum++\n      this.getDoctorsNameByItem('bottom')\n    }\n  },\n  // 搜索医生\n  getDoctorsNameByItem(pageType) {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    let keyword = this.data.keyword\n    console.log('.....搜索', this.data.keyword)\n    let params = {\n      doctorName: keyword.split(' ')[0],\n      deptId: this.data.docDeptCode,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize\n    }\n    ajax('post', apiUrl.getDoctorList, params, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0 ) {\n        if (res.data.result) {\n          let data = res.data.result.list\n          if (data && data.length) {\n            data.forEach((item, index) => {\n              if (item.doctorSigns) {\n                item.doctorSigns = item.doctorSigns.split(',')\n              }\n            })\n          }\n          this.setData({\n            doctorList: pageType == 'bottom' ? this.data.doctorList.concat(res.data.result.list) : res.data.result.list || [],\n            lastPage: res.data.result.lastPage,\n            isSearch: true\n          })\n          console.log('.......list', res.data.result.list, this.data.doctorList)\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none'\n        })\n      }\n    })\n  },\n  // 选择科室\n  chooseTab(e) {\n    let tabItem = e.currentTarget.dataset.item\n    if (this.data.department.length && this.data.department) {\n      this.data.department.forEach((item, key) => {\n        if (item.docDeptCode === tabItem.docDeptCode) {\n          item.isActive = true\n          this.setData({\n            docDeptCode: Number(tabItem.docDeptCode),\n            pageNum: 1\n          },function (){\n            this.getDoctorsNameByItem()\n          })\n        } else{\n          item.isActive = false\n        }\n      })\n    }\n\n    this.setData({\n      department: this.data.department,\n      isSearch: true\n    })\n  },\n  // 跳转极速问诊\n  toInquiry() {\n    getApp().globalData.inquiryChannel = 1;\n    getApp().globalData.inquirySource = 1;\n    if(getApp().globalData.sess_key){\n      let userInfo = {\n        token:  getApp().globalData.sess_key,\n        userId: Taro.getStorageSync('userInfo').userId\n      }\n      Taro.navigateTo({\n        url: `/pages/inquiry/guidance/guidance?userInfo=${ JSON.stringify(userInfo) }`\n      })\n    } else {\n      Taro.navigateTo({\n        url: '/pages/note/login/login?backUrl=/pages/inquiry/guidance/guidance',\n      })\n    }\n  },\n  // 选择医生跳转\n  chooseDoctor(e) {\n    let doctorId = e.currentTarget.dataset.item.guid\n    console.log('.....', doctorId)\n    Taro.navigateTo({\n      url: `/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${doctorId}`\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"doctorDetailList-auto-container\"> \n    <navBar title-text=\"名医问诊\"></navBar>\n    <view class=\"doctor-list-box\">  \n      <view class=\"doctor-list-header\" :style=\"{top: navBarHeightpx}\"> \n        <view class=\"search-container\">  \n          <view class=\"input-container\"> \n            <image mode=\"widthFix\" src=\"../../../../images/search-icon-black.png\"></image>\n            <input type=\"text\" class=\"search-input\" :value=\" keyword \" bindinput=\"onKeywordText\" bindconfirm=\"getDoctorsNameByItem\" placeholder=\"搜一搜医生姓名\" placeholder-class=\"phcolor\"></input>\n          </view>\n          <view :class=\"[search-btn,(keyword ? 'search-btn-blue' : 'search-btn-grey')]\" bindtap=\"getDoctorsNameByItem\" data-name>搜索\n          </view>\n          <image v-if=\"keyword\" bindtap=\"clearText\" class=\"icon-clear\" src=\"../../images/icon-clear.png\"></image>\n        </view>\n        <scroll-view class=\"doctor-wrapper\" scroll-x=\"true\">\n          <view class=\"doctor-list-tab\">\n            <view :class=\"[(item.isActive ? 'choose-active' : '')]\" v-for=\"(item, id) in department\" :key=\"id\" :data-item=\" item \" bindtap=\"chooseTab\">\n                    {{item.docDeptName}}\n\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n      <view class=\"doctor-list\" v-if=\"doctorList\">\n        <view class=\"doctor-list-cards\" v-for=\"(item, id) in doctorList\" :key=\"id\" :data-item=\" item \" bindtap=\"chooseDoctor\"> \n          <view class=\"doctor-list-cards-left\"> \n            <image class=\"doctor-list-img\" :src=\"item.headPortrait ? item.headPortrait : '../../images/icon-doctor.png'\"></image>\n            <view class=\"doctor-list-cards-star\" v-if=\"item.headPortraitSign\">{{item.headPortraitSign}}\n            </view>\n          </view>\n          <view class=\"doctor-list-cards-right\">    \n            <view class=\"name\"> \n              <text class=\"doctor-list-cards-name\">{{item.name}} \n              </text>\n              <text>{{item.titleName}}\n              </text>\n            </view>\n            <view class=\"doctor-list-cards-hospital\"> \n              <text>{{item.workInstName}}\n              </text>\n              <text>{{item.docDeptName}}\n              </text>\n            </view>\n            <view class=\"doctor-list-cards-professional\">擅长：{{item.professional ? item.professional : '暂无描述'}}\n            </view>\n            <view class=\"doctor-list-cards-tag\" v-if=\"item.doctorSigns\">\n              <view v-for=\"(item, key) in  item.doctorSigns \" :key=\"key\">\n                <view>{{item}}\n                </view>\n              </view>\n            </view>\n            <view class=\"doctor-list-cards-price\" v-if=\"item.ykqProductSkuDtoList\"> \n              <image src=\"../../images/icon-inquiry.png\"></image>\n              <view>元\n                <text style=\"font-weight: bold;\">{{item.ykqProductSkuDtoList.price}}\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view v-if=\"!doctorList.length && isSearch\" class=\"search-none-tips\"> \n        <view>\n            未找到相关医生，为你推荐以下服务\n        \n        </view>\n        <view class=\"inquiry-box\" bindtap=\"toInquiry\" v-if=\" !doctorList.length \"> \n          <view class=\"left\">  \n            <view class=\"text\">问医生\n              <image src=\"../../../../images/doctorIcon.png\"></image>\n              <text class=\"tag\" v-for=\"(item, index) in  inquiryData.speed.list \" :key=\"index\">{{ item }}\n              </text>\n            </view>\n            <view class=\"dec\">{{ inquiryData.speed.doctorSuggests }}\n            </view>\n            <view class=\"ask-doctor\">  \n              <view class=\"button\">立即咨询\n              </view>\n              <view class=\"price\" v-if=\"inquiryData.speed.askDoctors > 0\">{{inquiryData.speed.askDoctors}}元/15分钟\n              </view>\n              <view class=\"price\" v-if=\"inquiryData.speed.askDoctors == 0\">免费\n              </view>\n            </view>\n          </view>\n          <image :src=\"''+ url_link +'/images/messageIcon.jpg'\"></image>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".doctor-list-box{\n    padding-top: 160rpx;\n}\n.doctor-list-header{\n    position: fixed;\n    left: 0;\n    z-index: 80;\n}\n.search-container{\n    height: 60rpx;\n    padding: 15rpx 24rpx;\n    background: #fff;\n    display: flex;\n    align-items: center;\n}\n.input-container{\n    width: 626rpx;\n    height: 60rpx;\n    background: #f5f6fa;\n    border-radius: 36rpx;\n    display: flex;\n    align-items: center;\n}\n.search-input{\n    height: 60rpx;\n    width: 100%;\n    padding-right: 20rpx;\n}\n.input-container >image{\n    width: 40rpx;\n    height: 40rpx;\n    margin-left: 16rpx;\n    margin-right: 12rpx;\n}\n.search-btn{\n    height: 60rpx;\n    font-size: 28rpx;\n    line-height: 60rpx;\n    margin-left: 20rpx;\n}\n.search-btn-grey{\n    color: #C5C6D5;\n}\n.search-btn-blue{\n    color: #00B955;\n}\n.icon-clear{\n    width: 30rpx;\n    height: 30rpx;\n    position: absolute;\n    right: 115rpx;\n    top: 30rpx;\n    z-index: 80;\n}\n.phcolor{\n    font-size: 28rpx;\n    color: #c5c6d5;\n}\n.doctor-wrapper{\n    overflow-x: scroll;\n    white-space: nowrap;\n    background: #fff;\n    position: fixed;\n    height: 85rpx;\n}\n.doctor-list-tab{\n    width: 100%;\n    height: 80rpx;\n    background: #fff;\n    display: flex;\n    font-size: 28rpx;\n    color: #666883;\n}\n.doctor-list-tab >view{\n    margin: 0 40rpx;\n    /*width: 150rpx;*/\n    height: 80rpx;\n    line-height: 80rpx;\n    text-align: center;\n    flex-shrink: 0;\n    /*position: relative;*/\n}\n/*.doctor-list-tab-bar{*/\n/*    position: absolute;*/\n/*    bottom: 0;*/\n/*    left: 55rpx;*/\n/*    width: 40rpx;*/\n/*    height: 6rpx;*/\n/*    background: #00b955;*/\n/*    border-radius: 3rpx;*/\n/*}*/\n.choose-active{\n    color: #00b955;\n    border-bottom: 6rpx solid #00b955;\n}\n.doctor-list{\n    padding: 23rpx 24rpx;\n}\n.doctor-list-cards{\n    /*height: 289rpx;*/\n    border-radius: 12rpx;\n    background: #fff;\n    padding: 24rpx 20rpx 0 20rpx;\n    display: flex;\n    margin-bottom: 20rpx;\n}\n.doctor-list-cards-left >image{\n    width: 100rpx;\n    height: 100rpx;\n    border-radius: 50%;\n}\n.doctor-list-cards-star{\n    width: 104rpx;\n    height: 32rpx;\n    background: linear-gradient(138deg,#ffb02b 15%, #ff854c 83%);\n    border-radius: 4rpx;\n    box-shadow: 0rpx 4rpx 8rpx 0rpx #ffdcbf;\n    font-size: 22rpx;\n    color: #fff;\n    text-align: center;\n    margin-top: -26rpx;\n    position: absolute;\n    z-index: 50;\n}\n.doctor-list-cards-right{\n    margin-left: 30rpx;\n    color: #111334;\n    font-size: 28rpx;\n}\n.doctor-list-cards-right >view{\n    margin-bottom: 17rpx;\n}\n.doctor-list-cards-hospital{\n    width: 500rpx;\n    display: flex;\n}\n.doctor-list-cards-hospital >text:first-child{\n    overflow: hidden;\n    text-overflow:ellipsis;\n    white-space: nowrap;\n    margin-right: 10rpx;\n}\n.doctor-list-cards-hospital >text:last-child{\n    flex-shrink: 0;\n}\n\n.doctor-list-cards-name{\n    font-size: 32rpx;\n    font-weight: bold;\n}\n.doctor-list-cards-right .doctor-list-cards-professional{\n    font-size: 24rpx;\n    color: #666883;\n    letter-spacing: 0;\n    overflow: hidden;\n    display: -webkit-box;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 2;  /*要显示的行数*/\n    -webkit-box-orient: vertical;\n}\n.doctor-list-cards-tag >view{\n    padding: 0 10rpx;\n    border: 1rpx solid #00b955;\n    border-radius: 5rpx;\n    font-size: 22rpx;\n    color: #00b955;\n    margin-right: 10rpx;\n    margin-bottom: 10rpx;\n}\n.doctor-list-cards-right .doctor-list-cards-tag{\n    display: flex;\n    flex-wrap: wrap;\n}\n.doctor-list-cards-right .doctor-list-cards-price{\n    display: flex;\n    align-items: center;\n}\n.doctor-list-cards-right .doctor-list-cards-price >image{\n    width: 24rpx;\n    height: 24rpx;\n    margin-right: 12rpx;\n}\n.doctor-list-cards-right .doctor-list-cards-price >view{\n    font-size: 30rpx;\n    color: #111334;\n}\n.search-none-tips >view:first-child{\n    height: 150rpx;\n    line-height: 150rpx;\n    text-align: center;\n    font-size: 24rpx;\n    color: #41435d;\n}\n.inp-search-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1rpx solid #F7F7F7;\n    padding: 30rpx 40rpx;\n}\n.search-list{\n    background: #fff;\n    position: absolute;\n    z-index: 10;\n}\n\n.inquiry-box {\n    background: #ffffff;\n    border-radius: 12rpx;\n    display: flex;\n    align-items: flex-end;\n    margin: 0rpx 24rpx 20rpx 24rpx;\n}\n\n.inquiry-box .left {\n    flex: 1;\n    font-size: 36rpx;\n    padding: 22rpx 0 24rpx 21rpx;\n}\n\n.inquiry-box .left .text {\n    display: flex;\n    align-items: center;\n    font-weight: bold;\n}\n\n.inquiry-box .left .text image {\n    width: 37rpx;\n    height: 37rpx;\n    margin-right: 6rpx;\n}\n\n.inquiry-box .left .dec {\n    font-size: 24rpx;\n    line-height: 24rpx;\n    color: #9D9FB8;\n    margin-top: 13rpx;\n}\n\n.inquiry-box .left .button {\n    font-size: 26rpx;\n    width: 152rpx;\n    height: 48rpx;\n    line-height: 48rpx;\n    font-weight: bold;\n    border-radius: 48rpx;\n    text-align: center;\n    color: #FFFFFF;\n    margin-top: 13rpx;\n    background: #00b955;\n}\n\n.inquiry-box .left .tag {\n    height: 32rpx;\n    line-height: 32rpx;\n    font-weight: normal;\n    color: #F93A4A;\n    background: #FFEEEF;\n    border-radius: 4rpx;\n    font-size: 22rpx;\n    padding: 0 10rpx;\n    margin-left: 10rpx;\n}\n\n.inquiry-box image {\n    margin-right: 20rpx;\n    width: 250rpx;\n    height: 188rpx;\n}\n.inquiry-box .ask-doctor{\n    display: flex;\n    align-items: center;\n}\n.inquiry-box .price{\n    font-size: 30rpx;\n    color: #666883;\n    margin-top: 13rpx;\n    margin-left: 20rpx;\n\n}\n"},"convertDir/pages/famousDoctors/page/myDoctor/myDoctor":{"json":{"halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog","missingData-view":"/component/missingData/missingData","patient-info":"/component/patientInfo/patientInfo","tabBar":"/component/imTabBar/tabBar","couponsList":"/component/couponsList/couponsList","mp-uploader":"/component/uploader/uploader","my-tools":"/component/myTools/myTools"},"js":"import {\n  url,\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl,\n  inquiryOrderPay\n} from \"../../../../utils/util\";\nconst UPLOAD_IMAGE_FAMOUS = \"prescription_image_data\";\n\nexport default {\n  data: function() {\n    return {\n      isShow: false,\n      isArrowUp: true,\n      dialogShow: true,\n      couponsDialog: false,\n      uploadDialog: false,\n      couponsList: [],\n      selectCoupon: {},\n      urlLink: url,\n      fileList: [],\n      clickTime: false,\n      files: [],\n      // boxShow: 1,\n      adverseReaction: 0,\n      historyAllergy: 0,\n      symptomDes: '',\n      selectedDiagnosisIdList: [],\n      medicinesList: [],\n      patientId: '',\n      drugStoreId: null,\n      toInquiryClickTime: null,\n      isSrc_whyb: getApp().globalData.src_whyb || '',\n      doctorInfo: {\n      },\n      pageShow: false,\n      reportDialog: false,\n      couponStatus: false,\n      cdnLink: cdnStaticResourceUrl,\n      reportData:{\n        couponList:[]\n      },\n      drugstoreSource: false,\n      drugstoreId: ''\n    };\n  },\n  onLoad: function (options) {\n    console.log(options)\n    Taro.setStorageSync('OPTIONS', options);\n    this.setData({\n      selectFile: this.selectFile.bind(this),\n      uplaodFile: this.uplaodFile.bind(this),\n      files: [],\n      fileList: [],\n    });\n    if(options.isHideBtn) this.setData({drugstoreSource: true})\n    if(options.drugstoreId) this.data.drugstoreId = options.drugstoreId\n  },\n  onShow() {\n   \n     if (!getApp().globalData.sess_key) {\n      this.goToAuth()\n      return\n    } \n     var options =  Taro.getStorageSync('OPTIONS');\n     console.log(options)\n     if(options)this.getData(options)\n  },\n  goToAuth() {\n    console.log('中转页面-------------')\n    var url = \"/pages/note/login/login\"\n    Taro.navigateTo({\n      url: url\n    })\n  },\n  getData(options){\n    if (options.reportStatus != undefined) {\n      this.setData({\n        reportStatus: options.reportStatus\n      })\n    }\n    if (options.doctorId) {\n      this.setData({\n        doctorId: options.doctorId\n      })\n    }\n    if (options.patientId) {\n      this.setData({\n        patientId: options.patientId\n      })\n    }\n    if(options.source){\n      this.setData({\n        source: options.source\n      })\n    }\n    this.getDoctorInfo()\n    if (this.data.reportStatus != undefined&&!this.data.reportData.couponList.length) {\n      // 报道成功获取优惠券\n      this.getCoupon()\n    }\n  },\n  getCoupon() {\n    let that = this\n    let data = {\n      channel: 20,\n      doctorId: this.data.doctorId,\n      patientId: this.data.patientId\n    }\n    ajax2('post', 'miniapp/marketing/doctor2PatientGetCoupon', data, (res) => {\n      Taro.hideLoading()\n      if (res.data.code == 0) {\n        that.setData({\n          reportData: res.data.result,\n          reportDialog: true\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n        })\n      }\n    })\n\n  },\n  getNum(querySeletor) {\n    var query = Taro.createSelectorQuery();\n    // docComment\n    var colNum = 0; // 擅长行数\n    query.select(`#${querySeletor}`).boundingClientRect();\n    query.exec((res) => {\n      if (!res || !res[0]) return\n      var height = res[0].height;\n      colNum = Math.floor(height / 20);\n      var key = querySeletor + \"ColNum\";\n      this.setData({\n        [key]: colNum,\n      })\n    })\n\n  },\n  changeShow() {\n    this.setData({\n      isArrowUp: !this.data.isArrowUp\n    })\n  },\n\n  getDoctorInfo() {\n    Taro.showLoading({\n      title: '加载中',\n    })\n    let that = this\n    let data = {\n      doctorId: this.data.doctorId\n      // patientId: this.data.patientId?this.data.patientId:null\n    }\n    if (this.data.patientId) {\n      data.patientId = this.data.patientId\n    }\n    ajax2('get', 'api/doctor/query/detail', data, (res) => {\n      Taro.hideLoading()\n      if (res.data.code == 0) {\n        that.setData({\n          doctorInfo: res.data.result,\n        })\n        var doctorInfo = res.data.result\n        this.getCouponsList()\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  selectFile(files) {\n    console.log('files', files)\n    // 返回false可以阻止某次文件上传\n  },\n  uplaodFile(tempFilePaths, contents) {\n    let that = this;\n\n    return new Promise((resolve, reject) => {\n      Taro.uploadFile({\n        url: that.data.urlLink + 'app/upload/uploadImg',\n        filePath: tempFilePaths,\n        name: 'file',\n        header: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        formData: {\n          base: Taro.arrayBufferToBase64(contents),\n          index: 100\n        },\n        success(res) {\n          console.log(res)\n          res.data = JSON.parse(res.data)\n          // 服务器返回的数据 res.data = {url:'图片上传后的地址'}\n          if (res.data.code == 0) {\n            var urls = []\n            urls.push(res.data.result.path)\n            resolve({\n              urls: urls\n            });\n          } else {\n            reject(res)\n          }\n        },\n        fail(res) {\n          console.log(res)\n          reject(res)\n        }\n      })\n    })\n  },\n  uploadError(e) {\n    console.log('upload error', e.detail)\n    Taro.showToast({\n      icon: 'none',\n      title: e.detail.errMsg,\n    })\n  },\n  //批量上传，依次push到数组中\n  uploadSuccess(e) {\n    console.log('upload success', e)\n    e.detail.urls.forEach(item => {\n      console.log(item)\n      this.data.fileList.push(item)\n    })\n    this.setData({\n      fileList: this.data.fileList\n    })\n    console.log(this.data.fileList)\n  },\n  //图片删除时更新列表\n  updateImg(index) {\n    console.log('updateImg', index.detail)\n    this.data.fileList.splice(index.detail, 1)\n    this.setData({\n      fileList: this.data.fileList\n    })\n  },\n  makeSureUpload() {\n    if (this.data.fileList.length == 0) {\n      Taro.showToast({\n        title: '请上传处方单',\n        icon: 'none'\n      })\n      return false;\n    }\n    var data = {\n      patientId: this.data.patientId,\n      doctorId: this.data.doctorId,\n      prescriptionUrls: this.data.fileList\n    }\n    let that = this\n    ajax2('POST', 'api/userPatient/savePrescriptionUrls', data, (res) => {\n      Taro.hideLoading()\n      if (res.data.code == 0) {\n        // 上传成功的提示\n        Taro.showModal({\n          confirmColor: getApp().globalData.mainColor,\n          confirmText: '确认',\n          title: '上传成功',\n          content: '平台将在24小时内完成审核,审核通过后将自动发送礼包到您的账户',\n          showCancel: false,\n          success: res => {\n            if (res.confirm) {\n\n              that.changeUploader()\n              that.getDoctorInfo()\n            } else if (res.cancel) {\n            }\n          }\n        })\n      } else {\n        Taro.showToast({\n          title: 'title',\n        })\n      }\n    })\n    console.log(this.data.fileList)\n    Taro.setStorageSync(UPLOAD_IMAGE_FAMOUS, this.data.fileList);\n    // Taro.setStorageSync('upload_click_type', this.data.boxShow);\n    // Taro.navigateBack({\n    //   delta: 1\n    // })\n  },\n  showModal(msg, showCancel, nowType,data) {\n    let that = this\n    Taro.showModal({\n      content: msg,\n      confirmColor: getApp().globalData.mainColor,\n      confirmText: showCancel?(nowType==1?\"继续支付\":'进入诊室'):'确认',\n      cancelText:  '再看看',\n      showCancel: showCancel,\n      success: res => {\n        if (res.confirm) {\n          if(!nowType){\n            return \n          }\n             if(nowType==1){\n              this.inquiryOrderPay(data)\n             }else{\n              this.handleToChatroom(data)\n             }\n        } else if (res.cancel) {\n          console.log('用户点击取消');\n        }\n      }\n    })\n\n  },\n  goConsult(e) {\n    // 医带患权限是免费开药的\n    // 先判断是否开通服务 在判断是否存在问诊单\n    if (new Date() - this.data.addClickTime < 2000) {\n      return false;\n    }\n    this.data.addClickTime = new Date();\n    var type = e.detail.type || e.target.dataset.type\n    // type 2 免费开药 医带患\n    // type 1 名医\n\n    let that = this\n    ajax2('POST', `api/extremeInterrogation/checkFamousInquiry?doctorId=${this.data.doctorId}`, {}, (res) => {\n      Taro.hideLoading()\n      if (res.data.code == 0) {\n        let infoData = res.data.result\n        that.setData({\n          infoData:infoData\n        })\n        var msg\n        if (type == 2) {\n          // 免费开药\n          // if (infoData.inviteStatus == 0) {\n          //   this.showModal(infoData.inviteStatusMsg, '', '')\n          // } else {\n            Taro.navigateTo({\n              url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${that.data.doctorInfo.ykqPoiId}`,\n            })\n            // 跳往药店主页\n          // }\n          return\n        }\n\n        if (infoData.status == 0) {\n          // 可问诊 判断 医生权限\n          if (infoData.famousStatus == 0) {\n            // 没开通名医或者没开通医带患 // 给提示 famousStatusMsg   \n            msg = infoData.famousStatusMsg\n            this.showModal(msg, false, '','')\n            return\n          } else {\n            //发起问诊\n            let value = ''\n            if (that.data.drugstoreSource) {\n              value = 1\n            }\n            var url = `/pages/famousDoctors/page/addInfoMsg/addInfoMsg?isHideBtn=${value}&doctorId=${that.data.doctorId}&drugstoreId=${this.data.drugstoreId}`;\n            if (that.data.patientId) {\n              url += '&patientId=' + this.data.patientId\n            }\n            if(that.data.selectedCoupon&&that.data.selectedCoupon.id){\n              url+=`&source=mingyi&couponsId=${that.data.selectedCoupon.id}`\n            }\n            Taro.navigateTo({\n              url: url\n            })\n          }\n        } else {\n          if (infoData.status == 1) {\n            msg = infoData.waitPayMsg\n            var data = {\n              orderNo: infoData.orderNo,\n              drugstoreId: that.data.doctorInfo.doctorDetai.drugstoreId\n            }\n            that.showModal(msg, true,1,data)\n            return\n          } else if (infoData.status == 2 || infoData.status == 3) {\n            msg = infoData.waitReceiveAndInquiringMsg\n            that.showModal(msg, true,2,infoData.inquiryId)\n            // 进入问诊室\n            return\n          } else {\n               // 发起问诊\n            let value = ''\n            if (that.data.drugstoreSource) {\n              value = 1\n            }\n            var url = `/pages/famousDoctors/page/addInfoMsg/addInfoMsg?isHideBtn=${value}&doctorId=${that.data.doctorId}&drugstoreId=${this.data.drugstoreId}`;\n            if (that.data.patientId) {\n              url += '&patientId=' + this.data.patientId\n            }\n            if(that.data.selectedCoupon&&that.data.selectedCoupon.id){\n              url+=`&source=mingyi&couponsId=${that.data.selectedCoupon.id}`\n            }\n            Taro.navigateTo({\n              url: url,\n            })\n      \n          }\n        }\n      } else {\n        Taro.showToast({\n          title: 'title',\n        })\n      }\n    })\n  },\n  \n  //问诊订单支付\n  inquiryOrderPay(data) {\n    let param = {\n      orderNo: data.orderNo,\n      drugstoreId: this.data.doctorInfo.doctorDetai.drugstoreId\n    }\n    inquiryOrderPay(param, () => {\n      //支付成功\n      this.data.isRefresh = false; //吊起支付的情况不刷新页面\n      this.paymentSuccess(data);\n    }, () => {\n      //支付失败\n      setTimeout(() => {\n        this.paymentFailed();\n      }, 500)\n    })\n  },\n  /**\n   * 支付后跳转页面\n   */\n  paymentSuccess(data) {\n     this.handleToChatroom(this.data.infoData.inquiryId)\n  },\n  // 支付失败的回调接口\n  paymentFailed: function (e) {\n    Taro.redirectTo({\n      url: `/pages/note/inquiryRecord/inquiryRecord`\n    })\n  },\n  // 跳转咨询页面\n  handleToChatroom(inquiryId) {\n      var URL = `/pages/inquiry/chat/pages/chatroom?guidance=${inquiryId ? 1 : 0}`\n      if (inquiryId) {\n        URL += `&inquiryId=${inquiryId}`\n      }\n      Taro.redirectTo({\n        url: URL\n      })\n\n  },\n  //获取优惠券列表\n  getCouponsList() {\n    \n    ajax2('post', 'couponController/queryAvailableCoupons', {\n      storeId: this.data.doctorInfo.doctorDetai.drugstoreId,\n      classification: 2,\n      products: [{\n        productId: this.data.doctorInfo.doctorDetai.skuId,\n        count: 1\n      }]\n    }, res => {\n      if (res.data.code == 0) {\n        let couponsList = res.data.result;\n        //默认选择优惠最大的券\n        if (couponsList.length > 0 && couponsList[0].defaultOption == 1) this.getDiscountAmount(couponsList[0]);\n        this.setData({\n          couponsList,\n          couponStatus: true,\n          pageShow: true,\n          selectCoupon:couponsList[0]\n        })\n        if (this.data.doctorInfo.doctorDetai.professional) {\n          this.getNum('professional')\n        }\n        if (this.data.doctorInfo.doctorDetai.docComment) {\n          this.getNum('docComment')\n        }\n      } else {\n        this.setData({\n          pageShow: true\n        })\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  changeUploader() {\n    this.setData({\n      uploadDialog: !this.data.uploadDialog\n    })\n  },\n  // 选择优惠券\n  userCoupon(e) {\n    console.log(e.detail)\n    this.getDiscountAmount(e.detail);\n    this.setData({\n      couponsDialog: false,\n      selectCoupon: e.detail\n    })\n  },\n  //打开优惠券\n  openCouponsBox() {\n    if (this.data.couponsList.length == 0) return;\n    this.setData({\n      couponsDialog: true\n    })\n  },\n  //计算优惠金额\n  getDiscountAmount(selectedCoupon) {\n    var selectedCoupon = selectedCoupon\n    var askDoctorsPrice = 0;\n    if (selectedCoupon.id) {\n      selectedCoupon.actualDiscountDes = (selectedCoupon.actualDiscount / 100).toFixed(2);\n      askDoctorsPrice = (this.data.doctorInfo.doctorDetai.price - selectedCoupon.actualDiscountDes).toFixed(2);\n    }\n    this.setData({\n      selectedCoupon: selectedCoupon,\n      askDoctorsPrice: askDoctorsPrice\n    })\n\n  },\n  windowClose() {\n    this.setData({\n      reportDialog: false\n    })\n  }\n};","wxss":"@import '/pages/noteIndex/noteIndex.wxss';\n@import '/common/tableView.wxss';\n\n.container {\n  color: #111334;\n}\n\n\n.doctor_cards {\n  width: 702rpx;\n  margin: 20rpx auto 12rpx;\n  background: #fff;\n  padding: 15rpx 24rpx 24rpx;\n  box-sizing: border-box;\n  border-radius: 12rpx;\n}\n\n.flex-r {\n  display: flex;\n  justify-content: space-between;\n\n}\n\n.align-c {\n  align-content: center;\n}\n\n\n.doctor_headImg {\n  width: 150rpx;\n  height: 150rpx;\n  opacity: 1;\n  border-radius: 50%;\n  background: #eee;\n}\n\n.doctor_name {\n  opacity: 1;\n  font-size: 40rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: #111334;\n  margin-bottom: 12rpx;\n}\n\n.doctor_name_more {\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  text-align: left;\n  margin-left: 12rpx;\n}\n\n.doctor_hospital {\n  height: 40rpx;\n  opacity: 1;\n  display: flex;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #111334;\n  width: 500rpx;\n  line-height: 40rpx;\n  margin-bottom: 17rpx;\n}\n\n\n.doctor_more_info {\n  opacity: 1;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #666883;\n  line-height: 40rpx;\n  /* min-height: 40px; */\n  /* visibility: hidden; */\n}\n\n.like_icon {\n  opacity: 1;\n  border: 1rpx solid #00b955;\n  border-radius: 5rpx;\n  height: 32rpx;\n  padding: 0 10rpx;\n  margin-right: 10rpx;\n  font-size: 22rpx;\n  color: #00b955;\n  flex-shrink: 0;\n  margin-bottom: 10rpx;\n}\n\n.hide {\n  visibility: hidden;\n  /* position: fixed;\n  z-index: -100; */\n}\n\n.icon_wrap {\n  justify-content: flex-start;\n  margin-bottom: 35rpx;\n  flex-wrap: wrap;\n  margin-left: 4rpx;\n}\n\n.more {\n\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #9d9fb8;\n  line-height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.arrow {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.tips_wrap {\n  padding: 24rpx 42rpx 22rpx;\n  font-size: 22rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #666883;\n  line-height: 28rpx;\n  height: 28rpx;\n}\n\n.discount_wrap {\n  width: 702rpx;\n  padding: 24rpx;\n  box-sizing: border-box;\n  background: #ffffff;\n  border-radius: 12rpx;\n  margin: 10rpx auto 12rpx;\n  padding-top: 0;\n}\n\n.discount_info {\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #111334;\n  line-height: 30rpx;\n}\n\n.discount_tips {\n  margin-left: 20rpx;\n  color: #f93a4a;\n  font-size: 22rpx;\n  line-height: 30rpx;\n}\n\n.discount_top {\n  padding-bottom: 18rpx;\n  padding-top: 24rpx;\n}\n\n.discount_price {\n  color: #f93a4a;\n  font-size: 28rpx;\n  font-weight: bold;\n}\n\n.discount_price_space {\n  margin: 0 12rpx 0 16rpx;\n}\n\n.bord-t {\n  border-top: 1rpx solid #eff0f5;\n}\n\n.discount_bottom {\n  padding-top: 30rpx;\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: left;\n  color: #666883;\n}\n\n.like_btn {\n  width: 172rpx;\n  height: 60rpx;\n  opacity: 1;\n  background: #00b955;\n  border-radius: 32rpx;\n  text-align: center;\n  vertical-align: middle;\n  color: #fff;\n  line-height: 60rpx;\n  font-size: 28rpx;\n  flex-shrink: 0;\n  margin-left: 16rpx;\n}\n\n.discount_picture {\n  width: 100rpx;\n  height: 100rpx;\n  margin-right: 12rpx;\n  flex-shrink: 0;\n}\n\n.arrow_right {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.tips_icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 4rpx;\n  margin-top: 1rpx;\n}\n\n.text-e2 {\n  overflow: hidden;\n  /* visibility: hidden; */\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n\n.arrow_up {\n  transform: rotate(180deg);\n}\n\n.pr {\n  position: relative;\n}\n\n.doctor_headIcon {\n  width: 104rpx;\n  height: 32rpx;\n  opacity: 1;\n  background: linear-gradient(138deg, #ffb02b 15%, #ff854c 83%);\n  border-radius: 4px;\n  box-shadow: 0px 4px 8px 0px #ffdcbf;\n  top: 128rpx;\n  position: absolute;\n  left: 14rpx;\n  font-size: 22rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  text-align: center;\n  color: #ffffff;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n}\n\n.makeSureBtn {\n  margin-bottom: 32rpx;\n  border-radius: 50rpx;\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #ffffff;\n\n}\n\n.common_footer button {\n  height: 90rpx;\n  border-radius: 90rpx;\n  font-size: 36rpx;\n  color: #FFFFFF;\n  background: #C6CAD4;\n}\n\n.common_footer button.active {\n  background: #00b955;\n}\n\n.upload-tips {\n  margin-top: 14rpx;\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n}\n\n.upload_wrap {\n  position: fixed;\n  bottom: 0;\n  height: 98rpx;\n  background: #fff;\n  width: 100%;\n  padding: 14rpx 18rpx 14rpx 41rpx;\n  box-sizing: border-box;\n  font-size: 24rpx;\n  color: #f93a4a;\n  display: flex;\n  align-items: center;\n\n}\n\n.ad_box {\n  width: 572rpx;\n  height: auto !important;\n  /* overflow: scroll; */\n  opacity: 1;\n  border-radius: 12px;\n  box-sizing: border-box;\n  text-align: center;\n  color: #fff;\n  background: none;\n}\n\n.tips {\n  margin-top: 15rpx;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #ffffff;\n  line-height: 36px;\n}\n\n.black_box {\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 99;\n  overflow: hidden;\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n\n.coupons-dialog {\n  height: 800rpx;\n  overflow-y: scroll;\n}\n\n.ad_box {\n  padding-bottom: 10rpx;\n}\n\n.couponMainTitle {\n  height: 24rpx;\n  opacity: 1;\n  font-size: 34rpx;\n  text-align: center;\n  color: #ffffff;\n  line-height: 24rpx;\n  margin-top: 10rpx;\n}\n\n.couponSecondaryTitle {\n  opacity: 0.8;\n  font-size: 24rpx;\n  margin-top: 10px;\n  text-align: center;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #ffffff;\n  line-height: 17px;\n  margin-bottom: 10rpx;\n}\n\n.couponsWrap {\n  max-height: 600rpx;\n  overflow: scroll;\n  padding: 20rpx;\n  padding-bottom: 0px;\n}\n\n.couponsItem:last-child {\n  margin-bottom: 0;\n}\n\n.couponsItem {\n  width: 532rpx;\n  height: 156rpx;\n  box-sizing: border-box;\n  margin-bottom: 20rpx;\n}\n\n.couponsItem-left {\n  padding-left: 16rpx;\n  padding-top: 18rpx;\n  width: 350rpx;\n  box-sizing: border-box;\n}\n\n.couponsItem-top {\n  width: 100%;\n  text-align: left;\n  display: flex;\n  overflow: hidden;\n  height: 30rpx;\n}\n\n.hosipital {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 10rpx;\n}\n\n.contents {\n  color: #F5F6FA !important;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  z-index: -1000;\n  top: 0;\n}\n\n.contents .doctor_more_info {\n  color: #F5F6FA !important;\n}\n\n.icon {\n  box-sizing: border-box;\n  padding: 2rpx;\n  height: 30rpx;\n  opacity: 1;\n  border: 1rpx solid #f93a4a;\n  border-radius: 16rpx;\n  display: inline-block;\n  font-size: 20rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n  display: flex;\n  align-items: center;\n}\n\n.couponsItem-name {\n  width: 230rpx;\n  height: 30rpx;\n  opacity: 1;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: #333333;\n  line-height: 30rpx;\n  margin-left: 8rpx;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  word-break: break-all;\n}\n\n.couponsItem-use {\n  height: 28rpx;\n  opacity: 1;\n  font-size: 20rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: left;\n  color: #666666;\n  line-height: 28rpx;\n  margin-top: 24rpx;\n  margin-bottom: 6rpx;\n}\n\n.couponsItem-more {\n  height: 22rpx;\n  opacity: 1;\n  font-size: 20rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: left;\n  color: #999999;\n  line-height: 22rpx;\n}\n\n.couponsItem-price {\n  width: 180rpx;\n  text-align: center;\n  height: 156rpx;\n  vertical-align: middle;\n  color: #f93a4a;\n  line-height: 156rpx;\n  font-size: 58rpx;\n  margin: 0 2rpx;\n}\n\n.symbol {\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Semibold;\n}\n\n.docComment {\n  margin-top: 12rpx;\n}\n\n.famous-title {\n  opacity: 1;\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #111334;\n}\n\n.free {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n\n.couponbg {\n  background: #FF3131;\n  margin-top: -10rpx;\n  flex: 1;\n}\n.justify-s{\n  justify-content: flex-start;\n}","wxml":"\n  <view class=\"myDoctor-auto-container\">   \n    <navBar title-text=\"我的医生\" :isCustom=\" drugstoreSource ? true : false \"></navBar>\n    <view :class=\"[(!pageShow?'hide':'')]\">    \n      <view class=\"doctor_cards\">   \n        <view class=\"flex-r\"> \n          <view class=\"doctor_left\">  \n            <view class=\"doctor_name\">\n          {{doctorInfo.doctorDetai.name}}\n              <text class=\"doctor_name_more\" v-if=\"doctorInfo.doctorDetai.titleName\">{{doctorInfo.doctorDetai.titleName}}\n              </text>\n            </view>\n            <view class=\"doctor_hospital\"> \n              <text class=\"hosipital\">{{doctorInfo.doctorDetai.workInsName}}\n              </text>\n              <text style=\"margin-left:12rpx;flex-shrink:0\">{{doctorInfo.doctorDetai.docDeptName}}\n              </text>\n            </view>\n            <view class=\"flex-r icon_wrap\">\n              <view class=\"like_icon\" v-for=\"(item, index) in  doctorInfo.doctorDetai.doctorSigns \" :key=\"index\">{{item}}\n              </view>\n            </view>\n          </view>\n          <view class=\"doctor_headImg pr\"> \n            <image class=\"doctor_headImg\" :src=\"doctorInfo.doctorDetai.headPortrait?doctorInfo.doctorDetai.headPortrait:'../../images/icon-doctor.png'\"></image>\n            <view class=\"pb doctor_headIcon\" v-if=\"doctorInfo.doctorDetai.headPortraitSign\">\n          {{doctorInfo.doctorDetai.headPortraitSign}}\n        \n            </view>\n          </view>\n        </view>\n        <view :class=\"[doctor_more_info,((professionalColNum>2||docCommentColNum>2)&&!isArrowUp?'':'text-e2')]\">\n      擅长：{{doctorInfo.doctorDetai.professional?doctorInfo.doctorDetai.professional:\"暂无描述\"}}\n    \n        </view>\n        <view :class=\"[doctor_more_info,docComment,((professionalColNum>2||docCommentColNum>2)&&!isArrowUp?'':'text-e2')]\">\n      简介：{{doctorInfo.doctorDetai.docComment?doctorInfo.doctorDetai.docComment:\"暂无简介\"}}\n    \n        </view>\n        <view class=\"more\" bindtap=\"changeShow\" v-if=\"professionalColNum>2||docCommentColNum>2\">\n      {{ isArrowUp?'展开':'收起'}}\n      \n          <image :class=\"[arrow,(isArrowUp?'arrow_up':'')]\" src=\"../../../../images/arow_bottom.png\"></image>\n        </view>\n      </view>\n      <view class=\"tips_wrap flex-r align-c\">  \n        <view class=\"flex-r align-c\">\n      保证医生真实\n    \n          <image class=\"tips_icon\" src=\"../../../../images/real.png\"></image>\n        </view>\n        <view class=\"flex-r align-c\">未接诊随时退\n    \n          <image class=\"tips_icon\" src=\"../../../../images/noUse.png\"></image>\n        </view>\n        <view class=\"flex-r align-c\">\n      不满意可申诉\n    \n          <image class=\"tips_icon\" src=\"../../../../images/nosatisfied.png\"></image>\n        </view>\n      </view>\n      <view class=\"discount_wrap\" v-if=\"doctorInfo.doctorDetai.hasFamous\"> \n        <view class=\"flex-r discount_top\"> \n          <view class=\"discount_info flex-r align-c\"> 优惠券\n            <text class=\"discount_icon\"></text>\n            <text class=\"discount_tips\" v-if=\"couponStatus&&selectedCoupon.defaultOption==1\">已选择最佳优惠\n            </text>\n          </view>\n          <view class=\"discount_price flex-r  align-c\" style=\"font-weight:normal\">  \n            <view v-if=\"selectedCoupon.actualDiscountDes&&couponStatus\">\n          {{ '-¥'+selectedCoupon.actualDiscountDes}}\n            </view>\n            <view v-if=\"!selectedCoupon.actualDiscountDes&&couponsList.length&&couponStatus\">\n          {{couponsList.length}}张优惠券可用\n            </view>\n            <view v-if=\"!couponsList.length&&couponStatus\" style=\"color:#666883;font-size:24rpx;\">暂无可用优惠券\n            </view>\n          </view>\n        </view>\n        <view class=\"flex-r  bord-t discount_bottom\"> \n          <image class=\"discount_picture \" src=\"../../../../images/picture.png\" mode=\"aspectFit\"></image>\n          <view style=\"flex:1\">  \n            <view style=\"height:45rpx;line-height:45rpx\" class=\"flex-r align-c justify-s\" v-if=\"selectedCoupon.actualDiscountDes&&couponsList.length&&couponStatus\"> \n              <view class=\"famous-title\">图文问诊\n              </view>\n              <view class=\" flex-r align-c discount_price discount_price_space\">\n            券后价{{askDoctorsPrice=='0.00'?'0':askDoctorsPrice}}元/次\n              </view>\n              <view class=\"flex-r align-c\" style=\"text-decoration:line-through\">¥{{doctorInfo.doctorDetai.price}}\n              </view>\n            </view>\n            <view v-else>\n              <text class=\"famous-title\">图文问诊\n              </text>\n              <text class=\" discount_price_space discount_price\">¥{{doctorInfo.doctorDetai.price=='0.00'?'0':doctorInfo.doctorDetai.price}}\n              </text>\n            </view>\n            <view class=\"flex-r\">  \n              <view style=\"flex:1\">\n            医生接诊后24小时内不限次数交流，如未接诊可自动退款\n          \n              </view>\n              <button class=\"like_btn\" bindtap=\"goConsult\" data-type=\"1\">去咨询\n              </button>\n              <view></view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"discount_wrap\" v-if=\"doctorInfo.showFree&&patientId!=undefined\">\n        <view class=\"flex-r  discount_bottom\"> \n          <image class=\"discount_picture \" :src=\"''+ cdnLink +'images/free.png'\" mode=\"aspectFit\"></image>\n          <view> \n            <view class=\"famous-title flex-r align-c free\"> \n              <view class=\"famous-title\">免费开药\n              </view>\n              <view class=\"discount_price  discount_price_space \" style=\"margin-bottom:0\">\n            免费\n              </view>\n            </view>\n            <view class=\"flex-r\">  \n              <view>\n            选择购药药品，提交购药申请后免费开药\n          \n              </view>\n              <button class=\"like_btn\" bindtap=\"goConsult\" data-type=\"2\">去开药\n              </button>\n              <view></view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"upload_wrap\" v-if=\"doctorInfo.showUploadInquiry&&patientId!=undefined\">  \n        <view v-if=\"doctorInfo.imageAuditStatus==0\" :style=\"{flex:1,color:doctorInfo.imageAuditStatus==0?'#111334':''}\">\n      {{doctorInfo.imageAuditStatus==0?\"上传复诊处方，赠送2元购药红包\":\"\"}}\n    \n        </view>\n        <view v-if=\"doctorInfo.imageAuditStatus==3\">\n      {{doctorInfo.imageAuditStatus==3?\"复诊处方审核不通过，请重新上传，赠送2元购药红包\":\"\"}}\n        </view>\n        <button class=\"like_btn\" bindtap=\"changeUploader\" style=\"margin-left:36rpx\">{{doctorInfo.imageAuditStatus==0?'上传处方':'重新上传'}}\n        </button>\n      </view>\n    </view>\n    <view slot=\"desc\" class=\"ad-dialog ad_box\" v-if=\"reportDialog&&reportData.couponList.length\">  \n      <image :src=\"''+ cdnLink +'images/coupon_headers.png'\" style=\"width:100%;height:220rpx\"></image>\n      <view class=\"couponbg\">  \n        <view class=\"couponMainTitle\">\n      {{reportData.couponMainTitle}}\n    \n        </view>\n        <view class=\"couponSecondaryTitle\"> {{reportData.couponSecondaryTitle}}\n        </view>\n        <view class=\"couponsWrap\">\" wx:for=\"{{ reportData.couponList }}\"\n        style=\"background: {{ 'url(' + cdnLink + '/images/coupon.png) no-repeat' }};background-size: 100%;\">\n        \n          <view class=\"flex-r \"> \n            <view class=\"couponsItem-left\">  \n              <view class=\"couponsItem-top\"> \n                <view class=\"icon\">\n                {{item.couponDiscountWayStr}}\n              \n                </view>\n                <text class=\"couponsItem-name\"> {{item.couponName}}\n                </text>\n              </view>\n              <view class=\"couponsItem-use\">  \n                <view class=\"text\" v-if=\"item.couponDiscountWay == 3\">下单立减\n                </view>\n                <view class=\"text\" v-else-if=\"item.couponUseLimit > 0\">满{{ item.couponUseLimit }}元可用\n                </view>\n                <view class=\"text\" v-else>无门槛使用\n                </view>\n              </view>\n              <view class=\"couponsItem-more\"> \n                <text class=\"text\" v-if=\"item.receiveStatus == 2 || item.receiveStatus == 3 \">{{item.couponUseStartDate}} -\n                {{item.couponUseEndDate}}\n                </text>\n                <text class=\"text\" v-else>领取后{{item.couponExpiryDay}}天有效\n                </text>\n              </view>\n            </view>\n            <view class=\"couponsItem-price\" style=\"width:160rpx\"> \n              <view class=\"price\" v-if=\"item.couponDiscountWay == 2\">{{item.couponDiscountFactorStr}}\n              \n                <text class=\"symbol\" style=\"margin-left:2rpx;\">折\n                </text>\n              </view>\n              <view class=\"price\" v-else>{{ item.couponCash }}\n            \n                <text class=\"symbol\" style=\"margin-right:2rpx;\">¥\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view style=\"height:20rpx\"></view>\n    </view>\n    <image src=\"../../../../images/close_alert.png\" class=\"close_img\" bindtap=\"windowClose\" data-name=\"ad\"></image>\n  </view>"},"convertDir/pages/famousDoctors/page/patientReports/patientReports":{"js":"import {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2, throttle\n} from '../../../../utils/util';\nconst app = getApp();\nconst apiUrl = {\n  getDoctorInfo: 'api/doctor/query/detail', // 顶部医生信息\n  getPatientList: 'api/userPatient/patientList', // 查询患者列表信息\n  registerInfo: 'api/userPatient/register' // 立即报到提交\n}\n\nexport default {\n\n  data: function() {\n    return {\n      windowHeight: Taro.getSystemInfoSync().windowHeight, // 屏幕高度\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      doctorId: '', // 医生ID\n      doctorInfo: null, // 医生信息\n      patientInfo: {}, // 新建患者信息\n      patientInfoList: [], // 患者列表信息\n      choosePatient: {}, // 选择的患者信息\n      isInfoFinish: false, // 信息是否填全\n      isRelation: false, // 是否报到\n      createInquiryTime: null,\n      setToday: '' // 当天时间\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.doctorId) {\n      this.setData({\n        doctorId: options.doctorId\n      })\n    }\n    // this.setData({\n    //   // doctorId: options.doctorId\n    //   doctorId: '004d8737f3e641609abbf9be6170de89'\n    // })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.getDoctorInfo()\n    this.getPatientList()\n  },\n  // 获取当前日期\n  getDate() {\n    let now = new Date();\n    let year = now.getFullYear(); //得到年份\n    let month = now.getMonth();//得到月份\n    let date = now.getDate();//得到日期\n    month = month + 1;\n    if (month < 10) month = \"0\" + month;\n    if (date < 10) date = \"0\" + date;\n    let time = ''\n    time = year + \"-\" + month + \"-\" + date;\n    this.data.choosePatient.clinicTime = time\n    this.setData({\n      setToday: time,\n      choosePatient: this.data.choosePatient,\n      isInfoFinish: true\n    })\n  },\n  // 获取医生信息\n  getDoctorInfo() {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    let params = {\n      doctorId: this.data.doctorId,\n      patientId: ''\n    }\n\n    ajax('post', apiUrl.getDoctorInfo, params, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result) {\n          this.setData({\n            doctorInfo: res.data.result.doctorDetai\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  // 查询患者列表信息\n  getPatientList() {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    ajax('post', apiUrl.getPatientList, {doctorId: this.data.doctorId}, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result && res.data.result.length) {\n          res.data.result[0].isActive = true\n          this.setData({\n            patientInfoList: res.data.result,\n            choosePatient: res.data.result[0],\n            isRelation: res.data.result[0].isRelation\n          })\n          this.getDate()\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  // 选择患者\n  choosePatient(e) {\n    let patientItem = e.currentTarget.dataset.item\n    let index = this.data.patientInfoList.findIndex(item => item.patientId == patientItem.patientId)\n    this.data.patientInfoList.forEach((item, key) => {\n      item.patientId === patientItem.patientId ? item.isActive = true :  item.isActive = false\n    })\n    this.setData({\n      patientInfoList: this.data.patientInfoList,\n      choosePatient: this.data.patientInfoList[index],\n      isRelation: this.data.patientInfoList[index].isRelation\n    })\n    console.log('.choosePatient', this.data.choosePatient)\n    this.getDate()\n  },\n  // 添加患者\n  addPatient() {\n    console.log('.....', this.data.patientInfoList.length)\n    if (this.data.patientInfoList.length == 10) {\n      Taro.showToast({\n        title: '添加患者不得超过10个',\n        icon: 'none'\n      })\n      return false\n    }\n    Taro.navigateTo({\n      url: `/pages/famousDoctors/page/addPatient/addPatient?doctorId=${this.data.doctorId}`\n    })\n  },\n  // 选择时间\n  bindDateChange(e) {\n    this.data.choosePatient.clinicTime = e.detail.value\n    this.setData({\n      choosePatient: this.data.choosePatient\n    })\n    if (e.detail.value) {\n      this.setData({\n        isInfoFinish: true\n      })\n    }\n  },\n  // 保存\n  saveInfo(){\n    if (new Date().getTime() - this.data.createInquiryTime < 3000) {\n      return false;\n    }\n    this.data.createInquiryTime = new Date().getTime();\n    if (!this.data.isRelation && this.data.patientInfoList.length) {\n      if (!this.data.choosePatient.clinicTime) {\n        Taro.showToast({\n          title: '您还没有选择就诊时间，快去完善信息吧~',\n          icon: 'none',\n          duration: 2000\n        })\n        return false\n      }\n      this.registerInfo()\n    } else if (!this.data.patientInfoList.length){\n      let toastText = ''\n      if(!this.data.patientInfo.name) {\n        toastText = '您还没有填写有效的姓名，快去完善信息吧~'\n      } else if (!this.data.patientInfo.age) {\n        toastText = '您还没有选择出生日期，快去完善信息吧~'\n      } else if (!this.data.patientInfo.date) {\n        toastText = '您还没有选择就诊时间，快去完善信息吧~'\n      }\n      if (toastText) {\n        Taro.showToast({\n          title: toastText,\n          icon: 'none',\n          duration: 2000\n        })\n        return false\n      }\n      this.registerInfo()\n    }else {\n      Taro.navigateTo({\n        url: `/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${this.data.doctorId}&patientId=${this.data.choosePatient.patientId}`\n      })\n    }\n  },\n  // 子组件传信息给父组件\n  getPatientInfo(e) {\n    this.setData({\n      patientInfo: e.detail\n    })\n    if (e.detail.name != '' && e.detail.age != '' && e.detail.date != '') {\n      this.setData({\n        isInfoFinish: 1\n      })\n    } else {\n      this.setData({\n        isInfoFinish: 0\n      })\n    }\n  },\n  // 立即报到接口\n  registerInfo() {\n    // 有患者\n    let params\n    if (this.data.patientInfoList.length) {\n      params = {\n        doctorId: this.data.doctorId,\n        patientId: this.data.choosePatient.patientId,\n        patientName: this.data.choosePatient.patientName,\n        patientSex: this.data.choosePatient.patientSex,\n        patientAge: this.data.choosePatient.patientAge,\n        clinicTime: this.data.choosePatient.clinicTime,\n      }\n    } else {\n      params = {\n        doctorId: this.data.doctorId,\n        patientId: '',\n        patientName: this.data.patientInfo.name,\n        patientSex: this.data.patientInfo.sex,\n        patientAge: this.data.patientInfo.age,\n        clinicTime: this.data.patientInfo.date,\n      }\n    }\n    ajax2('post', apiUrl.registerInfo, params,res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        // 报到成功\n        Taro.showToast({\n          title: '报到成功',\n          duration: 3000,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.navigateTo({\n            url: `/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${this.data.doctorId}&reportStatus=1&patientId=${res.data.result}`\n          })\n        }, 3000)\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器异常请重试',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  }\n};","json":{"patient-info":"../../component/patientInfo/patientInfo"},"wxss":".patient-reports-box{\n    background: #fff;\n    position: relative;\n    padding-bottom: 60rpx;\n}\n.patient-reports-header{\n    height: 290rpx;\n    font-size: 28rpx;\n    color: #111334;\n    padding: 54rpx 24rpx 24rpx 24rpx;\n    background: #fff;\n}\n.patient-reports-header-name{\n    font-size: 40rpx;\n    margin-right: 12rpx;\n}\n.patient-reports-header-img{\n    width: 150rpx;\n    height: 150rpx;\n    border-radius: 50%;\n    position: absolute;\n    top: 26rpx;\n    right: 29rpx;\n}\n.patient-reports-header-star{\n    width: 104rpx;\n    height: 32rpx;\n    line-height: 32rpx;\n    background: linear-gradient(138deg,#ffb02b 15%, #ff854c 83%);\n    border-radius: 4rpx;\n    box-shadow: 0rpx 4rpx 8rpx 0rpx #ffdcbf;\n    font-size: 22rpx;\n    color: #fff;\n    text-align: center;\n    position: absolute;\n    top: 155rpx;\n    right: 52rpx;\n}\n.patient-reports-header >view:first-child, .patient-reports-header >view:nth-child(2){\n    display: flex;\n    align-items: center;\n    margin-bottom: 16rpx;\n}\n.patient-reports-header-des{\n    font-size: 28rpx;\n    color: #666883;\n    margin-top: 62rpx;\n}\n.patient-reports-tips{\n    padding: 16rpx 24rpx;\n    font-size: 24rpx;\n    color: #666883;\n    background: #f5f6fa;\n}\n.patient-reports-btn{\n    width: 100%;\n    height: 151rpx;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    z-index: 30;\n    background: #fff;\n}\n.patient-reports-btn >view{\n    width: 686rpx;\n    height: 96rpx;\n    line-height: 96rpx;\n    text-align: center;\n    border-radius: 48rpx;\n    font-size: 32rpx;\n    color: #fff;\n    margin: auto;\n}\n.patient-reports-btn .grey{\n    background: #c6cad4;\n}\n.patient-reports-btn .green{\n    background: #00b955;\n}\n/*选择患者*/\n.patient-reports-choose{\n    padding: 0 24rpx;\n    margin-top: 10rpx;\n    margin-bottom: 15rpx;\n}\n.patient-reports-choose .header{\n    height: 93rpx;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.patient-reports-choose .header >view:first-child{\n    font-size: 32rpx;\n    color: #111734;\n    font-weight: 500;\n    flex: 1;\n}\n.patient-reports-choose .header >view:nth-child(2){\n    font-size: 40rpx;\n    color: #00b955;\n    margin-bottom: 9rpx;\n    margin-right: 5rpx;\n}\n.patient-reports-choose .header >view:last-child{\n    font-size: 28rpx;\n    color: #00b955;\n}\n.patient-reports-choose .info{\n    display: flex;\n    overflow-x: scroll;\n    white-space: nowrap;\n}\n.patient-reports-choose .info >view{\n    width: 202rpx;\n    height: 144rpx;\n    border-radius: 13rpx;\n    position: relative;\n    padding: 0 24rpx;\n    margin-bottom: 12rpx;\n    flex-shrink: 0;\n    margin-right: 12rpx;\n}\n.patient-reports-choose .info .label{\n    width: 82rpx;\n    height: 32rpx;\n    border-radius: 0rpx;\n    border-top-left-radius:8rpx;\n    border-bottom-right-radius:8rpx;\n    position: absolute;\n    left: 0;\n    top: 0;\n    font-size: 22rpx;\n    line-height: 32rpx;\n    text-align: center;\n}\n.label-green{\n    background: #00b955;\n    color: #fff;\n}\n.label-grey{\n    background: #efeff2;\n    color: #9d9fb8;\n}\n.patient-reports-choose .info .name{\n    font-size: 32rpx;\n    margin-top: 48rpx;\n    margin-bottom: 7rpx;\n}\n.patient-reports-choose .info .sex{\n    font-size: 24rpx;\n    color: #9d9fb8;\n}\n.patient-reports-choose .info >view >image{\n    width: 30rpx;\n    height: 30rpx;\n    position: absolute;\n    top: 12rpx;\n    right: 12rpx;\n}\n.choose-active{\n    background: rgba(0,185,85,0.08);\n    border: 1rpx solid #00b955;\n}\n.no-choose-active{\n    background: rgba(255,255,255,1);\n    border: 1rpx solid #9d9fb8;\n}\n.patient-reports-info{\n    padding: 0 32rpx;\n}\n.red{\n    color: #F65455;\n}\n.grey{\n    color: #9AA0B5;\n}\n.patient-reports-info {\n    display: flex;\n    height: 96rpx;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 32rpx;\n    color: #111734;\n}\n.patient-reports-info >view:nth-child(2){\n    flex: 1;\n}\n.age-group,.section{\n    display: flex;\n    align-items: center;\n    width: 458rpx;\n    height: 96rpx;\n}\n.picker{\n    width: 458rpx;\n}\n.bold{\n    font-weight: bold;\n}","wxml":"\n  <view class=\"patientReports-auto-container\"> \n    <navBar title-text=\"患者报到\"></navBar>\n    <view class=\"patient-reports-box\" :style=\"{height: windowHeight - navBarHeight px}\">     \n      <view class=\"patient-reports-header\" v-if=\"doctorInfo\">   \n        <view> \n          <text class=\"patient-reports-header-name bold\">{{doctorInfo.name}}\n          </text>\n          <text v-if=\"doctorInfo.titleName != null\" class=\"patient-reports-header-job bold\">{{doctorInfo.titleName}}\n          </text>\n        </view>\n        <view> \n          <text style=\"margin-right: 12rpx;\" class=\"bold\">{{doctorInfo.workInsName}}\n          </text>\n          <text class=\"bold\">{{doctorInfo.docDeptName}}\n          </text>\n        </view>\n        <view class=\"patient-reports-header-des\">\n            欢迎来到我的线上门诊，为了更好的获取帮助，请耐心填写病情信息，关于疾病、用药、康复等问题可向我咨询，我会尽快解答。\n        \n        </view>\n        <view> \n          <image class=\"patient-reports-header-img\" :src=\"doctorInfo.headPortrait ? doctorInfo.headPortrait : '../../images/icon-doctor.png'\"></image>\n          <view class=\"patient-reports-header-star\">{{doctorInfo.headPortraitSign}}\n          </view>\n        </view>\n      </view>\n      <view class=\"patient-reports-tips\" v-if=\"doctorInfo\">\n        提示：为了问诊和处方有效性，请您仔细填写个人信息，确保姓名和身份证信息填写无误\n    \n      </view>\n      <view class=\"patient-reports-choose\"> \n        <view class=\"header\">  \n          <view>选择患者\n          </view>\n          <view bindtap=\"addPatient\">+\n          </view>\n          <view bindtap=\"addPatient\">添加\n          </view>\n        </view>\n        <view class=\"info\">\n          <view v-if=\"patientInfoList.length\" v-for=\"(item, id) in patientInfoList\" :key=\"id\" :data-item=\" item \" bindtap=\"choosePatient\" :class=\"[(item.isActive ? 'choose-active' : 'no-choose-active')]\">  \n            <view :class=\"[label,(item.isRelation ? 'label-grey' : 'label-green')]\">{{item.isRelation ? '已报到' : '未报到'}}\n            </view>\n            <view class=\"name\">{{item.patientName}}\n            </view>\n            <view class=\"sex\">{{item.patientSex == 1 ? '男':'女'}} {{item.patientAge}}岁\n            </view>\n          </view>\n        </view>\n      </view>\n      <patient-info v-if=\"!patientInfoList.length\" bind:getPatientInfo=\"getPatientInfo\"></patient-info>\n      <view class=\"patient-reports-info\" v-if=\"!isRelation && patientInfoList.length != 0\">  \n        <view class=\"red\">*\n        </view>\n        <view>就诊日期\n        </view>\n        <view class=\"section\">\n          <picker :end=\"setToday\" mode=\"date\" :value=\"choosePatient.clinicTime\" bindchange=\"bindDateChange\"> \n            <view v-if=\"!choosePatient.clinicTime\">{{setToday}}\n            </view>\n            <view v-if=\"choosePatient.clinicTime\" class=\"picker\">\n                    {{choosePatient.clinicTime}}\n                \n            </view>\n          </picker>\n        </view>\n      </view>\n      <view class=\"patient-reports-btn\">\n        <view :class=\"[( isRelation || isInfoFinish ? 'green': 'grey')]\" bindtap=\"saveInfo\">\n            {{isRelation ? '立即咨询' : '立即报到'}}\n        \n        </view>\n      </view>\n    </view>\n  </view>"},"convertDir/pages/followingDrugstore/followingDrugstore":{"json":{"medList":"../../../component/medList/medList","missingData-view":"../../../component/missingData/missingData"},"js":"// pages/followingDrugstore/followingDrugstore.js\nimport {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      followingDrugstoreList: [],\n      pageNo: 1, // 页码\n      totalSize: 0, // 总条数\n      url_link: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.data.pageNo = 1;\n    this.getFollowingDrugstore();\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n    Taro.pageScrollTo({\n      scrollTop: 0\n    })\n    this.getFollowingDrugstore();\n    Taro.stopPullDownRefresh() //停止下拉刷新\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if (this.data.followingDrugstoreList.length < this.data.totalSize) {\n      this.setData({\n        pageNo: this.data.pageNo + 1\n      })\n      this.getFollowingDrugstore(true);\n    } else {\n      Taro.showToast({\n        title: '没有更多',\n        icon: 'none'\n      })\n    }\n  },\n  // 获取关注药店list\n  getFollowingDrugstore(pageType) {\n    Taro.showLoading({\n      title: '加载中',\n    });\n\n    ajax('get', 'miniapp/miniappDrugstore/getDrugstoreAttentionList', {\n      pageNo: this.data.pageNo,\n      pageSize: 10,\n      longitude: getApp().address_data.longitude,\n      latitude: getApp().address_data.latitude\n    }, (res) => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        // 分页\n        if(pageType) {\n          this.setData({\n            followingDrugstoreList: this.data.followingDrugstoreList.concat(res.data.result.list)\n          })\n        } else {\n          this.setData({\n            followingDrugstoreList: res.data.result.list,\n            totalSize: res.data.result.total\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, (res) => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  }\n};","wxss":"/* pages/followingDrugstore/followingDrugstore.wxss */\npage {\n  background-color: #fff;\n}\n.follow-drugstore-list {\n  padding: 0 24rpx;\n}","wxml":"\n  <view class=\"followingDrugstore-auto-container\"> \n    <navBar title-text=\"我关注的店铺\"></navBar>\n    <view class=\"follow-drugstore-list\"> \n      <medList v-if=\" followingDrugstoreList.length \" :lists=\" followingDrugstoreList \"></medList>\n      <missingData-view v-else zhi=\"new1\" textval=\"暂无关注店铺\" textval2=\"关注店铺，发现更多精彩内容\" :imageUrl=\" url_link + 'images/empty-store.png' \"></missingData-view>\n    </view>\n  </view>"},"convertDir/pages/govActivity/govActivity":{"js":"// pages/govActivity/govActivity.js\nimport {\n  getH5AbsoluteUrl,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      link: '',\n      url_link: cdnStaticResourceUrl,\n    };\n  },\n  onLoad: function (options) {\n    getApp().globalData.globalSource = 'external_gov_wh';\n    this.setData({\n      link: getH5AbsoluteUrl(`?_t=${new Date().getTime()}/#/wuhanGovActivity`)\n    })\n    console.log('webview实际访问url: ', this.data.link)\n  },\n  onShareAppMessage: function () {\n    let shareObj = {};\n    shareObj = {\n      title: '武汉市防疫物资预约平台',\n      path: `/pages/govActivity/govActivity`,\n      imageUrl: this.data.url_link + 'images/active_share.png'\n    }\n    console.log(shareObj)\n    return shareObj;\n  }\n};","json":{},"wxml":"\n  <view class=\"govActivity-auto-container\">\n    <web-view :src=\"link\" :style=\"{top:navBarHeightpx}\"></web-view>\n  </view>","wxss":"/* pages/govActivity/govActivity.wxss */"},"convertDir/pages/hospital/cityChoice/cityChoice":{"js":"//接口\nconst apiUrl = {\n  getClassificationUrl: 'lotusleaf/hospital/common/querySupportArea',//城市列表接口\n}\nconst app = getApp();\nlet cxdwType = true;\nimport {\n  url,\n  ajax,\n  ajax2,\n  indexGetLocation,\n  open_wechatMap,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      dw_type:false,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      searchType: false,\n      address_data: {},\n      location_data:{},\n      list: [],\n      interType: false,\n      isType:false,\n      windowHeight: 0,\n      tabbarHeight: null,\n      identificationId: '',\n      tabBarHeight: 0,\n      navBarHeight: app.globalData.navBarHeight,\n      goodsArea: [],\n      goodsList: [],\n      defaultType: false,\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    let data = options.address_data;\n    console.log(data)\n    this.setData({\n      address_data: JSON.parse(data.replace(/ASCII38/, '&')),\n    })\n    let address_data = this.data.address_data\n    if (!getApp().hospital_address.latitude) {\n      this.setData({\n        interType: true\n      })\n      return false;\n    }\n    let that = this;\n    Taro.getStorage({\n      key: 'tabbarHeight',\n      success(res) {\n        that.setData({\n          tabbarHeight: res.data || 82\n        })\n      }\n    })\n\n    // 计算页面tab高度\n    let info = Taro.getSystemInfoSync();\n    this.setData({\n      windowHeight: info.screenHeight,\n      tabBarHeight: info.screenHeight - info.screenHeight\n    })\n  },\n  // 查询 公用请求的type_val为查询类型  区分不同请求状态\n  load_list(address_data) {\n    Taro.showLoading({\n      title: '加载中...',\n    })\n    // type_val：1关键字查询数据\n    ajax2('post', 'lotusleaf/hospital/common/queryCityByLatLong', {\n      latitude: address_data.latitude,\n      longitude: address_data.longitude\n    }, (res) => {\n      if (res.data.code == 0) {\n        this.setData({\n          interType: false,\n          dw_type: false,\n          [\"address_data.address\"]: res.data.result.adress,\n          [\"address_data.city\"]: res.data.result.cityName,\n          [\"address_data.cityCode\"]: res.data.result.cityCode,\n        })\n        app.hospital_address = this.data.location_data.latitude ? this.data.location_data : this.data.address_data\n        setTimeout(function () {\n          cxdwType = true;\n          Taro.hideLoading();\n        }, 300);\n      }else{\n        cxdwType = true;\n        Taro.hideLoading();\n      }\n    }, (res) => {\n      this.setData({\n        address_data: {},\n        list: [],\n        interType: true,\n        dw_type: false\n      })\n      setTimeout(function () {\n        cxdwType = true;\n        Taro.hideLoading();\n      }, 300);\n    })\n  },\n  // 重新定位\n  reLocation() {\n    if (cxdwType){\n      Taro.showLoading({\n        title: '加载中',\n      })\n      this.setData({\n        dw_type:true,\n        isType:true\n      })\n      cxdwType = false;\n      this.getLocation();\n    }\n  },\n  getLocation() {\n    console.log(app.address_data)\n    // 获取地址\n    indexGetLocation((longitude, latitude) => {\n      if (!longitude) {\n        this.setData({\n          address_data: {},\n          list: [],\n          interType: true,\n          dw_type:false,\n        })\n        setTimeout(function(){\n          cxdwType = true;\n          Taro.hideLoading();\n        },300);\n        return false\n      }\n      this.setData({\n        [\"address_data.latitude\"]: latitude,\n        [\"address_data.longitude\"]: longitude,\n      })\n      this.load_list(this.data.address_data)\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function() {\n    if (this.data.location_data.latitude){\n      this.data.address_data = this.data.location_data;\n      this.setData({\n        searchType:false\n      })\n    }\n    //获取城市列表\n    this.getClassification();\n  },\n  //获取城市列表\n  getClassification(e) {\n    let that = this;\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax2('post', apiUrl.getClassificationUrl, {}, res => {\n      Taro.hideLoading({})\n      if (res.data.code == 0) {\n        let data = res.data.result;\n        const totalArr = data.filter(item => item);\n        this.setData({\n          goodsArea: totalArr,\n          identificationId: totalArr[0] ? totalArr[0].id : '',\n          goodsList: totalArr[0] ? totalArr[0].subAreaList : [],\n          defaultType: totalArr.length > 0 ? false : true\n        })\n\n      } else {\n        that.toast(res.data.msg);\n      }\n    }, function () {\n      that.toast('请求失败');\n    })\n  },\n  //返回首页\n  toIndex(e) {\n    let data = e.currentTarget.dataset.item;\n    getApp().hospital_address.latitude = data.latitude;\n    getApp().hospital_address.longitude = data.longitude;\n    getApp().hospital_address.cityCode = ''\n    Taro.navigateTo({\n      url: `/pages/hospital/hospitalIndex/hospitalIndex`\n    })\n  }\n};\n","wxml":"\n  <view class=\"cityChoice-auto-container\"> \n    <navBar title-text=\"选择地区\" :showCapsule=\"true\"></navBar>\n    <view :class=\"[(isDjk?'djk':'')]\">\n      <block v-if=\"searchType == false\">  \n        <view class=\"address-box\">\n          <view class=\"address-box__current\">  \n            <view class=\"address-box__name\" v-if=\"dw_type\">定位中...\n              <image src=\"../../../images/location.png\"></image>\n            </view>\n            <view class=\"address-box__name\" v-else>{{ address_data.adress ? address_data.adress : '没能获取到您的定位' }}\n              <image src=\"../../../images/location.png\"></image>\n            </view>\n            <view class=\"address-box__re-location theme-text\" bindtap=\"reLocation\"> \n              <image src=\"../../../images/location-right.png\"></image>\n              <view>重新定位\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"classifyBox\" :style=\"{height:windowHeight - (navBarHeight + tabBarHeight + 54)px}\">\n          <view class=\"content\" style=\"height:100%;\"> \n            <view class=\"left\">\n              <scroll-view scroll-y=\"true\" :style=\"{padding-bottom:tabbarHeightpx}\" bindscrolltoupper=\"upper\" bindscrolltolower=\"lower\" bindscroll=\"scroll\">\n                <view :class=\"[item,( identificationId == item.id ? 'active' : '' )]\" :data-item=\" item \" v-for=\"(item, key) in  goodsArea \" :key=\"key\" bindtap=\"switchArea\">\n              {{item.name}}\n            \n                </view>\n              </scroll-view>\n            </view>\n            <view class=\"right\">\n              <scroll-view scroll-y=\"true\" :style=\"{padding-bottom:tabbarHeightpx}\" bindscrolltoupper=\"upper\" bindscrolltolower=\"lower\" bindscroll=\"scroll\">\n                <view class=\"scroll\"> \n                  <view class=\"right_list\" v-for=\"(item, key) in  goodsList \" :key=\"key\" :data-item=\"item\" data-type=\"1\" bindtap=\"toIndex\" v-if=\" index < 1 \">\n                    <view class=\"right_text active\">{{ item.name }}\n                    </view>\n                  </view>\n                  <view class=\"notOpen-box\"> \n                    <image :src=\" cdnLink + 'images/not-open.png' \"></image>\n                    <view class=\"notOpen-tip\">其他城市暂无服务，敬请期待\n                    </view>\n                  </view>\n                </view>\n              </scroll-view>\n            </view>\n          </view>\n        </view>\n        <block v-if=\" interType \">\n          <missingData-view zhi=\"new1\" textval=\"定位失败，请开启定位、网络、再重试\" :imageUrl=\" url_link + 'images/empty-network.png' \"></missingData-view>\n        </block>\n      </block>\n    </view>\n  </view>","json":{"missingData-view":"../../../component/missingData/missingData"},"wxss":"/* pages/note/locationAddress/locationAddress.wxss */\n@import '../../../common/tableView.wxss';\n\npage {\n  background-color: #fff;\n}\n\n/* 重新定位 */\n\n.curAddress_title {\n  height: 58rpx;\n  line-height: 58rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 23rpx;\n}\n\n.curAddress_name_view {\n  position: relative;\n  height: 90rpx;\n  display: flex;\n  padding: 0 23rpx;\n  flex-direction: row;\n  background-color: #fff;\n}\n\n.curAddress_name {\n  flex: 1;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.curAddress_change {\n  width: 170rpx;\n  height: 90rpx;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: 25rpx;\n}\n\n.curAddress_change image {\n  width: 45rpx;\n  height: 45rpx;\n  margin-right: 5rpx;\n}\n\n.la-nv-list .curAddress_name_view {\n  border-bottom: 1px solid rgba(245, 247, 248, 1);\n}\n\n/* 搜索弹出 */\n\n.la-search-list {\n  width: 100%;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n}\n\n.curAddress_juli {\n  font-size: 26rpx;\n  color: #999;\n}\n\n.la-search-list .curAddress_name_view {\n  height: auto;\n  display: block;\n  padding-bottom: 20rpx;\n  border-bottom: 1px solid rgba(245, 247, 248, 1);\n}\n\n.la-header-right .la-header-right-img {\n  width: 36rpx;\n  position: absolute;\n  right: 4rpx;\n  top: 3rpx;\n  z-index: 9999;\n  display: block;\n  padding: 20rpx;\n}\n\n.back-color {\n  background-color: #fff;\n}\n\n.address-box {\n  /* border-bottom: 20rpx solid #f5f5f5; */\n  /* margin-bottom: 20rpx; */\n  background: #ffffff;\n  padding: 0rpx 16rpx 0 24rpx;\n  position: relative;\n  overflow: hidden;\n  height: 95rpx;\n}\n\n.address-box:last-child {\n  border: 0;\n}\n\n.address-box__current {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  align-content: center;\n}\n\n.address-box__name {\n  font-size: 32rpx;\n  color: #111334;\n  font-weight: bold;\n  /* padding: 20rpx 0; */\n  display: flex;\n  align-items: center;\n}\n.address-box__name image{\n  width: 31rpx;\n  height: 36rpx;\n  margin-right: 5rpx;\n}\n\n.address-box__list {\n  padding-bottom: 20rpx;\n  margin-left: 40rpx;\n  border-bottom: 1rpx solid #F5F5F5;\n}\n\n.address-box__detail {\n  font-size: 24rpx;\n  color: #666666;\n  margin-top: -8rpx;\n}\n\n.address-box__btns {\n  position: absolute;\n  bottom: 0;\n  left: 60rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  width: 100%;\n  color: #666666;\n  font-size: 28rpx;\n  border-top: 1rpx solid #F5F5F5;\n  display: flex;\n  align-items: center;\n}\n.address-box__btns image {\n  width: 14rpx;\n  height: 22rpx;\n  transform: rotate(90deg);\n  margin-left: 10rpx;\n  opacity: 0.8;\n}\n.address-box__btns .up {\n  transform: rotate(-90deg);\n}\n\n.address-box__re-location {\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n  flex-shrink: 0;\n}\n\n.address-box__re-location image {\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 10rpx;\n}\n\n.address-box__nearby-list .address-box__name {\n  margin-left: 40rpx;\n  border-bottom: 1rpx solid #F5F5F5;\n}\n\n.content {\n  display: flex;\n  width: 100%;\n  /* margin-top: 20rpx; */\n  height: 100%;\n}\n\n.content .left {\n  width: 240rpx;\n  background: #f5f6fa;\n  font-size: 28rpx;\n  overflow: scroll;\n  flex-shrink: 0;\n  -webkit-overflow-scrolling: touch;\n}\n.content .right {\n  width: calc(100% - 170rpx);\n  overflow: scroll;\n  \n}\n.scroll{\n  display: flex;\n  flex-flow: row wrap;\n  align-content: flex-start;   \n}\n.content .left .item {\n  color: #666883;\n  padding: 20rpx 0 20rpx 24rpx;\n  position: relative;\n  text-align: left;\n  font-size: 28rpx;\n}\n.content .left .active {\n  background: #fff;\n  color: #00b955;\n  font-weight: bold;\n  font-size: 28rpx;\n  position: relative;\n}\n\n/* .content .left .active::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 6rpx;\n  height: 24rpx;\n  background: #00b955;\n  border-radius: 0 4rpx 4rpx 0;\n  margin-top: -12rpx;\n} */\n\n.right_list{\n  width: 480rpx;\n  height: auto;\n  margin-left: 42rpx;\n  margin-top: 20rpx;\n  margin-bottom: 20rpx;\n  position: relative;\n}\n.right_list .active{\n  color: #00b955;\n  font-weight: bold;\n}\n\n/* .right_list::before {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 0;\n  width: 140rpx;\n  height: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin-left: -70rpx;\n} */\n\n/* .right_img{\n  display: block;\n  height: 140rpx;\n  width: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin: auto;\n} */\n.right_text{\n  font-size: 28rpx;\n  text-align: left;\n  color: #111334;\n  /* margin-top: 13rpx; */\n}\n.classifyBox{\n  height: 100vh;\n}\n/* 城市暂未开通 */\n.notOpen-box{\n  width:100%;\n  text-align: center;\n  margin-top: 230rpx;\n}\n.notOpen-box image{\n  width: 371rpx;\n  height: 234rpx;\n}\n.notOpen-tip{\n  color: #9d9fb8;\n  font-size: 24rpx;\n  margin-top: 20rpx;\n}"},"convertDir/pages/hospital/departmentDetail/departmentDetail":{"js":"const app = getApp();\nlet startTime, endTime;\nimport {\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      specialArea: [],//擅长疾病\n      specialData:'',//全部疾病\n      footerAlert: false,\n      proList: [], //医生列表\n      isAjaxing: false,\n      pageTitle: '科室名称',\n      id: null, //科室id\n      isMore:false,\n      showMore: false,\n      doctorPageVoList:[],\n      deparmentIntro: '',//科室简介\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    // 获取科室名称及id\n    if (options.name) {\n      this.setData({\n        pageTitle: options.name\n      })\n    }\n    if (options.id) {\n      this.setData({\n        id: options.id\n      })\n    }\n    //获取科室简介和擅长疾病\n    this.departmentDetail();\n    //获取科室专家\n    this.specialDoctor();\n  },\n  onShow: function() {\n    startTime = +new Date();\n    // 埋点：曝光事件\n    getApp().globalData.burySpotSDK.track('page_secondaryDepartmentInformentExpo');\n  },\n  // 科室简介更多\n  showMoreInfo(){\n    this.setData({\n      isMore: !this.data.isMore\n    })\n  },\n  // 获取科室简介和擅长疾病\n  departmentDetail() {\n    let that = this;\n    ajax2('post', 'lotusleaf/hospital/department/detail', {\n      id : this.data.id\n    }, res => {\n      if (res.data.code === 0) {\n        let data = res.data.result;\n        let goodAts = [],arr = [];\n        if (data.goodAt){\n          data.goodAt = data.goodAt.split(\"、\");\n          data.goodAt && data.goodAt.forEach((item) => {\n            if (!that.isNull(item)) {\n              goodAts.push(item)\n            }\n          })\n        }\n        let result = goodAts.length > 6 ? goodAts.slice(0, 6) : goodAts;//擅长疾病数据处理\n        this.setData({\n          specialData: goodAts,\n          specialArea: result,\n          deparmentIntro: data.introduction\n        })\n        if (this.data.deparmentIntro && this.data.deparmentIntro.length > 48) {\n          this.setData({\n            showMore: true\n          });\n        } else {\n          this.setData({\n            showMore: false\n          });\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, () => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  isNull(str){\n    if(str == \"\") return true;\n    var regu = \"^[ ]+$\";\n    var re = new RegExp(regu);\n    return re.test(str);\n  },\n  //获取科室专家\n  specialDoctor(){\n    ajax2('post', 'lotusleaf/hospital/doctor/queryDoctorListByParams', {\n      departmentId: this.data.id,\n      pageNum: 1,\n      pageSize: 10\n    }, res => {\n      if (res.data.code === 0) {\n        let data = res.data.result;\n        this.setData({\n          proList: data.list,\n          doctorPageVoList: data.list ? data.list.slice(0, 3) : []\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, () => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  //擅长疾病数据处理方法\n  handleDataProcessing(data) {\n    let result = [];\n    for (var i = 0; i < 6; i += 3) {\n      result.push(data.slice(i, i + 3));\n    }\n    return result;\n  },\n \n  // 搜索跳转\n  onSearch() {\n    // 搜索医生跳转\n    Taro.navigateTo({\n      url: \"/pages/hospital/doctorList/doctorList?source=2&type=search&id=\" + this.data.id\n    })\n  },\n  // 点击全部疾病\n  handleAllDisease(){\n    this.setData({\n      footerAlert: true\n    })\n  },\n  // 关闭蒙层\n  handleClose() {\n    this.setData({\n      footerAlert: false\n    })\n  },\n  // 全部专家\n  toDotorList(){\n    Taro.navigateTo({\n      url: \"/pages/hospital/doctorList/doctorList?source=2&type=all&id=\" + this.data.id\n    })\n  },\n  onHide: function () {\n    endTime = +new Date();\n    console.log(\"页面停留时间：\" + (endTime - startTime))\n    let stayTime = endTime - startTime;\n    // 页面停留时间数据上报\n    getApp().globalData.burySpotSDK.track('page_secondaryDepartmentInforment_remainTime')\n  },\n};","json":{"missingData-view":"../../../component/missingData/missingData","doctorList":"../../../component/doctorList/doctorList"},"wxml":"\n  <view class=\"departmentDetail-auto-container\"> \n    <view class=\"index_z\">\n      <navBar :title-text=\" pageTitle \" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view>   \n      <block>\n        <view class=\"search_contion\">\n          <view class=\"search_hearder\" bindtap=\"onSearch\"> \n            <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n            <input class=\"search_input\" placeholder=\"搜一搜医生\"></input>\n          </view>\n        </view>\n      </block>\n      <view class=\"wrap-content\">  \n        <view class=\"content-item\">  \n          <view class=\"content-title\">\n            <view class=\"content-title-left\">科室简介\n            </view>\n          </view>\n          <view :class=\"[content-intro,(isMore ? 'showMore' : '')]\" v-if=\"deparmentIntro\">{{deparmentIntro}}\n          </view>\n          <view v-if=\"deparmentIntro && showMore\" :class=\"[zhankai,(isMore ? 'rotateDeg' : '')]\" bindtap=\"showMoreInfo\">\n            <image src=\"../../../images/zhankai.png\"></image>\n          </view>\n        </view>\n        <view class=\"content-item\" v-if=\"specialData\"> \n          <view class=\"content-title\"> \n            <view class=\"content-title-left\">擅长疾病\n            </view>\n            <view class=\"content-title-right\" bindtap=\"handleAllDisease\" v-if=\" specialData.length > 6 \">全部疾病\n              <image src=\"../../../images/icon-arrow.png\"></image>\n            </view>\n          </view>\n          <view class=\"content-disease-box\" v-if=\"specialArea.length > 0\">\n            <view class=\"nav__class\">\n              <view class=\"nav__list\" v-for=\"(item, key) in  specialArea \" :key=\"key\" v-if=\"item\">{{item}}\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"content-item\" v-if=\"proList.length\"> \n          <view class=\"content-title\"> \n            <view class=\"content-title-left\">医院专家\n            </view>\n            <view class=\"content-title-right\" bindtap=\"toDotorList\">全部专家\n              <image src=\"../../../images/icon-arrow.png\"></image>\n            </view>\n          </view>\n          <doctorList :lists=\" doctorPageVoList \" type=\"2\"></doctorList>\n        </view>\n      </view>\n      <view class=\"footer_alert\" v-if=\"footerAlert\"> \n        <view class=\"footer_title\">\n\t\t\t擅长疾病\n      \n          <image src=\"../../../images/half-screen-dialog-close.png\" class=\"footer_right\" bindtap=\"handleClose\"></image>\n        </view>\n        <view class=\"footer_list\" v-if=\" specialData.length > 0 \">\n          <view class=\"nav__class\">\n            <view class=\"nav__list\" v-for=\"(item, key) in  specialData \" :key=\"key\">{{item}}\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"footer_alert_back\" v-if=\"footerAlert\" bindtap=\"handleClose\"></view>\n    </view>\n  </view>","wxss":".index_z {\n  position: relative;\n  z-index: 99999999;\n}\n\npage {\n  background: #f5f6fa;\n  height: 100%;\n}\n\n.search_contion {\n  /* padding: 20rpx 0; */\n  /* background-color: #FDFDFD; */\n  /* position: fixed; */\n  width: 100%;\n  z-index: 9;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  margin-top: 20rpx;\n  margin-bottom: 20rpx;\n}\n\n.search_hearder {\n  flex: 1;\n  height: 60rpx;\n  position: relative;\n  margin-left: 20rpx;\n  margin-right: 20rpx;\n  border-radius: 36rpx;\n  background: #ffffff;\n  overflow: hidden;\n}\n\n.search_input {\n  /* width: 500rpx; */\n  height: 60rpx;\n  font-size: 28rpx;\n  padding-left: 65rpx;\n  color: #9d9fb8;\n  background: #ffffff;\n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  margin: 16rpx 12rpx 16rpx 15rpx;\n}\n\n.search_clear {\n  top: 0;\n  width: 26rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 5rpx;\n  z-index: 10;\n  padding: 17rpx;\n}\n\n.search_btn {\n  color: #111334;\n  font-size: 28rpx;\n  width: 120rpx;\n  text-align: center;\n}\n\n.search_btn.gray {\n  color: #ccc;\n}\n\n.wrap-content{\n  padding:0 24rpx;\n  /* margin-top:40rpx; */\n}\n\n.search_kuai {\n  top: 0;\n  right: 0;\n  position: absolute;\n  height: 100%;\n  z-index: 9;\n  background: #f0f0f5;\n}\n/* 科室简介 */\n.content-item{\n  background: #ffffff;\n  font-size:24rpx;\n  color: #666883;\n  padding:20rpx 0rpx;\n  margin-bottom:20rpx;\n  border-radius: 12px;\n}\n.content-title{\n  /* margin-bottom:20rpx; */\n  display:flex;\n  justify-content: space-between;\n  /* position:relative; */\n  padding:0 24rpx;\n  align-items: center;\n}\n.content-title-left{\n  padding-left:16rpx;\n  color: #333333;\n  font-weight: 700;\n  font-size: 32rpx;\n  position: relative;\n}\n.content-title-left::before{\n  content: '';\n  height: 24rpx;\n  width:6rpx;\n  background: #00b955;\n  position: absolute;\n  left: 0rpx;\n  bottom: 8rpx;\n  border-radius:4rpx;\n}\n.content-title-right{\n  padding-left:16rpx;\n  color: #111334;\n  font-size: 24rpx;\n  line-height: 45rpx;\n}\n.content-title-right image{\n  width: 28rpx;\n  height: 28rpx;\n  position: relative;\n  top: 7rpx;\n}\n.content-intro{\n  line-height: 33rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  color: #666883;\n  padding:0 24rpx;\n  margin-top: 20rpx;\n}\n.showMore{\n  overflow:auto;\n  display: block;\n}\n.zhankai{\n  margin-top:10rpx;\n  text-align: center;\n}\n.zhankai image{\n  width: 20rpx;\n  height: 12rpx;\n}\n.rotateDeg image{\n  transform:rotate(180deg);\n  -ms-transform:rotate(180deg); \t/* IE 9 */\n  -moz-transform:rotate(180deg); \t/* Firefox */\n  -webkit-transform:rotate(180deg); /* Safari 和 Chrome */\n  -o-transform:rotate(180deg); \t/* Opera */\n}\n/* 擅长疾病 */\n.content-disease-box {\n  width: 100%;\n  padding: 20rpx 14rpx 0 14rpx;\n  box-sizing: border-box;\n}\n.nav__class {\n  /* display: flex; */\n  overflow:hidden;\n}\n\n.nav__list {\n  padding:10rpx 20rpx;\n  background: #f5f7f8;\n  border-radius: 30px;\n  box-sizing: border-box;\n  margin-right: 10rpx;\n  margin-left: 10rpx;\n  margin-bottom: 20rpx;\n  float:left;\n}\n/* 底部弹框 */\n.footer_alert_back{\n  height: 100%;\n  width: 100%;\n  background-color: #000;\n  opacity: 0.5;\n  position: fixed;\n  z-index: 10;\n  left: 0;\n  top: 0;\n}\n.footer_alert{\n  border-top-left-radius: 24px;\n  border-top-right-radius: 24px;\n  width: 100%;\n  background-color: #fff;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  /* padding-bottom: 30rpx; */\n  z-index: 99999;\n  max-height: 1000rpx;\n}\n.footer_title{\n  height: 100rpx;\n  line-height: 100rpx;\n  text-align: center;\n  font-weight: bold;\n  font-size: 36rpx;\n  color: #111334;\n  position:relative;\n}\n.footer_right{\n  position: absolute;\n  top:32rpx;\n  right:32rpx;\n  height:38rpx;\n  width:38rpx;\n}\n.footer_list{\n  max-height: 900rpx;\n  overflow-y: auto;\n  width: 100%;\n  padding: 24rpx 24rpx 0;\n}\n.footer_list .nav__class {\n  overflow:hidden;\n}\n.footer_list .nav__list{\n  /* width: 339rpx;\n  height: 169rpx;\n  padding: 26rpx 20rpx 23rpx 20rpx;\n  background: #f8fafd;\n  border-radius: 12px;\n  box-sizing: border-box;\n  margin-right: 23rpx;\n  margin-bottom:20rpx;\n  float: left; */\n  padding:10rpx 20rpx;\n  background: #f5f7f8;\n  border-radius: 30px;\n  box-sizing: border-box;\n  margin-right: 10rpx;\n  margin-left: 10rpx;\n  margin-bottom: 20rpx;\n  float:left;\n  font-size:24rpx;\n}\n.footer_list .nav__list:nth-child(2n){\n  /* margin-right: 0; */\n}"},"convertDir/pages/hospital/departmentList/departmentList":{"js":"//接口\nconst apiUrl = {\n  getClassificationUrl:'product/mini/common/v1/operateCategoryList',//搜索接口\n}\nconst app = getApp();\nlet startTime, endTime;\nimport {\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      defaultType:false,\n      url_link: cdnStaticResourceUrl,\n      windowHeight:0,\n      tabbarHeight:null,\n      identificationId: '',\n      tabBarHeight: 0,\n      navBarHeight: app.globalData.navBarHeight,\n      goodsArea: [],\n      goodsList: [],\n      hospitalInfo:{}  //医院信息\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let that = this;\n    let hospitalInfo = JSON.parse(options.hospitalInfo);\n    if (hospitalInfo) {\n      this.setData({\n        hospitalInfo: hospitalInfo\n      })\n    }\n    this.getHospitalDepartent();//获取医院科室\n    Taro.getStorage({\n      key: 'tabbarHeight',\n      success (res) {\n        that.setData({\n          tabbarHeight: res.data || 82\n        })\n      }\n    })\n\n    // 计算页面tab高度\n    let info = Taro.getSystemInfoSync();\n    this.setData({\n      windowHeight: info.screenHeight,\n      tabBarHeight: info.screenHeight-info.screenHeight\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    startTime = +new Date();\n    // 埋点：曝光事件\n    getApp().globalData.burySpotSDK.track('page_hospitalDepartmentInformationExpo');\n  },\n  switchArea(e){//通过点击记录一级分类id标识\n    let item = e.currentTarget.dataset.item\n    this.setData({\n      identificationId: item.id,\n      goodsList: item.subDepartments\n    })\n  },\n  /**\n   * \n   * 跳转搜索\n   */\n  handleSearch(e){\n    // 搜索医生跳转\n    Taro.navigateTo({\n      url: \"/pages/hospital/doctorList/doctorList?source=1&type=search&id=\" + this.data.hospitalInfo.id\n    })\n    // Taro.navigateTo({\n    //   url: `/pages/hospital/search/search`\n    // })\n  },\n  //获取科室列表\n  getHospitalDepartent(e){\n    let that = this;\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax2('post', 'lotusleaf/hospital/department/queryHospitalDepartmentTree', {\n      hospitalId:this.data.hospitalInfo.id\n    }, res => {\n      Taro.hideLoading({})\n      if (res.data.code == 0) {\n        let data  = res.data.result;\n        const totalArr = data.filter(item => item);\n        this.setData({\n          goodsArea: totalArr,\n          identificationId:totalArr[0] ? totalArr[0].id : '',\n          goodsList: totalArr[0] ? totalArr[0].subDepartments : [],\n          defaultType: totalArr.length > 0?false:true\n        })\n\n      } else {\n        that.toast( res.data.msg );\n      }\n    }, function() {\n      that.toast('请求失败');\n    })\n  },\n  toast(e){\n    Taro.showToast({\n      title: e,\n      icon: 'none'\n    })\n  },\n  // 跳转科室详情\n  toDepartmentDetail(e){\n    let item = e.currentTarget.dataset.item\n    if (item.id != -1){\n      Taro.navigateTo({\n        url: `/pages/hospital/departmentDetail/departmentDetail?id=${item.id}&name=${item.name}`\n      })\n      getApp().globalData.burySpotSDK.track(`action_hospitalDepartmentInformation_secondaryClick-${item.id}`)\n    }\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    endTime = +new Date();\n    console.log(\"页面停留时间：\" + (endTime - startTime))\n    let stayTime = endTime - startTime;\n    // 页面停留时间数据上报\n    getApp().globalData.burySpotSDK.track('page_hospitalDepartmentInformation_remainTime')\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  }\n};","json":{"missingData-view":"../../../component/missingData/missingData"},"wxml":"\n  <view class=\"departmentList-auto-container\"> \n    <view class=\"index_z\">\n      <navBar title-text=\"医院科室\" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view class=\"classifyBox\" :style=\"{height:windowHeight - (navBarHeight + tabBarHeight + 62)px}\"> \n      <block v-if=\" goodsList.length > 0 \">  \n        <view class=\"search_hearder\">  \n          <image class=\"search_icon\" mode=\"aspectFit\" src=\"../../../images/search-icon-black.png\"></image>\n          <view class=\"search_kuai\" v-if=\" input_text \" bindtap=\"search_clear_btn\"></view>\n          <input class=\"search_input\" disabled=\"true\" :value=\" input_text \" placeholder-style=\"color: #9D9FB8;\" data-type=\"2\" bindtap=\"handleSearch\" placeholder=\"搜一搜医生\" bindconfirm=\"search_btn\"></input>\n        </view>\n        <view class=\"hospital-box\"> \n          <image class=\"hospital-logo\" mode=\"widthFix\" :src=\"hospitalInfo.logo ? hospitalInfo.logo : '/images/hospital-logo-new.png'\"></image>\n          <view class=\"hospital-info\"> \n            <view class=\"hospital-title\">{{hospitalInfo.hospitalName}}\n            </view>\n            <view>  \n              <view class=\"nl-right-icon first\">{{hospitalInfo.levelName}}\n              </view>\n              <view class=\"nl-right-icon\">{{hospitalInfo.typeName}}\n              </view>\n              <view class=\"nl-right-icon\">{{hospitalInfo.ownerName}}\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"content\"> \n          <view class=\"left\">\n            <scroll-view scroll-y=\"true\" :style=\"{padding-bottom:tabbarHeightpx}\" bindscrolltoupper=\"upper\" bindscrolltolower=\"lower\" bindscroll=\"scroll\">\n              <view :class=\"[item,( identificationId == item.id ? 'active' : '' )]\" :data-item=\" item \" v-for=\"(item, key) in  goodsArea \" :key=\"key\" bindtap=\"switchArea\">\n\t\t\t\t\t\t{{item.name}}\n\t\t\t\t\t\n              </view>\n            </scroll-view>\n          </view>\n          <view class=\"right\">\n            <scroll-view scroll-y=\"true\" :style=\"{padding-bottom:tabbarHeightpx}\" bindscrolltoupper=\"upper\" bindscrolltolower=\"lower\" bindscroll=\"scroll\">\n              <view class=\"scroll\">\n                <view class=\"right_list\" v-for=\"(item, key) in  goodsList \" :key=\"key\" :data-item=\"item\" data-type=\"1\" bindtap=\"toDepartmentDetail\">\n                  <view class=\"right_text\">{{ item.name }}\n                  </view>\n                </view>\n              </view>\n            </scroll-view>\n          </view>\n        </view>\n      </block>\n      <block v-if=\"defaultType\">\n        <missingData-view zhi=\"new1\" textval=\"暂无内容，敬请期待\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      </block>\n    </view>\n  </view>","wxss":"page{\n  background-color: #fff;\n  height: 100%;\n}\n.search_hearder {\n  height: 64rpx;\n  position: relative;\n  padding-left: 20rpx;\n  border-radius: 36rpx;\n  background-color: #F0F0F5;\n  margin: 20rpx 24rpx 0;\n}\n\n.search_input {\n  width: 500rpx;\n  height: 64rpx;\n  font-size: 25rpx;\n  padding-left: 50rpx; \n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  padding: 18rpx 24rpx;\n}\n/* 医院信息 */\n.hospital-box{\n  padding:30rpx 24rpx;\n  display: flex;\n}\n.hospital-box .hospital-logo{\n  width:110rpx;\n  height:110rpx;\n  margin-right:15rpx;\n}\n/* .hospital-box .hospital-info{\n  padding:10rpx 0;\n} */\n.hospital-box .hospital-title{\n  height: 42rpx;\n  width:570rpx;\n  font-size: 30rpx;\n  font-weight: 700;\n  color: #333333;\n  line-height: 42rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n.hospital-box .nl-right-icon.first{\n  color: #ffffff;\n  background: #00b955;\n}\n.hospital-box .nl-right-icon {\n  display: inline-block;\n  height: 30rpx;\n  margin-top: 11rpx;\n  margin-right: 10rpx;\n  line-height: 30rpx;\n  padding: 0 8rpx;\n  background:#f6f8fd;\n  border-radius: 4rpx;\n  font-size: 20rpx;\n  color: #666883;\n}\n/* 科室列表 */\n.content {\n  display: flex;\n  width: 100%;\n  height: 956rpx;\n  /* margin-top: 20rpx; */\n  /* height: 100%; */\n}\n\n.content .left {\n  width: 270rpx;\n  background: #f5f6fa;\n  font-size: 28rpx;\n  overflow: scroll;\n  flex-shrink: 0;\n  -webkit-overflow-scrolling: touch;\n}\n.content .right {\n  width: calc(100% - 170rpx);\n  overflow: scroll;\n  \n}\n.scroll{\n  display: flex;\n  flex-flow: row wrap;\n  align-content: flex-start;   \n}\n.content .left .item {\n  color: #666883;\n  padding: 25rpx 0 25rpx 24rpx;\n  position: relative;\n  text-align: left;\n  font-size: 28rpx;\n}\n.content .left .active {\n  background: #fff;\n  color: #00b955;\n  font-weight: bold;\n  font-size: 28rpx;\n  position: relative;\n}\n\n/* .content .left .active::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 6rpx;\n  height: 24rpx;\n  background: #00b955;\n  border-radius: 0 4rpx 4rpx 0;\n  margin-top: -12rpx;\n} */\n\n.right_list{\n  width: 480rpx;\n  height: auto;\n  margin-left: 42rpx;\n  margin-top: 25rpx;\n  margin-bottom: 25rpx;\n  position: relative;\n}\n\n/* .right_list::before {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 0;\n  width: 140rpx;\n  height: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin-left: -70rpx;\n} */\n\n/* .right_img{\n  display: block;\n  height: 140rpx;\n  width: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin: auto;\n} */\n.right_text{\n  font-size: 28rpx;\n  text-align: left;\n  color: #111334;\n  /* margin-top: 13rpx; */\n}\n.classifyBox{\n  height: 100vh;\n}"},"convertDir/pages/hospital/doctorDetail/doctorDetail":{"js":"//接口\nconst apiUrl = {\n  getDoctorDetailUrl:'lotusleaf/hospital/doctor/getDoctorDetailByDoctorId',//医生详情接口\n}\nconst app = getApp();\nlet startTime, endTime;\nimport {\n  ajax,\n  ajax2\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      isMore: false,\n      noShow:false,\n      sess_key: null,\n      weeksOfTitle: ['', '上午', '下午', '夜间'],\n      doctorId:null,\n      doctorDetail:{},\n      departmentDoctorConfList:[],\n      isAjaxing: false,\n      showoutpatientList:true\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let doctorId = options.id;\n    if (doctorId) {\n      this.setData({\n        doctorId: doctorId\n      })\n    }\n    this.getDoctorDetail();//获取医生详情\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    startTime = +new Date();\n    this.setData({\n      sess_key: getApp().globalData.sess_key\n    })\n    // 埋点：曝光事件\n    getApp().globalData.burySpotSDK.track('page_doctorHomeExpo');\n  },\n  // 获取医生详情\n  getDoctorDetail(){\n    if (this.isAjaxing) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    ajax2('post', apiUrl.getDoctorDetailUrl, { \n      id: this.data.doctorId,\n    }, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          doctorDetail: res.data.result,\n          departmentDoctorConfList: res.data.result.departmentDoctorConfList ? this.initData(res.data.result.departmentDoctorConfList) : [],\n          isAjaxing: false\n        });\n        let showoutpatientList = this.data.departmentDoctorConfList.some(item => {\n          return (item.outpatientList && item.outpatientList.length > 0)\n        })\n        this.setData({\n          showoutpatientList: showoutpatientList\n        });\n        if (this.data.doctorDetail.goodAt){\n          if (this.data.doctorDetail.goodAt.length < 24){\n            this.setData({\n              noShow: false\n            });\n          }else{\n            this.setData({\n              noShow: true\n            });\n          }\n          if (this.data.doctorDetail.goodAt.length > 48) {\n            this.setData({\n              isMore: false\n            });\n          } else {\n            this.setData({\n              isMore: true\n            });\n          }\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n    }, function () {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  // 专业擅长更多\n  showMoreInfo() {\n    this.setData({\n      isMore: !this.data.isMore\n    })\n  },\n  /* 出诊时间数据处理 */\n  initData: function (data) {\n    data.forEach((item) => {\n      item.outpatientList = item.outpatientList ? this.handleDataProcessing(item.outpatientList) : [];\n      item.outpatientList.forEach((item1) => {\n        let obj = this.formData(item1[0].outpatientTime)\n        item1.unshift(obj);\n      })\n    })\n    return data;\n  },\n  // 出诊时间数据处理\n  handleDataProcessing(data) {\n    let result = [];\n    for (var i = 0; i < data.length; i += 3) {\n      result.push(data.slice(i, i + 3));\n    }\n    return result;\n  },\n  //格式化时间\n  formData(timestamp){\n    let date = new Date(timestamp);\n    let arr = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\n    let month = date.getMonth() + 1;\n    let day = date.getDate();\n    let week = date.getDay();\n    if (month < 10){\n      month = '0' + month;\n    }\n    if (day < 10) {\n      day = '0' + day;\n    }\n    let obj = {\n      week:arr[week],\n      date:month + '.' + day\n    }\n    return obj;\n  },\n  // 在线问诊\n  // toInquiry() {\n  //   getApp().globalData.inquiryChannel = 1;\n  //   getApp().globalData.inquirySource = 1;\n  //   if (this.data.sess_key) {\n  //     let userInfo = {\n  //       token: this.data.sess_key,\n  //       userId: Taro.getStorageSync('userInfo').userId\n  //     }\n  //     Taro.navigateTo({\n  //       url: `/pages/inquiry/guidance/guidance?userInfo=${JSON.stringify(userInfo)}`\n  //     })\n  //   } else {\n  //     Taro.navigateTo({\n  //       url: '/pages/note/login/login?backUrl=/pages/inquiry/guidance/guidance',\n  //     })\n  //   }\n  // },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    endTime = +new Date();\n    console.log(\"页面停留时间：\" + (endTime - startTime))\n    let stayTime = endTime - startTime;\n    // 页面停留时间数据上报\n    getApp().globalData.burySpotSDK.track('page_doctorHome_remainTime')\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  }\n};","json":{},"wxml":"\n  <view class=\"doctorDetail-auto-container\"> \n    <view class=\"index_z\">\n      <navBar title-text=\"医生主页\" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view class=\"main-box\"> \n      <view class=\"doctor-box\">    \n        <view class=\"doctor-name\">{{doctorDetail.doctorName}}\n        </view>\n        <view class=\"doctor-info\"> \n          <text class=\"hospital-title\">{{doctorDetail.doctorTitle}} \n          </text>\n          <text class=\"hospital-title\">{{doctorDetail.departmentDoctorConfList[0].firstDepartmentConfName}}\n          </text>\n        </view>\n        <view> \n          <view class=\"nl-right-icon first\">{{doctorDetail.departmentDoctorConfList[0].levelName}}\n          </view>\n          <text class=\"doctor-site\">{{doctorDetail.departmentDoctorConfList[0].hospitalName}}\n          </text>\n        </view>\n        <view class=\"doctor-profession\" v-if=\"doctorDetail.goodAt\">  \n          <view :class=\"[content-intro,(isMore ? 'showMore' : '')]\">{{doctorDetail.goodAt}}\n            <image mode=\"widthFix\" src=\"../../../images/doctor-profession.png\"></image>\n          </view>\n          <view class=\"zhankai\" bindtap=\"showMoreInfo\" v-if=\"noShow && !isMore\">展开\n          </view>\n          <view class=\"zhankai\" bindtap=\"showMoreInfo\" v-if=\"noShow && isMore\">收起\n          </view>\n        </view>\n        <view class=\"doctor-mark\">  \n          <view class=\"nl-right-icon\" v-if=\"doctorDetail.scienceTitle\">{{doctorDetail.scienceTitle}}\n          </view>\n          <view class=\"nl-right-icon\" v-if=\"doctorDetail.educateTitle\">{{doctorDetail.educateTitle}}\n          </view>\n          <view class=\"nl-right-icon\" v-if=\"doctorDetail.doctorTitle\">{{doctorDetail.doctorTitle}}\n          </view>\n        </view>\n      </view>\n      <view class=\"doctor-work-box\" v-if=\"departmentDoctorConfList && departmentDoctorConfList.length && showoutpatientList > 0\"> \n        <view class=\"content-title\" v-if=\"showoutpatientList\">\n          <view class=\"content-title-left\">出诊信息\n          </view>\n        </view>\n        <view class=\"doctor-work-list\" v-for=\"(item, key) in departmentDoctorConfList\" :key=\"key\" v-if=\"item.outpatientList && item.outpatientList.length>0\"> \n          <view class=\"work-title\">{{item.hospitalName}} {{item.firstDepartmentConfName ? item.firstDepartmentConfName : ''}}\n          </view>\n          <view class=\"data-view\"> \n            <view class=\"weeks_title_view\">\n              <text class=\"weeks_title_text\" v-for=\"(item, key) in weeksOfTitle\" :key=\"key\">{{item}}\n              </text>\n            </view>\n            <view class=\"weeks_title_view\" v-for=\"(item1, key) in item.outpatientList\" :key=\"key\">\n              <view class=\"weeks_title_text\" wx:for-index=\"key\" v-for=\"(item2, key) in item1\" :key=\"key\"> \n                <view class=\"weeks_title_text_first\" v-if=\"key == 0\"> \n                  <text>{{item2.week}}\n                  </text>\n                  <text>{{item2.date}}\n                  </text>\n                </view>\n                <view class=\"weeks_title_text_other\" v-else>  \n                  <text :class=\"[(item2.outpatientType == '停诊' ? 'gray' : '')]\" v-if=\"item2.outpatientType\">{{item2.outpatientType}}\n                  </text>\n                  <text v-else>--\n                  </text>\n                  <text v-if=\"item2.outpatientType && item2.outpatientType != '停诊'\"> ¥{{item2.fee}}\n                  </text>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"page{\n  height: 100%;\n}\n.main-box{\n  padding:20rpx 24rpx 0;\n}\n/* 医生信息 */\n.doctor-box{\n  padding:20rpx 24rpx;\n  background-color: #fff;\n  border-radius: 12rpx;\n}\n.doctor-box .doctor-name{\n  height: 67rpx;\n  font-size: 48rpx;\n  font-weight: 700;\n  color: #101434;\n  line-height: 67rpx;\n}\n.doctor-box .doctor-info{\n  padding:10rpx 0 0;\n  margin-bottom: 5rpx;\n}\n.doctor-box .hospital-title{\n  height: 40rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #101434;\n  line-height: 40rpx;\n}\n.doctor-box .doctor-site{\n  height: 33rpx;\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #101434;\n  line-height: 33rpx;\n}\n.doctor-box .doctor-mark{\n  margin-top:10rpx;\n}\n.doctor-box .nl-right-icon.first{\n  color: #ffffff;\n  background: #00b955;\n}\n.doctor-box .nl-right-icon {\n  display: inline-block;\n  height: 30rpx;\n  /* margin-top: 11rpx; */\n  margin-right: 10rpx;\n  line-height: 30rpx;\n  padding: 0 8rpx;\n  background:#f6f8fd;\n  border-radius: 4rpx;\n  font-size: 20rpx;\n  color: #666883;\n}\n.doctor-profession{\n  position: relative;\n}\n.doctor-profession .content-intro{\n  line-height: 33rpx;\n  font-size:24rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  color: #666883;\n  margin-top: 20rpx;\n}\n.doctor-profession .content-intro image{\n  width: 100rpx;\n  height: 36rpx;\n  margin-right: 10rpx;\n  position: relative;\n  top: 1rpx;\n}\n.doctor-profession .showMore{\n  overflow:auto;\n  display: block;\n}\n.doctor-profession .zhankai{\n  font-size: 24rpx;\n  position:absolute;\n  color: #00b955;\n  font-weight: 500;\n  padding:0 10rpx;\n  background: #ffffff;\n  opacity: 0.8;\n  right: 0;\n  bottom: 1rpx;\n}\n.doctor-profession .zhankai image{\n  width: 20rpx;\n  height: 12rpx;\n}\n .doctor-profession .rotateDeg image{\n  transform:rotate(180deg);\n  -ms-transform:rotate(180deg); \t/* IE 9 */\n  -moz-transform:rotate(180deg); \t/* Firefox */\n  -webkit-transform:rotate(180deg); /* Safari 和 Chrome */\n  -o-transform:rotate(180deg); \t/* Opera */\n}\n/* .doctor-profession .rotateDeg{\n  display: none;\n} */\n/* 出诊信息 */\n.doctor-work-box{\n  /* padding:20rpx 24rpx; */\n  padding-top:20rpx;\n  background-color: #fff;\n  border-radius: 12rpx;\n  margin-top:20rpx;\n}\n.doctor-work-box .content-title{\n  display:flex;\n  justify-content: space-between;\n  position:relative;\n  padding:0 24rpx;\n}\n.doctor-work-box .content-title-left{\n  padding-left:16rpx;\n  color: #101434;\n  font-weight: 700;\n  font-size: 32rpx;\n}\n.doctor-work-box .content-title-left::before{\n  content: '';\n  height: 24rpx;\n  width:6rpx;\n  background: #00b955;\n  position: absolute;\n  left: 24rpx;\n  bottom: 8rpx;\n  border-radius: 4rpx;\n}\n.doctor-work-box .doctor-work-list{\n  padding-bottom:30rpx;\n  border-bottom:1px solid #eeeeee;\n  margin-bottom: 10rpx;\n}\n.doctor-work-box .doctor-work-list:last-child{\n  border-bottom:0;\n}\n.doctor-work-box .work-title{\n  padding:20rpx 24rpx;\n  font-size: 24rpx;\n  color: #333333;\n  font-weight: 700;\n}\n/* 日历样式 */\n.data-view {\n  background: #ffffff;\n  padding:0 24rpx;\n  /* margin:130rpx 24rpx 0; */\n}\n.weeks_title_view{\n  padding: 0 0 20rpx;\n  width:100%;\n  font-size: 24rpx;\n  color: #9d9fb8;\n  display: flex;\n}\n.weeks_title_view:first-child{\n  padding:0;\n  height:50rpx;\n}\n.weeks_title_view:first-child .weeks_title_text{\n  background:#ffffff;\n  color: #9d9fb8;\n}\n.weeks_title_view .weeks_title_text:first-child{\n  width:96rpx;\n  margin-right:0;\n  background:#ffffff;\n}\n\n.weeks_title_view .weeks_title_text{\n  width: 178rpx;\n  height:94rpx;\n  /* line-height:60rpx; */\n  text-align:center;\n  font-size: 24rpx;\n  color: #666883;\n  margin-right:24rpx;\n  opacity: 1;\n  background: rgba(246,248,253,0.70);\n  border-radius: 4px;\n}\n.weeks_title_view .weeks_title_text .weeks_title_text_first{\n  display: flex;\n  flex-direction: column;\n  font-size:22rpx;\n  color: #9d9fb8;\n  height: 100%;\n  justify-content: center;\n}\n.weeks_title_view .weeks_title_text .weeks_title_text_other{\n  height: 100%;\n  display:flex;\n  flex-direction: column;\n  justify-content: center;\n  color: #666883;\n  padding: 14rpx 0;\n  box-sizing: border-box;\n  font-weight: 700;\n}\n.weeks_title_view .weeks_title_text .weeks_title_text_other .gray{\n  color: #d4d5e2;\n}\n.weeks_title_view .weeks_title_text:last-child{\n  margin-right:0;\n}\n.days-view .row_view{\n  display:flex;\n  margin-bottom:20rpx;\n}\n.days-view .row_view .weeks_title_text{\n width: 76rpx;\n text-align:center;\n height: 146rpx;\n font-size: 20rpx;\n color: #666883;\n vertical-align:top;\n font-weight: 500;\n border-radius: 8px;\n background: #F6F8FD;\n margin-right:20rpx;\n display: flex;\n flex-flow: column;\n align-items: center;\n justify-content: space-around;\n padding:8rpx 0;\n}\n.days-view .row_view .weeks_title_text text.line{\n  margin:0 8rpx;\n  width:83%;\n  height: 1px;\n  background: rgba(17,19,52,0.08);\n}\n.days-view .row_view .weeks_title_text:last-child{\n  margin-right:0;\n}\n.days-view .row_view .weeks_title_text_disable {\n  width: 76rpx;\n  text-align:center;\n  height: 146rpx;\n  font-size: 20rpx;\n  color: #ffffff;\n  vertical-align:top;\n  font-weight: 500;\n  border-radius: 8px;\n  background: #ffffff;\n  margin-right:20rpx;\n}\n.days-view .row_view .weeks_title_text_disable:last-child{\n  margin-right:0;\n}\n.days-view .weeks_title_text_disable1{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  flex-direction: column;\n  width:calc(100%/7);\n  text-align:center;\n  height: 44px;\n  font-size: 13px;\n  color: #acacac;\n}\n\n/* 在线问诊 */\n.doctor-online{\n  margin:20rpx 0;\n  height: 90rpx;\n  line-height: 90rpx;\n  background: #00b955;\n  border-radius: 45rpx;\n  font-size: 34rpx;\n  text-align: center;\n  color: #ffffff;\n}"},"convertDir/pages/hospital/doctorList/doctorList":{"js":"const app = getApp();\n\nimport {\n  ajax2,\n  getLocation,\n  cdnStaticResourceUrl,\n  bezier\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      searcKeyBox: false,\n      pageNum: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      proList: [], //医生列表\n      isAjaxing: false,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      pageTitle: '医生列表',\n      id: null,\n      inputText: null, //搜索关键词\n      source:'',//来源 1-医院 2-科室\n      type: '',//search-搜索；all-全部专家\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    console.log(options)\n    // 设置来源\n    if (options.source) {\n      this.setData({\n        source: options.source\n      })\n    }\n    //search-搜索；all-全部专家\n    if (options.type){\n      this.setData({\n        type: options.type\n      })\n    }\n    //查询id\n    if (options.id) {\n      this.setData({\n        id: options.id\n      })\n    } \n    console.log(this.data.id, this.data.type, this.data.type == 'all')\n    if(this.data.id && this.data.type == 'all'){\n      console.log(1111)\n      this.searchFn();\n    }\n  },\n  onShow: function() {\n    \n  },\n  /**\n   * 输入检测\n   */\n  searchInput(e) {\n    this.setData({\n      inputText: e.detail.value,\n      searcKeyBox: !e.detail.value ? false : true\n    })\n  },\n  /**\n   * 搜索Btn\n   */\n  search_btn() {\n    if (this.data.inputText) {\n      const inputText = (this.data.inputText).replace(/^\\s*|\\s*$/g, \"\");\n      console.log(inputText)\n      if (!inputText) {\n        Taro.showToast({\n          title: '请输入医生',\n          icon: 'none',\n        })\n        this.setData({\n          inputText: ''\n        })\n        return false;\n      }\n      this.searchFn()\n    }\n    this.data.pageNum = 1;\n    this.setData({\n      proList: [],\n      searcKeyBox: false\n    });\n  },\n  /**\n   * 搜索方法\n   */\n  searchFn() {\n    if (this.isAjaxing) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    const {\n       pageNum = 1, pageSize\n    } = this.data\n    const sendData = {\n      pageNum,\n      pageSize,\n    }\n    sendData.doctorName = this.data.inputText;\n    if (this.data.source == 1) { //医院\n      sendData.hospitalId = this.data.id;\n    } else if (this.data.source == 2) {  //科室\n      sendData.departmentId = this.data.id;\n    }else{\n      sendData.hospitalId = '';\n      sendData.departmentId = '';\n    }\n    let url = 'lotusleaf/hospital/doctor/queryDoctorListByParams';\n    ajax2('post', url, sendData, res => {\n      if (res.data.code == 0) {\n        const resData = res.data.result;\n        resData && this.setData({\n          proList: resData ? this.data.pageNum == 1 ? resData.list : [...this.data.proList, ...resData.list] : [],\n          hasNextPage: (resData && resData.hasNextPage) || false,\n          isAjaxing: false,\n          searcKeyBox: false\n        });\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器开小差了，请您稍后尝试',\n          icon: 'none',\n        })\n      }\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n    }, ()=> {\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    const hasNextPage = this.data.hasNextPage;\n    if (hasNextPage) {\n      this.data.pageNum = ++this.data.pageNum\n      this.searchFn();\n    }\n  }\n};","wxml":"\n  <view class=\"doctorList-auto-container\"> \n    <view class=\"index_z\">\n      <navBar :title-text=\" pageTitle \" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view>  \n      <block> \n        <view class=\"search_contion\">  \n          <view class=\"search_hearder\"> \n            <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n            <input class=\"search_input\" :value=\" inputText \" bindinput=\"searchInput\" placeholder=\"搜一搜医生\" bindconfirm=\"search_btn\"></input>\n          </view>\n          <text class=\"search_btn\" bindtap=\"search_btn\" v-if=\" inputText \">搜索\n          </text>\n          <text class=\"search_btn gray\" v-else>搜索\n          </text>\n        </view>\n        <view style=\"height:100rpx\"></view>\n      </block>\n      <view class=\"wrap-content\" v-if=\"proList.length\">\n        <block>\n          <doctorList :lists=\" proList \"></doctorList>\n        </block>\n      </view>\n      <block v-if=\" (!proList || proList.length == 0) &&  !isAjaxing \">\n        <view style=\"background-color:#fff;height: 100vh;\">\n          <missingData-view zhi=\"new1\" textval=\"未找到符合条件的结果\" :imageUrl=\" cdnLink + 'images/empty-check-list.png' \"></missingData-view>\n        </view>\n      </block>\n    </view>\n  </view>","json":{"missingData-view":"../../../component/missingData/missingData","doctorList":"../../../component/doctorList/doctorList"},"wxss":".index_z {\n  position: relative;\n  z-index: 99999999;\n}\n\npage {\n  background: #f5f6fa;\n  height: 100%;\n}\n\n.search_contion {\n  padding: 20rpx 0;\n  background-color: #FDFDFD;\n  position: fixed;\n  width: 100%;\n  z-index: 9;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n}\n\n.search_hearder {\n  flex: 1;\n  height: 60rpx;\n  position: relative;\n  margin-left: 20rpx;\n  border-radius: 36rpx;\n  background-color: #F0F0F5;\n  overflow: hidden;\n}\n\n.search_input {\n  width: 500rpx;\n  height: 60rpx;\n  font-size: 28rpx;\n  padding-left: 65rpx;\n  color: #111334;\n  background: #f0f0f5;\n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  margin: 16rpx 12rpx 16rpx 15rpx;\n}\n\n.search_clear {\n  top: 0;\n  width: 26rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 5rpx;\n  z-index: 10;\n  padding: 17rpx;\n}\n\n.search_btn {\n  color: #111334;\n  font-size: 28rpx;\n  width: 120rpx;\n  text-align: center;\n}\n\n.search_btn.gray {\n  color: #ccc;\n}\n\n.wrap-content{\n  padding:0 24rpx;\n  margin-top:20rpx;\n}\n\n.search_kuai {\n  top: 0;\n  right: 0;\n  position: absolute;\n  height: 100%;\n  z-index: 9;\n  background: #f0f0f5;\n}\n"},"convertDir/pages/hospital/hospitalDetails/hospitalDetails":{"js":"const app = getApp();\nlet startTime, endTime;\nimport {\n  ajax2,\n  getLocation,\n  open_wechatMap,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      hospitalId: null,//医院id\n      hospitalDetail:{},//医院基本信息\n      doctorPageVoList:[],\n      departmentDetail:{},//医院科室信息\n      doctorList:[],//医院专家\n      departments: [], // 科室\n      isPhoneShow: false,\n      isAddressShow: false,\n      procedureShow: false,\n      detailsShow: false,\n      isAjaxing: false\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    let hospitalId = options.id;\n    if (hospitalId) {\n      this.setData({\n        hospitalId: hospitalId\n      })\n      \n    }\n    this.getHospitalDetail();//获取医院详情\n  },\n  onShow: function() {\n    startTime = +new Date();\n    // 埋点：曝光事件\n    getApp().globalData.burySpotSDK.track('page_hospitalInformationExpo');\n  },\n  // 获取医院详情\n  getHospitalDetail() {\n    let that = this;\n    if (this.isAjaxing) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    ajax2('post', 'lotusleaf/hospital/detailInfo', {\n      id: Number(that.data.hospitalId),\n    }, res => {\n      if (res.data.code == 0) {\n        let result = this.handleDataProcessing(res.data.result.departmentSummary.departmentList)\n        this.setData({\n          hospitalDetail: res.data.result,\n          doctorPageVoList: res.data.result.doctorPageVoList ? res.data.result.doctorPageVoList.slice(0,3) : [],\n          departments: result,\n          isAjaxing: false\n        });\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n    }, function () {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  // 搜索跳转\n  onSearch() {\n    // 搜索医生跳转\n    Taro.navigateTo({\n      url: \"/pages/hospital/doctorList/doctorList?source=1&type=search&id=\" + this.data.hospitalId\n    })\n    getApp().globalData.burySpotSDK.track('action_enterhospitalInfprmation_SeachClick');\n  },\n  // 全部专家\n  toDotorList() {\n    Taro.navigateTo({\n      // / pages / note / locationAddress / locationAddress ? address_data = ${ data }\n      url: \"/pages/hospital/doctorList/doctorList?source=1&type=all&id=\" + this.data.hospitalId\n    })\n  },\n  // 全部科室\n  toDepartmentList(){\n    let data = {\n      id: this.data.hospitalId,\n      logo: this.data.hospitalDetail.logo,\n      hospitalName: this.data.hospitalDetail.hospitalName,\n      levelName: this.data.hospitalDetail.levelName,\n      typeName: this.data.hospitalDetail.typeName,\n      ownerName: this.data.hospitalDetail.ownerName\n    }\n    Taro.navigateTo({\n      url: \"/pages/hospital/departmentList/departmentList?hospitalInfo=\" + JSON.stringify(data)\n    })\n    getApp().globalData.burySpotSDK.track('action_hospitalInformation_departmentClick');\n  },\n  //跳转科室详情\n  toDepartmentDetail(e){\n    let item = e.currentTarget.dataset.item\n    Taro.navigateTo({\n      url: `/pages/hospital/departmentDetail/departmentDetail?id=${item.id}&name=${item.name}`\n    })\n    getApp().globalData.burySpotSDK.track(`action_hospitalInformation_departmentCategoryClick-${item.id}`)\n  },\n  // 双排滑动数据处理方法\n  handleDataProcessing(data){\n    let result = [];\n    for (var i = 0; i < 6; i += 3) {\n      result.push(data.slice(i, i + 3));\n    }\n    return result;\n  },\n  phoneClose() {\n    this.setData({\n      isPhoneShow: false\n    })\n  },\n  //致电点击\n  openPhone() {\n    if (this.data.hospitalDetail.phoneList && this.data.hospitalDetail.phoneList.length === 1) {\n      let num = this.data.hospitalDetail.phoneList[0].split(\":\")\n      Taro.makePhoneCall({\n        phoneNumber: num[1] //仅为示例，并非真实的电话号码\n      })\n    } else {\n      this.setData({\n        isPhoneShow: true\n      })\n    }\n    getApp().globalData.burySpotSDK.track('action_hospitalInfprmation_telephoneClick');\n  },\n  addressClose() {\n    this.setData({\n      isAddressShow: false\n    })\n  },\n  //导航点击\n  openAddress() {\n    if (this.data.hospitalDetail.addressList && this.data.hospitalDetail.addressList.length === 1){\n      open_wechatMap(Number(this.data.hospitalDetail.lat), Number(this.data.hospitalDetail.lng), this.data.hospitalDetail.hospitalName, this.data.hospitalDetail.addressList[0]);\n    }else{\n      this.setData({\n        isAddressShow: true\n      })\n    }\n  },\n  procedureClose() {\n    this.setData({\n      procedureShow: false\n    })\n  },\n  openProcedure() {\n    this.setData({\n      procedureShow: true\n    })\n  },\n  detailsClose() {\n    this.setData({\n      detailsShow: false\n    })\n  },\n  //医院详情\n  openHospitalDetails(){\n    this.setData({\n      detailsShow: true\n    })\n    getApp().globalData.burySpotSDK.track('action_hospitalInformation_detailsClick');\n  },\n  // 预览图片\n  checkPic(e) {\n    let src = e.currentTarget.dataset.src;//获取data-src\n    let result = [];\n    this.data.hospitalDetail.imageList.forEach((item)=>{\n      result.push(item.imageUrl)\n    })\n    //图片预览\n    Taro.previewImage({\n      current: src, // 当前显示图片的http链接\n      urls: result // 需要预览的图片http链接列表\n    })\n  },\n  //关闭弹窗\n  handleClose(){\n\n  },\n  // 打电话\n  ringUp(e){\n    let num = e.currentTarget.dataset.phone.split(\":\")\n    console.log(num)\n    Taro.makePhoneCall({\n      phoneNumber: num[1] //仅为示例，并非真实的电话号码\n    })\n  },\n  //导航\n  openMap(e) {\n    let address = e.currentTarget.dataset.item.split(\":\")[1];\n    open_wechatMap(Number(this.data.hospitalDetail.lat), Number(this.data.hospitalDetail.lng), this.data.hospitalDetail.hospitalName, address);\n  },\n  onHide: function () {\n    endTime = +new Date();\n    console.log(\"页面停留时间：\" + (endTime - startTime))\n    let stayTime = endTime - startTime;\n    // 页面停留时间数据上报\n    getApp().globalData.burySpotSDK.track('page_hospitalInformation_remainTime')\n  }\n};","json":{"halfScreenDialog":"../../../../component/halfScreenDialog/halfScreenDialog","doctorList":"../../../component/doctorList/doctorList"},"wxss":".hospital-details{\n    padding: 20rpx 24rpx 65rpx 24rpx;\n}\n.header-search{\n    width: 702rpx;\n    height: 60rpx;\n    background: #ffffff;\n    border-radius: 36rpx;\n    position: relative;\n    margin-bottom: 20rpx;\n}\n.header-search >image{\n    width: 28rpx;\n    height: 28rpx;\n    position: absolute;\n    left: 30rpx;\n    top: 16rpx;\n}\n.header-search >input{\n    margin-left: 74rpx;\n    padding-right: 25rpx;\n    height: 60rpx;\n}\n.search {\n  border-radius: 90rpx;\n  height: 64rpx;\n  background:#ffffff;\n  color: #9D9FB8;\n  position: relative;\n  overflow: hidden;\n  margin-bottom: 20rpx;\n}\n\n.search .search__input {\n  height: 64rpx;\n  line-height: 64rpx;\n  font-size: 25rpx;\n  padding-left: 76rpx;\n}\n\n.search .search__img {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  left: 34rpx;\n  top: 18rpx;\n  z-index: 1;\n}\n.phcolor{\n    font-size: 28rpx;\n    color: #9d9fb8;\n}\n.hospital-card{\n    width: 654rpx;\n    padding: 20rpx 24rpx;\n    background: #ffffff;\n    border-radius: 12rpx;\n    margin-bottom: 20rpx;\n}\n.header-title{\n    display: flex;\n    margin-bottom: 25rpx;\n}\n.header-title >image{\n    width: 100rpx;\n    height: 100rpx;\n    border-radius: 50%;\n}\n.header-title-hospital{\n    margin-left: 15rpx;\n    width: 520rpx;\n    position:relative;\n}\n.name{\n    font-weight: 700;\n    font-size: 36rpx;\n    color: #111334;\n    margin-bottom: 15rpx;\n    width: 79%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n.appraise{\n    display: flex;\n}\n\n.appraise >view{\n    /* width: 96rpx; */\n    height: 30rpx;\n    border-radius: 4rpx;\n    font-size: 20rpx;\n    margin-right: 18rpx;\n    text-align: center;\n    line-height: 30rpx;\n    padding: 0 8rpx;\n}\n.grey{\n    background: #f6f8fd;\n    color: #666883;\n}\n.green{\n    background: #00b955;\n    color: #fff;\n}\n.hot-department{\n    display: flex;\n    font-size: 24rpx;\n    color: #666883;\n    align-items: baseline;\n    margin-bottom: 20rpx;\n    position: relative;\n}\n.hot-department >image{\n    width: 100rpx;\n    height: 21rpx;\n    flex-shrink: 0;\n    margin-right: 20rpx;\n}\n.hot-department .text{\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n}\n .details{\n    display: flex;\n    align-items: center;\n    position: absolute;\n    right: 0;\n    top: 10rpx;\n    z-index: 10;\n    background: #fff;\n    padding-left: 20rpx;\n    justify-content: s\n}\n .details >view{\n    font-size: 24rpx;\n    font-weight: 700;\n    color: #00b955;\n}\n .details >image{\n    width: 12rpx;\n    height: 20rpx;\n}\n.card-details{\n    /* height: 60rpx;\n    line-height: 60rpx; */\n    text-align: left;\n    opacity: 0.7;\n    background: #f6f8fd;\n    border-radius: 8rpx;\n    padding: 15rpx 14rpx;\n    margin-bottom: 20rpx;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    line-height:35rpx;\n}\n.card-details .text{\n    color: #666883;\n    font-weight: 400;\n    font-size: 20rpx;\n}\n.card-details .space{\n    margin:0 5rpx;\n}\n.black{\n    color: #000;\n    font-weight: 700;\n}\n.location{\n    display: flex;\n    justify-content: space-between;\n}\n.address{\n    color: #9d9fb8;\n    font-size: 24rpx;\n    flex: 1;\n    width: 79%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n.navigation,.phone{\n    display: flex;\n    font-size: 24rpx;\n    color: #111334;\n    align-items: center;\n    width: 102rpx;\n}\n.navigation{\n    border-right: 1rpx solid #e6e4e4;\n    margin-right: 24rpx;\n}\n.navigation >image,.phone >image{\n    width: 20rpx;\n    height: 24rpx;\n    margin-right: 10rpx;\n}\n.departments-msg{\n    background: #ffffff;\n    border-radius: 12rpx;\n    padding: 20rpx 24rpx;\n    margin-bottom: 20rpx;\n}\n.departments-msg .header,.procedure .header{\n    display: flex;\n    align-items: center;\n    margin-bottom: 20rpx;\n}\n.doctor-expert{\n    margin-bottom: 20rpx;\n}\n.departments-msg .header >view:first-child,.doctor-expert .header >view:first-child,.procedure .header >view:first-child{\n    width: 6rpx;\n    height: 24rpx;\n    background: #00b955;\n    border-radius: 4rpx;\n}\n.departments-msg .header .title,.doctor-expert .header .title,.procedure .header .title{\n    font-size: 32rpx;\n    color: #333333;\n    font-weight: 700;\n    margin-right: 10rpx;\n    margin-left: 10rpx;\n}\n.doctor-expert .header .title,.procedure .header .title{\n    flex: 1;\n}\n.departments-msg .header .text{\n    font-size: 20rpx;\n    color: #666883;\n    flex: 1;\n}\n.departments-msg .header .all,.doctor-expert .header .all,.procedure  .header .all{\n    font-size: 24rpx;\n    color: #111334;\n}\n.departments-msg .header >image,.doctor-expert .header >image, .procedure .header >image{\n    width: 28rpx;\n    height: 28rpx;\n    position: relative;\n    top: 2rpx;\n}\n.procedure .text{\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 6;\n}\n.doctor-expert{\n    padding: 20rpx 0;\n    background: #ffffff;\n    border-radius: 12rpx;\n}\n.doctor-expert .header{\n    display: flex;\n    align-items: center;\n    /* margin-bottom: 20rpx; */\n    padding:0 24rpx;\n}\n.procedure{\n    background: #ffffff;\n    border-radius: 12rpx;\n    padding: 20rpx 24rpx;\n}\n.procedure .text{\n    font-size: 24rpx;\n    color: #666883;\n}\n/*双排滑动科室*/\n.departments {\n    display: flex;\n    flex-flow: column;\n}\n\n.departments-content {\n    display: flex;\n    width:946rpx;\n    margin-bottom: 20rpx;\n    /* flex-flow: column;\n    margin-right: 23rpx; */\n}\n.departments-content:last-child {\n  margin-bottom: 0;\n}\n\n.departments-msg .departments-list{\n    width: 300rpx;\n    height: 169rpx;\n    background: #f8fafd;\n    border-radius: 12rpx;\n    padding: 26rpx 20rpx;\n    box-sizing: border-box;\n    margin-right: 23rpx;\n    display: flex;\n    flex-flow: column;\n}\n.departments-msg .departments-list:last-child {\n  margin-right: 0rpx;\n}\n.departments-msg .departments-list >view:first-child{\n    font-size: 28rpx;\n    color: #101434;\n    margin-bottom: 20rpx;\n    display: flex;\n    align-items: center;\n    text-align: left;\n}\n.departments-msg .departments-list >view:last-child{\n    font-size: 22rpx;\n    color: #9d9fb8;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    line-clamp: 2;\n    -webkit-box-orient: vertical;\n}\n.departments-msg .departments-list >view:first-child >image{\n    width: 34rpx;\n    height: 29rpx;\n    margin-right: 14rpx;\n}\n.phone-contain,.address-contain {\n    padding: 0 0 50rpx 0;\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n.phone-contain >view,.address-contain >view{\n    height: 97rpx;\n    line-height: 97rpx;\n    text-align: center;\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n.inquiry-procedure-contain{\n    /* padding: 0 0 70rpx 0; */\n    max-height: 900rpx;\n    overflow-y: auto;\n    width: 100%;\n    box-sizing: border-box; \n    padding: 0 24rpx 24rpx;\n}\n.details-contain{\n    /* padding: 0rpx 0rpx 110rpx 0rpx; */\n    max-height: 900rpx;\n    overflow-y: auto;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 24rpx 24rpx;\n}\n.inquiry-procedure-contain .procedure-box{\n    display: flex;\n    align-items: center;\n    margin-top: 30rpx;\n    margin-bottom: 10rpx;\n    font-weight: 700;\n}\n.inquiry-procedure-contain .procedure-box >view:first-child{\n    width: 6rpx;\n    height: 24rpx;\n    background: #00b955;\n    border-radius: 4rpx;\n    margin-right: 10rpx;\n}\n.inquiry-procedure-contain .procedure-box >view:last-child{\n    font-size: 28rpx;\n    color: #111334;\n    font-weight: 500;\n}\n.procedure-text{\n    font-size: 24rpx;\n}\n.details-contain .title{\n    font-size: 32rpx;\n    color: #111334;\n    margin-bottom: 20rpx;\n    /* margin-top: 40rpx; */\n}\n.details-contain .text{\n    font-size: 24rpx;\n    color: #666883;\n    text-align: justify;\n}\n.details-contain .pic{\n    /* display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between; */\n    margin-bottom:40rpx;\n}\n.details-contain .pic >image{\n    width: 157rpx;\n    height: 157rpx;\n    margin-bottom: 24rpx;\n    margin-right: 24rpx;\n}\n.details-contain .pic >image:nth-child(4n){\n    margin-right: 0;\n}\n/* 底部弹框 */\n.footer_alert_back{\n  height: 100%;\n  width: 100%;\n  background-color: #000;\n  opacity: 0.5;\n  position: fixed;\n  z-index: 10;\n  left: 0;\n  top: 0;\n}\n.footer_alert{\n  border-top-left-radius: 24px;\n  border-top-right-radius: 24px;\n  width: 100%;\n  background-color: #fff;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  /* padding-bottom: 30rpx; */\n  z-index: 99999;\n  max-height: 1000rpx;\n}\n.footer_title{\n  height: 100rpx;\n  line-height: 100rpx;\n  text-align: center;\n  font-weight: bold;\n  font-size: 36rpx;\n  color: #111334;\n  position:relative;\n}\n.footer_right{\n  position: absolute;\n  top:32rpx;\n  right:32rpx;\n  height:38rpx;\n  width:38rpx;\n}\n.footer_list{\n  max-height: 900rpx;\n  overflow-y: auto;\n  width: 100%;\n  padding: 24rpx 24rpx 0;\n}\n.footer_list .nav__class {\n  overflow:hidden;\n}\n.footer_list .nav__list{\n  /* width: 339rpx;\n  height: 169rpx;\n  padding: 26rpx 20rpx 23rpx 20rpx;\n  background: #f8fafd;\n  border-radius: 12px;\n  box-sizing: border-box;\n  margin-right: 23rpx;\n  margin-bottom:20rpx;\n  float: left; */\n  padding:10rpx 20rpx;\n  background: #f5f7f8;\n  border-radius: 30px;\n  box-sizing: border-box;\n  margin-right: 10rpx;\n  margin-left: 10rpx;\n  margin-bottom: 20rpx;\n  float:left;\n  font-size:24rpx;\n}","wxml":"\n  <view class=\"hospitalDetails-auto-container\"> \n    <navBar title-text=\"医院主页\"></navBar>\n    <view class=\"hospital-details\">          \n      <view class=\"search\" bindtap=\"onSearch\"> \n        <view class=\"search__input\">搜一搜医生\n        </view>\n        <image class=\"search__img\" src=\"../../../images/search-icon-black.png\"></image>\n      </view>\n      <view class=\"hospital-card\">   \n        <view class=\"header-title\"> \n          <image mode=\"aspectFit\" :src=\"hospitalDetail.logo ? hospitalDetail.logo : '/images/hospital-logo-new.png'\"></image>\n          <view class=\"header-title-hospital\">  \n            <view class=\"name\" v-if=\"hospitalDetail.hospitalName\">{{hospitalDetail.hospitalName}}\n            </view>\n            <view class=\"details\" bindtap=\"openHospitalDetails\"> \n              <view>医院详情\n              </view>\n              <image src=\"../../../images/icon-arrow-green.png\"></image>\n            </view>\n            <view class=\"appraise\">  \n              <view class=\"green\" v-if=\"hospitalDetail.levelName\">{{hospitalDetail.levelName}}\n              </view>\n              <view class=\"grey\" v-if=\"hospitalDetail.typeName\">{{hospitalDetail.typeName}}\n              </view>\n              <view class=\"grey\" v-if=\"hospitalDetail.ownerName\">{{hospitalDetail.ownerName}}\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"hot-department\" v-if=\"hospitalDetail.hotDepartmentStr\"> \n          <image src=\"../../../images/icon-hot-department.png\"></image>\n          <view class=\"text\">\n\t\t\t\t{{hospitalDetail.hotDepartmentStr}}\n\t\t\t\n          </view>\n        </view>\n        <view class=\"card-details\" v-if=\"hospitalDetail.bedsNum || hospitalDetail.dailyOutpatient || hospitalDetail.directorNum || hospitalDetail.viceDirectorNum\">      \n          <view class=\"text\" v-if=\"hospitalDetail.bedsNum\">床位张\n            <text class=\"black\">{{hospitalDetail.bedsNum}}\n            </text>\n          </view>\n          <view class=\"text space\" v-if=\"hospitalDetail.dailyOutpatient\"> / \n          </view>\n          <view class=\"text\" v-if=\"hospitalDetail.dailyOutpatient\">日门诊量次\n            <text class=\"black\">{{hospitalDetail.dailyOutpatient}}\n            </text>\n          </view>\n          <view class=\"text space\" v-if=\"hospitalDetail.directorNum\"> / \n          </view>\n          <view class=\"text\" v-if=\"hospitalDetail.directorNum\">主任医师人\n            <text class=\"black\">{{hospitalDetail.directorNum}}\n            </text>\n          </view>\n          <view class=\"text space\" v-if=\"hospitalDetail.viceDirectorNum\"> / \n          </view>\n          <view class=\"text\" v-if=\"hospitalDetail.viceDirectorNum\">副主任医师人\n            <text class=\"black\">{{hospitalDetail.viceDirectorNum}}\n            </text>\n          </view>\n        </view>\n        <view class=\"location\">  \n          <view class=\"address\">{{hospitalDetail.addressList[0]}}\n          </view>\n          <view class=\"navigation\" bindtap=\"openAddress\"> \n            <image src=\"../../../images/icon-location.png\"></image>\n            <view>导航\n            </view>\n          </view>\n          <view class=\"phone\" bindtap=\"openPhone\"> \n            <image src=\"../../../images/icon-phone.png\"></image>\n            <view>致电\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"departments-msg\"> \n        <view class=\"header\">    \n          <view></view>\n          <view class=\"title\">科室信息\n          </view>\n          <view class=\"text\">个科室\n       / 名医生\n      \n            <text class=\"black\">{{hospitalDetail.departmentSummary.departmentNumber}}\n            </text>\n            <text class=\"black\">{{hospitalDetail.departmentSummary.doctorNumber}}\n            </text>\n          </view>\n          <view class=\"all\" bindtap=\"toDepartmentList\">全部科室\n          </view>\n          <image src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n        <scroll-view v-if=\" departments.length > 0 \" scroll-with-animation=\"true\" scroll-x=\"true\">\n          <view class=\"departments\">\n            <view class=\"departments-content\" v-for=\"(item, key) in  departments \" :key=\"key\">\n              <block v-for=\"(items, key) in  item \" :key=\"key\">\n                <view class=\"departments-list\" :data-item=\" items \" bindtap=\"toDepartmentDetail\"> \n                  <view>\n                    <view>{{items.name}}\n                    </view>\n                  </view>\n                  <view>{{items.goodAt}}\n                  </view>\n                </view>\n              </block>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n      <view class=\"doctor-expert\" v-if=\"hospitalDetail.doctorPageVoList\"> \n        <view class=\"header\">   \n          <view></view>\n          <view class=\"title\">医院专家\n          </view>\n          <view class=\"all\" bindtap=\"toDotorList\">全部专家\n          </view>\n          <image src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n        <doctorList :lists=\" doctorPageVoList \" type=\"2\"></doctorList>\n      </view>\n      <view class=\"procedure\" v-if=\"hospitalDetail.medicalTreatmentProcess || hospitalDetail.bookingProcess || hospitalDetail.medicalInsuranceReimbursement || hospitalDetail.inspectionInstructions || hospitalDetail.enterOutIntro\">     \n        <view class=\"header\" bindtap=\"openProcedure\">   \n          <view></view>\n          <view class=\"title\">就医流程\n          </view>\n          <view class=\"all\">查看详情\n          </view>\n          <image src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n        <view class=\"text\" v-if=\"hospitalDetail.medicalTreatmentProcess\">\n\t\t\t{{hospitalDetail.medicalTreatmentProcess}}\n\t\t\n        </view>\n        <view class=\"text\" v-else-if=\"hospitalDetail.bookingProcess\">\n\t\t\t{{hospitalDetail.bookingProcess}}\n\t\t\n        </view>\n        <view class=\"text\" v-else-if=\"hospitalDetail.medicalInsuranceReimbursement\">\n\t\t\t{{hospitalDetail.medicalInsuranceReimbursement}}\n\t\t\n        </view>\n        <view class=\"text\" v-else-if=\"hospitalDetail.inspectionInstructions\">\n\t\t\t{{hospitalDetail.inspectionInstructions}}\n\t\t\n        </view>\n        <view class=\"text\" v-else>\n\t\t\t{{hospitalDetail.enterOutIntro}}\n\t\t\n        </view>\n      </view>\n      <halfScreenDialog :show=\" isPhoneShow \" :maskClosable=\"true\" title=\"致电\" bind:close=\"phoneClose\">\n        <view slot=\"desc\">\n          <view class=\"phone-contain\">\n            <view bindtap=\"ringUp\" :data-phone=\"item\" v-for=\"(item, index) in hospitalDetail.phoneList\">{{item}}\n            </view>\n          </view>\n        </view>\n      </halfScreenDialog>\n      <halfScreenDialog :show=\" isAddressShow \" :maskClosable=\"true\" title=\"导航\" bind:close=\"addressClose\">\n        <view slot=\"desc\">\n          <view class=\"address-contain\">\n            <view v-for=\"(item, key) in hospitalDetail.addressList\" :data-item=\"item\" :key=\"key\" bindtap=\"openMap\">{{item}}\n            </view>\n          </view>\n        </view>\n      </halfScreenDialog>\n      <view class=\"footer_alert\" v-if=\"procedureShow\"> \n        <view class=\"footer_title\">\n\t\t\t就医流程\n      \n          <image src=\"../../../images/half-screen-dialog-close.png\" class=\"footer_right\" bindtap=\"procedureClose\"></image>\n        </view>\n        <view class=\"inquiry-procedure-contain\">    \n          <view v-if=\"hospitalDetail.medicalTreatmentProcess\"> \n            <view class=\"procedure-box\"> \n              <view></view>\n              <view>就医流程\n              </view>\n            </view>\n            <view class=\"procedure-text\">{{hospitalDetail.medicalTreatmentProcess}}\n            </view>\n          </view>\n          <view v-if=\"hospitalDetail.bookingProcess\"> \n            <view class=\"procedure-box\"> \n              <view></view>\n              <view>预约流程\n              </view>\n            </view>\n            <view class=\"procedure-text\">{{hospitalDetail.bookingProcess}}\n            </view>\n          </view>\n          <view v-if=\"hospitalDetail.medicalInsuranceReimbursement\"> \n            <view class=\"procedure-box\"> \n              <view></view>\n              <view>医保报销\n              </view>\n            </view>\n            <view class=\"procedure-text\">{{hospitalDetail.medicalInsuranceReimbursement}}\n            </view>\n          </view>\n          <view v-if=\"hospitalDetail.inspectionInstructions\"> \n            <view class=\"procedure-box\"> \n              <view></view>\n              <view>检查须知\n              </view>\n            </view>\n            <view class=\"procedure-text\">{{hospitalDetail.inspectionInstructions}}\n            </view>\n          </view>\n          <view v-if=\"hospitalDetail.enterOutIntro\"> \n            <view class=\"procedure-box\"> \n              <view></view>\n              <view>出入院须知\n              </view>\n            </view>\n            <view class=\"procedure-text\">{{hospitalDetail.enterOutIntro}}\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"footer_alert_back\" v-if=\"procedureShow\" bindtap=\"procedureClose\"></view>\n      <view class=\"footer_alert\" v-if=\"detailsShow\"> \n        <view class=\"footer_title\">\n\t\t\t医院详情\n      \n          <image src=\"../../../images/half-screen-dialog-close.png\" class=\"footer_right\" bindtap=\"detailsClose\"></image>\n        </view>\n        <view class=\"details-contain\">   \n          <view class=\"title\" v-if=\"hospitalDetail.imageList\">医院图集\n          </view>\n          <view class=\"pic\" v-if=\"hospitalDetail.imageList\">\n            <image bindtap=\"checkPic\" :data-src=\"item.imageUrl\" v-for=\"(item, key) in hospitalDetail.imageList\" :src=\"item.imageUrl\" :key=\"key\"></image>\n          </view>\n          <view class=\"title\">医院简介\n          </view>\n          <view class=\"text\" v-if=\"hospitalDetail.introduction\">{{hospitalDetail.introduction}}\n          </view>\n        </view>\n      </view>\n      <view class=\"footer_alert_back\" v-if=\"detailsShow\" bindtap=\"detailsClose\"></view>\n    </view>\n  </view>"},"convertDir/pages/hospital/hospitalIndex/hospitalIndex":{"wxml":"\n  <view class=\"hospitalIndex-auto-container\"> \n    <view class=\"index_z\">\n      <navBar title-text=\"医院列表\" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view :class=\"[container,( isSrcWhyb ? 'djk-view' : '' )]\" style=\"padding-bottom: 0px\">         \n      <view class=\"address-box address-box-position\" :style=\"{top:  navBarHeight + 6 px}\">\n        <view class=\"address-box__current\">  \n          <view class=\"address-box__name\" v-if=\"dw_type\">定位中...\n            <image src=\"../../../images/location.png\"></image>\n          </view>\n          <view class=\"address-box__name\" v-else bindtap=\"selectAddress\">{{ address_data.cityName ? address_data.cityName : '定位中...' }}\n            <image src=\"../../../images/location.png\"></image>\n          </view>\n          <view class=\"search\" bindtap=\"goodsSearch\"> \n            <view class=\"search__input\">搜一搜医院/医生\n            </view>\n            <image class=\"search__img\" src=\"../../../images/search-icon-black.png\"></image>\n          </view>\n        </view>\n      </view>\n      <swiper autoplay=\"false\" interval=\"5000\" class=\"banner\" v-if=\" bannerList.length > 0 \" circular indicator-dots>\n        <swiper-item class=\"banner__item\" :key=\"key\" v-for=\"(item, key) in  bannerList \" wx:for-index=\"key\">\n          <image :src=\" item.imgUrl ? item.imgUrl+'@702x230' : '/images/banner_mr.png' \" data-skeleton-bgColor=\"#ededed\" mode=\"widthFix\" bindtap=\"toLink\" data-index=\"key\" :data-item=\"item\" class=\"sy-sj\" :data-activity_page_id=\" item.id \"></image>\n        </swiper-item>\n      </swiper>\n      <scroll-view class=\"nav-box\" v-if=\" specialArea.length > 0 \" scroll-with-animation=\"true\" scroll-x=\"true\">\n        <view class=\"nav__class\">\n          <view :class=\"[nav__content,(departmentId === item.id ? 'active' : '')]\" v-for=\"(item, key) in  specialArea \" :key=\"key\">\n            <view class=\"nav__list\" :data-item=\" item \" bindtap=\"hospitalSearch\">  \n              <image v-if=\"departmentId === item.id \" :src=\" item.iconSelectedUrl ? item.iconSelectedUrl :'/images/index-zq.png' \"></image>\n              <image v-else :src=\" item.iconUrl ? item.iconUrl :'/images/index-zq.png' \"></image>\n              <view class=\"nav__list__text\">{{ item.name }}\n              </view>\n            </view>\n          </view>\n        </view>\n      </scroll-view>\n      <view :class=\"[filter_cnt,(showFixed ? 'filter-group-position' : '')]\" :style=\"{top:  navBarHeight + 54 px}\">\n        <view class=\"filter\">   \n          <view class=\"filter_top\"> \n            <view style=\"display: flex;\">  \n              <view :class=\"[filter_tab,(filterSelected === '1' ? 'active' : ''),(onSwitch ? 'on' : '')]\" data-key=\"1\" bindtap=\"changeValue\"> \n                <text>{{departmentName}}\n                </text>\n                <image src=\"../../../images/filter_down.png\"></image>\n              </view>\n              <view :class=\"[filter_tab,(filterSelected === '2' ? 'active' : ''),((hospitalLevelIndex || hospitalTypeIndex) ? 'on' : '')]\" data-key=\"2\" bindtap=\"changeValue\"> \n                <text>全部医院\n                </text>\n                <image src=\"../../../images/filter_down.png\"></image>\n              </view>\n              <view :class=\"[filter_tab,(filterSelected === '3' ? 'active' : ''),(sortNumber ? 'on' : '')]\" data-key=\"3\" bindtap=\"changeValue\"> \n                <text>{{sortName}}\n                </text>\n                <image src=\"../../../images/filter_down.png\"></image>\n              </view>\n            </view>\n            <view class=\"switch-box\"> \n              <text :class=\"[switch-btn,(switchChecked === 2 ? 'active' : '')]\" data-key=\"2\" bindtap=\"switchChange\">全部\n              </text>\n              <text :class=\"[switch-btn,(switchChecked === 1 ? 'active' : '')]\" data-key=\"1\" bindtap=\"switchChange\">公立\n              </text>\n            </view>\n          </view>\n          <view class=\"filter_box\" v-if=\"filterParams.showDepartment\" style=\"padding-top:10rpx;\">\n            <view class=\"content\"> \n              <view class=\"left\">\n                <scroll-view scroll-y=\"true\" style=\"padding-bottom:10px\">\n                  <view :class=\"[item,( departmentId == item.id ? 'active' : '' )]\" :data-item=\" item \" v-for=\"(item, key) in  goodsArea \" :key=\"key\" bindtap=\"switchArea\">\n                {{item.name}}\n              \n                  </view>\n                </scroll-view>\n              </view>\n              <view class=\"right\">\n                <scroll-view scroll-y=\"true\" style=\"padding-bottom:10px\">\n                  <view class=\"scroll\">\n                    <view class=\"right_list\" v-for=\"(item, key) in  goodsList \" :key=\"key\" :data-item=\"item\" data-type=\"1\" bindtap=\"searchDepartment\">\n                      <view :class=\"[right_text,( identificationSecondId == item.id ? 'active' : '' )]\">{{ item.name }}\n                      </view>\n                    </view>\n                  </view>\n                </scroll-view>\n              </view>\n            </view>\n          </view>\n          <view class=\"filter_box\" v-if=\"filterParams.showHospital\">  \n            <view class=\"filter_item_main\"> \n              <view class=\"filter_item_title\">医院类型\n              </view>\n              <text v-for=\"(item, index) in hospitalType\" :key=\"index\" :data-id=\"item.typeId\" :class=\"[(item.typeId == hospitalTypeIndex ? \"on\" : \"\")]\" bindtap=\"searchType\">{{item.typeName}}\n              </text>\n            </view>\n            <view class=\"filter_item_main mt40\"> \n              <view class=\"filter_item_title\">医院等级\n              </view>\n              <text v-for=\"(item, index) in hospitalLevel\" :key=\"index\" :data-id=\"item.levelId\" :class=\"[(item.levelId == hospitalLevelIndex ? \"on\" : \"\")]\" bindtap=\"searchLevel\">{{item.levelName}}\n              </text>\n            </view>\n            <view class=\"filter_btn\"> \n              <text bindtap=\"resetFilter\">重置\n              </text>\n              <text bindtap=\"confirmFilter\">确认\n              </text>\n            </view>\n          </view>\n          <view class=\"filter_box filter_box_last\" v-if=\"filterParams.showOrder\">\n            <view class=\"filter_main\">\n              <block> \n                <text data-sort=\"1\" bindtap=\"changeSort\" :class=\"[(sortNumber == 1 ? \"on\" : \"\")]\">综合排序\n                </text>\n                <text data-sort=\"2\" bindtap=\"changeSort\" :class=\"[(sortNumber == 2 ? \"on\" : \"\")]\">离我最近\n                </text>\n              </block>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"nearby-drug-store\" v-if=\" address_data.latitude && nearbyDrugstoreList.length > 0 \">\n        <view class=\"medList_box\">\n          <hospitalList :lists=\" nearbyDrugstoreList \" pageFrom=\"hospitalIndex\"></hospitalList>\n        </view>\n      </view>\n      <view class=\"filter_mask\" bindtap=\"cancelFilter\" v-if=\"filterParams.showDepartment || filterParams.showHospital || filterParams.showOrder\"></view>\n      <view class=\"black_box layer1_box\" catchtouchmove=\"true\" v-if=\"isLayer1Show\"></view>\n      <view class=\"alert_box layer1_box\" catchtouchmove=\"true\" v-if=\"isLayer1Show\">  \n        <view class=\"title\">定位失败\n        </view>\n        <view class=\"detail\">请检查网络环境或者手机定位权限设置\n        </view>\n        <view class=\"btns_box\"> \n          <button class=\"left\" bindtap=\"selectAddress\">手动定位\n          </button>\n          <form class=\"button right\" report-submit=\"true\" bindsubmit=\"getLocation\">\n            <button class=\"right theme-text\" form-type=\"submit\">重新定位\n            </button>\n          </form>\n        </view>\n      </view>\n      <view class=\"mask\" catchtouchmove=\"preventTouchMove\" v-if=\"showModal\"></view>\n      <view class=\"modalDlg\" v-if=\"showModal\"> \n        <view class=\"useralert_quanyi\">系统目前仅支持武汉市\n        </view>\n        <view class=\"vipinfo\" bindtap=\"switchToWuHan\">切换到武汉市\n        </view>\n      </view>\n    </view>\n  </view>","json":{"hospitalList":"../../../component/hospitalList/hospitalList"},"wxss":".index_z {\n  position: relative;\n  z-index: 99999999;\n}\npage {\n  background: #F5F6FA;\n  height: 100%;\n  position: relative;\n}\n\npage::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n  color: transparent;\n}\n\n.container {\n  color: #111334;\n}\n\n.address-box {\n  /* border-bottom: 20rpx solid #f5f5f5; */\n  /* margin-bottom: 20rpx; */\n  background: #ffffff;\n  padding: 0rpx 16rpx 0 24rpx;\n  overflow: hidden;\n  height: 100rpx;\n  border-top:1px solid #F5F6FA;\n}\n\n.address-box-position{\n  position: fixed;\n  top:127rpx;\n  left:0;\n  width:100%;\n  z-index:4;\n  box-sizing: border-box;\n  /* border-top:1px solid #F5F6FA; */\n}\n.address-box:last-child {\n  border: 0;\n}\n\n.address-box__current {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  align-content: center;\n}\n\n.address-box__name {\n  font-size: 32rpx;\n  color: #111334;\n  font-weight: bold;\n  /* padding: 20rpx 0; */\n  display: flex;\n  align-items: center;\n}\n.address-box__name image{\n  width: 31rpx;\n  height: 36rpx;\n  margin-right: 5rpx;\n}\n\n\n.search-bg__white {\n  background-color: #FFFFFF;\n  padding: 20rpx 24rpx;\n  border-top-left-radius: 16rpx;\n  border-top-right-radius: 16rpx;\n}\n\n.search {\n  border-radius: 90rpx;\n  height: 64rpx;\n  background:#f0f0f5;\n  color: #9D9FB8;\n  position: relative;\n  overflow: hidden;\n  width: 72%;\n  margin-left: 24rpx;\n}\n\n.search .search__input {\n  height: 64rpx;\n  line-height: 64rpx;\n  font-size: 28rpx;\n  padding-left: 76rpx;\n}\n\n.search .search__img {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  left: 34rpx;\n  top: 18rpx;\n  z-index: 1;\n}\n\n.banner {\n  height: 220rpx;\n  overflow: hidden;\n  padding: 0 24rpx;\n  background-color: #FFFFFF;\n  box-sizing: border-box;\n  border-radius: 12rpx;\n  margin-top: 100rpx;\n}\n\n.banner .banner__item{\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n.banner .banner__item image, .capsule-ad image {\n  width: 100%;\n  display: initial;\n}\n\n/* 默认指示点的样式 */\n.banner .wx-swiper-dot {\n  width: 6rpx;\n  height: 6rpx;\n  background: rgba(255,255,255,0.45);\n  margin: -6rpx;\n  padding: 0;\n}\n\n/* 选中指示点的样式 */\n.banner .wx-swiper-dot.wx-swiper-dot-active {\n  width: 16rpx;\n  height: 6rpx;\n  background: #ffffff;\n  border-radius: 4rpx;\n}\n\n.nav-box {\n  width: 100%;\n  padding: 0 24rpx;\n  box-sizing: border-box;\n  padding-top: 30rpx;\n  background: linear-gradient(to bottom, #FFFFFF, #F5F6FA);\n}\n\n.nav__class {\n  display: flex;\n}\n\n.nav__list {\n  width: 96rpx;\n  text-align: center;\n}\n\n.nav__list:first-child {\n  margin-bottom: 20rpx;\n}\n\n.nav__content {\n  display: flex;\n  flex-flow: column;\n  margin-right: 17rpx;\n}\n.nav__content.active::after{\n  content:'';\n  width: 96rpx;\n  height: 4rpx;\n  background: #00b955;\n  border-radius: 12px;\n}\n\n.nav__content:last-child {\n  margin-right: 0;\n}\n\n.nav__list image {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n}\n\n.nav__list__text {\n  font-size: 24rpx;\n  text-align: center;\n}\n\n.list-content {\n  display: flex;\n  padding-bottom: 30rpx;\n}\n\n.empty {\n  flex: 1;\n}\n\n.common_section {\n  display: block;\n  border: 1rpx solid rgba(48, 48, 60, 0.08);\n}\n\n.default_color {\n  color: #ff3b30;\n}\n\n.close_img {\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  bottom: -136rpx;\n  left: 50%;\n  margin-left: -30rpx;\n  z-index: 1002;\n}\n\n.coupon_alert .coupon_section .cell {\n  height: 146rpx;\n  box-sizing: border-box;\n  box-shadow: 0;\n  border-radius: 8rpx;\n}\n\n.coupon_alert .coupon_section .cell:first-child {\n  margin-top: 0;\n}\n\n.coupon_alert .coupon_section .cell_center {\n  width: 70%;\n  padding: 12rpx 15rpx;\n  height: 100%;\n  border-right: 2rpx dashed #d6d6d6;\n}\n\n.coupon_alert .coupon_section .cell_center .tag {\n  background: #e4393b;\n  color: #FFFFFF;\n  border-color: #FFFFFF\n}\n\n.coupon_alert .coupon_section .cell_center .empty {\n  margin-top: 8rpx;\n  font-size: 22rpx;\n  color: #8a8080;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.coupon_alert .coupon_section .cell_center .text_block {\n  margin-bottom: 0;\n  font-size: 20rpx;\n}\n\n.coupon_alert .coupon_section .cell_center .name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.coupon_alert .coupon_section .cell_left {\n  background: #fff;\n  color: #e4393b;\n  width: 140rpx;\n  height: 100%;\n}\n\n.coupon_alert .coupon_section .cell_left .dot {\n  position: absolute;\n  left: 0;\n  background: #ff3131;\n  width: 16rpx;\n  height: 16rpx;\n  border-radius: 16rpx;\n  margin-left: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .dot_top {\n  top: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .dot_bottom {\n  bottom: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .price {\n  margin-top: 25rpx;\n  font-size: 55rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .price .text {\n  font-size: 20rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .button {\n  border: 1px solid #e02e24;\n  border-radius: 15px;\n  width: 90rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  font-size: 24rpx;\n  margin: 10rpx auto 0;\n}\n\n.coupon_alert .coupon_section .cell_left .gray {\n  color: #8a8080;\n  border-color: #8a8080;\n}\n\n.ad_box {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 500rpx;\n  height: 640rpx;\n  border-radius: 14rpx;\n  z-index: 99;\n}\n\n.ad_box .contents {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n}\n\n.ad_box .contents image {\n  width: 100%;\n}\n\n.coupon_black {\n  z-index: 1001;\n}\n\n/* 附近药店 */\n.nearby-drug-store {\n  margin: 0 24rpx 20rpx;\n  /* background-color: #FFFFFF; */\n  border-radius: 12rpx;\n}\n.nearby-drug-store.mt318{\n  margin-top:318rpx;\n}\n.nearby-drug-store__title {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 24rpx 16rpx;\n  font-size: 36rpx;\n  color: #333;\n  position: relative;\n}\n\n.nearby-drug-store_more {\n  font-size: 24rpx;\n  padding-right: 20rpx;\n  color: #9D9FB8;\n}\n\n.nearby-drug-store_arrow {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  right: 15rpx;\n}\n\n.nearby-drug-store__tags {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 72rpx;\n  color: #666883;\n  font-size: 22rpx;\n  border-top: 1rpx solid #EFF0F5;\n}\n\n.nearby-drug-store__tags view {\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n}\n\n.nearby-drug-store__tags image {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 10rpx;\n}\n\n.scrollbar1 {\n  width: 40rpx;\n  height: 6rpx;\n  background-color: #E1E1EB;\n  margin: 13rpx auto 0;\n  border-radius: 3rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.scrollbar1 view {\n  height: 100%;\n  position: absolute;\n  transition: all 0.2s;\n  left: 0;\n  top: 0;\n  border-radius: 3rpx;\n}\n\n.official-account {\n  width: 702rpx; margin: auto;\n  box-shadow: 0px 3px 7px 0px rgba(0,0,0,0.15);\n  position: fixed;\n  bottom: 25rpx;\n  left: 24rpx;\n}\n\n.official-account__close {\n  position: absolute;\n  top: 6rpx;\n  right: 0;\n  width: 70rpx;\n  height: 60rpx;\n  text-align: center;\n  font-size: 50rpx;\n  line-height: 50rpx;\n  color: #999999;\n  transform: rotate(45deg);\n}\n\n.layer1_box{\n  z-index: 1000001;\n}\n\n.nearby-drug-store-title{\n  font-size: 36rpx;\n  color: #111334;\n  font-weight: bold;\n}\n\n.inquiry-box {\n  background: #ffffff;\n  border-radius: 12rpx;\n  display: flex;\n  align-items: flex-end;\n  margin: 20rpx 24rpx;\n}\n\n.inquiry-box .left {\n  flex: 1;\n  font-size: 36rpx;\n  padding: 22rpx 0 24rpx 21rpx;\n}\n\n.inquiry-box .left .text {\n  display: flex;\n  align-items: center;\n  font-weight: bold;\n}\n\n.inquiry-box .left .text image {\n  width: 37rpx;\n  height: 37rpx;\n  margin-right: 6rpx;\n}\n\n.inquiry-box .left .dec {\n  font-size: 24rpx;\n  line-height: 24rpx;\n  color: #9D9FB8;\n  margin-top: 13rpx;\n}\n\n.inquiry-box .left .button {\n  font-size: 26rpx;\n  width: 152rpx;\n  height: 48rpx;\n  line-height: 48rpx;\n  font-weight: bold;\n  border-radius: 48rpx;\n  text-align: center;\n  color: #FFFFFF;\n  margin-top: 13rpx;\n}\n\n.inquiry-box .left .tag {\n  height: 32rpx;\n  line-height: 32rpx;\n  font-weight: normal;\n  color: #F93A4A;\n  background: #FFEEEF;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  padding: 0 10rpx;\n  margin-left: 10rpx;\n}\n\n.inquiry-box image {\n  margin-right: 20rpx;\n  width: 250rpx;\n  height: 188rpx;\n}\n\n/* 筛选 */\n.filter_cnt{\n  /* position: absolute; */\n  /* top: 230rpx;\n  left: 0;\n  right: 0;\n  bottom: 0; */\n  /* position:relative; */\n  z-index: 3;\n  /* background: #fff; */\n  border-bottom-left-radius: 12rpx;\n  border-bottom-right-radius: 12rpx;\n}\n.filter{\n  padding: 24rpx 0;\n  /* height: 40rpx; */\n  /* border-bottom: 1px solid rgba(0,0,0,0.08); */\n  position: relative;\n  /* background: #fff; */\n  z-index: 3;\n}\n.filter-group-position{\n  position: fixed;\n  top:226rpx;\n  left:0;\n  width:100%;\n  background: #fff;\n  border-top:1px solid #eeeeee;\n}\n.filter .filter_top{\n  padding:0 24rpx;\n  display: flex;\n  line-height: 33rpx;\n  justify-content: space-between;\n}\n\n.filter .on{\n  color: #ED3943;\n}\n.filter .filter_tab{\n  margin-right: 25rpx;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.filter .filter_tab text{\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 24rpx;\n  color: #666883;\n  max-width: 116rpx;\n}\n.filter .filter_tab image{\n  width: 14rpx;\n  height: 11rpx;\n  margin-left: 5rpx;\n}\n.filter .filter_tab.active text{\n  color: #111334;\n  font-weight: 500;\n}\n.filter .filter_tab.active image{\n  transform: rotate(180deg);\n}\n.filter .filter_tab.on text{\n  color: #111334;\n  font-weight: 500;\n}\n.filter .filter_box{\n  position: absolute;\n  top: 80rpx;\n  background: #fff;\n  padding:20rpx 0 0;\n  left: 0;\n  right: 0;\n  border-bottom-left-radius: 12rpx;\n  border-bottom-right-radius: 12rpx;\n}\n.filter .filter_box.filter_box_last{\n  padding-top:0;\n}\n.filter_box_top{\n  background: #fff;\n  padding:20rpx 0 40rpx;\n}\n.filter .filter_box .filter_item_main{\n  padding:0 24rpx;\n}\n.filter .filter_box .filter_item_main .filter_item_title{\n  font-size: 28rpx;\n  font-weight: 500;\n}\n.filter .filter_box .filter_item_main text{\n  /* padding:15rpx 32rpx; */\n  color: #666883;\n  background: #f5f7f8;\n  border-radius: 27rpx;\n  font-size: 24rpx;\n  margin-right:20rpx;\n  margin-top:20rpx;\n  display: inline-block;\n  height: 54rpx;\n  line-height: 54rpx;\n  box-sizing: border-box;\n  width: 160rpx;\n  text-align: center;\n}\n.filter .filter_box .filter_item_main text.on{\n  background: #00b955;\n  color: #ffffff;\n}\n\n.mt40{\n  margin-top: 40rpx;\n}\n.filter .filter_box .filter_main{\n  flex: 1;\n}\n.filter .filter_box .filter_main text{\n  display: block;\n  line-height: 80rpx;\n  /* border-bottom: 2rpx solid rgba(0,0,0,0.05); */\n  padding-left: 24rpx;\n  font-size: 28rpx;\n  color: #666883;\n}\n.filter .filter_box .filter_main text.on{\n  color: #00b955;\n}\n\n.filter .filter_box .filter_btn{\n  /* background: #fff; */\n  width: 100%;\n  display: flex;\n  border-top: 1rpx solid  #eeeeee;\n  margin-top: 40rpx;\n  /* position: fixed; */\n  /* left: 0; */\n  /* bottom: 0; */\n}\n.filter .filter_box .filter_btn text{\n  text-align: center;\n  flex: 1;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #292626;\n  background: #fff;\n}\n.filter .filter_box .filter_btn text:first-child{\n  border-bottom-left-radius: 12rpx;\n}\n.filter .filter_box .filter_btn text:nth-child(2){\n  background: #00b955;\n  color: #fff;\n  border-bottom-right-radius: 12rpx;\n}\n.filter .filter_block{\n  padding: 30rpx;\n  height: 700rpx;\n}\n.filter .filter_block .filter_block_title{\n  line-height: 42rpx;\n  font-size: 28rpx;\n}\n.filter .filter_block .filter_block_li{\n  padding-top: 20rpx;\n  padding-bottom: 10rpx;\n  display: flex;\n  flex-wrap: wrap;\n}\n.filter .filter_block .filter_block_li text{\n  line-height: 50rpx;\n  padding: 0 30rpx;\n  background:rgba(250,250,250,1);\n  border:2rpx solid rgba(250,250,250,1);\n  border-radius:25rpx;\n  margin: 0 10rpx 20rpx;\n  font-size: 26rpx;\n}\n.filter .filter_block .filter_block_li text.on{\n  border:2rpx solid rgba(237,57,67,1);\n  background:rgba(255,247,248,1);\n}\n.filter_scroll{\n  white-space: nowrap;\n  box-sizing: border-box;\n  padding: 20rpx 28rpx;\n  border-bottom: 1px solid rgba(0,0,0,0.08);\n  position: relative;\n  background: #fff;\n  z-index: 2;\n}\n\n/*隐藏滚动条*/\n::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n  color: transparent;\n}\n.filter_scroll text{\n  background:rgba(250,250,250,1);\n  line-height: 60rpx;\n  border-radius:30rpx;\n  padding: 0 20rpx;\n  box-sizing: border-box;\n  display: inline-block;\n  border:2rpx solid rgba(250,250,250,1);\n  margin-right: 20rpx;\n  font-size: 28rpx;\n}\n.filter_scroll text.on{\n  border:2rpx solid rgba(237,57,67,1);\n  color: #ED3943;\n  background:rgba(255,247,248,1);\n}\n.filter_mask{\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  z-index: 1;\n  background: rgba(0,0,0,0.5);\n}\n.switch-box {\n  /* margin-left:103rpx; */\n  display: flex;\n}\n.switch-btn {\n  display: inline-block;\n  font-size: 24rpx;\n  width:90rpx;\n  height:40rpx;\n  line-height:40rpx;\n  box-sizing: border-box;\n  background: #ffffff;\n  color: #666883;\n  border-radius: 20rpx;\n  position: relative;\n  text-align:right;\n  padding-right: 15rpx;\n}\n.filter-group-position .switch-btn{\n  background: #f5f6fa;\n}\n.switch-btn:nth-child(1){\n  left:20rpx;\n  text-align:left;\n  padding-left: 15rpx;\n}\n.switch-btn.active{\n  background: #00b955;\n  color: #ffffff;\n  z-index:3;\n  text-align:center;\n  width:72rpx;\n  padding:0;\n}\n/* 科室筛选 */\n.filter_box .content {\n  display: flex;\n  width: 100%;\n  height: 870rpx;\n  /* margin-top: 20rpx; */\n  /* height: 100%; */\n}\n\n.filter_box .content .left {\n  width: 270rpx;\n  height:100%;\n  background: #f5f6fa;\n  font-size: 28rpx;\n  overflow: scroll;\n  flex-shrink: 0;\n  -webkit-overflow-scrolling: touch;\n  border-bottom-left-radius: 12rpx;\n}\n.filter_box .content .right {\n  width: calc(100% - 170rpx);\n  overflow: scroll;\n  height:100%;\n}\n.filter_box .scroll{\n  display: flex;\n  flex-flow: row wrap;\n  align-content: flex-start;   \n}\n.filter_box .content .left .item {\n  color: #666883;\n  padding: 25rpx 0 25rpx 24rpx;\n  position: relative;\n  text-align: left;\n  font-size: 28rpx;\n}\n.filter_box .content .left .active {\n  background: #fff;\n  color: #00b955;\n  font-weight: bold;\n  font-size: 28rpx;\n  position: relative;\n}\n\n/* .content .left .active::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 6rpx;\n  height: 24rpx;\n  background: #00b955;\n  border-radius: 0 4rpx 4rpx 0;\n  margin-top: -12rpx;\n} */\n\n.filter_box .right_list{\n  width: 480rpx;\n  height: auto;\n  margin-left: 42rpx;\n  margin-top: 25rpx;\n  margin-bottom: 25rpx;\n  position: relative;\n}\n\n/* .right_list::before {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 0;\n  width: 140rpx;\n  height: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin-left: -70rpx;\n} */\n\n/* .right_img{\n  display: block;\n  height: 140rpx;\n  width: 140rpx;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n  margin: auto;\n} */\n.filter_box .right_text{\n  font-size: 28rpx;\n  text-align: left;\n  color: #111334;\n  /* margin-top: 13rpx; */\n}\n.filter_box .right_text.active{\n  color: #00b955;\n  font-weight: bold;\n}\n\n/* 自定义弹窗 */\n.mask{\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background: #000;\n  z-index: 9000;\n  opacity: 0.5;\n}\n.modalDlg{\n  width: 610rpx;\n  /* height: 240rpx; */\n  position: fixed;\n  top: 40%;\n  z-index: 9999;\n  margin: 0rpx 70rpx;\n  background-color: #fff;\n  border-radius: 10rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.useralert_quanyi{\n  font-size: 32rpx;\n  color: #333333;\n  padding:45rpx 0;\n  width:100%;\n  border-bottom:1px solid #e8e8e8;\n  text-align:center;\n}\n.vipinfo{\n  margin: 30rpx 0;\n  color: #00B955;\n  font-size: 32rpx;\n}","js":"/**\n * desc: 荷叶医院首页\n * \n */\nconst app = getApp();\nlet startTime, endTime;\nimport {\n  ajax,\n  ajax2,\n  indexGetLocation,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      specialData: [],//金刚位原数据\n      filterParams: { //筛选\n        showDepartment:0,\n        showHospital: 0,\n        showOrder: 0,\n      },\n      hospitalLevel:[],//医院等级\n      hospitalType:[],//医院类型\n      goodsArea: [],//科室列表一    goodsLists: [],//科室列表二级暂存\n      identificationId: '', //科室列表一级id\n      identificationSecondId:'',\n      filterSelected:0,//筛选项选中\n      switchChecked:2, //1-公立筛选 2-全部\n      departmentId: '',//一级科室id\n      secondDepartmentId: '',//二级科室id\n      hospitalLevelIndex: '',//医院等级id\n      hospitalTypeIndex: '',//医院类型id\n      sortNumber: 1,//1-综合排序，2-按距离排序\n      sortName:'综合排序',\n      departmentName:'全部科室',\n      showFixed:0,//吸顶判断\n      isLayer1Show: false,\n      nearbyDrugstoreList: [],//医院列表\n      address_data: {},\n      bannerList: [],\n      url_link: cdnStaticResourceUrl,\n      specialArea: [],\n      scrollTop: 0,\n      pageNum: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      isAjaxing: false,\n      dw_type: false,\n      showModal: false,\n      source:'',\n      onSwitch:false\n    };\n  },\n  onLoad: function (options) {\n    let source = options.source;\n    //获取定位信息\n    if (source){\n      this.setData({\n        source: source\n      })\n    }\n    console.log(options.source)\n    if (this.data.source) {\n      this.getLocation();\n    } else {\n      this.getAddressData();\n    }\n    // this.getLocation();\n    //获取首页轮播图和热门科室\n    this.getBanner();\n    //获取医院等级、医院类型\n    this.getHospitalLevelAndType();\n    //获取科室列表\n    this.getClassification();\n  },\n  onShow: function () {\n    \n    // this.getAddressData();\n    startTime = +new Date();\n    // 埋点：曝光事件\n    getApp().globalData.burySpotSDK.track('page_hospitalHomeExpo');\n  },\n  \n  /**\n  * @description: 获取更新定位信息\n  */\n  getAddressData() {\n    let appAddressData = getApp().hospital_address;// app.js存储的地址信息\n    console.log(appAddressData)\n    \n    // 判断全局是否存过定位地址\n    if (appAddressData.latitude) {\n      this.setData({\n        isLayer1Show: false,\n        dw_type: false,\n        address_data: appAddressData\n      })\n      // 手动定位回来没有citycode处理方式\n      if (!appAddressData.cityCode || !appAddressData.adress) {\n        this.getCitycode(appAddressData.longitude, appAddressData.latitude);\n      } else {\n        this.getHospitalList();\n      }\n    } else {\n      this.getLocation();\n    }\n  },\n  selectAddress() {\n    // 如果没有经纬度跳转到选择地址清空绑定内容\n    if (!this.data.address_data.latitude) {\n      this.setData({\n        address_data: {}\n      })\n    }\n    let data = JSON.stringify(this.data.address_data).replace(/&/, 'ASCII38')\n    Taro.navigateTo({\n      url: `/pages/hospital/cityChoice/cityChoice?address_data=${data}`\n    })\n    getApp().globalData.burySpotSDK.track('action_hospitalHome_locationClick');\n  },\n\n  // 获取附近医院list\n  getHospitalList() {\n    if (this.isAjaxing) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    let url = 'lotusleaf/hospital/getHospitalList';\n    ajax2('POST', url, {\n      lat: this.data.address_data.latitude,\n      lng: this.data.address_data.longitude,\n      departmentId:this.data.departmentId,\n      secondDepartmentId: this.data.secondDepartmentId,\n      typeId: this.data.hospitalTypeIndex,\n      levelId: this.data.hospitalLevelIndex,\n      ownerId: this.data.switchChecked == 1 ? this.data.switchChecked : '',\n      sortNumber: this.data.sortNumber,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize,\n      cityCode: this.data.address_data.cityCode\n    }, (res) => {\n      if (res.data.code == 0) {\n        const resData = res.data.result;\n        this.setData({\n          nearbyDrugstoreList: resData ? this.data.pageNum == 1 ? resData.list : [...this.data.nearbyDrugstoreList, ...resData.list] : [],\n          hasNextPage: (resData && resData.hasNextPage) || false,\n          isAjaxing: false\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n    }, (res) => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  getLocation() {\n    indexGetLocation((longitude, latitude) => {\n      if (!longitude) {\n        this.setData({\n          isLayer1Show: true,\n          dw_type: true,\n          address_data: {},\n          ['address_data.adress']: '定位失败，请重新定位'\n        })\n        app.address_data = {};\n        return false\n      }\n      this.getCitycode(longitude, latitude, 'fromOnShow');\n    })\n  },\n  /**\n  * @description: 通过经纬度获取Citycode\n  * @params  {String} type是否记录当前获取地址时间\n  * return \n  **/\n  getCitycode(longitude, latitude, type) {\n    Taro.showLoading({\n      title: '加载中'\n    })\n    // 'miniapp/miniappController/getYkqDrugstoreByLongitude'\n    ajax2('post', 'lotusleaf/hospital/common/queryCityByLatLong', {\n      latitude: latitude,\n      longitude: longitude\n    }, (res) => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.setData({\n          isLayer1Show: false,\n          dw_type: false,\n          address_data: res.data.result,\n          [\"address_data.latitude\"]: latitude,\n          [\"address_data.longitude\"]: longitude,\n          [\"address_data.adress\"]: res.data.result.adress,\n          [\"address_data.cityCode\"]: res.data.result.cityCode,\n          [\"address_data.cityName\"]: res.data.result.cityName,\n          [\"address_data.title\"]: res.data.result.title\n        })\n        if (res.data.result.cityCode != '420100'){\n          this.setData({\n            showModal:true\n          })\n        }else{\n          this.getHospitalList();\n        } \n        \n      } else {\n        this.setData({\n          isLayer1Show: true,\n          ['address_data.adress']: '定位失败，请重新定位'\n        })\n      }\n    }, (res) => {\n      Taro.hideLoading();\n      this.setData({\n        isLayer1Show: true,\n        ['address_data.adress']: '定位失败，请重新定位'\n      })\n    })\n  },\n  //切换到武汉\n  switchToWuHan() {\n    this.setData({\n      showModal: false,\n      dw_type: false,\n      [\"address_data.adress\"]: \"武汉市\",\n      [\"address_data.cityCode\"]: \"420100\",\n      [\"address_data.cityName\"]: \"武汉市\",\n      [\"address_data.title\"]: \"武汉市\"\n    })\n    console.log(this.data.address_data)\n    app.hospital_address = this.data.address_data;\n    this.getHospitalList();\n  },\n  handleDataProcessing(data) {//金刚图数据处理方法\n    let result = [];\n    for (var i = 0; i < data.length; i += 2) {\n      result.push(data.slice(i, i + 2));\n    }\n    return result;\n  },\n \n  // 搜索跳转\n  goodsSearch() {\n    // 搜索跳转\n    Taro.navigateTo({\n      url: `/pages/hospital/search/search`\n    })\n    // 数据上报\n    getApp().globalData.burySpotSDK.track('action_enterHospitalHomeSearchClick')\n  },\n  // 轮播图点击\n  toLink(e) {\n    let target = e.currentTarget.dataset.item;\n    console.log(target)\n    //跳转小程序外部链接\n    let url = this.getCompleteUrl(target.link);\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n    })\n    //跳转小程序页面\n    // Taro.switchTab({\n    //   url: '/pages/noteIndex/noteIndex'//target.link\n    // })\n    getApp().globalData.burySpotSDK.track('action_hospitalHome_bannerClick')\n  },\n  /**\n   * @description: 获取 url 参数\n   * @params  {String} url\n   * return {String} 格式化后的 url\n   */\n  getCompleteUrl(url) {\n    let resultUrl = '';\n    // 分割url\n    let urlArray = url.split('?');\n    // 获取全局sess_key\n    let token = getApp().globalData.sess_key;\n    // 区分 url 后是否带参数\n    if (urlArray[1]) {\n      resultUrl = `${urlArray[0]}?${urlArray[1]}&token=${token}`;\n    } else {\n      resultUrl = `${urlArray[0]}?token=${token}`;\n    }\n    return resultUrl;\n  },\n  // 金刚位点击\n  hospitalSearch(e){\n    let currentItem = e.currentTarget.dataset.item;\n    let firstItem = this.data.goodsArea.filter(item => item.id == currentItem.id);\n    console.log(currentItem)\n    this.setData({\n      departmentId: currentItem.id,\n      secondDepartmentId:null,//全部\n      identificationSecondId:'',//未选择\n      departmentName: currentItem.name,\n      identificationId: currentItem.id,\n      goodsLists: (firstItem[0] && firstItem[0].subDepartments) ? firstItem[0].subDepartments : [],\n      goodsList: (firstItem[0] && firstItem[0].subDepartments) ? firstItem[0].subDepartments : [],\n      onSwitch:true\n    })\n    \n    console.log(this.data.goodsList)\n    this.data.pageNum = 1\n    this.cancelFilter();\n    this.getHospitalList();\n    getApp().globalData.burySpotSDK.track(`action_hospitalHome_vajraClick-${currentItem.id}`);\n  },\n  onPageScroll(e) {\n    if (e.scrollTop>200){\n      this.setData({ \n        scrollTop: e.scrollTop,\n        showFixed: 1,\n      })\n    }\n    else{\n      if (!this.data.filterParams.showDepartment && !this.data.filterParams.showHospital && !this.data.filterParams.showOrder){\n        this.setData({\n          scrollTop: e.scrollTop,\n          showFixed: 0\n        })\n      }\n      \n    }\n    console.log(e.scrollTop)\n  },\n  //获取首页轮播图和热门科室\n  getBanner() {\n    ajax2('post', \"lotusleaf/hospital/index/upperPart\", {}, (res) => {\n      if (res.data.code == 0) {\n        if (res.data.result) {\n          this.data.specialArea = res.data.result.hotDepartments;\n          this.data.bannerList = res.data.result.linkImages;\n        }\n        this.setData({\n          bannerList: this.data.bannerList,\n          specialArea: this.data.specialArea\n        })\n      }\n    })\n  },\n  // 获取医院等级、医院类型\n  getHospitalLevelAndType(e) {\n    let that = this;\n    let url = 'lotusleaf/hospital/common/getHospitalLevelAndType';\n    ajax2('post', url, {}, res => {\n      Taro.hideLoading({})\n      if (res.data.code == 0) {\n        let data = res.data.result;\n        console.log(data, data.level)\n        this.setData({\n          hospitalLevel: data.level,\n          hospitalType: data.type\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    }, function () {\n      Taro.showToast({\n        icon: 'none',\n        title: '请求失败'\n      })\n    })\n  },\n  // 获取科室列表\n  getClassification(e) {\n    let that = this;\n    let url = 'lotusleaf/hospital/department/confTree';\n    ajax2('post', url, {}, res => {\n      Taro.hideLoading({})\n      if (res.data.code == 0) {\n        let data = res.data.result;\n        let allItem = {\n          id: '',\n          level: 1,\n          name: \"全部科室\",\n          subDepartments:[\n            {\n              id: null,\n              parentId:'',\n              level: 2,\n              name: \"全部\",\n            }\n          ]\n        }\n        data.unshift(allItem)\n        console.log(data)\n        const totalArr = data.filter(item => item);\n        console.log(totalArr)\n        this.setData({\n          goodsArea: totalArr,\n          departmentId: totalArr[0] ? totalArr[0].id : '',\n          // identificationId: totalArr[0] ? totalArr[0].id : '',\n          goodsList: totalArr[0] ? totalArr[0].subDepartments : []\n        })\n\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    }, function () {\n      Taro.showToast({\n        icon: 'none',\n        title: '请求失败'\n      })\n    })\n  },\n  //通过点击记录一级分类id标识\n  switchArea(e) {\n    let item = e.currentTarget.dataset.item\n    this.data.identificationId = this.data.departmentId\n    this.data.goodsLists = this.data.goodsList\n    this.data.identificationSecondId = this.data.secondDepartmentId\n    this.setData({\n      departmentId: item.id,\n      // secondDepartmentId: '',\n      identificationSecondId:'',\n      goodsList: item.subDepartments ? item.subDepartments : []\n    })\n  },\n  //点击二级科室筛选医院\n  searchDepartment(e){\n    console.log(e, e.currentTarget.dataset.item)\n    let item = e.currentTarget.dataset.item\n    let firstItem = this.data.goodsArea.filter(items => items.id == item.parentId);\n    this.setData({\n      secondDepartmentId: item.id,\n      identificationSecondId: item.id,\n      departmentName: item.id ? item.name : firstItem[0].name,\n      departmentId: item.parentId,\n      onSwitch: (item.id || item.parentId) ? true : false\n    })\n    this.data.pageNum = 1\n    this.cancelFilter();\n    this.getHospitalList();\n  },\n  //点击医院类型筛选医院\n  searchType(e){\n    console.log(e, e.currentTarget.dataset.id)\n    let id = e.currentTarget.dataset.id\n    this.setData({\n      hospitalTypeIndex: id\n    })\n  },\n  //点击医院等级筛选医院\n  searchLevel(e) {\n    console.log(e, e.currentTarget.dataset.id)\n    let id = e.currentTarget.dataset.id\n    this.setData({\n      hospitalLevelIndex: id\n    })\n  },\n  // 筛选tab切换\n  changeValue(event) {\n    let num = event.currentTarget.dataset.key;\n    if (num == 1) {\n      if (this.data.scrollTop < 200) {\n        Taro.pageScrollTo({\n          scrollTop: 200\n        })\n      }\n      this.setData({\n        filterSelected: num,\n        showFixed: 1,\n        filterParams: {\n          showDepartment: 1,\n          showHospital: 0,\n          showOrder: 0,\n        }\n      })\n      // this.cancelFilter();\n    } else if (num == 2) {\n      if(this.data.scrollTop < 200){\n        Taro.pageScrollTo({\n          scrollTop: 200\n        })\n      }\n      this.setData({\n        filterSelected: num,\n        showFixed: 1,\n        filterParams: {\n          showDepartment:0,\n          showHospital: 1,\n          showOrder: 0,\n        }\n      })\n      console.log(this.data.filterSelected)\n    } else if (num == 3) {\n      if (this.data.scrollTop < 200) {\n        Taro.pageScrollTo({\n          scrollTop: 200\n        })\n      }\n      this.setData({\n        filterSelected: num,\n        showFixed: 1,\n        filterParams: {\n          showDepartment:0,\n          showHospital: 0,\n          showOrder: 1,\n        }\n      })\n    }\n  },\n  //点击综合排序筛选医院\n  changeSort(event) {\n    let sort = event.currentTarget.dataset.sort;\n    this.setData({\n      sortNumber: sort,\n      sortName: sort == 1 ? '综合排序' : '离我最近'\n    })\n    this.data.pageNum = 1\n    this.cancelFilter();\n    this.getHospitalList();\n  },\n  //全部、公立切换\n  switchChange(event){\n    let num = event.currentTarget.dataset.key;\n    if (num == 2) { //全部\n      this.setData({\n        switchChecked: 2\n      })\n    } else if (num == 1) { //公立\n      this.setData({\n        switchChecked: 1\n      })\n      // 数据上报\n      getApp().globalData.burySpotSDK.track('action_hospitalHome_governmentClick')\n    }\n    this.data.pageNum = 1\n    this.cancelFilter();\n    this.getHospitalList();\n  },\n  // 重置\n  resetFilter() {\n    this.setData({\n      hospitalTypeIndex: '',\n      hospitalLevelIndex: ''\n    })\n    this.data.pageNum = 1\n    this.confirmFilter();\n    this.getHospitalList();\n  },\n  // 确认\n  confirmFilter() {\n    this.data.pageNum = 1\n    this.getHospitalList();//获取医院列表接口\n    this.cancelFilter();\n  },\n  //关闭筛选项\n  cancelFilter() {\n    Taro.pageScrollTo({\n      scrollTop: 0\n    })\n    this.setData({\n      filterSelected:0,\n      showFixed: 0,\n      filterParams: {\n        showDepartment:0,\n        showHospital: 0,\n        showOrder: 0,\n      },\n      secondDepartmentId: this.data.identificationSecondId == '' ? this.data.secondDepartmentId : this.data.identificationSecondId,\n      identificationSecondId: this.data.secondDepartmentId,\n      departmentId: this.data.identificationSecondId == '' ? this.data.identificationId : this.data.departmentId,\n      goodsList: this.data.identificationSecondId == '' ? this.data.goodsLists : this.data.goodsList\n    })\n  },\n  //下拉刷新\n  onPullDownRefresh: function (isGetLocation) {\n    Taro.pageScrollTo({\n      scrollTop: 0\n    })\n    this.onShow();\n    Taro.stopPullDownRefresh() //停止下拉刷新\n  },\n  // 上拉加载 \n  onReachBottom() {\n    const hasNextPage = this.data.hasNextPage;\n    if (hasNextPage) {\n      this.data.pageNum = ++this.data.pageNum\n      this.getHospitalList();\n    }\n  },\n  onHide: function () {\n    endTime = +new Date();\n    console.log(\"页面停留时间：\" + (endTime - startTime))\n    let stayTime = endTime - startTime;\n    // 页面停留时间数据上报\n    getApp().globalData.burySpotSDK.track('page_hospitalHome_remainTime')\n  }\n};"},"convertDir/pages/hospital/search/search":{"json":{"missingData-view":"../../../component/missingData/missingData","hospitalList":"../../../component/hospitalList/hospitalList","doctorList":"../../../component/doctorList/doctorList"},"wxml":"\n  <view class=\"search-auto-container\">  \n    <wxs module=\"filter\"></wxs>\n    <view class=\"index_z\">\n      <navBar :title-text=\" pageTitle \" :titleColor=\" '#111334' \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view>   \n      <block> \n        <view class=\"search_contion\">  \n          <view class=\"search_hearder\">  \n            <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n            <view class=\"search_kuai\" v-if=\" inputText \" bindtap=\"search_clear_btn\"></view>\n            <input class=\"search_input\" maxlength=\"30\" :value=\" inputText \" bindinput=\"searchInput\" placeholder=\"搜一搜医院/医生\" auto-focus bindconfirm=\"search_btn\"></input>\n          </view>\n          <text class=\"search_btn\" bindtap=\"search_btn\" v-if=\" inputText \">搜索\n          </text>\n          <text class=\"search_btn gray\" v-else>搜索\n          </text>\n        </view>\n        <view style=\"height:96rpx\"></view>\n      </block>\n      <block v-if=\" searcKeyBox \">\n        <view class=\"searcKeyBox\" :style=\"{height:calc(100vh - navBarHeight  + 50px),top:calc( navBarHeight + 50 )px}\" catchtouchmove=\"ture\">\n          <view class=\"searc_key_list\" bindtap=\"handleKeyWord\" v-if=\" relatedWord[0] \" v-for=\"(item, key) in  relatedWord \" :key=\"key\" :data-index=\" index \" data-text=\"{{ item[0].str?item[0].str:'' }}{{ item[1].str?item[1].str:'' }}{{ item[2].str?item[2].str:'' }}\">\n            <text :class=\"[( item[0].key?'text_color':'' )]\">{{ item[0].str }}\n            </text>\n            <text :class=\"[( item[1].key?'text_color':'' )]\">{{ item[1].str }}\n            </text>\n            <text :class=\"[( item[2].key?'text_color':'' )]\">{{ item[2].str }}\n            </text>\n          </view>\n        </view>\n      </block>\n      <view class=\"searchHistory\" v-if=\" historyShow \">\n        <block> \n          <view class=\"searchHistory_text\" v-if=\" searchLog.length > 0 \">\n\t\t\t\t历史搜索\n\t\t\t\t\n            <image bindtap=\"clear_btn\" class=\"search_clear you\" mode=\"widthFix\" src=\"../../../images/clear_ss.png\"></image>\n          </view>\n          <view class=\"searchHistory_nr\">\n            <block v-for=\"(item, key) in  searchLog \" :key=\"key\">\n              <view class=\"searchHistory_list\" bindtap=\"historySearchBtn\" :data-title=\" item \">{{ item }}\n              </view>\n            </block>\n          </view>\n        </block>\n      </view>\n      <block v-else>\n        <block>  \n          <view class=\"search_tabs\"> \n            <text :class=\"[(showTabNum == 1 ? \"active\" : \"\")]\" bindtap=\"changeTabs\" data-id=\"1\">医院\n            </text>\n            <text :class=\"[(showTabNum == 2 ? \"active\" : \"\")]\" bindtap=\"changeTabs\" data-id=\"2\">医生\n            </text>\n          </view>\n          <view class=\"wrap-content\" v-if=\"proList.length\"> \n            <block v-if=\"showTabNum == 1\">\n              <hospitalList :lists=\" proList \"></hospitalList>\n            </block>\n            <block v-if=\"showTabNum == 2\">\n              <doctorList :lists=\" proList \" pageFrom=\"search\"></doctorList>\n            </block>\n          </view>\n          <view> \n            <block v-if=\" proList.length == 0 &&  !isAjaxing && showTabNum == 1 \">\n              <view :style=\"{background-color:#fff,height: calc(100vh - navBarHeight  + 88px)}\">\n                <missingData-view zhi=\"new1\" textval=\"抱歉没有找到符合条件的医院\" textval2 :imageUrl=\" cdnLink + 'images/empty-check-list.png' \"></missingData-view>\n              </view>\n            </block>\n            <block v-if=\" (!proList || proList.length == 0) &&  !isAjaxing && showTabNum == 2\">\n              <view :style=\"{background-color:#fff,height: calc(100vh - navBarHeight  + 88px)}\">\n                <missingData-view zhi=\"new1\" textval=\"抱歉没有找到符合条件的医生\" textval2 :imageUrl=\" cdnLink + 'images/empty-check-list.png' \"></missingData-view>\n              </view>\n            </block>\n          </view>\n        </block>\n      </block>\n    </view>\n  </view>","wxss":"/* pages/onlineGoods/productSearch/productSearch.wxss */\n\n.index_z {\n  position: relative;\n  z-index: 99999999;\n}\n\npage {\n  background: #f5f6fa;\n  height: 100%;\n}\n.flex {\n  display: flex;\n  justify-content: space-between;\n  position: relative;\n}\n\n.flex .cover-image {\n  position: absolute;\n  top: 0;\n  left: 0rpx;\n  width: 144rpx;\n  height: 144rpx;\n  border-radius: 8rpx;\n  background: rgba(5, 13, 143, .02);\n  z-index: 1;\n}\n\n.search_contion {\n  padding: 20rpx 0;\n  background-color: #FDFDFD;\n  position: fixed;\n  width: 100%;\n  z-index: 9;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n}\n\n.search_hearder {\n  flex: 1;\n  height: 60rpx;\n  position: relative;\n  margin-left: 20rpx;\n  border-radius: 36rpx;\n  background-color: #F0F0F5;\n  overflow: hidden;\n}\n\n.search_input {\n  width: 500rpx;\n  height: 60rpx;\n  font-size: 28rpx;\n  padding-left: 65rpx;\n  color: #111334;\n  background: #f0f0f5;\n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  margin: 16rpx 12rpx 16rpx 15rpx;\n}\n\n.search_clear {\n  top: 0;\n  width: 26rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 5rpx;\n  z-index: 10;\n  padding: 17rpx;\n}\n\n.search_btn {\n  color: #111334;\n  font-size: 28rpx;\n  width: 120rpx;\n  text-align: center;\n}\n\n.search_btn.gray {\n  color: #ccc;\n}\n\n.searchHistory {\n  width: 100%;\n  background-color: #fff;\n  overflow: hidden;\n}\n\n.searchHistory_text {\n  font-size: 26rpx;\n  color: #9d9fb8;\n  padding-left: 20rpx;\n  padding-top: 20rpx;\n  margin-bottom: 26rpx;\n  position: relative;\n}\n\n.searchHistory_list {\n  padding: 0 20rpx 0 20rpx;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  box-sizing: border-box;\n  height: 54rpx;\n  background-color: rgba(245, 247, 248, 1);\n  border-radius: 30rpx;\n  line-height: 54rpx;\n  font-size: 24rpx;\n  text-align: center;\n  float: left;\n  margin-right: 20rpx;\n  margin-bottom: 20rpx;\n  color: #666883;\n}\n\n.searchHistory_nr {\n  width: calc(100% - 40rpx);\n  margin: 0 auto;\n  overflow: hidden;\n}\n\n.search_tabs{\n  display: flex; \n  justify-content: space-around; \n  background: #ffffff;\n  /* margin-bottom:20rpx; */\n}\n.search_tabs text{\n  flex: 1; \n  text-align: center; \n  font-size: 28rpx; \n  color: #666883;\n  margin-bottom: 20rpx;\n  margin-top: 20rpx;\n}\n.search_tabs text.active{\n  color: #111334;\n  position: relative;\n}\n.search_tabs text.active:after{\n  content: \"\"; \n  width: 56rpx; \n  height: 4rpx; \n  background-color: #00B955; \n  position: absolute; \n  left: 0; \n  right: 0; \n  bottom: -20rpx; \n  margin: auto;\n  border-radius: 12px;\n}\n.wrap-content{\n  padding:20rpx 24rpx 0;\n}\n.you {\n  top: 0;\n  width: 29rpx;\n  height: 32rpx;\n}\n\n.search_kuai {\n  top: 0;\n  right: 0;\n  position: absolute;\n  height: 100%;\n  z-index: 9;\n  background: #f0f0f5;\n}\n\n.proList, .drugstore_list {\n  /* background: #fff; */\n  overflow: hidden;\n}\n\n.proItem-warp {\n  background: #fff;\n}\n\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  padding-bottom: 24rpx;\n  position: relative;\n  padding: 24rpx 32rpx;\n  border-bottom: 1rpx solid #EFF0F5;\n}\n.proItem::after{\n  content: '';\n  width: 100%;\n  height: 1rpx;\n  background-color: #f2f2f2;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.proItem .itemTop .image {\n  position: relative;\n  width: 144rpx;\n  height: 144rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: calc(100vw - 32rpx - 32rpx - 144rpx - 24rpx);\n  position: relative;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-weight: bold;\n  font-size: 28rpx;\n  color: #111334;\n  /* line-height: 34rpx; */\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  width: 150rpx;\n  height: 50rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  font-size: 30rpx;\n  color: rgba(0, 185, 173, 1);\n  text-align: center;\n  line-height: 50rpx;\n}\n\n.djk .proItem {\n  padding-bottom: 0;\n  border-bottom: 20rpx solid #F7F7F7;\n}\n\n.proItem .bottom {\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n  border-top: 1rpx solid #f2f2f2;\n}\n\n.itemBottom {\n  height: 90rpx;\n  line-height: 90rpx;\n  padding: 0 30rpx;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n  position: relative;\n}\n\n.storeName {\n  max-width: 480rpx;\n  font-size: 24rpx;\n  color: rgba(153, 153, 153, 1);\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  margin-right: 10rpx;\n  -webkit-box-orient: vertical;\n  position: relative;\n  padding-right: 10rpx;\n}\n\n.storeName::after {\n  content: '';\n  display: block;\n  width: 1rpx;\n  height: 20rpx;\n  position: absolute;\n  top: 9rpx;\n  right: 1rpx;\n  background-color: rgba(238, 238, 238, 1);\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  background: #f7f7f7;\n}\n\n.flex2 {\n  display: flex;\n  margin-top: 20rpx;\n}\n\n.storeKm {\n  font-size: 26rpx;\n  color: rgba(153, 153, 153, 1);\n}\n\n.itemBottom .dr {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  padding-left: 192rpx;\n}\n\n.itemBottom_img {\n  width: 24rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 20rpx;\n  top: 34rpx;\n}\n\n/* 搜索改版 */\n\n.search_tab {\n  display: flex;\n}\n\n.search_tab_left, .search_tab_right {\n  width: 50%;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #999;\n  text-align: center;\n  position: relative;\n}\n\n.state {\n  color: #292626;\n  font-size: 34rpx;\n  font-weight: 500;\n}\n\n.state::after {\n  content: \"\";\n  width: 36rpx;\n  height: 6rpx;\n  border-radius: 8rpx;\n  background-color: #00b955;\n  position: absolute;\n  left: calc(50% - 18rpx);\n  bottom: 0;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-address {\n  width: 70%;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-time {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 8rpx;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #666;\n  position: absolute;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx;\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n\n.search_lable {\n  height: 108rpx;\n  line-height: 108rpx;\n  display: flex;\n  border-top: 1px solid rgba(238,238,238,1);\n  background-color: #fff;\n}\n\n.lable {\n  width: 150rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  background: rgba(245, 247, 248, 1);\n  border-radius: 30px;\n  font-size: 26rpx;\n  color: #666666;\n  text-align: center;\n  margin-top: 24rpx;\n  margin-left: 24rpx;\n}\n.lable_group{\n  display: flex;\n}\ncheckbox .wx-checkbox-input {\n    /* checkbox 前面选项框的背景样式 */\n    /* opacity: 0; */\n    display: none;\n}\n\n/* 搜索关键词 */\n.searcKeyBox{\n  background-color:#fff;\n  position: fixed;\n  left: 0;\n  z-index: 9999;\n  width: 100%;\n}\n.searc_key_list{\n  height: 87rpx;\n  line-height: 87rpx;\n  text-align: left;\n  font-size:28rpx;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:#9d9fb8;\n  border-top: 1px solid #EEEEEE;\n  margin: 0 24rpx 0 24rpx;\n}\n.text_color{\n  color: #111334;\n}\n/* 药店 */\n\n.nearbyDrugstore {\n  padding: 0 24rpx 0 24rpx;\n}\n\n.nearbyDrugstore-title {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 20rpx 0 20rpx 0;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n}\n\n.nearbyDrugstore-title-left {\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n  padding: 0;\n}\n\n.nearbyDrugstore-title-right {\n  font-size: 28rpx;\n  color: #999;\n  margin-top: 5rpx;\n  position: relative;\n  padding: 10rpx 30rpx;\n}\n\n.nearbyDrugstore-list-warp {\n  background: #fff;\n  margin-bottom: 20rpx;\n  padding: 18rpx 32rpx 24rpx;\n}\n\n.nearbyDrugstore-list {\n  display: flex;\n  position: relative;\n  border-radius: 8rpx;\n  padding-top: 56rpx;\n}\n.nearbyDrugstore-list:last-child {\n  border: 0;\n}\n\n.nearbyDrugstore-list image {\n  width: 182rpx;\n  height: 126rpx;\n  display: block;\n}\n\n.nearbyDrugstore-list-right {\n  flex: 1;\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 28rpx;\n  color: #111334;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-weight: bold;\n}\n\n.nl-right-icon {\n  display: inline-block;\n  margin-top: 12rpx;\n  margin-right: 10rpx;\n  padding: 2rpx 8rpx;\n  background: #ffeeef;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 22rpx;\n  color: #F93A4A;\n  border-radius: 4rpx;\n}\n\n.nearbyDrugstore-list-right .blue {\n  background: #F5FAFF;\n  color: #087AEF;\n  border: 0;\n  font-size: 22rpx;\n}\n\n.nl-right-icon image {\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 5rpx;\n  width: 10rpx;\n  height: 16rpx;\n  position: relative;\n  margin-top: -6rpx;\n}\n\n.nl-right-flag text {\n  display: inline-block;\n  color: #666883;\n  font-size: 22rpx;\n  padding: 0 8rpx;\n  margin-right: 10rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  border-radius: 2rpx;\n  background-color: #F6F8FD;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #999999;\n  position: absolute;\n  font-weight: 400;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx 0 20rpx;\n}\n.nl-right-km text{\n  font-size: 24rpx;\n  color: #C5C9D5;\n}\n.nearbyDrugstore-default {\n  width: 100%;\n  height: 210rpx;\n  background: rgba(250, 250, 250, 1);\n  border-radius: 6px;\n}\n\n.nearbyDrugstore-default-text {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  width: 90%;\n  margin: 0 auto;\n  padding-top: 40rpx;\n  text-align: center;\n}\n\n.nearbyDrugstore-default-btn {\n  width: 160rpx;\n  height: 60rpx;\n  text-align: center;\n  line-height: 60rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  color: rgba(0, 185, 173, 1);\n  margin: 0 auto;\n  margin-top: 30rpx;\n}\n\n.scrollbar1 {\n  width: 60rpx;\n  height: 4rpx;\n  background-color: rgba(239, 239, 239, 1);\n  margin: 0 auto;\n  margin-top: 20rpx;\n  border-radius: 6rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.scrollbar1 view {\n  height: 100%;\n  position: absolute;\n  transition: all 0.2s;\n  left: 0;\n  top: 0;\n  background-color: rgba(161, 165, 176, 1);\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n/* b2c */\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 13rpx;\n}\n.active_tag3{\n  background: rgba(255,59,48,0.05);\n  border: 1px solid #ff3b30;\n  border-radius: 8rpx;\n  color: #ff3b30;\n  text-align: center;\n  padding:0 8rpx;\n  font-size:22rpx;\n}\n.active_tag2{\n  margin-top: 0rpx;\n}\n.active_tag .tag {\n  height: 32rpx;\n  background: #FFEEEF;\n  border-radius: 4rpx;\n  line-height: 32rpx;\n  text-align: center;\n  font-size: 22rpx;\n  color: #F93A4A;\n  margin-right: 10rpx;\n  margin-bottom: 13rpx;\n  padding: 0 8rpx;\n}\n.active_tag2 .tag{\n  background: #fff;\n  border: 1px solid #e1e1e1;\n  color: #666666;\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n  \n.price{\n  color: #F93A4A;\n  font-size: 22rpx;\n  margin-top: 29rpx;\n  position: relative;\n  font-weight: bold;\n}\n\n.price .price-fh {\n  font-size: 22rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n}\n\n.price .real-price {\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n}\n\n.price .underline-price {\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-decoration: line-through;\n  color: #9d9fb8;\n  margin-left: 6rpx;\n}\n.button{\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 40rpx;\n  height: 40rpx;\n}\n.itemTop .button .add-icon{\n  width: 100%;\n  height: 100%;\n}\n.cart_button {\n  display: flex;\n  align-items: center;\n}\n.cart_button .text {\n  padding: 0 20rpx;\n  font-size: 26rpx;\n}\n.cart_button .button {\n  padding: 10rpx;\n}\n.cart_button .button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00b955;\n  color: #FFFFFF;\n  font-size: 40rpx;\n}\n.cart_button .less view{\n  border: 1px solid #00b955;\n  background: none;\n  color: #00b955;\n}\n.drug-left-photo{\n  position: relative;\n  border-radius: 8rpx;\n  overflow: hidden;\n}\n.drug-left-photo-text{\n  width: 100%;\n  height: 34rpx;\n  line-height: 34rpx;\n  color: #fff;\n  font-size: 20rpx;\n  overflow: hidden;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  text-align: center;\n  border-bottom-right-radius: 8rpx;\n  border-bottom-left-radius: 8rpx;\n  background: rgba(17,19,52,0.45);\n}\n\n.drug-left-photo-text text{\n  position: relative;\n  z-index: 2;\n}\n.drug-left-photo-text image{\n  display: inline-block;\n  vertical-align: middle;\n  width: 20rpx;\n  height: 20rpx;\n  position: relative;\n  z-index: 2;\n  margin-right: 10rpx;\n  margin-top: -2rpx;\n}\n.drug-left-photo-lable{\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #111334;\n  text-align: center;\n  position: absolute;\n  top: -1rpx;\n  left: -1rpx;\n}\n.b2c_detailed_list{\n  width: 100rpx;\n  height: 100rpx;\n  background: #fff;\n  box-shadow: 0rpx 5rpx 17rpx 0rpx rgba(17,19,52,0.11); \n  border-radius: 100rpx;\n  text-align: center;\n  font-weight: bold;\n  color: #00b955;\n  font-size: 22rpx;\n  position: fixed;\n  right: 30rpx;\n  bottom: 140rpx;\n}\n.b2c_detailed_list image {\n  width: 29rpx;\n  height: 28rpx;\n  display: block;\n  margin:  20rpx auto 7rpx;\n}\n.b2c_detailed_list_num{\n  width: 40rpx;\n  height: 40rpx;\n  background: #ff4531;\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n  line-height: 40rpx;\n  text-align: center;\n  font-size: 24rpx;\n  color: #fff;\n  border-radius: 90%;\n}\n/* 处方药，限购件数css */\n.b2c_cf{\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 0 8rpx;\n  line-height: 32rpx;\n  height: 32rpx;\n  text-align: center;\n  background: #ff3232;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 22rpx;\n  font-weight: 400;\n}\n.title text {\n  position: relative;\n  top: -4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n  padding: 5rpx 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  background: linear-gradient(270deg,#ff884a, #ff3232);\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n/* 加购特效 */\n.good_box {\n  width: 40px;\n  height: 40px;\n  position: fixed;\n  border-radius: 50%;\n  overflow: hidden;\n  left: 50%;\n  top: 50%;\n  z-index: +99;\n  border: 1px solid #fff;\n  background: rgba(120, 188, 255, 0.2);\n}\n\n.good_box image {\n  display: block;\n  width: 100%;\n  height: 100%;\n}","js":"const app = getApp();\n// 请求url\nconst apiUrl = {\n  searchHospital: 'lotusleaf/hospital/searchHotHospitalList',//'lotusleaf/hospital/getHospitalList',//搜索医院接口\n  searchDoctor: 'lotusleaf/hospital/doctor/queryDoctorListByParams',//搜索医生接口\n  keyWord: 'lotusleaf/hospital/searchHotHospitalList',//'miniApp/search/getRelatedWordsByKeyword',//获取关键词\n  searchLog: 'lotusleaf/hospital/searchHis/queryHistoryKeywords',//搜索历史\n}\n\nimport {\n  ajax2,\n  getLocation,\n  cdnStaticResourceUrl,\n  bezier\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      showTabNum: 1,\n      searcKeyBox: false,\n      relatedWord: [],\n      historyShow: true, //显示历史搜索记录\n      searchLog: [],\n      longitude: 114.304695,\n      latitude: 30.59331,\n      pageNum: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      proList: [], //商品列表\n      activeType: 'default',\n      isAjaxing: false,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      pageType: '',\n      pageTitle: '',\n      id: null,\n      inputText: null, //搜索关键词\n      addressData: {},\n      options: '',\n      scrollTop: 0,\n      searchType: 1,\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    this.data.options = options;\n    //获取本地存储经纬度信息\n    const addressData = getApp().hospital_address;\n    console.log(addressData)\n    //判断是否有经纬度，没有自动获取\n    if (addressData.latitude) {\n      this.data.addressData = addressData;\n      this.readyFun(this.data.options);\n    } else {\n      getLocation((longitude, latitude) => {\n        this.data.addressData = {\n          longitude,\n          latitude\n        };\n        this.readyFun(this.data.options);\n      })\n    }  \n  },\n  onShow: function() {\n    \n  },\n  readyFun(options) {\n      this.setData({\n        pageType: 'searchPage',\n        pageTitle: '搜索'\n      })\n      this.search_btn();\n      this.getSearchLog();\n  },\n  /**\n   * 输入检测\n   */\n  searchInput(e) {\n    this.setData({\n      inputText: e.detail.value,\n      searcKeyBox: !e.detail.value ? false : true\n    })\n    this.data.searchType = 1; // 输入框输入\n    this.getKeyWord(this.data.inputText)\n  },\n  //切换tab\n  changeTabs(event) {\n    this.setData({\n      showTabNum: event.currentTarget.dataset.id\n    })\n    this.search_btn();\n    if (this.data.showTabNum == 1) { //医院\n      getApp().globalData.burySpotSDK.track('action_seachHospitalHome_hospitalTabClick');\n    } else {   //医生\n      getApp().globalData.burySpotSDK.track('action_seachHospitalHome_doctorTabClick');\n    }\n  },\n  // 点击关键词\n  handleKeyWord(e){\n    let text = e.currentTarget.dataset.text;\n    let index = e.currentTarget.dataset.index;\n    this.setData({\n      inputText:text\n    })\n    let chooseSughData = {\n      choosenTerms: this.data.inputText,\n      choosenSeq: index\n    }\n    getApp().globalData.burySpotSDK.track('action_chooseSug', chooseSughData);\n    this.data.searchType = 3;//关联词自动补全\n    this.search_btn();\n\n  },\n  // 获取关键词\n  getKeyWord(inputText){\n    if (!inputText) return false;\n    let url = '', result = [], sendData = {};\n    if (this.data.showTabNum == 2) {//医生\n      url = apiUrl.searchDoctor;\n      sendData = {\n        pageNum: 1,\n        pageSize: this.data.pageSize,\n        doctorName: this.data.inputText\n      }\n    } else {//医院\n      url = apiUrl.keyWord;\n      sendData = {\n        pageNum: 1,\n        pageSize: this.data.pageSize,\n        hospitalName: this.data.inputText,\n        lng: this.data.addressData.longitude,\n        lat: this.data.addressData.latitude,\n        cityCode: this.data.addressData.cityCode ? this.data.addressData.cityCode : ''\n      }\n    }\n    ajax2('post', url, sendData, res => {\n      if(res.data.code == 0){\n        if (this.data.showTabNum == 2) {\n          result = (res.data.result && res.data.result.list) ? res.data.result.list.map(item => item.doctorName) : [];\n        }\n        else{\n          result = (res.data.result && res.data.result.list) ? res.data.result.list.map(item => item.hospitalName) : [];\n        }\n        result.forEach((item, index) => {\n          result[index] = this.hilightWord(this.data.inputText, item);\n        })\n        this.setData({\n          relatedWord: result\n        })\n      }\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  // 搜索字符关键字拆分\n  hilightWord(key, word) {\n    if (!key) return false;\n    let idx = word.indexOf(key),strList = [];\n    if (idx > -1) {\n      if (idx == 0) {\n        strList = this.hilightWord(key, word.substr(key.length));\n        strList.unshift({\n          key: true,\n          str: key\n        });\n      } else if (idx > 0) {\n        strList = this.hilightWord(key, word.substr(idx));\n        strList.unshift({\n          key: false,\n          str: word.substring(0, idx)\n        });\n      }\n      return strList;\n    }\n    return [{\n      key: false,\n      str: word\n    }];\n  },\n\n  /**\n   * 搜索历史\n   */\n  getSearchLog() {\n    let token = Taro.getStorageSync('sess_key');\n    ajax2('post', apiUrl.searchLog, {\n      type:1,\n      uid: token ? Taro.getStorageSync('userInfo').userId : ''\n    }, res => {\n      this.setData({\n        searchLog: res.data.result\n      });\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n\n  /**\n   * 清空历史搜索记录\n   */\n  clear_btn() {\n    const that = this;\n    Taro.showModal({\n      content: \"确认清空历史搜索记录?\",\n      confirmText: \"确定\",\n      confirmColor: getApp().globalData.mainColor,\n      success: function(res) {\n        if (res.confirm) {\n          Taro.showToast({\n            title: '已清空',\n            image: '/images/successIcon.png',\n            mask: true,\n          })\n          // that.setData({\n          //   searchLog: []\n          // });\n          ajax2('post', 'lotusleaf/hospital/searchHis/clearHistoryKeywords', { \n            type: 1,\n            uid: Taro.getStorageSync('userInfo').userId\n          }, res => {\n            that.setData({\n              searchLog: res.data.result\n            });\n          })\n        }\n      }\n    })\n  },\n  /**\n   * 历史记录搜索\n   */\n  historySearchBtn(e) {\n    const searchTitle = e.currentTarget.dataset.title;\n    this.setData({\n      inputText: searchTitle,\n      historyShow: false\n    }, () => {\n      this.data.searchType = 2;//历史记录点击\n      this.searchFn()\n    })\n  },\n  /**\n   * 删除按钮\n   */\n  search_clear_btn(){\n    this.data.pageNum = 1;\n    this.setData({\n      inputText:'',\n      historyShow: true,\n      proList:[],\n      activeType:'default'\n    });\n    this.getSearchLog()\n  },\n  /**\n   * 搜索Btn\n   */\n  search_btn() {\n    if (this.data.inputText) {\n      const inputText = (this.data.inputText).replace(/^\\s*|\\s*$/g, \"\");\n      if (!inputText) {\n        Taro.showToast({\n          title: '请输入医院/医生',\n          icon: 'none',\n        })\n        this.setData({\n          inputText: ''\n        })\n        return false;\n      }\n      this.searchFn()\n    }\n    this.data.pageNum = 1;\n    this.setData({\n      proList: [],\n      searcKeyBox: false\n    });\n    // 展示搜索结果页\n    getApp().globalData.burySpotSDK.track(`page_searchResultExpo`);\n  },\n  /**\n   * 搜索方法\n   */\n  searchFn(type) {\n    console.log(this.data.addressData)\n    if (this.isAjaxing) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    let url = apiUrl.searchHospital;//默认搜索接口\n    let sendData = {};\n    if (this.data.showTabNum == 2) {//医生\n      url = apiUrl.searchDoctor;\n      sendData = {\n        pageNum: 1,\n        pageSize: this.data.pageSize,\n        doctorName: this.data.inputText\n      }\n    } else {//医院\n      url = apiUrl.searchHospital;\n      sendData = {\n        pageNum:1,\n        pageSize: this.data.pageSize,\n        // sortNumber:1,\n        // departmentId: '',\n        // typeId: '',\n        // levelId: '',\n        // ownerId: '',\n        hospitalName: this.data.inputText,\n        lng: this.data.addressData.longitude,\n        lat: this.data.addressData.latitude,\n        cityCode: this.data.addressData.cityCode ? this.data.addressData.cityCode : ''\n      }\n    }\n    console.log(sendData)\n    ajax2('post', url, sendData, res => {\n      if (res.data.code == 0) {\n        const resData = res.data.result;\n        resData && this.setData({\n          proList: resData ? this.data.pageNum == 1 ? resData.list : [...this.data.proList, ...resData.list] : [],\n          hasNextPage: (resData && resData.hasNextPage) || false,\n          historyShow: false,\n          isAjaxing: false,\n          searcKeyBox: false\n        }); \n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器开小差了，请您稍后尝试',\n          icon: 'none',\n        })\n      }\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n    }, ()=> {\n      this.setData({\n        isAjaxing: false\n      })\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    const hasNextPage = this.data.hasNextPage;\n    if (hasNextPage) {\n        this.data.pageNum = ++this.data.pageNum\n        this.searchFn();\n    }\n  }\n};"},"convertDir/pages/inquiry/appealDetail/appealDetail":{"json":{},"js":"/**\n * desc: 问诊记录：申诉详情\n * auth: wangqinfei\n */\nimport { ajax } from \"../../../utils/util\";\n// 请求url\nconst apiUrl = {\n  // 获取会话页信息（患者信息和处方状态）\n  getProAppealDetail: 'api/appeal/getProAppealDetail',\n}\n\nexport default {\n\n  data: function() {\n    return {\n      curAppealDetail: '',\n      appealDetailing: '../../../images/appealDetailing.png',\n      appealDetailNot: '../../../images/appealDetailNot.png',\n      appealDetailPass: '../../../images/appealDetailPass.png'\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let orderNo = options.orderNo || ''\n    if (orderNo) {\n      this.handleGetProAppealDetail(orderNo)\n    } else {\n      Taro.showToast({\n        title: '获取申诉详情异常，请重试！',\n        mask: true,\n        duration: 2000\n      })\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    \n  },\n\n  handleGetProAppealDetail(orderNo) {\n    ajax('get', apiUrl.getProAppealDetail, {\n      orderNo\n    }, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          curAppealDetail: res.data.result\n        })\n        console.log('111', res.data.result)\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n          mask: true,\n          duration: 2000\n        })\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"appealDetail-auto-container\">  \n    <wxs module=\"filter\">\n  var statusFilter = function (value) {\n    if (value == 0) {\n      return \"待审核\"\n    } else if (value == 1){\n      return \"审核已通过\"\n    } else if (value == 2){\n      return \"审核未通过\"\n    } else {\n      return \"\"\n    }\n  }\n  var operateStatusFilter = function (value) {\n    if (value == 0) {\n      return \"售后申诉\"\n    } else if (value == 1){\n      return \"审核通过\"\n    } else if (value == 2){\n      return \"审核失败\"\n    } else {\n      return \"\"\n    }\n  }\n  module.exports = {\n    statusFilter: statusFilter,\n    operateStatusFilter: operateStatusFilter\n  }\n\n    </wxs>\n    <navBar title-text=\"申诉详情\" :showCapsule=\"true\"></navBar>\n    <view class=\"appealDetail\">  \n      <view class=\"titleBox\"> \n        <view class=\"status\">{{ filter.statusFilter(curAppealDetail.status) }}\n        </view>\n        <view class=\"verifyDesc\">{{curAppealDetail.verifyDesc}}\n        </view>\n      </view>\n      <image :src=\"appealDetailing\"></image>\n      <view class=\"processBox\">\n        <view class=\"processOne\" v-for=\"(item, index) in  curAppealDetail.record \" :key=\"index\">\n          <view class=\"processContent\">  \n            <view class=\"processStep\"></view>\n            <view class=\"statusBox\"> \n              <view class=\"title\">{{ filter.operateStatusFilter(item.operateStatus) }}\n              </view>\n              <view class=\"time\">{{item.operateTime}}\n              </view>\n            </view>\n            <view class=\"content\">{{item.operateReason}}\n        \n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".appealDetail {\n  display: flex;\n  flex-direction: column;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n  position: relative;\n}\n\n.appealDetail .titleBox {\n  height: 190rpx;\n  opacity: 1;\n  background: linear-gradient(270deg,#2c7bff, #4fb1ff);\n}\n\n.appealDetail .titleBox .status {\n  opacity: 1;\n  font-size: 36rpx;\n  font-weight: 500;\n  text-align: left;\n  color: #fff;\n  line-height: 50rpx;\n  margin-top: 50rpx;\n  margin-left: 30rpx;\n}\n\n.appealDetail .titleBox .verifyDesc {\n  opacity: 0.8;\n  font-size: 24rpx;\n  font-weight: 500;\n  text-align: left;\n  color: #fff;\n  line-height: 33rpx;\n  margin-top: 10rpx;\n  margin-left: 30rpx;\n}\n\n.appealDetail image {\n  position: absolute;\n  width: 184rpx;\n  height: 184rpx;\n  opacity: 1;\n  top: 0;\n  right: 40rpx;\n  z-index: 10;\n}\n\n.appealDetail .processBox {\n  background-color:#fff;\n}\n\n.processOne .processContent{\n  border-left: 2rpx solid #eaf4ff;\n  padding: 0 30rpx;\n  margin-left: 40rpx;\n  position: relative;\n}\n\n.processContent .processStep{\n  position: absolute;\n  width: 12rpx;\n  height: 12rpx;\n  opacity: 1;\n  background: #00b955;\n  border-radius: 50%;\n  left: -7rpx;\n}\n\n.processContent .statusBox {\n  margin-top: 40rpx;\n  margin-bottom: 12rpx;\n}\n.processContent .statusBox .title {\n  opacity: 1;\n  font-size: 28rpx;\n  font-weight: 500;\n  text-align: left;\n  float: left;\n  color: #333;\n  line-height: 40rpx;\n  position: relative;\n  top: -12rpx;\n}\n\n.processContent .statusBox .time {\n  opacity: 1;\n  font-size: 24rpx;\n  font-weight: 400;\n  text-align: right;\n  color: #666;\n  line-height: 33rpx;\n  position: relative;\n  top: -5rpx;\n}\n\n.processContent .content{\n  opacity: 1;\n  font-size: 28rpx;\n  font-weight: 400;\n  text-align: left;\n  color: #666;\n  line-height: 40rpx;\n}"},"convertDir/pages/inquiry/chat/component/askcard/askcard":{"js":"import { ajax2 } from \"../../../../../utils/util.js\";\n\nexport default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    inquiryInfo: {\n      type: Object,\n      default: {},\n    },\n    inquiryType: {\n      type: Number,\n      default: 0\n    }\n   \n  },\n\n  data: function() {\n    return {\n      selfHeadDefault0: '../../images/self_head_default0@2x.png',\n      selfHeadDefault1: '../../images/self_head_default1@2x.png',\n      imglist: '',\n      imgHidelist:'',\n      isOpenDetail: false\n    };\n  },\n\n  onReady() {\n    console.log('askcard--', this.properties.inquiryInfo.lastDiagnosis.checkImageList);\n    let arrList = this.properties.inquiryInfo.lastDiagnosis.checkImageList||[]\n    console.log('arrListarrList',arrList)\n    this.setData({\n      imglist:arrList.slice(0, 3),\n      imgHidelist: arrList && arrList.length > 3 ? arrList.slice(3) : []\n    })\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    getUserInformation(_inquiryId) {\n      console.log(_inquiryId, '微信小程序中调用子组件的方法')\n      let reqData = {\n        inquiryId: _inquiryId\n      };\n      let _this = this;\n      let reqUrl = \"api/chat/inquiry/getstatus\";\n      ajax2('post', reqUrl, reqData, (res) => {\n        console.log(res.data, '极速问诊卡片组件')\n        if (res.data.code == 0) {\n          _this.setData({ inquiryInfo: res.data.result })\n        } else {\n          console.log(res.data.msg, 'xiaochacha')\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      });\n    },\n    /**   \n     * 预览图片  \n     */\n    previewImage: function (e) {\n      var current = e.target.dataset.src;\n      Taro.previewImage({\n        current: current, // 当前显示图片的http链接  \n        urls: this.data.imglist // 需要预览的图片http链接列表  \n      })\n    },\n    /**\n     * 点击 查看更多\n     * st 1 展开 0 收起\n     */\n    handleLookMore: function (e) {\n      let st = e.currentTarget.dataset.st;\n      console.log(st);\n      switch (st) {\n        case 'open':\n          this.setData({\n            imglist: this.data.imglist.concat(this.data.imgHidelist),\n            isOpenDetail: true\n          });\n          break;\n        case 'hide':\n          this.setData({\n            imglist: this.data.imglist.slice(0, 3),\n            isOpenDetail: false\n          });\n      }\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"askcard-auto-container\"> \n    <wxs module=\"filter\">\n  var patientSexFilter = function (value) {\n    if (value === 1) {\n      return \"男\"\n    } else if (value === 2) {\n      return \"女\"\n    }\n  }\n  var allergySymptomFilter = function (value) {\n    if (value === 1) {\n      return '否'\n    } else if (value === 2) {\n      return '是'\n    } else {\n      return ''\n    }\n  }\n  module.exports = {\n    patientSexFilter: patientSexFilter,\n    allergySymptomFilter: allergySymptomFilter\n  }\n\n    </wxs>\n    <view class=\"card-container\"> \n      <view class=\"card-container-left\"> \n        <view class=\"person-name\">{{ inquiryInfo.patientName }}\n        </view>\n        <view class=\"inter_card_container\">     \n          <view class=\"card_title\">问诊人信息\n          </view>\n          <view class=\"user_con\">  \n            <text class=\"info\">{{inquiryInfo.patientName}}\n            </text>\n            <text class=\"info\">{{filter.patientSexFilter(inquiryInfo.patientSex)}}\n            </text>\n            <text class=\"info\">{{inquiryInfo.patientAge}}\n            </text>\n          </view>\n          <view class=\"history_disease_des\"> \n            <text class=\"title\">过敏史：\n            </text>\n            <text class=\"info\">{{inquiryInfo.allergySymptomExplain || '无'}}\n            </text>\n          </view>\n          <view class=\"history_disease_des\"> \n            <text class=\"title\">既往病史：\n            </text>\n            <text class=\"info\">{{inquiryInfo.medicalHistory || '无'}}\n            </text>\n          </view>\n          <view class=\"history_disease_des\"> \n            <text class=\"title\">病情描述：\n            </text>\n            <text class=\"info\">{{inquiryInfo.lastDiagnosis.mainSuit}}\n            </text>\n          </view>\n          <view class=\"history_disease_des\" v-if=\" inquiryType === 4 && imglist.length > 0\"> \n            <text class=\"title\">检查单/患处照片：\n            </text>\n            <view class=\"img_box\">  \n              <view>\n                <view class=\"flex\">\n                  <view class=\"view_img\" v-for=\"(image, index) in imglist\">\n                    <image mode=\"aspectFill\" :src=\"image\" :data-src=\"image\" bindtap=\"previewImage\"></image>\n                  </view>\n                </view>\n              </view>\n              <view class=\"more\" bindtap=\"handleLookMore\" data-st=\"open\" v-if=\" !isOpenDetail && imgHidelist.length \"> \n                <text>展开详情\n                </text>\n                <image src=\"../../images/arrow-down.png\"></image>\n              </view>\n              <view class=\"less\" bindtap=\"handleLookMore\" data-st=\"hide\" v-if=\" isOpenDetail \"> \n                <text>收起详情\n                </text>\n                <image src=\"../../../../../images/arow_bottom.png\"></image>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view>\n        <image class=\"avatar\" :src=\"inquiryInfo.patientSex === 1? selfHeadDefault1 : selfHeadDefault0\"></image>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/chat/component/askcard/askcard.wxss */\n.card-container {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.card-container-left {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  margin-right: 20rpx;\n}\n\n.person-name {\n  color: #999999;\n  font-size: 20rpx;\n  margin-bottom: 4rpx;\n}\n\n.avatar {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.inter_card_container {\n  width: 490rpx;\n  /* height: 380rpx; */\n  background-color: #ffffff;\n  border-radius: 20rpx 0rpx 20rpx 20rpx;\n  /* padding-bottom: 30rpx; */\n}\n\n.card_title {\n  height: 72rpx;\n  line-height: 72rpx;\n  font-size: 30rpx;\n  padding-left: 30rpx;\n  font-weight: bold;\n  color: #333333;\n  border-bottom: 1rpx solid #eeeeee;\n}\n\n.user_con {\n  padding: 30rpx 19rpx 0 30rpx;\n}\n\n.user_con .info {\n  color: #333333;\n  font-weight: bold;\n  margin-right: 40rpx;\n\n}\n\n.history_disease_des {\n  padding: 30rpx 30rpx 0rpx 30rpx;\n  font-size: 30rpx;\n}\n\n.history_disease_des .title {\n  color: #999999;\n}\n\n.history_disease_des .info {\n  color: #333333;\n  padding-left: 20rpx;\n  word-wrap: break-word; /*纯数字不能折行问题*/\n}\n.history_disease_des .img_box .flex {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 12rpx;\n}\n.history_disease_des .img_box .view_img {\n  margin-top: 12rpx;\n  margin-right: 12rpx;\n  display: flex;\n  justify-content: flex-start;\n}\n\n.history_disease_des .img_box .view_img image {\n  width: 122rpx;\n  height: 122rpx;\n}\n\n.history_disease_des .more, .history_disease_des .less {\n  width: 100%;\n  height: 70rpx;\n  line-height: 70rpx;\n  font-size: 24rpx;\n  text-align: center;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #9d9fb8;\n}\n\n.history_disease_des .more image {\n  width: 20rpx;\n  height: 20rpx;\n  margin-left: 9rpx;\n}\n\n.history_disease_des .less image {\n  position: relative;\n  top: 5rpx;\n  width: 30rpx !important;\n  height: 30rpx !important;\n  margin-left: 9rpx;\n}"},"convertDir/pages/inquiry/chat/component/audio/audio":{"js":"let audioCtxFc = require(\"audioCtxFactory\");\nlet playStatus = require(\"playStatus\");\n\nif (Taro.setInnerAudioOption) {\n  Taro.setInnerAudioOption({\n    obeyMuteSwitch: false,\n    autoplay: true\n  })\n}\n\nexport default {\n\tprops: {\n\t\tmsg: {\n\t\t\ttype: Object,\n\t\t\tval: {}\n\t\t},\n    isSelf: {\n      type: Boolean,\n      val: true\n    }\n\t},\n\tdata: function() {\n        return {\n            playStatus: playStatus,\n            curStatus: playStatus.STOP,\n            time: \"0'\",\n            opcity: 1,\n            __comps__: {\n                audioCtx: null,\n            }\n        };\n    },\n\tmethods: {\n\t\taudioPlay(){\n\t\t\tTaro.inter && clearInterval(Taro.inter)\n\t\t\tlet audioCtx = this.data.__comps__.audioCtx;\n\t\t\tvar curl = ''\n\t\t\tconsole.log('audio:', this.data.msg.msg.data)\n\t\t\tTaro.downloadFile({\n\t\t\turl: this.data.msg.msg.data,\n\t\t\theader: {\n\t\t\t\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\t\t\tAccept: \"audio/mp3\",\n\t\t\t\tAuthorization: \"Bearer \" + this.data.msg.msg.token\n\t\t\t},\n\t\t\tsuccess(res){\n\t\t\t\tcurl = res.tempFilePath;\n\t\t\t\tconsole.log('audio url:', curl)\n\t\t\t\taudioCtx.src = curl;\n\t\t\t\taudioCtx.play();\n\t\t\t\t\n\t\t\t},\n\t\t\tfail(e){\n\t\t\t\tTaro.showToast({\n\t\t\t\t\ttitle: \"播放失败\",\n\t\t\t\t\tduration: 1000\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\t},\n\n\t\taudioPause(auCtx){\n\t\t\t//let audioCtx = this.data.__comps__.audioCtx;\n\t\t\tlet audioCtx = this.data.__comps__.audioCtx = audioCtxFc.getCtx(this.data.msg.mid) || auCtx\n\t\t\taudioCtx&&audioCtx.pause();\n\t\t},\n\n\t\taddEvent(){\n\t\t\tlet audioCtx = this.data.__comps__.audioCtx;\n\t\t\taudioCtx.onPlay(this.onPlaying);\n\t\t\taudioCtx.onPause(this.onPause);\n\t\t\taudioCtx.onWaiting(this.onPause);\n\t\t\taudioCtx.onStop(this.onDone);\n\t\t\taudioCtx.onEnded(this.onDone);\n\t\t\taudioCtx.onError(this.onDone);\n\t\t\taudioCtx.onWaiting(this.onWait)\n\t\t\t//audioCtx.onTimeUpdate(this.onTimeUpdate);\n\t\t},\n\n\t\tdelEvent(){\n\t\t\tlet audioCtx = this.data.__comps__.audioCtx;\n\t\t\taudioCtx.offPlay(this.onPlaying);\n\t\t\taudioCtx.offPause(this.onPause);\n\t\t\taudioCtx.offWaiting(this.onPause);\n\t\t\taudioCtx.offStop(this.onDone);\n\t\t\taudioCtx.offEnded(this.onDone);\n\t\t\taudioCtx.offError(this.onDone);\n\t\t\taudioCtx.offWaiting(this.onWait);\n\t\t},\n\t},\n\tmounted(){\n\t\tthis.setData({\n\t\t\ttime: this.properties.msg.msg.length + \"''\",\n\t\t\tstyle: this.properties.msg.style\n\t\t})\n\t},\n\tdestroyed(){\n\t\t\n\t\tlet audioCtx = this.data.__comps__.audioCtx = audioCtxFc.getCtx(this.data.msg.mid);\n\t\tthis.audioPause(audioCtx);\n\t\tthis.delEvent();\n\t},\n\tonReady(){\n\t\tlet self = this\n\t\tlet curl = ''\n\t\tlet audioCtx = this.data.__comps__.audioCtx = audioCtxFc.getCtx(this.data.msg.mid);\n\t\t\n\t\taudioCtx.autoplay = false;\n\t\taudioCtx.loop = false;\n\t\t//\n\t\tthis.onPlaying = () => {\n\t\t\tthis.setData({\n\t\t\t\tcurStatus: playStatus.PLAYING,\n\t\t\t});\n\t\t\tTaro.inter && clearInterval(Taro.inter)\n\t\t\tTaro.inter = setInterval(() => {\n\t\t\t\tlet opcity = this.data.opcity;\n\t\t\t\tthis.setData({\n\t\t\t\t\topcity: opcity == 1 ? 0.4 : 1\n\t\t\t\t})\n\t\t\t}, 500)\n\t\t};\n\t\tthis.onPause = () => {\n\t\t\t// 第二次播放会立即抛出一个异常的 onPause\n\t\t\tif(parseInt(this.data.time, 10) < 1){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setData({\n\t\t\t\tcurStatus: playStatus.PAUSE,\n\t\t\t\topcity: 1\n\t\t\t\t//time: \"0'\",\n\t\t\t});\n\t\t};\n\t\tthis.onDone = () => {\n\t\t\t// console.log(\"onDone\", JSON.stringify(this.data));\n\t\t\tthis.setData({\n\t\t\t\tcurStatus: playStatus.STOP,\n\t\t\t\topcity: 1\n\t\t\t\t//time: \"0'\",\n\t\t\t});\n\t\t\tclearInterval(Taro.inter)\n\t\t};\n\t\t// 多次播放会丢失这个回调\n\t\tthis.onTimeUpdate = () => {\n\t\t\tthis.setData({\n\t\t\t\ttime: (audioCtx.currentTime >> 0) + \"'\"\n\t\t\t});\n\t\t};\n\t\tthis.onWait = () => {\n\t\t\tTaro.showToast({\n\t\t\t\ttitle: \"加载中...\",\n\t\t\t\ticon: \"none\",\n\t\t\t\tduration: 1000\n\t\t\t});\n\t\t}\n\t\tthis.addEvent();\n\t},\n};\n\n","wxml":"\n  <view class=\"audio-auto-container\"> \n    <view v-if=\"isSelf\" class=\"audio-player\" catch:tap=\"audioPlay\" :style=\"{opacity: opcity}\"> \n      <text class=\"time\">{{ time }}\n      </text>\n      <view class=\"controls play-btn\" catch:tap=\"audioPlay\">\n        <image :src=\"style == 'self'? '../../images/voicemsgmy.png' : '../../images/voicemsg.png'\"></image>\n      </view>\n    </view>\n    <view v-else class=\"audio-player\" catch:tap=\"audioPlay\" :style=\"{opacity: opcity}\"> \n      <view class=\"controls play-btn\" catch:tap=\"audioPlay\">\n        <image :src=\"style == 'self'? '../../images/voicemsgmy.png' : '../../images/voicemsg.png'\"></image>\n      </view>\n      <text class=\"time\">{{ time }}\n      </text>\n    </view>\n  </view>","wxss":".audio-player {\n\tposition: relative;\n\toverflow: hidden;\n\tdisplay: flex;\n\ttransition: opacity .5s;\n\tpadding: 0 10rpx;\n}\n\n.audio-player .controls {\n\theight:40rpx;\n\talign-items:center;\n\tdisplay:flex;\n}\n\n.audio-player .controls image {\n\theight: 48rpx;\n\twidth: 30rpx;\n\tmargin: 0 8rpx 0 35rpx\n}\n\n.audio-player .time {\n\tfont-size: 34rpx;\n\tline-height: 40rpx;\n\tflex: 1;\n\ttext-align: left;\n}\n"},"convertDir/pages/inquiry/chat/component/audio/audioCtxFactory":{"js":"// 每一个音频消息都有自己的 ctx。\n// 可以有多个 ctx，每次播放都能知道是哪个 ctx 在调用，从而让其他的 ctx pause。\n// 消息销毁，记得处理 ctx。\n// 主要是同步跨 ctx 的操作，保证只有一个 ctx 播放\nlet allCtx = {};\nlet inUseCtx = null;\nlet allComm = {}\nfunction proxier(ctx){\n\tlet __play__ = ctx.play;\n\tlet __pause__ = ctx.pause;\n\tctx.play = playProxier;\n\tctx.pause = pauseProxier;\n\tfunction playProxier(){\n\t\t// 如果正在播放的不是自己，暂停\n\t\tif(inUseCtx && inUseCtx != this){\n\t\t\tinUseCtx.pause();\n\t\t}\n\t\t__play__.call(this);\n\t\tinUseCtx = this;\n\t}\n\tfunction pauseProxier(){\n\t\t// 只有是自己才 pause\n\t\tif(inUseCtx == this){\n\t\t\t__pause__.call(this);\n\t\t}\n\t}\n}\n\nmodule.exports = {\n\tgetCtx(mid){\n\t\tlet returnCtx = allCtx[mid];\n\t\tif(!returnCtx){\n\t\t\treturnCtx = Taro.createInnerAudioContext();\n\t\t\tallCtx[mid] = returnCtx;\n\t\t\tproxier(returnCtx);\n\t\t}\n\t\treturn returnCtx;\n\t},\n\tgetAllCtx(){\n\t\tTaro.setStorageSync(\"allCtx\", JSON.stringify(Object.keys(allCtx)));\n\t\treturn allCtx\n\t},\n\tgetCommponet(mid,comm){\n\t\tlet curComm = allComm[mid]\n\t\tif (!curComm) {\n\t\t\tallComm[mid] = comm\n\t\t}\n\t\treturn allComm\n\t}\n};\n"},"convertDir/pages/inquiry/chat/component/audio/playStatus":{"js":"module.exports = {\n\tPLAYING: \"playing\",\n\tPAUSE: \"pause\",\n\tSTOP: \"stop\",\n};\n"},"convertDir/pages/inquiry/chat/component/camera/camera":{"js":"let WebIM = Taro.WebIM = require(\"../../../../../im/utils/WebIM\")[\"default\"];\nimport  {getUserEasemoInfo} from '../../../../../common/userEasemoInfo'\n\nexport default {\n  props: {\n    userInfo: {\n      type: Object,\n      default: {},\n    },\n    chatType: {\n      type: String,\n      default: 'singleChat',\n    },\n    inquiryInfo: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function() {\n    return {\n      allowType: {\n        jpg: true,\n        gif: true,\n        png: true,\n        bmp: true\n      }\n    };\n  },\n  methods: {\n\n    /**\n     *  调用 wx api 打开相机功能\n     */\n    openCamera() {\n      let _this = this;\n      Taro.chooseImage({\n        count: 1,\n        sizeType: [\"original\", \"compressed\"],\n        sourceType: [\"camera\"],\n        success(res) {\n          // 上传图片\n          _this.getImageInfo(res);\n        }\n      });\n    },\n    /**\n     * 获取信息\n     * @params { res }  图片信息 \n     */\n    getImageInfo(res) {\n      let _this = this;\n      // 获得临时路径\n      let tempFilePaths = res.tempFilePaths;\n      // 获取图片信息\n      Taro.getImageInfo({\n        src: tempFilePaths[0],\n        success(res) {\n\n          let index = res.path.lastIndexOf(\".\");\n          let filetype = (~index && res.path.slice(index + 1)) || \"\";\n\n          if (filetype.toLowerCase() in _this.data.allowType) {\n            _this.setUploadImage(res, tempFilePaths, filetype);\n          }\n        }\n      });\n    },\n    /**\n     * 上传选择的图片\n     */\n    setUploadImage(res, tempFilePaths, filetype) {\n      let _this = this;\n      // 获取 im accessToken\n      let token = WebIM.conn.context.accessToken;\n      // 获取 im appkey\n      let str = WebIM.config.appkey.split(\"#\");\n      // 图片信息\n      let width = res.width;\n      let height = res.height;\n      // uploadUrl \n      let uploadUrl = \"https://a1.easemob.com/\" + str[0] + \"/\" + str[1] + \"/chatfiles\";\n\n      // 调用 wx 上传 API\n      Taro.uploadFile({\n        url: uploadUrl,\n        filePath: tempFilePaths[0],\n        name: \"file\",\n        header: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + token\n        },\n        success(res) {\n          // 当前用户信息\n          let userInfo = Taro.getStorageSync(\"userEasemoInfo\");\n          // 医生信息\n          // let doctorInfo = Taro.getStorageSync(\"doctorInfo\");\n          // 参数配置\n          let dataObj = JSON.parse(res.data);\n          let id = WebIM.conn.getUniqueId();\n          let apiURL = WebIM.config.apiURL;\n          let msg = new WebIM.message('img', id);\n          let chatType = _this.data.chatType;\n          let url = dataObj.uri + \"/\" + dataObj.entities[0].uuid;\n\n          let flag; // true 发消息 医生会弹通知\n          // 名医 而且 待接诊 \n          let famousWaitFlag = Taro.getStorageSync('famousWaitFlag') || false; // 名医问诊 待接诊状态标识\n          if (_this.properties.inquiryInfo.inquiryType == 4 && famousWaitFlag) {\n            flag = true;\n          } else {\n            flag = false;\n          }\n          // 设置消息\n          msg.set({\n            apiUrl: apiURL,\n            body: {\n              type: 'img',\n              size: {\n                width: width,\n                height: height\n              },\n              url: url,\n              filetype: filetype,\n              filename: tempFilePaths[0]\n            },\n            from:getUserEasemoInfo().easeMoUserId,\n            to: _this.properties.inquiryInfo.physicianEasemobId || Taro.getStorageSync('physicianEasemobId'),\n            ext: {\n              inquiryId: _this.properties.inquiryInfo.inquiryId,\n              sourceType: 1,\n              isHideNotification: flag\n            },\n            roomType: false,\n            chatType: chatType,\n            success: function () { \n                    // 暴露事件\n          _this.triggerEvent( \"newCameraMsg\", { msg: msg, type: 'img' }, { bubbles: true, composed: true }); \n          \n     \n            }  \n           \n          });\n          // 发送消息\n          WebIM.conn.send(msg.body);\n        \n        }\n      });\n    }\n  },\n};\n\n","json":{},"wxml":"\n  <view class=\"camera-auto-container\"></view>","wxss":"/* pages/chat/component/camera/camera.wxss */"},"convertDir/pages/inquiry/chat/component/imRate/rate":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    rate: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function() {\n    return {\n      rateText: '',\n      rateTexts: {\n        '1': '非常不满意',\n        '2': '不满意',\n        '3': '一般',\n        '4': '满意',\n        '5': '非常满意',\n      },\n      isRate: null,\n      myRate: 0\n    };\n  },\n  watch: {\n    rate() {\n      this.setData({\n        myRate: this.data.rate,\n      })\n      if (this.data.rate || this.data.rate === 0) {\n        this.setData({\n          isRate: this.data.rate > 0? '2':'1'\n        })\n      }\n    },\n    myRate() {\n      this.setData({\n        rateText: this.data.rateTexts[this.data.myRate]\n      })\n    }\n  },\n  lifetimes: {\n\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    // 改变评价分\n    onChangRate(e) {\n      this.setData({\n        myRate: e.currentTarget.dataset.index\n      })\n    },\n    // 提交\n    onSub(e) {\n      if (this.data.myRate === '0') {\n        Taro.showToast({\n          title: '请选择评分',\n          icon: 'none',\n          duration: 2000\n        })\n        return\n      }\n      this.triggerEvent('sub', e.currentTarget.dataset.rate)\n    } \n  }\n};\n","json":{},"wxml":"\n  <view class=\"rate-auto-container\">\n    <view class=\"im-rate-container\"> \n      <view v-if=\" isRate === '1' \"> \n        <view class=\"im-rate-content im-pub-flex\">   \n          <view class=\"im-blod-text\">对医生还满意吗？\n          </view>\n          <view class=\"im-nor-text\">您的评价会让医生做的更好\n          </view>\n          <view class=\"im-rates\">\n            <view :class=\"[im-rates-item,( index === 4? 'im-last-rates-item':'' )]\" v-for=\"item in  [1,2,3,4,5] \" :key=\"item\"> \n              <image bindtap=\"onChangRate\" :data-index=\" index + 1\" v-if=\" index >= myRate \" class=\"im-rate-item-img\" src=\"../../../../../images/icon_im_rate_default.png\"></image>\n              <image bindtap=\"onChangRate\" :data-index=\" index + 1\" v-else class=\"im-rate-item-img\" src=\"../../../../../images/icon_im_rate_selected.png\"></image>\n            </view>\n          </view>\n          <view class=\"im-rate-text\">{{ rateText }}\n          </view>\n        </view>\n        <view class=\"im-rate-btn im-pub-flex\" bindtap=\"onSub\" :data-rate=\" myRate \">提交\n        </view>\n      </view>\n      <view class=\"im-disabled-rate\" v-if=\" isRate === '2' \"> \n        <view>  \n          <view class=\"im-blod-text\">我的评价\n          </view>\n          <text class=\"im-rate-text im-rate-first-text\">满意度\n          </text>\n          <text class=\"im-rate-text\">{{ rateText }}\n          </text>\n        </view>\n        <view class=\"im-disabled-rates\">\n          <view class=\"im-rates-item\" v-for=\"item in  [1,2,3,4,5] \" :key=\"item\"> \n            <image :data-index=\" index + 1\" v-if=\" index >= myRate \" class=\"im-rate-item-img\" src=\"../../../../../images/icon_im_rate_default.png\"></image>\n            <image :data-index=\" index + 1\" v-else class=\"im-rate-item-img\" src=\"../../../../../images/icon_im_rate_selected.png\"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".im-rate-container {\n  width: 100%;\n  background-color: #FFFFFF;\n  border-radius: 20rpx;\n}\n\n.im-pub-flex {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.im-rate-content {\n  padding-top: 30rpx;\n  padding-bottom: 20rpx;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n.im-blod-text {\n  color: #333333;\n  font-size: 30rpx;\n  font-weight: 500;\n}\n\n.im-nor-text {\n  color: #999999;\n  font-size: 28rpx;\n  margin-top: 10rpx;\n}\n\n.im-rate-text {\n  color: #999999;\n  font-size: 24rpx;\n}\n\n.im-rate-btn {\n  color: #00b955;\n  font-size: 30rpx;\n  font-weight: 500;\n  padding: 20rpx 0;\n}\n\n.im-rates {\n  display: flex;\n  align-items: center;\n  margin: 20rpx 0;\n}\n\n.im-rates-item {\n  margin-left: 30rpx;\n}\n\n.im-last-rates-item {\n  margin-right: 30rpx;\n}\n\n.im-rate-item-img {\n  width: 48rpx;\n  height: 48rpx;\n}\n\n\n.im-disabled-rate {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 30rpx;\n}\n\n.im-disabled-rates {\n  display: flex;\n  align-items: center;\n}\n\n.im-rate-first-text {\n  margin-right: 20rpx;\n}"},"convertDir/pages/inquiry/chat/component/image/image":{"js":"let WebIM = Taro.WebIM = require(\"../../../../../im/utils/WebIM\")[\"default\"];\nimport  {getUserEasemoInfo} from '../../../../../common/userEasemoInfo'\n\nexport default {\n  props: {\n    userInfo: {\n      type: Object,\n      default: {},\n    },\n    chatType: {\n      type: String,\n      default: 'singleChat',\n    },\n    inquiryInfo: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function() {\n    return {\n      allowType: {\n        jpg: true,\n        gif: true,\n        png: true,\n        bmp: true\n      }\n    };\n  },\n  methods: {\n\n    /**\n     *  调用 wx api 打开相册功能\n     */\n    sendImage() {\n      let _this = this;\n      Taro.chooseImage({\n        count: 1,\n        sizeType: [\"compressed\"],\n        sourceType: [\"album\"],\n        success(res) {\n          // 上传图片\n          _this.getImageInfo(res);\n        }\n      });\n    },\n    /**\n     * 获取信息\n     * @params { res }  图片信息 \n     */\n    getImageInfo(res) {\n      let _this = this;\n      // 获得临时路径\n      let tempFilePaths = res.tempFilePaths;\n      console.log(tempFilePaths)\n      // 获取图片信息\n      Taro.getImageInfo({\n        src: tempFilePaths[0],\n        success(res) {\n\n          let index = res.path.lastIndexOf(\".\");\n          let filetype = (~index && res.path.slice(index + 1)) || \"\";\n          if (filetype.toLowerCase() in _this.data.allowType) {\n            _this.setUploadImage(res, tempFilePaths, filetype);\n          }\n        }\n      });\n    },\n    /**\n     * 上传选择的图片\n     */\n    setUploadImage(res, tempFilePaths, filetype) {\n      let _this = this;\n      // 获取 im accessToken\n      let token = WebIM.conn.context.accessToken;\n      // 获取 im appkey\n      let str = WebIM.config.appkey.split(\"#\");\n      // 图片信息\n      let width = res.width;\n      let height = res.height;\n      // uploadUrl \n      let uploadUrl = \"https://a1.easemob.com/\" + str[0] + \"/\" + str[1] + \"/chatfiles\";\n      console.log('www imageMsg:', uploadUrl)\n      console.log('www imageMsg:', tempFilePaths[0])\n      console.log('www imageMsg:', token)\n      // 调用 wx 上传 API\n      Taro.uploadFile({\n        url: uploadUrl,\n        filePath: tempFilePaths[0],\n        name: \"file\",\n        header: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + token\n        },\n        success(res) {\n          console.log('www imageMsg:', res)\n          // 当前用户信息\n          let userInfo = Taro.getStorageSync(\"userInfo\");\n          // 医生信息\n          // let doctorInfo = Taro.getStorageSync(\"doctorInfo\");\n          // 参数配置\n          let dataObj = JSON.parse(res.data);\n          let id = WebIM.conn.getUniqueId();\n          let apiURL = WebIM.config.apiURL;\n          let msg = new WebIM.message('img', id);\n          let chatType = _this.data.chatType;\n          let url = dataObj.uri + \"/\" + dataObj.entities[0].uuid;\n          // 名医接诊 医生接诊后的时 发消息 医生端弹通知\n          let flag; // true 发消息 医生会弹通知\n          let famousWaitFlag = Taro.getStorageSync('famousWaitFlag') || false; // 名医问诊 待接诊状态标识\n          // 名医 而且 待接诊 \n          if (_this.properties.inquiryInfo.inquiryType == 4 && famousWaitFlag) {\n            flag = true;\n          } else {\n            flag = false;\n          }\n          // 设置消息\n          msg.set({\n            apiUrl: apiURL,\n            body: {\n              type: 'img',\n              size: {\n                width: width,\n                height: height\n              },\n              url: url,\n              filetype: filetype,\n              filename: tempFilePaths[0]\n            },\n            from:getUserEasemoInfo().easeMoUserId,\n            to: _this.properties.inquiryInfo.physicianEasemobId || Taro.getStorageSync('physicianEasemobId'),\n            ext: {\n              inquiryId: _this.properties.inquiryInfo.inquiryId,\n              sourceType: 1,\n              isHideNotification: flag // true 的时候不弹 app 通知\n            },\n            roomType: false,\n            chatType: chatType,\n            success: function () {\n              // 暴露事件\n              _this.triggerEvent(\"newImageMsg\", { msg: msg, type: 'img' }, { bubbles: true, composed: true });\n              console.log(msg.body)\n            }\n          });\n          // 发送消息\n          WebIM.conn.send(msg.body);\n\n        }\n      });\n    }\n  },\n};\n\n","json":{},"wxml":"","wxss":"/* pages/chat/component/image/image.wxss */"},"convertDir/pages/inquiry/chat/component/index":{"js":"/**\n * @desc: 聊天组件\n * @author: wangqinfei\n */\nconst msgStorage = require(\"../../../../im/utils/msgStorage\");\n\nexport default {\n  onShow: function() {\n    // 页面被展示\n    console.log('chat show')\n  },\n\n  onHide: function() {\n    // 页面被隐藏\n    console.log('chat hide')\n  },\n\n  onResize: function(size) {\n    // 页面尺寸变化\n    console.log('chat resize')\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    inquiryInfo: {\n      type: Object,\n      default: {}\n    },\n    chatType: {\n      type: String,\n      default: 'singleChat',\n    }\n  },\n\n  data: function() {\n    return {\n      __comps__: {\n        msglist: null,\n        inputbar: null\n      },\n      isInputBar: true\n    };\n  },\n\n  created() {\n    console.log('chat created')\n  },\n\n  mounted() {\n    console.log('chat attached')\n  },\n\n  moved() {\n    console.log('chat moved')\n  },\n\n  destroyed() {\n    console.log('chat detached')\n  },\n\n  onError() {\n    console.log('chat error')\n  },\n\n  /**\n   * 声明周期函数\n   */\n  onReady() {\n    // 消息列表调用\n    this.data.__comps__.msglist = this.selectComponent(\"#msg-list\");\n    // 输入框组件调用 \n    this.data.__comps__.inputbar = this.selectComponent(\"#chat-inputbar\");\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    saveSendMsg(evt) {\n      msgStorage.saveMsg(evt.detail.msg, evt.detail.type);\n    },\n    getMore () {\n      this.selectComponent('#chat-msglist').getHistoryMsg()\n    },\n    // 问诊15分钟后，重新加载问诊信息\n    noticeRecallInquiryInfoTransition () {\n      console.log(\"问诊15分钟结束，index\");\n      this.triggerEvent('noticeRecallInquiryInfo')\n    },\n    hideInputBar() {\n      this.setData({\n        isInputBar: false\n      })\n    }\n\n\n  }\n};\n","wxml":"\n  <view class=\"index-auto-container\"> \n    <view class=\"msg-box\">\n      <msg-list id=\"chat-msglist\" :inquiryInfo=\" inquiryInfo \" bind:noticeRecallInquiryInfo=\"noticeRecallInquiryInfoTransition\" bind:hideInputBar=\"hideInputBar\"></msg-list>\n    </view>\n    <view v-if=\" isInputBar \">\n      <chat-inputbar bind:newTextMsg=\"saveSendMsg\" :inquiryInfo=\" inquiryInfo \"></chat-inputbar>\n    </view>\n  </view>","json":{"msg-list":"msglist/msglist","chat-inputbar":"inputbar/inputbar"},"wxss":".msg-box{\n  height: auto;\n  width: 100%;\n}"},"convertDir/pages/inquiry/chat/component/inputbar/inputbar":{"wxml":"\n  <view class=\"inputbar-auto-container\">\n    <view id=\"input-box\" class=\"input-box\" v-if=\" !inquiryEndBtn && !inquiryEndAuto && !doctorAutoComplet \">    \n      <view class=\"input-send-msg-box\">\n        <input type=\"text\" :value=\" inputMessage \" confirm-type=\"send\" cursor-spacing=\"72\" bindconfirm=\"handleSendMessage\" bindinput=\"handleMessage\" bindtap=\"handleFocus\" bindfocus=\"handleFocus\" bindblur=\"handleBlur\" placeholder=\"输入消息内容\" placeholder-style=\"color:#999999;\"></input>\n      </view>\n      <view :class=\"[input-send-type-box_common,(isIpx?'input-send-type-box_ipx':'input-send-type-box')]\">  \n        <view class=\"item input-send-type_record\" bind:tap=\"handleSendAudio\">\n          <image :src=\" iconRecord \"></image>\n        </view>\n        <view class=\"item input-send-type_camera\" bind:tap=\"handleOpenCamera\">\n          <image :src=\" iconCamera \"></image>\n        </view>\n        <view class=\"item input-send-type_image\" bind:tap=\"handleSendImage\">\n          <image :src=\" iconImage \"></image>\n        </view>\n      </view>\n      <chat-record id=\"chat-record\" :userInfo=\" userInfo \" :chatType=\" chatType \" :inquiryInfo=\" inquiryInfo \" bind:newRecordMsg=\"saveSendMsg\"></chat-record>\n      <chat-camera id=\"chat-camera\" :userInfo=\" userInfo \" :chatType=\" chatType \" :inquiryInfo=\" inquiryInfo \" bind:newCameraMsg=\"saveSendMsg\"></chat-camera>\n      <chat-image id=\"chat-image\" :userInfo=\" userInfo \" :chatType=\" chatType \" :inquiryInfo=\" inquiryInfo \" bind:newImageMsg=\"saveSendMsg\"></chat-image>\n    </view>\n  </view>","json":{"chat-record":"../record/record","chat-camera":"../camera/camera","chat-image":"../image/image"},"js":"// 获取全局类\nlet WebIM = Taro.WebIM = require(\"../../../../../im/utils/WebIM\")[\"default\"];\n// 消息存储\nconst msgStorage = require(\"../../../../../im/utils/msgStorage\");\n// 消息订阅者\nconst disp = require(\"../../../../../im/utils/broadcast.js\");\nimport xcxIM from '../../../../../im/im'\nimport  {getUserEasemoInfo} from '../../../../../common/userEasemoInfo'\n/**\n  * 节流函数\n  * @params { fn,delay } 执行函数和延时\n  */\nconst throttle =   function throttle(fn, delay) {\n     var timer = null;\n     var timeStamp = new Date();\n     return function() {\n       var context = this;  //获取函数所在作用域this\n       var args = arguments;  //取得传入参数\n       if(new Date()-delay){\n           timeStamp = new Date();\n           timer = setTimeout(function(){\n           fn.apply(context,args);\n         },delay);\n       }\n     }\n   }\n\nexport default {\n  onShow: function() {\n    // 页面被展示\n    console.log('inputbar show')\n  },\n\n  onHide: function() {\n    // 页面被隐藏\n    console.log('inputbar hide')\n  },\n\n  onResize: function(size) {\n    // 页面尺寸变化\n    console.log('inputbar resize')\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    inquiryInfo: {\n      type: Object,\n      default: {}\n    },\n    chatType: {\n      type: String,\n      default: 'singleChat',\n    }\n  },\n\n  data: function() {\n    return {\n      __comps__: {\n        record: null,\n        camera: null,\n        image: null,\n      },\n      iconRecord: '../../images/record.png',\n      iconRecordActive: '',\n      iconCamera: '../../images/camera.png',\n      iconImage: '../../images/pic.png',\n      iconNoPrescripe:  '../../../../images/noteImg/empty.png',\n      iconInquiryEnd: '../../../../images/icon-inquiry-end.png',\n      recordStatus:'../../../../images/noteImg/empty.png',\n      isIpx: '',\n      userId: '',\n      inputMessage: '',\n      userMessage: '',\n      prescripeData:'',\n      hasPrescripeData: false,\n      isShowHalfScreenDialog: true,\n      isShowPrescripe: false\n    };\n  },\n\n  created() {\n    console.log('inputbar created')\n  },\n\n  mounted() {\n    console.log('inputbar attached')\n  },\n\n  moved() {\n    console.log('inputbar moved')\n  },\n\n  destroyed() {\n    console.log('inputbar detached')\n  },\n\n  onError() {\n    console.log('inputbar error')\n  },\n\n  /**\n   * 声明周期函数\n   * 初始化组件\n   * @param {isIpx} \n   */\n  onReady() {\n    console.log('inputbar ready')\n    this.data.__comps__.msglist = this.selectComponent(\"#msg-list\");\n    this.data.__comps__.record = this.selectComponent(\"#chat-record\");\n    this.data.__comps__.camera = this.selectComponent(\"#chat-camera\");\n    this.data.__comps__.image = this.selectComponent(\"#chat-image\");\n    this.getUserInfo();\n    // this.setData({ isIpx: app.globalData.isIPX })\n  },\n\n  methods: {\n    /**\n     * 发送文本消息\n     * @params { message } 消息对象\n     */\n    setMessageText: throttle(function(msg) {\n      let _this = this;\n      // 设置消息体\n      // console.log('msg textmsg send inquiryId: ', _this.properties.inquiryInfo.inquiryId)\n      try {\n        // 名医接诊 医生接诊后的时 发消息 医生端弹通知\n        let flag; // true 发消息 医生会弹通知\n        let famousWaitFlag = Taro.getStorageSync('famousWaitFlag') || false; // 名医问诊 待接诊状态标识\n        // 名医 而且 待接诊 \n        if (_this.properties.inquiryInfo.inquiryType == 4 && famousWaitFlag) {\n          flag = true;\n        } else {\n          flag = false;\n        }\n        msg.set({\n          msg: _this.data.userMessage,\n          // to: _this.data.inquiryInfo.physicianEasemobId,\n          to: _this.properties.inquiryInfo.physicianEasemobId || Taro.getStorageSync('physicianEasemobId'),\n          from: getUserEasemoInfo().easeMoUserId,\n          chatType: 'singleChat',\n          roomType: false,\n          ext: {\n            inquiryId: _this.properties.inquiryInfo.inquiryId,\n            sourceType: 1,\n            isHideNotification: flag // true 的时候不弹 app 通知\n          },\n          success(id, serverMsgId) {\n            console.log('success sss')\n            getApp().globalData.loggerSDK.info(`xcxLogMsg sendTextMsgSuccess:${id} ${serverMsgId}`)\n              // 监听 triggerEvent 事件\n              _this.triggerEvent( \"newTextMsg\",{ msg: msg, type: 'txt',}, { bubbles: true, composed: true });\n              // 成功之后清空数据\n              _this.setData({ userMessage: \"\", inputMessage: \"\" });\n          },\n          fail(error) {\n            console.log(\"error:\", error)\n            console.log('发送失败')\n            getApp().globalData.loggerSDK.info(`xcxLogMsg sendTextMsgFail:${error}`)\n          }\n        })\n        // 发送消息\n        WebIM.conn.send(msg.body);\n        getApp().globalData.loggerSDK.info(`xcxLogMsg sendTextMsgEnd`)\n      } catch (error) {\n        getApp().globalData.loggerSDK.info(`xcxLogMsg sendTextMsgCatch:${error}`)\n      }\n    },1000),\n    /**\n     * 获取本地存储的用户信息\n     * key { Object } res\n     */\n    getUserInfo () {\n      this.data.userId = Taro.getStorageSync(\"userInfo\").userId;\n    },\n    /**\n     *  输入框获取焦点事件\n     */\n    handleFocus (e) {\n      this.triggerEvent(\"inputFocused\", null, { bubbles: true });\n    },\n    /**\n     * 输入框离开焦点事件\n     */\n    handleBlur () {\n      this.triggerEvent(\"inputBlured\", null, { bubbles: true });\n    },\n    /**\n     * 获取输入框文本消息 value 事件\n     */\n    handleMessage (e) {\n      console.log(e)\n      this.setData({\n        userMessage: e.detail.value\n      });\n    },\n    /**\n     * 输入框发送文本消息事件\n     */\n    handleSendMessage () {\n      let _this = this;\n      // 网络正常的情况下才能正常发送\n      Taro.getNetworkType({\n        success(res) {\n          const networkType = res.networkType\n          if (networkType == 'none') {\n            Taro.showToast({\n              title: \"网络已断开,请稍后再试\",\n              icon: 'none',\n              duration: 2000\n            });\n          } else {\n            // String.prototype.trim = function () {\n            //   return this.replace(/(^\\s*)|(\\s*$)/g, '');\n            // };\n            if (!_this.data.userMessage.trim()) {\n              return;\n            }\n            let id = WebIM.conn.getUniqueId();\n            let msg = new WebIM.message('txt', id);\n            _this.setMessageText(msg)\n          }\n        }\n      })\n    },\n    /**\n     * 调用发送音频组件\n     */\n    handleSendAudio () {\n      this.data.__comps__.record.toggleRecordModal();\n    },\n    /**\n     * 调用相机组件\n     */\n    handleOpenCamera () {\n      this.data.__comps__.camera.openCamera()\n    },\n    /**\n     * 调用发送图片组件\n     */\n    handleSendImage () {\n      this.data.__comps__.image.sendImage();\n    },\n    /**\n     * 发送消息保存\n     * @param { evt } Object 事件参数\n     */\n    saveSendMsg(evt) {\n      msgStorage.saveMsg(evt.detail.msg, evt.detail.type);\n    },\n    /**\n     * 跳转处方详情\n     * @param { e } Object 事件参数\n     */\n    handleGoPrescripeDetail (e) {\n      let info = this.data.inquiryInfo;\n      let prescriptionId = e.currentTarget.dataset.id;\n      Taro.navigateTo({\n        url: `/pages/note/prescriptionInfo/prescriptionInfo?prescriptionId=${prescriptionId}&patientId=${info.recipientId}&doctorId=${info.doctorId}`\n      })\n    } \n  }\n};\n","wxss":"\n.input-box{\n  width: 100%;\n\theight: auto;\n\tposition: fixed;\n\tbottom: 0;\n\tright: 0;\n\tz-index: 1;\n\tbackground-color: #FFFFFF;\n}\n.prescripe-content{\n  padding-top: 20rpx;\n}\n.prescripe-no-content-box{\n  width: 100%;\n  height: 450rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.prescripe-no-content-box image{\n  width: 320rpx;\n  height: 200rpx;\n}\n.prescripe-no-content-box text {\n  font-size:30rpx;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(204,204,204,1);\n  line-height:30px;\n  margin-top: 14rpx;\n}\n.label-nth-child{\n  padding: 14rpx 0;\n}\n.input-send-msg-box{\n  padding: 30rpx 0 30rpx 30rpx; \n}\n.input-send-type-box_common{\n  display: flex;\n  align-items: center;\n  padding: 0 30rpx;\n}\n.input-send-type-box{\n  height: 84rpx;\n}\n.input-send-type-box_ipx{\n  height: 84rpx;\n  padding-bottom: 30rpx; \n}\n.input-send-type-box_common .item {\n  width: 88rpx;\n  height: 88rpx;\n  display: flex;\n  justify-content: start;\n  align-items: center;\n\n}\n.input-send-type-box_common .item image {\n  width: 44rpx;\n  height: 44rpx;\n}\n"},"convertDir/pages/inquiry/chat/component/msglist/msglist":{"json":{"im-tab-bar":"../../../../../component/imTabBar/tabBar","famous-tab-bar":"/pages/famousDoctors/component/imTabBar/tabBar","im-rate":"../imRate/rate","audio-msg":"../audio/audio","ask-card":"../askcard/askcard","scanCode-im-tab-bar":"../../../../../component/scanCodeTabBar/tabBar","im-doctor-helper":"../../../../../component/doctorHelper/doctorHelper","im-medicine-card":"../../../../../component/medicineCard/medicineCard"},"wxss":"@import '/common/tableView.wxss';\nPage{\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: block;\n  overflow-y: hidden;\n  background:rgba(245,245,245,1);\n}\n.nav {\n  position: relative;\n  top: 90rpx;\n  padding: 30rpx;\n}\n.nav-box-bg{\n  border-radius:8rpx;\n  background-color: #fff;\n}\n.nav-information-title {\n  font-size: 32rpx;\n  color: rgba(51, 51, 51, 1);\n  height: 80rpx;\n  line-height: 80rpx;\n  padding-left: 24rpx;\n  font-family:PingFangSC-Medium,PingFang SC;\n  font-weight:500;\n  border-bottom: 1px solid #EEEEEE;\n}\n.nav-interrogation-xx{\n  display: flex;\n  margin-top: 20rpx;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n}\n.nav-interrogation-xx-left{\n  font-size: 30rpx;\n  color: rgba(153, 153, 153, 1);\n  width: 180rpx;\n  min-width: 180rpx;\n  max-width: 180rpx;\n}\n.nav-interrogation-xx-right{\n  font-size: 30rpx;\n  color: rgba(51, 51, 51, 1);\n}\n.nav-interrogation-imgList{\n  position: relative;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  margin-top: 20rpx;\n  display: flex;\n  padding-bottom: 20rpx;\n}\n.imgList-img{\n  display: block;\n  border-radius:8rpx;\n  margin-right: 20rpx;\n  position: relative;\n  z-index: 0;\n}\n.nav-interrogation-imgList .imgList-img:nth-child(4){\n  margin-right: 0;\n}\n.imgList-img image{\n  width:147rpx;\n  height:147rpx;\n  display: block;\n  border-radius:8rpx;\n}\n.imgList-back{\n  width:147rpx;\n  height:147rpx;\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 2rpx;\n  background-color: rgba(0,0,0,0.5);\n} \n.imgList-text{\n  font-size: 34rpx;\n  color: #fff;\n  position: absolute;\n  top: 35%;\n  left: 37%;\n  z-index: 3;\n}\n\n.scroll_view{\n\tpadding-bottom: 450rpx;\n\tbackground:rgba(245,245,245,1);\n}\n.bottom320 {\n  padding-bottom: 320rpx;\n}\n\n.scroll_view_X{\n  padding:50rpx 0 370rpx 0;\n  background:rgba(245,245,245,1);\n}\n.msg-content-box{\n  padding: 30rpx;\n}\n.msg-box {\n\tpadding-top: 30rpx;\n}\n.msg-rate-container {\n  margin: 30rpx;\n}\n.self {\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-start; \n}\n.doctor{\n   display: flex;\n  justify-content: flex-start;\n  align-content: flex-start; \n}\n.doctor .avatar,.self .avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n  flex-shrink: 0;\n}\n.pub-right-container {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  margin-left: 20rpx;\n}\n.pub-right-container .person-name {\n  color: #999999;\n  font-size: 20rpx;\n  margin-bottom: 4rpx;\n}\n.self .pub-right-container {\n  align-items: flex-end;\n  margin-right: 20rpx;\n  margin-left: 0;\n}\n.self .person-name {\n  text-align: right;\n}\n.self .msg {\n  position: relative;\n  flex-shrink: 0;\n  max-width: 70%;\n  border-radius:20rpx 0rpx 20rpx 20rpx;\n}\n.doctor .msg{\n  flex-shrink: 0;\n  max-width: 70%;\n  border-radius:0rpx 20rpx 20rpx 20rpx;\n}\n.self .msg-txt{\n  font-size:30rpx;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  word-break: break-all;\n}\n.doctor .msg-txt {\n  font-size:30rpx;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  word-break: break-all;\n}\n.doctor .txt-bg {\n  background:rgba(255,255,255,1);\n  color:rgba(48,48,60,1);\n  padding: 20rpx;\n}\n.self .txt-bg{\n  background:#00b955;\n  color:rgba(255,255,255,1);\n  padding: 20rpx;\n}\n.doctor .img-msg{\n  width:180rpx; \n  height:240rpx;\n  /* margin-left: -20rpx;  */\n  border-radius: 20rpx; \n}\n.self .img-msg{\n  width:180rpx; \n  height:240rpx;\n  /* margin-right: -20rpx;  */\n  border-radius: 20rpx; \n}\n.msg-txt-ext{\n  width:420rpx;\n  background:rgba(255,255,255,1);\n  border-radius:8rpx;\n}\n.msg-txt-ext-title{\n  height: 92rpx;\n  width: 100%;\n  text-align: center;\n  line-height: 92rpx;\n  font-size:30rpx;\n  font-family:PingFangSC-Medium,PingFang SC;\n  font-weight:600;\n  color:#333333;\n}\n.msg-txt-ext-btn{\n  height: 82rpx;\n  width: 100%;\n  font-size:30rpx;\n  text-align: center;\n  line-height: 82rpx;\n  border-top: 1rpx solid #EEEEEE;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:600;\n  color:#00b955;\n}\n.msg-cmd-text{\n  margin-top: 30rpx;\n  font-size:24rpx;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(161,165,176,1);\n  line-height:33rpx;\n  text-align: center;\n}\n.err{\n\twidth: 32rpx;\n\theight: 32rpx;\n\tposition: absolute;\n\tleft: -40rpx;\n}\n.hide{\n\tdisplay: none;\n}\n.show{\n\tdisplay: block;\n}\n\n.bannerImage {\n  width: 100%;\n}\n/* 问诊倒计时5分钟显示 */\n.interrogation-timer {\n  width: 319rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  background-color: #EEEEEE;\n  margin: 30rpx auto;\n  text-align: center;\n  font-size: 24rpx;\n  color: #999999;\n  border-radius: 30rpx;\n}\n.number {\n  color: #00b955;\n}\n\n/* 审核通过tips */\n.approved-tips-wapper {\n  height: 72rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #ecfbf9;\n  padding: 0 40rpx;\n}\n.prescribe-text {\n  justify-content: center;\n}\n\n.approved-tips-wapper .left {\n  font-size: 28rpx;\n  color: #00b955;\n}\n\n.approved-tips-wapper .right {\n  background: linear-gradient(90deg,#00b955, #00b955);\n  border-radius: 25px;\n  width: 120rpx;\n  height: 48rpx;\n  line-height: 48rpx;\n  text-align: center;\n  font-weight: 500;\n  color: #ffffff;\n  font-size: 24rpx;\n}\n\n/* 审核未通过tip */\n.not-approved-tips-wapper {\n  width: 100%;\n  height: 72rpx;\n  line-height: 72rpx;\n  background: #ffeeee;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #ff2121;\n}\n\n/* 退款tip */\n.refund-tips-wapper {\n  width: 100%;\n  background: #ffeeee;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #ff2121;\n}\n\n.inquiry-end {\n  color: #999999;\n  font-size: 28rpx;\n  width: 184rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  text-align: center;\n  border-radius: 30rpx;\n  background-color: #eeeeee;\n  margin: 30rpx auto;\n}\n\n.b-img {\n  margin-top: 30rpx;\n}\n\n.ad_box {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 500rpx;\n  height: 640rpx;\n  border-radius: 14rpx;\n  z-index: 99;\n}\n\n.ad_box .contents {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n}\n\n.ad_box .contents image {\n  width: 100%;\n}\n\n.close_img {\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  bottom: -136rpx;\n  left: 50%;\n  margin-left: -30rpx;\n  z-index: 1002;\n}\n\n.buy-drug-btn{\n  color: #FFFFFF;\n  font-size: 30rpx;\n  font-weight: 600;\n  width: 528rpx;\n  margin: 50rpx auto;\n  height: 90rpx;\n  line-height: 90rpx;\n  text-align: center;\n  background: #00b955;\n  border-radius: 48px;\n}\n\n/* 名医问诊待接诊 */\n.wait-diagnosis-tip {\n  padding: 24rpx;\n  color: #ff881c;\n  background: #fff3e8;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n}\n\n/* 名医问诊接诊中tip */\n.diagnosising-tip {\n  height: 72rpx;\n  line-height: 72rpx;\n  padding-left: 70rpx;\n  font-weight: 400;\n  color: #00b955;\n  font-size: 28rpx;\n  background: rgba(0,185,85,0.10);\n}\n\n/* 名医问诊 提示等待文案 */\n.waiting {\n  position: fixed;\n  left: 25rpx;\n  bottom: 197rpx;\n  width: 570rpx;\n  height: 70rpx;\n  padding: 0 20rpx;\n  line-height: 70rpx;\n  border-radius: 35rpx;\n  box-shadow: 0px 5rpx 20rpx 0px rgba(48,48,60,0.08); \n  display: flex;\n  align-items: center;\n  background: #FFFFFF;\n}\n\n.waiting image {\n  width: 40rpx;\n  height: 40rpx;\n  margin-right: 20rpx;\n}","wxml":"\n  <view class=\"msglist-auto-container\">             \n    <im-tab-bar v-if=\" inquiryType === 2 \" :active=\" stepActive \"></im-tab-bar>\n    <famous-tab-bar v-if=\"inquiryType === 4\" :active=\" stepActive \"></famous-tab-bar>\n    <scanCode-im-tab-bar v-else-if=\" inquiryType === 1 \" :active=\" stepActive \"></scanCode-im-tab-bar>\n    <view :class=\"[prescribe-text,( prescribeMsgFlag === 1 ? 'not-approved-tips-wapper' : 'approved-tips-wapper')]\" v-if=\" prescribeMsgFlag === 1 || prescribeMsgFlag === 2 \">\n      <view class=\"left\">{{ prescribeMsg }}\n      </view>\n    </view>\n    <view :class=\"[approved-tips-wapper,( inquiryType === 1 ? 'prescribe-text' : '' )]\" v-if=\" checkPass &&  prescribeMsgFlag === 3  \"> \n      <view class=\"left\">药师审核已完成，可通过该处方购药\n      </view>\n      <view class=\"right\" bindtap=\"goBuyMedicine\" v-if=\"(inquiryType === 2 || inquiryType === 4)&& (inquiryInfo.inquirySource!=8)\">去购药\n      </view>\n    </view>\n    <view class=\"not-approved-tips-wapper\" v-if=\" checkNoPass && prescribeMsgFlag === 4 \">\n\t处方审核未通过，如有需要您可以发起新的问诊\n\n    </view>\n    <view class=\"refund-tips-wapper\" v-if=\" refundType \">\n\t问诊已退费退诊 退款原因：{{refundReason}}\n\n    </view>\n    <view class=\"wait-diagnosis-tip\" v-if=\" inquiryType === 4 && famousWaitFlag \">\n      <view>医生在下单后24小时内未接诊将自动退款\n\n      </view>\n    </view>\n    <scroll-view id=\"scroll-view-box\" scroll-y=\"true\" scroll-with-animation=\"true\" bindscrolltoupper=\"refresh\" upper-threshold=\"0\" :scroll-into-view=\" toView \" :style=\"{height:windowHeightpx}\">\n      <view :class=\"[(isIpx ?'scroll_view_X': 'scroll_view'),(hideInputBar? 'bottom320':'')]\">  \n        <im-doctor-helper v-if=\" inquiryType === 1 \" :inquiryInfo=\"inquiryInfo\"></im-doctor-helper>\n        <im-medicine-card v-if=\" inquiryType === 1 \" :inquiryInfo=\"inquiryInfo\" :lastDiagnosis=\"inquiryInfo.lastDiagnosis\"></im-medicine-card>\n        <view class=\"msg-content-box\">    \n          <ask-card v-if=\" inquiryType === 2 || inquiryType === 4\" :inquiryInfo=\" inquiryInfo \" :inquiryType=\" inquiryType \"></ask-card>\n          <view class=\"msg-box\" v-for=\"(item, {{ item.mid }}) in  chatMsg \" :wx:key=\" item.mid \" :id=\" item.mid \">  \n            <view v-if=\"item.style == 'self'\" class=\"self\"> \n              <view class=\"pub-right-container\"> \n                <view class=\"person-name\">{{ inquiryInfo.patientName }}\n                </view>\n                <view :class=\"[msg,(item.msg.type == 'txt' || item.msg.type == 'audio'  ? 'txt-bg' : '')]\">   \n                  <image :class=\"[err,( item.isFail ? 'show' : 'hide')]\" :src=\" iconErro \"></image>\n                  <view v-if=\" item.msg.type == 'img'\">\n                    <template :is=\" item.msg.type \" :data=\" item \"></template>\n                  </view>\n                  <audio-msg v-else-if=\" item.msg.type == 'audio' \" isSelf=\"true\" :msg=\" item \"></audio-msg>\n                  <view :wx:else=\" item.msg.type == 'txt'\">\n                    <view class=\"template\" v-for=\"(item, key) in  item.msg.data \" :key=\"key\">\n                      <template :is=\" item.type \" :data=\" item \"></template>\n                    </view>\n                  </view>\n                </view>\n              </view>\n              <image class=\"avatar\" :src=\"inquiryInfo.patientSex === 1? selfHeadDefault1 : selfHeadDefault0\"></image>\n            </view>\n            <view v-else-if=\"item.style == 'timertip'\" class=\"interrogation-timer\">\n\t\t\t\t\t当前问诊还有\n\t\t\t\t\t\n\t\t\t\t\t分钟结束\n\t\t\t\t\n              <text class=\"number\">5\n              </text>\n            </view>\n            <view v-else class=\"doctor\"> \n              <image class=\"avatar\" :src=\" doctorInfo.doctorHeadPhoto ? doctorInfo.doctorHeadPhoto : iconDoctorDefault\"></image>\n              <view class=\"pub-right-container\"> \n                <view class=\"person-name\">{{ inquiryInfo.physicianName }}\n                </view>\n                <view :class=\"[msg,( (item.msg.type == 'txt' || item.msg.type == 'audio') &&  !item.msg.ext.rxId ? 'txt-bg' : '')]\">  \n                  <view v-if=\" item.msg.type == 'img'\">\n                    <template :is=\" item.msg.type \" :data=\" item \"></template>\n                  </view>\n                  <audio-msg v-else-if=\" item.msg.type == 'audio' \" isSelf=\"false\" :msg=\" item \"></audio-msg>\n                  <view :wx:else=\" item.msg.type == 'txt'\"> \n                    <view v-if=\"!item.msg.ext.rxId\">\n                      <view class=\"template\" v-for=\"(item, key) in  item.msg.data \" :key=\"key\">\n                        <template :is=\" item.type \" :data=\" item \"></template>\n                      </view>\n                    </view>\n                    <view v-if=\"item.msg.ext.rxId\" :data-id=\"item.msg.ext.rxId\" class=\"template\" bindtap=\"handleMsgExt\">\n                      <view class=\"msg-txt-ext\"> \n                        <view class=\"msg-txt-ext-title\">医生已开具电子处方\n                        </view>\n                        <view class=\"msg-txt-ext-btn\">查看处方\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"inquiry-end\" v-if=\" isEnd \">问诊已结束\n          </view>\n          <view class=\"buy-drug-btn\" v-if=\" inquirySource == 7 && isEnd \" bindtap=\"backBuyDrugs\">返回购药\n          </view>\n          <view id=\"rate\"> \n            <view class=\"msg-rate-container\" v-if=\" isMsgImRate \">\n              <im-rate :rate=\" rate \" id=\"imRate\" bind:sub=\"onSub\"></im-rate>\n            </view>\n            <view class=\"b-img\" v-if=\" bannerImage \">\n              <image :src=\" bannerImage \" bind:tap=\"handleBanner\" mode=\"widthFix\" lazy-load class=\"bannerImage\"></image>\n            </view>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n    <template name=\"txt\">\n      <text class=\"msg-txt\">{{ item.data }}\n      </text>\n    </template>\n    <template name=\"img\">\n      <image class=\"img-msg\" :src=\" item.msg.data \" bind:tap=\"previewImage\" :data-url=\" item.msg.data \" mode=\"widthFix\"></image>\n    </template>\n    <template name=\"audio\">\n      <audio :src=\" item.msg.url \" controls autoplay></audio>\n    </template>\n    <view class=\"black_box\" v-if=\" couponAlert.isTip && couponAlertShow \"></view>\n    <view class=\"ad_box\" v-if=\" couponAlert.isTip && couponAlertShow \"> \n      <view class=\"contents\" bindtap=\"jumpLink\">\n        <image :src=\" couponAlert.bgImgUrl \" mode=\"widthFix\"></image>\n      </view>\n      <image src=\"../../../../../images/close_alert.png\" class=\"close_img\" bindtap=\"windowClose\"></image>\n    </view>\n  </view>","js":"import { ajax2, ajax, throttle } from \"../../../../../utils/util.js\";\nimport saveReceiveMsg from \"../../../../../im/utils/formatMsgData\"\n// 引入依赖文件\nlet msgStorage = require(\"../../../../../im/utils/msgStorage\");\nlet disp = require(\"../../../../../im/utils/broadcast\");\nimport  {getUserEasemoInfo} from '../../../../../common/userEasemoInfo'\n\n// 请求url\nconst apiUrl = {\n  getChatHistory: 'chat/history',\n  getRateStar: 'api/rating/getRatingStar',\n  saveRateStar: 'api/rating/saveRatingStar',\n  getChatStatus: 'api/chat/inquiry/getstatus',\n  getPurchaseBanner: 'miniapp/notify/getPurchaseBanner',\n  getPrescriptionSrc:'miniapp/InquiryIM/queryPrescriptionInfoByGuid', // 获取处方图片\n  getWaitingDetail: 'patient/inquiryorder/getWaitingDetail'\n}\nlet _this\n\nlet waitingTimer\n\nexport default {\n  // 组件所在页面的生命周期函数\n  onShow: function () {\n    console.log('msglist show', this.properties.inquiryInfo)\n    if (this.properties.inquiryInfo && this.properties.inquiryInfo.inquiryId) {\n      this.getLeftTime(this.properties.inquiryInfo.inquiryId)\n    }\n  },\n\n  onHide: function () { \n    console.log('msglist hide')\n    this.setData({\n      couponAlertShow: false\n    })\n    this.clearLeftTimer();\n  },\n\n  onResize: function(size) {\n    // 页面尺寸变化\n    console.log('msglist resize')\n  },\n\n  props: {\n    inquiryInfo: {\n      type: Object,\n      default: {}\n    },\n  },\n\n  data: function() {\n    return {\n      page: 0,\n      index: 0,\n      toView: \"\",\n      curMsgMid: '',\n      chatMsg: [],\n      visibility: false,\n      iconErro: '../../images/msgerr.png',\n      iconDoctorDefault: '../../images/doctor_head_default@2x.png',\n      selfHeadDefault0: '../../images/self_head_default0@2x.png',\n      selfHeadDefault1: '../../images/self_head_default1@2x.png',\n      userInfo: '',\n      overflow: 'auto',\n      windowHeight: Taro.getSystemInfoSync().windowHeight,\n      stepActive: '2',            // 导航步骤\n      rate: null,                 // 评价星星\n      isMsgImRate: false,         // 是否显示评价组件\n      pageNum: 1,                 // 页码\n      isData: false,              // 是否有数据\n      firstHistoryLoad: true,     // 是否第一加载\n      tempInquiryId: '',\n      checkPass: false,           // 审核通过\n      checkNoPass: false,         // 审核驳回\n      isEnd: false,               // 问诊结束\n      hideInputBar: false,        // 输入框隐藏\n      prescriptionNum: '',        // 去购药\n      guid: '',                   // guid\n      pages: null,                // 历史消息总页数\n      msgArr: [],\n      askLeftTimer: null,          // 问诊剩余时间定时器\n      inquiryType: '', // 问诊类型:0视频问诊，1图文问诊 2极速问诊\n      bannerImage: '',\n      bannerUrl: '',\n      prescribeMsg: '', // 医生开方信息\n      prescribeMsgFlag: 0, // 医生开方状态\n      prescribeStatus: 0, // 0-未开方 1-开方\n      prescribePic: '', // 处方图片\n      thirdOrderNo: '', // 订单编号\n      inquirySource: 3, // 绿地来源\n      refundType: false, // 退款状态\n      refundReason: '', // 退款原因\n      famousWaitFlag: false, // 名医问诊排队中状态\n      couponAlert: {},\n      couponAlertShow: false,\n      organSign: null\n    };\n  },\n\n  created() {\n    console.log('msglist created')\n  },\n\n  moved() {\n    console.log('msglist moved')\n  },\n\n  onError() {\n    console.log('msglist error')\n  },\n\n  /**\n   * 声明周期\n   */\n  mounted() {\n    console.log('msglist attached')\n    _this = this\n    this.data.page = 0;\n    this.data.index = 0;\n    this.data.visibility = true;\n    console.log('inquiryIdinquiryIdinquiryIdinquiryId', this.properties.inquiryInfo)\n    this.initMsg()\n    if (this.properties.inquiryInfo && this.properties.inquiryInfo.inquiryId) {\n      this.getLeftTime(this.properties.inquiryInfo.inquiryId)\n    }\n\n  },\n\n  /**\n   * 生命周期\n   */\n  destroyed() {\n    console.log('msglist detached')\n    Taro.setStorageSync('chatroomPage', false)\n    this.data.visibility = false;\n    this.clearLeftTimer();\n    disp.off('em.chat.accept', this.dispChatroom)\n    disp.off('em.chat.newCmdMsg', this.dispNewCmdMsg)\n    msgStorage.off('newChatMsg', this.dispNewChatMsg)\n  },\n\n  /**\n   * 生命周期\n   */\n  onReady(event) {\n    console.log('msglist ready')\n  },\n\n  methods: {\n    // 开方\n    extractionFunc() {\n      // 开方状态\n      this.triggerEvent('hideInputBar')\n      this.triggerEvent('noticeRecallInquiryInfo')\n      this.handleGetPurchaseBanner()\n      let text = ''\n      if (this.data.inquirySource == 3) {\n        text = '医生已开完处方，请等待药师审核'\n      } else if (this.data.inquirySource == 7) {\n        text = '医生已开具处方'\n      }\n      this.setData({\n        prescribeMsg: text,\n        prescribeMsgFlag: 2,\n        hideInputBar: true,\n        stepActive: '3',\n        prescribeStatus: 1\n      })\n    },\n    // 无需开方\n    noExtractionFunc() {\n      this.triggerEvent('hideInputBar')\n      this.triggerEvent('noticeRecallInquiryInfo')\n      this.handleGetPurchaseBanner()\n      this.setData({\n        prescribeMsg: '医生已取消开方，如有需要您可以发起新的问诊',\n        prescribeMsgFlag: 1,\n        hideInputBar: true,\n        stepActive: '3'\n      })\n    },\n    // 获取最新leftTime\n    getLeftTime(inquiryId) {\n      let that = this\n      ajax('post', apiUrl.getChatStatus, { inquiryId: inquiryId }, (res) => {\n        if (res.data.code === 0 && res.data.result) {\n          let leftTime = res.data.result.leftTime\n          // that.data.organSign = res.data.result.organSign;\n          console.log('leftTimeleftTimeleftTime', leftTime, that.data.organSign, res.data.result.organSign)\n          if (leftTime > 0) {\n            that.interrogationCountDown(leftTime)\n          }\n        } \n      })\n    },\n    initMsg() {\n      disp.on('em.chat.accept', this.dispChatroom)\n      disp.on('em.chat.newCmdMsg', this.dispNewCmdMsg)\n      msgStorage.on(\"newChatMsg\", this.dispNewChatMsg)\n      Taro.setStorageSync('chatroomPage', true)\n      if (Taro.getStorageSync('guidance')) {\n        disp.fire('em.chat.isChatroomPage') \n      }\n    },\n    // 名医问诊-轮询接诊\n    handleToWaiting(parameter) {\n      waitingTimer && clearInterval(waitingTimer)\n      waitingTimer = setInterval(() => {\n        ajax2('post', apiUrl.getWaitingDetail, parameter, function (res) {\n          console.log(\"msglist handleToWaiting\")\n          if (res.data.code === 0) {\n            console.log(\"msglist handleToWaiting code:\", res.data.code)\n            if(res.data.result.isPhysicianConnecting === 1) {\n              console.log(\"msglist handleToWaiting 1\")\n              disp.off('em.chat.accept', _this.dispChatroom)\n              getApp().globalData.loggerSDK.info('xcxLogMsg 短连接轮询进入会话页')\n              _this.setData({\n                famousWaitFlag: false\n              })\n              Taro.setStorageSync('famousWaitFlag', false)\n            } \n          } else {\n            Taro.showToast({\n              icon: 'none',\n              title: res.data.msg\n            })\n          }\n        });\n      }, 3000)\n    },\n    // 名医问诊-cmd消息接诊\n    dispChatroom(extMsg) {\n      console.log('msglist em.chat.accept:', extMsg)\n      let curInquiryId = Taro.getStorageSync('inquiryId')\n      console.log('msglist em.chat.accept:', curInquiryId)\n      if (extMsg.inquiryId === curInquiryId) {\n        console.log('msglist dispChatroom')\n        waitingTimer && clearInterval(waitingTimer)\n        getApp().globalData.loggerSDK.info('xcxLogMsg 透传消息进入会话页')\n        _this.setData({\n          famousWaitFlag: false\n        })\n        Taro.setStorageSync('famousWaitFlag', false)\n      }\n    },\n    dispNewChatMsg(renderableMsg, type, isNew) {\n      let inquiryId = Taro.getStorageSync('inquiryId')\n      if (Array.isArray(renderableMsg)) {\n        let curChatMsg = renderableMsg.filter((msgItem) => {\n          return inquiryId === msgItem.msg.ext.inquiryId\n        })\n        console.log('chatroom curChatMsg:', curChatMsg)\n        _this.data.msgArr = [..._this.data.msgArr, ...curChatMsg]\n        _this.setData({\n          chatMsg: _this.data.msgArr,\n        }, function() {\n          let toView = _this.data.isMsgImRate ? 'rate' : _this.data.msgArr.length ? _this.data.msgArr[_this.data.msgArr.length - 1].mid : ''\n          Taro.nextTick(() => {\n            _this.setData({\n              toView\n            }) \n          })\n        })\n      } else {\n        // 判断是否属于当前会话\n        console.log('www onMsg renderableMsg:', renderableMsg.msg.ext.inquiryId)\n        console.log('renderableMsg.msg.ext', renderableMsg.msg.ext)\n        if (inquiryId === renderableMsg.msg.ext.inquiryId) {\n          _this.data.msgArr.push(renderableMsg)\n          if (renderableMsg.msg.ext.rxId) {\n            //接收到有处方\n            if(_this.data.inquiryType == 1) _this.getCouponAlert();\n            _this.setData({\n              stepActive: '3',\n              isMsgImRate: true,\n              guid: renderableMsg.msg.ext.rxId\n            })\n          }\n          console.log('_this.data.isMsgImRate:', _this.data.isMsgImRate)\n          console.log('ararararararrarar', _this.data.msgArr)\n          _this.setData({\n            chatMsg: _this.data.msgArr,\n          }, function() {\n            let toView = _this.data.isMsgImRate? 'rate': _this.data.msgArr.length ? _this.data.msgArr[_this.data.msgArr.length - 1].mid : ''\n            Taro.nextTick(() => {\n              _this.setData({\n                toView: toView\n              }) \n            })\n          })\n        }\n      }\n    },\n    dispNewCmdMsg(extMsg) {\n      console.log('type11111111', extMsg)\n      let inquiryId = Taro.getStorageSync('inquiryId')\n      if (inquiryId === extMsg.inquiryId) {\n        if (_this.data.inquiryType === 1 && extMsg.type === '1') {\n          _this.noExtractionFunc()\n          _this.setData({\n            isEnd: true\n          })\n        } else if (_this.data.inquiryType === 1 && extMsg.type === '2') {\n          _this.extractionFunc()\n          _this.setData({\n            isEnd: true\n          })\n        } else if ( extMsg.type === '3') {\n          _this.setData({\n            checkPass: true,\n            prescriptionNum: extMsg.prescriptionId,\n            prescribeMsgFlag: 3\n          })\n        } else if (extMsg.type === '4') {\n          _this.setData({\n            checkNoPass: true,\n            prescribeMsgFlag: 4\n          })\n        } else if (extMsg.type === '6') {\n          _this.triggerEvent('hideInputBar')\n          _this.triggerEvent('noticeRecallInquiryInfo')\n          waitingTimer && clearInterval(waitingTimer)\n          let stepActive = _this.data.rate? '4':'3'\n          _this.setData({\n            isEnd: true,\n            hideInputBar: true,\n            isMsgImRate: true,\n            stepActive: stepActive,\n            famousWaitFlag: false\n          }, function() {\n            _this.setData({\n              toView: 'rate'\n            }) \n          })\n          Taro.setStorageSync('famousWaitFlag', false)\n        } else if (extMsg.type === '7') {\n          _this.setData({\n            refundType: true,\n            refundReason: JSON.parse(extMsg.extJson).refundReason\n          })\n        }\n      }\n    },\n    /**\n     * 消息图片预览\n     * @param { event } 事件回调 \n     */\n    previewImage(event) {\n      let url = event.target.dataset.url;\n      Taro.previewImage({\n        urls: [url]\n      });\n    },\n    /**\n     * 患者信息图片预览\n     * @param { event } 事件回调\n     */\n    handlePreviewImg(event) {\n      let patientPhotos = this.data.inquiryInfo.patientPhotos\n      let index = event.currentTarget.dataset.index;\n      Taro.previewImage({\n        current: index,\n        urls: patientPhotos\n      })\n    },\n    /**\n     * 点击扩展消息查看处方\n     * 跳转处方详情\n     */\n    handleMsgExt(e) {\n      let guid = this.data.guid ? this.data.guid : e.currentTarget.dataset.id\n      var url  =  `/pages/inquiry/prescriptionDetails/prescriptionDetails?guid=${guid}`\n      Taro.navigateTo({\n        url:url\n      })\n      getApp().globalData.burySpotSDK.track('action_offlineInquiry_prescriptionClick');\n    },\n    /**\n     * 点击去购药\n     */\n    goBuyMedicine() {\n      console.log('去购药')\n      ajax('post', apiUrl.getChatStatus, { inquiryId: this.properties.inquiryInfo.inquiryId }, (res) => {\n        if (res.data.code === 0 && res.data.result) {\n          let isEffective = res.data.result.isEffective\n          let toastText = '处方已核销，无法重复使用'\n          if (isEffective === 0) {\n            Taro.navigateTo({\n              url: `/pages/quickConsultation/pages/selectProducts/selectProducts?prescriptionNum=${this.data.prescriptionNum}`\n            })\n          } else {\n            if (isEffective === 2) {\n              toastText = '处方已超时，请重新开方'\n            }\n            Taro.showToast({\n              title: toastText,\n              icon: 'none',\n              duration: 2000\n            })\n          }\n        } else {\n          Taro.showToast({\n            title: res.data.msg || \"服务器异常请重试...\",\n            icon: 'none',\n            duration: 2000\n          })\n        }\n      })\n    },\n    /**\n     * 获取历史消息\n     */\n    handleChatHistory(isRefresh) {\n      let _this = this\n      let toView = ''\n      let inquiryId = Taro.getStorageSync('inquiryId')\n      let params = {\n        \"endTime\": new Date().getTime(),\n        \"inquiryId\": inquiryId,\n        \"msgFrom\": this.properties.inquiryInfo.physicianEasemobId || Taro.getStorageSync('physicianEasemobId'),   // 医生环信id\n        \"msgTo\":getUserEasemoInfo().easeMoUserId,\n        \"pageNum\": this.data.pageNum,\n        \"pageSize\": 20,\n        \"sourceType\": 1\n      }\n      ajax2('post', apiUrl.getChatHistory, params, (res) => {\n        if (res.data.code === 0 && res.data.result) {\n          if (res.data.result.list.length) {\n            this.setData({\n              isData: true,\n              pages: res.data.result.pages\n            })\n            let arr = res.data.result.list\n            if(isRefresh !== 'refresh') {\n              arr.reverse()\n            } \n            // arr.map((msgItem) => {\n            //   msgStorage.saveReceiveMsg(msgItem, JSON.parse(msgItem.msgBodies)[0].type, 'oldMsg');\n            // })\n            arr.forEach((item, index) => {\n              let ele = JSON.parse(item.msgBodies)[0]\n              console.log('forEach')\n              let itemObj = saveReceiveMsg(item, JSON.parse(item.msgBodies)[0].type)\n              if (itemObj !== '' && _this.properties.inquiryInfo.inquiryId === itemObj.msg.ext.inquiryId) {\n                if (itemObj.msg.ext.rxId) {\n                  _this.setData({\n                    isMsgImRate: true,\n                    guid: itemObj.msg.ext.rxId\n                  })\n                  if (_this.data.stepActive !== '4') {\n                    _this.setData({\n                      stepActive: '3'\n                    })\n                  }\n                }\n                if (isRefresh !== 'refresh') {\n                  _this.data.msgArr.push(itemObj)\n                } else {\n                  _this.data.msgArr.splice(0, 0, itemObj)\n                }\n              }\n            })\n            if (isRefresh !== 'refresh' && _this.data.isMsgImRate) {\n              toView = 'rate'\n            } else {\n              toView = isRefresh !== 'refresh'?_this.data.msgArr[_this.data.msgArr.length - 1].mid:_this.data.msgArr[0].mid\n            }\n            _this.setData({\n              chatMsg: _this.data.msgArr\n            }, function() {\n              Taro.nextTick(() => {\n                _this.setData({\n                  toView: toView\n                })\n              })\n            })\n          } else {\n            this.setData({\n              isData: false\n            })\n          }\n          console.log('msgmsgmsgmsg', _this.data.chatMsg)\n        } else {\n          Taro.showToast({\n            title: res.data.msg || \"服务器异常请重试...\",\n            icon: 'none',\n            duration: 2000\n          });\n        }\n      })\n    },\n    /**\n     * 上拉加载历史消息\n     */\n    refresh() {\n      console.log('上拉加载', this.data.isData)\n      if (this.data.isData && this.data.pageNum < this.data.pages) {\n        this.setData({\n          pageNum: this.data.pageNum + 1 \n        })\n        this.handleChatHistory('refresh')\n      }\n    },\n    /**\n     * 渲染消息\n     * @param renderableMsg 发送的消息体\n     * @param type 消息类型  \n     * @param curChatMsg 存储的消息 \n     * @param sessionKey 拼接的消息 Key\n     * @param isnew 是否是新消息\n     */\n    renderMsg(renderableMsg, type, curChatMsg, sessionKey, isnew) {\n      let _this = this\n      // 根据 mid 获得最新发送的消息 curChatMsg\n      if (curChatMsg.length > 1) {\n        _this.data.chatMsg.map(function (elem, index) {\n          curChatMsg.map(function (item, i) {\n            if (elem.mid == item.mid) {\n              curChatMsg.splice(i, 1)\n            }\n          })\n        })\n      }\n      // 获取历史消息\n      let historyChatMsgs = Taro.getStorageSync(\"rendered_\" + sessionKey) || [];\n      historyChatMsgs = historyChatMsgs.concat(curChatMsg);\n      if (!historyChatMsgs.length) return;\n      console.log(isnew)\n      console.log(_this.data.chatMsg.concat(curChatMsg))\n      if (isnew == 'newMsg') {\n        _this.setData({\n          chatMsg: _this.data.chatMsg.concat(curChatMsg),\n          // 跳到最后一条\n          toView: historyChatMsgs[historyChatMsgs.length - 1].mid,\n        });\n      } else {\n        _this.setData({\n          chatMsg: historyChatMsgs.slice(-10),\n          // 跳到最后一条\n          toView: historyChatMsgs[historyChatMsgs.length - 1].mid,\n        });\n      }\n\n      Taro.setStorageSync(\"rendered_\" + sessionKey, historyChatMsgs);\n\n      let chatMsg = Taro.getStorageSync(sessionKey) || [];\n      chatMsg.map(function (item, index) {\n        curChatMsg.map(function (item2, index2) {\n          if (item2.mid == item.mid) {\n            chatMsg.splice(index, 1)\n          }\n        })\n      })\n\n      Taro.setStorageSync(sessionKey, chatMsg);\n\n      _this.data.index = historyChatMsgs.slice(-10).length;\n\n      Taro.pageScrollTo({\n        scrollTop: 99999,\n      })\n    },\n    // 问诊倒计时\n    interrogationCountDown(_leftTime) {\n      console.log('lefttime',_leftTime);\n      let left = _leftTime;\n      this.data.askLeftTimer = setInterval(() => {\n        left = left - 1;\n        if (left === 300) {\n          let tipObj = {\n            style: 'timertip'\n          }\n          let _chatArr = this.data.chatMsg;\n          _chatArr.push(tipObj)\n          console.log('tip fun msg arr:', _chatArr)\n          this.setData({\n            chatMsg: _chatArr\n          });\n          this.showSurplusTip = true;\n        }else if (left === 0) {\n          // 调用status接口，重新获取状态\n          console.log(\"问诊15分钟结束，msglist\");\n          this.triggerEvent('noticeRecallInquiryInfo')\n          clearInterval(this.data.askLeftTimer)\n        }\n        // console.log('问诊剩余时间--', left);\n      }, 1000);\n    },\n    // 获取评价\n    getRate() {\n      let inquiryId = Taro.getStorageSync('inquiryId')\n      let params = {\n        bizId: inquiryId       // 问诊单id\n      }\n      ajax2('post', apiUrl.getRateStar, params, (res) => {\n        if (res.data.code === 0) {\n          this.setData({\n            rate: res.data.result.star\n          })\n          if (res.data.result.star > 0) {\n            this.setData({\n              isMsgImRate: true,\n              stepActive: '4'\n            })\n          }\n        }\n      })\n    },\n    // 提交评价\n    onSub(e) {\n      let inquiryId = Taro.getStorageSync('inquiryId')\n      let params = {\n        bizId: inquiryId,             // 问诊单id\n        doctorId: this.properties.inquiryInfo.physicianGuid,      // 医师id\n        star: e.detail                                            // 星星等级\n      }\n      ajax2('post', apiUrl.saveRateStar, params, (res) => {\n        if (res.data.code === 0) {\n          if (res.data.result) {\n            this.setData({\n              rate: e.detail,\n              stepActive: '4'\n            })\n          }\n        }\n      })\n    },\n    clearLeftTimer() {\n      clearInterval(this.data.askLeftTimer)\n      this.data.askLeftTimer = null;\n      console.log('自定义清除定时器方法被执行，用户退出或隐藏')\n    },\n    handleGetPurchaseBanner() {\n      ajax2('get', apiUrl.getPurchaseBanner, { adType: 8 }, res => {\n        if (res.data.code === 0) {\n          if (res.data.result.length) {\n            this.setData({\n              bannerImage: res.data.result[0].bannerImage,\n              bannerUrl: res.data.result[0].bannerUrl\n            })\n          }\n        } else {\n          Taro.showToast({\n            title: res.data.msg || \"服务器异常请重试...\",\n            icon: 'none',\n            duration: 2000\n          });\n        }\n      })\n    },\n    handleBanner() {\n      console.log('handleBanner:', this.data.bannerUrl)\n      let bannerUrl = this.data.bannerUrl\n      if (bannerUrl) {\n        Taro.navigateTo({\n          url: `../../../../../pages/webView/webView?link=${encodeURIComponent(bannerUrl)}`\n        })\n        getApp().globalData.burySpotSDK.track('action_offlineInquiry_bannerClick');\n      }\n    },\n    //获取扫码问诊活动弹窗\n    getCouponAlert(){\n      ajax2('post', 'miniapp/marketing/checkDrugstoreIsTip', {\n        organSign: this.properties.inquiryInfo.organSign\n      }, res => {\n        Taro.hideLoading();\n        if (res.data.code == 0) {\n          this.setData({\n            couponAlert: res.data.result,\n            couponAlertShow: res.data.result.isTip\n          })    \n        }else{\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    },\n    //点击优惠券弹窗跳转\n    jumpLink(){\n      Taro.navigateTo({\n        url: `/pages/inquiry/inquiryActive/inquiryActive?organSign=${ this.properties.inquiryInfo.organSign }`,\n      })\n    },\n    windowClose(){\n      this.setData({\n        couponAlertShow: false\n      })\n    },\n    // 去绿地小程序\n    toOtherApplets() {\n      Taro.navigateToMiniProgram({\n        appId: 'wx2cd69559ff53b837', // 小程序id\n        path: `/pages/order_details/stay?order_id=${this.data.thirdOrderNo}&recipe_status=${this.data.prescribeStatus}&prescribePic=${this.data.prescribePic}`,\n        // 全局参数\n        extraData: {\n          // foo: 'bar'\n        },\n        envVersion: 'release', // develop-开发版 trial-体验版 release-正式版\n        success() {\n          console.log('绿地小程序跳转成功')\n        },\n        fail(){\n          console.log('绿地小程序跳转失败')\n        }\n      })\n    },\n    // 返回购药跳转绿地\n    backBuyDrugs: throttle((that, e) => {\n      console.log('......返回购药是否开处方', that.data.prescribeStatus)\n      if (that.data.prescribeStatus) {\n        let params = {guid: that.data.prescriptionNum}\n        Taro.showLoading({\n          title: '加载中...'\n        })\n        ajax2('get', apiUrl.getPrescriptionSrc, params, res => {\n          if (res.data.code === 0) {\n            Taro.hideLoading()\n            if (res.data.result) {\n              let src = res.data.result.inquiryPrescription.prescriptionImage\n              console.log('...........src', src)\n              that.setData({\n                prescribePic: src\n              },function (){\n                that.toOtherApplets()\n              })\n            }\n          } else {\n            Taro.hideLoading()\n            Taro.showToast({\n              title: res.data.msg || \"服务器异常请重试\",\n              icon: 'none',\n              duration: 2000\n            });\n          }\n        })\n      } else {\n        that.toOtherApplets()\n      }\n    })\n  },\n\n  watch: {\n    inquiryInfo: function(newVal, oldVal) {\n      if (newVal && newVal.inquiryId) {\n        if (this.data.tempInquiryId !== newVal.inquiryId) {\n          console.log('new inquiryInfo:', newVal)\n          Taro.setNavigationBarTitle({\n            title: newVal.physicianName\n          })\n          this.setData({\n            tempInquiryId: newVal.inquiryId,\n            prescriptionNum: newVal.prescriptionGuid,\n            inquiryType: newVal.inquiryType,\n            thirdOrderNo: newVal.thirdOrderNo,\n            inquirySource: newVal.inquirySource\n          })\n\n          // 不是导诊页进来 或 名医问诊进来的(名医问诊需考虑部分场景下微信收进后台，聊天记录丢失问题)，都重新拉下\n          if (!Taro.getStorageSync('guidance') || newVal.inquiryType === 4) {\n            this.handleChatHistory()\n          }\n          // 扫码补方、极速问诊结束 inquiryType = 1 扫码补方 2 极速问诊 4 名医问诊\n          if ((newVal.inquiryType === 1 && newVal.inquiryStatus === 1) || ((newVal.inquiryType === 2 || newVal.inquiryType === 4) && (newVal.speedStatus == 1 || newVal.speedStatus == 4 || newVal.speedStatus == 5))) {\n            this.triggerEvent('hideInputBar')\n            // this.triggerEvent('noticeRecallInquiryInfo')\n            if (newVal.inquiryType === 1 && newVal.inquiryStatus === 1) {\n              this.handleGetPurchaseBanner()\n            }\n            this.setData({\n              isEnd: true,\n              hideInputBar: true\n            })\n          }\n          if (newVal.status === 5) {\n            this.setData({\n              checkPass: true,\n              prescribeMsgFlag: 3\n            })\n          } else if (newVal.status === 7) {\n            this.setData({\n              checkNoPass: true,\n              prescribeMsgFlag: 4\n            })\n          }\n          // 扫码补方 - 开方逻辑\n          if (newVal.inquiryType === 1) {\n            if (newVal.status === 3) {\n              this.noExtractionFunc()\n            } else if (newVal.status === 8) {\n              this.extractionFunc()\n            }\n          }\n          // 极速问诊审核逻辑判断\n          if ((newVal.inquiryType === 2 || newVal.inquiryType === 4) && (newVal.speedStatus == 1 || newVal.speedStatus == 4 || newVal.speedStatus == 5 || newVal.status === 5 || newVal.status === 7 || newVal.status === 8)) {\n            this.setData({\n              isMsgImRate: true\n            })\n            if (this.data.stepActive !== '4') {\n              this.setData({\n                stepActive: '3'\n              })\n            }\n          }\n          console.log('newVal.leftTime', newVal.leftTime)\n          if (newVal.inquiryType === 2 || newVal.inquiryType === 4) {\n            this.getRate()\n            if (newVal.leftTime >= 0) {\n              this.interrogationCountDown(newVal.leftTime);\n            }else {\n              console.log(\"observer--当前问诊人已经用时15分钟\")\n            }\n          }\n          // 极速问诊退款\n          if ((newVal.inquiryType === 2 || newVal.inquiryType === 4) && newVal.speedStatus === 5) {\n            this.setData({\n              refundType: true,\n              refundReason: newVal.refundReason\n            })\n          }\n          // 名医问诊-排队中\n          if (newVal.inquiryType === 4 && newVal.speedStatus === 3) {\n            this.setData({\n              famousWaitFlag: true\n            })\n            Taro.setStorageSync('famousWaitFlag', true)\n            this.handleToWaiting({ patientGuid: newVal.patientGuid })\n          }\n        }\n      }else {\n        console.log(\"observer--不存在inquiryInfo\")\n      }\n    }\n  }\n};\n\n"},"convertDir/pages/inquiry/chat/component/record/record":{"json":{},"wxml":"\n  <view class=\"record-auto-container\">\n    <view v-if=\" recordStatus != recordStatusConfig.HIDE \" class=\"modal modal-record\" bind:tap=\"toggleRecordModal\">\n      <view class=\"modal-body\" catch:tap=\"toggleWithoutAction\">  \n        <view class=\"sound-waves\"> \n          <view v-for=\"(item, item) in radomHeight\" :key=\"item\" :style=\"{height:itemrpx,margin-top:-item/2rpx}\"></view>\n          <view style=\"clear:both;width:0;height:0;\"></view>\n        </view>\n        <text class=\"desc\">{{ recordDesc[recordStatus] }}\n        </text>\n        <button class=\"dot\" catch:touchstart=\"handleRecording\" catch:touchmove=\"handleRecordingMove\" catch:touchend=\"handleRecordingCancel\" catch:touchcancel=\"handleRecordingCancel\">\n          <image class=\"icon-mic\" src=\"../../images/record.png\"></image>\n        </button>\n      </view>\n    </view>\n  </view>","wxss":".modal {\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\tleft: 0;\n\tbottom: 0;\n\tz-index: 999;\n}\n\n.modal-record .modal-body {\n\twidth: 480rpx;\n\theight: 440rpx;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-radius: 3px;\n\tbox-shadow: 0 0 32rpx rgba(0, 0, 0, 0.15);\n\tposition: fixed;\n  top: 50%;\n\tleft: 50%;\n  margin-top: -220rpx;\n\tmargin-left: -240rpx;\n}\n\n.modal-record .desc {\n\tcolor: #fff;\n\tfont-size: 13px;\n\tmargin-bottom: 40rpx;\n\tdisplay: block;\n\theight: 30rpx;\n\twidth: 100%;\n\ttext-align: center;\n}\n\n.modal-record .dot {\n\twidth: 128rpx;\n\theight: 128rpx;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.dot image {\n\twidth: 44rpx;\n\theight: 44rpx;\n}\n\n.sound-waves {\n  width: 100%;\n  box-sizing: border-box;\n  padding-left:10%;\n  margin-top: 80rpx;\n  height: 80rpx;\n  text-align: center;\n}\n \n.sound-waves view {\n  transition: all 0.5s;\n  width: 1%;\n  margin-left: 1.5%;\n  margin-right: 1.5%;\n  height: 160rpx;\n  background-color: #fff;\n  float: left;\n}\n","js":"let WebIM = Taro.WebIM = require(\"../../../../../im/utils/WebIM\")[\"default\"];\nimport  {getUserEasemoInfo} from '../../../../../common/userEasemoInfo'\n\nexport default {\n  props: {\n    userInfo: {\n      type: Object,\n      default: {},\n    },\n    chatType: {\n      type: String,  \n      default: 'singleChat',\n    },\n    inquiryInfo: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function() {\n    return {\n      changedTouches: null,\n      recordStatus: 1,\n      recordStatusConfig: {\n        SHOW: 0,\n        HIDE: 1,\n        HOLD: 2,\n        SWIPE: 3,\n        RELEASE: 4\n      },\n      recordDesc: { \n        0: \"长按开始录音\",\n        2: \"向上滑动取消\",\n        3: \"松开手取消\",  \n      },\n      recordClicked: false,\n      runAnimation: false,\n      recorderManager: Taro.getRecorderManager(),\n      radomHeight: []\n    };\n  },\n  methods: {\n    /**\n     * 阻止冒泡事件\n     */\n    toggleWithoutAction(e) {},\n    /**\n     * 录音组件显示的状态\n     * 组件方法调用在 inputbar 中\n     */\n    toggleRecordModal() {\n      let recordStatus = this.data.recordStatus;\n      let recordStatusConfig = this.data.recordStatusConfig\n      let isShowRecordStatus = ( recordStatus == recordStatusConfig.HIDE) ? recordStatusConfig.SHOW : recordStatusConfig.HIDE\n      this.setData({\n        runAnimation: false,\n        recordStatus: isShowRecordStatus,\n        radomHeight: [50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50],\n      });\n    },\n    /**\n     * 获取当前录音的点击区域\n     * 超出区域取消录音\n     * @params { e } 事件参数\n     */\n    handleRecordingMove(e) {\n\n      let touches = e.touches[0];\n      let changedTouches = this.data.changedTouches;\n      let recordStatus = this.data.recordStatus;\n      let recordStatusConfig = this.data.recordStatusConfig\n\n      if (!changedTouches) {\n        return false;\n      }\n      // 松开手取消录音\n      if (recordStatus == recordStatusConfig.SWIPE) {\n        if (changedTouches.pageY - touches.pageY < 20) {\n          this.setData({\n            recordStatus: recordStatusConfig.HOLD\n          });\n        }\n      }\n      // 向上滑动取消\n      if (recordStatus == recordStatusConfig.HOLD) {\n        if (changedTouches.pageY - touches.pageY > 20) {\n          this.setData({\n            recordStatus: recordStatusConfig.SWIPE\n          });\n        }\n      }\n    },\n    /**\n     * 开始录音函数\n     * @params { e } 事件参数\n     * @func getRecordAuthSetting 调用授权\n     * @func getStartRecordEvent 开始录音\n     */\n    handleRecording(e) {\n      let _this = this;\n      console.log('handleRecording')\n      _this.setData({ recordClicked: true })\n      setTimeout(() => {\n        if (_this.data.recordClicked == true) {\n          _this.getRecordAuthSetting(e)\n        }\n      }, 350)\n    },\n    /**\n     * 取消录音\n     */\n    handleRecordingCancel() {\n      console.log('handleRecordingCancel')\n      this.data.runAnimation = false\n      let recorderManager = this.data.recorderManager;\n      let recordStatusConfig = this.data.recordStatusConfig;\n      // 向上滑动状态停止：取消录音发放\n      if (this.data.recordStatus == recordStatusConfig.SWIPE) {\n        this.setData({\n          recordStatus: recordStatusConfig.RELEASE\n        });\n      } else {\n        this.setData({\n          recordStatus: recordStatusConfig.HIDE,\n          recordClicked: false\n        });\n      }\n      // 录制录音条件满足发送消息并上传录音文件\n      recorderManager.onStop((res) => {\n        if (this.data.recordStatus == recordStatusConfig.RELEASE) {\n          this.setData({\n            recordStatus: recordStatusConfig.HIDE\n          });\n          return false;\n        }\n        if (res.duration < 1000) {\n        console.log('handleRecordingCancel 111')\n          Taro.showToast({\n            title: \"录音时间太短\",\n            icon: \"none\"\n          })\n        } else {\n        console.log('handleRecordingCancel 222')\n          // 上传录音文件\n          console.log('record tempFilePath:', res.tempFilePath)\n          this.setUploadRecord(res.tempFilePath, res.duration);\n        }\n      });\n      // 停止录音\n      recorderManager.stop();\n    },\n    /**\n     * 上传录音\n     * @params { tempFilePath } 文件临时路径\n     * @prams { dur } 录音时间\n     */\n    setUploadRecord(tempFilePath, dur) {\n      let _this = this;\n      let str = WebIM.config.appkey.split(\"#\");\n      let token = WebIM.conn.context.accessToken\n      // 调用微信上传 api\n      Taro.uploadFile({\n        url: \"https://a1.easemob.com/\" + str[0] + \"/\" + str[1] + \"/chatfiles\",\n        filePath: tempFilePath,\n        name: \"file\",\n        header: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + token\n        },\n        success(res) {\n          // 当前用户信息\n          let userInfo = Taro.getStorageSync(\"userEasemoInfo\");\n          // 医生信息\n          // let doctorInfo = Taro.getStorageSync(\"doctorInfo\");\n          // 获取 id\n          let id = WebIM.conn.getUniqueId();\n          // 设置消息类型\n          let msg = new WebIM.message('audio', id);\n          let dataObj = JSON.parse(res.data);\n\n           // 名医接诊 医生接诊后的时 发消息 医生端弹通知\n        let flag; // true 发消息 医生会弹通知\n        // 名医 而且 待接诊 \n        let famousWaitFlag = Taro.getStorageSync('famousWaitFlag') || false; // 名医问诊 待接诊状态标识\n        if (_this.properties.inquiryInfo.inquiryType == 4 && famousWaitFlag) {\n          flag = true;\n        } else {\n          flag = false;\n        }\n          // 设置消息对象\n          msg.set({\n            apiUrl: WebIM.config.apiURL,\n            accessToken: token,\n            body: {\n              type: 'audio',\n              url: dataObj.uri + \"/\" + dataObj.entities[0].uuid,\n              filetype: \"\",\n              filename: tempFilePath,\n              accessToken: token,\n              length: Math.ceil(dur / 1000)\n            },\n            from: getUserEasemoInfo().easeMoUserId,\n            to: _this.properties.inquiryInfo.physicianEasemobId || Taro.getStorageSync('physicianEasemobId'),\n            ext: {\n              inquiryId: _this.properties.inquiryInfo.inquiryId,\n              sourceType: 1,\n              isHideNotification: flag\n            },\n            roomType: false,\n            chatType: _this.data.chatType,\n            success: function (argument) {\n              // 回调事件    \n              _this.triggerEvent( \"newRecordMsg\",{ msg: msg, type: 'audio'}, { bubbles: true, composed: true }\n          );\n            }\n          });  \n           msg.body.length = Math.ceil(dur / 1000);   \n           WebIM.conn.send(msg.body);\n                 // 发送消息\n        }\n      });\n    },\n    /**\n     * 开始录音授权函数\n     */\n    getRecordAuthSetting (e) {\n      let _this = this;\n      Taro.getSetting({\n        success: (res) => {\n          let recordAuth = res.authSetting['scope.record']\n          console.log('recordAuth:', recordAuth)\n          if (recordAuth == false) {\n            // 打开微信授权设置开关\n            Taro.showModal({\n              title: '提示',\n              content: '此服务需要您的录音功能',\n              showCancel: false,\n              confirmText: '去开启',\n              success: function (res) {\n                if (res.confirm) {\n                  // 确定按钮\n                  // 新版禁用，需要通过按钮触发\n                  Taro.openSetting({\n                    success: function (res) {\n                      let recordAuth = res.authSetting['scope.record']\n                      if (recordAuth == true) {\n                        Taro.showToast({\n                          title: \"授权成功\",\n                          icon: \"success\"\n                        })\n                      } else {\n                        Taro.showToast({\n                          title: \"请授权录音\",\n                          icon: \"none\"\n                        })\n                      }\n                      _this.setData({\n                        isLongPress: false\n                      })\n                    }\n                  })\n                }\n              }\n            })\n          } else if (recordAuth == true) { \n            // 授权成功调用开始录音函数\n            _this.getStartRecordEvent(e)\n          } else {\n            Taro.showToast({\n              title: \"语音权限未授权\",\n              icon: \"none\"\n            })\n            // 第一次进来，未发起授权\n            Taro.authorize({\n              scope: 'scope.record',\n              success: () => {\n                Taro.showToast({\n                  title: \"授权成功\",\n                  icon: \"success\"\n                })\n              }\n            })\n          }\n        },\n        fail: function () {\n          Taro.showToast({\n            title: \"鉴权失败，请重试\",\n            icon: \"none\"\n          })\n        }\n      })\n    },\n    /**\n     * 开始授权函数\n     * @params {e} 来至于 getRecordAuthSetting\n     */\n    getStartRecordEvent (e) {\n      console.log('getStartRecordEvent')\n      let _this = this;\n      let recorderManager = _this.data.recorderManager\n      _this.data.changedTouches = e.touches[0];\n      _this.setData({\n        recordStatus: _this.data.recordStatusConfig.HOLD,\n      });\n      // 录音动画生成\n      _this.data.runAnimation = true;\n      _this.getRadom();\n      \n      // 调用微信开始录音 api\n      recorderManager.onStart(() => {});\n      // 录音格式\n      recorderManager.start({ format: \"mp3\" });\n      // 超时取消录音\n      setTimeout(function () {\n        _this.handleRecordingCancel();\n        _this.data.runAnimation = false\n      }, 100000);\n    },\n    /**\n     * 生成录音动画随机数\n     */\n    getRadom() {\n      let _this = this;\n      let radomHeight = _this.data.radomHeight;\n      for (let i = 0; i < radomHeight.length; i++) {\n        radomHeight[i] = (100 * Math.random().toFixed(2)) + 10;\n      }\n      _this.setData({\n        radomHeight: radomHeight\n      });\n      if (_this.data.runAnimation) {\n        setTimeout(function () { _this.getRadom() }, 500);\n      } else {\n        return false;\n      }\n    }\n  }\n};\n"},"convertDir/pages/inquiry/chat/pages/chatroom":{"js":"/**\n * @desc: 聊天页面（极速问诊、线下扫码补方）\n * @author: wangqinfei\n */\nimport { ajax } from \"../../../../utils/util.js\";\nconst disp = require(\"../../../../im/utils/broadcast\");\n// 请求url\nconst apiUrl = {\n  // 获取会话页信息（患者信息和处方状态）\n  getChatStatus: 'api/chat/inquiry/getstatus',\n}\n\nexport default {\n  data: function() {\n    return {\n      inquiryId: '',\n      inquiryInfo: '',\n      inquiryStatus: true, // 问诊状态\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.inquiryId) {\n      console.log('chatroom onLoad:', options)\n      Taro.setStorageSync('inquiryId', options.inquiryId)\n      Taro.setStorageSync('guidance', options.guidance == '0' ? true : false)\n    }\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.handleChatStatus()\n    let globalMsgMap = Taro.getStorageSync('sessionMap')\n    let curInquiryId = Taro.getStorageSync('inquiryId')\n    let isPageFromGuidance = Taro.getStorageSync('guidance')\n    if (globalMsgMap[curInquiryId]) {\n      globalMsgMap[curInquiryId] = \"\"\n    }\n    Taro.setStorageSync('sessionMap', globalMsgMap)\n    // 从列表页进入会话，需要判断消息tab上的红点提示是否展示\n    if (!isPageFromGuidance) {\n      disp.fire('em.chat.unReadTabBarFlag')\n    }\n  },\n  onReady: function () {\n    console.log('chatroom onReady')\n  },\n  /**\n   * 获取会话页信息\n   */\n  handleChatStatus() {\n    let _this = this\n    let curInquiryId = Taro.getStorageSync('inquiryId')\n    ajax('post', apiUrl.getChatStatus, { inquiryId: curInquiryId }, (res) => {\n      if (res.data.code === 0 && res.data.result) {\n        // 字符串转对象\n        let _formatLastDiagnosis = JSON.parse(res.data.result.lastDiagnosis)\n        res.data.result.lastDiagnosis = _formatLastDiagnosis;\n        var inquiryInfo =  res.data.result\n        _this.setData({ inquiryInfo: inquiryInfo })\n        Taro.setStorageSync('physicianEasemobId', res.data.result.physicianEasemobId)\n      } else {\n        Taro.showToast({\n          title: res.data.msg || \"服务器异常请重试...\",\n          icon: 'none',\n          duration: 2000\n        });\n      }\n    });\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    console.log('chatroom onHide')\n    disp.fire('em.chat.clearCacheMsgArr')\n  },\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    console.log('chatroom onUnload')\n    Taro.setStorageSync('inquiryId', '')\n  }\n};","wxml":"\n  <view class=\"chatroom-auto-container\">\n    <chat id=\"chat\" :inquiryInfo=\" inquiryInfo \" chatType=\"singleChat\" bind:noticeRecallInquiryInfo=\"handleChatStatus\"></chat>\n  </view>","json":{"chat":"../component/index"},"wxss":"page{\n\tbackground-color: #FAFAFA;\n}"},"convertDir/pages/inquiry/doctorWait/doctorWait":{"json":{"im-tab-bar":"../../../component/scanCodeTabBar/tabBar","im-doctor-helper":"../../../component/doctorHelper/doctorHelper","im-medicine-card":"../../../component/medicineCard/medicineCard"},"js":"import {ajax, ajax2, cdnStaticResourceUrl } from '../../../utils/util'\nimport { initJump, handleToWaiting, handleToUnload } from \"../../../common/toChatroom\"\nlet pageName = 'doctorWait'\n\nexport default {\n  data: function() {\n    return {\n      inquiryInfo: { // 用药申请卡面信息\n        type: Object,\n        value: {},\n      },\n      userInfo: {},\n      lastDiagnosis: { // 预购药品信息\n        type: Object,\n        value: {},\n      }\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log(`${pageName} onLoad`)\n    // TODO: 2处修改\n    Taro.setStorageSync('inquiryId', options.inquiryId)\n    this.getUserInfo(options.inquiryId, options.organSign);\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    console.log(`${pageName} onShow`)\n    Taro.setStorageSync('guidance', true)\n    initJump(this.handleToChatroom)\n  },\n  onReady: function () {\n    console.log(`${pageName} onReady`)\n  },\n  // 用药申请卡面信息\n  getUserInfo (inquiryId, organSign) {\n    let that = this;\n    Taro.showLoading({\n      title: '加载中...'\n    })\n\n    ajax2('POST', 'patient/im/inquiry/patientImInfo', {\n      inquiryId\n    }, (res) => {\n      Taro.hideLoading();\n      console.log('卡面信息',res.data)\n      if(res.data.code == 0) {\n        that.setData({\n          inquiryInfo: res.data.result,\n          lastDiagnosis: JSON.parse(res.data.result.lastDiagnosis)\n        })\n        handleToWaiting({patientGuid: res.data.result.patientGuid, organSign: organSign})\n        Taro.pageScrollTo({\n          scrollTop: 99999,\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n\n  },\n  handleToChatroom (chatroomFlag) {\n    console.log('handleToChatroom chatroomFlag:', chatroomFlag)\n    if (!chatroomFlag) {\n      console.log('handleToChatroom:', wx)\n      Taro.redirectTo({\n        url: `../chat/pages/chatroom`\n      })\n    }\n  },\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    console.log(`${pageName} onUnload`)\n    handleToUnload()\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    console.log(`${pageName} onHide`)\n  },\n};","wxml":"\n  <view class=\"doctorWait-auto-container\">\n    <view class=\"contain\"> \n      <im-tab-bar active=\"2\"></im-tab-bar>\n      <scroll-view scroll-y=\"true\" class=\"page_main\">   \n        <im-doctor-helper :inquiryInfo=\"inquiryInfo\"></im-doctor-helper>\n        <im-medicine-card :inquiryInfo=\"inquiryInfo\" :lastDiagnosis=\"lastDiagnosis\"></im-medicine-card>\n        <view class=\"wait\"> \n          <image class=\"time_icon\" src=\"../../../images/time-icon.png\"></image>\n          <view>\n                正在为您接入医生，请耐心等待…\n            \n          </view>\n        </view>\n        <view class=\"main_bottom\"></view>\n      </scroll-view>\n    </view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n.im_tabbar {\n    width: 100%;\n    height: 84rpx;\n    line-height: 84rpx;\n    text-align: center;\n    background-color: #FFFFFF;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10;\n}\n.im_tabbar >view{\n    display: inline-block;\n}\n.im_tabbar_item {\n    font-size: 28rpx;\n    color: #999999;\n}\n\n.im_tabbar_item.active {\n    color: #00b955;\n}\n\n.right_icon {\n    width: 20rpx;\n    height: 20rpx;\n    margin-left: 30rpx;\n    margin-right: 30rpx;\n}\n.wait{\n    display: flex;\n    width: 480rpx;\n    background: #ffffff;\n    border: 1rpx solid #f7f7f7;\n    border-radius: 35rpx;\n    padding: 20rpx;\n    margin-left: 32rpx;\n    margin-top: 30rpx;\n    box-shadow: 0 5rpx 20rpx 0 rgba(48,48,60,0.08);\n}\n.wait .time_icon{\n    width: 40rpx;\n    height: 40rpx;\n    margin-right: 20rpx;\n}\n.wait >view{\n    font-size: 28rpx;\n    color: #111734;\n}\n.main_bottom{\n    width: 100%;\n    height: 70rpx;\n}"},"convertDir/pages/inquiry/guidance/guidance":{"json":{"halfScreenDialog":"../../../component/halfScreenDialog/halfScreenDialog","missingData-view":"../../../component/missingData/missingData","patient-info":"../../../component/patientInfo/patientInfo","tabBar":"../../../component/imTabBar/tabBar","couponsList":"../../../component/couponsList/couponsList","my-tools":"../../../component/myTools/myTools"},"wxml":"\n  <view class=\"guidance-auto-container\">       \n    <tabBar active=\"1\" class=\"tab-bar\"></tabBar>\n    <view class=\"container\"> \n      <scroll-view scroll-y=\"true\" class=\"common_section chat-box\" :style=\"{height:  scrollHeight px}\" :scroll-into-view=\" scorllBottom \">  \n        <view :class=\"[cell,( item.userData ? 'cell_user' : '' )]\" v-for=\"(item, index) in  guidanceList \" :key=\"index\" :id=\" 'msg' + index \"> \n          <block v-if=\" !item.userData \"> \n            <view class=\"cell_left\">\n              <image src=\"../../../images/assistant-photo.png\"></image>\n            </view>\n            <view class=\"cell_center\"> \n              <view class=\"name\">医生小助\n              </view>\n              <view class=\"dialog-box\">{{ item.machineLanguage }}\n              </view>\n            </view>\n          </block>\n          <block v-else> \n            <view class=\"cell_center\"> \n              <view class=\"name\">{{ item.userData.patientName }}\n              </view>\n              <view class=\"dialog-box\">{{ item.selectedDate.msg }}\n              </view>\n            </view>\n            <view class=\"cell_left\">\n              <image src=\"../../../images/user-photo.png\"></image>\n            </view>\n          </block>\n        </view>\n        <view class=\"inquiry-box\" v-if=\" inquiryBoxShow \" :id=\" 'msg' + guidanceList.length \">   \n          <view class=\"header\">图文问诊\n            <text>极速问诊\n            </text>\n          </view>\n          <view class=\"content\">  \n            <view class=\"left\">\n              <image src=\"../../../images/doctor-photo.png\"></image>\n            </view>\n            <view class=\"center\"> \n              <view class=\"text\">{{ inquiryData.name }}\n              </view>\n              <view>\n                <text class=\"red\">¥{{ inquiryData.askDoctorsPrice }}\n                </text>\n                <text class=\"common-line-price\" v-if=\" inquiryData.linePrice \">¥{{ inquiryData.linePrice }}\n                </text>\n              </view>\n            </view>\n            <view class=\"right\" bindtap=\"createInquiry\">立即咨询\n            </view>\n          </view>\n          <text class=\"tips\">服务说明：{{ inquiryData.doctorSuggests }}\n          </text>\n          <view class=\"coupons-cell\" bindtap=\"openCouponsBox\">    \n            <view class=\"left\">优惠券\n              <text class=\"red\" v-if=\" selectedCoupon.defaultOption == 1 \">已选择最佳优惠\n              </text>\n            </view>\n            <view class=\"right blue\" v-if=\" couponsList.length > 0 && !selectedCoupon.id \">{{ couponsList.length }}\b张优惠券可用\n            </view>\n            <view class=\"right red\" v-else-if=\" couponsList.length > 0 \">-¥{{ selectedCoupon.actualDiscountDes }}\n            </view>\n            <view class=\"right\" v-else>暂无可用优惠券\n            </view>\n            <image class=\"arrow-icon\" src=\"../../../images/black-arrow.png\" v-if=\" couponsList.length > 0 \"></image>\n          </view>\n        </view>\n        <view style=\"height: 80rpx\"></view>\n      </scroll-view>\n      <view class=\"bottom-box\" id=\"bottom-box\" v-if=\" !inquiryBoxShow && !waitingBoxShow \"> \n        <block v-if=\" currentStep == 1 \">\n          <view class=\"flex-box\"> \n            <view class=\"tag\" v-for=\"(item, index) in  haveIdCardPatientList \" :key=\"index\" bindtap=\"selectedPatient\" :data-item=\" item \" v-if=\" index < 5\">{{ item.patientName }}\n            </view>\n            <view class=\"tag\" bindtap=\"openPatientList\">新增就诊人\n            </view>\n          </view>\n        </block>\n        <block v-if=\" currentStep > 1 \">   \n          <block v-if=\" guidanceData[currentStep].whetherAlternative \"> \n            <checkbox-group bindchange=\"checkboxChange\" class=\"flex-box\">\n              <label v-for=\"(item, index) in  guidanceData[currentStep].labelList \" :class=\"[tag,( item.checked ? 'selected' : '' )]\" :key=\"index\">\n            {{ item.msg }}\n          \n                <checkbox :value=\" item.code \"></checkbox>\n              </label>\n            </checkbox-group>\n            <block v-if=\" textareaShow \">\n              <textarea maxlength=\"35\" :value=\" textareaValue \" placeholder=\"请输入信息...\" bindinput=\"getTextareaValue\">            <text class=\"text-count\">{{ textareaValue.length }}/35</text>\n          \n              </textarea>\n            </block>\n          </block>\n          <block v-else>\n            <radio-group bindchange=\"radioChange\" class=\"flex-box\">\n              <label v-for=\"(item, index) in  guidanceData[currentStep].labelList \" :class=\"[tag,( item.checked ? 'selected' : '' )]\" :key=\"index\">\n            {{ item.msg }}\n          \n                <radio :value=\" index \" :checked=\" item.checked \"></radio>\n              </label>\n            </radio-group>\n          </block>\n          <view class=\"desc\" v-if=\" guidanceData[currentStep].description \">{{ guidanceData[currentStep].description }}\n          </view>\n          <button class=\"button active\" bindtap=\"checkValue\" :data-index=\" currentStep+1 \">确定{{ guidanceData[currentStep].whetherAlternative ? '(可多选)' : '' }}\n          </button>\n        </block>\n      </view>\n    </view>\n    <view class=\"waiting\" v-if=\" waitingBoxShow \"> \n      <image src=\"../../../images/time-icon.png\"></image>\n      <text>正在为您接入医生，请耐心等待…\n      </text>\n    </view>\n    <view class=\"black_box coupon_black\" v-if=\" couponsNotify.list.length > 0 && couponsNotifyShow \"></view>\n    <view class=\"coupon_alert\" v-if=\" couponsNotify.list.length > 0 && couponsNotifyShow \">    \n      <image src=\"../../../images/guidance-banner.png\" class=\"coupon_img\"></image>\n      <view class=\"title\">{{ couponsNotify.title }}\n      </view>\n      <view class=\"desc\">{{ couponsNotify.desc }}\n      </view>\n      <view class=\"common_section coupon_section\">\n        <view class=\"cell\" v-for=\"(item, key) in  couponsNotify.list \" :key=\"key\"> \n          <view class=\"cell_center\">   \n            <view class=\"name\">{{item.couponName}}\n              <text class=\"tag\">{{item.couponDiscountWayStr}}\n              </text>\n            </view>\n            <block v-if=\"item.preferentialDesc\"> \n              <view class=\"empty\" v-if=\"item.couponUseLimit > 0\">{{item.preferentialDesc}}\n              </view>\n              <view class=\"text\" v-else>无门槛使用\n              </view>\n            </block>\n            <block v-else> \n              <view class=\"empty\" v-if=\"item.couponUseLimit > 0\">满{{item.couponUseLimit}}元可用\n              </view>\n              <view class=\"text\" v-else>无门槛使用\n              </view>\n            </block>\n            <view class=\"text_block\">{{item.couponExpireDate}}\n            </view>\n          </view>\n          <view class=\"cell_left\">   \n            <view class=\"price\" v-if=\"item.couponDiscountWay == 1\">{{item.couponCash}}\n              <text class=\"symbol\">¥\n              </text>\n            </view>\n            <view class=\"price\" v-else>{{item.couponDiscountFactorStr}}\n            </view>\n            <view class=\"dot dot_top\"></view>\n            <view class=\"dot dot_bottom\"></view>\n          </view>\n        </view>\n      </view>\n      <image src=\"../../../images/close_alert.png\" class=\"close_img\" bindtap=\"couponsNotifyClose\"></image>\n    </view>\n    <halfScreenDialog :show=\" patientListShow \" maskClosable=\"ture\" title=\"患者管理\" bind:close=\"dialogClose\">\n      <view slot=\"desc\" class=\"patient-list-mask\" :style=\"{padding-bottom:  tabbarHeight px}\">   \n        <view class=\"common_section\" v-if=\" !editPatient \"> \n          <block v-if=\" patientList.length \">\n            <view class=\"cell\" v-for=\"(item, index) in  patientList \" :key=\"index\" bindtap=\"selectedPatient\" :data-item=\" item \"> \n              <view class=\"cell_center\"> \n                <view>{{ item.patientName }} {{ patientSex[item.patientSex] }} {{ item.patientAge }}岁\n                </view>\n                <view v-if=\"item.patientIDCard.length == 0\" class=\"idcard_text\">身份信息不全，请点击补充\n                </view>\n              </view>\n              <view class=\"cell_right\"> \n                <view class=\"img-box\" catchtap=\"toPatientInfo\" :data-id=\" item.id \">\n                  <image src=\"../../../images/edit-icon.png\" mode=\"widthFix\"></image>\n                </view>\n                <view class=\"img-box\" catchtap=\"checkDeletePatient\" :data-item=\" item \">\n                  <image src=\"../../../images/clear_ss.png\" mode=\"widthFix\"></image>\n                </view>\n              </view>\n            </view>\n          </block>\n          <missingData-view zhi=\"new1\" textval2=\"暂无患者，请添加~\" v-else-if=\" patientList.length <= 0 \" imageUrl=\"{{cf_chapter}}/images/require-list-empty.png\" paddingValue=\"30% 0\"></missingData-view>\n        </view>\n        <patient-info :currentPatientId=\" currentPatientId \" pageFrom=\"currentPage\" bind:updata=\"updataSuccess\" v-else></patient-info>\n        <view style=\"height: 60rpx\"></view>\n        <view class=\"btns\"> \n          <view class=\"tips\" v-if=\" patientList.length >= 10 \">每个账号最多可添加10个患者\n          </view>\n          <button bindtap=\"toPatientInfo\" :class=\"[button,( patientList.length >= 10 ? '' : 'active' )]\">添加患者信息\n          </button>\n        </view>\n      </view>\n    </halfScreenDialog>\n    <halfScreenDialog :show=\" couponsDialog \" maskClosable=\"ture\" title=\"优惠券\" hasData=\"true\">\n      <view slot=\"desc\" class=\"coupons-dialog\">\n        <couponsList :couponsData=\" couponsList \" pageFrom=\"guidance\" bind:action=\"userCoupon\"></couponsList>\n      </view>\n    </halfScreenDialog>\n    <my-tools v-if=\"drugstoreSource\"></my-tools>\n  </view>","wxss":"/* pages/quickConsultation///pages/guidance/guidance.wxss */\n@import '../../../common/tableView.wxss';\npage {\n  background: #F7F7F7\n}\n\n.tab-bar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n}\n\n.chat-box {\n  background: none;\n  padding-top: 84rpx;\n  box-sizing: border-box;\n  overflow: scroll;\n}\n\n.chat-box .cell {\n  margin-bottom: 30rpx;\n  align-items: flex-start;\n}\n\n.chat-box .cell::before {\n  border: 0;\n}\n\n.chat-box .cell_left {\n  width: 80rpx;\n  height: 80rpx;\n}\n\n.chat-box .cell_left image {\n  width: 100%;\n  height: 100%;\n}\n\n.chat-box .cell_center {\n  font-size: 20rpx;\n  color: #999999;\n  margin: 0 20rpx;\n}\n\n.chat-box .cell_center .dialog-box{\n  background: #ffffff;\n  border-radius: 0px 20rpx 20rpx 20rpx;\n  font-size: 30rpx;\n  color: #333333;\n  padding: 20rpx;\n  margin-top: 4rpx;\n  max-width: 490rpx;\n  box-sizing: border-box;\n}\n\n.chat-box .cell_user {\n  justify-content: flex-end;\n}\n\n.chat-box .cell_user.cell_center {\n  text-align: right;\n}\n\n.chat-box .cell_user .cell_center .dialog-box {\n  background: #00b955;\n  color: #FFFFFF;\n  border-radius: 20px 0rpx 20rpx 20rpx;\n}\n\n.chat-box .cell_user .cell_center .name {\n  text-align: right;\n}\n\n.inquiry-box {\n  margin: 30rpx;\n  border-radius: 20rpx;\n  background: #FFFFFF;\n  overflow: hidden;\n}\n\n.inquiry-box .header {\n  background: #00b955;\n  color: #FFFFFF;\n  height: 80rpx;\n  line-height: 80rpx;\n  padding: 0 30rpx;\n  font-size: 30rpx;\n  font-weight: bold;\n}\n\n.inquiry-box .header text {\n  font-size: 24rpx;\n  font-weight: normal;\n  margin-left: 10rpx;\n}\n\n.inquiry-box .content {\n  display: flex;\n  align-items: center;\n  padding: 30rpx 20rpx;\n  font-weight: bold;\n  font-size: 30rpx;\n}\n\n.inquiry-box .content .left {\n  width: 90rpx;\n  height: 90rpx;\n  border-radius: 90rpx;\n  margin-right: 20rpx;\n}\n\n.inquiry-box .content .left image {\n  width: 100%;\n  height: 100%;\n}\n\n.inquiry-box .content .red {\n  color: #FF2121;\n}\n\n.inquiry-box .content .center {\n  flex: 1\n}\n\n.inquiry-box .content .right {\n  width: 180rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  border-radius: 60rpx;\n  background: #00b955;\n  color: #FFFFFF;\n  font-weight: bold;\n  text-align: center;\n}\n\n.inquiry-box .tips {\n  font-size: 24rpx;\n  color: #41435D;\n  padding: 0 20rpx;\n}\n\n\n.coupons-cell {\n  display: flex;\n  align-items: center;\n  padding: 30rpx 20rpx;\n  border-top: 1rpx solid #EEEEEE;\n  font-size: 28rpx;\n  color: #9D9FB8;\n  margin-top: 20rpx;\n}\n\n.coupons-cell .left {\n  flex: 1;\n  color: #333333\n}\n\n.coupons-cell .left text {\n  font-size: 24rpx;\n  margin-left: 20rpx;\n}\n\n.coupons-cell .right {\n  width: 260rpx;\n  text-align: right;\n}\n\n.coupons-cell .arrow-icon {\n  width: 20rpx;\n  height: 20rpx;\n  margin-left: 20rpx;\n}\n\n.coupons-cell .red {\n  color: #F93A4A\n}\n\n.coupons-cell .blue {\n  color: #00b955\n}\n\n.bottom-box {\n  padding: 30rpx 15rpx 10rpx;\n  background: #FFFFFF;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  border-radius: 30rpx 30rpx 0 0;\n  box-sizing: border-box;\n}\n\n.bottom-box .flex-box {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.bottom-box .tag {\n  padding: 10rpx 40rpx;\n  background: #f5f5f5;\n  border-radius: 32px;\n  margin: 0 15rpx 20rpx ;\n  color: #666666;\n  font-size: 28rpx;\n  display: block;\n}\n\n.bottom-box checkbox, .bottom-box radio {\n  display: none;\n}\n\n.bottom-box textarea {\n  background: #F9F9F9;\n  height: 160rpx;\n  width: 100%;\n  border-radius: 16rpx;\n  margin: 10rpx 15rpx 30rpx;\n  padding: 30rpx;\n  box-sizing: border-box;\n  font-size: 28rpx;\n  position: relative;\n}\n\n.bottom-box .text-count {\n  color: #999999;\n  font-size: 24rpx;\n  position: absolute;\n  bottom: 30rpx;\n  right: 30rpx;\n}\n\n.bottom-box .selected {\n  color: #00b955;\n  background: #e8fff3;\n  border: 2rpx solid #00b955;\n}\n\n.bottom-box .desc {\n  font-size: 24rpx;\n  color: #999999;\n  margin-bottom: 20rpx;\n}\n\n.patient-list-mask .common_section {\n  height: 800rpx;\n  overflow-y: scroll;\n  padding-bottom: 148rpx;\n  box-sizing: border-box;\n}\n\n.patient-list-mask .cell {\n  padding: 0;\n  height: 132rpx;\n}\n.patient-list-mask .cell .idcard_text {\n  font-size: 24rpx;\n  color: #ff5f1b;\n}\n.patient-list-mask .cell_center {\n  flex: 1\n}\n\n.patient-list-mask .cell_right {\n  display: flex;\n  align-items: center;\n}\n\n.patient-list-mask .cell_right .img-box {\n  width: 70rpx;\n  height: 90rpx;\n  text-align: center;\n}\n\n.patient-list-mask .cell_right .img-box image {\n  width: 36rpx;\n  height: 36rpx;\n  margin: 27rpx auto;\n}\n\n.patient-list-mask .btns{\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 0 30rpx 10rpx;\n  width: 100%;\n  box-sizing: border-box;\n  background: #FFFFFF;\n}\n\n.patient-list-mask .btns .tips {\n  font-size: 26rpx;\n  color: #A9AEB7;\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n}\n\n.button {\n  border-radius: 50rpx;\n  height: 88rpx;\n  line-height: 88rpx;\n  color: #FFFFFF;\n  text-align: center;\n  font-weight: bold;\n  font-size: 36rpx;\n  box-sizing: border-box;\n  background: #C6CAD4;\n  display: block;\n  width: 100%;\n  margin-bottom: 20rpx;\n}\n\n.active{\n  background: #00b955;\n}\n\n.waiting {\n  position: fixed;\n  left: 25rpx;\n  bottom: 30rpx;\n  width: 570rpx;\n  height: 70rpx;\n  padding: 0 20rpx;\n  line-height: 70rpx;\n  border-radius: 35rpx;\n  box-shadow: 0px 5rpx 20rpx 0px rgba(48,48,60,0.08); \n  display: flex;\n  align-items: center;\n  background: #FFFFFF;\n}\n\n.waiting image {\n  width: 40rpx;\n  height: 40rpx;\n  margin-right: 20rpx;\n}\n\n/* 优惠券弹窗 */\n.coupon_alert {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 552rpx;\n  /* height: 548rpx; */\n  z-index: 1001;\n  background: #FF3131;\n  color: #FFFFFF;\n  border-radius: 12rpx;\n  padding-bottom: 20rpx;\n}\n\n.coupon_alert .title {\n  text-align: center;\n  font-size: 34rpx;\n  font-weight: bold;\n  margin: 10rpx 0;\n}\n\n.coupon_alert .desc {\n  text-align: center;\n  font-size: 24rpx;\n  color: #FFD5D5;\n}\n\n.coupon_alert  .coupon_section {\n  max-height: 410rpx;\n  overflow-y: scroll;\n  padding: 20rpx;\n  box-sizing: border-box;\n  border-bottom-left-radius: 20rpx;\n  border-bottom-right-radius: 20rpx;\n}\n\n.coupon_alert .coupon_img {\n  width: 100%;\n  height: 200rpx;\n  border-top-left-radius: 20rpx;\n  border-top-right-radius: 20rpx;\n  display: block;\n  margin-top: -190rpx;\n}\n\n.close_img {\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  bottom: -120rpx;\n  left: 50%;\n  margin-left: -30rpx;\n  z-index: 1002;\n}\n\n.coupon_alert .coupon_section .cell {\n  box-sizing: border-box;\n  box-shadow: 0;\n  border-radius: 8rpx;\n  padding: 0;\n  height: 156rpx;\n  overflow: initial;\n}\n\n.coupon_alert .coupon_section .cell:first-child {\n  margin-top: 0;\n}\n\n.coupon_alert .coupon_section .cell_center {\n  width: 70%;\n  height: 100%;\n  border-right: 2rpx dashed #d6d6d6;\n  padding: 20rpx 16rpx;\n}\n\n.coupon_alert .coupon_section .cell_center .tag {\n  color: #F93A4A;\n  border: 1rpx solid #F93A4A;\n  font-size: 20rpx;\n  background: none;\n  height: 30rpx;\n  line-height: 30rpx;\n  border-radius: 30rpx;\n  padding: 0 5rpx;\n  position: inherit;\n  margin-right: 8rpx;\n}\n\n.coupon_alert .coupon_section .cell_center .empty {\n  margin-top: 25rpx;\n  font-size: 20rpx;\n  color: #666666;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.coupon_alert .coupon_section .cell_center .text_block {\n  margin-bottom: 0;\n  font-size: 20rpx;\n  color: #999999\n}\n\n.coupon_alert .coupon_section .cell_center .name {\n  -webkit-line-clamp: 1;\n  font-size: 28rpx;\n}\n\n.coupon_alert .coupon_section .cell_center .text{\n  margin-top: 25rpx;\n  font-size: 20rpx;\n  color: #666666;\n}\n\n.coupon_alert .coupon_section .cell_left {\n  background: #fff;\n  color: #e4393b;\n  width: 180rpx;\n  height: 100%;\n  position: relative;\n}\n\n.coupon_alert .coupon_section .cell_left .dot {\n  position: absolute;\n  left: 0;\n  background: #ff3131;\n  width: 16rpx;\n  height: 16rpx;\n  border-radius: 16rpx;\n  margin-left: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .dot_top {\n  top: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .dot_bottom {\n  bottom: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .price {\n  margin: 0;\n  font-size: 58rpx;\n  height: 156rpx;\n  line-height: 156rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .price .text {\n  font-size: 20rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .button {\n  border: 1px solid #e02e24;\n  border-radius: 15px;\n  width: 90rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  font-size: 24rpx;\n  margin: 10rpx auto 0;\n}\n\n.coupon_alert .coupon_section .cell_left .gray {\n  color: #8a8080;\n  border-color: #8a8080;\n}\n\n.coupons-dialog {\n  height: 800rpx;\n  overflow-y: scroll;\n}\n","js":"import { ajax, ajax2, cdnStaticResourceUrl, inquiryOrderPay } from '../../../utils/util'\nimport { initJump, handleToWaiting, handleToUnload } from \"../../../common/toChatroom\"\nimport  xcxIM  from '../../../im/im';\nlet inquiryReportGuid\n\nexport default {\n\n  data: function() {\n    return {\n      patientList: [],\n      haveIdCardPatientList: [], // 有身份证号的列表\n      patientListShow: false,\n      editPatient: false,\n      currentStep: 1,\n      scrollHeight: '',\n      textareaShow: false,\n      patientData: {},\n      checkboxData: [],\n      radioChangeData: 0,\n      scorllBottom: 'msg0',\n      textareaValue: '',\n      inquiryBoxShow: false,\n      guidanceList: [],\n      guidanceData: [],\n      waitingBoxShow: false,\n      payInfo: {},\n      args: {\n        fee: 0.01,             // 支付金额，单位为分\n        paymentArgs: 'A', // 将传递到功能页函数的自定义参数\n        currencyType: 'CNY' // 货币符号，页面显示货币简写 US$ \n      },\n      createInquiryTime: null,\n      patientSex: {\n        '0': '未知',\n        '1': '男',\n        '2': '女'\n      },\n      cf_chapter: cdnStaticResourceUrl,\n      inquirySource: 1,\n      supportCode: '',//保险来源加密code\n      policyDutyCode: '',//宜块钱解析保险加密code\n      couponsNotifyShow: true,\n      couponsNotify: {},\n      couponsList: [],\n      selectCoupon: {},\n      couponsDialog: false,\n      selectedCoupon: {},\n      isRefresh: true,//判断onshow 是否执行\n      drugstoreSource: false,\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log('guidance onLoad', options)\n    if(options.userInfo) {\n      console.log(JSON.stringify(options.userInfo))\n      let { organSignValid } = JSON.parse(options.userInfo);\n      // 扫码问诊用到\n      if (organSignValid) {\n        Taro.showToast({\n          icon: 'none',\n          title: '店内问诊套餐失效，已帮您安排线上问诊服务',\n          duration: 4000\n        })\n      }\n    }\n    if(options.isHideBtn) this.setData({drugstoreSource: true})\n    if(options.inquirySource) this.data.inquirySource = options.inquirySource;\n    if(options.supportCode ) this.data.supportCode = options.supportCode;\n    if(options.drugstoreId)this.setData({drugstoreId: options.drugstoreId})\n    if(options.drugstoreId)this.setData({inquirySource: 8})\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    console.log('guidance onShow')\n    // 吊起支付触发onshow的情况不刷新\n    if(!this.data.isRefresh) return false;\n\n    this.setData({\n      currentStep: 1, // 导诊步骤\n      guidanceData: [], \n      guidanceList: [],\n      inquiryBoxShow: false // 显示极速问诊付款框(最后一步)\n    })\n    if(this.data.supportCode) {\n      this.parseSupportCode(); // 解析保险来源SupportCode\n    }else {\n      this.getguidanceData(); // 获取导诊文案\n    }\n    this.getCouponsNotify();  // 获取优惠券通知列表\n    Taro.setStorageSync('guidance', true)\n    initJump(this.handleToChatroom) // 初始化 im \n  },\n  onReady: function () {\n    console.log('guidance onReady')\n  },\n  // 获取优惠券通知列表\n  getCouponsNotify() {\n    ajax2('post', 'miniapp/marketing/pushAndGetDiagnosisCouponList', {\n      position: 1, //1.问诊首页发券 后台要求写死，便于后期扩展\n      channel: getApp().globalData.inquiryChannel//0：扫码购 1：平台（荷叶健康） 2：药店 3：保险 4：您健康\n    }, res => {\n      if(res.data.code == 0) {\n        this.setData({\n          couponsNotify: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  //获取优惠券列表\n  getCouponsList() {\n    ajax2('post', 'couponController/queryAvailableCoupons', {\n      storeId: this.data.inquiryData.drugstoreId,\n      products: [{\n        productId: this.data.inquiryData.skuId,\n        count: 1\n      }]\n    }, res => {\n      if(res.data.code == 0) {\n        let couponsList = res.data.result;\n        //默认选择优惠最大的券\n        if(couponsList.length > 0 && couponsList[0].defaultOption == 1) this.getDiscountAmount(couponsList[0]);\n        this.setData({\n          couponsList\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 解析保险来源SupportCode\n   */\n  parseSupportCode(){\n    ajax('POST', 'api/insurance/parseSupportCode', {\n      supportCode: this.data.supportCode\n    }, res=> {\n      if (res.data.code == 0) {\n        this.data.policyDutyCode = res.data.result && res.data.result.policyDutyCode;\n        this.getInsuUserPatienInfo();\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  /**\n   * 获取保险用药人\n   */\n  getInsuUserPatienInfo(){\n    ajax('POST', 'api/insurance/getInsuUserPatienInfo', {\n      policyDutyCode: this.data.policyDutyCode\n    }, res=> {\n      if (res.data.code == 0) {\n        this.data.patientData = res.data.result;\n        this.getguidanceData();\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  getguidanceData() {\n    ajax2('POST', 'api/extremeInterrogation/leadingExaminingRecords', {}, res=> {\n      if (res.data.code == 0) {\n        let guidanceData = res.data.result;\n        let guidanceList = [];\n        guidanceList.push(guidanceData[0]);\n        guidanceList.push(guidanceData[1]);\n        //保险来源自带用药人，跳过选择用药人步骤\n        if(this.data.inquirySource ==5) {\n          guidanceList.push({\n            userData: this.data.patientData,\n            selectedDate: {\n              'msg': this.data.patientData && this.data.patientData.patientName\n            }\n          });\n          guidanceList.push(guidanceData[2]);\n          this.data.currentStep = 2;\n        }else {\n          this.getPatientList();\n        }\n        this.setData({\n          guidanceData,\n          guidanceList,\n          currentStep: this.data.currentStep\n        })\n        this.computeScrollViewHeight();\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n\n  },\n  dialogClose(){\n    this.setData({\n      editPatient: false\n    })\n  },\n  /**\n   * @description: 确认是否删除患者\n   * @return: void\n   */\n  checkDeletePatient(e) {\n    let patient = e.currentTarget.dataset.item;\n    // if (patient.checked) {\n    //   Taro.showToast({\n    //     icon: 'none',\n    //     title: '已选中患者无法删除'\n    //   })\n    //   return false;\n    // }\n    Taro.showModal({\n      content: '删除当前患者信息？',\n      // confirmColor: getApp().globalData.mainColor,\n      success: (res) => {\n        if (res.confirm) {\n          this.deletePatient(patient);\n        }\n      }\n    })\n  },\n  /**\n   * @description: 删除患者\n   * @return: void\n   */\n  deletePatient(patient) {\n\n    ajax2('POST', 'api/userPatient/deleteUserPatient', {\n      id: patient.id,\n      userId: Taro.getStorageSync('userInfo').userId\n    }, res=> {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n        this.getPatientList();\n        \n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n\n  },\n  /**\n   * @description: 获取患者列表\n   * @return: void\n   */\n  getPatientList() {\n\n    ajax2('POST', 'api/userPatient/selectUserPatientList', {\n      userId: Taro.getStorageSync('userInfo').userId\n    }, (res) => {\n      if (res.data.code == 0) {\n        // res.data.result.map(item => {\n        //   return item.checked = true && item.id == this.data.currentPatientId\n        // })\n        let _retList = res.data.result.filter(function(item){\n          return item.patientIDCard && item.patientIDCard.length !== 0;\n        })\n        this.setData({\n          patientList: res.data.result,\n          haveIdCardPatientList: _retList\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n\n  },\n  /**\n   * @description: 展示患者列表弹窗\n   * @return: void\n   */\n  openPatientList() {\n    if(this.data.patientList.length == 0) {\n      this.data.editPatient= true;\n    }\n    this.setData({\n      patientListShow: true,\n      editPatient: this.data.editPatient\n    })\n  },\n  /**\n   * @description: 多选\n   * @return: void\n   */\n  checkboxChange(e) {\n    console.log(e)\n    let itSomethingElse = false;\n    let selectedList = [];\n    let currentData = this.data.guidanceData[this.data.currentStep];\n    \n    this.data.checkboxData = e.detail.value;\n    currentData.labelList.forEach(item=> item.checked = false);\n    selectedList = currentData.labelList.filter(item=> this.data.checkboxData.some(code => code == item.code));\n    selectedList.forEach(item => {\n      item.checked = true;\n      if(item.itSomethingElse) itSomethingElse = true;//选中的tag是其他\n    })\n    \n    this.setData({\n      checkboxData: e.detail.value,\n      guidanceData: this.data.guidanceData,\n      textareaShow: itSomethingElse\n    })\n  },\n  /**\n   * @description: 单选\n   * @return: void\n   */\n  radioChange(e) {\n    let currentData = this.data.guidanceData[this.data.currentStep];\n    currentData.labelList.forEach(item=> item.checked = false);\n    currentData.labelList[e.detail.value].checked = true;\n    this.setData({\n      radioChangeData: e.detail.value,\n      guidanceData: this.data.guidanceData\n    })\n  },\n  /**\n   * @description: 确定选项\n   * @return: void\n   */\n  checkValue(e) {\n    let index = e.currentTarget.dataset.index;\n    let selectedDate = {\n      msg: ''\n    };\n    let hasSomethingElse = false;\n    let currentData = this.data.guidanceData[index-1];\n\n    //多选\n    if(this.data.guidanceList[index].whetherAlternative) {\n      let checkedList = [];\n      if(this.data.checkboxData.length == 0) {\n        Taro.showToast({\n          title: '请至少选择一项',\n          icon: 'none'\n        })\n        return;\n      }\n\n      checkedList = JSON.parse(JSON.stringify(currentData.labelList.filter(label=> this.data.checkboxData.some(item=> item == label.code))));\n      checkedList.forEach((item, index)=> {\n        if(item.itSomethingElse) {\n          item.msg = this.data.textareaValue;\n          hasSomethingElse = true;\n        }\n        selectedDate.msg += (index == 0 ? item.msg : `，${ item.msg }`);\n      })\n    }else {\n      let hasCheckedIndex = -1;\n      currentData.labelList.forEach((item, index)=> {\n        if(item.checked) hasCheckedIndex = index;\n      })\n      this.data.radioChangeData = hasCheckedIndex;\n\n      if(this.data.radioChangeData < 0) {\n        Taro.showToast({\n          title: '请选择如下选项',\n          icon: 'none'\n        })\n        return;\n      }\n\n      selectedDate = currentData.labelList[this.data.radioChangeData];\n    }\n\n    //包含其他输入框内容必填\n    if(hasSomethingElse && !this.data.textareaValue) {\n      Taro.showToast({\n        title: '请输入其他信息',\n        icon: 'none'\n      })\n      return;\n    }\n\n    this.data.guidanceList.push({\n      userData: this.data.patientData,\n      selectedDate\n    });\n\n    if(index < this.data.guidanceData.length) {\n      this.data.currentStep = index++;\n      this.data.guidanceList.push(this.data.guidanceData[this.data.currentStep]);\n    }else {\n      this.getInquiryData();\n      this.setData({\n        inquiryBoxShow: true\n      })\n    }\n    \n    this.setData({\n      currentStep: this.data.currentStep,\n      guidanceList: this.data.guidanceList, \n      scorllBottom: `msg${ this.data.guidanceList.length - 1 }`,\n      radioChangeData: this.data.radioChangeData\n    })\n    this.computeScrollViewHeight();\n  },\n  /**\n   * @description: 获取Textarea值\n   * @return: void\n   */\n  getTextareaValue(e) {\n    this.setData({\n      textareaValue: e.detail.value\n    })\n  },\n  /**\n   * @description: 添加/编辑患者信息\n   * @return: void\n   */\n  toPatientInfo(e) {\n    let currentPatientId = e.currentTarget.dataset.id || '';\n    console.log(currentPatientId)\n    if(this.data.patientList.length >= 10 && !currentPatientId) {\n      Taro.showToast({\n        icon: 'none',\n        title: '添加患者不得超过10个'\n      })\n      return false;\n    }\n    this.setData({\n      editPatient: true,\n      currentPatientId\n    })\n  },\n  toLogin(){\n    Taro.navigateTo({\n      url: '/pages/note/login/login',\n    })\n  },\n  updataSuccess(){\n    console.log(33);\n    this.getPatientList();\n    this.setData({\n      patientListShow: true,\n      editPatient: false\n    })\n  },\n  /**\n   * @description: 选择患者\n   * @return: void\n   */\n  selectedPatient(e){\n    console.log('select--', e.currentTarget.dataset.item);\n    let _pidcard = e.currentTarget.dataset.item.patientIDCard;\n    if (_pidcard.length == 0) {\n      console.log('用户没有身份证号');\n      let currentPatientId = e.currentTarget.dataset.item.id || '';\n      console.log(currentPatientId)\n      this.setData({\n        editPatient: true,\n        currentPatientId\n      })\n      return;\n    }\n    let item = e.currentTarget.dataset.item;\n    this.data.guidanceList.push({\n      userData: item,\n      selectedDate: {\n        msg: item.patientName\n      }\n    });\n    this.data.guidanceList.push(this.data.guidanceData[2]);\n    this.setData({\n      guidanceList: this.data.guidanceList,\n      patientListShow: false,\n      currentStep: 2,\n      patientData: item\n    })\n  },\n  //计算 scroll-view 的高度\n  computeScrollViewHeight() {\n    //获取屏幕可用高度\n    let screenHeight = Taro.getSystemInfoSync().windowHeight;\n    let query = Taro.createSelectorQuery().in(this);\n    console.log(query.select('#bottom-box').boundingClientRect())\n    query.select('#bottom-box').boundingClientRect((target) => {\n      console.log(target)\n      let scrollHeight;\n      if (target) {\n        //计算 scroll-view 的高度\n        scrollHeight = screenHeight - target.height;\n        \n      }else {\n        scrollHeight = screenHeight\n      }\n      this.setData({\n        scrollHeight\n      })\n    }).exec()\n  },\n  /**\n   * @description: 获取问诊卡片\n   * @return: void\n   */\n  getInquiryData() {\n    ajax('POST', 'api/extremeInterrogation/channelLabel', {\n      thirdChannel: getApp().globalData.inquiryChannel//渠道code 1:平台 2 药店 3 保险 4 您健康\n    }, res=> {\n      if (res.data.code == 0) {\n        res.data.result.askDoctorsPrice = res.data.result.askDoctors;\n        this.setData({\n          inquiryData: res.data.result\n        })\n        this.getCouponsList();\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  /**\n   * @description: 创建问诊单\n   * @return: void\n   */\n  createInquiry(isHandCrafted) {\n     // isHandCrafted 是否是im断开重连成功callback调用方式\n    if (!isHandCrafted&&(new Date().getTime() - this.data.createInquiryTime < 4000)) {\n      return false;\n    }\n    this.data.createInquiryTime = new Date().getTime();\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    let data = {\n      orderNo: '',\n      userPatientId: this.data.inquirySource == 5 ? this.data.patientData.thirdUserId : this.data.patientData.id,\n      inquiryDeptCode: this.data.guidanceList[8].selectedDate.code,\n      inquiryDeptName: this.data.guidanceList[8].selectedDate.msg,\n      lastDiagnosis: {\n        \"mainSuit\": this.data.guidanceList[4].selectedDate.msg,\n        \"offlineDiagnosis\": this.data.guidanceList[6].selectedDate.code,\n        \"prescriptionDetail\":[],\n        \"diagnosis\":\"\",\n        \"diagnosisCode\":\"\"\n      },//mainSuit offlineDiagnosis 未必传，后面3个参数后台要求写死\n      inquirySource:  this.data.inquirySource||getApp().globalData.inquirySource,\n      thirdChannel: this.data.policyDutyCode,\n      inquiryChannel: getApp().globalData.inquiryChannel,\n      clientType: 10//0未定义，10小程序，20支付宝，30app（iOS），40app(androd),50pc,60H5\n    }\n    if(this.data.drugstoreId)data.drugstoreId = this.data.drugstoreId\n    if(this.data.selectedCoupon.id) data.couponIds = [this.data.selectedCoupon.id];\n    data.lastDiagnosis = JSON.stringify(data.lastDiagnosis);\n\n    if(!xcxIM.checkStatus(this.createInquiry,true)){\n      return\n    }\n    //创建问诊单之前 判断一下状态\n    ajax2('POST', 'api/extremeInterrogation/createPrescription', data, res=> {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        //判断是否需要支付\n        if(res.data.result.channelPrice == 0) {\n          //免费问诊\n          this.paymentSuccess(res.data.result)\n        }else {\n          //支付\n          this.inquiryOrderPay(res.data.result);\n        }\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  //问诊订单支付\n  inquiryOrderPay(data) {\n    let param = {\n      orderNo: data.orderNo,\n      drugstoreId: this.data.inquiryData.drugstoreId\n    }\n    inquiryOrderPay(param, () => {\n      //支付成功\n      this.data.isRefresh = false; //吊起支付的情况不刷新页面\n      this.paymentSuccess(data);\n    }, ()=> {\n      //支付失败\n      setTimeout(()=> {\n        this.paymentFailed();\n      }, 500) \n    })\n  },\n  /**\n   * 支付后跳转页面\n   */\n  paymentSuccess(data){\n    this.setData({\n      waitingBoxShow: true,\n      inquiryBoxShow: false\n    })\n    let patientGuid = data && data.patientGuid;\n    inquiryReportGuid = data && data.inquiryReportGuid;\n    Taro.setStorageSync('inquiryId', inquiryReportGuid)\n    handleToWaiting({ patientGuid })\n  },\n  // 支付失败的回调接口\n  paymentFailed: function (e) {\n    Taro.redirectTo({\n      url: `/pages/note/inquiryRecord/inquiryRecord`\n    })\n  },\n  // 跳转咨询页面\n  handleToChatroom (chatroomFlag) {\n    console.log('handleToChatroom chatroomFlag:', chatroomFlag)\n    if (!chatroomFlag) {\n      console.log('handleToChatroom:', wx)\n      var url = '../chat/pages/chatroom'\n      if(this.data.drugstoreId){\n        // 从药店首页来\n         url+=`?drugstoreId=${this.data.drugstoreId}`\n      }\n      Taro.redirectTo({\n        url: url\n      })\n    }\n  },\n  onUnload: function () {\n    console.log('guidance onUnload')\n    handleToUnload()\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    console.log('guidance onHide')\n    this.data.isRefresh = true;\n  },\n  // 打开选择优惠券弹窗\n  openCouponsBox() {\n    if(this.data.couponsList.length == 0) return;\n    this.setData({\n      couponsDialog: true\n    })\n  },\n  // 选择优惠券\n  userCoupon(e){\n    this.getDiscountAmount(e.detail);\n\n    this.setData({\n      couponsDialog: false\n    })\n  },\n  //计算优惠金额\n  getDiscountAmount(selectedCoupon) {\n    this.data.inquiryData.askDoctorsPrice = this.data.inquiryData.askDoctors;\n    if(selectedCoupon.id) {\n      selectedCoupon.actualDiscountDes = (selectedCoupon.actualDiscount/100).toFixed(2);\n      this.data.inquiryData.askDoctorsPrice = (this.data.inquiryData.askDoctors - selectedCoupon.actualDiscountDes).toFixed(2);\n    }\n    \n    this.setData({\n      selectedCoupon,\n      inquiryData: this.data.inquiryData\n    })\n    //初始化数据\n    // this.data.discountAmount = null;\n    // this.data.inquiryData.askDoctorsPrice = this.data.inquiryData.askDoctors;\n\n    // let askDoctorsPrice = this.data.inquiryData.askDoctors;\n\n    //优惠方法:1:满减;2:折扣;\n    // if(selectedCoupon.couponDiscountWay == 1) {\n    //   this.data.discountAmount = askDoctorsPrice - (askDoctorsPrice - selectedCoupon.couponCash);\n    //   this.data.inquiryData.askDoctorsPrice = askDoctorsPrice - selectedCoupon.couponCash;\n    // }else if(selectedCoupon.couponDiscountWay == 2){\n    //   let discountPrice= (askDoctorsPrice * selectedCoupon.couponDiscountFactor).toFixed(2);\n    //   this.data.discountAmount = askDoctorsPrice - discountPrice;\n    //   this.data.inquiryData.askDoctorsPrice = discountPrice;\n    // }\n  },\n  // 关闭优惠券通知弹窗\n  //向用户发起订阅请求\n  couponsNotifyClose() {\n    this.setData({\n      couponsNotifyShow: false\n    })\n    let tmplIds = ['osYBy0kFCHt6qiQd0xb2valQr6rr3afPxYja_y6ZztA'];\n    if(!Taro.requestSubscribeMessage) return;\n    Taro.requestSubscribeMessage({\n      tmplIds: tmplIds,\n      success (res) { \n        ajax('get', 'api/wechat/saveSubscribeUser', {\n          templateId: tmplIds[0],\n          status: res && res[tmplIds[0]]\n        }, res1 => {\n          console.log('订阅结果上报', res, res1)\n        })\n      }\n    })\n  }\n};"},"convertDir/pages/inquiry/inquiryActive/inquiryActive":{"js":"// pages/inquiry//inquiryActive/inquiryActive.js\nimport { ajax, ajax2, cdnStaticResourceUrl } from '../../../utils/util'\n\nexport default {\n\n  data: function() {\n    return {\n      couponsData: [],\n      organSign: null,\n      activeGoodsList: [],\n      cdn_link: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.organSign = options.organSign;\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.getCouponsData();\n    this.getPackageAd();\n  },\n  //获取优惠券列表\n  getCouponsData() {\n    ajax2('post', 'miniapp/marketing/receiveAddCoupons', { \n      organSign: this.data.organSign \n    }, res => {\n      if(res.data.code == 0) {\n        if(!res.data.result) return false;\n        if(res.data.result.actInfo && res.data.result.actInfo.isShowStoreActProduct) this.getHotGoods(res.data.result.actInfo.storeId); \n        this.setData({\n          couponsData: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  //获取优惠券列表\n  getPackageAd() {\n    ajax2('post', 'miniapp/ad/getPackageAd', {}, res => {\n      if(res.data.code == 0) {\n        this.setData({\n          packageAd: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n   //获取活动商品\n   getHotGoods(storeId) {\n    let data = {};\n    data = {\n      drugstoreId: storeId,\n      channel: 'MINI',\n      classifyId: '51'//活动商品固定分类ID\n    }\n    ajax('get', 'mimiapp/drugStoreClassify/getDrugstoreGoodsByClassifyId', data, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.setData({\n          activeGoodsList: res.data.result && res.data.result.list\n        })    \n      }else{\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  //banner跳转\n  toLink(e) {\n    let target = e.currentTarget.dataset.item;\n    if (!target.bannerUrl) return false;\n    //2是自定义页面 3小程序页面\n    if (target.bannerUrlType == 2) {\n      Taro.navigateTo({\n        url: `/pages/webView/webView?link=${ encodeURIComponent(target.bannerUrl) }`\n      })\n    } else if (target.bannerUrlType == 3) {\n      Taro.navigateTo({\n        url: target.bannerUrl\n      })\n    }\n  },\n  //特惠商品跳转商品详情\n  toOrderDetail(e){\n    let goodsId = e.currentTarget.dataset.item.medicinesId;\n    let classifyId = e.currentTarget.dataset.item.classifyId;\n    let drugStoreId = e.currentTarget.dataset.item.drugstoreId;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${goodsId}&drugStoreId=${drugStoreId}&classifyId=${classifyId}`\n    })\n  },\n  //优惠券点击跳转\n  jumpLink(e) {\n    // 0商品券 1问诊券\n    if(e.detail.category == 0) {\n      if(e.detail.establishYkqService == 1) {\n        Taro.navigateTo({\n          url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${ e.detail.storeId }`\n        })\n      }else {\n        Taro.switchTab({\n          url: '/pages/noteIndex/noteIndex',\n        })\n      }\n    }else if(e.detail.category == 1){\n      Taro.navigateTo({\n        url: `/pages/inquiry/guidance/guidance`\n      })\n    }\n  }\n};","json":{"couponsList":"../../../component/couponsList/couponsList"},"wxml":"\n  <view class=\"inquiryActive-auto-container\"> \n    <navBar titleText=\"荷叶健康\"></navBar>\n    <view class=\"container\">    \n      <image :src=\"''+ cdn_link +'images/inquiryBanner.png'\" class=\"top-image\"></image>\n      <view class=\"coupons\">\n        <couponsList :couponsData=\" couponsData.couponList \" pageFrom=\"inquiry\" bind:action=\"jumpLink\"></couponsList>\n      </view>\n      <swiper autoplay=\"false\" interval=\"5000\" class=\"banner\" v-if=\" packageAd.length > 0 \" circular>\n        <swiper-item class=\"banner__item\" :key=\"key\" v-for=\"(item, key) in  packageAd \" wx:for-index=\"key\">\n          <image :src=\" item.bannerImage ? item.bannerImage+'@702x230' : '/images/banner_mr.png' \" bindtap=\"toLink\" data-index=\"key\" :data-item=\"item\"></image>\n        </swiper-item>\n      </swiper>\n      <view class=\"product-title\" v-if=\" activeGoodsList.length > 0 \">门店特惠商品\n      </view>\n      <view class=\"common_section\">\n        <view class=\"cell\" v-for=\"(item, index) in  activeGoodsList \" :key=\"index\"> \n          <view class=\"cell_left\"> \n            <view class=\"tag\" v-if=\" item.activityInfo.limitNum > 0 \" :style=\"{background:  'url(' + cdn_link + '/images/inquiryTag.png) no-repeat' ,background-size: 100%}\">促销价\n            </view>\n            <image :src=\" item.img \"></image>\n          </view>\n          <view class=\"cell_center\">  \n            <view class=\"name\">{{item.medicinesName}} {{item.commonName}}\n            </view>\n            <view class=\"desc\">{{ item.product_spec }}\n            </view>\n            <view class=\"btns\"> \n              <view class=\"price-box\"> \n                <view :class=\"[price,( item.activityInfo ? '' : 'price-height' )]\">{{ item.activityInfo ? item.activityInfo.actPrice : item.sellingPric }}\n                  <text class=\"symbol\">¥\n                  </text>\n                </view>\n                <text class=\"common-line-price\" v-if=\" item.activityInfo \">¥{{item.price}}\n                </text>\n              </view>\n              <view class=\"button\" bindtap=\"toOrderDetail\" :data-item=\"item\">立即抢购\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/inquiry//inquiryActive/inquiryActive.wxss */\n@import '../../../common/tableView.wxss';\n.container {\n  background: #63C98C;\n  padding-bottom: 50rpx;\n  min-height: 100vh;\n}\n\n.container .top-image {\n  width: 100%;\n  height: 458rpx;\n}\n\n.container .coupons {\n  padding: 0 24rpx;\n}\n\n.container .banner {\n  margin: 20rpx 24rpx;\n  border-radius: 12rpx;\n  height: 180rpx;\n}\n\n.container .banner__item image {\n  width: 100%;\n  height: 100%;\n  border-radius: 12rpx;\n}\n\n.product-title {\n  color: #0F9A4F;\n  font-size: 32rpx;\n  font-weight: bold;\n  width: 356rpx;\n  height: 72rpx;\n  line-height: 72rpx;\n  margin: 30rpx auto;\n  text-align: center;\n  border-radius: 72rpx;\n  background: linear-gradient(to bottom, #C6FAA2 ,#A7EC7B);\n  box-sizing: 0 8rpx 8rpx 0 rgba(119,69,51,0.1);\n}\n\n.common_section {\n  background: none;\n  margin: 0 24rpx;\n}\n\n.common_section .cell {\n  padding: 24rpx;\n  margin: 20rpx 0;\n  background: #FFFFFF;\n  border-radius: 12rpx;\n}\n\n.common_section .cell .cell_left {\n  width: 200rpx;\n  height: 200rpx;\n  position: relative;\n  flex-shrink: 0;\n  margin-right: 32rpx;\n}\n\n.common_section .cell .cell_left image {\n  width: 100%;\n  height: 100%;\n}\n\n.common_section .cell .cell_left .tag {\n  width: 72rpx;\n  height: 72rpx;\n  color: #FFFFFF;\n  font-size: 22rpx;\n  line-height: 60rpx;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.common_section .cell .cell_center {\n  font-size: 24rpx;\n  color: #41435D;\n}\n\n.common_section .cell .cell_center .name{\n  font-size: 32rpx;\n  color: #111334;\n  font-weight: bold;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n.common_section .cell .cell_center .btns {\n  display: flex;\n  width: 335rpx;\n  height: 78rpx;\n  background: #FC6442;\n  border-radius: 8px;\n  text-align: center;\n  color: #FFFFFF;\n  margin-top: 20rpx;\n}\n\n.common_section .cell .cell_center .btns .button {\n  width: 200rpx;\n  line-height: 78rpx;\n  font-size: 28rpx;\n}\n\n.common_section .cell .cell_center .price-box {\n  width: 134rpx;\n  background: linear-gradient(90deg,#fcd603, #ffe32a 99%);\n  border-radius: 8rpx;\n  color: #FF2121\n}\n\n.common_section .cell .cell_center .price {\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.common_section .cell .cell_center .price-height {\n  line-height: 78rpx;\n}\n\n.common_section .cell .cell_center .symbol {\n  font-size: 24rpx;\n}\n\n.common-line-price {\n  color: #FF2121 !important\n}\n\n.common-line-price::before{\n  background: #FF2121;\n}"},"convertDir/pages/inquiry/inquiryWaiting/inquiryWaiting":{"json":{},"js":"/**\n * desc: 问诊等待页面\n * auth: wangqinfei\n */\nimport { initJump, handleToWaiting, handleToUnload } from \"../../../common/toChatroom\"\n\nexport default {\n\n  data: function() {\n   return {\n\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let inquiryId = options.inquiryId\n    let patientGuid = options.patientGuid\n    Taro.setStorageSync('inquiryId', inquiryId)\n    handleToWaiting({ patientGuid })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    Taro.setStorageSync('guidance', true)\n    initJump(this.handleToChatroom)\n  },\n  // 跳转咨询页面\n  handleToChatroom (chatroomFlag) {\n    console.log('handleToChatroom chatroomFlag:', chatroomFlag)\n    if (!chatroomFlag) {\n      console.log('handleToChatroom:', wx)\n      Taro.redirectTo({\n        url: `../chat/pages/chatroom`\n      })\n    }\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    handleToUnload()\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"inquiryWaiting-auto-container\"> \n    <navBar title-text=\"极速问诊\" :showCapsule=\"true\"></navBar>\n    <view class=\"waitingBox\"> \n      <image src=\"../../../images/inquiryWaiting.png\"></image>\n      <span class=\"waitingTip\">正在为您接入医生，请等待...\n      </span>\n    </view>\n  </view>","wxss":".waitingBox {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n}\n.waitingBox image {\n  opacity: 1;\n  width: 320rpx;\n  height: 260rpx;\n}\n.waitingBox .waitingTip {\n  opacity: 1;\n  font-size: 30rpx;\n  font-weight: 400;\n  color: #9d9fb8;\n}"},"convertDir/pages/inquiry/prescriptionDetails/prescriptionDetails":{"json":{},"wxml":"\n  <view class=\"prescriptionDetails-auto-container\">        \n    <view class=\"tips\" v-if=\" jsonData.inquiryPrescription.invalidInfo && jsonData.inquiryPrescription.auditStatus === 3\">审核不通过原因：{{ jsonData.inquiryPrescription.invalidInfo }}\n    </view>\n    <view class=\"close-cause\" v-if=\"status_u === 2 && reasonTitle\">\n\t原因：{{reasonTitle}}\n\n    </view>\n    <view class=\"close-cause\" v-if=\"status_u === 3\">\n\t原因：开方超时\n\n    </view>\n    <block v-if=\"banner[0]\">\n      <image class=\"banner\" mode=\"aspectFill\" lazy-load :src=\"banner[0].bannerImage\" bindtap=\"tolink\"></image>\n    </block>\n    <view class=\"top-box\">  \n      <view class=\"status-box\"> \n        <view class=\"line\"></view>\n        <view class=\"icon_cont\">\n          <view v-for=\"(item, index) in statusImageList\" :key=\"index\">\n            <image :src=\"item\"></image>\n          </view>\n        </view>\n      </view>\n      <view class=\"list_cont_status\">\n        <view v-for=\"(item, index) in statusList\" :key=\"index\">{{ item }}\n        </view>\n      </view>\n      <view class=\"button\" :style=\"{text-align: isCenter ? 'left' : 'center'}\">{{ detailTitle }}\n      </view>\n    </view>\n    <block v-if=\"jsonData.inquiryPrescription.signType == 20 && jsonData.inquiryPrescription.prescriptionImage\">\n      <image class=\"img\" mode=\"widthFix\" :src=\"jsonData.inquiryPrescription.prescriptionImage\"></image>\n    </block>\n    <block v-else>\n      <view class=\"video-info\"> \n        <view class=\"video-info-header\">  \n          <view>{{jsonData.inquiryPrescription.patientName}}\n          </view>\n          <view>{{jsonData.inquiryPrescription.patientSex==1?'男':'女'}}\n          </view>\n          <view>{{jsonData.inquiryPrescription.patientAge}}\n          </view>\n        </view>\n        <view class=\"video-info-main\">      \n          <view> \n            <view>医生信息：\n            </view>\n            <view>{{jsonData.inquiryPrescription.physicianName}}\n            </view>\n          </view>\n          <view> \n            <view>问诊时间：\n            </view>\n            <view>{{jsonData.inquiryPrescription.inquiryTime}}\n            </view>\n          </view>\n          <view> \n            <view>过敏史：\n            </view>\n            <view>{{ext.allergySymptom == 1 ? '无' : ext.allergySymptomExplain}}\n            </view>\n          </view>\n          <view> \n            <view>病情描述：\n            </view>\n            <view>{{ext.mainSuit}}\n            </view>\n          </view>\n          <view> \n            <view>诊断结果：\n            </view>\n            <view>{{ext.diagnosis}}\n            </view>\n          </view>\n          <view v-if=\"jsonData.inquiryPrescription.medicineType==0\"> \n            <view>用药请求：\n            </view>\n            <view class=\"drug\">\n              <view v-for=\"(item, index) in ext.prescriptionDetail\" :key=\"index\" wx:for-index=\"index\">\n                <view>{{item.commonName ? item.commonName : item.productName}}{{' x' + item.quantity + ';'}}\n                </view>\n              </view>\n            </view>\n          </view>\n          <view v-if=\"jsonData.inquiryPrescription.medicineType==1\"> \n            <view>用药请求：\n            </view>\n            <view class=\"drug\">\n              <view v-for=\"(item, index) in ext.prescriptionTCMDetail\" :key=\"index\" wx:for-index=\"index\">\n                <view>{{item.commonName ? item.commonName : item.productName}}{{' ' + item.quantity + 'g;'}}\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </block>\n    <view v-if=\"jsonData.inquiryPrescription.source != 3 && jsonData.inquiryPrescription.source != 7&&jsonData.inquiryPrescription.source!=8\">\n      <button class=\"bottom-button\" v-if=\" jsonData.inquiryPrescription.auditStatus == 2 && jsonData.inquiryPrescription.isEffective == 0 \" bindtap=\"toComfirmProducts\">去购药\n      </button>\n    </view>\n    <view class=\"fixed-btn\" bindtap=\"savePrescription\">保存处方\n    </view>\n  </view>","wxss":"/* pages/onlineGoods/prescriptionDetails/prescriptionDetails.wxss */\n/* @import '../../../common/tableView.wxss'; */\npage {\n  background-color: #f5f5f5;\n  font-size: 24rpx;\n  color: #30303c;\n}\n\n.tips {\n  text-align: center;\n  color: #FF2121;\n  font-size: 28rpx;\n  background: #FFEEEE;\n  padding: 16rpx 30rpx;\n}\n\n.top-box {\n  background: #FFFFFF;\n  padding: 30rpx;\n  border-radius: 20rpx;\n  margin: 30rpx;\n}\n\n.top-box .status-box {\n  width: 100%;\n  position: relative;\n  /*display: flex;*/\n  /*justify-content: space-around;*/\n}\n\n.top-box .status-box .cell {\n  text-align: center;\n  position: relative;\n  flex: 1\n}\n\n.top-box .status-box .cell::after {\n  content: '';\n  position: absolute;\n  top: 19rpx;\n  right: -40%;\n  border: 1rpx dashed #00b955;\n  width: 80%;\n}\n\n.top-box .status-box .cell:last-child::after {\n  border: 0;\n}\n\n.top-box .status-box .waiting:nth-last-child(2)::after {\n  border-color: #CCCCCC;\n}\n\n.top-box .status-box .cell text {\n  display: block;\n  margin-top: 20rpx;\n  color: #999999;\n}\n\n.top-box .button {\n  border-radius: 8rpx;\n  background: #F7F7F7;\n  color: #999999;\n  text-align: center;\n  line-height: 1.5;\n  padding: 18rpx;\n  margin-top: 30rpx;\n}\n\n.cf-box {\n  width: 690rpx;\n  background: rgba(255, 255, 255, 1);\n  border-radius: 10rpx;\n  border: 1px solid rgba(231, 234, 236, 1);\n  margin: 0 auto;\n  padding: 40rpx 0 30rpx 0;\n  margin-top: 20rpx;\n  position: relative;\n}\n\n.cf-nr {\n  width: 630rpx;\n  margin: 0 auto;\n}\n\n.cf-title {\n  font-size: 40rpx;\n  color: #30303c;\n  font-weight: 600;\n  text-align: center;\n}\n\n.cf-title-2 {\n  margin-top: 8rpx;\n}\n\n.cf-time {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  font-size: 24rpx;\n  color: #30303c;\n  margin-top: 30rpx;\n}\n\n.cf-info {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  font-size: 24rpx;\n  color: #30303c;\n  margin-top: 20rpx;\n}\n\n.top_20 {\n  margin-top: 20rpx;\n}\n\n.top_10 {\n  margin-top: 10rpx;\n  color: #515163;\n}\n\n.border_solid {\n  border-bottom: 1rpx solid #777785;\n  padding-bottom: 20rpx;\n}\n\n.cf-rp {\n  font-size: 40rpx;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: rgba(48, 48, 60, 1);\n  margin-top: 20rpx;\n}\n\n.cf-ps {\n  font-size: 24rpx;\n  color: #515163;\n  margin-top: 30rpx;\n}\n\n.cf-info-qm {\n  width: 150rpx;\n  height: 50rpx;\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.cf-info-qm-nr {\n  height: 50rpx;\n  line-height: 50rpx;\n}\n\n.cf-yz {\n  width: 250rpx;\n  position: absolute;\n  right: 45rpx;\n  bottom: 110rpx;\n}\n/* 灵芝1.7.0 */\n.img{\n  display: block;\n  width: 690rpx;\n  height: auto;\n  margin: 0 auto;\n  margin-top: 20rpx;\n}\n\n.bottom-button {\n  margin: 30rpx;\n  background: #00b955;\n  color: #FFFFFF;\n  border-radius: 50rpx;\n}\n/* 扫码问诊 */\n.banner{\n  display: block;\n  width: 702rpx;\n  height: 134rpx;\n  margin: 0 auto;\n  margin-top: 20rpx;\n}\n/*扫码视频问诊*/\n.close-cause{\n  width: 100%;\n  line-height: 64rpx;\n  background: #ffeeee;\n  font-size: 28rpx;\n  font-weight: 400;\n  text-align: center;\n  color: #f93a4a;\n}\n.prompting{\n  border-radius: 8rpx;\n  line-height: 1.5;\n  background: #F7F7F7;\n  color: #999999;\n  margin-top: 30rpx;\n  padding: 20rpx 24rpx;\n  text-align: left;\n}\n.video-info{\n  background: #FFFFFF;\n  padding: 30rpx;\n  border-radius: 20rpx;\n  margin: 30rpx;\n  line-height: 2;\n  color: #111734;\n  font-size: 30rpx;\n}\n.video-info-header{\n  display: flex;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 15rpx;\n  margin-bottom: 12rpx;\n  align-items: flex-end;\n}\n.video-info-header >view{\n  margin-right: 15rpx;\n  font-size: 28rpx;\n  color: #9aa0b5;\n}\n.video-info-header view:first-child{\n  font-size: 32rpx;\n  color: #111734;\n  font-weight: 500;\n}\n.video-info-main >view{\n  display: flex;\n  word-break: break-all;\n}\n.video-info-main >view >view:first-child{\n  flex-shrink: 0;\n  width: 155rpx;\n  color: #9aa0b5;\n}\n.drug{\n  flex-wrap: wrap;\n}\n/*视频问诊新增*/\n.line {\n  border-bottom: 1px dashed #d8d8d8;\n  width: 447rpx;\n  position: absolute;\n  top: 19rpx;\n  left:50%;\n  transform: translateX(-50%);\n  z-index: 0;\n}\n.icon_cont {\n  display: flex;\n  width: 100%;\n  position: absolute;\n  z-index: 10;\n}\n.icon_cont >view{\n  flex: 1;\n}\n.icon_cont view {\n  width: 38rpx;\n  height: 38rpx;\n  display: inline-block;\n  text-align: center;\n}\n.icon_cont image {\n  width: 38rpx;\n  height: 38rpx;\n}\n.list_cont_status {\n  width: 100%;\n  margin-top: 60rpx;\n  display: flex;\n}\n.list_cont_status >view{\n  flex: 1;\n  text-align: center;\n}\n\n.fixed-btn {\n  position: fixed;\n  right: 0;\n  bottom: 25%;\n  height: 90rpx;\n  padding: 0 30rpx;\n  color: #FFFFFF;\n  line-height: 90rpx;\n  text-align: center;\n  font-size: 30rpx;\n  font-weight: bold;\n  border-top-left-radius: 90rpx;\n  border-bottom-left-radius: 90rpx;\n  background: #00b955;\n}","js":"// pages/onlineGoods/prescriptionDetails/prescriptionDetails.js\nimport {ajax, ajax2, cdnStaticResourceUrl } from '../../../utils/util'\n\nconst APIUrl = {\n  videoUrl: \"api/patientinfo/getPrescriptionDetailByInquiryId\",\n  tuwenUrl: \"miniapp/InquiryIM/queryPrescriptionInfoByGuid\"\n}\n\nexport default {\n  data: function() {\n    return {\n      banner:null,\n      inquiryId:'',\n      guid: '',\n      jsonData: {},\n      ext: {},\n      cf_chapter: cdnStaticResourceUrl,\n      statusImageList: [], // 审方图片标识列表\n      detailTitle: '', // 提示\n      title: '',\n      reasonTitle: '', // 头部文案\n      statusList: [], // 审方文字标识列表\n      status_u: '', // 1 待开方 2 已关闭 3 已超时  4 开方成功、等待上传 5 上传成功 6 待签名 7 医师签名成功 8 医师签名失败 9 药师签名成功 10 药师签名失败\n      auditStatus: '', // 审批状态  1 待审核 2 审批通过 3 审核不通过\n      // 代开方\n      auditStatus_u: '', // 待审核状态\n      auditStatus_us: '', // 已审核状态\n      isCenter: false, // 文字居中\n      inquiryType: null, // 区分视频字段\n      inquiryUrl: '', // 接口地址\n      params:{}, // 传入接口参数\n      methedType: '', // 接口请求方法\n      savaPrescriptionImg: '',\n      config:null\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    const config = {\n      video: () =>{\n        return {\n          inquiryUrl: APIUrl.videoUrl,\n          params: {inquiryReportGuid: options.inquiryId},\n          methedType: 'post'\n        }\n      },\n      tuwen: () =>{\n        return {\n          inquiryUrl: APIUrl.tuwenUrl,\n          params: options.inquiryId ? {inquiryId: options.inquiryId} : {guid: options.guid},\n          methedType: 'get'\n        }\n      },\n    }\n    this.setData({\n      inquiryType:options.inquiryType,\n      config:config\n    })\n    options.inquiryType === 'video' ?  this.getQueryPrescriptionInfo(config['video']()) :  this.getQueryPrescriptionInfo(config['tuwen']())\n    let userId = Taro.getStorageSync('userInfo') ? Taro.getStorageSync('userInfo').userId : ''\n    getApp().globalData.burySpotSDK.track('page_PrescriptionExpo',  {\n      userId: userId,\n      inquiryId: options.inquiryId\n    });\n  },\n  onShow(){\n    this.getBanner();\n  },\n  /**\n   * @description: 获取页面 options 参数\n   * @params  {Object} options\n   * return {void}\n   */\n  getQueryPrescriptionInfo(options) {\n    Taro.showLoading({\n      title: '加载中'\n    })\n    ajax2(options.methedType, options.inquiryUrl, options.params ,res=> {\n      Taro.hideLoading();\n      if (res.data.code === 0) {\n        let data = res.data.result;\n        if (data){\n          data.inquiryPrescription.outPrescriptionTime = this.timeStampTurnTime(data.inquiryPrescription.outPrescriptionTime);\n          this.setData({\n            jsonData: data,\n            ext: JSON.parse(data.inquiryPrescription.ext),\n            status_u: data.inquiryPrescription.status,\n            auditStatus: data.inquiryPrescription.auditStatus,\n            title: JSON.parse(data.inquiryPrescription.unPrescribeReason)[1],\n            reasonTitle: JSON.parse(data.inquiryPrescription.unPrescribeReason)[0],\n            savaPrescriptionImg: data.inquiryPrescription.prescriptionImage\n          },function (){\n            this.init();\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          duration: 3000,\n          icon: 'none'\n        })\n      }\n    }, e => {\n      Taro.showToast({\n        title: '请求失败',\n        duration: 3000,\n        icon: 'none'\n      })\n    })\n  },\n  getQueryPrescriptionImg(options) {\n    Taro.showLoading({\n      title: '加载中'\n    })\n    ajax2(options.methedType, options.inquiryUrl, options.params ,res=> {\n      Taro.hideLoading();\n      if (res.data.code === 0) {\n        let data = res.data.result;\n        if (data){\n          // data.inquiryPrescription.outPrescriptionTime = this.timeStampTurnTime(data.inquiryPrescription.outPrescriptionTime);\n          this.setData({\n            // jsonData: data,\n            // ext: JSON.parse(data.inquiryPrescription.ext),\n            // status_u: data.inquiryPrescription.status,\n            // auditStatus: data.inquiryPrescription.auditStatus,\n            // title: JSON.parse(data.inquiryPrescription.unPrescribeReason)[1],\n            // reasonTitle: JSON.parse(data.inquiryPrescription.unPrescribeReason)[0],\n            savaPrescriptionImg: data.inquiryPrescription.prescriptionImage\n          },function (){\n            // this.init();\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          duration: 3000,\n          icon: 'none'\n        })\n      }\n    }, e => {\n      Taro.showToast({\n        title: '请求失败',\n        duration: 3000,\n        icon: 'none'\n      })\n    })\n  },\n  getBanner(){\n    let _url = {\n      adType: 10\n    }\n\n    ajax2('GET', 'miniapp/notify/getPurchaseBanner', _url, res=> {\n      this.setData({\n        banner:res.data.result\n      })\n    }, e => {\n      Taro.showToast({\n        title: '请求失败',\n        duration: 3000,\n        icon: 'none'\n      })\n    });\n\n  },\n  /**\n   * @description: 获取 url 参数\n   * @params  {String} url\n   * return {String} 格式化后的 url\n   */\n  getCompleteUrl(url) {\n    let resultUrl = '';\n    // 分割url\n    let urlArray = url.split('?');\n    // 获取全局sess_key\n    let token = Taro.getStorageSync('loginInfo').token;\n    // 区分 url 后是否带参数\n    if (urlArray[1]) {\n      resultUrl = `${urlArray[0]}?${urlArray[1]}&token=${token}`;\n    } else {\n      resultUrl = `${urlArray[0]}?token=${token}`;\n    }\n    return resultUrl;\n  },\n  tolink(){\n    let data = this.data.banner[0];\n    // bannerUrlType 2自定义页面，3小程序页面；\n    let url = this.getCompleteUrl(data.bannerUrl);\n    if (data.bannerUrlType == 2){\n      if (data.activityPageShare) {\n        const activityPageShare = JSON.stringify(data.activityPageShare)\n        if (data.bannerUrl.indexOf('?') > -1) {\n          url = `${data.bannerUrl}&activityPageShare=${encodeURIComponent(activityPageShare)}`\n        } else {\n          url = `${data.bannerUrl}?activityPageShare=${encodeURIComponent(activityPageShare)}`\n        }\n      }\n      // let url = target.bannerUrl + '&token=' + getApp().globalData.sess_key;\n      // 参数格式化        \n      Taro.navigateTo({\n        url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n      })\n    }else{\n      Taro.navigateTo({\n        url: data.bannerUrl\n      })\n    }\n    getApp().globalData.burySpotSDK.track('action_offlineInquiryResult_bannerClick');\n  },\n  //时间戳转时间类型\n  timeStampTurnTime(timeStamp) {\n    if (timeStamp > 0) {\n      var date = new Date();\n      date.setTime(timeStamp);\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      m = m < 10 ? ('0' + m) : m;\n      var d = date.getDate();\n      d = d < 10 ? ('0' + d) : d;\n      var h = date.getHours();\n      h = h < 10 ? ('0' + h) : h;\n      var minute = date.getMinutes();\n      var second = date.getSeconds();\n      minute = minute < 10 ? ('0' + minute) : minute;\n      second = second < 10 ? ('0' + second) : second;\n      return y + '-' + m + '-' + d;\n    } else {\n      return \"\";\n    }\n  },\n  toComfirmProducts() {\n    Taro.navigateTo({\n      url: `/pages/quickConsultation/pages/selectProducts/selectProducts?prescriptionNum=${ this.data.jsonData.inquiryPrescription.guid }`,\n    })\n  },\n  // 视频问诊新增\n  init () {\n    if (this.data.auditStatus > 1) {\n      this.setData({\n        status_u: 5\n      })\n    }\n    if (this.data.auditStatus === 1) {\n      if (this.data.status_u > 3) {\n        this.setData({\n          status_u: 5,\n          auditStatus_u: 1,\n        })\n      }\n    }\n    if (this.data.auditStatus === 2) {\n      this.setData({\n        auditStatus_u: 2,\n        auditStatus_us: 2,\n      })\n    }\n    if (this.data.auditStatus === 3) {\n      this.setData({\n        auditStatus_u: 2,\n        auditStatus_us: 3,\n      })\n    }\n    if (this.data.status_u === 1) {\n      this.setData({\n        detailTitle: '医生正在为您开方，请稍等',\n      })\n    } else if (this.data.status_u === 2) {\n      this.setData({\n        detailTitle: this.data.title,\n        isCenter: true,\n      })\n    } else if (this.data.status_u === 3) {\n      this.setData({\n        detailTitle: this.data.title,\n        isCenter: true,\n      })\n    } else if (this.data.status_u === 0) {\n      this.setData({\n        detailTitle: '您已取消问诊'\n      })\n    } else if (this.data.auditStatus_u === 1) {\n      this.setData({\n        detailTitle: '药师审核处方后，我们将为您推送审核结果'\n      })\n    } else if (this.data.auditStatus_us === 3) {\n      this.setData({\n        detailTitle: '您的处方审核未通过'\n      })\n    } else if (this.data.auditStatus_u === 2) {\n      if (this.data.jsonData.inquiryPrescription.isEffective === 0) {\n        this.setData({\n          detailTitle: '您的处方已通过审核'\n        })\n      } else if (this.data.jsonData.inquiryPrescription.isEffective === 1) {\n        this.setData({\n          detailTitle: '处方已使用'\n        })\n      } else if (this.data.jsonData.inquiryPrescription.isEffective === 2) {\n        this.setData({\n          detailTitle: '处方已过期'\n        })\n      }\n    }\n\n    // this.status = res.status\n    // this.auditStatus = res.auditStatus\n    // 设置审核图片图标icon样式\n    this.setStatusImgList(this.data.status_u, this.data.auditStatus_u, this.data.auditStatus_us);\n    // 设置审核文字\n    this.setStatusList(this.data.status_u, this.data.auditStatus_us);\n  },\n  /**\n   * @description: 设置审核状态列表\n   * @param {}\n   * @return:\n   */\n  setStatusList(status, auditStatus) {\n    this.data.statusList.push('已问诊');\n    const step = this.filterStatus(status)\n    if (step) {\n      this.data.statusList.push(step)\n    }\n    this.data.statusList.push(\"待审核\");\n    this.data.statusList.push(this.filterAuditStatus(auditStatus));\n\n    this.setData({\n      statusList: this.data.statusList\n    })\n  },\n  /**\n   * @description: 获取开方状态\n   * @param {}\n   * @return:\n   */\n  filterStatus(status) {\n    const STATUS = {\n      3: '处方关闭',\n      2: '处方关闭',\n      1: '待开方'\n    }\n    return STATUS[status] ? STATUS[status] : '待开方';\n  },\n  /**\n   * @description: 获取审核状态\n   * @param {}\n   * @return:\n   */\n  filterAuditStatus(status) {\n    const STATUS = {\n      2: '已审核',\n      3: '审核驳回'\n    }\n    return STATUS[status] ? STATUS[status] : '已审核';\n  },\n  /**\n   * @description: 设置审核图片\n   * @param {}\n   * @return:\n   */\n  setStatusImgList(status, adu, adus) {\n    this.data.statusImageList.push('../../../images/success.png');\n    this.data.statusImageList.push(this.filterStatusImg(status));\n    this.data.statusImageList.push(this.filterStatusAuditImg(adu));\n    this.data.statusImageList.push(this.filterStatusAuditsImg(adus));\n    this.setData({\n      statusImageList: this.data.statusImageList\n    })\n  },\n  /**\n   * @description: 待开方，第二栏样式\n   * @param {}\n   * @return:\n   */\n  filterStatusImg(status) {\n    const STATUS = {\n      1: '../../../images/waitpre.png',\n      2: '../../../images/fail-2.png',\n      3: '../../../images/fail-2.png',\n      5: '../../../images/success.png'\n    }\n    return STATUS[status];\n  },\n  /**\n   * @description: 待审核，第三栏样式\n   * @param {}\n   * @return:\n   */\n  filterStatusAuditImg(status) {\n    const STATUS = {\n      1: '../../../images/waitpre.png',\n      2: '../../../images/success.png'\n    }\n    return STATUS[status] ? STATUS[status] : '../../../images/wait.png';\n  },\n  /**\n   * @description: 已审核，第四栏样式\n   * @param {}\n   * @return:\n   */\n  filterStatusAuditsImg(status) {\n    const STATUS = {\n      3: '../../../images/fail-2.png',\n      2: '../../../images/success.png'\n    }\n    return STATUS[status] ? STATUS[status] : '../../../images/wait.png';\n  },\n  savePrescription() {\n    this.data.inquiryType === 'video' ?  this.getQueryPrescriptionImg(this.data.config['video']()) :  this.getQueryPrescriptionImg(this.data.config['tuwen']())\n    if(!this.data.savaPrescriptionImg) {\n      Taro.showToast({\n        title: '处方生成中，请稍后重试',\n        icon: 'none'\n      })\n      return false;\n    }\n    Taro.downloadFile({\n      url: this.data.savaPrescriptionImg,//图片地址\n      success: function (res) {\n        //图片保存到本地\n        Taro.saveImageToPhotosAlbum({\n          filePath: res.tempFilePath,\n          success: function (data) {\n            Taro.showToast({\n              title: '保存成功，请到相册查看',\n              icon: 'none'\n            })\n          },\n          fail: function (err) {\n            Taro.showToast({\n              title: err,\n              icon: 'none'\n            })\n          }\n        })\n      }\n    })\n  }\n};"},"convertDir/pages/inquiry/trtc/components/common/constants":{"js":"export const EVENT = {\n  LOCAL_JOIN: 'LOCAL_JOIN', // 本地进房成功\n  LOCAL_LEAVE: 'LOCAL_LEAVE', // 本地退房\n  REMOTE_USER_JOIN: 'REMOTE_USER_JOIN', // 远端用户进房\n  REMOTE_USER_LEAVE: 'REMOTE_USER_LEAVE', // 远端用户退房\n  REMOTE_VIDEO_ADD: 'REMOTE_VIDEO_ADD', // 远端视频流添加事件，当远端用户取消发布音频流后会收到该通知\n  REMOTE_VIDEO_REMOVE: 'REMOTE_VIDEO_REMOVE', // 远端视频流移出事件，当远端用户取消发布音频流后会收到该通知\n  REMOTE_AUDIO_ADD: 'REMOTE_AUDIO_ADD', // 远端音频流添加事件，当远端用户取消发布音频流后会收到该通知\n  REMOTE_AUDIO_REMOVE: 'REMOTE_AUDIO_REMOVE', // 远端音频流移除事件，当远端用户取消发布音频流后会收到该通知\n  REMOTE_STATE_UPDATE: 'REMOTE_STATE_UPDATE', // 远端用户播放状态变更\n  LOCAL_NET_STATE_UPDATE: 'LOCAL_NET_STATE_UPDATE', // 本地推流网络状态变更\n  REMOTE_NET_STATE_UPDATE: 'REMOTE_NET_STATE_UPDATE', // 远端用户网络状态变更\n  LOCAL_AUDIO_VOLUME_UPDATE: 'LOCAL_AUDIO_VOLUME_UPDATE', // 本地音量变更\n  REMOTE_AUDIO_VOLUME_UPDATE: 'REMOTE_AUDIO_VOLUME_UPDATE', // 远端用户音量变更\n  VIDEO_FULLSCREEN_UPDATE: 'VIDEO_FULLSCREEN_UPDATE', // 调用 player requestFullScreen 或者 exitFullScreen 后触发\n  BGM_PLAY_START: 'BGM_PLAY_START', // 调用 LivePusherContext.playBGM(Object object)\n  BGM_PLAY_FAIL: 'BGM_PLAY_FAIL', //\n  BGM_PLAY_PROGRESS: 'BGM_PLAY_PROGRESS', // bgm 播放时间戳变更\n  BGM_PLAY_COMPLETE: 'BGM_PLAY_COMPLETE', // bgm 播放结束 或者 调用 LivePusherContext.stopBGM() ?\n  ERROR: 'ERROR', // pusher 出现错误\n  IM_READY: 'IM_READY', // IM SDK 可用\n  IM_MESSAGE_RECEIVED: 'IM_MESSAGE_RECEIVED', // 收到IM 消息\n  IM_NOT_READY: 'IM_NOT_READY', // IM SDK 不可用\n  IM_KICKED_OUT: 'IM_KICKED_OUT', // IM SDK 下线\n  IM_ERROR: 'IM_ERROR', // IM SDK 下线\n}\n\nexport const DEFAULT_COMPONENT_CONFIG = {\n  sdkAppID: '',\n  userID: '',\n  userSig: '',\n  template: '',\n  debugMode: false, // 是否开启调试模式\n  enableIM: false, // 是否开启 IM\n}\n\nexport const DEFAULT_PUSHER_CONFIG = {\n  url: '',\n  mode: 'RTC', // RTC：实时通话（trtc sdk） live：直播模式（liteav sdk）\n  autopush: false, // 自动推送\n  enableCamera: false, // 是否开启摄像头\n  enableMic: false, // 是否开启麦克风\n  enableAgc: false, // 是否开启音频自动增益\n  enableAns: false, // 是否开启音频噪声抑制\n  enableEarMonitor: false, // 是否开启耳返（目前只在iOS平台有效）\n  enableAutoFocus: true, // 是否自动对焦\n  enableZoom: false, // 是否支持调整焦距\n  minBitrate: 600, // 最小码率\n  maxBitrate: 900, // 最大码率\n  videoWidth: 360, // 视频宽（若设置了视频宽高就会忽略aspect）\n  videoHeight: 640, // 视频高（若设置了视频宽高就会忽略aspect）\n  beautyLevel: 0, // 美颜，取值范围 0-9 ，0 表示关闭\n  whitenessLevel: 0, // 美白，取值范围 0-9 ，0 表示关闭\n  videoOrientation: 'vertical', // vertical horizontal\n  videoAspect: '9:16', // 宽高比，可选值有 3:4,9:16\n  frontCamera: 'front', // 前置或后置摄像头，可选值：front，back\n  enableRemoteMirror: false, // 设置推流画面是否镜像，产生的效果会表现在 live-player\n  localMirror: 'auto', // auto:前置摄像头镜像，后置摄像头不镜像（系统相机的表现）enable:前置摄像头和后置摄像头都镜像 disable: 前置摄像头和后置摄像头都不镜像\n  enableBackgroundMute: false, // 进入后台时是否静音\n  audioQuality: 'high', // 高音质(48KHz)或低音质(16KHz)，可选值：high，low\n  audioVolumeType: 'voicecall', // 声音类型 可选值： media: 媒体音量，voicecall: 通话音量\n  audioReverbType: 0, // 音频混响类型 0: 关闭 1: KTV 2: 小房间 3:大会堂 4:低沉 5:洪亮 6:金属声 7:磁性\n  // waitingImage: 'https://web-player-1252463788.cos.ap-shanghai.myqcloud.com/demo/1px.png', // 当微信切到后台时的垫片图片 trtc暂不支持\n  waitingImage: 'https://mc.qcloudimg.com/static/img/daeed8616ac5df256c0591c22a65c4d3/pause_publish.jpg', // 当微信切到后台时的垫片图片 trtc暂不支持\n  waitingImageHash: '',\n  beautyStyle: 'smooth', // 美颜类型，取值有：smooth: 光滑 、nature: 自然\n  filter: '', // standard: 标准 pink: 粉嫩 nostalgia: 怀旧 blues: 蓝调 romantic: 浪漫  cool: 清凉 fresher: 清新 solor: 日系 aestheticism: 唯美 whitening:美白 cerisered: 樱红\n}\n\nexport const DEFAULT_PLAYER_CONFIG = {\n  src: '',\n  mode: 'RTC',\n  autoplay: true, // 7.0.9 必须设置为true，否则 Android 有概率调用play()失败\n  muteAudio: true, // 默认不拉取音频，需要手动订阅，如果要快速播放，需要设置false\n  muteVideo: true, // 默认不拉取视频，需要手动订阅，如果要快速播放，需要设置false\n  orientation: 'vertical', // 画面方向 vertical horizontal\n  objectFit: 'fillCrop', // 填充模式，可选值有 contain，fillCrop\n  enableBackgroundMute: false, // 进入后台时是否静音（已废弃，默认退台静音）\n  minCache: 1, // 最小缓冲区，单位s（RTC 模式推荐 0.2s）\n  maxCache: 2, // 最大缓冲区，单位s（RTC 模式推荐 0.8s）\n  soundMode: 'speaker', // 声音输出方式 ear speaker\n  enableRecvMessage: 'false', // 是否接收SEI消息\n  autoPauseIfNavigate: true, // 当跳转到其它小程序页面时，是否自动暂停本页面的实时音视频播放\n  autoPauseIfOpenNative: true, // 当跳转到其它微信原生页面时，是否自动暂停本页面的实时音视频播放\n}\n"},"convertDir/pages/inquiry/trtc/components/model/stream":{"js":"// 一个stream 对应一个 player\nimport { DEFAULT_PLAYER_CONFIG } from '../common/constants.js'\n\nclass Stream {\n  constructor(options) {\n    Object.assign(this, DEFAULT_PLAYER_CONFIG, {\n      userID: '', // 该stream 关联的userID\n      streamType: '', // stream 类型 [main small] aux\n      streamID: '', // userID + '_' + streamType\n      isVisible: true, // 手Q初始化时不能隐藏 puser和player 否则黑屏。iOS 微信初始化时不能隐藏，否则同层渲染失败，player会置顶\n      hasVideo: false,\n      hasAudio: false,\n      volume: 0, // 音量大小 0～100\n      playerContext: undefined, // playerContext 依赖component context来获取，目前只能在渲染后获取\n    }, options)\n  }\n  setProperty(options) {\n    Object.assign(this, options)\n  }\n  reset() {\n    if (this.playerContext) {\n      this.playerContext.stop()\n      this.playerContext = undefined\n    }\n    Object.assign(this, DEFAULT_PLAYER_CONFIG, {\n      userID: '', // 该stream 关联的userID\n      streamType: '', // stream 类型 [main small] aux\n      streamID: '',\n      isVisible: true,\n      hasVideo: false,\n      hasAudio: false,\n      volume: 0, // 音量大小 0～100\n      playerContext: undefined,\n    })\n  }\n}\n\nexport default Stream\n"},"convertDir/pages/inquiry/trtc/components/model/pusher":{"js":"import { DEFAULT_PUSHER_CONFIG } from '../common/constants.js'\n\nclass Pusher {\n  constructor(options) {\n    Object.assign(this, DEFAULT_PUSHER_CONFIG, {\n      isVisible: true, // 手Q初始化时不能隐藏 puser和player 否则黑屏\n    }, options)\n  }\n  /**\n   * 通过Taro.createLivePusherContext 获取<live-pusher> context\n   * @param {Object} context 组件上下文\n   * @returns {Object} livepusher context\n   */\n  getPusherContext(context) {\n    if (!this.pusherContext) {\n      this.pusherContext = Taro.createLivePusherContext(context)\n    }\n    return this.pusherContext\n  }\n  reset() {\n    console.log('Pusher reset', this.pusherContext)\n    if (this.pusherContext) {\n      // 2020/09/23 安卓端华为小米机型发现，安卓原生返回键，退房失败。\n      // 会触发detached生命周期，调用到该方法，puhserContext.stop()调用不成功，但是清空url后，客户端调用的退房方法就会不生效\n      // 这里做出改动，只有stop调用成功后，才会清空url，保持组件卸载流程的完整性，调用不成功的情况将由微信客户端兜底清除\n      this.pusherContext.stop({\n        success: () => {\n          console.log('Pusher pusherContext.stop()')\n          Object.assign(this, DEFAULT_PUSHER_CONFIG, {\n            isVisible: true,\n          })\n        },\n      })\n      this.pusherContext = null\n    }\n  }\n}\n\nexport default Pusher\n"},"convertDir/pages/inquiry/trtc/components/model/user":{"js":"class User {\n  constructor(options) {\n    Object.assign(this, {\n      userID: '',\n      // hasMainStream: false, // 触发 1034 且stream type 为 main 即为true\n      // hasAuxStream: false, // 触发 1034 且stream type 为 aux 即为true\n      // hasSmallStream: false, // 触发 1034 且stream type 为 small 即为true\n      streams: {\n        // main: mainStream\n        // aux: auxStream\n      }, // 有0~2个Stream， 进房没有推流，main aux， small 特殊处理，small 和 main 同时只播放一路\n      // stream 是用于渲染 live-player 的数据源\n    }, options)\n  }\n}\n\nexport default User\n"},"convertDir/pages/inquiry/trtc/components/template/1v1/1v1":{"wxml":"\n  <view class=\"1v1-auto-container\">\n    <template name=\"1v1\">\n      <view class=\"template-1v1\">  \n        <view v-for=\"(item, streamID) in streamList\" :key=\"streamID\" v-if=\"item.src && (item.hasVideo || item.hasAudio)\" :class=\"[view-container,player-container,(item.isVisible?'':'none')]\">\n          <live-player class=\"player\" :id=\"item.streamID\" :data-userid=\"item.userID\" :data-streamid=\"item.streamID\" :data-streamtype=\"item.streamType\" :src=\"item.src\" mode=\"RTC\" :autoplay=\"item.autoplay\" :mute-audio=\"item.muteAudio\" :mute-video=\"item.muteVideo\" :orientation=\"item.orientation\" :object-fit=\"item.objectFit\" :background-mute=\"item.enableBackgroundMute\" :min-cache=\"item.minCache\" :max-cache=\"item.maxCache\" :sound-mode=\"item.soundMode\" :enable-recv-message=\"item.enableRecvMessage\" :auto-pause-if-navigate=\"item.autoPauseIfNavigate\" :auto-pause-if-open-native=\"item.autoPauseIfOpenNative\" :debug=\"debug\" bindstatechange=\"_playerStateChange\" bindfullscreenchange=\"_playerFullscreenChange\" bindnetstatus=\"_playerNetStatus\" bindaudiovolumenotify=\"_playerAudioVolumeNotify\"></live-player>\n        </view>\n        <view :class=\"[view-container,pusher-container,(pusher.isVisible?'':'none'),(streamList.length===0? 'fullscreen':'')]\"> \n          <live-pusher class=\"pusher\" :url=\"pusher.url\" :mode=\"pusher.mode\" :autopush=\"pusher.autopush\" :enable-camera=\"pusher.enableCamera\" :enable-mic=\"pusher.enableMic\" :muted=\"!pusher.enableMic\" :enable-agc=\"pusher.enableAgc\" :enable-ans=\"pusher.enableAns\" :enable-ear-monitor=\"pusher.enableEarMonitor\" :auto-focus=\"pusher.enableAutoFocus\" :zoom=\"pusher.enableZoom\" :min-bitrate=\"pusher.minBitrate\" :max-bitrate=\"pusher.maxBitrate\" :video-width=\"pusher.videoWidth\" :video-height=\"pusher.videoHeight\" :beauty=\"pusher.beautyLevel\" :whiteness=\"pusher.whitenessLevel\" :orientation=\"pusher.videoOrientation\" :aspect=\"pusher.videoAspect\" :device-position=\"pusher.frontCamera\" :remote-mirror=\"pusher.enableRemoteMirror\" :local-mirror=\"pusher.localMirror\" :background-mute=\"pusher.enableBackgroundMute\" :audio-quality=\"pusher.audioQuality\" :audio-volume-type=\"pusher.audioVolumeType\" :audio-reverb-type=\"pusher.audioReverbType\" :waiting-image=\"pusher.waitingImage\" :debug=\"debug\" bindstatechange=\"_pusherStateChangeHandler\" bindnetstatus=\"_pusherNetStatusHandler\" binderror=\"_pusherErrorHandler\" bindbgmstart=\"_pusherBGMStartHandler\" bindbgmprogress=\"_pusherBGMProgressHandler\" bindbgmcomplete=\"_pusherBGMCompleteHandler\" bindaudiovolumenotify=\"_pusherAudioVolumeNotify\"></live-pusher>\n          <view class=\"loading\" v-if=\"streamList.length === 0 && !isConnectioned\"> \n            <view class=\"loading-img\">\n              <image src=\"./static/loading.png\" class=\"rotate-img\"></image>\n            </view>\n            <view class=\"loading-text\">等待医生接诊中...\n            </view>\n          </view>\n        </view>\n        <view class=\"bottom-btns\">  \n          <view class=\"btn-hangup\" bindtap=\"_hangUp\">\n            <image class=\"btn-image\" src=\"./static/hangup.png\"></image>\n          </view>\n          <view class=\"btn-timer\" v-if=\" isConnectioned \">\n            <view>{{ formatTimer }}\n            </view>\n          </view>\n          <view class=\"btn-normal\" bindtap=\"switchCamera\">\n            <image class=\"btn-image\" src=\"./static/switch.png\"></image>\n          </view>\n        </view>\n      </view>\n    </template>\n  </view>","wxss":"/* 1v1 视频电话模式 */\r\n.template-1v1{\r\n  width: 100vw;\r\n  height: 100vh;\r\n  position: relative;\r\n}\r\n.template-1v1 .pusher-container{\r\n  width: 240rpx;\r\n  height: 320rpx;\r\n  position: absolute;\r\n  right: 20rpx;\r\n  top: 160rpx;\r\n  z-index: 2;\r\n}\r\n\r\n.template-1v1 .pusher-container.fullscreen{\r\n  width: 100vw;\r\n  height: 100vh;\r\n  top: 0;\r\n  right: 0;\r\n}\r\n\r\n.template-1v1 .loading {\r\n  position: absolute;\r\n  top: 40vh;\r\n  left: 50vw;\r\n  transform: translate(-50%, 0);\r\n  width: 300rpx;\r\n  height: 250rpx;\r\n  border-radius: 12rpx;\r\n  background: rgba(0,0,0,0.6);\r\n  color: white;\r\n  padding: 40rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.template-1v1 .loading-img {\r\n  height: 200rpx;\r\n  display:flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  animation: rotate 2s linear infinite;\r\n}\r\n.template-1v1 .rotate-img {\r\n  width:160rpx;\r\n  height: 160rpx;\r\n}\r\n.template-1v1 .loading-text {\r\n  width: 100%;\r\n  padding-top: 40rpx;\r\n  text-align: center;\r\n}\r\n@keyframes rotate {\r\n  0%{ transform: rotate(0deg);}\r\n  50%{ transform: rotate(180deg);}\r\n  100%{ transform: rotate(360deg);}\r\n}\r\n.template-1v1 .player-container:nth-child(1){\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n\r\n.template-1v1 .handle-btns {\r\n  position: absolute;\r\n  z-index: 3;\r\n  bottom: 15vh;\r\n  width: 100vw;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n}\r\n\r\n.template-1v1 .bottom-btns {\r\n  position: absolute;\r\n  z-index: 3;\r\n  bottom: 7vh;\r\n  width: 100vw;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n}\r\n\r\n/* .template-1v1 image {\r\n  width: 4vh;\r\n  height: 4vh;\r\n} */\r\n\r\n.template-1v1 .btn-normal {\r\n  width: 8vh;\r\n  height: 8vh;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  background: white;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 50%;\r\n}\r\n.template-1v1 .btn-hangup .btn-image,\r\n.template-1v1 .btn-normal .btn-image{\r\n  width: 4vh;\r\n  height: 4vh;\r\n}\r\n.template-1v1 .btn-hangup  {\r\n  width: 8vh;\r\n  height: 8vh;\r\n  background: #f75c45;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 50%;\r\n}\r\n\r\n.template-1v1 .btn-timer {\r\n  position: relative;\r\n  top: -30px;\r\n  background: none;\r\n  border: none;\r\n  color: #fff;\r\n}"},"convertDir/pages/inquiry/trtc/components/trtc-room":{"json":{},"wxss":"\r\n@import \"./template/1v1/1v1.wxss\";\r\n.pusher {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.player {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.debug-info{\r\n  max-width: 100vw;\r\n  max-height: 90vh;\r\n  box-sizing: border-box;\r\n  overflow-y: scroll;\r\n  position: absolute;\r\n  z-index: 9999;\r\n  background-color: rgba(0, 0, 0, .5);\r\n  color: #fff;\r\n  bottom: 20rpx;\r\n  left: 0;\r\n  padding: 10rpx;\r\n  font-size: 12px;\r\n}\r\n.debug-info-btn .debug-btn,\r\n.debug-info .debug-btn{\r\n  padding: 0 8px;\r\n  min-height: 18px;\r\n  width: auto;\r\n  font-size: 12px;\r\n  line-height: 18px;\r\n  display: inline-block;\r\n  color: #06ae56;\r\n  background-color: #f2f2f2;\r\n}\r\n.debug-info .debug-btn.false{\r\n  color: rgb(114, 114, 114);\r\n}\r\n.debug-info-btn .debug-btn,\r\n.debug-info .button-hover {\r\n  background-color: rgb(219, 219, 219);\r\n}\r\n.debug-info .close-btn{\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  padding: 5px 10px;\r\n}\r\n.debug-info .text.true{\r\n  color: #1fff8b;\r\n}\r\n.debug-info .text.false{\r\n  color: #ff2e2e;\r\n}\r\n.debug-info-btn{\r\n  position: absolute;\r\n  z-index: 9998;\r\n  bottom: 160rpx;\r\n  left: 0;\r\n}\r\n\r\n.trtc-room-container .btn {\r\n  display: inline-block;\r\n  width: auto;\r\n  height: 60rpx;\r\n  min-height: 60rpx;\r\n  line-height: 60rpx;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n  padding: 0 10rpx;\r\n  color: #006eff;\r\n  background-color: #f2f2f2;\r\n  margin: 0 16rpx;\r\n}\r\n.trtc-room-container .btn.active{\r\n  color: #f2f2f2;\r\n  background-color: #006eff;\r\n}\r\n.trtc-room-container .btn-hover{\r\n  background-color: #d1d1d1;\r\n}\r\n\r\n.im-panel{\r\n  position: absolute;\r\n  z-index: 9;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 90vw;\r\n  height: 320rpx;\r\n  top: 50vh;\r\n  left: 50vw;\r\n  transform: translate(-50%, -50%);\r\n  padding: 20rpx 0;\r\n  border-radius: 10rpx;\r\n  font-size: 12px;\r\n  /* bottom: 25vh; */\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n.im-panel .close-btn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: -3px;\r\n  padding: 5px 10px;\r\n  z-index: 99;\r\n}\r\n.message-panel-body{\r\n  width: 100%;\r\n  height: 80%;\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n}\r\n.message-scroll-container{\r\n  height: 100%;\r\n  /* box-sizing: border-box;\r\n  padding: 0 20rpx; */\r\n}\r\n.message-list{\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  padding: 0 20rpx;\r\n  /* display: flex;\r\n  flex-direction: column; */\r\n}\r\n.message-item{\r\n  width: 100%;\r\n  /* height: 36rpx; */\r\n  /* padding: 0 20rpx; */\r\n  padding-bottom: 10rpx;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.message-item .user-name{\r\n  width: 20%;\r\n  color: #2483ff;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n.user-name.mine{\r\n  color: #ff7424;\r\n}\r\n.message-item .separate{\r\n  padding:0 5px;\r\n  color: #fff;\r\n}\r\n.message-item .message-content{\r\n  word-wrap:break-word; \r\n  word-break:break-all;\r\n  padding-left: 20rpx;\r\n  position: relative;\r\n  max-width: 80%; \r\n  box-sizing: border-box;\r\n}\r\n.message-content::after{\r\n  content: ':';\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n}\r\n.message-panel-bottom{\r\n  width: 100%;\r\n  height: 50rpx;\r\n  box-sizing: border-box;\r\n  padding: 0 20rpx 0;\r\n  margin-top: 20rpx;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.message-input-container {\r\n  flex-grow: 1;\r\n}\r\n.message-input-container .message-input {\r\n  font-size: 12px;\r\n  padding-left: 20rpx;\r\n  border-radius: 10rpx;\r\n  height: 100%;\r\n  background-color: rgba(0,0,0,0.1);\r\n}\r\n.message-send-btn .btn{\r\n  margin-right: 0;\r\n  height: 50rpx;\r\n  min-height: 50rpx;\r\n  line-height: 50rpx;\r\n}\r\n\r\n.volume-animation{\r\n  position: absolute;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  left: 0;\r\n  top: initial;\r\n  bottom: 20rpx;\r\n  z-index: 9;\r\n  /* transform: translate(-50%, 0); */\r\n}\r\n.volume-animation .image{\r\n  position: absolute;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n}\r\n.volume-animation .audio-active{\r\n  animation: viewlinear 1.5s linear infinite;\r\n} \r\n@keyframes viewlinear {\r\n  \r\n  /** 第一种写法**/\r\n  0% {\r\n    height: 0;\r\n  }\r\n  100% {\r\n    height: 100%;\r\n  }\r\n}\r\n\r\n.none,\r\n.view-container.none,\r\n.template-grid .view-container.none,\r\n.template-1v1 .view-container.none{\r\n  display: none !important;\r\n}\r\n","wxml":"\n  <view class=\"trtc-room-auto-container\"> \n    <import></import>\n    <view :class=\"[trtc-room-container,(isFullscreenDevice?'fullscreen-device-fix':'')]\">  \n      <block>\n        <template is=\"1v1\" :data=\" pusher, streamList, debug, enableIM, isConnectioned, formatTimer \"></template>\n      </block>\n      <view :class=\"[debug-info-btn,(debugMode && !debugPanel?'':'none')]\">\n        <button class=\"debug-btn\" bindtap=\"_debugTogglePanel\" hover-class=\"button-hover\">Debug\n        </button>\n      </view>\n      <view :class=\"[debug-info,(debugMode && debugPanel?'':'none')]\">             \n        <view bindtap=\"_debugTogglePanel\" class=\"close-btn\">X\n        </view>\n        <view>appVersion: {{appVersion}}\n        </view>\n        <view>libVersion: {{libVersion}}\n        </view>\n        <view>template: {{template}}\n        </view>\n        <view>debug: \n          <button :class=\"[debug-btn,(debug?'':'false')]\" bindtap=\"_debugToggleVideoDebug\" hover-class=\"button-hover\">{{debug}}\n          </button>\n        </view>\n        <view>userID: {{pusher.userID}}\n        </view>\n        <view>roomID: {{pusher.roomID}}\n        </view>\n        <view>mic: \n          <button :class=\"[debug-btn,(pusher.enableMic?'':'false')]\" bindtap=\"_toggleAudio\" hover-class=\"button-hover\">{{pusher.enableMic}}\n          </button>\n        </view>\n        <view>switch camera: \n          <button class=\"debug-btn\" bindtap=\"switchCamera\" hover-class=\"button-hover\">{{cameraPosition||pusher.frontCamera}}\n          </button>\n        </view>\n        <view>Room:\n        \n          <button class=\"debug-btn\" bindtap=\"_debugEnterRoom\" hover-class=\"button-hover\">Enter\n          </button>\n          <button class=\"debug-btn\" bindtap=\"_debugExitRoom\" hover-class=\"button-hover\">Exit\n          </button>\n          <button class=\"debug-btn\" bindtap=\"_debugGoBack\" hover-class=\"button-hover\">Go back\n          </button>\n        </view>\n        <view>user count: {{userList.length}}\n      \n          <button class=\"debug-btn\" bindtap=\"_toggleAudioVolumeType\" hover-class=\"button-hover\">切换音视频\n          </button>\n        </view>\n        <view v-for=\"(item, userID) in userList\" :key=\"userID\">{{item.userID}}|\n      mainV:|\n      mainA:|\n      auxV:\n          <span :class=\"[text,(item.hasMainVideo? 'true' : 'false' )]\">{{item.hasMainVideo||false}}\n          </span>\n          <span :class=\"[text,(item.hasMainAudio? 'true' : 'false' )]\">{{item.hasMainAudio||false}}\n          </span>\n          <span :class=\"[text,(item.hasAuxVideo? 'true' : 'false' )]\">{{item.hasAuxVideo||false}}\n          </span>\n        </view>\n        <view>stream count: {{streamList.length}}\n        </view>\n        <view v-for=\"(item, streamID) in streamList\" :key=\"streamID\">{{item.userID}}|{{item.streamType}}|\n      SubV:|\n      SubA:\n          <button :class=\"[debug-btn,(!item.muteVideo?'':'false')]\" bindtap=\"_debugToggleRemoteVideo\" hover-class=\"button-hover\" :data-user-i-d=\"item.userID\" :data-stream-type=\"item.streamType\">{{!item.muteVideo}}\n          </button>\n          <button :class=\"[debug-btn,(!item.muteAudio?'':'false')]\" bindtap=\"_debugToggleRemoteAudio\" hover-class=\"button-hover\" :data-user-i-d=\"item.userID\" :data-stream-type=\"item.streamType\">{{!item.muteAudio}}\n          </button>\n        </view>\n      </view>\n    </view>\n  </view>","js":"import UserController from 'controller/user-controller.js'\nimport Pusher from 'model/pusher.js'\nimport { EVENT, DEFAULT_COMPONENT_CONFIG } from 'common/constants.js'\nimport Event from 'utils/event.js'\nimport * as ENV from 'utils/environment.js'\nimport { ajax2 } from '../../../../utils/util';\n\nconst TAG_NAME = 'TRTC-ROOM'\n\nexport default {\n  onShow: function() {\n    // 组件所在的页面被展示时执行\n    console.log(TAG_NAME, 'show status:', this.status)\n    if (this.status.isPending) {\n      // 经历了 5000 挂起事件\n      this.status.isPending = false\n      // 修复iOS 最小化触发5000事件后，音频推流失败的问题\n      // if (ENV.IS_IOS && this.data.pusher.enableMic) {\n      //   this.unpublishLocalAudio().then(()=>{\n      //     this.publishLocalAudio()\n      //   })\n      // }\n      // 经历了 5001 浮窗关闭事件，小程序底层会自动退房，恢复小程序时组件需要重新进房\n      // 重新进房\n      this.enterRoom({ roomID: this.data.config.roomID }).then(()=>{\n        // 进房后开始推送视频或音频\n        // setTimeout(()=>{\n        //   this.publishLocalVideo()\n        //   this.publishLocalAudio()\n        // }, 2000)\n      })\n    } else if (ENV.IS_ANDROID && this.status.pageLife === 'hide' && this.status.isOnHideAddStream && this.data.streamList.length > 0) {\n      // 微信没有提供明确的最小化事件，onHide事件，不一定是最小化\n      // 获取所有的player 清空 src 重新赋值 验证无效\n      // 清空 visibleStreamList 重新赋值， 验证无效\n      // 退房重新进房，有效但是成本比较高\n\n      // 将标记了 isOnHideAdd 的 stream 的 palyer 销毁并重新渲染\n      const streamList = this.data.streamList\n      let tempStreamList = []\n      // 过滤 onHide 时新增的 stream\n      for (let i = 0; i < streamList.length; i++) {\n        if (streamList[i].isOnHideAdd && streamList[i].playerContext) {\n          const stream = streamList[i]\n          tempStreamList.push(stream)\n          stream.playerContext = undefined\n          streamList.splice(i, 1)\n        }\n      }\n      // 设置渲染，销毁onHide 时新增的 player\n      this._setList({\n        streamList: streamList,\n      }).then(() => {\n        for (let i = 0; i < tempStreamList.length; i++) {\n          streamList.push(tempStreamList[i])\n        }\n        // 设置渲染，重新创建 onHide 时新增的 player\n        // setTimeout(()=>{\n        this._setList({\n          streamList: streamList,\n        }).then(() => {\n          for (let i = 0; i < tempStreamList.length; i++) {\n            tempStreamList[i] = Taro.createLivePlayerContext(tempStreamList[i].streamID, this)\n          }\n          tempStreamList = []\n        })\n        // }, 500)\n      })\n      this.status.isOnHideAddStream = false\n    }\n    this.status.pageLife = 'show'\n  },\n\n  onHide: function() {\n    // 组件所在的页面被隐藏时执行\n    console.log(TAG_NAME, 'hide')\n    this.status.pageLife = 'hide'\n  },\n\n  onResize: function(size) {\n    // 组件所在的页面尺寸变化时执行\n    console.log(TAG_NAME, 'resize', size)\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    // 必要的初始化参数\n    config: {\n      type: Object,\n\n      default: {\n        sdkAppID: '',\n        userID: '',\n        userSig: '',\n        template: '',\n        debugMode: false, // 是否开启调试模式\n      }\n    },\n  },\n\n  data: function() {\n    return {\n      pusher: null,\n      debugPanel: false, // 是否打开组件调试面板\n      debug: false, // 是否打开player pusher 的调试信息\n      streamList: [], // 用于渲染player列表,存储stram\n      visibleStreamList: [], // 有音频或者视频的StreamList\n      userList: [], // 扁平化的数据用来返回给用户\n      template: '', // 不能设置默认值，当默认值和传入组件的值不一致时，iOS渲染失败\n      cameraPosition: '', // 摄像头位置，用于debug\n      panelName: '', // 控制面板名称，包括 setting-panel  memberlist-panel\n      localVolume: 0,\n      remoteVolumeList: [],\n      appVersion: ENV.APP_VERSION,\n      libVersion: ENV.LIB_VERSION,\n      isFullscreenDevice: ENV.IS_FULLSCREEN_DEVICE,\n      MICVolume: 50,\n      BGMVolume: 50,\n      BGMProgress: 0,\n\n      beautyStyle: 'smooth',\n      beautyStyleArray: [\n        { value: 'smooth', label: '光滑', checked: true },\n        { value: 'nature', label: '自然', checked: false },\n        { value: 'close', label: '关闭', checked: false },\n      ],\n      filterIndex: 0,\n      filterArray: [\n        { value: 'standard', label: '标准' },\n        { value: 'pink', label: '粉嫩' },\n        { value: 'nostalgia', label: '怀旧' },\n        { value: 'blues', label: '蓝调' },\n        { value: 'romantic', label: '浪漫' },\n        { value: 'cool', label: '清凉' },\n        { value: 'fresher', label: '清新' },\n        { value: 'solor', label: '日系' },\n        { value: 'aestheticism', label: '唯美' },\n        { value: 'whitening', label: '美白' },\n        { value: 'cerisered', label: '樱红' },\n      ],\n      audioReverbType: 0,\n      audioReverbTypeArray: ['关闭', 'KTV', '小房间', '大会堂', '低沉', '洪亮', '金属声', '磁性'],\n      canIHangUp: true, // 接通后10s内不能挂断视频\n      isConnectioned: false, // 是否接通(根据远端用户是否进入过房间来判断)\n      isRemotIn: false, // 远端用户是否在房间 这个和 isConnectioned 组合可以判断是否为远端用户主动挂断\n      isClickBtnToHangeUp: false, // 是否为点击按钮挂断 为了区分按钮点击挂断和[ios 右滑 & 安卓手势 & 安卓物理返回]挂断, 处理方式不同\n      timer: 0, // 从 0s 开始计时 \n      formatTimer: '00:00:00',\n      timerInstance: null\n    };\n  },\n\n  /**\n   * 生命周期方法\n   */\n  lifetimes: {\n    created: function() {\n      // 在组件实例刚刚被创建时执行\n      console.log(TAG_NAME, 'created', ENV)\n    },\n    attached: function() {\n      // 在组件实例进入页面节点树时执行\n      console.log(TAG_NAME, 'attached')\n      this._init()\n    },\n    ready: function() {\n      // 在组件在视图层布局完成后执行\n      console.log(TAG_NAME, 'ready')\n    },\n    detached: function() {\n      // 在组件实例被从页面节点树移除时执行\n      console.log(TAG_NAME, 'detached')\n      this.data.timerInstance && clearInterval(this.data.timerInstance);\n\n      // 如果医生还未接诊 也就是连接还未建立 此时离开房间会调取消问诊接口\n      console.log('detached', this.data.isConnectioned, this.data.isRemotIn);\n      if (!this.data.isConnectioned) {\n        this.cancleInquery(); // 取消问诊接口\n        Taro.showToast({\n          title: '问诊已放弃',\n          icon: 'none'\n        })\n        return false;\n      } else if (this.data.isRemotIn && !this.data.isClickBtnToHangeUp) {\n        // 如果视频接通了 而且远端用户在房间 说明不是远端挂断 然后又是非挂断按钮点击的挂断 此时调用该跳转方法 \n        // 此跳转方法会在返回信息填写页再调用\n        // to 问诊详情\n        const { inquiryReportGuid } =  Taro.getStorageSync('inqueryInfo') || {};\n\n        this.exitRoom();\n        Taro.navigateTo({\n          url: '/pages/inquiry/prescriptionDetails/prescriptionDetails?inquiryType=video&inquiryId=' + inquiryReportGuid,\n        })\n      }\n    },\n    error: function(error) {\n      // 每当组件方法抛出错误时执行\n      console.log(TAG_NAME, 'error', error)\n    },\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    /**\n     * 初始化各项参数和用户控制模块，在组件实例触发 attached 时调用，此时不建议对View进行变更渲染（调用setData方法）\n     */\n    _init() {\n      console.log(TAG_NAME, '_init')\n      this.userController = new UserController(this)\n      this._emitter = new Event()\n      this.EVENT = EVENT\n      this._initStatus()\n      this._bindEvent()\n      this._keepScreenOn()\n      console.log(TAG_NAME, '_init success component:', this)\n    },\n    _initStatus() {\n      this.status = {\n        isPush: false, // 推流状态\n        isPending: false, // 挂起状态，触发5000事件标记为true，onShow后标记为false\n        pageLife: '', // 页面生命周期 hide, show\n        isOnHideAddStream: false, // onHide后有新增Stream\n      }\n      this._lastTapTime = 0 // 点击时间戳 用于判断双击事件\n      this._beforeLastTapTime = 0 // 点击时间戳 用于判断双击事件\n      this._lastTapCoordinate = { x: 0, y: 0 }, // 点击时的坐标\n      this._isFullscreen = false // 是否进入全屏状态\n    },\n    /**\n     * 监听组件属性变更，外部变更组件属性时触发该监听\n     * @param {Object} data newVal，oldVal\n     */\n    _propertyObserver(data) {\n      console.log(TAG_NAME, '_propertyObserver', data, this.data.config)\n      if (data.name === 'config') {\n        const config = Object.assign({}, DEFAULT_COMPONENT_CONFIG, data.newVal)\n        console.log(TAG_NAME, '_propertyObserver config:', config)\n        // 由于 querystring 只支持 String 类型，做一个类型防御\n        if (typeof config.debugMode === 'string') {\n          config.debugMode = config.debugMode === 'true' ? true : false\n        }\n        \n        // 独立设置与pusher无关的配置\n        this.setData({\n          template: config.template,\n          debugMode: config.debugMode || false,\n          debug: config.debugMode || false,\n        })\n        this._setPusherConfig(config)\n      }\n    },\n\n    //  _______             __        __  __\n    //  |       \\           |  \\      |  \\|  \\\n    //  | $$$$$$$\\ __    __ | $$____  | $$ \\$$  _______\n    //  | $$__/ $$|  \\  |  \\| $$    \\ | $$|  \\ /       \\\n    //  | $$    $$| $$  | $$| $$$$$$$\\| $$| $$|  $$$$$$$\n    //  | $$$$$$$ | $$  | $$| $$  | $$| $$| $$| $$\n    //  | $$      | $$__/ $$| $$__/ $$| $$| $$| $$_____\n    //  | $$       \\$$    $$| $$    $$| $$| $$ \\$$     \\\n    //   \\$$        \\$$$$$$  \\$$$$$$$  \\$$ \\$$  \\$$$$$$$\n\n    /**\n     * 进房\n     * @param {Object} params 必传 roomID 取值范围 1 ~ 4294967295\n     * @returns {Promise}\n     */\n    enterRoom(params) {\n      return new Promise((resolve, reject) => {\n        console.log(TAG_NAME, 'enterRoom')\n        console.log(TAG_NAME, 'params', params)\n        console.log(TAG_NAME, 'config', this.data.config)\n        console.log(TAG_NAME, 'pusher', this.data.pusher)\n        // 1. 补齐进房参数，校验必要参数是否齐全\n        if (params) {\n          Object.assign(this.data.pusher, params)\n          Object.assign(this.data.config, params)\n        }\n        if (!this._checkParam(this.data.config)) {\n          reject(new Error('缺少必要参数'))\n          return\n        }\n        // 2. 根据参数拼接 push url，赋值给 live-pusher，\n        this._getPushUrl(this.data.config).then((pushUrl)=> {\n          console.log('pushUrlpushUrl',pushUrl)\n          this.data.pusher.url = pushUrl\n          this.setData({\n            pusher: this.data.pusher,\n          }, () => {\n            // 真正进房成功需要通过 1018 事件通知\n            console.log(TAG_NAME, 'enterRoom', this.data.pusher)\n            // view 渲染成功回调后，开始推流\n            this.data.pusher.getPusherContext().start()\n            this.status.isPush = true\n            resolve()\n          })\n        }).catch((res)=> {\n          // 进房失败需要通过 pusher state 事件通知，目前还没有准确的事件通知\n          console.error(TAG_NAME, 'enterRoom error', res)\n          reject(res)\n        })\n      })\n    },\n    /**\n     * 退房，停止推流和拉流，并重置数据\n     * @returns {Promise}\n     */\n    exitRoom() {\n      if (this.status.pageLife === 'hide') {\n        // 如果是退后台触发 onHide，不能调用 pusher API\n        console.warn(TAG_NAME, '小程序最小化时不能调用 exitRoom，如果不想听到远端声音，可以调用取消订阅，如果不想远端听到声音，可以调用取消发布')\n      }\n      return new Promise((resolve, reject) => {\n        console.log(TAG_NAME, 'exitRoom')\n        this.data.pusher.reset()\n        this.status.isPush = false\n        const result = this.userController.reset()\n        this.setData({\n          pusher: this.data.pusher,\n          userList: result.userList,\n          streamList: result.streamList\n        }, () => {\n          // 在销毁页面时调用exitRoom时，不会走到这里\n          resolve({ userList: this.data.userList, streamList: this.data.streamList })\n          console.log(TAG_NAME, 'exitRoom success', this.data.pusher, this.data.streamList, this.data.userList)\n          // 20200421 iOS 仍然没有1019事件通知退房，退房事件移动到 exitRoom 方法里，但不是后端通知的退房成功\n          this._emitter.emit(EVENT.LOCAL_LEAVE, { userID: this.data.pusher.userID })\n        })\n      })\n    },\n    /**\n     * 开启摄像头\n     * @returns {Promise}\n     */\n    publishLocalVideo() {\n      // 设置 pusher enableCamera\n      console.log(TAG_NAME, 'publishLocalVideo 开启摄像头')\n      return this._setPusherConfig({ enableCamera: true })\n    },\n    /**\n     * 关闭摄像头\n     * @returns {Promise}\n     */\n    unpublishLocalVideo() {\n      // 设置 pusher enableCamera\n      console.log(TAG_NAME, 'unpublshLocalVideo 关闭摄像头')\n      return this._setPusherConfig({ enableCamera: false })\n    },\n    /**\n     * 开启麦克风\n     * @returns {Promise}\n     */\n    publishLocalAudio() {\n      // 设置 pusher enableCamera\n      console.log(TAG_NAME, 'publishLocalAudio 开启麦克风')\n      return this._setPusherConfig({ enableMic: true })\n    },\n    /**\n     * 关闭麦克风\n     * @returns {Promise}\n     */\n    unpublishLocalAudio() {\n      // 设置 pusher enableCamera\n      console.log(TAG_NAME, 'unpublshLocalAudio 关闭麦克风')\n      return this._setPusherConfig({ enableMic: false })\n    },\n    /**\n     * 订阅远端视频 主流 小画面 辅流\n     * @param {Object} params {userID,streamType} streamType 传入 small 时修改对应的主流 url 的 _definitionType 参数为 small, stream.streamType 仍为 main\n     * @returns {Promise}\n     */\n    subscribeRemoteVideo(params) {\n      console.log(TAG_NAME, 'subscribeRemoteVideo', params)\n      // 设置指定 user streamType 的 muteVideo 为 false\n      const config = {\n        muteVideo: false,\n      }\n      // 本地数据结构里的 streamType 只支持 main 和 aux ，订阅 small 也是对 main 进行处理\n      const streamType = params.streamType === 'small' ? 'main' : params.streamType\n      const stream = this.userController.getStream({\n        userID: params.userID,\n        streamType: streamType,\n      })\n      stream.muteVideoPrev = false // 用于分页切换时保留player当前的订阅状态\n\n      if (params.streamType === 'small' || params.streamType === 'main') {\n        if (stream && stream.streamType === 'main') {\n          console.log(TAG_NAME, 'subscribeRemoteVideo switch small', stream.src)\n          if (params.streamType === 'small') {\n            config.src = stream.src.replace('main', 'small')\n            config._definitionType = 'small' // 用于设置面板的渲染\n          } else if (params.streamType === 'main') {\n            stream.src = stream.src.replace('small', 'main')\n            config._definitionType = 'main'\n          }\n          console.log(TAG_NAME, 'subscribeRemoteVideo', stream.src)\n        }\n      }\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: streamType,\n        config: config,\n      })\n    },\n    /**\n     * 取消订阅远端视频\n     * @param {Object} params {userID,streamType}\n     * @returns {Promise}\n     */\n    unsubscribeRemoteVideo(params) {\n      console.log(TAG_NAME, 'unsubscribeRemoteVideo', params)\n      const stream = this.userController.getStream({\n        userID: params.userID,\n        streamType: params.streamType,\n      })\n      stream.muteVideoPrev = true // 用于分页切换时保留player当前的订阅状态\n      // 设置指定 user streamType 的 muteVideo 为 true\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: params.streamType,\n        config: {\n          muteVideo: true,\n        },\n      })\n    },\n    /**\n     * 订阅远端音频\n     * @param {Object} params userID 用户ID\n     * @returns {Promise}\n     */\n    subscribeRemoteAudio(params) {\n      console.log(TAG_NAME, 'subscribeRemoteAudio', params)\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: 'main',\n        config: {\n          muteAudio: false,\n        },\n      })\n    },\n    /**\n     * 取消订阅远端音频\n     * @param {Object} params userID 用户ID\n     * @returns {Promise}\n     */\n    unsubscribeRemoteAudio(params) {\n      console.log(TAG_NAME, 'unsubscribeRemoteAudio', params)\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: 'main',\n        config: {\n          muteAudio: true,\n        },\n      })\n    },\n    on(eventCode, handler, context) {\n      this._emitter.on(eventCode, handler, context)\n    },\n    off(eventCode, handler) {\n      this._emitter.off(eventCode, handler)\n    },\n    getRemoteUserList() {\n      return this.data.userList\n    },\n    /**\n     * 切换前后摄像头\n     */\n    switchCamera() {\n      if (!this.data.cameraPosition) {\n        // this.data.pusher.cameraPosition 是初始值，不支持动态设置\n        this.data.cameraPosition = this.data.pusher.frontCamera\n      }\n      console.log(TAG_NAME, 'switchCamera', this.data.cameraPosition)\n      this.data.cameraPosition = this.data.cameraPosition === 'front' ? 'back' : 'front'\n      this.setData({\n        cameraPosition: this.data.cameraPosition,\n      }, () => {\n        console.log(TAG_NAME, 'switchCamera success', this.data.cameraPosition)\n      })\n      // wx 7.0.9 不支持动态设置 pusher.frontCamera ，只支持调用 API switchCamer() 设置，这里修改 cameraPosition 是为了记录状态\n      this.data.pusher.getPusherContext().switchCamera()\n    },\n    /**\n     * 设置指定player view的渲染坐标和尺寸\n     * @param {object} params\n     * userID: string\n     * streamType: string\n     * xAxis: number\n     * yAxis: number\n     * width: number\n     * height: number\n     * @returns {Promise}\n     */\n    setViewRect(params) {\n      console.log(TAG_NAME, 'setViewRect', params)\n      if (this.data.template !== 'custom') {\n        console.warn(`如需使用setViewRect方法，请初始化时设置template:\"custom\", 当前 template:\"${this.data.template}\"`)\n      }\n      console.info(`不建议使用该方法动态修改样式，避免引起微信小程序渲染问题，建议直接修改 wxml wxss 进行样式定制化`)\n      if (this.data.pusher.userID === params.userID) {\n        return this._setPusherConfig({\n          xAxis: params.xAxis,\n          yAxis: params.yAxis,\n          width: params.width,\n          height: params.height,\n        })\n      }\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: params.streamType,\n        config: {\n          xAxis: params.xAxis,\n          yAxis: params.yAxis,\n          width: params.width,\n          height: params.height,\n        },\n      })\n    },\n    /**\n     * 设置指定 player 或者 pusher view 是否可见\n     * @param {object} params\n     * userID: string\n     * streamType: string\n     * isVisible：boolean\n     * @returns {Promise}\n     */\n    setViewVisible(params) {\n      // console.log(this);\n      console.log(TAG_NAME, 'setViewVisible', params)\n      if (this.data.template !== 'custom') {\n        console.warn(`如需使用setViewVisible方法，请初始化时设置template:\"custom\", 当前 template:\"${this.data.template}\"`)\n      }\n      console.info(`不建议使用该方法动态修改样式，避免引起微信小程序渲染问题，建议直接修改 wxml wxss 进行样式定制化`)\n      if (this.data.pusher.userID === params.userID) {\n        return this._setPusherConfig({\n          isVisible: params.isVisible,\n        })\n      }\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: params.streamType,\n        config: {\n          isVisible: params.isVisible,\n        },\n      })\n    },\n    /**\n     * 设置指定player view的层级\n     * @param {Object} params\n     * userID: string\n     * streamType: string\n     * zIndex: number\n     * @returns {Promise}\n     */\n    setViewZIndex(params) {\n      console.log(TAG_NAME, 'setViewZIndex', params)\n      if (this.data.template !== 'custom') {\n        console.warn(`如需使用setViewZIndex方法，请初始化时设置template:\"custom\", 当前 template:\"${this.data.template}\"`)\n      }\n      console.info(`不建议使用该方法动态修改样式，避免引起微信小程序渲染问题，建议直接修改 wxml wxss 进行样式定制化`)\n      if (this.data.pusher.userID === params.userID) {\n        return this._setPusherConfig({\n          zIndex: params.zindex || params.zIndex,\n        })\n      }\n      return this._setPlayerConfig({\n        userID: params.userID,\n        streamType: params.streamType,\n        config: {\n          zIndex: params.zindex || params.zIndex,\n        },\n      })\n    },\n    /**\n     * 播放背景音\n     * @param {Object} params url\n     * @returns {Promise}\n     */\n    playBGM(params) {\n      return new Promise((resolve, reject) => {\n        this.data.pusher.getPusherContext().playBGM({\n          url: params.url,\n          // 已经有相关事件不需要在这里监听,目前用于测试\n          success: () => {\n            console.log(TAG_NAME, '播放背景音成功')\n            // this._emitter.emit(EVENT.BGM_PLAY_START)\n            resolve()\n          },\n          fail: () => {\n            console.log(TAG_NAME, '播放背景音失败')\n            this._emitter.emit(EVENT.BGM_PLAY_FAIL)\n            reject(new Error('播放背景音失败'))\n          },\n          // complete: () => {\n          //   console.log(TAG_NAME, '背景完成')\n          //   this._emitter.emit(EVENT.BGM_PLAY_COMPLETE)\n          // },\n        })\n      })\n    },\n    stopBGM() {\n      this.data.pusher.getPusherContext().stopBGM()\n    },\n    pauseBGM() {\n      this.data.pusher.getPusherContext().pauseBGM()\n    },\n    resumeBGM() {\n      this.data.pusher.getPusherContext().resumeBGM()\n    },\n    /**\n     * 设置背景音音量\n     * @param {Object} params volume\n     */\n    setBGMVolume(params) {\n      console.log(TAG_NAME, 'setBGMVolume', params)\n      this.data.pusher.getPusherContext().setBGMVolume({ volume: params.volume })\n    },\n    /**\n     * 设置麦克风音量\n     * @param {Object} params volume\n     */\n    setMICVolume(params) {\n      console.log(TAG_NAME, 'setMICVolume', params)\n      this.data.pusher.getPusherContext().setMICVolume({ volume: params.volume })\n    },\n    /**\n     * pusher 和 player 的截图并保存\n     * @param {Object} params userID streamType\n     * @returns {Promise}\n     */\n    snapshot(params) {\n      console.log(TAG_NAME, 'snapshot', params)\n      return new Promise((resolve, reject) => {\n        this.captureSnapshot(params).then((result)=>{\n          Taro.saveImageToPhotosAlbum({\n            filePath: result.tempImagePath,\n            success(res) {\n              Taro.showToast({\n                title: '已保存到相册',\n              })\n              console.log('save photo is success', res)\n              resolve(result)\n            },\n            fail: function(error) {\n              Taro.showToast({\n                icon: 'none',\n                title: '保存失败',\n              })\n              console.log('save photo is fail', error)\n              reject(error)\n            },\n          })\n        }).catch((error)=>{\n          reject(error)\n        })\n      })\n    },\n    /**\n     * 获取pusher 和 player 的截图\n     * @param {Object} params userID streamType\n     * @returns {Promise}\n     */\n    captureSnapshot(params) {\n      return new Promise((resolve, reject) => {\n        if (params.userID === this.data.pusher.userID) {\n        // pusher\n          this.data.pusher.getPusherContext().snapshot({\n            quality: 'raw',\n            complete: (result) => {\n              console.log(TAG_NAME, 'snapshot pusher', result)\n              if (result.tempImagePath) {\n                resolve(result)\n              } else {\n                console.log('snapShot 回调失败', result)\n                reject(new Error('截图失败'))\n              }\n            },\n          })\n        } else {\n        // player\n          this.userController.getStream(params).playerContext.snapshot({\n            quality: 'raw',\n            complete: (result) => {\n              console.log(TAG_NAME, 'snapshot player', result)\n              if (result.tempImagePath) {\n                resolve(result)\n              } else {\n                console.log('snapShot 回调失败', result)\n                reject(new Error('截图失败'))\n              }\n            },\n          })\n        }\n      })\n    },\n    // ______             __                                              __\n    // |      \\           |  \\                                            |  \\\n    //  \\$$$$$$ _______  _| $$_     ______    ______   _______    ______  | $$\n    //   | $$  |       \\|   $$ \\   /      \\  /      \\ |       \\  |      \\ | $$\n    //   | $$  | $$$$$$$\\\\$$$$$$  |  $$$$$$\\|  $$$$$$\\| $$$$$$$\\  \\$$$$$$\\| $$\n    //   | $$  | $$  | $$ | $$ __ | $$    $$| $$   \\$$| $$  | $$ /      $$| $$\n    //  _| $$_ | $$  | $$ | $$|  \\| $$$$$$$$| $$      | $$  | $$|  $$$$$$$| $$\n    // |   $$ \\| $$  | $$  \\$$  $$ \\$$     \\| $$      | $$  | $$ \\$$    $$| $$\n    //  \\$$$$$$ \\$$   \\$$   \\$$$$   \\$$$$$$$ \\$$       \\$$   \\$$  \\$$$$$$$ \\$$\n    /**\n     * 设置推流参数并触发页面渲染更新\n     * @param {Object} config live-pusher 的配置\n     * @returns {Promise}\n     */\n    _setPusherConfig(config, skipLog = false) {\n      if (!skipLog) {\n        console.log(TAG_NAME, '_setPusherConfig', config, this.data.pusher)\n      }\n      return new Promise((resolve, reject) => {\n        if (!this.data.pusher) {\n          this.data.pusher = new Pusher(config)\n        } else {\n          Object.assign(this.data.pusher, config)\n        }\n        this.setData({\n          pusher: this.data.pusher,\n        }, () => {\n          if (!skipLog) {\n            console.log(TAG_NAME, '_setPusherConfig setData compelete', 'config:', config, 'pusher:', this.data.pusher)\n          }\n          resolve(config)\n        })\n      })\n    },\n    /**\n     * 设置指定 player 属性并触发页面渲染\n     * @param {Object} params include userID,streamType,config\n     * @returns {Promise}\n     */\n    _setPlayerConfig(params) {\n      const userID = params.userID\n      const streamType = params.streamType\n      const config = params.config\n      console.log(TAG_NAME, '_setPlayerConfig', params)\n      return new Promise((resolve, reject) => {\n        // 获取指定的userID streamType 的 stream\n        const user = this.userController.getUser(userID)\n        if (user && user.streams[streamType]) {\n          Object.assign(user.streams[streamType], config)\n          // user.streams引用的对象和 streamList 里的是同一个\n          this.setData({\n            streamList: this.data.streamList\n          }, () => {\n            // console.log(TAG_NAME, '_setPlayerConfig complete', params, 'streamList:', this.data.streamList)\n            resolve(params)\n          })\n        } else {\n          // 不需要reject，静默处理\n          console.warn(TAG_NAME, '指定 userID 或者 streamType 不存在')\n          // reject(new Error('指定 userID 或者 streamType 不存在'))\n        }\n      })\n    },\n    /**\n     * 设置列表数据，并触发页面渲染\n     * @param {Object} params include userList, stramList\n     * @returns {Promise}\n     */\n    _setList(params) {\n      console.log(TAG_NAME, '_setList', params, this.data.template)\n      const { userList, streamList } = params\n      return new Promise((resolve, reject) => {\n        let visibleStreamList = []\n        const data = {\n          userList: userList || this.data.userList,\n          streamList: streamList || this.data.streamList,\n        }\n        this.setData(data, () => {\n          resolve(params)\n        })\n      })\n    },\n    /**\n     * 必选参数检测\n     * @param {Object} rtcConfig rtc参数\n     * @returns {Boolean}\n     */\n    _checkParam(rtcConfig) {\n      console.log(TAG_NAME, 'checkParam config:', rtcConfig)\n      if (!rtcConfig.sdkAppID) {\n        console.error('未设置 sdkAppID')\n        return false\n      }\n      if (rtcConfig.roomID === undefined) {\n        console.error('未设置 roomID')\n        return false\n      }\n      if (rtcConfig.roomID < 1 || rtcConfig.roomID > 4294967296) {\n        console.error('roomID 超出取值范围 1 ~ 4294967295')\n        return false\n      }\n      if (!rtcConfig.userID) {\n        console.error('未设置 userID')\n        return false\n      }\n      if (!rtcConfig.userSig) {\n        console.error('未设置 userSig')\n        return false\n      }\n      if (!rtcConfig.template) {\n        console.error('未设置 template')\n        return false\n      }\n      return true\n    },\n    _getPushUrl(rtcConfig) {\n      // 拼接 puhser url rtmp 方案\n      console.log(TAG_NAME, '_getPushUrl', rtcConfig)\n      if (ENV.IS_TRTC) {\n        // 版本高于7.0.8，基础库版本高于2.10.0 使用新的 url\n        return new Promise((resolve, reject) => {\n          // appscene videocall live\n          // cloudenv PRO CCC DEV UAT\n          // encsmall 0\n          // 对外的默认值是rtc ，对内的默认值是videocall\n          rtcConfig.scene = !rtcConfig.scene || rtcConfig.scene === 'rtc' ? 'videocall' : rtcConfig.scene\n          rtcConfig.enableBlackStream = rtcConfig.enableBlackStream || '' // 是否支持在纯音频下推送SEI消息，注意：在关闭enable-recv-message后还是无法接收\n          rtcConfig.encsmall = rtcConfig.encsmall || 0 // 是否编小画面，这个特性不建议学生默认开启，只有老师端才比较有意义\n          rtcConfig.cloudenv = rtcConfig.cloudenv || 'PRO'\n          rtcConfig.streamID = rtcConfig.streamID || '' // 指定旁边路直播的流ID\n          rtcConfig.userDefineRecordID = rtcConfig.userDefineRecordID || '' // 指定录制文件的recordid\n          rtcConfig.privateMapKey = rtcConfig.privateMapKey || '' // 字符串房间号\n          rtcConfig.pureAudioMode = rtcConfig.pureAudioMode || ''// 指定是否纯音频推流及录制，默认不填，值为1 或 2，其他值非法不处理\n          rtcConfig.recvMode = rtcConfig.recvMode || 1 // 1. 自动接收音视频 2. 仅自动接收音频 3. 仅自动接收视频 4. 音视频都不自动接收, 不能绑定player\n          let roomID = ''\n          if (/^\\d+$/.test(rtcConfig.roomID)) {\n            // 数字房间号\n            roomID = '&roomid=' + rtcConfig.roomID\n          } else {\n            // 字符串房间号\n            roomID = '&strroomid=' + rtcConfig.roomID\n          }\n          setTimeout(()=> {\n            const pushUrl = 'room://cloud.tencent.com/rtc?sdkappid=' + rtcConfig.sdkAppID +\n                            roomID +\n                            '&userid=' + rtcConfig.userID +\n                            '&usersig=' + rtcConfig.userSig +\n                            '&appscene=' + rtcConfig.scene +\n                            '&encsmall=' + rtcConfig.encsmall +\n                            '&cloudenv=' + rtcConfig.cloudenv +\n                            '&enableBlackStream=' + rtcConfig.enableBlackStream +\n                            '&streamid=' + rtcConfig.streamID +\n                            '&userdefinerecordid=' + rtcConfig.userDefineRecordID +\n                            '&privatemapkey=' + rtcConfig.privateMapKey +\n                            '&pureaudiomode=' + rtcConfig.pureAudioMode +\n                            '&recvmode=' + rtcConfig.recvMode\n            console.warn(TAG_NAME, 'getPushUrl result:', pushUrl)\n            resolve(pushUrl)\n          }, 0)\n        })\n      }\n      console.error(TAG_NAME, '组件仅支持微信 App iOS >=7.0.9, Android >= 7.0.8, 小程序基础库版 >= 2.10.0')\n      console.error(TAG_NAME, '需要真机运行，开发工具不支持实时音视频')\n    },\n    /**\n     * TRTC-room 远端用户和音视频状态处理\n     */\n    _bindEvent() {\n      // 远端用户进房\n      this.userController.on(EVENT.REMOTE_USER_JOIN, (event)=>{\n        console.log(TAG_NAME, '远端用户进房', event, event.data.userID)\n        let count = 0;\n        \n        this.setData({\n          userList: event.data.userList,\n          isConnectioned: true,\n          canIHangUp: false,\n          isRemotIn: true\n        }, () => {\n          // 接通后开始的计时！\n          this.data.timerInstance = setInterval(() => {\n            const formatTimer = this.secondToDate(++this.data.timer);\n\n            // 10s后可以挂断\n            if (this.data.timer == 10) {\n              this.setData({\n                canIHangUp: true\n              })\n            }\n\n            this.setData({ \n              formatTimer\n            });\n          }, 1000)\n\n          this._emitter.emit(EVENT.REMOTE_USER_JOIN, { userID: event.data.userID })\n        })\n        console.log(TAG_NAME, 'REMOTE_USER_JOIN', 'streamList:', this.data.streamList, 'userList:', this.data.userList)\n      })\n      // 远端用户离开\n      this.userController.on(EVENT.REMOTE_USER_LEAVE, (event)=>{\n        console.log(TAG_NAME, '远端用户离开', event, event.data.userID)\n        const _this = this;\n        if (event.data.userID) {\n          this._setList({\n            userList: event.data.userList,\n            streamList: event.data.streamList\n          }).then(() => {\n            Taro.showToast({\n              title: '问诊已结束',\n              icon: 'none'\n            })\n\n            // 远端挂断逻辑处理\n            this.setData({\n              isRemotIn: false\n            }, () => {\n              console.log('问诊已结束，to 问诊详情');\n\n              _this.toDetail();\n            });\n\n            this._emitter.emit(EVENT.REMOTE_USER_LEAVE, { userID: event.data.userID })\n          })\n        }\n        console.log(TAG_NAME, 'REMOTE_USER_LEAVE', 'streamList:', this.data.streamList, 'userList:', this.data.userList)\n      })\n      // 视频状态 true\n      this.userController.on(EVENT.REMOTE_VIDEO_ADD, (event)=>{\n        console.log(TAG_NAME, '远端视频可用', event, event.data.stream.userID)\n        const stream = event.data.stream\n        // 如果Android onHide 时，新增的player 无法播放 记录标识位\n        if (this.status.pageLife === 'hide') {\n          this.status.isOnHideAddStream = true\n          stream.isOnHideAdd = true\n        }\n        this._setList({\n          userList: event.data.userList,\n          streamList: event.data.streamList,\n        }).then(() => {\n          // 完善 的stream 的 playerContext\n          stream.playerContext = Taro.createLivePlayerContext(stream.streamID, this)\n          // 新增的需要触发一次play 默认属性才能生效\n          // stream.playerContext.play()\n          // console.log(TAG_NAME, 'REMOTE_VIDEO_ADD playerContext.play()', stream)\n          this._emitter.emit(EVENT.REMOTE_VIDEO_ADD, { userID: stream.userID, streamType: stream.streamType })\n        })\n        console.log(TAG_NAME, 'REMOTE_VIDEO_ADD', 'streamList:', this.data.streamList, 'userList:', this.data.userList)\n      })\n      // 视频状态 false\n      this.userController.on(EVENT.REMOTE_VIDEO_REMOVE, (event)=>{\n        console.log(TAG_NAME, '远端视频移除', event, event.data.stream.userID)\n        const stream = event.data.stream\n\n        // 远端视频移除时 给患者端提示 为区分挂断 还是 切语音 需要判定远端是否还在房间\n        if (this.data.isRemotIn) {\n          Taro.showToast({\n            title: '医生端摄像头关闭',\n            duration: 5000,\n            icon: 'none'\n          })          \n        }\n\n        this._setList({\n          userList: event.data.userList,\n          streamList: event.data.streamList,\n        }).then(() => {\n          // 有可能先触发了退房事件，用户名下的所有stream都已清除\n          if (stream.userID && stream.streamType) {\n            this._emitter.emit(EVENT.REMOTE_VIDEO_REMOVE, { userID: stream.userID, streamType: stream.streamType })\n          }\n        })\n        console.log(TAG_NAME, 'REMOTE_VIDEO_REMOVE', 'streamList:', this.data.streamList, 'userList:', this.data.userList)\n      })\n      // 音频可用\n      this.userController.on(EVENT.REMOTE_AUDIO_ADD, (event)=>{\n        console.log(TAG_NAME, '远端音频可用', event)\n        const stream = event.data.stream\n        this._setList({\n          userList: event.data.userList,\n          streamList: event.data.streamList,\n        }).then(() => {\n          stream.playerContext = Taro.createLivePlayerContext(stream.streamID, this)\n          // 新增的需要触发一次play 默认属性才能生效\n          // stream.playerContext.play()\n          // console.log(TAG_NAME, 'REMOTE_AUDIO_ADD playerContext.play()', stream)\n          this._emitter.emit(EVENT.REMOTE_AUDIO_ADD, { userID: stream.userID, streamType: stream.streamType })\n        })\n        console.log(TAG_NAME, 'REMOTE_AUDIO_ADD', 'streamList:', this.data.streamList, 'userList:', this.data.userList)\n      })\n      // 音频不可用\n      this.userController.on(EVENT.REMOTE_AUDIO_REMOVE, (event)=>{\n        console.log(TAG_NAME, '远端音频移除', event, event.data.stream.userID)\n        const stream = event.data.stream\n        this._setList({\n          userList: event.data.userList,\n          streamList: event.data.streamList,\n        }).then(() => {\n          // 有可能先触发了退房事件，用户名下的所有stream都已清除\n          if (stream.userID && stream.streamType) {\n            this._emitter.emit(EVENT.REMOTE_AUDIO_REMOVE, { userID: stream.userID, streamType: stream.streamType })\n          }\n        })\n        console.log(TAG_NAME, 'REMOTE_AUDIO_REMOVE', 'streamList:', this.data.streamList, 'userList:', this.data.userList)\n      })\n    },\n    /**\n     * pusher event handler\n     * @param {*} event 事件实例\n     */\n    _pusherStateChangeHandler(event) {\n      const code = event.detail.code\n      const message = event.detail.message\n      console.log(TAG_NAME, 'pusherStateChange：', code, event)\n      switch (code) {\n        case 0: // 未知状态码，不做处理\n          console.log(TAG_NAME, message, code)\n          break\n        case 1001:\n          console.log(TAG_NAME, '已经连接推流服务器', code)\n          break\n        case 1002:\n          console.log(TAG_NAME, '已经与服务器握手完毕,开始推流', code)\n          break\n        case 1003:\n          console.log(TAG_NAME, '打开摄像头成功', code)\n          break\n        case 1004:\n          console.log(TAG_NAME, '录屏启动成功', code)\n          break\n        case 1005:\n          console.log(TAG_NAME, '推流动态调整分辨率', code)\n          break\n        case 1006:\n          console.log(TAG_NAME, '推流动态调整码率', code)\n          break\n        case 1007:\n          console.log(TAG_NAME, '首帧画面采集完成', code)\n          break\n        case 1008:\n          console.log(TAG_NAME, '编码器启动', code)\n          break\n        case 1018:\n          console.log(TAG_NAME, '进房成功', code)\n          this._emitter.emit(EVENT.LOCAL_JOIN, { userID: this.data.pusher.userID })\n          break\n        case 1019:\n          console.log(TAG_NAME, '退出房间', code)\n          // 20200421 iOS 仍然没有1019事件通知退房，退房事件移动到 exitRoom 方法里，但不是后端通知的退房成功\n          // this._emitter.emit(EVENT.LOCAL_LEAVE, { userID: this.data.pusher.userID })\n          break\n        case 2003:\n          console.log(TAG_NAME, '渲染首帧视频', code)\n          break\n        case 1020:\n        case 1031:\n        case 1032:\n        case 1033:\n        case 1034:\n          // 通过 userController 处理 1020 1031 1032 1033 1034\n          this.userController.userEventHandler(event)\n          break\n        case -1301:\n          console.error(TAG_NAME, '打开摄像头失败: ', code)\n          this._emitter.emit(EVENT.ERROR, { code, message })\n          break\n        case -1302:\n          console.error(TAG_NAME, '打开麦克风失败: ', code)\n          this._emitter.emit(EVENT.ERROR, { code, message })\n          break\n        case -1303:\n          console.error(TAG_NAME, '视频编码失败: ', code)\n          this._emitter.emit(EVENT.ERROR, { code, message })\n          break\n        case -1304:\n          console.error(TAG_NAME, '音频编码失败: ', code)\n          this._emitter.emit(EVENT.ERROR, { code, message })\n          break\n        case -1307:\n          console.error(TAG_NAME, '推流连接断开: ', code)\n          this._emitter.emit(EVENT.ERROR, { code, message })\n          break\n        case -100018:\n          console.error(TAG_NAME, '进房失败: userSig 校验失败，请检查 userSig 是否填写正确', code, message)\n          this._emitter.emit(EVENT.ERROR, { code, message })\n          break\n        case 5000:\n          console.log(TAG_NAME, '小程序被挂起: ', code)\n          // 20200421 iOS 微信点击胶囊圆点会触发该事件\n          // 触发 5000 后，底层SDK会退房，返回前台后会自动进房\n          break\n        case 5001:\n          // 20200421 仅有 Android 微信会触发该事件\n          console.log(TAG_NAME, '小程序悬浮窗被关闭: ', code)\n          this.status.isPending = true\n          if (this.status.isPush) {\n            this.exitRoom()\n          }\n          break\n        case 1021:\n          console.log(TAG_NAME, '网络类型发生变化，需要重新进房', code)\n          break\n        case 2007:\n          console.log(TAG_NAME, '本地视频播放loading: ', code)\n          break\n        case 2004:\n          console.log(TAG_NAME, '本地视频播放开始: ', code)\n          break\n        default:\n          console.log(TAG_NAME, message, code)\n      }\n    },\n    _pusherNetStatusHandler(event) {\n      // 触发 LOCAL_NET_STATE_UPDATE\n      this._emitter.emit(EVENT.LOCAL_NET_STATE_UPDATE, event)\n    },\n    _pusherErrorHandler(event) {\n      // 触发 ERROR\n      console.warn(TAG_NAME, 'pusher error', event)\n      try {\n        const code = event.detail.errCode\n        const message = event.detail.errMsg\n        this._emitter.emit(EVENT.ERROR, { code, message })\n      } catch (exception) {\n        console.error(TAG_NAME, 'pusher error data parser exception', event, exception)\n      }\n    },\n    _pusherBGMStartHandler(event) {\n      // 触发 BGM_START 已经在playBGM方法中进行处理\n      this._emitter.emit(EVENT.BGM_PLAY_START, { data: event })\n    },\n    _pusherBGMProgressHandler(event) {\n      // BGM_PROGRESS\n      this._emitter.emit(EVENT.BGM_PLAY_PROGRESS, event)\n    },\n    _pusherBGMCompleteHandler(event) {\n      // BGM_COMPLETE\n      this._emitter.emit(EVENT.BGM_PLAY_COMPLETE, event)\n    },\n    _pusherAudioVolumeNotify: function(event) {\n      // console.log(TAG_NAME, '_pusherAudioVolumeNotify', event)\n      this._emitter.emit(EVENT.LOCAL_AUDIO_VOLUME_UPDATE, event)\n    },\n    // player event handler\n    // 获取 player ID 再进行触发\n    _playerStateChange(event) {\n      // console.log(TAG_NAME, '_playerStateChange', event)\n      this._emitter.emit(EVENT.REMOTE_STATE_UPDATE, event)\n    },\n    _playerFullscreenChange(event) {\n      // console.log(TAG_NAME, '_playerFullscreenChange', event)\n      this._emitter.emit(EVENT.REMOTE_FULLSCREEN_UPDATE, event)\n      this._emitter.emit(EVENT.VIDEO_FULLSCREEN_UPDATE, event)\n    },\n    _playerNetStatus(event) {\n      // console.log(TAG_NAME, '_playerNetStatus', event)\n      // 获取player 视频的宽高\n      const stream = this.userController.getStream({\n        userID: event.currentTarget.dataset.userid,\n        streamType: event.currentTarget.dataset.streamtype,\n      })\n      if (stream && (stream.videoWidth !== event.detail.info.videoWidth || stream.videoHeight !== event.detail.info.videoHeight)) {\n        console.log(TAG_NAME, '_playerNetStatus update video size', event)\n        stream.videoWidth = event.detail.info.videoWidth\n        stream.videoHeight = event.detail.info.videoHeight\n      }\n      this._emitter.emit(EVENT.REMOTE_NET_STATE_UPDATE, event)\n    },\n    _playerAudioVolumeNotify(event) {\n      // console.log(TAG_NAME, '_playerAudioVolumeNotify', event)\n      this._emitter.emit(EVENT.REMOTE_AUDIO_VOLUME_UPDATE, event)\n    },\n    _filterGridPageVisibleStream(list) {\n      // 最多只显示 gridPlayerPerPage 个stream\n      const length = list.length\n      // +1 pusher\n      this.data.gridPageCount = Math.ceil((length + 1) / this.data.gridPlayerPerPage)\n      this.data.gridPagePlaceholderStreamList = []\n      let visibleCount = 0\n      // 需要显示的player区间\n      let interval\n      if (this.data.gridPlayerPerPage > 3) {\n        if (this.data.gridCurrentPage === 1) {\n          interval = [-1, this.data.gridPlayerPerPage - 1]\n        } else {\n          // 每页显示4个时，第一页显示3个，pusher只在第一页\n          // -1 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14\n          //    1     2       3        4\n          // -1 3\n          // 2 7\n          // 6 11\n          interval = [this.data.gridCurrentPage * this.data.gridPlayerPerPage - (this.data.gridPlayerPerPage + 2), this.data.gridCurrentPage * this.data.gridPlayerPerPage - 1]\n        }\n      } else {\n        // 每页显示3个，每页都有pusher\n        interval = [this.data.gridCurrentPage * this.data.gridPlayerPerPage - (this.data.gridPlayerPerPage + 1), this.data.gridCurrentPage * this.data.gridPlayerPerPage]\n      }\n\n      for (let i = 0; i < length; i++) {\n        if ( i > interval[0] && i < interval[1]) {\n          list[i].isVisible = true\n          list[i].muteVideo = list[i].muteVideoPrev === undefined ? list[i].muteVideo : list[i].muteVideoPrev\n          visibleCount++\n        } else {\n          list[i].isVisible = false\n          list[i].muteVideo = true\n        }\n      }\n      // 第一页，不需要占位\n      if (this.data.gridCurrentPage !== 1) {\n        for (let i = 0; i < this.data.gridPlayerPerPage - visibleCount; i++) {\n          this.data.gridPagePlaceholderStreamList.push({ id: 'holder-' + i })\n        }\n      }\n      return list\n    },\n    /**\n     * 保持屏幕常亮\n     */\n    _keepScreenOn() {\n      setInterval(() => {\n        Taro.setKeepScreenOn({\n          keepScreenOn: true,\n        })\n      }, 20000)\n    },\n    \n    //  ________                                  __             __\n    //  |        \\                                |  \\           |  \\\n    //   \\$$$$$$$$______   ______ ____    ______  | $$  ______  _| $$_     ______\n    //     | $$  /      \\ |      \\    \\  /      \\ | $$ |      \\|   $$ \\   /      \\\n    //     | $$ |  $$$$$$\\| $$$$$$\\$$$$\\|  $$$$$$\\| $$  \\$$$$$$\\\\$$$$$$  |  $$$$$$\\\n    //     | $$ | $$    $$| $$ | $$ | $$| $$  | $$| $$ /      $$ | $$ __ | $$    $$\n    //     | $$ | $$$$$$$$| $$ | $$ | $$| $$__/ $$| $$|  $$$$$$$ | $$|  \\| $$$$$$$$\n    //     | $$  \\$$     \\| $$ | $$ | $$| $$    $$| $$ \\$$    $$  \\$$  $$ \\$$     \\\n    //      \\$$   \\$$$$$$$ \\$$  \\$$  \\$$| $$$$$$$  \\$$  \\$$$$$$$   \\$$$$   \\$$$$$$$\n    //                                  | $$\n    //                                  | $$\n    //                                   \\$$\n    // 以下为 debug & template 相关函数\n    _toggleAudio() {\n      if (this.data.pusher.enableMic) {\n        this.unpublishLocalAudio()\n      } else {\n        this.publishLocalAudio()\n      }\n    },\n    _debugToggleRemoteVideo(event) {\n      console.log(TAG_NAME, '_debugToggleRemoteVideo', event.currentTarget.dataset)\n      const userID = event.currentTarget.dataset.userID\n      const streamType = event.currentTarget.dataset.streamType\n      const stream = this.data.streamList.find((item)=>{\n        return item.userID === userID && item.streamType === streamType\n      })\n      if (stream.muteVideo) {\n        this.subscribeRemoteVideo({ userID, streamType })\n        // this.setViewVisible({ userID, streamType, isVisible: true })\n      } else {\n        this.unsubscribeRemoteVideo({ userID, streamType })\n        // this.setViewVisible({ userID, streamType, isVisible: false })\n      }\n    },\n    _debugToggleRemoteAudio(event) {\n      console.log(TAG_NAME, '_debugToggleRemoteAudio', event.currentTarget.dataset)\n      const userID = event.currentTarget.dataset.userID\n      const streamType = event.currentTarget.dataset.streamType\n      const stream = this.data.streamList.find((item)=>{\n        return item.userID === userID && item.streamType === streamType\n      })\n      if (stream.muteAudio) {\n        this.subscribeRemoteAudio({ userID })\n      } else {\n        this.unsubscribeRemoteAudio({ userID })\n      }\n    },\n    _debugToggleVideoDebug() {\n      this.setData({\n        debug: !this.data.debug,\n      })\n    },\n    _debugExitRoom() {\n      this.exitRoom()\n    },\n    _debugEnterRoom() {\n      Object.assign(this.data.pusher, this.data.config)\n      this.enterRoom({ roomID: this.data.config.roomID }).then(()=>{\n        setTimeout(()=>{\n          this.publishLocalVideo()\n          this.publishLocalAudio()\n        }, 2000)\n        // 进房后开始推送视频或音频\n      })\n    },\n    _debugGoBack() {\n      Taro.navigateBack({\n        delta: 1,\n      })\n    },\n    _debugTogglePanel() {\n      this.setData({ \n        debugPanel: !this.data.debugPanel,\n      })\n    },\n    _toggleAudioVolumeType() {\n      if (this.data.pusher.audioVolumeType === 'voicecall') {\n        this._setPusherConfig({\n          audioVolumeType: 'media',\n        })\n      } else {\n        this._setPusherConfig({\n          audioVolumeType: 'voicecall',\n        })\n      }\n    },\n    _toggleSoundMode() {\n      if (this.data.userList.length === 0 ) {\n        return\n      }\n      const stream = this.userController.getStream({\n        userID: this.data.userList[0].userID,\n        streamType: 'main',\n      })\n      if (stream) {\n        if (stream.soundMode === 'speaker') {\n          stream['soundMode'] = 'ear'\n        } else {\n          stream['soundMode'] = 'speaker'\n        }\n        this._setPlayerConfig({\n          userID: stream.userID,\n          streamType: 'main',\n          config: {\n            soundMode: stream['soundMode'],\n          },\n        })\n      }\n    },\n    /**\n     * 秒转时分秒\n     */\n    secondToDate(result) {\n      let h = Math.floor(result / 3600) < 10 ? '0'+Math.floor(result / 3600) : Math.floor(result / 3600);\n      let m = Math.floor((result / 60 % 60)) < 10 ? '0' + Math.floor((result / 60 % 60)) : Math.floor((result / 60 % 60));\n      let s = Math.floor((result % 60)) < 10 ? '0' + Math.floor((result % 60)) : Math.floor((result % 60));\n      return result = h + \":\" + m + \":\" + s;\n    },\n    /**\n     * 退出通话\n     */\n    _hangUp() {\n      let _this = this;\n\n      if (this.data.canIHangUp && !this.data.isConnectioned) { // 能挂断 而且 远端没进房间\n        // 患者未接通挂断\n        Taro.showModal({\n          title: '提示',\n          content: '正在为您派单，是否中断问诊?',\n          showCancel: true,\n          confirmColor: '#F65455',\n          success: function(res) {\n            if (res.cancel) return;\n\n            Taro.navigateBack({ // 触发 detached 生命周期，调取消问诊接口并退出房间。 提示 \"问诊已取消\"\n              delta: 1,\n            })\n          }\n        })\n        return;\n      } else if (!this.data.canIHangUp && this.data.isConnectioned) { // 不能挂断 而且 远端在\n        // 患者接通挂断\n        Taro.showToast({\n          title: '10秒内无法结束问诊',\n          icon: 'none'\n        })\n        return;\n      }\n\n      this.data.isClickBtnToHangeUp = true; // 标识为患者端按钮点击挂断\n      // 接诊结束正常挂断 toast提示 进入问诊详情页\n      Taro.showToast({\n        title: '问诊已结束',\n        icon: 'none'\n      })\n\n      setTimeout(() => {\n        _this.exitRoom();\n        // to 处方详情\n        console.log('患者端主动挂断，问诊结束，to 问诊详情');\n        this.toDetail();\n      }, 1000);\n    },\n    toDetail() {\n      const { inquiryReportGuid } =  Taro.getStorageSync('inqueryInfo') || {};\n      Taro.redirectTo({\n        url: '/pages/inquiry/prescriptionDetails/prescriptionDetails?inquiryType=video&inquiryId=' + inquiryReportGuid,\n      })\n    },\n    /**\n     * @description 视频还未接通时 取消问诊\n     */\n    cancleInquery() {\n      const { roomNumber, patientGuid, inquiryReportGuid: inquiryRecordGuid } =  Taro.getStorageSync('inqueryInfo') || {};\n      const _this = this;\n\n      ajax2('post', '/api/patientinfo/cancelInquiry', { roomNumber, patientGuid, inquiryRecordGuid }, res => {\n        console.log('res', res)\n        if (res.data.code === 0) {\n          // Taro.navigateBack({\n          //   delta: 1,\n          // })\n        } else {\n          Taro.showToast({\n            title: res.data.msg || '操作失败',\n            icon: 'none'\n          })\n        }\n      }, err => {\n        Taro.showToast({\n          title: err.msg || '操作失败',\n          icon: 'none'\n        })\n      })\n    }\n  },\n\n  watch: {\n    config: function(newVal, oldVal) {\n      this._propertyObserver({\n        'name': 'config', newVal, oldVal,\n      })\n    }\n  }\n};\n"},"convertDir/pages/inquiry/trtc/components/utils/compare-version":{"js":"export default function compareVersion(v1, v2) {\n  v1 = v1.split('.')\n  v2 = v2.split('.')\n  const len = Math.max(v1.length, v2.length)\n  while (v1.length < len) {\n    v1.push('0')\n  }\n  while (v2.length < len) {\n    v2.push('0')\n  }\n  for (let i = 0; i < len; i++) {\n    const num1 = parseInt(v1[i])\n    const num2 = parseInt(v2[i])\n    if (num1 > num2) {\n      return 1\n    } if (num1 < num2) {\n      return -1\n    }\n  }\n  return 0\n}\n"},"convertDir/pages/inquiry/trtc/components/utils/environment":{"js":"import compareVersion from './compare-version.js'\nconst TAG_NAME = 'TRTC-ROOM'\n\nconst env = wx ? wx : qq\nif (!env) {\n  console.error(TAG_NAME, '不支持当前小程序环境')\n}\nconst systemInfo = env.getSystemInfoSync()\nconst safeArea = systemInfo.safeArea\nif (systemInfo.system === 'iOS 13.3' || (systemInfo.model === 'iPhoneX' && systemInfo.system === 'iOS 13.3.1') ) {\n  // audio-volume-type = media\n  console.log('use media audio volume type')\n}\nconsole.log(TAG_NAME, 'SystemInfo', systemInfo)\nlet isNewVersion\nif (typeof qq !== 'undefined') {\n  isNewVersion = true\n} else if (typeof wx !== 'undefined') {\n  if (compareVersion(systemInfo.version, '7.0.8') >= 0 || // mobile pc\n  (compareVersion(systemInfo.version, '2.4.0') >= 0 && compareVersion(systemInfo.version, '6.0.0') < 0) && // mac os\n  compareVersion(systemInfo.SDKVersion, '2.10.0') >= 0) {\n    isNewVersion = true\n  } else {\n    isNewVersion = false\n  }\n}\n\nexport const IS_TRTC = isNewVersion\nexport const IS_QQ = typeof qq !== 'undefined'\nexport const IS_WX = typeof wx !== 'undefined'\nexport const IS_IOS = /iOS/i.test(systemInfo.system)\nexport const IS_ANDROID = /Android/i.test(systemInfo.system)\nexport const IS_MAC = /mac/i.test(systemInfo.system)\nexport const APP_VERSION = systemInfo.version\nexport const LIB_VERSION = (function() {\n  if (systemInfo.SDKBuild) {\n    return systemInfo.SDKVersion + '-' + systemInfo.SDKBuild\n  }\n  return systemInfo.SDKVersion\n})()\n\nlet isFullscreenDevie = false\nif (systemInfo.screenHeight > safeArea.bottom) {\n// if (/iphone\\s{0,}x/i.test(systemInfo.model)) {\n  isFullscreenDevie = true\n}\n\nexport const IS_FULLSCREEN_DEVICE = isFullscreenDevie\n\nconsole.log(TAG_NAME, 'APP_VERSION:', APP_VERSION, ' LIB_VERSION:', LIB_VERSION, ' is new version:', IS_TRTC)\n"},"convertDir/pages/inquiry/trtc/components/utils/event":{"js":"class Event {\n  on(event, fn, ctx) {\n    if (typeof fn !== 'function') {\n      console.error('listener must be a function')\n      return\n    }\n\n    this._stores = this._stores || {};\n    (this._stores[event] = this._stores[event] || []).push({ cb: fn, ctx: ctx })\n  }\n\n  emit(event) {\n    this._stores = this._stores || {}\n    let store = this._stores[event]\n    let args\n\n    if (store) {\n      store = store.slice(0)\n      args = [].slice.call(arguments, 1),\n      args[0] = {\n        eventCode: event,\n        data: args[0],\n      }\n      for (let i = 0, len = store.length; i < len; i++) {\n        store[i].cb.apply(store[i].ctx, args)\n      }\n    }\n  }\n\n  off(event, fn) {\n    this._stores = this._stores || {}\n\n    // all\n    if (!arguments.length) {\n      this._stores = {}\n      return\n    }\n\n    // specific event\n    const store = this._stores[event]\n    if (!store) return\n\n    // remove all handlers\n    if (arguments.length === 1) {\n      delete this._stores[event]\n      return\n    }\n\n    // remove specific handler\n    let cb\n    for (let i = 0, len = store.length; i < len; i++) {\n      cb = store[i].cb\n      if (cb === fn) {\n        store.splice(i, 1)\n        break\n      }\n    }\n    return\n  }\n}\n\nmodule.exports = Event\n"},"convertDir/pages/inquiry/trtc/trtcRoom":{"js":"export default {\n\n  data: function() {\n    return {\n      trtcConfig:{\n        sdkAppID: '', // 开通实时音视频服务创建应用后分配的 SDKAppID\n        userID: '', // 用户 ID，可以由您的帐号系统指定\n        userSig: '', // 身份签名，相当于登录密码的作用\n        template: '1v1', // 画面排版模式\n        roomID: '',  //房间号\n        debugMode: false\n      }\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    //获取上页面本地存储的参数\n    this.getStorageTrtcConfig()\n  },\n  /**\n   * @description: 获取本地存储trtc 配置信息\n   * @return: void\n   */\n  getStorageTrtcConfig: function () {\n    try {\n      const { appId, userSign, employeeId, roomNumber } =  Taro.getStorageSync('inqueryInfo') || {};\n\n      // 调用设置存储函数\n      this.setTrtcConfig({\n        appId,\n        userSign,\n        employeeId,\n        roomNumber\n      })\n    } catch (e) {\n      console.log('获取本地trtc配置失败')\n    }\n  },\n  /**\n   * @description: 设置trtc配置全局变量\n   * @params {Object} res   \n   * @return: void\n   */\n  setTrtcConfig: function (res) {\n    this.setData({\n      [\"trtcConfig.sdkAppID\"]: res.appId,\n      [\"trtcConfig.userID\"]: res.employeeId,\n      [\"trtcConfig.userSig\"]: res.userSign,\n      [\"trtcConfig.roomID\"]: res.roomNumber\n    }, () => {\n      console.log(this.data.trtcConfig)\n      this.handleTrtcContextEvent()\n    })\n  },\n  /**\n   * @description: 发布本地流，订阅事件。进入房间\n   * @return: void\n   */\n  handleTrtcContextEvent: function () {\n    let trtcRoomContext = this.selectComponent('#trtcroom')\n    console.log('trtcRoomContext',trtcRoomContext)\n    let EVENT = trtcRoomContext.EVENT\n\n    if(trtcRoomContext) {\n        trtcRoomContext.on(EVENT.LOCAL_JOIN, (event)=>{\n            // 进房成功后发布本地音频流和视频流 \n            trtcRoomContext.publishLocalVideo()\n            trtcRoomContext.publishLocalAudio()\n        })\n        // 监听远端用户的视频流的变更事件\n        trtcRoomContext.on(EVENT.REMOTE_VIDEO_ADD, (event)=>{\n            // 订阅（即播放）远端用户的视频流\n            let userID = event.data.userID\n            let streamType = event.data.streamType// 'main' or 'aux'            \n            trtcRoomContext.subscribeRemoteVideo({userID: userID, streamType: streamType})\n        })\n\n        // 监听远端用户的音频流的变更事件\n        trtcRoomContext.on(EVENT.REMOTE_AUDIO_ADD, (event)=>{\n            // 订阅（即播放）远端用户的音频流\n            let userID = event.data.userID\n            trtcRoomContext.subscribeRemoteAudio({userID: userID})\n        })\n      \n        // 进入房间\n        trtcRoomContext.enterRoom({roomID: this.data.trtcConfig.roomID}).catch((res)=>{\n            console.error('room joinRoom 进房失败:', res)\n        })\n    }\n  }\n};","json":{"trtc-room":"./components/trtc-room"},"wxml":"\n  <view class=\"trtcRoom-auto-container\">\n    <trtc-room id=\"trtcroom\" :config=\"trtcConfig\"></trtc-room>\n  </view>","wxss":"/* pages/inquiry/trtc/trtcRoom.wxss */"},"convertDir/pages/maskActivity/maskActivity":{"js":"// pages/activity/maskActivity.js\nimport {\n  getH5AbsoluteUrl,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      link: '',\n      url_link: cdnStaticResourceUrl,\n    };\n  },\n  onLoad: function (options) {\n    let source = options.source ? options.source: '';\n    if (source) {\n      getApp().globalData.globalSource = source\n    }\n    this.setData({\n      link: getH5AbsoluteUrl(`?_t=${new Date().getTime()}/#/maskReservation?source=${ source }`)\n    })\n    console.log('webview实际访问url: ', this.data.link)\n  },\n  // 分享\n  onShareAppMessage: function (e) {\n    return {\n      title: `口罩在线预约`,\n      path: `/pages/maskActivity/maskActivity`,\n      imageUrl: `${cdnStaticResourceUrl}images/share-active-icon.png`\n    };\n  }\n};\n","json":{},"wxss":"/* pages/activity/maskActivity.wxss */","wxml":"\n  <view class=\"maskActivity-auto-container\">\n    <web-view :src=\"link\" :style=\"{top:navBarHeightpx}\"></web-view>\n  </view>"},"convertDir/pages/messageList/messageList":{"js":"// pages/messageList/messageList.js\nimport {\n  ajax2,\n  getMedicineCateNum,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\nconst app = getApp();\n\nexport default {\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      messageList: [],\n      userInfo: {},\n      sess_key: null,\n      currentPage: 1,\n      lastPage: false,\n      windowHeight: Taro.getSystemInfoSync().screenHeight,\n      navBarHeight: app.globalData.navBarHeight\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let tabbarHeight = Taro.getStorageSync('tabbarHeight') || getApp().globalData.tabbarHeight || 82;\n    console.log('-----------------')\n    console.log(Taro.getSystemInfoSync().screenHeight)\n    console.log(tabbarHeight,Taro.getStorageSync('tabbarHeight'),getApp().globalData.tabbarHeight,82)\n    console.log(this.data.navBarHeight)\n    this.setData({\n      windowHeight: Taro.getSystemInfoSync().screenHeight - tabbarHeight - this.data.navBarHeight\n    })\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    //自定义底部导航，需要在当前页面修改selected的值 否则无效\n    if (typeof this.getTabBar === 'function' && this.getTabBar()) {\n      let cateNum = getMedicineCateNum();\n\n      this.getTabBar().setData({\n        selected: 3,  //这里指的是该页面对应在tabBar的索引\n        brageNum: cateNum || 0\n      })\n    }\n\n    this.data.sess_key = getApp().globalData.sess_key;\n    this.data.currentPage = 1;\n    this.data.lastPage = false;\n    if(this.data.sess_key) {\n      this.setData({\n        userInfo: {\n          token: this.data.sess_key,\n          userId: Taro.getStorageSync('userInfo').userId\n        }\n      })\n      this.getMessageList();\n    }\n    this.setData({\n      sess_key: this.data.sess_key,\n      messageList: [],\n      \n    })\n  },\n  toChatRoom: function () {\n    Taro.navigateTo({\n      url: `/pages/inquiry/chat/pages/chatroom`\n    })\n  },\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  getMessageList(){\n    let data = {\n      // organSign: '',\n      pageNum: this.data.currentPage,\n      pageSize: 10,\n      inquiryType: 2,\n      speedStatus: -1,\n      inquirySource: 1\n    }\n    Taro.showLoading({\n      title: '加载中',\n    })\n\n    ajax2('POST', 'patient/im/inquiry/list', data, res=> {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        let list = res.data.result;\n        console.log(list.length < 10)\n        if(list.length < 10) this.data.lastPage= true;\n        this.setData({\n          messageList: [...this.data.messageList, ...list]\n        })\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  toLogin() {\n    Taro.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  loadMore(){\n    if(this.data.lastPage) {\n      Taro.showToast({\n        title: '没有更多了',\n        icon: 'none'\n      })\n      return false;\n    }\n    this.data.currentPage++;\n    this.getMessageList();\n  }\n};","json":{"missingData-view":"/component/missingData/missingData","message-list-comp":"/component/message-list/message-list"},"wxml":"\n  <view class=\"messageList-auto-container\"> \n    <navBar title-text=\"消息\" :titleColor=\"'#111334'\" :showCapsule=\" false \"></navBar>\n    <view :class=\"[container,( !messageList.length?'back':'' )]\" :style=\"{height:  windowHeight px}\">  \n      <missingData-view v-if=\" !sess_key \" zhi=\"new1\" textval=\"暂无消息记录\" textval2=\"请登录后查看\" buttonText=\"立即登录\" bind:action=\"toLogin\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      <message-list-comp :messageList=\" messageList \" v-else-if=\" messageList.length \" :userInfo=\" userInfo \" :windowHeight=\" windowHeight \" bind:action=\"loadMore\" bind:toChatRoom=\"toChatRoom\"></message-list-comp>\n      <missingData-view v-else zhi=\"new1\" textval=\"暂无消息记录\" textval2=\"继续逛逛\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n    </view>\n  </view>","wxss":"/* pages/messageList/messageList.wxss */\npage {\n  height: 100vh;\n  background-color: #ffffff;\n}\n.container {\n  height: 100%;\n  overflow: hidden;\n}\n.back{\n  background-color:#F5F6FA;\n}"},"convertDir/pages/my/myCoupon/myCoupon":{"js":"export default {\n\n  data: function() {\n    return {\n\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    Taro.redirectTo({\n      url: '/pages/note/myCoupon/myCoupon'\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"myCoupon-auto-container\">\n    <text>pages/my/myCoupon/myCoupon.wxml\n    </text>\n  </view>","wxss":"/* pages/my/myCoupon/myCoupon.wxss */"},"convertDir/pages/my/myDoctor/doctorList/doctorList":{"js":"const app = getApp();\nimport {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2\n} from \"../../../../utils/util\";\nconst apiUrl = {\n  getMyDoctor: 'api/userPatient/myDoctor', // 患者绑定的医生列表\n  getPatientList: 'api/userPatient/patientListByUserId' // 获取患者列表\n  // getPatientList: 'api/userPatient/selectUserPatientList' // 获取患者列表\n}\n\nexport default {\n\n  data: function() {\n    return {\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      patientList: [], // 患者列表\n      doctorList: [], // 医生列表\n      pageNum: 1,\n      pageSize: 50,\n      lastPage: null, // 总页数\n      ReachBottomPatientID: '', // 向下加载更多患者ID\n      url_link: cdnStaticResourceUrl,\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.getPatientList()\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n  // 患者列表tab\n  getPatientList() {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    ajax2('post', apiUrl.getPatientList, {userId: Taro.getStorageSync('userInfo').userId}, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result && res.data.result.length) {\n          res.data.result[0].isActive = true\n          this.setData({\n            patientList: res.data.result\n          },function (){\n            this.setData({\n              ReachBottomPatientID: this.data.patientList[0].id\n            })\n            this.getMyDoctor(this.data.patientList[0].id, 'none')\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg || \"服务器异常请重试\",\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if (this.data.pageNum > this.data.lastPage) {\n      Taro.showToast({\n        title: '没有更多了',\n        icon: 'none'\n      })\n    } else {\n      this.data.pageNum++\n      this.getMyDoctor(this.data.ReachBottomPatientID, 'bottom')\n    }\n  },\n  // 获取患者对应的医生\n  getMyDoctor(id, pageType) {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    let params = {\n      patientId: id,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize\n    }\n    ajax2('post', apiUrl.getMyDoctor, params, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result) {\n          this.setData({\n            doctorList: pageType == 'bottom' ? this.data.doctorList.concat(res.data.result.list) : res.data.result.list,\n            lastPage: res.data.result.lastPage,\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg || \"服务器异常请重试\",\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  // 选择tab标签\n  choosePatient(e) {\n    let patientItem = e.currentTarget.dataset.item\n    if (this.data.patientList.length) {\n      this.data.patientList.forEach((item, key) => {\n        if (item.id === patientItem.id ) {\n          item.isActive = true\n          this.getMyDoctor(item.id, 'none')\n          this.setData({\n            ReachBottomPatientID: patientItem.id,\n            pageNum: 1\n          })\n        } else {\n          item.isActive = false\n        }\n      })\n    }\n    this.setData({\n      patientList: this.data.patientList\n    })\n  },\n  chooseDoctor(e) {\n    let doctorItem = e.currentTarget.dataset.item\n    this.data.doctorList.forEach((item, key) => {\n      if (item.guid === doctorItem.guid ) {\n        Taro.navigateTo({\n          url: `/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${doctorItem.guid}&patientId=${this.data.ReachBottomPatientID}&source=myDoctor`\n        })\n      }\n    })\n  }\n};","json":{"missingData-view":"/component/missingData/missingData"},"wxml":"\n  <view class=\"doctorList-auto-container\"> \n    <navBar title-text=\"我的医生\"></navBar>\n    <view class=\"doctor-contain\">  \n      <scroll-view class=\"doctor-wrapper\" scroll-x=\"true\" :style=\"{top: navBarHeightpx}\">\n        <view class=\"doctor-header\">\n          <view :class=\"[doctor-header-tag,( item.isActive? 'green':'' )]\" v-for=\"(item, id) in patientList\" :key=\"id\" bindtap=\"choosePatient\" :data-item=\" item \">\n                {{item.patientName}}\n            \n          </view>\n        </view>\n      </scroll-view>\n      <view class=\"doctor-list\" v-if=\"doctorList.length\">\n        <view v-for=\"(item, id) in doctorList\" bindtap=\"chooseDoctor\" :data-item=\" item \" :key=\"id\"> \n          <image class=\"doctor-list-img\" :src=\"item.headPortrait ? item.headPortrait : '/images/icon-doctor-photo.png'\"></image>\n          <view> \n            <view class=\"doctor-list-name\"> \n              <text style=\"font-weight: bold\">{{item.name}}\n              </text>\n              <text>{{item.titleName}}\n              </text>\n            </view>\n            <view class=\"doctor-list-job\"> \n              <text>{{item.workInstName}}\n              </text>\n              <text>{{item.docDeptName}}\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval=\"暂无医生信息\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      </block>\n    </view>\n  </view>","wxss":".doctor-contain{\n  padding-top: 116rpx;\n}\n.doctor-header{\n  display: flex;\n  padding: 23rpx 18rpx;\n}\n\n.doctor-wrapper{\n  overflow-x: scroll;\n  white-space: nowrap;\n  background: #fff;\n  position: fixed;\n}\n.doctor-header-tag{\n  width: 160rpx;\n  height: 60rpx;\n  background: #f6f8fd;\n  color: #41435d;\n  border: 1rpx solid #f6f8fd;\n  font-size: 24rpx;\n  text-align: center;\n  line-height: 60rpx;\n  border-radius: 34rpx;\n  margin-right: 20rpx;\n  flex-shrink:0;\n}\n.green{\n  background: #e8fff3;\n  border: 1rpx solid #00b955;\n  color: #00b955;\n}\n.doctor-list{\n  padding: 0 24rpx;\n}\n.doctor-list >view{\n  padding: 32rpx;\n  background: #fff;\n  height: 90rpx;\n  display: flex;\n  align-items: center;\n  margin-bottom: 20rpx;\n  border-radius: 12rpx;\n}\n.doctor-list-img{\n  width: 90rpx;\n  height: 90rpx;\n  border-radius: 50%;\n  margin-right: 24rpx;\n}\n.doctor-list-name{\n  color: #111334;\n}\n.doctor-list-name text:first-child{\n  font-size: 32rpx;\n  margin-right: 12rpx;\n  margin-bottom: 14rpx;\n}\n.doctor-list-name text{\n  font-size: 28rpx;\n}\n.doctor-list-job{\n  color: #666883;\n  font-size: 28rpx;\n}\n.doctor-list-job text:first-child{\n  margin-right: 12rpx;\n}"},"convertDir/pages/my/myDrug/drugstoreToMyInfo/drugstoreToMyInfo":{"js":"\nexport default {\n  data: function() {\n    return {\n      drugstoreStatus: true\n    };\n  },\n  onLoad:function(){\n\n  },\n  onShow: function() {\n\n  }\n};","json":{"navBar":"/component/navBar/navBar","myInfo":"/component/myInfo/myInfo"},"wxml":"\n  <view class=\"drugstoreToMyInfo-auto-container\"> \n    <navBar title-text=\"我的\" :isCustom=\" true \" background=\"#F5F6FA\"></navBar>\n    <myInfo :status=\"drugstoreStatus\"></myInfo>\n  </view>","wxss":""},"convertDir/pages/my/myDrug/myGroupIndent/myGroupIndent":{"js":"export default {\n\n  data: function() {\n    return {\n\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    Taro.redirectTo({\n      url: '/pages/note/myGroupIndent/myGroupIndent'\n    })\n  }\n};","wxml":"","json":{},"wxss":"/* pages/my/myDrug/myGroupIndent/myGroupIndent.wxss */"},"convertDir/pages/my/myDrug/myInfo/myInfo":{"js":"export default {\n  data: function() {\n    return {\n\n    };\n  },\n  onLoad:function(){\n\n  },\n  onShow: function() {\n\n  }\n};","json":{"myInfo":"/component/myInfo/myInfo"},"wxml":"\n  <view class=\"myInfo-auto-container\"> \n    <navBar title-text :showCapsule=\"false\" background=\"#F5F6FA\"></navBar>\n    <myInfo></myInfo>\n  </view>","wxss":"@import '/common/tableView.wxss';\npages {\n  background: #F5F6FA;\n}\n\n.header {\n  width: 100%;\n  padding: 20rpx 24rpx 36rpx;\n  padding-bottom: 40rpx;\n  display: flex;\n  align-items: center;\n  position: relative;\n  box-sizing: border-box;\n}\n\n.header .icon_user {\n  width: 127rpx;\n  height: 127rpx;\n  border-radius: 50%;\n  border: 2rpx solid #ffffff;\n}\n\n.header .user_name {\n  font-size: 42rpx;\n  color: #111334;\n  font-weight: 600;\n  margin-left: 24rpx;\n}\n\n.header .text {\n  font-size: 26rpx;\n  color: #666883;\n  margin-top: 10rpx;\n  font-weight: normal;\n}\n\n.header .hide_control {\n  width: 100rpx;\n  height: 100rpx;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.common_section .cell::before {\n  border: 0;\n}\n\n.nav-box {\n  margin: 0 24rpx;\n  border-radius: 12rpx;\n}\n\n.nav-box .cell {\n  padding: 20rpx 24rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #111334;\n}\n\n.nav-box .cell .cell_right {\n  flex: 1;\n  text-align: right;\n  font-size: 26rpx;\n  color: #9D9FB8;\n  font-weight: normal;\n}\n\n.nav-box .flex-boxs{\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20rpx 0 33rpx;\n  color: #41435D;\n  font-size: 24rpx;\n}\n\n.nav-box .flex-box {\n  text-align: center;\n  flex: 1;\n}\n\n.nav-box .flex-box__icons {\n  position: relative;\n  width: 56rpx;\n  height: 56rpx;\n  margin: 0 auto 13rpx;\n}\n\n.nav-box .flex-box__count {\n  position: absolute;\n  top: -14rpx;\n  right: -14rpx;\n  min-width: 28rpx;\n  height: 28rpx;\n  border: 2rpx solid #F93A4A;\n  box-sizing: border-box;\n  color: #F93A4A;\n  font-size: 20rpx;\n  font-weight: bold;\n  background: #FFFFFF;\n  line-height: 28rpx;\n  border-radius: 15rpx;\n}\n\n.nav-box .flex-box__icon {\n  width: 100%;\n  height: 100%;\n}\n\n.btns-box {\n  margin: 20rpx 24rpx;\n  border-radius: 12rpx;\n  background: #FFFFFF;\n}\n\n.btns-box .cell {\n  padding: 27rpx 24rpx;\n  color: #111334;\n  font-size: 30rpx;\n}\n\n.btns-box .cell-img {\n  width: 46rpx;\n  height: 46rpx;\n  margin-right: 24rpx;\n}\n\n.btns-box .cell_center {\n  flex: 1;\n}\n\n.cell-arrow {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.login-out {\n  text-align: center;\n  border: 0;\n  height: 90rpx;\n  line-height: 90rpx;\n  background: #FFFFFF;\n  position: relative;\n  margin: 0 24rpx 24rpx;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  color: #111334;\n}\n\n.scanCode {\n  height: 60rpx;\n  width: 250rpx;\n  color: #FFFFFF;\n  text-align: center;\n  line-height: 60rpx;\n  border-radius: 30rpx;\n  margin: 10rpx 0;\n}\n.alert_box .text {\n  height: 80rpx;\n  line-height: 80rpx;\n  margin-bottom: 20rpx;\n}\n.alert_box navigator{\n  height: 90rpx;\n  line-height: 90rpx;\n  border-top: 1rpx solid #E1E1E1;\n} \n.control-tool__title {\n  padding: 50rpx 0 10rpx;\n  border-bottom: 1rpx solid #EEEEEE;\n  margin-bottom: 20rpx;\n  color: #666666\n}\n\n/* 扫码问诊 */\n.banner{\n  display: block;\n  width: 702rpx;\n  height: 135rpx;\n  margin: 0 auto;\n  margin-top: 20rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n/* 推广 */\n.promotion{\n  line-height: 128rpx;\n  background-color: #fff;\n  display: flex;\n  margin: 20rpx 24rpx;\n  margin-top: 20rpx;\n  align-content: center;\n  justify-content: space-between;\n  border-radius: 12rpx;\n}\n.promotion_left{\n  display: flex;\n  padding-left: 24rpx;\n}\n.promotion_left_box{\n  line-height: initial;\n}\n.promotion_left image{\n  width: 66rpx;\n  display: block;\n  margin-top: 39rpx;\n  margin-right: 24rpx;\n  height: 56rpx;\n}\n.promotion_left_box_title{\n  color: #111734;\n  font-size: 32rpx;\n  margin-top: 24rpx;\n}\n.promotion_left_box_text{\n  font-size: 22rpx;\n  color: #9D9FB8;\n}\n.promotion_right{\n  padding-right: 24rpx;\n}\n.promotion_right image{\n  width: 28rpx;\n  height: 28rpx;\n  margin-top: 51rpx;\n}\n .input_box {\n  height: 60rpx;\n  padding: 2rpx 10rpx;\n  border: 1rpx solid #E1E1E1;\n  font-size: 30rpx;\n  margin-bottom: 10rpx;\n}\n.top-tab{\n  height: 80rpx;\n  width: 100%;\n  background-color: #fff;\n  display: flex;\n}\n.top-tab__item {\n  text-align: center;\n  font-size: 28rpx;\n  line-height: 80rpx;\n  position: relative;\n  letter-spacing: 1.11rpx;\n  flex: 1;\n  color: #666883;\n}\n\n.top-tab__item.active{\n  font-weight: bold;\n}\n\n.top-tab__item.active:after {\n  display: block;\n  width: 40rpx;\n  height: 6rpx;\n  background: #00b955;\n  content: \"\";\n  left: 50%;\n  margin-left: -25rpx;\n  border-radius: 3rpx;\n  bottom: 0px;\n  position: absolute;\n}\n"},"convertDir/pages/my/myPage/promoteGoods/components/share/share":{"json":{},"wxml":"\n  <view class=\"share-auto-container\">\n    <canvas canvas-id=\"sharePic\" style=\"width: 375px;height: 456px;\"></canvas>\n  </view>","wxss":"","js":"import {\n  ajax2\n} from \"../../../../../../utils/util\";\nconst ajaxUrl = {\n  qcodeUrl: 'api/popularize/product/createORCode'\n}\n\nexport default {\n  props: {\n    durgstoreName: {\n      type: String,\n      default: ''\n    },\n    // 小程序码对象\n    sharePath: {\n      type: Object,\n      default: {}\n    },\n    goodsInfo: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function() {\n    return {\n      src: '', // canvas转成png最后的url\n      fontStr: 'px PingFangSC-Regular,PingFang SC', // 字体\n      wechat: '', // 小程序维码\n      width: 750,\n      height: 912\n    };\n  },\n  mounted() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.reversePath2Wechat();\n  },\n  methods: {\n    /**\n     * @description: 小程序路径转二维码\n     * @param {void}\n     * @return: image\n     */\n    reversePath2Wechat() {\n      const {\n        scene,\n        path,\n      } = this.data.sharePath\n      ajax2('post', ajaxUrl.qcodeUrl,{\n        content: scene,\n        page: path\n      }, res => {\n        if (res.data.code === 0) {\n          this.setData({\n            wechat: res.data.result\n          })\n          this.init();\n          return false;\n        }\n        Taro.showToast({\n          title: '二维码生成失败',\n          icon: 'none',\n        });\n      }, function(res){\n        Taro.showToast({\n          title: '二维码生成失败',\n          icon: 'none',\n        });\n      })\n    },\n    /**\n     * @description: 创建canvas,设置背景色\n     */\n    init() {\n      const _this = this;\n      const ctx = Taro.createCanvasContext('sharePic', this);\n      // canvas 背景色\n      ctx.fillStyle = '#fff';\n      ctx.fillRect(0, 0, _this.data.width, _this.data.height);\n      // 生成商品图片\n      _this.setGoodImg(ctx);\n    },\n    /**\n     * @description: 设置商品图片\n     * @param {ctx} context对象\n     * @return: void\n     */\n    setGoodImg(ctx) {\n      const _this = this;\n      // 商品信息图片\n      let flag = true;\n     \n      Taro.getImageInfo({\n        src: _this.data.goodsInfo.img,\n        success (res) {\n          flag = false;\n          ctx.drawImage(res.path, 38, 27, 300, 300);\n          ctx.restore();\n          // 生成Logo\n          _this.createLogo(ctx);\n        },\n        // complete: () => {\n        //   if (flag) {\n        //     // 如果生成失败了，可能会需要个默认图\n        //     // ctx.drawImage(photo, 38, 27, 300, 300);\n        //   }\n        //   ctx.restore();\n        //   // 生成Logo\n        //   _this.createLogo(ctx);\n        // }\n      })\n    },\n    /**\n    * @description: 生成logo\n    * @param {}\n    * @return:\n    */\n    createLogo(ctx) {\n      const _this = this;\n      const logoUrl = '../../../../../../images/app-logo.png';\n      // 背景图\n      ctx.drawImage(logoUrl, 21, 21, 98, 31);\n      ctx.draw(true, _this.setDrugStoreName.bind(_this, ctx));\n    },\n    /**\n     * @description: 绘制门店名称及背景图案\n     * @param {ctx} context对象\n     * @return: void\n     */\n    setDrugStoreName(ctx) {\n      const _this = this;\n      const info = _this.data.goodsInfo;\n      // 绘制门店背景图案\n      _this.drawRoundedRect(ctx, 38, 292, 300, 36, 14, true, false);\n      let storeName = this.data.durgstoreName;\n      let fontWeight = '500';\n      let fontSize = '16'\n      ctx.font = (fontWeight ? '' + fontWeight + ' ' : '') + fontSize + _this.data.fontStr;\n      let nameStr = '';\n      let width = 0;\n      storeName.split(\"\").forEach(v => {\n        if (width < 260) {\n          width += ctx.measureText(v).width;\n          if (width >= 260) {\n            nameStr += '...';\n          } else {\n            nameStr += v;\n          }\n        }\n      })\n      let startX = (375 - width) / 2;\n      // 店名\n      _this.drawText(ctx, nameStr, startX, 316, '#fff', fontSize, fontWeight);\n      // 药品名\n      _this.setMedTitle(ctx);\n    },\n    /**\n    * @description: 生成药品名\n    * @param {}\n    * @return:\n    */\n    setMedTitle(ctx) {\n      const _this = this;\n      const info = _this.data.goodsInfo;\n      // // 药名\n      const result = _this.breakLinesForCanvas(info.medicinesName + info.commonName + info.productSpec, 240, \"400 16px\", ctx)\n      const h = 30;\n      let baseLabelH = 0;\n      result.forEach((v, i) => {\n        if (i < 2) {\n          if (i === 1) {\n            if(v.length > 15) {\n              v = v.slice(0, 15) + '...'\n            }\n          }\n          baseLabelH = 356 + i * 25;\n          _this.drawText(ctx, v, 21, baseLabelH, '#111334', 16, true);\n        }\n      });\n      // 画 活动标签\n      _this.setActiveLabel(ctx, baseLabelH);\n    },\n    /**\n    * @description: 画 活动标签\n    * @param {}\n    * @return:\n    */\n    setActiveLabel(ctx, baseLabelH) {\n      const _this = this;\n      const info = _this.data.goodsInfo;\n      if (info.labelList && info.labelList.length > 0) {\n        // 画圆角矩形\n        _this.drawBorderRect(ctx, 21, baseLabelH + 10, 61, 19, 3, false, true, \"#f93a4a\");\n        _this.drawBorderRect(ctx, 21, baseLabelH + 10, 61, 19, 3, true, false, \"#ffeeef\");\n        // 标签\n        _this.drawText(ctx, info.labelList[0], 25, baseLabelH + 25, '#F93A4A', 13);\n      }\n      // 画价格\n      let baseX = 21;\n      const moneyX = '¥';\n      // 如果有活动价格，则显示后面划线部分的原价\n      let realMoney = info.actPrice ? info.actPrice : info.customPrice;\n      // ¥\n      _this.drawText(ctx, moneyX, 21, 415 + 24, '#FF2121', 18, '500');\n      const mX = ctx.measureText(moneyX).width;\n      const baseXnew = baseX + mX + 1;\n      // 价格\n      _this.drawText(ctx, realMoney, baseXnew, 415 + 24, '#FF2121', 24, '500');\n      \n      // 如果有活动价格，则划线价格显示原价\n      if (info.actPrice) {\n        const nMoney = ctx.measureText(realMoney + '').width;\n        const baseXlast = baseXnew + nMoney + 6;\n        \n        let value = '¥' + info.customPrice;\n        // 价格\n        _this.drawText(ctx, value, baseXlast, 415 + 24, '#999', 12, '500');\n        const length = ctx.measureText(value).width;\n        // 画下划线\n        ctx.beginPath();\n        ctx.moveTo(baseXlast, 435);\n        ctx.lineTo(baseXlast + length, 435);\n        ctx.strokeStyle = \"#999\";\n        ctx.stroke();\n      }\n      _this.setWechatCode(ctx);\n    },\n    /**\n    * @description: 长按识别二维码文字，以及二维码图片\n    * @param {}\n    * @return:\n    */\n    setWechatCode(ctx) {\n      const _this = this;\n      // 画二维码\n      Taro.getImageInfo({\n        src: _this.data.wechat,\n        success: res => {\n          ctx.drawImage(res.path, 268, 338, 86, 86);\n          // 长按识别二维码\n          _this.drawText(ctx, \"长按识别二维码\", 270, 415 + 24, '#9D9FB8', 12, '400');\n          ctx.draw(true, _this.convertCanvasToImage.bind(_this, ctx));\n        }\n      });\n    },\n    /**\n     * @description: canvas 绘制文字\n     * @param {ctx, text, x, y, fontColor, fontSize, fontWeight} \n     * text: 文案\n     * x: x坐标\n     * y: y坐标\n     * fontColor: 文字颜色\n     * fontsize: 文字字大小\n     * fontWeight: font-weight\n     * @return: void\n     */\n    drawText(ctx, text, x, y, fontColor, fontSize, fontWeight) {\n      const _this = this;\n      ctx.save();\n      ctx.fillStyle = fontColor;\n      ctx.font = (fontWeight ? '' + fontWeight + ' ' : '') + fontSize + _this.data.fontStr;\n      ctx.fillText(text, x, y);\n      ctx.restore();\n    },\n    /**\n     * @description: 矩形半圆角div（公益推广圆背景半圆角）\n     * @param {ctx, x, y, width, height, r, fill, stroke} \n     * x: x坐标\n     * y: y坐标\n     * width: 宽\n     * height: 高\n     * r: 圆角半径\n     * fill: true - 背景色填充\n     * stoke: true - 有边框\n     * @return: void\n     */  \n    drawRoundedRect(ctx, x, y, width, height, r, fill, stroke) {\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(x + r, y);\n      ctx.lineTo(x + width, y)\n      ctx.arcTo(x + width, y + height, x + width - r, y + height, r);\n      ctx.lineTo(x, y + height);\n      ctx.arcTo(x, y, x + r, y, r);\n      ctx.fillStyle = '#0EBBC5';\n      if (fill) { ctx.fill(); }\n      if (stroke) { ctx.stroke(); }\n      ctx.restore();\n    },\n    /**\n     * @description: 矩形半圆角div（公益推广圆背景半圆角）\n     * @param {ctx, x, y, width, height, r, fill, stroke} \n     * x: x坐标\n     * y: y坐标\n     * width: 宽\n     * height: 高\n     * r: 圆角半径\n     * fill: true - 背景色填充\n     * stoke: true - 有边框\n     * @return: void\n     */  \n    drawBorderRect(ctx, x, y, width, height, r, fill, stroke, color) {\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(x + r, y);\n      ctx.lineTo(x + width - r, y);\n      ctx.arcTo(x + width, y, x + width, y + r, r);\n      ctx.lineTo(x + width, y + height - r);\n      ctx.arcTo(x + width, y + height, x + width - r, y + height, r);\n      ctx.lineTo(x + width - r, y + height);\n      ctx.arcTo(x, y + height, x, x + height - r, r);\n      ctx.lineTo(x, y + r);\n      ctx.arcTo(x, y, x + r, y, r);\n      if (fill) {\n        ctx.fillStyle = color;\n        ctx.fill();\n      }\n      if (stroke) {\n        ctx.strokeStyle = color;\n        ctx.stroke();\n      }\n      ctx.restore();\n    },\n    /**\n     * @description: 寻找文字换行切换断点\n     * @param {text, width, ctx} 等同于indexOf; text:文字 ，width: 一行长度\n     * @return: Boolean\n     */\n    findBreakPoint(text, width, ctx) {\n      let min = 0;\n      let max = text.length - 1;\n      while (min <= max) {\n        let middle = Math.floor((min + max) / 2);\n        let middleWidth = ctx.measureText(text.substr(0, middle)).width;\n        let oneCharWiderThanMiddleWidth = ctx.measureText(text.substr(0, middle + 1)).width;\n        if (middleWidth <= width && oneCharWiderThanMiddleWidth > width) {\n          return middle;\n        }\n        if (middleWidth < width) {\n          min = middle + 1;\n        } else {\n          max = middle - 1;\n        }\n      }\n      return -1;\n    },\n    /**\n     * @description: 文字换行\n     * @param {void} \n     * @return: Array 文字截取后的数组\n     */\n    breakLinesForCanvas(text, width, font, ctx) {\n      let _this = this;\n      let result = [];\n      let breakPoint = 0;\n      if (font) {\n        ctx.font = font;\n      }\n      while ((breakPoint = _this.findBreakPoint(text, width, ctx)) !== -1) {\n        result.push(text.substr(0, breakPoint));\n        text = text.substr(breakPoint);\n      }\n      if (text) {\n        result.push(text);\n      }\n      return result;\n    },\n    /**\n     * @description: canvas转图片后的base64\n     * @param {void} \n     * @return: void\n     */\n    convertCanvasToImage() {\n      const _this = this;\n      Taro.canvasToTempFilePath({\n        canvasId: 'sharePic',\n        quality: 1,\n        success: function (res) {\n          const src = res.tempFilePath;\n          _this.setData({\n            src,\n          });\n          _this.triggerEvent(\"reverseImg\", src);\n        }\n      }, _this)\n    }\n  }\n};\n"},"convertDir/pages/my/myPage/promoteGoods/components/shareApp/shareApp":{"js":"export default {\n  props: {\n    goodsInfo: {\n      type: Object,\n      default: null\n    },\n    durgstoreName: {\n      type: String,\n      default: ''\n    },\n    // 小程序码对象\n    sharePath: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function() {\n    return {\n      src: '', // canvas转成png最后的url\n      failAuthorize: false, // 授权按钮\n    };\n  },\n  methods: {\n    /**\n    * @description: 关闭mask\n    * @param {}\n    * @return:\n    */\n    onHandleCloseMask() {\n      this.triggerEvent(\"closeMask\");\n    },\n    /**\n     * @description: canvas转成图片后回调\n     * @param {String} 图片临时url\n     * @return: void\n     */\n    onHandleReverseImg(obj) {\n      this.setData({\n        src: obj.detail\n      })\n      if (obj.detail) {\n        Taro.hideLoading();\n      }\n    },\n    /**\n     * @description: 点击mask消失\n     * @param {type} void\n     * @return: void\n     */\n    onHandleHideMask() {\n      this.setData({\n        visible: false\n      })\n      this.triggerEvent('hideShareModal');\n    },\n    /**\n     * @description: 下载图片到本地\n     * @param {type} \n     * @return: void\n     */  \n    onHandleDownLoadImg() {\n      const _this = this;\n      Taro.authorize({\n        scope: 'scope.writePhotosAlbum',\n        success () {\n          Taro.saveImageToPhotosAlbum({\n            filePath: _this.data.src,\n            success() {\n              Taro.showToast({\n                icon: 'none',\n                title: '图片保存成功'\n              })\n              _this.onHandleHideMask();\n            }\n          })\n        },\n        fail() {\n          _this.setData({\n            failAuthorize: true\n          })\n        }\n      })\n    },\n    /**\n     * @description: 授权失败，打开设置授权界面\n     * @param {void} \n     * @return: void\n     */\n    onHandleDownLoadImgFail() {\n      Taro.openSetting({\n        success: res => {\n          this.setData({\n            failAuthorize: false\n          })\n        }\n      })\n    }\n  }\n};\n","json":{"share-canvas":"../share/share"},"wxml":"\n  <view class=\"shareApp-auto-container\">\n    <view> \n      <view style=\"position:fixed;top:999999999999999999999rpx;\">\n        <share-canvas class=\"sharemask-content_sharepicture_canvas\" :goodsInfo=\"goodsInfo\" :sharePath=\"sharePath\" :durgstoreName=\"durgstoreName\" bindreverseImg=\"onHandleReverseImg\"></share-canvas>\n      </view>\n      <view class=\"sharemask\"> \n        <view class=\"sharemask-bg\" bindtap=\"onHandleHideMask\"></view>\n        <view class=\"sharemask-content\"> \n          <view class=\"sharemask-content_sharepicture\">\n            <image v-if=\"src\" :src=\"src\"></image>\n          </view>\n          <view class=\"sharemask-content_bottom\"> \n            <view class=\"sharemask-content_bottom_title\"> \n              <text>分享\n              </text>\n              <image src=\"../../../../../../images/half-screen-dialog-close.png\" bindtap=\"onHandleCloseMask\"></image>\n            </view>\n            <view class=\"sharemask-content_bottom_btns\">       \n              <view class=\"flex-1\"></view>\n              <view class=\"flex-1\"></view>\n              <view class=\"flex-1\"> \n                <button open-type=\"share\">\n                  <image src=\"../../images/wechat-download.png\"></image>\n                </button>\n                <text>微信好友\n                </text>\n              </view>\n              <view class=\"flex-1\"></view>\n              <view class=\"flex-1\"></view>\n              <view class=\"flex-1\"> \n                <view> \n                  <image v-if=\"failAuthorize\" bindtap=\"onHandleDownLoadImgFail\" src=\"../../images/download-local.png\"></image>\n                  <image v-else bindtap=\"onHandleDownLoadImg\" src=\"../../images/download-local.png\"></image>\n                </view>\n                <text>保存相册\n                </text>\n              </view>\n              <view class=\"flex-1\"></view>\n              <view class=\"flex-1\"></view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".sharemask {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 999;\n}\n.sharemask .sharemask-bg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n}\n.sharemask .sharemask-bg {\n  background: rgba(0, 0, 0, .8);\n  opacity: .7;\n}\n.sharemask .sharemask-content {\n  position: absolute;\n  top: 160rpx;\n  bottom: 0;\n  width: 100%;\n  z-index: 1001;\n  display: flex;\n  flex-direction: column;\n}\n.sharemask .sharemask-content .sharemask-content_sharepicture {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.sharemask .sharemask-content .sharemask-content_sharepicture image {\n  width: 638rpx;\n  height: 776rpx;\n  border-radius: 12rpx;\n  margin-top: 0rpx;\n}\n.sharemask .sharemask-content .sharemask-content_bottom {\n  height: 345rpx;\n  background: rgba(255, 255, 255, 1);\n  border-radius: 12rpx 12rpx 0 0;\n}\n.sharemask .sharemask-content .sharemask-content_bottom_title {\n  position: relative;\n  font-size: 36rpx;\n  font-weight: bold;\n  text-align: center;\n  padding: 34rpx 0 60rpx;\n}\n.sharemask .sharemask-content .sharemask-content_bottom_title image{\n  position: absolute;\n  right: 32rpx;\n  width: 38rpx;\n  height: 38rpx;\n  top: 36rpx;\n}\n.sharemask .sharemask-content .sharemask-content_bottom .sharemask-content_bottom_btns {\n  display: flex;\n  padding-bottom: 70rpx;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n}\n\n.sharemask .sharemask-content .sharemask-content_bottom .sharemask-content_bottom_btns .flex-1 {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  font-size: 24rpx;\n  color: #111334;\n  text-align: center;\n  font-weight: 400;\n}\n.sharemask .sharemask-content .sharemask-content_bottom .sharemask-content_bottom_btns .flex-1 > view,\n.sharemask .sharemask-content .sharemask-content_bottom .sharemask-content_bottom_btns .flex-1 > button,\n.sharemask .sharemask-content .sharemask-content_bottom .sharemask-content_bottom_btns .flex-1 text {\n  text-align: center;\n  font-size: 24rpx;\n  line-height: 40rpx;\n  background: #fff;\n}\n\n.sharemask .sharemask-content .sharemask-content_bottom .sharemask-content_bottom_btns .flex-1 image {\n  width: 96rpx;\n  height: 96rpx;\n}"},"convertDir/pages/my/myPage/promoteGoods/promoteGoods":{"js":"import {\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\nconst ajaxUrl = {\n  listUrl: 'miniapp/popularize/product/list'\n}\n\nexport default {\n\n  data: function() {\n    return {\n      pageTitle: \"推广商品列表\",\n      visible: false,\n      sharePath: {},\n      goodsInfo: {},\n      pageNum: 1,\n      pageSize: 10,\n      isLastPage: false,\n      proList: [], //商品列表\n      isAjaxing: false,\n      options: '',\n      urlLink: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    this.setData({\n      options\n    })\n    // 获取数据列表\n    this.fetchList();\n  },\n  /**\n  * @description: 加载列表数据\n  * @param {}\n  * @return:\n  */\n  fetchList() {\n    this.setData({\n      isAjaxing: true\n    })\n    ajax2('get', ajaxUrl.listUrl, {\n      drugstoreId: this.data.options.drugstoreId,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize\n    }, res => {\n      if(res.data.code == 0) {\n        this.setData({\n          isAjaxing: false\n        })\n        const list = this.data.proList.concat(res.data.result.list);\n        this.setData({\n          proList: list,\n          isLastPage: res.data.result.isLastPage\n        })\n      }else {\n        this.setData({\n          isAjaxing: false\n        })\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n  * @description: 跳详情页\n  * @param {}\n  * @return:\n  */\n  onGoInfo() {\n    Taro.navigateTo({\n      url: `/pages/my/myPage/promotionDetails/promotionDetails?promoterId=${ this.data.options.promoterId }`\n    })\n  },\n  /**\n  * @description: 关闭分享层\n  * @param {}\n  * @return:\n  */\n  onHandleCloseMask() {\n    this.setData({\n      visible: false\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    const isLastPage = this.data.isLastPage;\n    if (!isLastPage) {\n        this.data.pageNum = ++this.data.pageNum\n        this.fetchList()\n    }\n  },\n  /**\n  * @description: 分享功能\n  * @param {}\n  * @return:\n  */\n  onHandleShare(e) {\n    const item = e.currentTarget.dataset.item;\n    // 判断分享path, 店铺类型 -- 0:LBS，1：是B2C\n    let b2c = item.drugstoreType;\n    let options = this.data.options;\n    const scene = `a-${options.drugstoreId }-${item.medicinesId}-${options.promoterId}-${item.popularizeId}`;\n    let path = 'pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail'\n    if (b2c) {\n      path = 'pages/b2c/pages/goodsDetail/goodsDetail';\n    }\n    this.setData({\n      sharePath: {\n        path,\n        scene\n      },\n      goodsInfo: item,\n      visible: true\n    })\n  },\n  /**\n  * @description: 分享\n  * @param {}\n  * @return:\n  */\n  onShareAppMessage() {\n    const { sharePath, goodsInfo } = this.data;\n    console.log(\"goodsInfo.img\", goodsInfo.img)\n    return {\n      title: `${goodsInfo.medicinesName}${goodsInfo.commonName}${goodsInfo.productSpec}  ¥${goodsInfo.actPrice ? goodsInfo.actPrice : goodsInfo.customPrice}`,\n      path: `${sharePath.path}?scene=${sharePath.scene}`,\n      imageUrl: goodsInfo.medicinesSharePhoto,\n    }\n  }\n};","json":{"share-app":"./components/shareApp/shareApp","missingData-view":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"promoteGoods-auto-container\">   \n    <view class=\"index_z\">\n      <navBar :title-text=\" pageTitle \" :showCapsule=\" true \"></navBar>\n    </view>\n    <view class=\"subtitle\"> \n      <view>推广业绩\n      </view>\n      <view class=\"subtitle-link theme-text\" bindtap=\"onGoInfo\"> \n        <text>去查看\n        </text>\n        <view class=\"arrow\"></view>\n      </view>\n    </view>\n    <view class=\"shop-cart promote_goods\">\n      <block>\n        <block> \n          <view class=\"proList sp_list\" v-if=\" proList.length \">  \n            <view class=\"goodslist\">\n              <view class=\"proItem\" v-for=\"(item, index) in  proList \" :key=\"index\">\n                <view class=\"itemTop flex\" :data-item=\" item \" :data-index=\" index \"> \n                  <image :src=\" item.img \"></image>\n                  <view class=\"itemInfo\">   \n                    <view class=\"title\">\n                  {{ item.medicinesName }}{{ item.commonName }}{{ item.productSpec }}\n                \n                    </view>\n                    <view class=\"active_tag\" v-if=\" item.labelList.length > 0 \">\n                      <view class=\"tag\" v-for=\"(item, key) in  item.labelList \" :key=\"key\">{{ item }}\n                      </view>\n                    </view>\n                    <view class=\"price\">{{ item.actPrice ? item.actPrice : item.customPrice }}\n                      <view>¥\n                      </view>\n                      <text v-if=\" item.actPrice \">¥{{ item.customPrice }}\n                      </text>\n                    </view>\n                    <view class=\"share-goods\" bindtap=\"onHandleShare\" :data-item=\"item\"> \n                      <image src=\"./images/share.png\"></image>\n                      <text>分享\n                      </text>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"tip\" v-if=\" isAjaxing \">加载中...\n            </view>\n            <view class=\"tip\" v-else-if=\" isLastPage \">已经到底了\n            </view>\n          </view>\n          <block v-if=\" proList.length == 0 && !isAjaxing \">\n            <view style=\"background-color:#fff;height: 100vh;\">\n              <missingData-view zhi=\"new1\" textval=\"暂无推广商品，敬请期待！\" :imageUrl=\" urlLink + 'images/empty-log.png' \"></missingData-view>\n            </view>\n          </block>\n        </block>\n      </block>\n    </view>\n    <share-app v-if=\"visible\" :sharePath=\"sharePath\" :goodsInfo=\"goodsInfo\" :durgstoreName=\"options.drugstoreName\" bindcloseMask=\"onHandleCloseMask\"></share-app>\n  </view>","wxss":"/* pages/onlineGoods/productSearch/productSearch.wxss */\n@import '../../../../common/tableView.wxss';\n.index_z {\n  position: relative;\n  z-index: 99999999;\n}\n.subtitle {\n  display: flex;\n  padding: 23rpx 24rpx;\n  background: #fff;\n  justify-content: space-between;\n  font-size: 32rpx;\n  color: #111334;\n  font-weight: bold;\n}\n.subtitle .subtitle-link {\n  font-size: 28rpx;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n}\n\n.subtitle .subtitle-link .arrow {\n  width: 0;\n  height: 0;\n  border: 8rpx solid transparent;\n  border-left-color: #00b955;\n  margin-left: 10rpx;\n}\n\npage {\n  background: #f7f7f7;\n  height: 100%;\n}\n.flex {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.proList, .drugstore_list {\n  padding: 20rpx 24rpx;\n  overflow: hidden;\n}\n\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  padding-bottom: 30rpx;\n  position: relative;\n}\n.proItem::after{\n  content: '';\n  width: 100%;\n  height: 1rpx;\n  background-color: #f2f2f2;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.proItem .itemTop > image {\n  width: 144rpx;\n  min-width: 144rpx;\n  height: 144rpx;\n  background: #ccc;\n  margin: 24rpx 24rpx 64rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  flex: 1;\n  height: 228rpx;\n  padding-right: 24rpx;\n  position: relative;\n}\n\n.proItem .itemTop .itemInfo .title {\n  margin-top: 24rpx;\n  font-weight: bold;\n  font-size: 28rpx;\n  color: rgba(41, 38, 38, 1);\n  line-height: 40rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.goodslist {\n  background: #fff;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n.promote_goods .proItem {\n  padding-bottom: 0;\n}\n\n.proItem .bottom {\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n  border-top: 1rpx solid #f2f2f2;\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  background: #f7f7f7;\n}\n\n/* b2c */\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 6rpx;\n}\n.active_tag2{\n  margin-top: 0rpx;\n}\n.active_tag .tag {\n  padding: 0 9rpx;\n  height: 30rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  border: 1px solid #FF8A8A;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 22rpx;\n  color: #FF2121;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n  margin-bottom: 13rpx;\n}\n.active_tag2 .tag{\n  background: #fff;\n  border: 1px solid #e1e1e1;\n  color: #666666;\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n.share-goods {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  position: absolute;\n  right: 24rpx;\n  bottom: 26rpx;\n  font-size: 24rpx;\n  color: #41435D;\n}\n.share-goods image {\n  margin: 0 auto;\n  width: 30rpx;\n  height: 30rpx;\n}\n.price{\n  position: absolute;\n  bottom: 24rpx;\n  color: #FF2121;\n  font-size: 40rpx;\n  font-weight: bold;\n}\n.price > view {\n  font-size: 28rpx;\n  display: inline-block;\n}\n.price text{\n  font-size: 24rpx;\n  color: #999999;\n  margin-left: 12rpx;\n  text-decoration:line-through;\n}\n.button{\n  padding: 10rpx;\n  position: absolute;\n  bottom: -10rpx;\n  right: 0;\n}\n.button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00b955;\n  color: #fff;\n  font-size: 40rpx;\n}\n\n/* 推广商品列表 */\n.promote_goods .text_color{\n  color: #4087FF;\n}\n.promote_goods .search_btn{\n  color: #4087FF;\n}\n.promote_goods .gray{\n  color: #ccc;\n}\n.promote_goods .state::after{\n  background-color: #4087FF;\n}\n.promote_goods .xz_lable{\n  background: rgba(64,135,255,0.1);\n  color: #4087FF;\n}\n.promote_goods .b2c_detailed_list{\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n  box-shadow: 0px 20rpx 20rpx 0rpx rgba(64,135,255,0.1);\n}\n.promote_goods .button view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00B955;\n  color: #fff;\n  font-size: 40rpx;\n}\n.promote_goods .drug-left-photo-lable{\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}"},"convertDir/pages/my/myPage/promotionDetails/promotionDetails":{"wxml":"\n  <view class=\"promotionDetails-auto-container\">    \n    <navBar title-text=\"业绩详情\"></navBar>\n    <view class=\"header\"> \n      <view class=\"header_left\">\n    门店商品推广\n  \n        <image src=\"../../../../images/pd-icon.png\"></image>\n      </view>\n      <picker mode=\"date\" fields=\"month\" :value=\"date\" start=\"2020-10\" :end=\"dqTime\" bindchange=\"bindDateChange\">\n        <view class=\"theme-text\">\n      {{date == dqTime?'本月':date}}\n    \n        </view>\n      </picker>\n    </view>\n    <view class=\"data_statistics\"> \n      <view class=\"data_statistics_box\">  \n        <view>件\n          <text>{{totalData.orderProductTotal}}\n          </text>\n        </view>\n        <view>单\n          <text>{{totalData.orderTotal}}\n          </text>\n        </view>\n        <view>人\n          <text>{{totalData.orderUserTotal}}\n          </text>\n        </view>\n      </view>\n      <view class=\"data_statistics_box text_ms\">  \n        <view>推广商品数\n        </view>\n        <view>订单总数量\n        </view>\n        <view>下单用户数\n        </view>\n      </view>\n    </view>\n    <view class=\"pd_list\" v-for=\"(item, {{item.orderNumber}}) in list\" :wx:key=\"item.orderNumber\"> \n      <view class=\"pd_list_order\">{{item.orderNumber}}\n        <text>订单编号 \n        </text>\n      </view>\n      <view class=\"pd_info\">   \n        <text class=\"pd_number\">x{{item.medicine.number}}\n        </text>\n        <view class=\"pd_info_name over_dots\">\n      {{item.medicine.medicinesName}}{{item.medicine.commonName}}{{item.medicine.productSpec}}\n    \n        </view>\n        <view class=\"pd_info_user\"> {{item.nickName}}\n          <text>下单用户\n          </text>\n        </view>\n        <view class=\"pd_info_user pd_info_time\"> {{item.orderDate}}\n          <text>下单时间\n          </text>\n        </view>\n      </view>\n    </view>\n    <block v-if=\"list.length == 0\">\n      <view class=\"qs\">\n        <missingData-view zhi=\"new1\" textval=\"暂无推广业绩\" imageUrl=\"{{ urlLink }}/images/empty-log.png\"></missingData-view>\n      </view>\n    </block>\n  </view>","js":"// pages/my/promotionDetails/promotionDetails.js\nimport {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\n//接口\nconst apiUrl = {\n  total:'miniapp/popularize/data/total', //统计数\n  list:'miniapp/popularize/data/list', //列表\n}\n\nexport default {\n\n  data: function() {\n    return {\n      urlLink: cdnStaticResourceUrl,\n      page:1,\n      isLastPage:true,\n      dqTime:'',\n      date: '',\n      promoterId:'',//推广员id\n      totalData:{},\n      list:[]\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.setData({\n      promoterId:options.promoterId\n    })\n    this.getData();\n  },\n  getData(){\n    var date = new Date;\n    var year = date.getFullYear(); \n    var month = date.getMonth()+1;\n    this.setData({\n      dqTime:`${year}-${month}`,\n      date:`${year}-${month}`\n    })\n  },\n  bindDateChange: function(e) {\n    this.setData({\n      date: e.detail.value\n    })\n    this.getStatistics();\n    this.getList();\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    // 请求页面数据 \n    this.getStatistics();\n    this.getList();\n  },\n  // 请求推广业绩详情数据\n  getStatistics(){\n    let that = this;\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax('get', apiUrl.total, {\n      promoterId:this.data.promoterId,//推广员ID\n      orderDate:this.data.date,//下单日期\n    }, function(res) {\n      Taro.hideLoading();\n      if(res.data.code == 0){\n        that.setData({\n          totalData:res.data.result\n        })\n      }\n    }, function(res) {\n      that.showToast('请求失败')\n    })\n  },\n  // 请求推广业绩详情列表\n  getList(type){\n    Taro.showLoading({\n      title: '加载中',\n    })\n    let that = this;\n    ajax('get', apiUrl.list, {\n      pageNum:that.data.page,\n      pageSize:10,\n      promoterId:this.data.promoterId,//推广员ID\n      orderDate:this.data.date,//下单日期\n    }, function(res) {\n      Taro.hideLoading();\n      if(res.data.code == 0){\n        that.setData({\n          list:type?[...that.data.list,...res.data.result.list]:res.data.result.list,\n          isLastPage:res.data.result.isLastPage\n        })\n        \n      }\n    }, function(res) {\n      Taro.hideLoading();\n      that.showToast('请求失败')\n    })\n  },\n  showToast(text){\n    Taro.showToast({\n      title: text,\n      icon: 'none',\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if(!this.data.isLastPage){\n      this.data.page++\n      this.getList(true)\n    }else{\n      this.showToast('没有更多了')\n    }\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxss":"/* pages/my/promotionDetails/promotionDetails.wxss */\n@import '../../../../common/tableView.wxss';\n.header{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  height: 78rpx;\n  line-height: 78rpx;\n  background-color: #ffffff;\n  padding: 0 44rpx 0 44rpx;\n  border-bottom: 1rpx solid #eff0f5;\n}\n.header_left{\n  font-size: 32rpx;\n  color: #111334;\n  position: relative;\n  padding-left: 60rpx;\n  font-weight: bold;\n}\n.header_left image{\n  width: 40rpx;\n  height: 40rpx;\n  position: absolute;\n  left: 0;\n  top: 19rpx;\n}\n.data_statistics{\n  height: 140rpx;\n  background-color: #ffffff;\n}\n.data_statistics_box{\n  width: 550rpx;\n  display: flex;\n  margin: 0 auto;\n  color: #111334;\n  font-size: 20rpx;\n  padding-top: 30rpx;\n}\n.data_statistics_box view{\n  flex: 1;\n  text-align: center;\n}\n.data_statistics_box text{\n  font-size: 28rpx;\n  font-weight: bold;\n}\n.text_ms{\n  font-size: 24rpx;\n  padding-top: 10rpx;\n  color: #9D9FB8;\n}\n.pd_list{\n  width: 702rpx;\n  margin: 0 auto;\n  border-radius: 12rpx;\n  background-color: #ffffff;\n  margin-top: 20rpx;\n  overflow: hidden;\n}\n.pd_list_order{\n  color: #666883;\n  padding: 22rpx 24rpx 22rpx 24rpx;\n  border-bottom: 1rpx solid #eff0f5;\n  font-size: 28rpx;\n}\n.pd_info{\n  padding: 24rpx;\n  position: relative;\n}\n.pd_info_name{\n  width: 560rpx;\n  font-size: 28rpx;\n  color: #111334;\n  margin-bottom: 40rpx;\n  font-weight: bold;\n}\n.pd_info_user{\n  font-size: 28rpx;\n  margin-bottom: 18rpx;\n}\n.pd_info_user text{\n  color: #666883;\n}\n.pd_info_time{\n  margin-bottom: 0;\n}\n.pd_number{\n  font-size: 24rpx;\n  color: #9D9FB8;\n  position: absolute;\n  top: 26rpx;\n  right: 24rpx;\n}\n\n.qs{\n  width: 100%;\n  height: calc(100vh - 220rpx);\n  background-color: #ffffff;\n}","json":{"missingData-view":"/component/missingData/missingData"}},"convertDir/pages/my/myPage/vipCardDetail/vipCardDetail":{"js":"// pages/my/myDrug/vipCardDetail/vipCardDetail.js\nimport {\n  ajax,\n  ajax2\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.setData({\n      drugstoreSign: options.drugstoreSign\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  getCardDetail(){\n    const sendData = {\n      drugstoreSign:this.data.drugstoreSign,\n      phone:this.data.userInfo.phone\n    }\n    ajax2('post', `member/detail`, sendData, res => {\n      if(res.data.code == 0){\n        const resData = res.data.result;\n        resData && this.setData({\n          cardDetail:resData\n        })\n        Taro.hideLoading();\n      }else{\n        Taro.hideLoading();\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n        })\n      }\n    }, function () {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","json":{"vipCard":"/component/vipCard/vipCard"},"wxss":"/* pages/my/myDrug/vipCardDetail/vipCardDetail.wxss */\nimage{\n    width: 100%;\n    display: block;\n}\n.header{\n    position: relative;\n}\n.header .headerImg{\n    width: 100%;\n}\n.header .headerInfo{\n    width: 100%;\n    position: absolute;\n    top: 0;\n}\n.header .headerInfo .info .img{\n    width:88rpx;\n    height:88rpx;\n    border:2px solid rgba(234,206,165,1); \n    border-radius: 50%;\n    margin-right: 24rpx;\n}\n.header .headerInfo .info{\n    margin: 46rpx 75rpx 16rpx;\n    font-size:36rpx;\n    color:rgba(85,38,1,1);\n    line-height:50rpx;\n    display: flex;\n    align-items: center;\n}\n.header .headerInfo .info .name{\n    max-width: 500rpx;\n    overflow: hidden;\n    text-overflow:ellipsis;\n    white-space: nowrap;\n}\n.header .headerInfo .drugStore{\n    margin: 0 55rpx 0 75rpx;\n    font-size:26rpx;\n    color:rgba(85,38,1,1);\n    line-height:37rpx;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.marginImg{\n    position: relative;\n    z-index: 1;\n    margin-top: -50rpx;\n}\n.infoBox{\n    \n    background: white;\n}\n.levelInfo{\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.levelInfo .levelItem{\n    width: 50%;\n    display: flex;\n    align-items: flex-start;\n    justify-content: center;\n    font-size:30rpx;\n    color:rgba(102,102,102,1);\n    line-height:42rpx;\n}\n.levelInfo .levelItem image{\n    width: 48rpx;\n    height: 48rpx;\n    margin-right: 10rpx;\n}\n.levelInfo .levelItem .weight{\n    font-size:36rpx;\n    font-weight:500;\n    color:rgba(41,38,38,1);\n    line-height:50rpx;\n}\n.infoBox .getScoreBtn{\n    height: 90rpx;\n    line-height: 90rpx;\n    text-align: center;\n    border: 1px solid rgba(210,155,71,1);\n    border-radius: 45rpx;\n    font-size:36rpx;\n    font-weight:500;\n    color:rgba(210,155,71,1);\n    margin: 30rpx 20rpx 16rpx;\n}\n.infoBox .tip{\n    text-align: center;\n    font-size:26rpx;\n    color:rgba(153,153,153,1);\n    line-height:37rpx;\n    padding-bottom: 30rpx;\n}\n\n.vipDetail{\n    background: white;\n    margin-top: 20rpx;\n}\n.vipDetail .title{\n    font-size:36rpx;\n    color:rgba(41,38,38,1);\n    line-height:50rpx;\n    padding: 30rpx 24rpx;\n}\n.vipDetail .title text{\n    font-size:26rpx;\n    color:rgba(153,153,153,1);\n    line-height:37rpx;\n}\n\n.cardBox{\n    margin: 0 24rpx 47rpx;\n    background:rgba(255,255,255,1);\n    box-shadow:0px 3px 16rpx 0px rgba(48,48,60,0.08);\n    border-radius:10rpx;\n    padding: 30rpx;\n    position: relative;\n}\n.cardBox .number{\n    background:linear-gradient(270deg,rgba(215,179,127,1) 0%,rgba(253,231,199,1) 100%);\n    border-radius:22px;\n    font-size:24rpx;\n    color:rgba(85,38,1,1);\n    line-height:33rpx;\n    display: inline-block;\n    padding: 5rpx 18rpx;\n    position: absolute;\n    top: -20rpx;\n    left: 30rpx;\n}\n.cardBox .title_{\n    font-size:32rpx;\n    font-weight:500;\n    color:rgba(41,38,38,1);\n    line-height:45rpx;\n    margin: 20rpx 0;\n}\n.cardBox .item{\n    font-size:28rpx;\n    color:rgba(41,38,38,1);\n    line-height:40rpx;\n    display: flex;\n    align-items:flex-start;\n    margin-bottom: 10rpx;\n}\n.cardBox .item image{\n    width: 12rpx;\n    height: 16rpx;\n    margin-right: 10rpx;\n    margin-top: 8rpx;\n}\n\n\n.bottomTip{\n    font-size:24rpx;\n    color:rgba(153,153,153,1);\n    line-height:33rpx; \n    text-align: center;\n    padding: 0 0 20rpx;\n}","wxml":"\n  <view class=\"vipCardDetail-auto-container\"> \n    <navBar title-text=\"会员卡详情\"></navBar>\n    <vipCard :drugstoreSign=\"drugstoreSign\"></vipCard>\n  </view>"},"convertDir/pages/my/myPage/vipCardList/vipCardList":{"json":{"missingData-view":"../../../../../component/missingData/missingData"},"js":"// pages/my/myDrug/vipCardList/vipCardList.js\nimport {\n  ajax,\n  url,\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      isAjaxed:false,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    const userInfo = Taro.getStorageSync('userInfo');\n    if(userInfo){\n      this.setData({\n        userInfo\n      },()=>{\n        Taro.showLoading({\n          title: '加载中',\n          mask: true,\n        })\n        this.getCardList()\n      })\n    }\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n  },\n\n  getCardList(){\n    const { userInfo } = this.data;\n    ajax('get', `member/getMemberCardBag/${userInfo.phone}`, {}, res => {\n      if(res.data.code == 0){\n        const resData = res.data.result;\n        resData && this.setData({\n          cardList:resData,\n          isAjaxed:true\n        })\n        Taro.hideLoading();\n      }else{\n        Taro.hideLoading();\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n        })\n      }\n    }, function () {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n\n  toCardDetail(e){\n    const cardItem = e.currentTarget.dataset.item;\n    Taro.navigateTo({\n      url: `/pages/my/myPage/vipCardDetail/vipCardDetail?drugstoreSign=${cardItem.drugstoreSign}`\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"vipCardList-auto-container\">  \n    <navBar title-text=\"药店会员卡包\"></navBar>\n    <block v-if=\" cardList.length \">\n      <view class=\"cardBox\" v-for=\"(item, index) in cardList\" :key=\"index\"> \n        <image class=\"bgImg\" :src=\"''+url_link+'images/vipCardBg.png'\" mode=\"widthFix\"></image>\n        <view class=\"cardInfo\" :data-item=\"item\" catchtap=\"toCardDetail\">    \n          <view class=\"cardTop\"> \n            <view class=\"tip\">{{item.memberLevel}}\n            </view>\n            <view class=\"cardNo\">NO.{{item.memberNumber}}\n            </view>\n          </view>\n          <view class=\"drugStoreName\">{{item.drugstoreName}}\n          </view>\n          <view class=\"vipDate\" v-if=\"item.monthMembersDay\">月会员日：每月{{item.monthMembersDay}}日\n          </view>\n          <view class=\"vipDate bottom\" v-if=\"item.weekMembersDay\">周会员日：每周{{item.weekMembersDay}}\n          </view>\n          <view class=\"score\">积分:{{item.memberShipPoint}}\n          </view>\n        </view>\n      </view>\n    </block>\n    <block v-if=\" cardList.length == 0 && isAjaxed \">\n      <missingData-view zhi=\"new1\" textval=\"未开通药店会员卡\" textval2=\"卡包空空如也~\" :imageUrl=\" url_link + 'images/empty-card.png' \"></missingData-view>\n    </block>\n  </view>","wxss":"/* pages/my/myDrug/vipCardList/vipCardList.wxss */\npage{\n  background-color: #fff;\n}\n.cardBox{\n    margin: 24rpx 30rpx 0 30rpx;\n    position: relative;\n}\n.cardBox .bgImg{\n    width: 100%;\n    display: block;\n}\n.cardBox .cardInfo{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n}\n.cardBox .cardInfo .cardTop{\n    margin-top: 24rpx;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.cardBox .cardInfo .cardTop .tip{\n    padding: 0 30rpx;\n    font-size:36rpx;\n    font-weight:500;\n    color:rgba(255,255,255,1);\n    line-height:50rpx;\n    background:linear-gradient(270deg,rgba(223,178,117,1) 0%,rgba(203,155,95,1) 100%);\n    box-shadow:0px 1px 3px 0px rgba(199,148,79,1);\n    border-radius:0px 34rpx 34rpx 0px;\n    max-width: 324rpx;\n    overflow: hidden;\n    text-overflow:ellipsis;\n    white-space: nowrap;\n}\n.cardBox .cardInfo .cardTop .cardNo{\n    font-size:28rpx;\n    color:rgba(85,38,1,1);\n    line-height:40rpx;\n    margin-right: 30rpx;\n}\n.cardBox .cardInfo .drugStoreName{\n    height: 100rpx;\n    margin: 20rpx 30rpx;\n    font-size:36rpx;\n    font-weight:500;\n    color:rgba(85,38,1,1);\n    line-height:50rpx;\n    text-overflow: -o-ellipsis-lastline;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    line-clamp: 2;\n    -webkit-box-orient: vertical;\n}\n.cardBox .cardInfo .vipDate{\n    margin: 0 30rpx;\n    font-size:28rpx;\n    color:rgba(85,38,1,1);\n    line-height:40rpx;\n    word-wrap:break-word;\n    overflow: hidden;\n    text-overflow:ellipsis;\n    white-space: nowrap;\n}\n.cardBox .cardInfo .bottom{\n    max-width: 364rpx;\n}\n.cardBox .cardInfo .score{\n    position: absolute;\n    bottom: 24rpx;\n    right: 30rpx;\n    font-size:28rpx;\n    color:#552601;\n    line-height:40rpx;\n}"},"convertDir/pages/my/promoPicture/promoPicture":{"js":"// pages/my/promoPicture/promoPicture.js\nimport {\n  ajax,\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      // userid: '',\n      imagePath:\"\"\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    Taro.showLoading({\n      title: '绘制中...',\n    })\n    let that=this;\n    // var scene = decodeURIComponent(options.scene)\n    ajax('post', 'wechat/getWXACodeUnlimit', {\n      scene: Taro.getStorageSync('userInfo').userId,\n      page: \"pages/noteIndex/noteIndex\",\n    }, function(res) {\n      // 对数据进行转换操作\n      let imageArrayBuffData = Taro.base64ToArrayBuffer(res.data); \n      console.log(imageArrayBuffData, `data:image/png;base64,${res.data}`)\n      // 写入图片到本地\n      let FileSystemManager = Taro.getFileSystemManager();\n      FileSystemManager.writeFile({\n        filePath: Taro.env.USER_DATA_PATH + '/demo.png',\n        data: imageArrayBuffData,\n        success: function(res1) {\n          that.setData({\n            imagePath:Taro.env.USER_DATA_PATH + '/demo.png',\n          });\n        },\n        fail: function(res1) {\n          console.log(res1);\n        }\n      })\n      Taro.hideLoading();\n    }, function(res) {\n      Taro.showToast({\n        title: '绘制失败',\n        icon: 'none',\n      })\n      console.log(res)\n    })\n  },\n  saveImage() {\n    Taro.saveImageToPhotosAlbum({\n      filePath:Taro.env.USER_DATA_PATH + '/demo.png',\n      success: function(res) {\n        console.log(res)\n        Taro.showToast({\n          title: '保存成功',\n          image: '../../../images/successIcon.png'\n        })\n        setTimeout(function() {\n          Taro.hideToast();\n        }, 1000)\n      },\n      fail: function(res) {\n        console.log(res)\n        Taro.showToast({\n          title: '保存失败',\n          icon: 'none',\n        })\n      }\n    });\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function() {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function() {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function() {\n\n  }\n};","wxml":"\n  <view class=\"promoPicture-auto-container\"> \n    <navBar title-text=\"我的推广码\"></navBar>\n    <view class=\"container\">\n      <view class=\"promo_center\">  \n        <view class=\"top\">\n          <image class=\"picture\" :src=\"imagePath\" mode=\"aspectFit\"></image>\n        </view>\n        <view class=\"middle\">\n          <view class=\"dot\">\n            <view class=\"item\" v-for=\"(item, index) in  16 \"></view>\n          </view>\n        </view>\n        <view class=\"bottom\"> \n          <text class=\"tips\">\n        使用微信扫一扫，进入荷叶健康小程序\n      \n          </text>\n          <view class=\"btn_box\">\n            <view class=\"btn theme-text\" bindtap=\"saveImage\">保存到相册\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".container{\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  background: #00b955; \n  left: 0;\n  top: 0;\n  box-sizing: border-box;\n  padding-top: 68px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.promo_center{\n  flex: none;\n  width:650rpx;\n  z-index: 100;\n}\n.promo_center .top{\n  height: 680rpx;\n  width: 100%;\n  background: #fff;\n  border-radius: 30rpx 30rpx 0 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.promo_center .top .picture{\n  flex: none;\n  width: 477rpx;\n  height: 486rpx;\n}\n.promo_center .middle{\n  /* width: 100%; */\n  /* height: 40rpx; */\n  padding: 0rpx 15rpx;\n  position: relative;\n  margin-top: -1rpx;\n}\n.promo_center .middle::before{\n  content: \"\";\n  width: 30rpx;\n  height: 30rpx;\n  border-radius: 30rpx;\n  position: absolute;\n  left: -14rpx;\n  top: -10rpx;\n  /* background: #000; */\n  background: #00b955;\n  z-index: 101;\n}\n.promo_center .middle::after{\n  content: \"\";\n  width: 30rpx;\n  height: 30rpx;\n  border-radius: 30rpx;\n  position: absolute;\n  right: -14rpx;\n  top: -10rpx;\n  /* background: #000; */\n  background: #00b955;\n  z-index: 101;\n}\n.promo_center .middle .dot{\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  background: #fff;\n  padding: 0 14rpx;\n}\n.middle .dot .item{\n  width: 12rpx;\n  height: 12rpx;\n  background: #dfdfdf;\n  border-radius: 12rpx;\n  flex: none;\n  margin-right: 22rpx;\n}\n.middle .dot .item:last-of-type{\n  margin-right: 0;\n}\n.promo_center .bottom{\n  background: #fff;\n  border-radius: 0 0 30rpx 30rpx;\n  overflow: hidden;\n  margin-top: -2rpx;\n}\n.promo_center .bottom .tips{\n  display: block;\n  font-size: 30rpx;\n  color: #333;\n  margin-top: 70rpx;\n  margin-bottom: 40rpx;\n  text-align: center;\n}\n.promo_center .bottom .btn_box{\n  display: flex;\n  justify-content: center;\n  margin-bottom: 77rpx;\n}\n.promo_center .bottom .btn{\n  width: 490rpx;\n  height: 90rpx;\n  line-height: 90rpx;\n  text-align: center;\n  border-radius: 53rpx;\n  border: 2rpx solid #00b955;\n  font-weight: bold;\n  font-size: 30rpx;\n\n}"},"convertDir/pages/note/applyCancel/applyCancel":{"wxml":"\n  <view class=\"applyCancel-auto-container\">  \n    <navBar title-text=\"申请取消订单\"></navBar>\n    <view :class=\"[apply-refund-container,( isDjk ? 'djk' : '' )]\">    \n      <view class=\"header\"> \n        <text>{{ baseInfo.drugstoreSkuList[0].drugstoreName }}\n        </text>\n        <text>订单号: {{ baseInfo.orderNo }}\n        </text>\n      </view>\n      <block v-for=\"(item, key) in baseInfo.drugstoreSkuList[0].skus\" :key=\"key\">\n        <view class=\"pInfo\"> \n          <view class=\"pimg\">\n            <image :src=\"item.mainPhoto\"></image>\n          </view>\n          <view class=\"content\">   \n            <view class=\"name\">\n            {{item.skuName}} {{item.commonName}} {{item.skuSpec}}\n            </view>\n            <view class=\"second-kill-tag\" v-for=\"(tagItem, index) in  item.activityInfos \">\n            {{ tagItem.label }}\n          \n            </view>\n            <view class=\"flex_Box\">\n              <view class=\"number\">×{{item.skuNum}}\n              </view>\n            </view>\n            <view class=\"price\"> \n              <text v-if=\" item.price \">¥{{item.price }}\n              </text>\n              <text v-if=\" item.salePrice \" class=\"unline-view\">¥{{ item.salePrice }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </block>\n      <view class=\"common_section\"> \n        <view class=\"cell\"> \n          <view class=\"cell_left\">  \n          申请类型\n        \n          </view>\n          <view class=\"right has-val\">取消订单\n          </view>\n        </view>\n        <view :class=\"[cell,arrow,( applyReason ? 'has-val-cell' : '' )]\" data-type=\"applyReason\" catchtap=\"openSheet\"> \n          <view class=\"cell_left\">\n          取消原因\n        \n            <text>*\n            </text>\n          </view>\n          <view class=\"right\">{{  applyReason ? applyReason : '请选择' }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list bz-css\">\n        <view class=\"cell\"> \n          <view class=\"cell_left\">取消说明\n          </view>\n          <view class=\"right zf-right-text bz-text-yz\"> \n            <input v-if=\" !(showSheet || showModal) \" placeholder=\"请注明原因（选填）\" maxlength=\"50\" placeholder-class=\"phcolor\" bindinput=\"getRemark\" :value=\"applyRemark\"></input>\n            <text v-if=\" showSheet || showModal \" :class=\"[( !applyRemark ? 'has-val' : '' )]\">{{ applyRemark || '请注明原因（选填）' }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <block>\n        <form report-submit=\"true\" bindsubmit=\"submit\">\n          <button :class=\"[btnOpen,( !applyReason ?'btn-hui':'')]\" :style=\"{padding-bottom:  isIPX ? '40rpx' : '20rpx' }\" form-type=\"submit\" hover-class=\"none\">\n            <view class=\"theme-bg\">提交\n            </view>\n          </button>\n        </form>\n      </block>\n    </view>\n    <view :class=\"[mask,( isDjk ? 'djk-mask' : '' )]\" v-if=\" showSheet || showModal \" catchtouchmove=\"preventTouchMove\"> \n      <view class=\"sheet\" v-if=\" showSheet \">   \n        <view class=\"sheet-header\">\n        {{ sheetType == 'applyType' ? '申请类型' : '取消原因' }}\n        \n          <view catchtap=\"closeSheet\">\n            <image src=\"../../../images/half-screen-dialog-close.png\"></image>\n          </view>\n        </view>\n        <view class=\"container\" v-if=\" sheetType == 'applyType' \">\n          <view class=\"item\" v-for=\"(item, {{key}}) in   baseInfo.applyTypes \" :wx:key=\"key\" :data-desc=\" item.desc \" catchtap=\"selectCheckbox\"> \n            <text>{{ item.desc }}\n            </text>\n            <checkbox :checked=\" applyTypeBk == item.desc \"></checkbox>\n          </view>\n        </view>\n        <view class=\"container\" v-if=\" sheetType == 'applyReason' \">\n          <view class=\"item\" v-for=\"(item, key) in   baseInfo.applyReasons \" :key=\"key\" :data-desc=\" item.desc \" catchtap=\"selectCheckbox\"> \n            <text>{{ item.desc }}\n            </text>\n            <checkbox :checked=\" applyReasonBk == item.desc \"></checkbox>\n          </view>\n        </view>\n        <button class=\"btnOpen\" :style=\"{padding-bottom:  isIPX ? '40rpx' : '20rpx' }\" form-type=\"submit\" hover-class=\"none\" catchtap=\"confirmSheet\">\n          <view class=\"theme-bg\">确认\n          </view>\n        </button>\n      </view>\n      <view class=\"alert_box\" catchtouchmove=\"true\" v-if=\" showModal \">\n        <block>  \n          <view class=\"title\">您申请取消的订单，为到店支付\n          </view>\n          <view class=\"sub_title\">订单如已支付，请与药店沟通线下退款\n          </view>\n          <view class=\"btns_box\"> \n            <button class=\"button\" bindtap=\"cancleDialog\">取消\n            </button>\n            <form class=\"button right\" report-submit=\"true\" bindsubmit=\"submitAction\">\n              <button form-type=\"submit\">确认\n              </button>\n            </form>\n          </view>\n        </block>\n      </view>\n    </view>\n  </view>","js":"// pages/my/myDrug/applyRefund/applyRefund.js\nconst app = getApp();\n\nimport { ajax2 } from '../../../utils/util';\n\nexport default {\n  data: function() {\n    return {\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      isIPX: app.globalData.isIPX,\n      orderNo: '',\n      showSheet: false,\n      sheetType: '',\n      applyType: '',\n      applyReason: '',\n      showModal: false,\n      applyRemark: '',\n      baseInfo: {}, // 页面基础数据\n      applyTypeBk: '', // 备份值 关闭sheet清空 预更改 确认按钮更改\n      applyReasonBk: '' // 备份值 关闭sheet清空 预更改 确认按钮更改\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.orderNo) {\n      this.setData({\n        orderNo: options.orderNo\n      }, function() {\n        this.getApplyRefundData();\n      });\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n  /**阻止页面滚动。模拟器中页面仍然可以滚动，真机上不能滚动。*/\n  preventTouchMove: function (e) {\n  \n  }, \n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  /**\n   * @description 退款页面基础数据\n   * @param { Number } 申请原因映射值\n   */\n  getApplyRefundData(curApplyReason) {\n    Taro.showLoading();\n    ajax2('post', 'api/ykq/order/r/cancel/apply/preview', {\n      orderNo: this.data.orderNo\n    }, ({ data } = { data: {} }) => {\n      Taro.hideLoading();\n      if (data.code == 0) {\n        // 倒序排列退货退款数据\n        if (data.result && data.result.applyTypes && Array.isArray(data.result.applyTypes)) {\n          data.result.applyTypes.sort((pre, next) => next.val - pre.val);\n        }\n        this.setData({\n          baseInfo: data.result,\n          applyType: '退货退款' // 默认选择退货退款\n        });\n      } else {\n        // code不等于0\n        Taro.showToast({\n          title: res.result.msg || '数据异常',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: err.msg || '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * 备注输入\n   */\n  getRemark(e) {\n    this.setData({\n      applyRemark: e.detail.value\n    });\n  },\n  // 更改操作的是备份数据 确定或者X掉选择下拉框时才触发更改页面改变值\n  selectCheckbox(e) {\n    this.setData({\n      [`${ this.data.sheetType }Bk`]: e.currentTarget.dataset.desc\n    })\n  },\n  openSheet(e) {\n    this.setData({\n      showSheet: true, \n      showModal: false,\n      sheetType: e.currentTarget.dataset.type,\n      [`${ e.currentTarget.dataset.type }Bk`]: this.data[e.currentTarget.dataset.type]\n    })\n  },\n  closeSheet() {\n    this.setData({\n      showSheet: false, \n      sheetType: null,\n      [`${ this.data.sheetType }Bk`]: '' // 清空备份\n    });\n  },\n  confirmSheet() {\n    this.setData({\n      showSheet: false,\n      [this.data.sheetType]: this.data[`${ this.data.sheetType }Bk`] // 打开sheet时赋值给备份数据 拿去操作\n    }, function() {\n      // 改变申请原因 重新获取数据\n      // if (this.data.sheetType == 'applyReason' &&  this.data.applyReason) {\n      //   let curApplyReason = this.data.baseInfo.applyReasons.find(item => item.desc == this.data.applyReason).val;\n\n      //   this.getApplyRefundData(curApplyReason); \n      // }\n    })\n  },\n  \n  /**\n   * 取消弹窗\n   */\n  cancleDialog() {\n    this.setData({\n      showModal: false\n    });\n  },\n  /**\n   * 提交申请\n   */\n  submit() {\n    if (!this.data.applyReason || !this.data.applyType) return false;\n\n    // 商家原因直接请求接口\n    this.submitAction();\n  },\n  /**\n   * @description 提交接口动作\n   * @param { Number }  applyReason 退款申请原因映射\n   */\n  submitAction() {\n    let applyReason = this.data.baseInfo.applyReasons.find(item => item.desc == this.data.applyReason).val;\n    console.log(this.data.baseInfo);\n    Taro.showLoading();\n    ajax2('post', 'api/ykq/order/w/cancel/apply', {\n      orderNo: this.data.orderNo,\n      applyRefundReason: applyReason,\n      applyRemark: this.data.applyRemark\n    }, ({ data } = { data: {} }) => {\n      Taro.hideLoading();\n      if (data.code == 0) {\n       // 提交成功\n       console.log(data);\n       Taro.redirectTo({\n        url: `/pages/note/orderCancelDetail/orderCancelDetail?orderNo=${ this.data.orderNo }`\n      });\n      } else {\n        Taro.showToast({\n          title: data.msg || '数据异常',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: err.msg || '请求失败',\n        icon: 'none'\n      })\n    })\n  }\n};\n","json":{},"wxss":"@import '../../../common/tableView.wxss';\n\n.apply-refund-container  {\n  background: #F5F6FA;\n  padding-bottom: 140rpx;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: calc(100vw - 30rpx - 30rpx);\n  height: 90rpx;\n  background: #fff;\n  margin-top: 20rpx;\n  padding: 0 30rpx;\n}\n\n.header text:nth-child(1) {\n  font-size: 30rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #333333;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.header text:nth-child(2) {\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #999999;\n  line-height: 33rpx;\n  margin-left: 16rpx;\n}\n\n.phcolor {\n  color: #999999;\n  font-weight: 400;\n}\n\n.medicare {\n  position: absolute;\n  top: 10rpx;\n  left: 0;\n  width: 120rpx !important;\n  height: 39rpx !important;\n  line-height: 39rpx;\n  text-align: center;\n  border-top-right-radius: 30rpx;\n  border-bottom-right-radius: 30rpx;\n  background: linear-gradient(to right, #5bcbf8, #4182f6);\n  font-size: 20rpx;\n  color: #FFFFFF;\n}\n\n.headInfo {\n  position: relative;\n  background: #fff;\n  width: 100%;\n  padding: 20rpx 24rpx 14rpx;\n  box-sizing: border-box;\n}\n\n.kucunbuzu {\n  background: #cacaca !important;\n}\n\n.has-val-cell .right {\n  color: #111334 !important;\n}\n\n.has-val-cell::after {\n  border-color: #111334 !important;\n  border-width: 2rpx !important\n}\n\n.headInfo .title {\n  font-size: 32rpx;\n  color: #333;\n  letter-spacing: 0;\n}\n\n.headInfo .block .left {\n  width: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.headInfo .block .address, .headInfo .block .time {\n  font-size: 28rpx;\n  color: #666;\n  margin: 10rpx 0;\n  flex: 1;\n}\n\n.headInfo .colour_bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 7rpx;\n}\n\n.pInfo {\n  width: 100%;\n  height: 230rpx;\n  background: #f9f9f9;\n  padding: 20rpx;\n  display: flex;\n  box-sizing: border-box;\n}\n\n.pimg {\n  position: relative;\n}\n\n.pInfo .pimg, .pInfo .pimg image {\n  width: 180rpx;\n  height: 180rpx;\n}\n\n.pInfo .content {\n  flex: 1;\n  margin-left: 26rpx;\n  height: 180rpx;\n  position: relative;\n}\n\n.pInfo .content .group_tag {\n  border: 1rpx solid #e4393b;\n  color: #e4393b;\n  padding: 0 10rpx;\n  height: 19px;\n  line-height: 19px;\n  font-size: 24rpx;\n  display: inline-block;\n  border-radius: 22rpx;\n  margin: 4px 0;\n}\n.pInfo .content .name .limit_tag {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n.pInfo .content .name, .pInfo .content .price {\n  font-size: 28rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.pInfo .content .flex_Box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n}\n\n.pInfo .content .number {\n  font-size: 28rpx;\n  color: #999;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.pInfo .content .price {\n  font-weight: 700;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 20px;\n  line-height: 20px;\n}\n\n.pInfo .content .price text {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.column {\n  width: 100%;\n  background: #fff;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 20rpx 23rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fbfbfb;\n  /* margin-bottom: 20rpx; */\n  flex-wrap: wrap;\n}\n\n.point-item {\n  font-size: 26rpx;\n  padding-left: 40rpx;\n  position: relative;\n  margin-bottom: 20rpx;\n}\n\n.point-item image {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  top: 5rpx;\n  left: 0;\n}\n\n.btn-group-box5 {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 90rpx;\n  line-height: 60rpx;\n  padding: 15rpx 23rpx;\n  background: #fff;\n  text-align: center;\n  border-top: 1rpx solid #EEEEEE;\n  margin-bottom: 20rpx;\n}\n\n.box5-btn {\n  box-sizing: border-box;\n  width: 50%;\n  position: relative;\n}\n\n.box5-btn image {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: middle;\n}\n\n.box5-btn text {\n  color: #333;\n  font-size: 30rpx;\n  margin-left: 10rpx;\n}\n\n.box5-btn:first-child {\n  border-right: 1rpx solid #ddd;\n}\n\n.bottomTip {\n  width: 100%;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-align: center;\n  height: 65rpx;\n  line-height: 65rpx;\n}\n\n.btnOpen {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  line-height: 100rpx;\n  /* box-shadow: inset 0 1px 0 0 #dcdcdc; */\n  border-radius: 0.6px;\n  font-size: 38rpx;\n  color: #fff;\n  font-weight: bold;\n  letter-spacing: 0;\n  text-align: center;\n  padding: 20rpx;\n}\n\n.btnOpen view {\n  border-radius: 50rpx;\n}\n\n.btn-hui view {\n  border-radius: 50rpx;\n  background: #c6cad4 !important;\n  color: #fff !important;\n}\n\n.common_section {\n  padding: 0 26rpx;\n}\n\n.common_section .cell {\n  padding: 0;\n  height: 80rpx;\n}\n\n.common_section .cell .cell_left {\n  color: #666;\n}\n\n.common_section .cell .cell_left text {\n  color: #FF2121;\n}\n\n.common_section .cell_left {\n  flex: 1;\n}\n\n.common_section .cell .cell_center {\n  color: #666;\n  font-size: 28rpx;\n  flex: 1;\n}\n\n.common_section .cell .cell_center textarea {\n  width: 100%;\n  height: 150rpx;\n  border: 2rpx solid #ccc;\n  padding: 10rpx;\n  box-sizing: border-box;\n}\n\n.common_section .cell .cell_center .count {\n  position: absolute;\n  bottom: 10rpx;\n  right: 10rpx;\n  text-align: right;\n}\n\n.common_section .arrow .right {\n  padding-right: 20rpx;\n  font-weight: 400 !important;\n  color: #999999;\n}\n\n.common_section .arrow::after {\n  right: 0;\n}\n\n.common_section .cell .picture {\n  width: 32rpx;\n  height: 27rpx;\n  margin-right: 8rpx;\n}\n\n.common_section .cell:last-child .right {\n  font-weight: bold;\n}\n\n/* 会员弹框 */\n\n.Member-alert-back {\n  background-color: #000;\n  opacity: 0.5;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n\n.Member-alert {\n  width: 520rpx;\n  height: auto;\n  position: absolute;\n  left: calc(50% - 260rpx);\n  top: 30%;\n  z-index: 3;\n}\n\n.Member-alert image {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.Member-text {\n  font-size: 28rpx;\n  color: #333;\n  padding: 30rpx;\n  background-color: #fff;\n}\n\n.Member-view {\n  padding: 0 30rpx 0 30rpx;\n  background-color: #fff;\n  padding-bottom: 20rpx;\n}\n\nradio .wx-radio-input.wx-radio-input-checked {\n  border: none;\n  background: #bc7b3d !important;\n}\n\n.Member-btn {\n  height: 90rpx;\n  padding: 0 30rpx 0 30rpx;\n  border-radius: 110rpx;\n  background-color: #bc7b3d;\n  text-align: center;\n  line-height: 90rpx;\n  color: #fff;\n  background: -webkit-linear-gradient(left, #d89352, #ba793b);\n  margin-top: 30rpx;\n}\n\n/* 邮寄 */\n\n.yj-box {\n  padding: 20rpx 24rpx 20rpx 24rpx;\n  display: flex;\n  background-color: #fff;\n  border-bottom: 1rpx solid rgba(238, 238, 238, 1);\n  margin-bottom: 20rpx;\n}\n\n.yj-box-nr {\n  width: calc(33% - 14rpx);\n  height: 100rpx;\n  text-align: center;\n  line-height: 100rpx;\n  color: #666;\n  font-size: 32rpx;\n  border-radius: 8px;\n  border: 1px solid rgba(238, 238, 238, 1);\n  position: relative;\n  margin-right: 22rpx;\n  overflow: hidden;\n}\n.yj-box .yj-box-nr:last-child{\n  margin-right: 0;\n}\n.yj-box-md {\n  display: inline-block;\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: middle;\n}\n\n.yj-check-icon {\n  width: 44rpx;\n  height: 44rpx;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n\n.yj-yd-name {\n  height: 90rpx;\n  line-height: 90rpx;\n  font-weight: 500;\n  color: rgba(51, 51, 51, 1);\n  font-size: 30rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  display: flex;\n  margin-top: 20rpx;\n}\n.yj-yd-name-drugstore{\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  flex: 1;\n}\n\n.yj-yd-name-text {\n  font-size: 24rpx;\n  color: #999;\n}\n.address_box .cell{\n  padding: 15rpx 0;\n  height: inherit;\n}\n.address_box .cell .cell_center {\n  width: 100%;\n}\n\n.address_box .cell::before {\n  border: 0;\n}\n\n.address_box .cell_center .empty {\n  text-align: center;\n  font-size: 30rpx;\n  padding: 30rpx 0;\n  color: #666;\n}\n\n.address_box {\n  position: relative;\n  /* padding: 30rpx 0; */\n}\n\n.address_box .colour_bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 5rpx;\n}\n\n.cell_center .name {\n  font-size: 32rpx;\n  color: #333;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 支付ui */\n\n.zf-right-text {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 100 !important;\n}\n\n.zf-zt-list {\n  margin-top: 20rpx;\n}\n.zf-zt-list .cell .right {\n  font-weight: 100 !important;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n\n.zf-zt-list .cell .right input {\n  width: 100%;\n  height: 100%;\n  font-size: 28rpx;\n  color: #333333;\n  font-weight: 500;\n}\n\n.zf-zt-list .cell .red-font {\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: rgba(255, 33, 33, 1) !important;\n  font-weight: 500 !important;\n  font-size: 28rpx;\n}\n\n.bz-css {\n  margin-top: 0;\n  border-top: 1rpx solid #eee;\n}\n\n.bz-ps-box {\n  height: 80rpx;\n  background: rgba(250, 250, 250, 1);\n  line-height: 80rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 24rpx 0 24rpx;\n  margin-bottom: 20rpx;\n}\n\n.bz-text-yz {\n  width: 532rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: right;\n}\n\n.bz-mr-text {\n  color: #999;\n}\n\n.bz-text-bt-box {\n  margin-bottom: 20rpx;\n}\n.bz-text-bt-box .bz-text-bt{\n  min-width: 200rpx;\n}\n.bz-text-bt-box .right{\n  flex: 1;\n  text-align: right;\n}\n.bz-text-bt text {\n  color: #ff3b30;\n}\n\n.bz-sf-box {\n  height: 120rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  border-bottom:1rpx solid #DDDDDD;\n  color: #666666;\n  font-size: 24rpx;\n  line-height: 120rpx;\n}\n\n.bz-sf-box-icon {\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: middle;\n  display: inline-block;\n  margin-top: -10rpx;\n}\n.bz-sf-box-name{\n  font-size: 32rpx;\n  color: #333333;\n  margin-left: 12rpx;\n  margin-right: 10rpx;\n}\n.page_fixed {\n  overflow: hidden;\n  position:fixed;\n}\n\n.second-kill-tag {\n  display: inline-block;\n  padding: 0 8rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  color: rgba(255,33,33,1);\n  line-height: 28rpx;\n  background:rgba(255,33,33,0.05);\n  border-radius: 2rpx;\n  border: 1rpx solid rgba(255,33,33,0.5);\n}\n\n.rel-price {\n  text-decoration: line-through;\n  margin-left: 10rpx;\n  font-size: 23rpx !important;\n  color: rgba(102, 102, 102, 1) !important;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  font-size: 20rpx!important;\n  color: #999!important;\n}\n\n.hot-price {\n  color: rgba(255, 33, 33, 1) !important;\n}\n\n.djk-view .btnOpen view {\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}\n\n.djk-view .btn-hui view {\n  background: #c6cad4;\n  color: #fff;\n}\n\n.djk-view .common_section .green {\n  color: #00B955;\n}\n\n.djk-view .yj-xz {\n  border-color: #00B955;\n}\n\n.mask {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0rpx;\n  /* display: none; */\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.sheet {\n  position: fixed;\n  bottom: 138rpx;\n  width: 100%;\n  /* height: 738rpx; */\n  height: unset;\n  background: #fff;\n  border-top-left-radius: 30rpx;\n  border-top-right-radius: 30rpx;\n}\n\n.sheet-header {\n  position: relative;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #333333;\n}\n\n.sheet-header view {\n  width: 100rpx;\n  height: 100%;\n  position: absolute;\n  right: 0rpx;\n  top: 0rpx;\n}\n\n.sheet-header view image {\n  width: 38rpx;\n  height: 38rpx;\n}\n\n.sheet .container .item {\n  display: flex;\n  padding: 0 30rpx;\n  align-items: center;\n  justify-content: space-between;\n  height: 100rpx;\n  width: calc(100% - 30rpx - 30rpx);\n  background: #fff;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n\n.unline-view {\n  margin-left: 12rpx;\n  font-weight: 400;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #999999 !important;\n  font-size: 20rpx !important; \n  text-decoration: line-through !important;\n}\n\n.alert_box .title {\n  padding: 40rpx 30rpx 10rpx 30rpx;\n}\n\n.alert_box .sub_title {\n  color: #333;\n  font-size: 30rpx;\n  font-weight: 600;\n  padding-bottom: 30rpx;\n} \n\n.grey-view {\n  color: #999999;\n  font-size: 28rpx;\n  margin-right: 21rpx;\n}\n"},"convertDir/pages/note/applyRefund/applyRefund":{"json":{},"js":"// pages/my/myDrug/applyRefund/applyRefund.js\nconst app = getApp();\n\nimport { ajax2 } from '../../../utils/util';\n\nexport default {\n  data: function() {\n    return {\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      isIPX: app.globalData.isIPX,\n      orderNo: '',\n      showSheet: false,\n      sheetType: '',\n      applyType: '',\n      applyReason: '',\n      showModal: false,\n      applyRemark: '',\n      baseInfo: {}, // 页面基础数据\n      applyTypeBk: '', // 备份值 关闭sheet清空 预更改 确认按钮更改\n      applyReasonBk: '', // 备份值 关闭sheet清空 预更改 确认按钮更改\n      payOnlineInStore: '' // 此值为 1 代表 到店自提-在线付订单\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.orderNo || options.payOnlineInStore) {\n      this.setData({\n        orderNo: options.orderNo,\n        payOnlineInStore: options.payOnlineInStore\n      }, function() {\n        this.getApplyRefundData();\n      });\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n  /**阻止页面滚动。模拟器中页面仍然可以滚动，真机上不能滚动。*/\n  preventTouchMove: function (e) {\n  \n  }, \n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  /**\n   * @description 退款页面基础数据\n   * @param { Number } 申请原因映射值\n   */\n  getApplyRefundData(curApplyReason) {\n    Taro.showLoading();\n    // 如果是到店自提-在线付申请的退款，区分接口路径\n    console.log(this.data.payOnlineInStore)\n    let apiUrl =  this.data.payOnlineInStore == 1 ? 'api/ykq/order/r/refund/apply/preview' : 'api/ykq/order/r/o2o/refund/apply/preview';\n\n    ajax2('post', apiUrl, {\n      orderNo: this.data.orderNo,\n      applyReason: curApplyReason\n    }, ({ data } = { data: {} }) => {\n      Taro.hideLoading();\n      if (data.code == 0) {\n        // 倒序排列退货退款数据\n        if (data.result && data.result.applyTypes && Array.isArray(data.result.applyTypes)) {\n          data.result.applyTypes.sort((pre, next) => next.val - pre.val);\n        }\n\n        console.log(data.result);\n        this.setData({\n          baseInfo: data.result,\n          applyType: this.data.applyType || '退货退款' // 默认选择退货退款\n        });\n      } else {\n        // code不等于0\n        Taro.showToast({\n          title: err.msg || '数据异常',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: err.msg || '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * 备注输入\n   */\n  getRemark(e) {\n    this.setData({\n      applyRemark: e.detail.value\n    });\n  },\n  // 更改操作的是备份数据 确定或者X掉选择下拉框时才触发更改页面改变值\n  selectCheckbox(e) {\n    this.setData({\n      [`${ this.data.sheetType }Bk`]: e.currentTarget.dataset.desc\n    })\n  },\n  openSheet(e) {\n    this.setData({\n      showSheet: true, \n      showModal: false,\n      sheetType: e.currentTarget.dataset.type,\n      [`${ e.currentTarget.dataset.type }Bk`]: this.data[e.currentTarget.dataset.type]\n    })\n  },\n  closeSheet() {\n    this.setData({\n      showSheet: false, \n      sheetType: null,\n      [`${ this.data.sheetType }Bk`]: '' // 清空备份\n    });\n  },\n  confirmSheet() {\n    this.setData({\n      showSheet: false,\n      [this.data.sheetType]: this.data[`${ this.data.sheetType }Bk`] // 打开sheet时赋值给备份数据 拿去操作\n    }, function() {\n      // 改变申请原因 重新获取数据\n      if (this.data.sheetType == 'applyReason' &&  this.data.applyReason) {\n        let curApplyReason = this.data.baseInfo.applyReasons.find(item => item.desc == this.data.applyReason).val;\n\n        this.getApplyRefundData(curApplyReason); \n      }\n    })\n  },\n  \n  /**\n   * 取消弹窗\n   */\n  cancleDialog() {\n    this.setData({\n      showModal: false\n    });\n  },\n  /**\n   * 提交申请\n   */\n  submit() {\n    if (!this.data.applyReason || !this.data.applyType) return false;\n    let curApplyReason = this.data.baseInfo.applyReasons.find(item => item.desc == this.data.applyReason).val;\n\n    if (curApplyReason !== 210 && curApplyReason !== 220 && this.data.payOnlineInStore != 1) { // 个人原因而且非到店自提  弹框提示\n      this.setData({\n        showModal: true\n      });\n\n      return;\n    } \n\n    // 商家原因直接请求接口\n    this.submitAction();\n  },\n  /**\n   * @description 提交接口动作\n   * @param { Number }  applyReason 退款申请原因映射\n   * @param { Number }  applyType 申请类型映射\n   */\n  submitAction() {\n    let applyReason = this.data.baseInfo.applyReasons.find(item => item.desc == this.data.applyReason).val;\n    let applyType = this.data.baseInfo.applyTypes.find(item => item.desc == this.data.applyType).val;\n\n    Taro.showLoading();\n\n    let apiUrl = this.data.payOnlineInStore == 1 ? 'api/ykq/order/w/refund/apply' : 'api/ykq/order/w/o2o/refund/apply';\n\n    ajax2('post', apiUrl, {\n      orderNo: this.data.orderNo,\n      [this.data.payOnlineInStore == 1 ? 'applyRefundReason' : 'applyReason'] : applyReason,\n      applyType,\n      applyRemark: this.data.applyRemark\n    }, ({ data } = { data: {} }) => {\n      Taro.hideLoading();\n      if (data.code == 0) {\n        // 提交成功\n        console.log(data);\n        Taro.redirectTo({\n          url: `/pages/note/refundDetail/refundDetail?orderNo=${ this.data.orderNo }&payOnlineInStore=${ this.data.payOnlineInStore }`\n        });\n      } else {\n        Taro.showToast({\n          title: data.msg || '数据异常',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: err.msg || '请求失败',\n        icon: 'none'\n      })\n    })\n  }\n};\n","wxml":"\n  <view class=\"applyRefund-auto-container\">  \n    <navBar title-text=\"申请退款\"></navBar>\n    <view :class=\"[apply-refund-container,( isDjk ? 'djk' : '' )]\">     \n      <view class=\"header\"> \n        <text>{{ baseInfo.drugstoreSkuList[0].drugstoreName }}\n        </text>\n        <text>订单号: {{ baseInfo.orderNo }}\n        </text>\n      </view>\n      <block v-for=\"(item, key) in baseInfo.drugstoreSkuList[0].skus\" :key=\"key\">\n        <view class=\"pInfo\"> \n          <view class=\"pimg\">\n            <image :src=\"item.mainPhoto\"></image>\n          </view>\n          <view class=\"content\">   \n            <view class=\"name\">\n            {{item.skuName}} {{item.commonName}} {{item.skuSpec}}\n            </view>\n            <view class=\"second-kill-tag\" v-for=\"(tagItem, index) in  item.activityInfos \">\n            {{ tagItem.label }}\n          \n            </view>\n            <view class=\"flex_Box\">\n              <view class=\"number\">×{{item.skuNum}}\n              </view>\n            </view>\n            <view class=\"price\"> \n              <text v-if=\" item.price \">¥{{item.price }}\n              </text>\n              <text v-if=\" item.salePrice \" class=\"unline-view\">¥{{ item.salePrice }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </block>\n      <view class=\"common_section\"> \n        <view :class=\"[cell,arrow,( applyType ? 'has-val-cell' : '' )]\" data-type=\"applyType\" catchtap=\"openSheet\"> \n          <view class=\"cell_left\">  \n          申请类型\n        \n            <text>*\n            </text>\n          </view>\n          <view class=\"right\">{{  applyType ? applyType : '请选择' }}\n          </view>\n        </view>\n        <view :class=\"[cell,arrow,( applyReason ? 'has-val-cell' : '' )]\" data-type=\"applyReason\" catchtap=\"openSheet\"> \n          <view class=\"cell_left\">\n          申请原因\n        \n            <text>*\n            </text>\n          </view>\n          <view class=\"right\">{{  applyReason ? applyReason : '请选择' }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list\">\n        <view class=\"cell\">   \n          <view class=\"cell_left\">退款金额\n          </view>\n          <view class=\"grey-view\" v-if=\" payOnlineInStore !== 1 && baseInfo.drugstoreDeliveryAmountDesc && baseInfo.drugstoreDeliveryAmountDesc !== '0.00' && (applyReason == '买错了/填错了' || applyReason == '不想要了' || applyReason == '其他（请在退款说明中注明原因）') \">\n          配送费用-{{ '￥' + baseInfo.drugstoreDeliveryAmountDesc }}\n        \n          </view>\n          <view class=\"grey-view\" v-if=\" baseInfo.applyRefundRedBagAmountDesc && baseInfo.applyRefundRedBagAmountDesc != '0.00' \">\n          红包-{{ '￥' + baseInfo.applyRefundRedBagAmountDesc }}\n        \n          </view>\n          <view v-if=\" baseInfo.refundAmountDesc \" class=\"right zf-right-text red-font\">\n          {{'￥' + baseInfo.refundAmountDesc  }}\n        \n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list bz-css\">\n        <view class=\"cell\"> \n          <view class=\"cell_left\">{{ payOnlineInStore == 1 ? '退款说明' : '备注' }}\n          </view>\n          <view class=\"right zf-right-text bz-text-yz\"> \n            <input v-if=\" !(showSheet || showModal) \" :placeholder=\" payOnlineInStore == 1 ? '请注明原因(选填)' : '选填' \" maxlength=\"50\" placeholder-class=\"phcolor\" bindinput=\"getRemark\" :value=\"applyRemark\"></input>\n            <text v-if=\" showSheet || showModal \" :class=\"[( !applyRemark ? 'phcolor' : '' )]\">{{ applyRemark || (payOnlineInStore == 1 ? '请注明原因(选填)' : '选填') }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <block>\n        <form report-submit=\"true\" bindsubmit=\"submit\">\n          <button :class=\"[btnOpen,( (!applyType || !applyReason) ?'btn-hui':'')]\" :style=\"{padding-bottom:  isIPX ? '40rpx' : '20rpx' }\" form-type=\"submit\" hover-class=\"none\">\n            <view class=\"theme-bg\">提交\n            </view>\n          </button>\n        </form>\n      </block>\n    </view>\n    <view :class=\"[mask,( isDjk ? 'djk-mask' : '' )]\" v-if=\" showSheet || showModal \" catchtouchmove=\"preventTouchMove\"> \n      <view class=\"sheet\" v-if=\" showSheet \">   \n        <view class=\"sheet-header\">\n        {{ sheetType == 'applyType' ? '申请类型' : '退款原因' }}\n        \n          <view catchtap=\"closeSheet\">\n            <image src=\"../../../images/half-screen-dialog-close.png\"></image>\n          </view>\n        </view>\n        <view class=\"container\" v-if=\" sheetType == 'applyType' \">\n          <view class=\"item\" v-for=\"(item, {{key}}) in   baseInfo.applyTypes \" :wx:key=\"key\" :data-desc=\" item.desc \" catchtap=\"selectCheckbox\"> \n            <text>{{ item.desc }}\n            </text>\n            <checkbox :checked=\" applyTypeBk == item.desc \"></checkbox>\n          </view>\n        </view>\n        <view class=\"container\" v-if=\" sheetType == 'applyReason' \">\n          <view class=\"item\" v-for=\"(item, {{key}}) in   baseInfo.applyReasons \" :wx:key=\"key\" :data-desc=\" item.desc \" catchtap=\"selectCheckbox\"> \n            <text>{{ item.desc }}\n            </text>\n            <checkbox :checked=\" applyReasonBk == item.desc \"></checkbox>\n          </view>\n        </view>\n        <button class=\"btnOpen\" :style=\"{padding-bottom:  isIPX ? '40rpx' : '20rpx' }\" form-type=\"submit\" hover-class=\"none\" catchtap=\"confirmSheet\">\n          <view class=\"theme-bg\">确认\n          </view>\n        </button>\n      </view>\n      <view class=\"alert_box\" catchtouchmove=\"true\" v-if=\" showModal \">\n        <block> \n          <view class=\"title\">个人原因取消订单，因为已产生配送费用，此项费用将由您承担\n          </view>\n          <view class=\"btns_box\"> \n            <button class=\"button\" bindtap=\"cancleDialog\">取消\n            </button>\n            <form class=\"button right\" report-submit=\"true\" bindsubmit=\"submitAction\">\n              <button form-type=\"submit\">确认\n              </button>\n            </form>\n          </view>\n        </block>\n      </view>\n    </view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n\n.apply-refund-container  {\n  background: #F5F6FA;\n  padding-bottom: 140rpx;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: calc(100vw - 30rpx - 30rpx);\n  height: 90rpx;\n  background: #fff;\n  margin-top: 20rpx;\n  padding: 0 30rpx;\n}\n\n.header text:nth-child(1) {\n  font-size: 30rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #333333;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.header text:nth-child(2) {\n  font-size: 24rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #999999;\n  line-height: 33rpx;\n  margin-left: 16rpx;\n}\n\n.phcolor {\n  color: #999999;\n  font-weight: 400;\n}\n\n.medicare {\n  position: absolute;\n  top: 10rpx;\n  left: 0;\n  width: 120rpx !important;\n  height: 39rpx !important;\n  line-height: 39rpx;\n  text-align: center;\n  border-top-right-radius: 30rpx;\n  border-bottom-right-radius: 30rpx;\n  background: linear-gradient(to right, #5bcbf8, #4182f6);\n  font-size: 20rpx;\n  color: #FFFFFF;\n}\n\n.headInfo {\n  position: relative;\n  background: #fff;\n  width: 100%;\n  padding: 20rpx 24rpx 14rpx;\n  box-sizing: border-box;\n}\n\n.kucunbuzu {\n  background: #cacaca !important;\n}\n\n.headInfo .title {\n  font-size: 32rpx;\n  color: #333;\n  letter-spacing: 0;\n}\n\n.headInfo .block .left {\n  width: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.headInfo .block .address, .headInfo .block .time {\n  font-size: 28rpx;\n  color: #666;\n  margin: 10rpx 0;\n  flex: 1;\n}\n\n.headInfo .colour_bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 7rpx;\n}\n\n.pInfo {\n  width: 100%;\n  height: 230rpx;\n  background: #f9f9f9;\n  padding: 20rpx;\n  display: flex;\n  box-sizing: border-box;\n  margin-bottom: 20rpx;\n}\n\n.pimg {\n  position: relative;\n}\n\n.pInfo .pimg, .pInfo .pimg image {\n  width: 180rpx;\n  height: 180rpx;\n}\n\n.pInfo .content {\n  flex: 1;\n  margin-left: 26rpx;\n  height: 180rpx;\n  position: relative;\n}\n\n.pInfo .content .group_tag {\n  border: 1rpx solid #e4393b;\n  color: #e4393b;\n  padding: 0 10rpx;\n  height: 19px;\n  line-height: 19px;\n  font-size: 24rpx;\n  display: inline-block;\n  border-radius: 22rpx;\n  margin: 4px 0;\n}\n.pInfo .content .name .limit_tag {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n.pInfo .content .name, .pInfo .content .price {\n  font-size: 28rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.pInfo .content .flex_Box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n}\n\n.pInfo .content .number {\n  font-size: 28rpx;\n  color: #999;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.pInfo .content .price {\n  font-weight: 700;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 20px;\n  line-height: 20px;\n}\n\n.pInfo .content .price text {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.column {\n  width: 100%;\n  background: #fff;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 20rpx 23rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fbfbfb;\n  /* margin-bottom: 20rpx; */\n  flex-wrap: wrap;\n}\n\n.point-item {\n  font-size: 26rpx;\n  padding-left: 40rpx;\n  position: relative;\n  margin-bottom: 20rpx;\n}\n\n.point-item image {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  top: 5rpx;\n  left: 0;\n}\n\n.btn-group-box5 {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 90rpx;\n  line-height: 60rpx;\n  padding: 15rpx 23rpx;\n  background: #fff;\n  text-align: center;\n  border-top: 1rpx solid #EEEEEE;\n  margin-bottom: 20rpx;\n}\n\n.box5-btn {\n  box-sizing: border-box;\n  width: 50%;\n  position: relative;\n}\n\n.box5-btn image {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: middle;\n}\n\n.box5-btn text {\n  color: #333;\n  font-size: 30rpx;\n  margin-left: 10rpx;\n}\n\n.box5-btn:first-child {\n  border-right: 1rpx solid #ddd;\n}\n\n.bottomTip {\n  width: 100%;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-align: center;\n  height: 65rpx;\n  line-height: 65rpx;\n}\n\n.btnOpen {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  line-height: 100rpx;\n  /* box-shadow: inset 0 1px 0 0 #dcdcdc; */\n  border-radius: 0.6px;\n  font-size: 38rpx;\n  color: #fff;\n  font-weight: bold;\n  letter-spacing: 0;\n  text-align: center;\n  padding: 20rpx;\n}\n\n.btnOpen view {\n  border-radius: 50rpx;\n}\n\n.btn-hui view {\n  border-radius: 50rpx;\n  background: #c6cad4 !important;\n  color: #fff !important;\n}\n\n.common_section {\n  padding: 0 26rpx;\n}\n\n.common_section .cell {\n  padding: 0;\n  height: 80rpx;\n}\n\n.common_section .cell .cell_left {\n  color: #666;\n}\n\n.common_section .cell .cell_left text {\n  color: #FF2121;\n}\n\n.common_section .cell_left {\n  flex: 1;\n}\n\n.common_section .cell .cell_center {\n  color: #666;\n  font-size: 28rpx;\n  flex: 1;\n}\n\n.common_section .cell .cell_center textarea {\n  width: 100%;\n  height: 150rpx;\n  border: 2rpx solid #ccc;\n  padding: 10rpx;\n  box-sizing: border-box;\n}\n\n.common_section .cell .cell_center .count {\n  position: absolute;\n  bottom: 10rpx;\n  right: 10rpx;\n  text-align: right;\n}\n\n.common_section .arrow .right {\n  padding-right: 20rpx;\n  font-weight: 400 !important;\n  color: #999999;\n}\n\n.common_section .arrow::after {\n  right: 0;\n}\n\n.common_section .cell .picture {\n  width: 32rpx;\n  height: 27rpx;\n  margin-right: 8rpx;\n}\n\n.common_section .cell:last-child .right {\n  font-weight: bold;\n}\n\n/* 会员弹框 */\n\n.Member-alert-back {\n  background-color: #000;\n  opacity: 0.5;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n\n.Member-alert {\n  width: 520rpx;\n  height: auto;\n  position: absolute;\n  left: calc(50% - 260rpx);\n  top: 30%;\n  z-index: 3;\n}\n\n.Member-alert image {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.Member-text {\n  font-size: 28rpx;\n  color: #333;\n  padding: 30rpx;\n  background-color: #fff;\n}\n\n.Member-view {\n  padding: 0 30rpx 0 30rpx;\n  background-color: #fff;\n  padding-bottom: 20rpx;\n}\n\nradio .wx-radio-input.wx-radio-input-checked {\n  border: none;\n  background: #bc7b3d !important;\n}\n\n.Member-btn {\n  height: 90rpx;\n  padding: 0 30rpx 0 30rpx;\n  border-radius: 110rpx;\n  background-color: #bc7b3d;\n  text-align: center;\n  line-height: 90rpx;\n  color: #fff;\n  background: -webkit-linear-gradient(left, #d89352, #ba793b);\n  margin-top: 30rpx;\n}\n\n/* 邮寄 */\n\n.yj-box {\n  padding: 20rpx 24rpx 20rpx 24rpx;\n  display: flex;\n  background-color: #fff;\n  border-bottom: 1rpx solid rgba(238, 238, 238, 1);\n  margin-bottom: 20rpx;\n}\n\n.yj-box-nr {\n  width: calc(33% - 14rpx);\n  height: 100rpx;\n  text-align: center;\n  line-height: 100rpx;\n  color: #666;\n  font-size: 32rpx;\n  border-radius: 8px;\n  border: 1px solid rgba(238, 238, 238, 1);\n  position: relative;\n  margin-right: 22rpx;\n  overflow: hidden;\n}\n.yj-box .yj-box-nr:last-child{\n  margin-right: 0;\n}\n.yj-box-md {\n  display: inline-block;\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: middle;\n}\n\n.yj-check-icon {\n  width: 44rpx;\n  height: 44rpx;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n\n.yj-yd-name {\n  height: 90rpx;\n  line-height: 90rpx;\n  font-weight: 500;\n  color: rgba(51, 51, 51, 1);\n  font-size: 30rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  display: flex;\n  margin-top: 20rpx;\n}\n.yj-yd-name-drugstore{\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  flex: 1;\n}\n\n.yj-yd-name-text {\n  font-size: 24rpx;\n  color: #999;\n}\n.address_box .cell{\n  padding: 15rpx 0;\n  height: inherit;\n}\n.address_box .cell .cell_center {\n  width: 100%;\n}\n\n.address_box .cell::before {\n  border: 0;\n}\n\n.address_box .cell_center .empty {\n  text-align: center;\n  font-size: 30rpx;\n  padding: 30rpx 0;\n  color: #666;\n}\n\n.address_box {\n  position: relative;\n  /* padding: 30rpx 0; */\n}\n\n.address_box .colour_bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 5rpx;\n}\n\n.cell_center .name {\n  font-size: 32rpx;\n  color: #333;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 支付ui */\n\n.zf-right-text {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 100 !important;\n}\n\n.zf-zt-list {\n  margin-top: 20rpx;\n}\n.zf-zt-list .cell .right {\n  font-weight: 100 !important;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n\n.zf-zt-list .cell .right input {\n  width: 100%;\n  height: 100%;\n  font-size: 28rpx;\n  color: #333333;\n  font-weight: 500;\n}\n\n.zf-zt-list .cell .red-font {\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: rgba(255, 33, 33, 1) !important;\n  font-weight: 500 !important;\n  font-size: 28rpx;\n}\n\n.bz-css {\n  margin-top: 0;\n  border-top: 1rpx solid #eee;\n}\n\n.bz-ps-box {\n  height: 80rpx;\n  background: rgba(250, 250, 250, 1);\n  line-height: 80rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 24rpx 0 24rpx;\n  margin-bottom: 20rpx;\n}\n\n.bz-text-yz {\n  width: 532rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: right;\n}\n\n.bz-mr-text {\n  color: #999;\n}\n\n.bz-text-bt-box {\n  margin-bottom: 20rpx;\n}\n.bz-text-bt-box .bz-text-bt{\n  min-width: 200rpx;\n}\n.bz-text-bt-box .right{\n  flex: 1;\n  text-align: right;\n}\n.bz-text-bt text {\n  color: #ff3b30;\n}\n\n.bz-sf-box {\n  height: 120rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  border-bottom:1rpx solid #DDDDDD;\n  color: #666666;\n  font-size: 24rpx;\n  line-height: 120rpx;\n}\n\n.bz-sf-box-icon {\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: middle;\n  display: inline-block;\n  margin-top: -10rpx;\n}\n.bz-sf-box-name{\n  font-size: 32rpx;\n  color: #333333;\n  margin-left: 12rpx;\n  margin-right: 10rpx;\n}\n.page_fixed {\n  overflow: hidden;\n  position:fixed;\n}\n\n.second-kill-tag {\n  display: inline-block;\n  padding: 0 8rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  color: rgba(255,33,33,1);\n  line-height: 28rpx;\n  background:rgba(255,33,33,0.05);\n  border-radius: 2rpx;\n  border: 1rpx solid rgba(255,33,33,0.5);\n}\n\n.rel-price {\n  text-decoration: line-through;\n  margin-left: 10rpx;\n  font-size: 23rpx !important;\n  color: rgba(102, 102, 102, 1) !important;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  font-size: 20rpx!important;\n  color: #999!important;\n}\n\n.hot-price {\n  color: rgba(255, 33, 33, 1) !important;\n}\n\n.djk-view .btnOpen view {\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}\n\n.djk-view .btn-hui view {\n  background: #c6cad4;\n  color: #fff;\n}\n\n.djk-view .common_section .green {\n  color: #00B955;\n}\n\n.djk-view .yj-xz {\n  border-color: #00B955;\n}\n\n.mask {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0rpx;\n  /* display: none; */\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.sheet {\n  position: fixed;\n  bottom: 138rpx;\n  width: 100%;\n  /* height: 738rpx; */\n  height: unset;\n  /* padding-bottom: 77rpx; */\n  background: #fff;\n  border-top-left-radius: 30rpx;\n  border-top-right-radius: 30rpx;\n}\n\n.sheet-header {\n  position: relative;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #333333;\n}\n\n.sheet-header view {\n  width: 100rpx;\n  height: 100%;\n  position: absolute;\n  right: 0rpx;\n  top: 0rpx;\n}\n\n.sheet-header view image {\n  width: 38rpx;\n  height: 38rpx;\n}\n\n.has-val-cell .right {\n  color: #111334 !important;\n}\n\n.has-val-cell::after {\n  border-color: #111334 !important;\n  border-width: 2rpx !important\n}\n\n.sheet .container .item {\n  display: flex;\n  padding: 0 30rpx;\n  align-items: center;\n  justify-content: space-between;\n  height: 100rpx;\n  width: calc(100% - 30rpx - 30rpx);\n  background: #fff;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n\n.unline-view {\n  margin-left: 12rpx;\n  font-weight: 400;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #999999 !important;\n  font-size: 20rpx !important; \n  text-decoration: line-through !important;\n}\n\n.alert_box .title {\n  padding: 40rpx 30rpx 40rpx 30rpx;\n}\n\n.grey-view {\n  color: #999999;\n  font-size: 28rpx;\n  margin-right: 21rpx;\n}\n"},"convertDir/pages/note/brandDrugstoreList/brandDrugstoreList":{"js":"// pages/note//brandDrugstoreList/brandDrugstoreList.js\nconst app = getApp();\nimport {\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      brandDrugstoreList:[],\n      pageNo: 1,\n      totalSize:null,\n      showTooglePanel: false,  // 筛选面板默认隐藏\n      storeTypeList: [], // 药店分类列表\n      pageShow: false,\n      options: {},\n      publicDomain: app.globalData.publicDomain\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if(options.brandId) this.setData({ options })\n    this.getStoreTypeList();\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.data.pageNo = 1;\n    this.setData({\n      publicDomain: app.globalData.publicDomain\n    })\n    this.getNearbyDrugstore();\n  },\n  // 点击切换按钮\n  tooglcePanel() {\n    this.setData({\n      showTooglePanel: !this.data.showTooglePanel\n    })\n  },\n  // 点击标签\n  clickTypeTag(e) {\n    const curLabelCode = e.currentTarget.dataset.labelcode;\n\n    this.data.storeTypeList.map(itm => {\n      if (itm.labelCode == curLabelCode) {\n        if (itm.check) delete itm.check;\n          else itm.check = true\n      }\n    });\n\n    this.setData({\n      storeTypeList: this.data.storeTypeList\n    })\n    this.data.pageNo = 1;\n    if(!this.data.showTooglePanel){\n      this.getNearbyDrugstore();\n    }\n  },\n  // 重置标签\n  resetTypeTag() {\n    this.data.storeTypeList.map(itm => {\n      delete itm.check;\n    })\n\n    this.setData({\n      storeTypeList: this.data.storeTypeList,\n      showTooglePanel: false\n    })\n\n    this.data.pageNo = 1;\n    this.getNearbyDrugstore();\n  },\n  // 点击完成\n  searchByTag() {\n    this.setData({\n      showTooglePanel: false\n    })\n    this.data.pageNo = 1;\n    this.getNearbyDrugstore();\n  },\n  // 点击药店\n  nearbyDrugstoreBtn(e) {\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${e.currentTarget.dataset.id}`\n    })\n  },\n  // 点击遮罩, 收起下拉区域\n  maskClick() {\n    this.setData({\n      showTooglePanel: false\n    })\n  },\n  //获取药店分类专区\n  getStoreTypeList() {\n    ajax('post', 'miniapp/miniappController/getDrugstoreTypeList', {}, res => {\n      if (res.data.code == 0 && res.data.result && res.data.result.length > 0) {\n        console.warn(res.data)\n        this.setData({\n          storeTypeList: res.data.result\n        })\n      } \n    })\n  },\n  // 获取附近药店list\n  getNearbyDrugstore(pagetype) {\n    Taro.showLoading({\n      title: '加载中',\n    })\n    console.log(getApp().address_data)\n    const params = {\n      pageNo: this.data.pageNo,\n      pageSize: 10,\n      lng: getApp().address_data.longitude,\n      lat: getApp().address_data.latitude,\n      brandId: this.data.options.brandId\n    }\n    if (this.data.storeTypeList.length) params.drugstroreType = this.data.storeTypeList;\n\n    ajax2('post', 'drugstore/ykq/mini/v1/getBrandDrugStoreList', params, (res) => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        if(pagetype){\n          // 分页\n          this.data.brandDrugstoreList = this.data.brandDrugstoreList.concat(res.data.result.list);\n        }else{\n          this.data.brandDrugstoreList = res.data.result.list;\n          this.data.totalSize = res.data.result.totalSize\n        }\n        this.setData({\n          brandDrugstoreList: this.data.brandDrugstoreList,\n          pageShow: true\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, (res) => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if (this.data.brandDrugstoreList.length < this.data.totalSize){\n      this.setData({\n        pageNo: this.data.pageNo+1\n      })\n      this.getNearbyDrugstore(true);\n    }else{\n      Taro.showToast({\n        title: '没有更多',\n        icon:'none'\n      })\n    }\n  }\n};","json":{"medList":"../../../component/medList/medList","missingData-view":"../../../component/missingData/missingData"},"wxss":"/* pages/note//brandDrugstoreList/brandDrugstoreList.wxss */\n@import '../../../common/tableView.wxss';\n\n/* 附近药店 */\n\npage {\n  background-color: #fff;\n}\n\n.nearbyDrugstore {\n  padding: 194rpx 24rpx 0 24rpx;\n}\n\n.nearbyDrugstore-list {\n  display: flex;\n  padding: 20rpx 0 20rpx;\n  position: relative;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n}\n\n.nearbyDrugstore-list image {\n  width: 216rpx;\n  height: 144rpx;\n  display: block;\n}\n\n.nearbyDrugstore-list-right {\n  width: calc(100% - 236rpx);\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-address {\n  width: 70%;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-time {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 8rpx;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 6rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #666;\n  position: absolute;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx;\n}\n\n.location-img-right {\n  width: 28rpx;\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n/* 固定框 */\n.fix_contain{\n  position: fixed;\n  z-index: 1000;\n  width : 100%;\n  background: #fff;\n  border-top : 1px solid #F4F4F4;\n}\n\n.search_contion{\n  padding: 15rpx 0 15rpx 24rpx;\n  background: #fff;\n  position: relative;\n}\n.search_hearder{\n  width: 626rpx;\n  height: 60rpx;\n  background: #f0f0f5;\n  border-radius: 36rpx;\n  position: relative;\n\n}\n.search_input{\n  width: 558rpx;\n  height: 60rpx;\n  font-size: 25rpx;\n  padding-left: 68rpx;\n  color: #9D9FB8;\n\n}\n.search_icon{\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 16rpx 12rpx 16rpx 30rpx;\n}\n.search_clear{\n  top: 16rpx;\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  right: 16rpx;\n  z-index: 2;\n  display: none;\n}\n.search_clear.show{\n  display: block;\n}\n.search_kuai{\n  top: 0;\n  right: 0;\n  position: absolute;\n  width: 80rpx;\n  height: 100%;\n  z-index: 9;\n}\n.search_btn{\n  color: #00b955;\n  font-size: 28rpx;\n  position: absolute;\n  width: 100rpx;\n  top: 6rpx;\n  right: 0rpx;\n  line-height: 74rpx;\n  text-align: center;\n}\n.search_btn.gray {\n  color: #CCCCCC;\n}\n\n/* 分类面板 */\n/* .classification-panel {\n  position: fixed;\n  z-index: 1000;\n  border-top: 1px solid #F4F4F4;\n} */\n\n.classification-panel .slider-panel {\n  /* background: #fff; */\n  width: calc(100vw - 80rpx);\n  height: 104rpx;\n  padding-right: 80rpx;\n  text-indent: 24rpx;\n  line-height: 97rpx;\n  overflow: hidden;\n  overflow-x: auto;\n  white-space: nowrap;\n  border-bottom: 1rpx solid rgba(245, 245, 245, 1);\n}\n\n.classification-panel .slider-panel text, .tab-content text {\n  padding: 12rpx 20rpx;\n  margin-right: 20rpx;\n  background: #F8F8F8;\n  color: #333333;\n  font-size: 28rpx;\n  border-radius: 32rpx;\n  box-sizing: border-box;\n}\n\n.toogle-btn {\n  position: fixed;\n  right: 0rpx;\n  width: 80rpx;\n  height: 104rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #fff;\n  z-index: 1000;\n  box-shadow: rgba(238, 238, 238, 0.5) -14rpx 0rpx 10rpx 0rpx;\n}\n\n.toogle-btn image {\n  width: 28rpx;\n  height: 28rpx;\n  transform: rotate(270deg);\n  transition: all linear 0.3s;\n}\n\n.show-panel .toogle-btn {\n  box-shadow: unset;\n}\n\n.show-panel .toogle-btn image {\n  transform: rotate(90deg);\n}\n\n.show-panel .slider-panel {\n  display: none;\n}\n\n/* 筛选面板 默认隐藏 */\n.classification-panel .drop-down-panel {\n  display: none;\n  /* border-top: 1px solid #F4F4F4; */\n  position: absolute;\n  width: 100vw;\n  /* top: -2rpx; */\n  top : 0;\n  background: #fff;\n  z-index: 999;\n  box-shadow: 0px 12rpx 12rpx 0rpx rgba(0, 0, 0, 0.1); \n}\n\n.show-panel .drop-down-panel {\n  display: block;\n}\n\n.panel-header {\n  padding: 31rpx 0rpx 31rpx 24rpx;\n  font-size: 30rpx;\n  font-weight: 400;\n  color:rgba(51, 51, 51, 1);\n}\n\n.tab-content {\n  padding: 0 24rpx;\n}\n\n.tab-content text {\n  margin-bottom: 31rpx;\n  display: inline-block\n}\n\n.panel-footer {\n  display: flex;\n}\n\n.panel-footer text {\n  flex: 1;\n  display: inline-block;\n  height: 87rpx;\n  line-height: 87rpx;\n  text-align: center;\n  font-size: 30rpx;\n}\n\n.panel-footer text:nth-child(2) {\n  background-image: linear-gradient(270deg,#3c84ff, #4f90ff);\n  color: #fff;\n}\n\n.padding-top-0 {\n  padding-top: 0rpx;\n}\n\n.active {\n  background: #e8fff3 !important;\n  border: 2rpx solid #00b955 !important;\n  color: #00b955 !important;\n  font-size: 28rpx !important;\n  font-weight: 400 !important;\n}\n\n/* 遮罩 */\n.mask {\n  position: fixed;\n  z-index: 50;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.4);\n}","wxml":"\n  <view class=\"brandDrugstoreList-auto-container\">    \n    <navBar title-text=\"药店列表\" :showCapsule=\" publicDomain == 1 \"></navBar>\n    <view class=\"fix_contain\" :style=\"{top:  navBarHeight + 6 px}\">\n      <view :class=\"[classification-panel,( showTooglePanel ? 'show-panel' : '' )]\" v-if=\" storeTypeList.length \">  \n        <view class=\"toogle-btn\" bindtap=\"tooglcePanel\">\n          <image src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n        <view class=\"slider-panel\">\n          <text v-for=\"(item, key) in  storeTypeList \" :key=\"key\" :data-labelCode=\"item.labelCode\" bindtap=\"clickTypeTag\" :class=\"[( item.check ? 'active' : '' )]\">{{item.labelName}}\n          </text>\n        </view>\n        <view class=\"drop-down-panel\">  \n          <view class=\"panel-header\">店铺标签\n          </view>\n          <view class=\"tab-content\">\n            <text v-for=\"(item, key) in  storeTypeList \" :key=\"key\" :data-labelCode=\"item.labelCode\" bindtap=\"clickTypeTag\" :class=\"[( item.check ? 'active' : '' )]\">{{item.labelName}}\n            </text>\n          </view>\n          <view class=\"panel-footer\"> \n            <text bindtap=\"resetTypeTag\">重置\n            </text>\n            <text bindtap=\"searchByTag\">完成\n            </text>\n          </view>\n        </view>\n      </view>\n    </view>\n    <view class=\"mask\" v-if=\" showTooglePanel \" bindtap=\"maskClick\"></view>\n    <view v-if=\" brandDrugstoreList.length > 0 \" :class=\"[nearbyDrugstore,( storeTypeList.length ? '' : 'padding-top-0' )]\" style=\"padding-top: 53px\">\n      <medList :lists=\" brandDrugstoreList \" :brandId=\" options.brandId \"></medList>\n    </view>\n    <missingData-view v-if=\" brandDrugstoreList.length == 0 && pageShow \" zhi=\"new1\" textval=\"暂无符合条件的药店~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n  </view>"},"convertDir/pages/note/cityChoice/cityChoice":{"json":{"missingData-view":"/component/missingData/missingData"},"js":"// pages/group/groupLoading/cityChoice/cityChoice.js\nconst app = getApp()\nimport {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      city: '',\n      citylist: '',\n      interType:false,\n      networkType:true,\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    Taro.onNetworkStatusChange(function (res) {\n      console.log(res.isConnected)\n      console.log(res.networkType)\n    })\n    var pages = getCurrentPages();\n    var prevPage = pages[pages.length - 2]; \n    const protectedRoutes = [\n      'pages/note/locationAddress/locationAddress',\n      'pages/note/map/map',\n      'pages/onlineGoods/productList/productList'\n    ]\n    if (protectedRoutes.find(r => prevPage.route.includes(r))) {\n      this.setData({\n        city: options.city\n      })\n    } else {\n      this.setData({\n        city: app.drugStore.city\n      })\n    }\n    // var pages = getCurrentPages();\n    // var prevPage = pages[pages.length - 2]; //上一个页面\n    // if (prevPage.route.includes('pages/note/locationAddress/locationAddress')) {\n    //   this.setData({\n    //     city: options.city\n    //   })\n    // } else {\n    //   this.setData({\n    //     city: app.drugStore.city\n    //   })\n    // }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function() {},\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    Taro.onNetworkStatusChange(function (res) {\n      \n    })\n    let that = this;\n    //调用可选城市接口\n    let cityname = [];\n    Taro.showLoading({\n      title: '加载中...',\n    })\n    ajax('get', '/miniapp/miniappController/getAvailableCity', {}, function(res) {\n      Taro.hideLoading();\n      that.setData({\n        interType: false,\n        citylist: res.data.result\n      })\n\n    }, function(res) {\n      that.setData({\n        interType:true\n      })\n    });\n  },\n  city_btn: function(e) {\n    let city = e.currentTarget.dataset.city;\n    let cityCode = e.currentTarget.dataset.citycode;\n    let location = e.currentTarget.dataset.location;\n    var pages = getCurrentPages();\n    var prevPage = pages[pages.length - 2]; //上一个页面\n    const protectedRoutes = [\n      'pages/note/locationAddress/locationAddress',\n      'pages/note/map/map'\n    ]\n    if (protectedRoutes.find(r => prevPage.route.includes(r))) {\n      if (city != this.data.city && location){\n        Taro.onNetworkStatusChange(function (res) {\n          console.log(res.isConnected)\n          console.log(res.networkType)\n        })\n        prevPage.setData({\n          [\"location_data.city\"]: city,\n          [\"location_data.cityCode\"]: cityCode,\n          [\"location_data.latitude\"]: location.lat,\n          [\"location_data.longitude\"]: location.lng,\n          isType:true\n        })\n      }\n    } else {\n      app.drugStore.city = city;\n      app.drugStore.cityCode = cityCode;\n    }\n    Taro.navigateBack({\n      url: '../storeList/storeList?cityType=1'\n    })\n  },\n  // 刷新页面处理\n  refreshPage() {\n    Taro.redirectTo({\n      url: `/pages/note/cityChoice/cityChoice?city=${this.data.city}`\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function() {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function() {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function() {\n\n  }\n};","wxml":"\n  <view class=\"cityChoice-auto-container\">  \n    <navBar title-text=\"选择城市\"></navBar>\n    <view class=\"city_gps\"> \n      <image class=\"p_address_icon\" src=\"../../../pages/note/noteImg/icon_location.png\"></image>\n      <text>当前定位城市：{{city=='undefined'?'':city}}\n      </text>\n    </view>\n    <view :class=\"[contion,(isDjk?'djk':'')]\">  \n      <view class=\"city_title\">选择已开通服务的城市\n      </view>\n      <view class=\"city_list\">\n        <block :key=\"key\" v-for=\"(item, key) in citylist\">\n          <view :class=\"[city,(city == item.cityName?\"activi theme-text\":\"\")]\" bindtap=\"city_btn\" :data-city=\"item.cityName\" :data-location=\"item.location\" :data-cityCode=\"item.cityCode\">{{item.cityName}}\n          </view>\n        </block>\n      </view>\n      <block v-if=\"interType\">\n        <missingData-view zhi=\"new1\" textval=\"网络加载失败\" textval2=\"请再次刷新或检查网络\" buttonText=\"立即刷新\" bind:action=\"refreshPage\" :imageUrl=\" url_link + 'images/empty-network.png' \"></missingData-view>\n      </block>\n    </view>\n  </view>","wxss":"/* pages/note/cityChoice/cityChoice.wxss */\n@import '../../../common/tableView.wxss';\n.contion{\n  width: 100%;\n  height: auto;\n  padding: 25rpx;\n  background-color: #fff;\n  box-sizing: border-box;\n}\n.city_title{\n  font-size: 30rpx;\n  color: #999;\n  margin-bottom: 30rpx;\n}\n.city_list{\n  margin: 0 auto;\n  overflow: hidden;\n}\n.city{\n  float: left;\n  width: auto;\n  padding: 0 20rpx;\n  height: 60rpx;\n  border-radius: 30rpx;\n  background-color: #f7f7f7;\n  font-size: 28rpx;\n  text-align: center;\n  line-height: 60rpx;\n  margin: 0 15rpx 30rpx 15rpx;\n}\n.city_gps{\n  display: flex;\n  align-items: center;\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: left;\n  background-color: #fff;\n  padding-left: 30rpx;\n  position: relative;\n  margin-bottom: 20rpx;\n  font-size: 30rpx;\n}\n.p_address_icon{\n  width: 22rpx;\n  height: 30rpx;\n  margin-right: 15rpx;\n}\n.activi{\n  background-color:#e8fff3\n}"},"convertDir/pages/note/contactService/contactService":{"json":{},"js":"// pages/note/contactService/contactService.js\nimport {\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  onLoad: function (options) {\n\n  },\n  onShow: function () {\n\n  },\n  previewImage: function (e) {\n    var current = e.currentTarget.dataset.src;\n    Taro.previewImage({\n      current: current,\n      urls: [current]\n    })\n  }\n};","wxml":"\n  <view class=\"contactService-auto-container\"> \n    <navBar title-text=\"联系客服\" :showCapsule=\"true\"></navBar>\n    <view class=\"container\">\n      <view class=\"image_box\"> \n        <image :src=\"''+ url_link +'images/contactService.jpg'\" bindtap=\"previewImage\" data-src=\"{{ url_link }}images/contactService.jpg\"></image>\n        <view class=\"tips\">请关注服务号留言咨询\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/note/contactService/contactService.wxss */\n.image_box {\n  text-align: center;\n  margin-top: 285rpx;\n}\n.image_box image {\n  width: 365rpx;\n  height: 365rpx;\n  display: block;\n  margin: auto;\n}\n.image_box .tips {\n  margin: 26rpx 0;\n  font-size: 30rpx;\n  color: #333333\n}"},"convertDir/pages/note/error/maintain":{"js":"// pages/maintain/maintain.js\nimport {\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\nconst app = getApp();\n\nexport default {\n\n  data: function() {\n   return {\n     navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n     url_link: cdnStaticResourceUrl\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n \n};","wxml":"\n  <view class=\"maintain-auto-container\">   \n    <navBar title-text=\"提示\" :showCapsule=\"true\"></navBar>\n    <image class=\"maintainImage\" mode=\"widthFix\" :src=\" url_link + 'images/empty-log.png' \"></image>\n    <view class=\"text title\">服务升级中\n    </view>\n    <view class=\"text\">给您带来的不便，深感抱歉！\n    </view>\n  </view>","wxss":"/* pages/maintain/maintain.wxss */\npage{\n  background-color: #fff;\n}\n.text{\n  font-size: 30rpx;\n  color: #999999;\n  text-align: center;\n}\n.maintainImage{\n  display: block;\n  width: 320rpx;\n  margin: 0 auto;\n  margin-bottom: 20rpx;\n  margin-top: 312rpx;\n}\n\n.title{\n  font-size: 36rpx;\n  color: #111334;\n  margin-bottom: 10px;\n}\n"},"convertDir/pages/note/inquiryRecord/inquiryRecord":{"wxml":"\n  <view class=\"inquiryRecord-auto-container\"> \n    <navBar title-text=\"问诊记录\" :showCapsule=\" backStatus ? false : true \" :isCustom=\" backStatus ? true : false \"></navBar>\n    <view class=\"container\">  \n      <view class=\"top-tab\" :style=\"{top:  navBarHeight px}\">\n        <view :class=\"[top-tab__item,( status == item.statu ? 'active theme-text' : '' )]\" :data-current=\" item.statu \" bindtap=\"switchTab\" v-for=\"(item, index) in  statusArr \" :key=\"index\">{{ item.text }}\n        </view>\n      </view>\n      <block v-if=\" inquiryList.length > 0 \">\n        <scroll-view scroll-y=\"true\" class=\"content-box\" style=\"margin-top: 40px\">\n          <view class=\"sku-list_section common_section\" v-for=\"(item, index) in  inquiryList \" :key=\"index\" bindtap=\"jumpLink\" :data-item=\" item \">      \n            <view class=\"cell cell_title\"> \n              <view class=\"cell_center bold\">  \n                <text class=\"drugstore-name\" v-if=\" item.physicianName \">{{ item.physicianName }}\n                </text>\n                <text class=\"drugstore-name\" v-else>{{ item.inquiryStatus == 1 || item.inquiryStatus == 2 ? '等待分诊中…' : '医生助手' }}\n                </text>\n                <text class=\"cell_tag theme-bg\">{{ inquiryTypeDes[item.inquiryType-1] }}\n                </text>\n              </view>\n              <view :class=\"[cell_right,( item.inquiryStatus == 1 ? 'red' : '' ),( item.inquiryStatus == 2 || item.inquiryStatus == 3 ? 'theme-text' : '' )]\">{{ item.inquiryDesc }}\n              </view>\n            </view>\n            <view class=\"cell cell_content\"> \n              <view class=\"cell_left\">就诊人：\n              </view>\n              <view class=\"cell_center\">{{ item.patientName }} {{ patientSex[item.patientSex] }} {{ item.patientAge }}岁\n              </view>\n            </view>\n            <view class=\"cell cell_content\"> \n              <view class=\"cell_left\">病情描述：\n              </view>\n              <view class=\"cell_center\">{{ item.mainSuit }}\n              </view>\n            </view>\n            <view class=\"cell cell_content\"> \n              <view class=\"cell_left\">问诊时间：\n              </view>\n              <view class=\"cell_center\">{{ item.inquiryReportTimeStr }}\n              </view>\n            </view>\n            <view :class=\"[detail,( item.complainVal == 2 ? 'red' : '' )]\" v-if=\" item.complainVal \">{{ item.complainDesc }}\n              <text>{{ item.complainStatus }}\n              </text>\n            </view>\n            <view class=\"cell cell-bottom\" v-if=\" item.orderMoney \"> \n              <view class=\"cell_left\"></view>\n              <view class=\"cell_center\">\n                <view class=\"total\">问诊费: \n                  <text class=\"symbol\">¥\n                  </text>\n                  <text class=\"price\">{{ item.orderMoney }}\n                  </text>\n                </view>\n              </view>\n            </view>\n            <view class=\"content-btns\">      \n              <button class=\"active\" v-if=\" item.inquiryStatus == 1 \" catchtap=\"toCheckPay\" :data-item=\" item \">去支付\n              </button>\n              <button v-if=\" item.inquiryStatus == 1 || item.inquiryStatus == 2 \" catchtap=\"toCheckCancel\" :data-item=\" item \">取消\n              </button>\n              <button class=\"active\" v-if=\" item.inquiryStatus == 3 && item.type != 0 \" catchtap=\"toChatRoom\" :data-item=\" item \">进入问诊\n              </button>\n              <button v-if=\" item.afterComplaint \" catchtap=\"toInquiryRefund\" :data-item=\" item \">售后申诉\n              </button>\n              <button v-if=\" item.complaintDetails \" catchtap=\"toAppealDetail\" :data-item=\" item \">申诉详情\n              </button>\n              <button class=\"active\" v-if=\" item.pref \" catchtap=\"toPrescription\" :data-pref=\" item.pref \">查看处方\n              </button>\n              <button class=\"active\" v-if=\" (item.inquiryStatus == 4 && item.inquiryType == 4) || item.inquiryStatus == 5 || item.inquiryStatus == 6 \" :data-type=\" item.inquiryType \" :data-item=\"item \" catchtap=\"toInquiry\">再次咨询\n              </button>\n            </view>\n          </view>\n        </scroll-view>\n      </block>\n      <block v-else>\n        <missingData-view textval=\"暂无购药问诊记录\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n      </block>\n    </view>\n  </view>","json":{"mp-slideview":"/component/slideview/slideview","missingData-view":"/component/missingData/missingData"},"wxss":"@import '../../../common/tableView.wxss';\n\npage {\n  background-color: #F5F6FA;\n}\n\n.red {\n  color: #F93A4A;\n}\n\n.top-tab{\n  height: 80rpx;\n  width: 100%;\n  background-color: #fff;\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n}\n\n.top-tab__item {\n  text-align: center;\n  font-size: 28rpx;\n  line-height: 80rpx;\n  position: relative;\n  letter-spacing: 1.11rpx;\n  flex: 1;\n  color: #666883;\n}\n\n.top-tab__item.active{\n  font-weight: bold;\n}\n\n.top-tab__item.active:after {\n  display: block;\n  width: 40rpx;\n  height: 6rpx;\n  background: #00b955;\n  content: \"\";\n  left: 50%;\n  margin-left: -25rpx;\n  border-radius: 3rpx;\n  bottom: 0px;\n  position: absolute;\n}\n\n.content-box {\n  height: 100%;\n}\n\n.sku-list_section {\n  margin: 20rpx 24rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n\n.sku-list_section .cell_title {\n  border: 0;\n  height: inherit;\n  margin: 32rpx 0;\n}\n\n.sku-list_section .cell_title .cell_center {\n  max-width: 65%;\n}\n\n.sku-list_section .cell_title .cell_right{\n  color: #9D9FB8;\n  font-weight: bold;\n  font-size: 32rpx;\n}\n\n.sku-list_section .cell_title .cell_tag {\n  height: 30rpx;\n  font-size: 22rpx;\n  line-height: 30rpx;\n  font-weight: normal;\n}\n\n.sku-list_section .cell_content {\n  padding-bottom: 24rpx;\n  color: #666883;\n  font-size: 28rpx;\n  align-items: flex-start;\n}\n\n.sku-list_section .cell_content .cell_left {\n  color: #111734;\n  width: 140rpx;\n  font-weight: bold;\n}\n\n.sku-list_section .cell-bottom{\n  font-size: 24rpx;\n  border-top: 1rpx solid #EFF0F5;\n}\n\n.sku-list_section .detail {\n  background: #FAFBFD;\n  border-radius: 8px;\n  margin: 32rpx 24rpx 0;\n  padding: 24rpx 32rpx;\n  font-size: 28rpx;\n  color: #41435D;\n}\n\n.sku-list_section .detail text {\n  color: #00b955;\n  font-weight: bold;\n  margin-right: 20rpx;\n}\n\n.sku-list_section .cell-bottom .total {\n  font-size: 24rpx;\n  color: #41435D;\n}\n\n.sku-list_section .cell-bottom .total .symbol {\n  font-size: 28rpx;\n  color: #111334\n}\n\n.sku-list_section .cell-bottom .total .price {\n  font-size: 40rpx;\n  color: #111334\n}\n\n.content-btns {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.content-btns button{\n  width: 148rpx;\n  height: 60rpx;\n  line-height: 58rpx;\n  border: 1rpx solid #CCCCCC;\n  border-radius: 60rpx;\n  font-size: 28rpx;\n  margin: 0 20rpx 20rpx 0;\n  font-weight: bold;\n  background: none;\n}\n\n.content-btns button.active {\n  border-color: #00b955;\n  background: none;\n  color: #00b955;\n}\n\n.drugstore-name {\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 12rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n}","js":"// pages/note//inquiryRecord/inquiryRecord.js\nconst app = getApp();\nimport {\n  ajax,\n  ajax2,\n  getH5ImUrl,\n  cdnStaticResourceUrl,\n  inquiryOrderPay\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      statusArr: [{\n        'statu': 0,\n        'text': '全部'\n      }, {\n        'statu': 1,\n        'text': '待支付'\n      },{\n        'statu': 2,\n        'text':'进行中'\n      } , {\n        'statu': 3,\n        'text': '已完成'\n      }, {\n        'statu': 4,\n        'text':'已取消'\n      }],\n      inquiryTypeDes: ['极速问诊', '购药问诊', '扫码问诊', '名医问诊'],\n      pageNo: 1,\n      status: 0, //预设当前项的值\n      url_link: cdnStaticResourceUrl,\n      inquiryList: [],\n      recordCount: null,\n      patientSex: {\n        '0': '未知',\n        '1': '男',\n        '2': '女'\n      },\n      backStatus: false,\n    };\n  },\n  onLoad: function (options) {\n    if (options.source) this.setData({backStatus: true})\n  },\n  onShow: function () {\n    this.data.pageNo = 1;\n    this.getInquiryList();\n    Taro.setStorageSync('guidance', false)\n  },\n  /**\n   * 获取问诊记录列表\n   */\n  getInquiryList(pageType) {\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax2('post', 'api/slowSickness/inquiryList', {\n      pageNo: this.data.pageNo,\n      pageSize: 10,\n      orderStatus: this.data.status\n    }, (res) => {\n      Taro.hideLoading();\n      console.log(res);\n      if (res.data.code == 0) {\n        this.setData({\n          inquiryList: pageType ? this.data.inquiryList.concat(res.data.result.list) : res.data.result.list,\n          recordCount: res.data.result.total\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, (res) => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * 切换状态展示问诊列表\n   */\n  switchTab(e) {\n    let status = e.target.dataset.current || 0;\n    if (status == this.data.status) return false;\n    this.data.pageNo = 1;\n    this.setData({\n      status: status,\n      inquiryList: []\n    });\n    this.getInquiryList();\n  },\n  toChatRoom(e, item) {\n    if(e) item = e.currentTarget.dataset.item;\n    //inquiryType 1 极速问诊 2 购药问诊 3 扫码问诊 4 名医问诊\n    //type 0视频问诊，1图文问诊，2极速问诊，3上传处方\n    if(item.inquiryType == 1 || (item.inquiryType==3 && item.type == 1) || item.inquiryType == 4) {//极速问诊\n      Taro.setStorageSync('inquiryId', item.inquiryGuid)\n      this.handleToChatroom(item)\n    }else if(item.inquiryType == 2){ // 购药问诊\n      let url = getH5ImUrl(`im/im?token=${Taro.getStorageSync('sess_key')}&inquiryId=${ item.inquiryGuid }&source=inquiryList`)\n      Taro.navigateTo({\n        url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n      })\n    }\n  },\n  handleToChatroom(item) {\n    if (item.inquiryType == 4) {\n      if (item.inquiryStatus == 2) {\n        Taro.navigateTo({\n          url: `/pages/inquiry/chat/pages/chatroom?inquiryId=${Taro.getStorageSync('inquiryId')}&guidance=0`\n        })\n      } else {\n        Taro.navigateTo({\n          url: `/pages/inquiry/chat/pages/chatroom?inquiryId=${Taro.getStorageSync('inquiryId')}&guidance=1`\n        })\n      }\n    } else {\n      Taro.navigateTo({\n        url: `/pages/inquiry/chat/pages/chatroom`\n      })\n    }\n  },\n    /**\n   * 点击问诊卡片跳转\n   */\n  jumpLink(e) {\n    let item = e.currentTarget.dataset.item;\n    let patientGuid = item.patientGuid;\n    let inquiryGuid = item.inquiryGuid;\n    //type=0 扫码视频问诊不可点击\n    if(item.inquiryStatus == 1 || item.inquiryStatus == 5 || item.type == 0) return false;\n    if(item.inquiryStatus == 2 && item.inquiryType != 4) {\n      Taro.navigateTo({\n        url: `/pages/inquiry/inquiryWaiting/inquiryWaiting?patientGuid=${ patientGuid }&inquiryId=${ inquiryGuid }`\n      })\n    } else{\n      this.toChatRoom(null, item)\n    }\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if (this.data.pageNo >= parseInt(this.data.recordCount/10)) {\n      Taro.showToast({\n        title: '没有更多了',\n        icon: 'none'\n      })\n    } else {\n      this.data.pageNo = this.data.pageNo + 1\n      this.getInquiryList(true);\n    }\n  },\n  /**\n   * @description: 确认是否取消订单\n   * @return: void\n   */\n  toCheckCancel(e) {\n    let item = e.currentTarget.dataset.item\n    Taro.showModal({\n      content: item.inquiryStatus == 2 ? '正在等待医生接诊，若取消订单，医生将无法为您服务' : '确认取消该问诊订单',\n      confirmColor: getApp().globalData.mainColor,\n      confirmText: '确认',\n      cancelText: '取消',\n      success: res => {\n        if (res.confirm) {\n          this.orderCancel(item.inquiryGuid);\n        } else if (res.cancel) {\n          console.log('用户点击取消');\n        }\n      }\n    })\n  },\n  /**\n   * @description: 取消订单\n   * @return: void\n   */\n  orderCancel(inquiryGuid) {\n    ajax2('post', 'api/slowSickness/cancelOrder', {\n      inquiryGuid: inquiryGuid\n    }, res => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          title: \"取消成功\",\n          image: '/images/successIcon.png',\n          mask: true,\n          duration: 1000\n        })\n        setTimeout(()=>{\n          this.getInquiryList();\n        }, 1000)\n      } else {\n        Taro.showToast({\n          title: res.data.code == 1 ? res.data.msg : '请求失败',\n          icon: 'none',\n          mask: true,\n          duration: 1000\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      console.log(err)\n    });\n  },\n  /**\n   * @description: 点击查看处方详情\n   * @return: void\n   */\n  toPrescription(e) {\n    let pref = e.currentTarget.dataset.pref;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/prescriptionDetails/prescriptionDetails?inquiryId=${ pref }`\n    });\n  },\n  /**\n   * @description: 重新问诊，跳转导诊页面\n   * @return: void\n   */\n  toInquiry(e) {\n    let type = e.currentTarget.dataset.type;\n    let doctorId = e.currentTarget.dataset.item.physicianGuid;\n    let drugstoreId = e.currentTarget.dataset.item.organSign;\n    if (type == 1) {\n      var url = `/pages/inquiry/guidance/guidance`\n      if(drugstoreId){\n        url+=`?drugstoreId=${drugstoreId}&isHideBtn=1`\n        getApp().globalData.inquiryChannel = 2\n      } else {\n        getApp().globalData.inquiryChannel = 1\n      }\n      Taro.navigateTo({\n        url:url\n      })\n    } else if (type == 4) {\n      // 名医问诊跳转医生主页\n      var url =`/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${doctorId}`\n      if(drugstoreId){\n        url+=`&drugstoreId=${drugstoreId}&isHideBtn=1`\n      }\n      Taro.navigateTo({\n        url:url\n      })\n    }\n\n  },\n   /**\n   * @description: 跳转退款\n   * @return: void\n   */\n  toInquiryRefund(e){\n    let item = e.currentTarget.dataset.item;\n    Taro.navigateTo({\n      url: `/pages/note/inquiryRefund/inquiryRefund?inquiryDetail=${ JSON.stringify(item) }`\n    })\n  },\n  /**\n   * @description: 去支付\n   * @return: void\n   */\n  toCheckPay(e) {\n    let item = e.currentTarget.dataset.item;\n    let param = {\n      orderNo: item.orderId,\n      drugstoreId: item.drugstoreId\n    }\n    console.log('.....', item)\n    inquiryOrderPay(param, () => {\n      //支付成功 重新请求列表进入分诊\n      let patientGuid = item.patientGuid;\n      let inquiryGuid = item.inquiryGuid;\n      if (item.inquiryType == 4) {\n        Taro.navigateTo({\n          url: `/pages/inquiry/chat/pages/chatroom?inquiryId=${inquiryGuid}&guidance=0`\n        })\n      } else {\n        Taro.navigateTo({\n          url: `/pages/inquiry/inquiryWaiting/inquiryWaiting?patientGuid=${ patientGuid }&inquiryId=${ inquiryGuid }`\n        })\n      }\n    })\n  },\n   /**\n   * @description: 跳转申诉详情\n   * @return: void\n   */\n  toAppealDetail(e) {\n    let item = e.currentTarget.dataset.item;\n    Taro.navigateTo({\n      url: `/pages/inquiry/appealDetail/appealDetail?orderNo=${ item.orderId }`\n    })\n  }\n};"},"convertDir/pages/note/inquiryRefund/inquiryRefund":{"json":{},"wxml":"\n  <view class=\"inquiryRefund-auto-container\"> \n    <navBar title-text=\"售后申诉\" :showCapsule=\" true \"></navBar>\n    <view class=\"container\"> \n      <radio-group bindchange=\"radioChange\" class=\"common_section\">  \n        <view class=\"cell cell_title bold\">请选择售后申诉原因（必选）\n        </view>\n        <label v-for=\"(item, index) in  appealReasonList \" :class=\"[cell,( item.appealCode == 4 ? 'no-border':'' )]\" :key=\"index\"> \n          <text class=\"cell_center\">{{ item.appealReason }}\n          </text>\n          <radio class=\"cell_right\" :value=\" item.appealCode \"></radio>\n        </label>\n        <view class=\"other\" v-if=\" otherBoxShow \"> \n          <textarea placeholder=\"请输入退款原因\" placeholder-style=\"textarea-color\" bindinput=\"getAppealReasonDesc\" maxlength=\"30\" :value=\" appealReasonDesc \"></textarea>\n          <text>{{ appealReasonDesc.length }}/30\n          </text>\n        </view>\n      </radio-group>\n      <view class=\"common_footer\">\n        <button class=\"active\" bindtap=\"submitInfo\">提交\n        </button>\n      </view>\n    </view>\n  </view>","js":"// pages/note//inquiryRefund/inquiryRefund.js\nimport {\n  ajax,\n  ajax2\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      appealReasonList: [],\n      selectedOption: null,\n      otherBoxShow: false,\n      appealReasonDesc: '',\n      inquiryDetail: {}\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if(options.inquiryDetail) this.data.inquiryDetail = JSON.parse(options.inquiryDetail);\n    this.getAppealReasonList();\n  },\n   /**\n   * 获取申诉原因枚举\n   */\n  getAppealReasonList() {\n    ajax('get', 'api/appeal/getAppealReason', {}, (res) => {\n      if (res.data.code == 0) {\n        this.setData({\n          appealReasonList: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 选择申诉原因\n   */\n  radioChange(e) {\n    let currentCode = e.detail.value;\n    this.data.appealReasonList.forEach(item=> item.appealCode == currentCode && (this.data.selectedOption = item));\n    //选择其他展示输入框\n    if(this.data.selectedOption.appealCode == 4) {\n      this.setData({\n        otherBoxShow: true\n      })\n    }else {\n      this.setData({\n        otherBoxShow: false\n      })\n    }\n  },\n  /**\n   * 获取自定义的申诉原因\n   */\n  getAppealReasonDesc(e){\n    \n    this.setData({\n      appealReasonDesc: e.detail.value.slice(0, 30)\n    })\n  },\n  /**\n   * 提交申诉\n   */\n  submitInfo() {\n    if(!this.data.selectedOption) {\n      Taro.showToast({\n        title: '请选择申诉原因',\n        icon: 'none'\n      })\n      return false;\n    }\n\n    if(this.data.selectedOption.appealCode == 4 && !this.data.appealReasonDesc) {\n      Taro.showToast({\n        title: '请输入申诉原因',\n        icon: 'none'\n      })\n      return false;\n    }\n    let inquiryDetail = this.data.inquiryDetail;\n    let data = {\n      name: inquiryDetail.patientName,\n      inquiryNo: inquiryDetail.inquiryGuid,\n      appealReasonCode: this.data.selectedOption.appealCode,\n      appealReasonDesc: this.data.selectedOption.appealCode == 4 ? this.data.appealReasonDesc : this.data.selectedOption.appealReason,\n      orderNo: inquiryDetail.orderId,\n      patientId: inquiryDetail.patientId,\n      orderType: inquiryDetail.inquiryType\n    }\n\n    ajax2('post', 'api/appeal/createAppeal', data, (res) => {\n      if(res.data.code == 0) {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.navigateBack({\n            delta: 1,\n          })\n        }, 1000);\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n};","wxss":"/* pages/note//inquiryRefund/inquiryRefund.wxss */\n@import '../../../common/tableView.wxss';\n\n.common_section {\n  margin-top: 20rpx;\n  /* padding-bottom: 30rpx; */\n  overflow: hidden;\n}\n\n.common_section .cell {\n  padding: 30rpx;\n  font-size: 28rpx;\n  color: #333333;\n}\n\n.common_section .cell .cell_center{\n  flex: 1;\n}\n\n.common_section .no-border::before {\n  border: 0;\n}\n\n.common_section .other {\n  margin: 0 32rpx 30rpx;\n  background: #F5F6FA;\n  border-radius: 12rpx;\n}\n\n.common_section .other textarea {\n  height: 150rpx;\n  padding: 20rpx;\n  box-sizing: border-box;\n  font-size: 28rpx;\n}\n\n.common_section .other text {\n  font-size: 24rpx;\n  text-align: right;\n  display: block;\n  padding: 0 53rpx 25rpx 0;\n  color: #9D9FB8;\n}\n\n.textarea-color {\n  color: #9D9FB8;\n}"},"convertDir/pages/note/locationAddress/locationAddress":{"json":{"missingData-view":"../../../component/missingData/missingData"},"wxss":"/* pages/note/locationAddress/locationAddress.wxss */\n@import '../../../common/tableView.wxss';\n\npage {\n  background-color: #F5F5F5;\n}\n\n.la-header {\n  display: flex;\n  height: 77rpx;\n  background-color: #fff;\n  padding: 0 20rpx 0 20rpx;\n  position: relative;\n}\n\n.la-header-left {\n  width: 208rpx;\n  font-size: 28rpx;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.la-header-dw {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin: 0 6rpx;\n}\n.la-header-jtimg {\n  width: 28rpx;\n  height: 28rpx;\n  flex-shrink: 0;\n}\n\n.la-header-left .la-header-dwimg {\n  width: 38rpx;\n  height: 38rpx;\n}\n\n.la-header-right {\n  width: calc(100% - 200rpx);\n  position: relative;\n}\n\n.la-header-right input {\n  width: calc(100% - 150rpx);\n  height: 60rpx;\n  border-radius: 90rpx;\n  background-color: #f5f5f5;\n  text-align: left;\n  margin-top: 10rpx;\n  padding-left: 60rpx;\n  font-size: 25rpx;\n  color: #000;\n  line-height: 60rpx;\n  position: relative;\n  padding-right: 90rpx;\n}\n\n.la-header-right .la-header-right-ss {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  left: 22rpx;\n  top: 26rpx;\n  z-index: 1;\n}\n\n.la-nv-dq {\n  height: 58rpx;\n  padding: 0 24rpx 0 24rpx;\n  background-color: #f5f5f5;\n  line-height: 58rpx;\n  text-align: left;\n  font-size: 24rpx;\n  color: #8a8080;\n}\n\n/* 重新定位 */\n\n.curAddress_title {\n  height: 58rpx;\n  line-height: 58rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 23rpx;\n}\n\n.curAddress_name_view {\n  position: relative;\n  height: 90rpx;\n  display: flex;\n  padding: 0 23rpx;\n  flex-direction: row;\n  background-color: #fff;\n}\n\n.curAddress_name {\n  flex: 1;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.curAddress_change {\n  width: 170rpx;\n  height: 90rpx;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: 25rpx;\n}\n\n.curAddress_change image {\n  width: 45rpx;\n  height: 45rpx;\n  margin-right: 5rpx;\n}\n\n.la-nv-list .curAddress_name_view {\n  border-bottom: 1px solid rgba(245, 247, 248, 1);\n}\n\n/* 搜索弹出 */\n\n.la-search-list {\n  width: 100%;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n}\n\n.curAddress_juli {\n  font-size: 26rpx;\n  color: #999;\n}\n\n.la-search-list .curAddress_name_view {\n  height: auto;\n  display: block;\n  padding-bottom: 20rpx;\n  border-bottom: 1px solid rgba(245, 247, 248, 1);\n}\n\n.la-header-right .la-header-right-img {\n  width: 36rpx;\n  position: absolute;\n  right: 4rpx;\n  top: 3rpx;\n  z-index: 9999;\n  display: block;\n  padding: 20rpx;\n}\n\n.back-color {\n  background-color: #fff;\n}\n\n.address-box {\n  /* border-bottom: 20rpx solid #f5f5f5; */\n  margin-bottom: 20rpx;\n  background: #ffffff;\n  padding: 10rpx 24rpx 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.address-box:last-child {\n  border: 0;\n}\n\n.address-box__title {\n  font-size: 24rpx;\n  color: #999999;\n  display: flex;\n  align-items: center;\n  padding: 10rpx 0;\n}\n.address-box__title image {\n  width: 30rpx;\n  height: 30rpx;\n  margin-right: 8rpx;\n}\n\n.address-box__current {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  \n}\n\n.address-box__name {\n  font-size: 30rpx;\n  color: #333333;\n  font-weight: bold;\n  padding: 22rpx 0;\n}\n\n.address-box__list {\n  padding-bottom: 20rpx;\n  margin-left: 40rpx;\n  border-bottom: 1rpx solid #F5F5F5;\n}\n\n.address-box__detail {\n  font-size: 24rpx;\n  color: #666666;\n  margin-top: -8rpx;\n}\n\n.address-box__btns {\n  position: absolute;\n  bottom: 0;\n  left: 60rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  width: 100%;\n  color: #666666;\n  font-size: 28rpx;\n  border-top: 1rpx solid #F5F5F5;\n  display: flex;\n  align-items: center;\n}\n.address-box__btns image {\n  width: 14rpx;\n  height: 22rpx;\n  transform: rotate(90deg);\n  margin-left: 10rpx;\n  opacity: 0.8;\n}\n.address-box__btns .up {\n  transform: rotate(-90deg);\n}\n\n.address-box__re-location {\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n  flex-shrink: 0;\n}\n\n.address-box__re-location image {\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 10rpx;\n}\n\n.address-box__nearby-list .address-box__name {\n  margin-left: 40rpx;\n  border-bottom: 1rpx solid #F5F5F5;\n}","wxml":"\n  <view class=\"locationAddress-auto-container\"> \n    <navBar title-text=\"选择定位\" :showCapsule=\"true\"></navBar>\n    <view :class=\"[(isDjk?'djk':'')]\">  \n      <view class=\"la-header\"> \n        <view class=\"la-header-left\" bindtap=\"selectCity\">  \n          <image class=\"la-header-dwimg\" src=\"../noteImg/index-dw.png\" mode=\"widthFix\"></image>\n          <view class=\"la-header-dw\">{{address_data.city?address_data.city:'选择城市'}}\n          </view>\n          <image class=\"la-header-jtimg\" src=\"../../../images/icon-arrow.png\" mode=\"widthFix\"></image>\n        </view>\n        <view class=\"la-header-right\">  \n          <image class=\"la-header-right-img\" v-if=\"input_val\" catchtap=\"search_clear\" src=\"../../../images/search_clear.png\" mode=\"widthFix\"></image>\n          <image class=\"la-header-right-ss\" src=\"../../../images/search-icon-black.png\" mode=\"widthFix\"></image>\n          <input confirm-type=\"search\" :value=\"input_val\" bindblur=\"search_blur\" bindfocus=\"search_type\" placeholder=\"请输入您需要搜索的地址\" bindinput=\"address_input\"></input>\n        </view>\n      </view>\n      <block v-if=\"searchType == false\">   \n        <view class=\"address-box\"> \n          <view class=\"address-box__title\"> \n            <image src=\"../../../pages/note/noteImg/address-icon1.png\"></image>\n            <text>当前地址\n            </text>\n          </view>\n          <view class=\"address-box__current\">  \n            <view class=\"address-box__name\" v-if=\"dw_type\">定位中...\n            </view>\n            <view class=\"address-box__name\" v-else>{{ address_data.address ? address_data.address : '没能获取到您的定位' }}\n            </view>\n            <view class=\"address-box__re-location theme-text\" bindtap=\"reLocation\"> \n              <image src=\"../../../pages/note/noteImg/djk_biao.png\"></image>\n              <view>重新定位\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"address-box\" v-if=\" addressList.length > 0 \" :style=\"{padding-bottom:  addressList.length > 3 ? '80rpx' : '0' }\">  \n          <view class=\"address-box__title\"> \n            <image src=\"../../../pages/note/noteImg/address-icon3.png\"></image>\n            <text>我的收货地址\n            </text>\n          </view>\n          <view :style=\"{height:  moreAddress ? '100%' : addressBoxHeight + 'px' , overflow: hidden}\">\n            <view class=\"address-box__list\" v-for=\"(item, key) in  addressList \" :key=\"key\" :data-item=\" item \" bindtap=\"addressBtn\" data-type=\"myAddressList\"> \n              <view class=\"address-box__name\">{{ item.selectNearyAddress }} {{ item.address}}\n              </view>\n              <view class=\"address-box__detail\">{{ item.consignee }} {{ item.phone }}\n              </view>\n            </view>\n          </view>\n          <view class=\"address-box__btns\" bindtap=\"openMoreAddress\" v-if=\" addressList.length > 3 \"> \n            <text>{{ moreAddress ? '收起更多地址' : '展开更多地址'}}\n            </text>\n            <image :class=\"[(moreAddress ? 'up' : '')]\" src=\"../../../images/right-arrow.png\" mode=\"widthFix\"></image>\n          </view>\n        </view>\n        <view class=\"address-box\" v-if=\" list.length > 0 \"> \n          <view class=\"address-box__title\"> \n            <image src=\"../../../pages/note/noteImg/address-icon2.png\"></image>\n            <text>附近的地址\n            </text>\n          </view>\n          <view class=\"address-box__nearby-list\">\n            <view class=\"address-box__name\" :data-item=\" item \" bindtap=\"addressBtn\" v-for=\"(item, key) in list\" :key=\"key\">{{ item.adress }}\n            </view>\n          </view>\n        </view>\n        <block v-if=\" interType \">\n          <missingData-view zhi=\"new1\" textval=\"定位失败，请开启定位、网络、再重试\" :imageUrl=\" url_link + 'images/empty-network.png' \"></missingData-view>\n        </block>\n      </block>\n      <block v-if=\"searchType == true\"> \n        <view class=\"la-search-list\"> \n          <view v-if=\"input_val\" class=\"curAddress_name_view\" :data-longitude=\"item.location.lng\" :data-latitude=\"item.location.lat\" bindtap=\"selectAddress\" data-address=\"{{item.title[0].str}}{{item.title[1].str}}{{item.title[2].str}}\" v-for=\"(item, key) in searchList\" :key=\"key\"> \n            <view class=\"curAddress_name\">\n              <block v-for=\"items in item.title\" :key=\"items\"> \n                <text class=\"theme-text\" v-if=\"items.key == true\">{{items.str}}\n                </text>\n                <text v-else>{{items.str}}\n                </text>\n              </block>\n            </view>\n            <view class=\"curAddress_juli\">{{item.address}}\n            </view>\n          </view>\n          <block v-if=\"search_qs_type && !interType2 && input_val\">\n            <missingData-view zhi=\"new1\" textval=\"搜索无结果\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n          </block>\n        </view>\n        <block v-if=\"interType2\">\n          <missingData-view zhi=\"new1\" textval=\"网络加载失败\" textval2=\"请再次刷新或检查网络\" buttonText=\"立即刷新\" bind:action=\"refreshPage\" :imageUrl=\" url_link + 'images/empty-network.png' \"></missingData-view>\n        </block>\n      </block>\n    </view>\n  </view>","js":"// pages/note/locationAddress/locationAddress.js\nconst app = getApp();\nlet cxdwType = true;\nimport {\n  url,\n  ajax,\n  ajax2,\n  indexGetLocation,\n  open_wechatMap,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      dw_type:false,\n      count: null,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      searchType: false,\n      pageNum: 1,\n      address_data: {},\n      location_data:{},\n      list: [],\n      searchList: [],\n      input_val: '',\n      interType: false,\n      ajax_type: true,\n      search_qs_type: false,\n      isType:false,\n      backType: 0,\n      addressList: [],\n      moreAddress: false,\n      addressBoxHeight: 0\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    let data = options.address_data;\n    this.setData({\n      address_data: JSON.parse(data.replace(/ASCII38/, '&')),\n    })\n    let address_data = this.data.address_data\n    if (!getApp().address_data.latitude) {\n      this.setData({\n        interType: true\n      })\n      return false;\n    }\n  },\n  // 根据搜索字分割字符\n  hilight_word: function(key, word) {\n    if (!key) {\n      return false;\n    }\n    let idx = word.indexOf(key),\n      t = [];\n    if (idx > -1) {\n      if (idx == 0) {\n        t = this.hilight_word(key, word.substr(key.length));\n        t.unshift({\n          key: true,\n          str: key\n        });\n        return t;\n      }\n\n      if (idx > 0) {\n        t = this.hilight_word(key, word.substr(idx));\n        t.unshift({\n          key: false,\n          str: word.substring(0, idx)\n        });\n        return t;\n      }\n    }\n    return [{\n      key: false,\n      str: word\n    }];\n  },\n  // 查询 公用请求的type_val为查询类型  区分不同请求状态\n  load_list(address_data) {\n    Taro.showLoading({\n      title: '加载中...',\n    })\n    // type_val：1关键字查询数据\n    ajax2('get', 'miniapp/miniappController/getNearbyAdressByLongitude', {\n      latitude: address_data.latitude,\n      longitude: address_data.longitude\n    }, (res) => {\n      if (res.data.code == 0) {\n        this.setData({\n          interType: false,\n          dw_type: false,\n          list: res.data.result.nearbyAdressList\n        })\n        if (this.data.isType){\n          this.setData({\n            [\"address_data.address\"]: res.data.result.address,\n            [\"address_data.city\"]: res.data.result.city,\n            [\"address_data.cityCode\"]: res.data.result.cityCode,\n            isType:false\n          })\n          app.locationTime = Date.parse(new Date());\n        }\n        app.address_data = this.data.location_data.latitude ? this.data.location_data : this.data.address_data\n        setTimeout(function () {\n          cxdwType = true;\n          Taro.hideLoading();\n        }, 300);\n      }else{\n        cxdwType = true;\n        Taro.hideLoading();\n      }\n    }, (res) => {\n      this.setData({\n        address_data: {},\n        list: [],\n        interType: true,\n        dw_type: false\n      })\n      setTimeout(function () {\n        cxdwType = true;\n        Taro.hideLoading();\n      }, 300);\n    })\n  },\n  // 刷新搜索列表处理\n  refreshPage() {\n    this.input_list(this.data.address_data.city ? this.data.address_data.city : '', this.data.input_val, false)\n  },\n  // pagetype是否分页\n  input_list(city, address, pageType) {\n    let that = this;\n\n    setTimeout(function() {\n      ajax2('post', 'miniapp/miniappController/getAddressListByKeys', {\n        pageNum: that.data.pageNum,\n        pageSize: 20,\n        areaRound: city,\n        keys: address ? address : city\n      }, (res) => {\n        that.setData({\n          interType2: false,\n        })\n        if (res.data.code == 0) {\n          if (!res.data.result.data){\n            return false;\n          }\n          that.setData({\n            ajax_type: true,\n            search_qs_type: res.data.result.data.length != 0 ? false : true\n          })\n          if (!pageType) {\n            let data = res.data.result.data;\n            if (data) {\n              for (let i = 0; i < data.length; i++) {\n                data[i].title = that.hilight_word(that.data.input_val, data[i].title);\n              }\n              that.setData({\n                count: res.data.result.count,\n                searchList: data\n              })\n            }\n          } else {\n            that.setData({\n              count: res.data.result.count,\n              searchList: that.data.searchList.concat(res.data.result.data)\n            })\n          }\n\n        } else {\n          that.setData({\n            search_qs_type: true\n          })\n        }\n      }, (res) => {\n        that.setData({\n          interType2: true\n        })\n\n      })\n    }, 300);\n  },\n  selectCity() {\n    Taro.navigateTo({\n      url: `/pages/note/cityChoice/cityChoice?city=${this.data.address_data.city}`\n    })\n  },\n  addressBtn(e) {\n    let item = e.currentTarget.dataset.item;\n    let type = e.currentTarget.dataset.type;\n    console.log(item)\n    this.data.address_data.latitude = item.latitude;\n    this.data.address_data.longitude = item.longitude;\n    if(item.cityName) {\n      this.data.address_data.city = item.cityName;\n      this.data.address_data.cityCode = item.city;\n    }\n    if(type == 'myAddressList') {\n      this.data.address_data.address = item.selectNearyAddress;\n    }else {\n      this.data.address_data.address = item.adress;\n    }\n    this.setData({\n      address_data: this.data.address_data\n    })\n    app.address_data = this.data.address_data;\n    app.locationTime = Date.parse(new Date());\n    Taro.navigateBack({\n      delta: 1\n    })\n  },\n  search_clear() {\n    this.setData({\n      input_val: '',\n      searchType: false\n    })\n  },\n  reLocation() {\n    if (cxdwType){\n      Taro.showLoading({\n        title: '加载中',\n      })\n      this.setData({\n        dw_type:true,\n        isType:true\n      })\n      cxdwType = false;\n      this.getLocation();\n    }\n  },\n  getLocation() {\n    console.log(app.address_data)\n    // 获取地址\n    indexGetLocation((longitude, latitude) => {\n      if (!longitude) {\n        this.setData({\n          address_data: {},\n          list: [],\n          interType: true,\n          dw_type:false,\n        })\n        setTimeout(function(){\n          cxdwType = true;\n          Taro.hideLoading();\n        },300);\n        return false\n      }\n      this.setData({\n        [\"address_data.latitude\"]: latitude,\n        [\"address_data.longitude\"]: longitude,\n      })\n      this.load_list(this.data.address_data)\n    })\n  },\n  search_type() {\n    this.setData({\n      searchType: true\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    if (this.data.location_data.latitude){\n      this.data.address_data = this.data.location_data;\n      this.setData({\n        searchType:false\n      })\n    }\n    this.load_list(this.data.address_data)\n    if(getApp().globalData.sess_key) {\n      this.addressList()\n    }\n  },\n  addressList () {\n    ajax('get', `miniapp/address/list`, {}, (res) => {\n      if (res.data.code == 0) {\n        this.setData({\n          addressList: res.data.result\n        }, ()=>{\n          var query = Taro.createSelectorQuery();\n          query.select('.address-box__list').boundingClientRect((rect) => {\n            let addressBoxHeight;\n            if(this.data.addressList.length > 3) {\n              addressBoxHeight = rect && rect.height * 3\n            }else {\n              addressBoxHeight = rect && rect.height * this.data.addressList.length\n            }\n            this.setData({\n              addressBoxHeight: addressBoxHeight\n            })\n          }).exec();\n        })\n      }\n    })\n  },\n  address_input(e) {\n    this.setData({\n      searchList: [],\n      input_val: e.detail.value,\n      pageNum: 1\n    })\n    this.input_list(this.data.address_data.city ? this.data.address_data.city : '', e.detail.value, false)\n    if (e.detail.value) {\n\n    } else {\n      // console.log('空的-------')\n      // this.setData({\n      //   searchList:[]\n      // })\n    }\n\n  },\n  selectAddress(e) {\n    this.setData({\n      [\"address_data.address\"]: e.currentTarget.dataset.address,\n      [\"address_data.latitude\"]: e.currentTarget.dataset.latitude,\n      [\"address_data.longitude\"]: e.currentTarget.dataset.longitude,\n    })\n    app.address_data = this.data.address_data\n    app.locationTime = Date.parse(new Date());\n    Taro.navigateBack({ delta: 1})\n  },\n  search_blur() {\n    let that = this;\n  },\n  openMoreAddress(){\n    this.setData({\n      moreAddress: !this.data.moreAddress\n    }) \n  }\n};"},"convertDir/pages/note/login/login":{"wxss":"@import '../../../common/tableView.wxss';\npage {\n  background-color: #fff;\n}\n.header {\n  position: relative;\n  width: 100%;\n  margin-top: 106rpx;\n  padding: 0 40rpx 40rpx;\n  box-sizing: border-box;\n}\n.header .logo {\n  display: block;\n  width: 267rpx;\n  height: 78rpx;\n}\n.header .title {\n  margin-top: 10rpx;\n  text-align: center;\n  font-size: 32rpx;\n  color: #000000;\n}\n.content {\n  margin: 0 40rpx;\n  font-size: 28rpx;\n}\n.content .li_title {\n  margin-top: 10rpx;\n  font-size: 42rpx;\n  color: #000000;\n}\n.content .li_con {\n  margin-top: 14rpx;\n  color: #666666;\n  font-size: 24rpx;\n  margin-bottom: 200rpx;\n}\n.content .button {\n  margin-bottom: 20rpx;\n  width: 100%;\n  height: 100rpx;\n  line-height: 100rpx;\n  border-radius: 100rpx;\n  font-size: 34rpx;\n  color: #FFFFFF;\n  text-align: center;\n  font-weight: bold;\n}\n.content .cancel {\n  font-size: 30rpx;\n  color: #999999;\n  text-align: center;\n  height: 100rpx;\n  line-height: 100rpx;\n}\n\n.bind_phone .login_title {\n  padding: 120rpx 40rpx 40rpx;\n  font-size: 54rpx;\n  color: #333;\n  letter-spacing: 1.48rpx;\n  font-weight: bold;\n}\n.bind_phone .login_form .login_inp {\n  border-bottom: 1rpx solid #eee;\n  padding: 16rpx 0;\n  margin: 0 32rpx;\n}\n.bind_phone .login_form .login_inp .login_inp_tip {\n  padding-bottom: 12rpx;\n  font-size: 22rpx;\n  color: #999999;\n  letter-spacing: 1.11rpx;\n}\n.bind_phone .login_form .login_inp .login_inp_val {\n  display: flex;\n}\n.bind_phone .login_form .login_inp input {\n  height: 50rpx;\n  line-height: 50rpx;\n  font-size: 32rpx;\n  color: #333333;\n  letter-spacing: 1.11rpx;\n  flex: 1;\n}\n.bind_phone .login_form .login_inp input::-webkit-input-placeholder {\n  color: #999999;\n}\n.bind_phone .login_form .login_inp .login_inp_getPaw {\n  width: 160rpx;\n  height: 60rpx;\n  line-height: 58rpx;\n  border-radius: 100rpx;\n  text-align: center;\n  font-size: 28rpx;\n  padding: 0;\n  box-sizing: border-box;\n  background: none;\n  margin: 0;\n}\n.bind_phone .login_form .login_inp .sending_code {\n  color: #999999;\n}\n.bind_phone .btn_login_sub {\n  width: 686rpx;\n  height: 95rpx;\n  line-height: 95rpx;\n  text-align: center;\n  margin: 100rpx auto 0;\n  background: #e4393b;\n  border-radius: 100rpx;\n  font-size: 36rpx;\n  color: #fff;\n  letter-spacing: 0.58rpx;\n}\n.bind_phone .btn_login_disable {\n  background: #C6CAD4;\n}\n\n.text-tips {\n  font-size: 24rpx;\n  position: fixed;\n  bottom: 60rpx;\n  width: 100%;\n  text-align: center;\n}","wxml":"\n  <view class=\"login-auto-container\"> \n    <navBar title-text :showCapsule=\" false \"></navBar>\n    <view :class=\"[container,( isDjk ? 'djk' : '' )]\">  \n      <view class=\"wx_login\" v-if=\" !bindPhone \"> \n        <view class=\"header\">\n          <image mode=\"widthFix\" class=\"logo\" src=\"../../../images/app-logo.png\"></image>\n        </view>\n        <view class=\"content\">  \n          <view class=\"li_title\">登录后开发者将获得以下权限\n          </view>\n          <view class=\"li_con\">获得你的公开信息（昵称、头像等）\n          </view>\n          <form class=\"button right\"> \n            <block v-if=\" !phoneBtnShow \">  \n              <view v-if=\" canIUseGetUserProfile \" bindtap=\"getUserInfo\" class=\"button theme-bg\">允许授权\n              </view>\n              <button v-else class=\"button theme-bg\" open-type=\"getUserInfo\" bindgetuserinfo=\"getUserInfo\" form-type=\"submit\">允许授权\n              </button>\n              <view class=\"cancel\" bindtap=\"loginBack\">暂不授权\n              </view>\n            </block>\n            <block v-else> \n              <button class=\"button theme-bg\" open-type=\"getPhoneNumber\" bindgetphonenumber=\"getPhoneNumber\">微信一键登录\n              </button>\n              <button class=\"button theme-bg\" bindtap=\"tobindPhone\">手机号码登录\n              </button>\n            </block>\n          </form>\n        </view>\n      </view>\n      <view class=\"bind_phone\" v-else>   \n        <view class=\"login_title\">请绑定手机号\n        </view>\n        <view class=\"login_form\"> \n          <view class=\"login_inp\"> \n            <view class=\"login_inp_tip\">请输入手机号\n            </view>\n            <input placeholder=\"请输入手机号\" bindinput=\"setInput\" type=\"number\" data-type=\"phone\" maxlength=\"11\"></input>\n          </view>\n          <view class=\"login_inp\"> \n            <view class=\"login_inp_tip\">请输入验证码\n            </view>\n            <view class=\"login_inp_val\"> \n              <input type=\"number\" placeholder=\"请输入验证码\" bindinput=\"setInput\" data-type=\"code\" maxlength=\"4\"></input>\n              <button :disabled=\"codeStatus\" :class=\"[login_inp_getPaw,theme-text,( codeStatus ? 'sending_code' : '' )]\" bindtap=\"getCode\">{{codeStatus?sendMsg:'获取验证码'}}\n              </button>\n            </view>\n          </view>\n        </view>\n        <view class=\"btn_login_sub theme-bg\" bindtap=\"phoneLogin\" v-if=\"formData.phone && formData.code\">登录\n        </view>\n        <view class=\"btn_login_sub btn_login_disable\" v-else>登录\n        </view>\n      </view>\n      <view class=\"text-tips\">\n    登录代表您已同意荷叶健康\n    、、\n        <text class=\"theme-text\" bindtap=\"jumpWebview\" data-name=\"protrol\">用户服务协议\n        </text>\n        <text class=\"theme-text\" bindtap=\"jumpWebview\" data-name=\"PrivacyPolicies\">隐私政策\n        </text>\n        <text class=\"theme-text\" bindtap=\"jumpWebview\" data-name=\"LegalNotice\">法律声明\n        </text>\n      </view>\n    </view>\n  </view>","js":"import {\n  url,\n  ajax,\n  ajax2,\n  ajaxNotRepeat,\n  wxReportAnalytics\n} from \"../../../utils/util\";\nimport { initIMSingle, handleGetUserEasemoInfo } from \"../../../common/toChatroom\"\nconst scanInquiryPath = \"pages/scan/pages/addInformation/addInformation\"\nconst speedNativeInquiry = \"speedNativeInquiry\"\nconst app = getApp();\nPage({\n  data: {\n    isDjk: getApp().globalData.src_whyb ? true : false,\n    formId: '',\n    source: null,\n    formData: {\n      phone: \"\",\n      code: \"\"\n    },\n    codeStatus: false,\n    sendMsg: \"60s后重发\",\n    authorizationData: {},\n    buttonClickTime: null,\n    bindPhone: false,\n    reportAnalyticsData: {},\n    phoneBtnShow: false,\n    backUrl: null,\n    inquiryFrom: '', // speedNativeInquiry 来源：极速问诊落地方式\n    inquirySource: 1,//平台来源 宜块钱是1 大健康是4 保险5\n    supportCode: '',\n    canIUseGetUserProfile: false\n  },\n  onLoad: function (options) {\n    this.data.source = decodeURIComponent(options.source)\n\n    this.data.reportAnalyticsData = options.reportAnalyticsData ? JSON.parse(options.reportAnalyticsData) : {}\n\n    if (options.backUrl) this.data.backUrl = decodeURIComponent(options.backUrl);\n    if (options.inquiryFrom) this.data.inquiryFrom = options.inquiryFrom;\n    if (options.inquirySource) this.data.inquirySource = options.inquirySource;\n    if (options.supportCode) this.data.supportCode = options.supportCode;\n    console.log(options, '------------------')\n  },\n  onShow(){\n    //兼容低版本\n    if (wx.getUserProfile) {\n      this.setData({\n        canIUseGetUserProfile: true\n      })\n    }\n    this.setData({\n      isDjk: getApp().globalData.src_whyb ? true : false\n    })\n  },\n  getUserInfo(e) {\n    let that = this;\n    console.log(e)\n    if (e && e.detail.userInfo) {\n      that.login(e.detail.userInfo);\n      return;\n    }\n    wx.getUserProfile({\n      desc: '用于获取公开信息(昵称、头像等)',\n      success: function (user_res) {\n        that.login(user_res.userInfo);\n      },\n      fail: (res) => {\n        wx.showModal({\n          content: \"授权登录以获得更好的体验，是否重新授权？\",\n          showCancel: false,\n          success: (res) => {\n            if (res.confirm) this.getUserInfo();\n          }\n        })\n      }\n    })\n  },\n  login: function (userInfo) {\n    wx.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    let that = this;\n    wx.login({\n      success: (loginCode) => {\n        ajaxNotRepeat('POST', 'api/auth/loginByWeChat', {\n          code: loginCode.code,\n          appType: 'HYJK'\n        }, 'application/json;charset=UTF-8', (res) => {\n          wx.hideLoading();\n          if (res.data.code == 0) {\n            that.data.token = res.data.result.token;\n            that.data.authorizationData = {\n              nickName: userInfo && userInfo.nickName,\n              headPortrait: userInfo && userInfo.avatarUrl,\n              token: res.data.result.token,\n              formId: that.data.formId,\n              tempToken: wx.getStorageSync('tempToken') || '',\n              source: app.globalData.globalSource || '',\n              marketActId: wx.getStorageSync('spreadData').marketActId || '', //推广参数，用于绑定推广用户关系\n              promoterId: wx.getStorageSync('spreadData').promoterId || '',//推广参数，用于绑定推广用户关系\n              appType: 'HYJK'\n            }\n\n            //等于1代表存在手机号直接授权，反之去绑定手机号\n            if (res.data.result.userState == 1) {\n              that.authorization()\n            } else {\n              that.setData({\n                phoneBtnShow: true\n              })\n            }\n          } else {\n            wx.showToast({\n              title: res.data.msg,\n              icon: 'none'\n            })\n          }\n        })\n      }\n    })\n  },\n  getPhoneNumber(e) {\n    console.log('用户是否授权手机号', e)\n    let data = {\n      iv: e.detail.iv,\n      encryptedData: e.detail.encryptedData,\n      token: this.data.token,\n      appType: 'HYJK'\n    }\n    if (data.iv && data.encryptedData) {\n      ajaxNotRepeat('POST', 'api/auth/getUserPhone', data, 'application/json;charset=UTF-8', (res) => {\n        if (res.data.code == 0) {\n          this.authorization(null, res.data.result.phone)\n        } else {\n          wx.showToast({\n            title: res.data.msg,\n            icon: 'none'\n          })\n        }\n      })\n    }\n  },\n  authorization(from, phone) {\n    wx.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    console.log(phone, 'phonephonephone')\n    if (phone) {\n      this.data.authorizationData.phone = phone;\n    } else {\n      this.data.authorizationData.phone = this.data.formData.phone;\n      this.data.authorizationData.identifyingCode = this.data.formData.code;\n    }\n    ajaxNotRepeat('POST', 'api/auth/wechatAuthorization', this.data.authorizationData, 'application/json;charset=UTF-8', (res) => {\n      wx.hideLoading();\n      if (res.data.code == 0) {\n        let userInfo = wx.getStorageSync('userInfo');\n        // 埋点\n        wx.reportAnalytics('authorization', {});\n        wx.setStorage({\n          key: 'userInfo',\n          data: {\n            ...userInfo,\n            userId: res.data.result.id,\n            nickname: res.data.result.nickName,\n            avatarUrl: res.data.result.avatarUrl,\n            easeMoUserId: res.data.result.easeMoUserId,\n            easeMoUserPassword: res.data.result.easeMoUserPassword,\n            name: res.data.result.name,\n            pusher_user_type: res.data.result.pusherUserType\n          },\n          success: () => {\n            wx.setStorageSync('sess_key', this.data.token)\n            app.globalData.sess_key = this.data.token;\n            // \n   \n            //上报扫码购来源授权手机号的用户\n            if (from == 'bindPhone' && JSON.stringify(this.data.reportAnalyticsData) != '{}') {\n              wxReportAnalytics('activity_scan_bind_phone', this.data.reportAnalyticsData)\n            }\n\n            // 更新首页刷新状态\n            getApp().globalData.refreshType = true;\n            this.saveUserLog(res.data.result);\n\n            //用户信息存储成功，返回进来的页面\n            wx.showToast({\n              title: '授权成功！',\n              // image: '../../../../images/successIcon.png',\n              mask: true,\n              duration: 2000\n            })\n            // 设置是否可以登录标识\n            getApp().globalData.logingFlag = true;\n            // 登录成功&&非扫码问诊，初始化IM\n            let pages = getCurrentPages();\n            console.log(\"login pages:\", pages)\n            let curUserId = wx.getStorageSync('userInfo').userId\n            if (this.data.backUrl && this.data.inquiryFrom === speedNativeInquiry) { // 极速问诊落地、大健康\n              console.log('speedNativeInquiryPath')\n              handleGetUserEasemoInfo(curUserId, initIMSingle)\n            } else {\n              if (pages.length >= 2) { // 极速问诊、扫码问诊\n                let prePagePath = pages[pages.length - 2].route;\n                console.log(\"login currentPagePath:\", prePagePath)\n                if (prePagePath !== scanInquiryPath) {\n                  handleGetUserEasemoInfo(curUserId, initIMSingle)\n                } else {\n                  handleGetUserEasemoInfo(curUserId)\n                }\n              }\n            }\n\n            //指定回跳路径\n            if (this.data.backUrl) {\n              let userInfo = JSON.stringify({\n                token: getApp().globalData.sess_key,\n                userId: wx.getStorageSync('userInfo').userId\n              })\n              this.data.backUrl = this.data.backUrl.includes('?') ? `${this.data.backUrl}&userInfo=${userInfo}` : `${this.data.backUrl}?userInfo=${userInfo}`;\n              console.log(this.data.backUrl == '/pages/inquiry/guidance/guidance')\n              if (this.data.backUrl.includes('/pages/inquiry/guidance/guidance')) this.data.backUrl = `${this.data.backUrl}&inquirySource=${this.data.inquirySource}&supportCode=${this.data.supportCode}`\n              console.log(this.data.backUrl)\n              wx.redirectTo({\n                url: this.data.backUrl,\n                fail: res => {\n                  wx.switchTab({\n                    url: this.data.backUrl\n                  })\n                }\n              })\n              return;\n            }\n            if (this.data.source != 'undefined') {//H5活动页面跳转back\n              let url = this.data.source + \"&token=\" + getApp().globalData.sess_key;\n              wx.redirectTo({\n                url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n              })\n            } else {\n              this.loginBack();\n            }\n          }\n        });\n      } else {\n        // 此处判断，如果是服务器报错（接口500），需要额外处理\n        if (res.data.msg) {\n          wx.showToast({\n            title: res.data.msg,\n            icon: 'none',\n            mask: true,\n            duration: 2000\n          })\n        } else {\n          wx.showToast({\n            title: \"wechatAuthorization失败\",\n            icon: 'none',\n            mask: true,\n            duration: 4000\n          })\n        }\n      }\n    }, function (err) {\n      wx.showToast({\n        title: err.errMsg,\n        icon: 'none',\n        duration: 2000\n      })\n    })\n  },\n  loginBack() {\n    var pages = getCurrentPages();\n    var prevPage = pages[pages.length - 2];\n    if (prevPage && prevPage.route != 'pages/my/myDrug/myInfo/myInfo') {\n      getApp().loginBackPageLink = '';\n    }\n    if (getApp().loginBackPageLink) {\n      wx.redirectTo({\n        url: `/${getApp().loginBackPageLink}`,\n        fail: (res) => {\n          wx.switchTab({\n            url: `/${getApp().loginBackPageLink}`,\n            complete: res => {\n              getApp().loginBackPageLink = '';\n            }\n          })\n        },\n        complete: res => {\n          getApp().loginBackPageLink = '';\n        }\n      })\n\n    } else {\n      const pages = getCurrentPages();\n      if (pages[pages.length - 1] == pages[pages.length - 2]) {\n        this.setNavigateBack(2)\n      } else {\n        this.setNavigateBack(1)\n      }\n    }\n  },\n  setNavigateBack(num) {\n    wx.navigateBack({\n      delta: num,\n      fail: res => {\n        wx.switchTab({\n          url: '/pages/noteIndex/noteIndex',\n        })\n      }\n    })\n  },\n  // 记录登录时间\n  saveUserLog(result) {\n    ajax2('post', 'miniapp/usermanager/saveUserLog', {\n      doctorId: result.doctorId,// 医生ID\n      bdId: result.bdId, //推广人员ID\n      meituanStatus: result.meituanStatus,//美团标示\n      pusherUserId: result.pusherUserId,\n      appType: 'MINIAPP'\n    }, function (res) { }, function (res) { });\n  },\n  //input输入事件\n  setInput: function (e) {\n    var type = e.currentTarget.dataset.type;\n    this.setData({\n      formData: {\n        ...this.data.formData,\n        [type]: e.detail.value\n      }\n    })\n  },\n  //发送验证码\n  getCode: function () {\n    let phone = this.data.formData.phone;\n    console.log(isNaN(phone));\n\n    if (phone) {\n      if (phone.length != 11 || isNaN(phone)) {\n        wx.showToast({\n          title: '请输入11位数手机号',\n          icon: 'none',\n          mask: true\n        });\n        return false\n      }\n      ajax2(\"post\", \"api/auth/getWechatIdentifyingCode\", {\n        phone: phone\n      }, res => {\n        console.log(res);\n        if (res.data.code == 0) {\n          var time = 60;\n          var codeTime = setInterval(() => {\n            time--;\n            if (time <= 0) {\n              this.setData({\n                codeStatus: false,\n                sendMsg: '获取验证码'\n              });\n              clearInterval(codeTime);\n            } else {\n              this.setData({\n                codeStatus: true,\n                sendMsg: time + 's后重发'\n              });\n            }\n          }, 1000)\n        }\n        this.setData({\n          codeStatus: false,\n        });\n        wx.showToast({\n          title: res.data.msg,\n          icon: 'none',\n          mask: true\n        });\n      }, res => {\n        wx.showToast({\n          title: '发送失败',\n          icon: 'none',\n          mask: true\n        });\n        this.setData({\n          codeStatus: false,\n        });\n      })\n    } else {\n      wx.showToast({\n        title: '请输入手机号码',\n        icon: 'none',\n        mask: true,\n      });\n    }\n  },\n  tobindPhone() {\n    this.setData({\n      bindPhone: true\n    })\n  },\n  //提交\n  phoneLogin: function (e) {\n    //避免重复点击\n    if (new Date().getTime() - this.data.buttonClickTime < 3000) {\n      return false;\n    }\n    this.data.buttonClickTime = new Date().getTime();\n\n    var formData = this.data.formData;\n    if (!formData.phone) {\n      wx.showToast({\n        title: '请输入手机号码',\n        icon: 'none',\n        mask: true\n      });\n      return false;\n    }\n    if (!formData.code) {\n      wx.showToast({\n        title: '请输入验证码',\n        icon: 'none',\n        mask: true\n      });\n      return false;\n    }\n    this.authorization('bindPhone')\n  },\n  jumpWebview(e) {\n    let name = e.currentTarget.dataset.name;\n    wx.navigateTo({\n      url: `/pages/webView/webView?link=${url}html/${name}.html`\n    })\n  }\n})"},"convertDir/pages/note/logisticsInfo/logisticsInfo":{"json":{"missingData-view":"../../../../component/missingData/missingData"},"js":"// pages/note/logisticsInfo/logisticsInfo.js\nimport {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      showData: false,\n      isAjaxing: true,\n      isReceived: false,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({ options })\n    this.getLogisticsInfo(options)\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 获取物流信息\n   */\n  getLogisticsInfo(options){\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    const sendData = {\n      trackingNo: options.mailNo,\n      orderNo: options.orderId\n    }\n    ajax('post', 'api/ykq/order/r/delivery/route/info', sendData, (res) => {\n      Taro.hideLoading()\n      if(res == 2) {\n        return false;\n      }\n      if (res.data.code == 0 && res.data.result) {\n        const logisticsInfo = res.data.result;\n        //收货地址信息\n        logisticsInfo.ykqOrderInfoVo && this.setData({\n          orderInfo: logisticsInfo.ykqOrderInfoVo,\n        }) \n        \n        //物流信息\n        const routeData = logisticsInfo.ykqOrderRouteInfoVo;\n        if(routeData && routeData.routeResponseRsps.length){\n          this.formatOpCode(routeData.routeResponseRsps[0]);\n          this.setData({\n            logistics_info: routeData.routeResponseRsps[0],\n            showData:true\n          })\n        }\n        \n      }else{\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n      this.setData({ isAjaxing:false })\n    })\n  },\n\n  /**\n   * 格式化opcode\n   */\n  formatOpCode(logisticsInfo){\n    const logistics_router = logisticsInfo.routeInfoRsps || [];\n    logistics_router.forEach((item)=>{\n      //0:已下单，1：待揽件，2:已揽件，3:运输中，4:已签收，5:拒收\n      switch(item.opcode){\n        case '9001':\n          item.self_opcode = 0;\n          item.opCodeObj = {\n            status:'已下单',\n            img1:'../noteImg/is_xiadan.png',\n            img2:'../noteImg/end_xiadan.png'\n          }\n          break;\n        case '9002':\n          item.self_opcode = 1;\n          item.opCodeObj = {\n            status:'待揽收',\n            img1:'../noteImg/is_lanshou.png',\n            img2:'../noteImg/end_lanshou.png'\n          }\n          break;\n        case '41':\n        case '46':\n        case '50':\n          item.self_opcode = 2;\n          item.opCodeObj = {\n            status:'已揽收',\n            img1:'../noteImg/is_lanjian.png',\n            img2:'../noteImg/end_lanjian.png'\n          }\n          break;\n        case '30':\n          item.self_opcode = 3;\n          item.opCodeObj = {\n            status:'运输中',\n            img1:'../noteImg/is_yunshu.png',\n            img2:'../noteImg/end_yunshu.png'\n          }\n          break;\n        case '80':\n        case '607':\n          this.setData({\n            isReceived:true\n          })\n          item.self_opcode = 4;\n          item.opCodeObj = {\n            status:'已签收',\n            img1:'../noteImg/is_qianshou.png',\n            img2:'../noteImg/is_qianshou.png'\n          }\n          break;\n        case '648':\n          item.self_opcode = 5;\n          item.opCodeObj = {\n            status:'拒收',\n            img1:'../noteImg/is_jushou.png',\n            img2:'../noteImg/is_jushou.png'\n          }\n          break;\n        case '70':\n        case '33':\n          item.self_opcode = 6;\n          item.opCodeObj = {\n            status:'异常件',\n            img1:'../noteImg/is_jushou.png',\n            img2:'../noteImg/is_jushou.png'\n          }\n          break;\n        default:\n          item.self_opcode = 100;\n          item.opCodeObj = null\n          break;\n      }\n    }) \n    this.setData({\n      logistics_router\n    })\n  },\n\n  /**\n   * 复制\n   */\n  copy(){\n    Taro.setClipboardData({\n      data: this.data.logistics_info.mailNo,\n      success (res) {\n        Taro.showToast({\n          icon: 'none',\n          title: '复制成功'\n        })\n      }\n    })\n  },\n\n  /**\n   * 拨打电话\n   */\n  phoneCall(){\n    Taro.makePhoneCall({\n      phoneNumber: '95338' //仅为示例，并非真实的电话号码\n    })\n  },\n\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxss":"/* pages/note/logisticsInfo/logisticsInfo.wxss */\n.flex{\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.color333{\n    color: #333;\n}\n/* 物流公司信息 */\n.company-box{\n    padding: 30rpx;\n    background: white;\n    border-top: 1px solid #eee;\n}\n.company-box .company-border{\n    width: 1px;\n    height: 48rpx;\n    background: #eee;\n}\n.company-box .company-phone{\n    width: 38rpx;\n    height: 38rpx;\n}\n.company-box .company-left{\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.company-box .company-icon{\n    width: 90rpx;\n    height: 90rpx;\n    background:rgba(247,247,248,1);\n    border-radius: 50%;\n}\n.company-box .company-info{\n    width: 490rpx;\n    margin-left: 20rpx;\n}\n.company-box .company-info .info-top{\n    font-size: 32rpx;\n    line-height: 45rpx;\n    white-space: nowrap; \n    width: 100%; \n    overflow: hidden;\n    text-overflow:ellipsis;\n}\n.company-box .company-info .info-bottom{\n    font-size: 24rpx;\n    line-height: 33rpx;\n    color: #999;\n    margin-top: 10rpx;\n    white-space: nowrap; \n    width: 100%; \n    overflow: hidden;\n    text-overflow:ellipsis;\n}\n\n/* 商品信息 */\n.product-box{\n    padding: 20rpx 24rpx;\n    background: white;\n    border-top: 1px solid #eee;\n}\n.product-box .product-img{\n    display: flex;\n}\n.product-box .product-img .product-item{\n    width: 180rpx;\n    height: 180rpx;\n    background: #ccc;\n    margin-right: 20rpx;\n    display: block;\n}\n.product-box .product-tip{\n    font-size: 26rpx;\n    color: #999;\n}\n\n/* 收货人信息 */\n.receive-box{\n    background:#FAFAFA;\n}\n.receive-box .info-item{\n    padding: 25rpx 24rpx;\n    display: flex;\n    align-items: flex-start;\n    border-top: 1px solid #eee;\n}\n.receive-box .info-item .item-label{\n    font-size: 28rpx;\n    color: #666666;\n    line-height: 40rpx;\n    margin-right: 40rpx;\n}\n.receive-box .info-item .item-info{\n    flex: 1;\n    font-size: 28rpx;\n    color: #666666;\n    line-height: 40rpx;\n}\n.receive-box .info-item .item-info .copy{\n    font-size: 22rpx;\n    color: #292933;\n    line-height: 30rpx;\n    border: 1px solid #D1D1D6;\n    padding: 4rpx 18rpx;\n}\n.receive-box .info-item .item-info .receive-name{\n    font-size: 28rpx;\n    line-height: 40rpx;\n    color: #333;\n    font-weight: 500;\n\n}\n.receive-box .info-item .item-info .receive-addr{\n    font-size: 28rpx;\n    line-height: 40rpx;\n    color: #666;\n    margin-top: 10rpx;\n    /* overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    line-clamp: 2;\n    -webkit-box-orient: vertical; */\n}\n\n/* 物流信息 */\n.logistics-box{\n    margin-top: 20rpx;\n    background: white;\n    padding: 34rpx 24rpx 24rpx;\n}\n.logistics-box .logistics-item{\n    display: flex;\n    align-items: flex-start;\n    margin-top: -10rpx;\n}\n.logistics-box .logistics-item .logistics-time{\n    font-size: 22rpx;\n    color: #999;\n    text-align: end;\n    padding-bottom: 25rpx;\n    width: 130rpx;\n}\n.logistics-box .logistics-item .logistics-time view{\n    line-height: 30rpx;\n}\n.logistics-box .logistics-item .logistics-addr{\n    flex: 1;\n    font-size: 24rpx;\n    color: #999;\n    border-left: 2rpx solid #F4F4F4;\n    margin-left: 32rpx;\n    padding: 0 0 35rpx 32rpx;\n    position: relative;\n    min-height: 95rpx;\n    box-sizing: border-box;\n}\n.logistics-box .logistics-item:last-child .logistics-addr{\n    border-left: 2rpx solid transparent;\n}\n.logistics-box .logistics-item .logistics-addr-first{\n    border-left: 2rpx dashed #F4F4F4;\n}\n.logistics-box .logistics-item .logistics-addr .addr-weight{\n    color: #333;\n}\n.logistics-box .logistics-item .logistics-addr .addr-weight view:nth-of-type(1){\n    font-size: 28rpx;\n}\n.logistics-box .logistics-item .logistics-addr .tag{\n    width: 36rpx;\n    height: 36rpx;\n    font-size: 20rpx;\n    background: #ccc;\n    color: white;\n    text-align: center;\n    line-height: 36rpx;\n    border-radius: 50%;\n    position: absolute;\n    top: 0;\n    left: -19rpx;\n}\n.logistics-box .logistics-item .logistics-addr .tag1{\n    width: 7px;\n    height: 7px;\n    left: -4px;\n    top: 10rpx;\n}\n\n\n","wxml":"\n  <view class=\"logisticsInfo-auto-container\">   \n    <wxs module=\"filter\">\n  var getDate = function(value) {\n      if(!value) return [];\n      if(value.indexOf('|')>-1){\n        var date = value.split('|');\n        return date\n      }else{\n        var DateArr = value.split(' ');\n        time = DateArr[1].split(':')\n        return [DateArr[0],time[0]+':'+time[1]]\n      }\n  }\n  module.exports = {\n    getDate :getDate\n  }\n\n    </wxs>\n    <navBar title-text=\"物流信息\"></navBar>\n    <view v-if=\"!isAjaxing && showData\">  \n      <view class=\"company-box flex\">\n        <view class=\"company-left\"> \n          <image class=\"company-icon\" src=\"../noteImg/is_lanjian.png\"></image>\n          <view class=\"company-info\">  \n            <view class=\"info-top\" v-if=\"isReceived\">已签收\n            </view>\n            <view class=\"info-top\" v-else>{{logistics_router[0].opCodeObj.status || '运输中'}}\n            </view>\n            <view class=\"info-bottom\">{{ logistics_router[0].remark || '' }}\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"receive-box\">\n        <view class=\"info-item\"> \n          <view class=\"item-label\">快递单号\n          </view>\n          <view class=\"item-info flex\"> \n            <text>{{logistics_info.mailNo}}\n            </text>\n            <text class=\"copy\" bindtap=\"copy\">复制\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"logistics-box\"> \n        <view class=\"logistics-item\"> \n          <view class=\"logistics-time\">\n            <block v-if=\"isReceived\"> \n              <view class=\"time\">{{filter.getDate(logistics_router[0].acceptTime)[1]}}\n              </view>\n              <view class=\"date\">{{filter.getDate(logistics_router[0].acceptTime)[0]}}\n              </view>\n            </block>\n          </view>\n          <view class=\"logistics-addr logistics-addr-first\">  \n            <view class=\"addr color333\">[收货地址]{{orderInfo.orderAddress ? orderInfo.orderAddress : ''}}\n            </view>\n            <image class=\"tag\" v-if=\"isReceived\" src=\"../noteImg/is_shouhuo.png\"></image>\n            <image class=\"tag\" v-else src=\"../noteImg/end_shouhuo.png\"></image>\n          </view>\n        </view>\n        <view class=\"logistics-item\" v-for=\"(item, index) in logistics_router\"> \n          <view class=\"logistics-time\"> \n            <view class=\"time\">{{filter.getDate(item.acceptTime)[1]}}\n            </view>\n            <view class=\"date\">{{filter.getDate(item.acceptTime)[0]}}\n            </view>\n          </view>\n          <view class=\"logistics-addr\"> \n            <block v-if=\"item.opCodeObj\">  \n              <view :class=\"[(index == 0 ? \"addr addr-weight\":\"addr\")]\"> \n                <view>{{item.opCodeObj.status}}\n                </view>\n                <view>{{item.remark || ''}}\n                </view>\n              </view>\n              <image class=\"tag\" v-if=\"index == 0\" :src=\"item.opCodeObj.img1\"></image>\n              <image class=\"tag\" v-else :src=\"item.opCodeObj.img2\"></image>\n            </block>\n            <block v-else> \n              <view class=\"addr\">{{item.remark}}\n              </view>\n              <view class=\"tag tag1\"></view>\n            </block>\n          </view>\n        </view>\n      </view>\n    </view>\n    <missingData-view zhi=\"new1\" v-if=\" !isAjaxing && !showData \" textval=\"暂未查询到物流信息\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n  </view>"},"convertDir/pages/note/logonPhone/logonPhone":{"js":"// pages/note/login/login.js\nimport {\n  ajax\n} from \"../../../utils/util\";\nPage({\n  data: {\n    isDjk:getApp().globalData.src_whyb ? true : false,\n    click_zt:true,\n    formData: {\n      phone: \"\",\n      code: \"\"\n    },\n    codeStatus: false,\n    sendMsg: \"60s重发\",\n    merge_type:false,\n  },\n  onLoad: function(options) {\n\n  },\n  onShow: function() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n  //input输入事件\n  setInput: function(e) {\n    var type = e.currentTarget.dataset.type;\n    this.setData({\n      formData: {\n        ...this.data.formData,\n        [type]: e.detail.value\n      }\n    })\n  },\n  //发送验证码\n  getCode: function() {\n    let phone = this.data.formData.phone;\n    console.log(isNaN(phone));\n\n    if (phone) {\n      if (phone.length != 11 || isNaN(phone)) {\n        wx.showToast({\n          title: '请输入11位数手机号',\n          icon: 'none',\n          mask: true\n        });\n        return false\n      }\n      ajax(\"get\", \"miniapp/bindPhoneController/sendVerifier\", {\n        phone: phone,\n        merge:true\n      }, res => {\n        console.log(res);\n        if (res.data.code == 0) {\n          var time = 60;\n          var codeTime = setInterval(() => {\n            time--;\n            if (time <= 0) {\n              this.setData({\n                codeStatus: false,\n                sendMsg: '获取验证码'\n              });\n              clearInterval(codeTime);\n            } else {\n              this.setData({\n                codeStatus: true,\n                sendMsg: time + 's重发'\n              });\n            }\n          }, 1000)\n        }\n        this.setData({\n          codeStatus: false,\n        });\n        wx.showToast({\n          title: res.data.msg,\n          icon: 'none',\n          mask: true\n        });\n      }, res => {\n        wx.showToast({\n          title: '发送失败',\n          icon: 'none',\n          mask: true\n        });\n        this.setData({\n          codeStatus: false,\n        });\n      })\n    } else {\n      wx.showToast({\n        title: '请输入手机号码',\n        icon: 'none',\n        mask: true,\n      });\n    }\n  },\n  //提交\n  logon: function(e) {\n    let that = this;\n    console.log(!this.data.click_zt)\n    if (!this.data.click_zt)\n      return false\n    console.log(this.data.click_zt)\n    this.setData({\n      click_zt: false\n    })\n    console.log(e);\n    var formData = this.data.formData;\n    if (!formData.phone) {\n      wx.showToast({\n        title: '请输入手机号码',\n        icon: 'none',\n        mask: true\n      });\n    } else if (!formData.code) {\n      wx.showToast({\n        title: '请输入验证码',\n        icon: 'none',\n        mask: true\n      });\n    } else {\n      ajax(\"get\", \"miniapp/bindPhoneController/bingAppUserPhone\", {\n        phone: formData.phone,\n        validateCode: formData.code,\n        pusherUserId: getApp().globalData.userId,\n        merge: this.data.merge_type\n      }, res => {\n        console.log(res.data);\n        if (res.data.code == 4){\n          wx.showModal({\n            content: '该手机号已存在账号，是否进行合并',\n            confirmColor: getApp().globalData.mainColor,\n            success: (res) => {\n              if (res.confirm) {\n                that.setData({                                      \n                  merge_type: true,\n                  click_zt: true\n                })\n                that.logon();\n              } else if (res.cancel){\n                that.setData({\n                  click_zt: true\n                })\n              }\n            }\n          })\n        }\n        if (res.data.code == 0) {\n          console.log(res);\n          let {\n            userRole,\n            userType\n          } = res.data.result;\n          let userInfo = wx.getStorageSync('userInfo');\n          wx.setStorage({\n            key: 'userInfo',\n            data:{\n              ...userInfo,\n              userRole: userRole,\n              //用户身份   0:普通用户,1:小药药销售,2:药店店员,3:药店用户\n              userType: userType,\n              //是否绑定手机号   0:已绑定,1:未绑定\n              phoneType: res.data.code,\n              phone: res.data.result.ykqGroupPuchaseUser.phone\n            },\n            success: () => {\n              var pages = getCurrentPages();\n              var prevPage = pages[pages.length - 2]; //上一个页面\n              if (prevPage && prevPage.route.includes('pages/my/uCard/uCard')) {\n                setTimeout(() => {\n                  wx.redirectTo({\n                    url: '/pages/my/userInfo/userInfo'\n                  })\n                }, 2000);\n              } else {\n                setTimeout(() => {\n                  wx.navigateBack()\n                }, 2000);\n              }\n            }\n          });\n          wx.showToast({\n            title: res.data.msg,\n            icon: 'none',\n            mask: true,\n            duration: 2000\n          });\n          this.setData({\n            click_zt: true\n          })\n        }else {\n          wx.showToast({\n            title: res.data.msg,\n            icon: 'none',\n            mask: true,\n            duration: 2000\n          });\n          this.setData({\n            click_zt: true\n          })\n        }\n      }, res => {\n        this.setData({\n          click_zt: true\n        })\n        wx.showToast({\n          title: '注册失败',\n          icon: 'none',\n          mask: true\n        });\n      })\n    }\n  }\n})\n","wxss":"@import '../../../common/tableView.wxss';\npage {\n  background-color: #fff;\n}\n.login_title {\n  padding: 120rpx 40rpx 40rpx;\n  font-size: 54rpx;\n  color: #333;\n  letter-spacing: 1.48rpx;\n  font-weight: bold;\n}\n.login_form .login_inp {\n  border-bottom: 1rpx solid #eee;\n  padding: 16rpx 0;\n  margin: 0 32rpx;\n}\n.login_form .login_inp .login_inp_tip {\n  padding-bottom: 12rpx;\n  font-size: 22rpx;\n  color: #999999;\n  letter-spacing: 1.11rpx;\n}\n.login_form .login_inp .login_inp_val {\n  display: flex;\n}\n.login_form .login_inp input {\n  height: 50rpx;\n  line-height: 50rpx;\n  font-size: 32rpx;\n  color: #333333;\n  letter-spacing: 1.11rpx;\n  flex: 1;\n}\n.login_form .login_inp input::-webkit-input-placeholder {\n  color: #999999;\n}\n.login_form .login_inp .login_inp_getPaw {\n  width: 160rpx;\n  height: 60rpx;\n  line-height: 58rpx;\n  border-radius: 100rpx;\n  text-align: center;\n  font-size: 28rpx;\n  padding: 0;\n  box-sizing: border-box;\n  background: none;\n  margin: 0;\n}\n.login_form .login_inp .sending_code {\n  color: #999999;\n}\n.btn_login_sub {\n  width: 686rpx;\n  height: 95rpx;\n  line-height: 95rpx;\n  text-align: center;\n  margin: 100rpx auto 0;\n  border-radius: 100rpx;\n  font-size: 36rpx;\n  color: #fff;\n  letter-spacing: 0.58rpx;\n}\n.btn_login_disable {\n  background-color: #C6CAD4;\n}","wxml":"\n  <view class=\"logonPhone-auto-container\"> \n    <navBar title-text :showCapsule=\"false\"></navBar>\n    <view :class=\"[container,(isDjk?'djk':'')]\">   \n      <view class=\"login_title\">请绑定手机号\n      </view>\n      <view class=\"login_form\"> \n        <view class=\"login_inp\"> \n          <view class=\"login_inp_tip\">请输入手机号\n          </view>\n          <input placeholder=\"请输入手机号\" bindinput=\"setInput\" type=\"number\" data-type=\"phone\" maxlength=\"11\"></input>\n        </view>\n        <view class=\"login_inp\"> \n          <view class=\"login_inp_tip\">请输入验证码\n          </view>\n          <view class=\"login_inp_val\"> \n            <input type=\"number\" placeholder=\"请输入验证码\" bindinput=\"setInput\" data-type=\"code\" maxlength=\"4\"></input>\n            <button :disabled=\"codeStatus\" :class=\"[login_inp_getPaw,theme-text,(codeStatus?'sending_code':'')]\" bindtap=\"getCode\">{{codeStatus?sendMsg:'获取验证码'}}\n            </button>\n          </view>\n        </view>\n      </view>\n      <view class=\"btn_login_sub theme-bg\" bindtap=\"logon\" v-if=\"formData.phone && formData.code\">登录\n      </view>\n      <view class=\"btn_login_sub btn_login_disable\" v-else>登录\n      </view>\n    </view>\n  </view>"},"convertDir/pages/note/map/map":{"json":{"missingData-view":"../../../component/missingData/missingData"},"js":"// pages/note/locationAddress/locationAddress.js\nconst app = getApp();\nlet cxdwType = true;\nimport {\n  url,\n  ajax,\n  ajax2,\n  indexGetLocation,\n  open_wechatMap,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      dw_type: false,\n      count: null,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      searchType: false,\n      pageNum: 1,\n      address_data: {},\n      location_data: {},\n      list: [],\n      searchList: [],\n      input_val: '',\n      interType: false,\n      ajax_type: true,\n      search_qs_type: false,\n      isType: false\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let _this = this; \n    this.setData({ address_data: options },function () {\n      if (!_this.data.address_data.latitude) {\n        _this.setData({ interType: true })\n      }\n    })\n  },\n  // 根据搜索字分割字符\n  hilight_word: function (key, word) {\n    if (!key) {\n      return false;\n    }\n    let idx = word.indexOf(key),\n      t = [];\n    if (idx > -1) {\n      if (idx == 0) {\n        t = this.hilight_word(key, word.substr(key.length));\n        t.unshift({\n          key: true,\n          str: key\n        });\n        return t;\n      }\n\n      if (idx > 0) {\n        t = this.hilight_word(key, word.substr(idx));\n        t.unshift({\n          key: false,\n          str: word.substring(0, idx)\n        });\n        return t;\n      }\n    }\n    return [{\n      key: false,\n      str: word\n    }];\n  },\n  // 查询 公用请求的type_val为查询类型  区分不同请求状态\n  load_list(address_data) {\n    Taro.showLoading({\n      title: '加载中...',\n    })\n    // type_val：1关键字查询数据\n    ajax2('get', 'miniapp/miniappController/getNearbyAdressByLongitude', {\n      latitude: address_data.latitude,\n      longitude: address_data.longitude\n    }, (res) => {\n      if (res.data.code == 0) {\n        this.setData({\n          interType: false,\n          dw_type: false,\n          list: res.data.result.nearbyAdressList\n        })\n        this.setData({\n          [\"address_data.selectNearyAddress\"]: res.data.result.address,\n          [\"address_data.address\"]: res.data.result.address,\n          [\"address_data.city\"]: res.data.result.city,\n          [\"address_data.cityCode\"]: res.data.result.cityCode\n        })\n        setTimeout(function () {\n          cxdwType = true;\n          Taro.hideLoading();\n        }, 300);\n      } else {\n        cxdwType = true;\n        Taro.hideLoading();\n      }\n    }, (res) => {\n      this.setData({\n        address_data: {},\n        list: [],\n        interType: true,\n        dw_type: false\n      })\n      setTimeout(function () {\n        cxdwType = true;\n        Taro.hideLoading();\n      }, 300);\n    })\n  },\n  // 刷新搜索列表处理\n  refreshPage() {\n    this.input_list(this.data.address_data.city ? this.data.address_data.city : '', this.data.input_val, false)\n  },\n  // pagetype是否分页\n  input_list(city, address, pageType) {\n    let that = this;\n\n    setTimeout(function () {\n      ajax2('post', 'miniapp/miniappController/getAddressListByKeys', {\n        pageNum: that.data.pageNum,\n        pageSize: 20,\n        areaRound: city,\n        keys: address ? address : city\n      }, (res) => {\n        that.setData({\n          interType2: false,\n        })\n        if (res.data.code == 0) {\n          if (!res.data.result.data) {\n            return false;\n          }\n          that.setData({\n            ajax_type: true,\n            search_qs_type: res.data.result.data.length != 0 ? false : true\n          })\n          if (!pageType) {\n            let data = res.data.result.data;\n            if (data) {\n              for (let i = 0; i < data.length; i++) {\n                data[i].title = that.hilight_word(that.data.input_val, data[i].title);\n              }\n              that.setData({\n                count: res.data.result.count,\n                searchList: data\n              })\n            }\n          } else {\n            that.setData({\n              count: res.data.result.count,\n              searchList: that.data.searchList.concat(res.data.result.data)\n            })\n          }\n\n        } else {\n          this.setData({\n            search_qs_type: true\n          })\n        }\n      }, (res) => {\n        that.setData({\n          interType2: true\n        })\n\n      })\n    }, 300);\n  },\n  selectCity() {\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/cityList/cityList`\n    })\n  },\n  addressBtn(e) {\n    let _this = this;\n    this.setData({\n      [\"address_data.city\"]: e.currentTarget.dataset.city,\n      [\"address_data.selectNearyAddress\"]: e.currentTarget.dataset.selectnearyaddress,\n      [\"address_data.latitude\"]: e.currentTarget.dataset.latitude,\n      [\"address_data.longitude\"]: e.currentTarget.dataset.longitude,\n    },function (){\n      Taro.setStorage({\n        key: 'addressInfo',\n        data: _this.data.address_data,\n        success:function () {\n          Taro.navigateBack({\n            delta: 1\n          })\n        }\n      })      \n    })   \n  },\n  search_clear() {\n    this.setData({\n      input_val: '',\n      searchType: false\n    })\n  },\n  reLocation() {\n    if (cxdwType) {\n      Taro.showLoading({\n        title: '加载中',\n      })\n      this.setData({\n        dw_type: true,\n        isType: true\n      })\n      cxdwType = false;\n      this.getLocation();\n    }\n  },\n  getLocation() {\n    // 获取地址\n    indexGetLocation((longitude, latitude) => {\n      if (!longitude) {\n        this.setData({\n          address_data: {},\n          list: [],\n          interType: true,\n          dw_type: false,\n        })\n        setTimeout(function () {\n          cxdwType = true;\n          Taro.hideLoading();\n        }, 300);\n        return false\n      }\n      this.setData({\n        [\"address_data.latitude\"]: latitude,\n        [\"address_data.longitude\"]: longitude,\n      })\n      this.load_list(this.data.address_data)\n    })\n  },\n  search_type() {\n    this.setData({\n      searchType: true\n    })\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    if (this.data.location_data.latitude) {\n      this.data.address_data = this.data.location_data;\n      this.setData({\n        searchType: false\n      })\n    }\n    this.load_list(this.data.address_data)\n  },\n  address_input(e) {\n    this.setData({\n      searchList: [],\n      input_val: e.detail.value,\n      pageNum: 1\n    })\n    this.input_list(this.data.address_data.city ? this.data.address_data.city : '', e.detail.value, false)\n  },\n  selectAddress(e) {\n    let _this = this;\n    this.setData({\n      [\"address_data.city\"]: e.currentTarget.dataset.city,\n      [\"address_data.selectNearyAddress\"]: e.currentTarget.dataset.selectnearyaddress,\n      [\"address_data.latitude\"]: e.currentTarget.dataset.latitude,\n      [\"address_data.longitude\"]: e.currentTarget.dataset.longitude,\n    },function () {\n      Taro.setStorage({\n        key: 'addressInfo',\n        data: _this.data.address_data,\n        success: function () {\n          Taro.navigateBack({\n            delta: 1\n          })\n        }\n      })\n    })\n  }\n};","wxss":"/* pages/note/locationAddress/locationAddress.wxss */\n@import '../../../common/tableView.wxss';\n\npage {\n  background-color: #fff;\n}\n\n.la-header {\n  display: flex;\n  height: 77rpx;\n  background-color: #fff;\n  padding: 0 20rpx 0 20rpx;\n  position: relative;\n}\n\n.la-header-left {\n  width: 150rpx;\n  font-size: 28rpx;\n  color: #333;\n  text-align: left;\n  position: relative;\n  padding-left: 40rpx;\n  margin-top: 19rpx;\n}\n\n.la-header-dw {\n  width: 81%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.la-header-left .la-header-dwimg {\n  width: 38rpx;\n  position: absolute;\n  top: 2rpx;\n  left: 0rpx;\n}\n\n.la-header-right {\n  width: calc(100% - 200rpx);\n  position: relative;\n}\n\n.la-header-right input {\n  width: calc(100% - 150rpx);\n  height: 60rpx;\n  border-radius: 90rpx;\n  background-color: #f5f5f5;\n  text-align: left;\n  margin-top: 10rpx;\n  padding-left: 60rpx;\n  font-size: 25rpx;\n  color: #000;\n  line-height: 60rpx;\n  position: relative;\n  padding-right: 90rpx;\n}\n\n.la-header-right .la-header-right-ss {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  left: 22rpx;\n  top: 26rpx;\n  z-index: 1;\n}\n\n.la-nv-dq {\n  height: 58rpx;\n  padding: 0 24rpx 0 24rpx;\n  background-color: #f5f5f5;\n  line-height: 58rpx;\n  text-align: left;\n  font-size: 24rpx;\n  color: #8a8080;\n}\n\n/* 重新定位 */\n\n.curAddress_title {\n  height: 58rpx;\n  line-height: 58rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 23rpx;\n}\n\n.curAddress_name_view {\n  position: relative;\n  height: 90rpx;\n  display: flex;\n  padding: 0 23rpx;\n  flex-direction: row;\n  background-color: #fff;\n}\n\n.curAddress_name {\n  flex: 1;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.curAddress_change {\n  width: 170rpx;\n  height: 90rpx;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: 25rpx;\n}\n\n.curAddress_change image {\n  width: 45rpx;\n  height: 45rpx;\n  margin-right: 5rpx;\n}\n\n.curAddress_change view {\n  font-size: 30rpx;\n}\n\n.la-nv-list {\n  /* padding: 0 24rpx 0 24rpx; */\n}\n\n.la-header-jtimg {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  right: 10rpx;\n  top: 6rpx;\n}\n\n.la-nv-list .curAddress_name_view {\n  border-bottom: 1px solid rgba(245, 247, 248, 1);\n}\n\n/* 搜索弹出 */\n\n.la-search-list {\n  width: 100%;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n}\n\n.curAddress_juli {\n  font-size: 26rpx;\n  color: #999;\n}\n\n.la-search-list .curAddress_name_view {\n  height: auto;\n  display: block;\n  padding-bottom: 20rpx;\n  border-bottom: 1px solid rgba(245, 247, 248, 1);\n}\n\n.la-header-right .la-header-right-img {\n  width: 36rpx;\n  position: absolute;\n  right: 4rpx;\n  top: 3rpx;\n  z-index: 9999;\n  display: block;\n  padding: 20rpx;\n}\n\n.back-color {\n  background-color: #fff;\n}","wxml":"\n  <view class=\"map-auto-container\"> \n    <navBar :title-text=\"address_data.title\" :showCapsule=\"true\"></navBar>\n    <view :class=\"[(isDjk?'djk':'')]\">  \n      <view class=\"la-header\"> \n        <view class=\"la-header-left\" bindtap=\"selectCity\">  \n          <image class=\"la-header-dwimg\" src=\"../noteImg/index-dw.png\" mode=\"widthFix\"></image>\n          <view class=\"la-header-dw\">{{address_data.city?address_data.city:'选择城市'}}\n          </view>\n          <image class=\"la-header-jtimg\" src=\"../../../images/icon-arrow.png\" mode=\"widthFix\"></image>\n        </view>\n        <view class=\"la-header-right\">  \n          <image class=\"la-header-right-img\" v-if=\"input_val\" catchtap=\"search_clear\" src=\"../../../images/search_clear.png\" mode=\"widthFix\"></image>\n          <image class=\"la-header-right-ss\" src=\"../../../images/search-icon-black.png\" mode=\"widthFix\"></image>\n          <input confirm-type=\"search\" :value=\"input_val\" bindblur=\"search_blur\" bindfocus=\"search_type\" placeholder=\"请输入您需要搜索的地址\" bindinput=\"address_input\"></input>\n        </view>\n      </view>\n      <block v-if=\"searchType == false\">\n        <view class=\"la-nv\">    \n          <view class=\"la-nv-dq\">\n\t\t\t\t当前地址\n\t\t\t\n          </view>\n          <view class=\"curAddress_name_view\">  \n            <view class=\"curAddress_name\" v-if=\"dw_type\">定位中...\n            </view>\n            <view class=\"curAddress_name\" v-else>\n\t\t\t\t\t{{address_data.selectNearyAddress?address_data.selectNearyAddress:'没能获取到您的定位'}}\n\t\t\t\t\n            </view>\n            <view class=\"curAddress_change\" bindtap=\"reLocation\"> \n              <image src=\"../../../pages/note/noteImg/djk_biao.png\"></image>\n              <view class=\"djk_cxdw theme-text\">重新定位\n              </view>\n            </view>\n          </view>\n          <view class=\"la-nv-dq\">\n\t\t\t\t附近的地址\n\t\t\t\n          </view>\n          <view class=\"la-nv-list\">\n            <view class=\"curAddress_name_view\" :data-latitude=\"item.latitude\" :data-longitude=\"item.longitude\" :data-selectNearyAddress=\"item.adress\" :data-city=\"address_data.city\" bindtap=\"addressBtn\" v-for=\"(item, key) in list\" :key=\"key\">\n              <view class=\"curAddress_name\">{{item.adress}}\n              </view>\n            </view>\n          </view>\n          <block v-if=\"interType\">\n            <missingData-view zhi=\"new1\" textval=\"定位失败，请开启定位、网络、再重试\" :imageUrl=\" url_link + 'images/empty-network.png' \"></missingData-view>\n          </block>\n        </view>\n      </block>\n      <block v-if=\"searchType == true\"> \n        <view class=\"la-search-list\"> \n          <view v-if=\"input_val\" v-for=\"(item, key) in searchList\" :key=\"key\" class=\"curAddress_name_view\" bindtap=\"selectAddress\" :data-longitude=\"item.location.lng\" :data-latitude=\"item.location.lat\" :data-city=\"item.ad_info.city\" data-selectNearyAddress=\"{{item.title[0].str}}{{item.title[1].str}}{{item.title[2].str}}\"> \n            <view class=\"curAddress_name\">\n              <block v-for=\"items in item.title\" :key=\"items\"> \n                <text v-if=\"items.key == true\" class=\"activity_text\">{{items.str}}\n                </text>\n                <text v-else>{{items.str}}\n                </text>\n              </block>\n            </view>\n            <view class=\"curAddress_juli\">{{item.address}}\n            </view>\n          </view>\n          <block v-if=\"search_qs_type && !interType2 && input_val\">\n            <missingData-view zhi=\"new1\" textval=\"搜索无结果\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n          </block>\n        </view>\n        <block v-if=\"interType2\">\n          <missingData-view zhi=\"new1\" textval=\"网络加载失败\" textval2=\"请再次刷新或检查网络\" buttonText=\"立即刷新\" bind:action=\"refreshPage\" :imageUrl=\" url_link + 'images/empty-network.png' \"></missingData-view>\n        </block>\n      </block>\n    </view>\n  </view>"},"convertDir/pages/note/myCount/mycount":{"js":"// pages/myCount/myCount.js\nimport {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\nconst date = new Date();\nconst year = date.getFullYear();\nconst month = date.getMonth() + 1 > 9 ? date.getMonth() + 1 : `0${date.getMonth()+1}`;\nconst day = date.getDate() + 1 > 9 ? date.getDate() : `0${date.getDate()}`;\nconst today = `${year}-${month}-${day}`;\nlet userInfo=null;\n\nexport default {\n  data: function() {\n    return {\n      url_link:cdnStaticResourceUrl,\n      initialDate: `${year-1}-${month}-${day}`,\n      currentDate: today,\n      startDate: today,\n      endDate: today,\n      countIndex: {}, //统计数量\n      PushUserList: {}, //拉新列表\n      PushOrderList: {}, //订单完成列表\n      pushUser: true,\n    };\n  },\n  onLoad: function (options) {\n    // 判断是否为myCountBD页面进入\n    let countIndex=this.data.countIndex;\n    if(\"userInfo\" in options){\n      userInfo=JSON.parse(options.userInfo)\n      countIndex.headPortrait=userInfo.headPortrait;\n      countIndex.pusherName=userInfo.pusherName;\n    }else{\n      userInfo=Taro.getStorageSync('userInfo');\n      countIndex.headPortrait=Taro.getStorageSync('userInfo').avatarUrl;\n    }\n    this.setData({\n      countIndex\n    })\n\n    // this.getCount();  \n    this.getList(null, 'PushUserList');\n  },\n  //选择开始时间\n  startDate(e) {\n    this.setData({\n      startDate: e.detail.value,\n      endDate: this.data.currentDate //已选结束时间再重置开始时间时初始结束时间，防止结束时间前于开始时间\n    })\n    this.getList(null, this.data.pushUser ? 'PushUserList' : 'PushOrderList')\n  },\n  //选择结束时间\n  endDate(e) {\n    this.setData({\n      endDate: e.detail.value\n    })\n    this.getList(null, this.data.pushUser ? 'PushUserList' : 'PushOrderList')\n  },\n  //获取统计总数\n  getCount(){\n    // 判断这个推广人员是不是平台用户\n    if(userInfo.userId!=0){\n      ajax('get', 'miniapp/wantGroupPurchase/getMyCountIndex', {\n        queryStartDate: this.data.startDate,\n        queryEndDate: this.data.endDate,\n        userType:userInfo.userType,\n        userId:userInfo.userId,\n      }, res => {\n        if (res.data.code === 0) {\n          this.setData({\n            countIndex: res.data.result\n          })\n        }\n      })\n    }else{\n      // 推广人员不是平台用户\n    }\n    \n  },\n  //获取数据列表\n  getList(e, name){\n    let currentName = e ? e.currentTarget.dataset.name : name;\n    let url = `miniapp/wantGroupPurchase/getMy${currentName}`;\n    this.setData({\n      pushUser: currentName == 'PushUserList'\n    })\n    // 判断推广人员是不是平台用户\n    if(userInfo.userId!=0){\n      Taro.showLoading({\n        title: '加载中...',\n      })\n      ajax('get', url, {\n        queryStartDate: this.data.startDate,\n        queryEndDate: this.data.endDate,\n        userId:userInfo.userId\n        }, res => {\n        Taro.hideLoading();\n        if(res == 2) {\n          return false;\n        }\n        if (res.data.code === 0) {\n          this.getCount();\n          if (currentName == 'PushUserList'){//拉新数据赋值\n            this.setData({\n              PushUserList: res.data.result.userList.map(item =>{\n                item.statusNameArr=item.statusName.split(\" \");\n                return item;\n              })\n            })\n          }else{ //订单完成数据赋值\n            this.setData({\n              PushOrderList: res.data.result,\n            })\n          }\n        }\n      })\n    }else{\n      // 推广人员不是平台用户\n    }\n    \n  }\n};","json":{"missingData-view":"../../../component/missingData/missingData"},"wxml":"\n  <view class=\"mycount-auto-container\"> \n    <navBar title-text=\"推广统计\"></navBar>\n    <view class=\"container\">     \n      <view class=\"user_info\"> \n        <image class=\"photo\" :src=\"countIndex.headPortrait || '../../../images/defaultAvatar@2x.png'\" mode=\"aspectFit\"></image>\n        <view class=\"name_data\"> \n          <view class=\"name\">{{countIndex.pusherName}}\n          </view>\n          <view class=\"data\"> \n            <text class=\"item\">今日拉新人数 {{countIndex.todaypushUserCount || 0}}\n            </text>\n            <text class=\"item\">渠道订单数 {{countIndex.todaychannelOrderCount || 0}}\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"title_detail\">\n    推广明细\n  \n      </view>\n      <view class=\"section date\"> \n        <view class=\"cell\"> \n          <view class=\"section_title\">开始时间\n          </view>\n          <picker mode=\"date\" :value=\"startDate\" :start=\"initialDate\" :end=\"currentDate\" bindchange=\"startDate\">\n            <view class=\"picker\">{{startDate}}\n            </view>\n          </picker>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"section_title\">结束时间\n          </view>\n          <picker mode=\"date\" :value=\"endDate\" :start=\"startDate\" :end=\"currentDate\" bindchange=\"endDate\">\n            <view class=\"picker\">{{endDate}}\n            </view>\n          </picker>\n        </view>\n      </view>\n      <view class=\"section menus\"> \n        <view :class=\"[cell,(pushUser ? 'current': '')]\" bindtap=\"getList\" data-name=\"PushUserList\"> \n          <text>拉新人数({{countIndex.pushUserCount || 0 }})\n          </text>\n          <view class=\"active theme-bg\"></view>\n        </view>\n        <view :class=\"[cell,(pushUser ? '': 'current')]\" bindtap=\"getList\" data-name=\"PushOrderList\"> \n          <text>渠道订单完成数({{countIndex.channelOrderCount || 0 }})\n          </text>\n          <view class=\"active\"></view>\n        </view>\n      </view>\n      <block v-if=\"pushUser\"> \n        <block v-if=\"PushUserList.length > 0\">\n          <view class=\"user_list\" v-for=\"(item, {{item.userId}}) in PushUserList\" :wx:key=\"item.userId\">\n            <view class=\"list_item\"> \n              <image class=\"photo\" :src=\"item.headPortrait\"></image>\n              <view class=\"info\"> \n                <view class=\"name\">{{item.pushName}}\n                </view>\n                <view class=\"bottom_info\"> \n                  <view class=\"time\">{{item.createTime}}\n                  </view>\n                  <view class=\"text_block\">\n                    <text :class=\"[(statusName == '未取药' ? 'item_wqy' : 'item' )]\" v-for=\"(statusName, index) in item.statusNameArr\" :key=\"index\">{{statusName}}\n                    </text>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </block>\n        <block v-else>\n          <missingData-view zhi=\"new1\" textval=\"这里是空的~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n        </block>\n      </block>\n      <block v-else> \n        <block v-if=\"PushOrderList.length>0\">\n          <view class=\"common_section\" v-for=\"(item, item.purchaseId) in PushOrderList\" :key=\"item.purchaseId\">  \n            <view class=\"cell\"> \n              <view class=\"cell_left drugstore_name bold\">{{item.drugstoreName}}\n              </view>\n              <view class=\"gray_state bold\">已完成\n              </view>\n            </view>\n            <block v-for=\"medicines in item.onlineMedinesResultVo\" :key=\"medicines\">\n              <view class=\"cell cell_gray\">   \n                <view class=\"medicare\" v-if=\"item.medicalCardStatus == '1'\">支持医保卡\n                </view>\n                <image class=\"picture product_picture\" :src=\"medicines.medicinesImg\" mode=\"aspectFit\"></image>\n                <view class=\"cell_left\"> \n                  <view class=\"name\">{{medicines.medicinesName}} {{medicines.medicinesCommonName}} {{medicines.medicinesUnit}}\n                  </view>\n                  <view class=\"price bold\">￥{{medicines.medicinesPrice}}\n                  </view>\n                </view>\n                <view class=\"cell_right\">\n                  <view class=\"gray\">x{{medicines.medicinesNum}}\n                  </view>\n                </view>\n              </view>\n            </block>\n            <view class=\"cell cell_price\">\n              <text>到店付：\n              </text>\n              <text class=\"bold\">¥{{item.totalPrice}}\n              </text>\n            </view>\n          </view>\n        </block>\n        <block v-else>\n          <missingData-view zhi=\"new1\" textval=\"这里是空的~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n        </block>\n      </block>\n    </view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n.container .user_info{\n  padding: 40rpx 30rpx 46rpx 30rpx;\n  display: flex;\n  background: #fff;\n}\n.user_info .photo{\n  flex: none;\n  width: 104rpx;\n  height: 104rpx;\n  border-radius: 104rpx;\n  margin-right: 20rpx;\n}\n.user_info .name_data{\n  flex: auto;\n}\n.user_info .name_data .name{\n  color: #333333;\n  font-size: 36rpx;\n  font-weight: bold;\n  margin-bottom: 12rpx;\n}\n.user_info .name_data .data{\n  color: #666;\n  font-size: 28rpx;\n}\n.name_data .data .item{\n  margin-right: 40rpx;\n}\n.title_detail{\n  background: #f8f8f8;\n  height: 60rpx;\n  line-height: 60rpx;\n  color: #999999;\n  font-size: 28rpx;\n  text-indent: 30rpx;\n}\n.section {\n  display: flex;\n  font-size: 30rpx;\n  text-align: center;\n  background: #FFFFFF;\n  color: #333333;\n}\n.section .cell {\n  flex: 1;\n}\n.section .section_title {\n  /* font-size: 30rpx; */\n  color: #666;\n  display: inline-block;\n}\n.date {\n  border-bottom: 1rpx solid #EEEEEE;\n}\n.date .cell{\n  height: 27.5px;\n  line-height: 27.5px;\n  margin: 30rpx 0;\n  display: flex;\n  padding: 0 10rpx 0 26rpx;\n}\n.date .cell:last-child{\n  border-left: 2rpx solid #DDDDDD;\n}\n.date .cell picker {\n  flex: 1\n}\n.date .cell .picker {\n  position: relative;\n  padding-right: 30rpx;\n  color: #333333;\n}\n.date .cell .picker::after {\n  content: \"\";\n  position: absolute;\n  right: 15rpx;\n  top: 52%;\n  width: 12rpx;\n  height: 12rpx;\n  border: 3.6rpx solid #ccc;\n  border-left: 0;\n  border-top: 0;\n  margin-top: -10rpx;\n  transform: rotate(45deg)\n}\n.menus{\n  border-bottom: 1rpx solid #eee;\n}\n.menus .cell text {\n  height: 44px;\n  line-height: 44px;\n  box-sizing: border-box;\n  font-size: 28rpx;\n  color: #999;\n}\n.section .current text {\n  display: inline-block;\n  color: #333;\n  font-weight: bold;\n}\n.section .current{\n  position: relative;\n}\n.section .active{\n  display: none;\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  margin-left: -40rpx;\n}\n.section .current .active{\n  display: block;\n  width: 80rpx;\n  height: 6rpx;\n  border-radius: 6rpx;\n}\n\n\n\n\n\n\n.total {\n  background: #F7F7F7;\n  font-size: 28rpx;\n  color: #999999;\n  padding: 30rpx 0 20rpx;\n}\n.common_section {\n  margin-bottom: 20rpx;\n}\n.common_section:last-of-type{\n  margin-bottom: 0;\n}\n.common_section .cell {\n  padding: 13rpx 30rpx;\n}\n\n.common_section .cell .gray_state{\n  color: #ccc;\n}\n.common_section .cell_left .name{\n  color: #333;\n  font-size: 28rpx;\n  margin-bottom: 66rpx;\n  max-height: 40rpx;\n}\n.drugstore_name{\n  margin-right: 10rpx;\n}\n.common_section .cell_right {\n  text-align: right;\n  font-size: 28rpx;\n}\n.common_section .cell_gray {\n  background: #fbfbfb;\n  padding: 22rpx 30rpx;\n  border: none;\n  /* 有1像素的边框 暂时没找到在哪里设置先margin隐藏 */\n  margin-top: -1rpx;\n}\n.container .user_list{\n  background: #fff;\n  padding: 30rpx 0 0 30rpx;\n}\n.user_list .list_item{\n  display: flex;\n  padding-bottom: 30rpx;\n  padding-right: 30rpx;\n  border-bottom: 1rpx solid #eee;\n}\n.container .user_list .photo{\n  flex: none;\n  width: 90rpx;\n  height: 90rpx;\n  border-radius: 90rpx;\n  overflow: hidden;\n  margin-right: 20rpx;\n}\n.container .user_list .info{\n  flex: auto;\n}\n\n.user_list .info .name{\n  color: #30303c;\n  font-size: 32rpx;\n  font-weight: bold;\n  height: 40rpx;\n  line-height: 40rpx;\n  margin-bottom: 10rpx;\n}\n.user_list .info .bottom_info{\n  display: flex;\n  justify-content: space-between;\n}\n.info .bottom_info .time{\n  color: #999;\n  font-size: 24rpx;\n}\n.info .bottom_info .text_block{\n  display: flex;\n  justify-content: flex-end;\n}\n.bottom_info .text_block .item{\n  flex: none;\n  font-size: 24rpx;\n  font-weight: bold;\n  margin-left: 10rpx;\n  width: 116rpx;\n  height: 44rpx;\n  text-align: center;\n  line-height: 44rpx;\n  background: #FFF9F4;\n  border-radius: 10rpx;\n  color: #FE8F3E;\n}\n.item_wqy{\n  flex: none;\n  font-size: 24rpx;\n  font-weight: bold;\n  margin-left: 10rpx;\n  width: 116rpx;\n  height: 44rpx;\n  text-align: center;\n  line-height: 44rpx;\n  background: #F2FCFB;\n  border-radius: 10rpx;\n  color:#00CAAB\n}\n.common_section .textBlock {\n  display: flex;\n  justify-content: flex-end;\n  padding-right: 30rpx;\n  padding: 17rpx;\n}\n\n.common_section .textBlock text {\n  margin-right: 10rpx;\n}\n.common_section .cell .head_picture {\n  width: 34px;\n  height: 34px;\n  border-radius: 50%;\n}\n.common_section .cell .product_picture {\n  width: 90px;\n  height: 90px;\n  border-radius: 5rpx\n}\n.common_section .medicare {\n  position: absolute;\n  top: 30rpx;\n  left: 30rpx;\n  width: 95rpx;\n  height: 26rpx;\n  text-align: center;\n  line-height: 26rpx;\n  font-size: 16rpx;\n  color: #FFFFFF;\n  border-bottom-right-radius: 15rpx;\n  border-top-right-radius: 15rpx;\n  background: linear-gradient(to right, #87A5D1, #A9C0DD );\n}\n\n.common_section .cell_price{\n  display: flex;\n  justify-content: flex-end;\n  color: #333;\n  font-size: 26rpx;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: right;\n}\n\n.common_section .bold {\n  font-weight: bold\n}"},"convertDir/pages/note/myCountBD/mycountBD":{"json":{"missingData-view":"../../../component/missingData/missingData"},"js":"// pages/myCountBD/myCountBD.js\nimport {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  // 分页参数\n  page:1,\n  loadMore:true,\n  data: function() {\n    return {\n      info:{\n        pushCount:0,\n        orderCount:0,\n        newUser:0\n      },\n      bdList:[],\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * @description: 进入普通地推人员列表页面\n   * @param {type} e 地推人员信息\n   * @return: \n   */\n  toCount(e){\n    Taro.navigateTo({\n      url: '/pages/note/myCount/mycount?userInfo='+JSON.stringify(e.currentTarget.dataset.pushUserInfo)\n    })\n  },\n  /**\n   * @description: 获取地推团队数据\n   * @return: \n   */\n  getData(){\n    Taro.showLoading({\n      title: '加载中...',\n      mask:true\n    })\n    ajax('post', 'miniapp/wantGroupPurchase/getDBTeamCountIndex', {\n      userType:Taro.getStorageSync('userInfo').userType,\n      // pusherId:Taro.getStorageSync('userInfo').pusherId,\n      rows:10,\n      page:this.page\n    },res => {\n      // console.log(res)\n      this.setData({\n        info:{\n          pushCount:res.data.result.pushUserCount,\n          orderCount:res.data.result.channelOrderCount,\n          newUser:res.data.result.newUserCount,\n        },\n        bdList:[...this.data.bdList, ...res.data.result.dbList]\n      })\n      this.page++;\n      res.data.result.dbList.length==0 ? this.loadMore=false : this.loadMore=true\n      Taro.hideLoading();      \n    },res =>{\n      Taro.hideLoading(); \n    })\n  },\n\n  onLoad: function (options) {\n    console.log(this)\n    this.page=1;\n    this.getData()\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    if(this.loadMore){\n      this.getData()\n    }else{\n      Taro.showToast({\n        title: '没有更多数据了',\n        icon: 'none',\n        duration: 2000\n      })\n    }\n  }\n};","wxml":"\n  <view class=\"mycountBD-auto-container\"> \n    <navBar title-text=\"推广统计\"></navBar>\n    <view class=\"container\">   \n      <view class=\"count_head\"> \n        <view class=\"title\"> \n          <view class=\"text\">团队今日概览\n          </view>\n          <view class=\"line\"></view>\n        </view>\n        <view class=\"summary\">  \n          <view class=\"item\"> \n            <view class=\"num\">{{info.pushCount || 0}}\n            </view>\n            <view class=\"text\">拉新人数\n            </view>\n          </view>\n          <view class=\"item\"> \n            <view class=\"num\">{{info.orderCount || 0}}\n            </view>\n            <view class=\"text\">渠道订单数\n            </view>\n          </view>\n          <view class=\"item\"> \n            <view class=\"num\">{{info.newUser || 0}}\n            </view>\n            <view class=\"text\">新增用户\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"count_table_head\">  \n        <view class=\"item_name\">姓名\n        </view>\n        <view class=\"item\">拉新\n        </view>\n        <view class=\"item\">订单\n        </view>\n      </view>\n      <view class=\"count_table_group\" v-if=\"bdList.length>0\">\n        <view class=\"count_table_item\" v-for=\"item in bdList\" bindtap=\"toCount\" :data-push-user-info=\"item\" :key=\"item\">  \n          <view class=\"item_name\">  \n            <image class=\"photo\" :src=\" item.headPortrait \" mode=\"aspectFit\"></image>\n            <view class=\"name\">{{item.pusherName}}\n            </view>\n            <view class=\"manage theme-bg\" v-if=\"index==0\">\n          主管\n        \n            </view>\n          </view>\n          <view class=\"item\">{{item.pushUserNum}}\n          </view>\n          <view class=\"item\">{{item.pushOrderNum}}\n          </view>\n        </view>\n      </view>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval=\"这里是空的~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      </block>\n    </view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\npage{\n  background: #fff;\n  min-height: 99.9%;\n  width: 100%;\n}\n.container .count_head{\n  padding: 28rpx 0 36rpx;\n  background: #fff;\n}\n.count_head .title{\n  color: #333;\n  font-size: 30rpx;\n  position: relative;\n  width: 400rpx;\n  display: flex;\n  margin: 0 auto 42rpx;\n  justify-content: center;\n}\n.count_head .title .text{\n  background: #fff;\n  padding: 0 5rpx 0 8rpx;\n  z-index: 2;\n  position: relative;\n  width: 180rpx;\n  font-weight: bold;\n\n}\n.count_head .title .line{\n  width: 214rpx;\n  height: 2rpx;\n  background: #333;\n  position: absolute;\n  top: 19rpx;\n  margin: 0 auto;\n  z-index: 1;\n\n}\n.count_head .summary{\n  display: flex;\n  justify-content: space-around;\n}\n.summary .item{\n  flex: none;\n  width:250rpx;\n  text-align: center;\n}\n.summary .item .num{\n  padding: 0 10rpx;\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n  margin-bottom: 10rpx;\n  text-overflow: ellipsis;\n  overflow:hidden;\n  white-space:nowrap;\n}\n.summary .item .text{\n  font-size: 28rpx;\n  color: #999;\n}\n.container .count_table_head{\n  display: flex;\n  background: #f8f8f8;\n  color: #A1A5B0;\n  font-size: 28rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n\n}\n.count_table_head .item_name{\n  flex: none;\n  width: 340rpx;\n  text-indent: 75rpx;\n  margin-left: 22rpx;\n}\n.count_table_head .item{\n  flex: auto;\n  text-align: center;\n}\n.container .count_table_group{\n  padding-left: 22rpx;\n}\n.count_table_group .count_table_item{\n  display: flex;\n  background: #fff;\n  color: #A1A5B0;\n  height: 150rpx;\n  line-height: 150rpx;\n  font-weight: bold;\n  border-bottom: 1rpx solid #F5F7F8;\n}\n.count_table_item .item_name{\n  flex: none;\n  width: 330rpx;\n  display: flex;\n  position: relative;\n}\n.item_name .photo{\n  flex: none;\n  width: 90rpx;\n  height: 90rpx;\n  border-radius: 60rpx;\n  overflow: hidden;\n  margin-right: 19rpx;\n  margin-top: 30rpx;\n  margin-left: 9rpx;\n}\n.item_name .name{\n  flex: auto;\n  color: #30303c;\n  font-size: 32rpx;\n  \n\n}\n.item_name .manage{\n  position: absolute;\n  z-index: 100;\n  top: 89rpx;\n  left: 0;\n  width: 108rpx;\n  height: 34rpx;\n  line-height: 34rpx;\n  text-align: center;\n  color: #fff;\n  font-size: 22rpx;\n  border-radius: 30rpx;\n}\n.count_table_item .item{\n  flex: auto;\n  text-align: center;\n  font-size: 30rpx;\n  color: #333;\n}"},"convertDir/pages/note/myCoupon/myCoupon":{"json":{"missingData-view":"../../../../component/missingData/missingData","couponsList":"/component/couponsList/couponsList"},"js":"import {\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\nconst app = getApp()\nlet navBarHeight = app.globalData.navBarHeight;\n\nexport default {\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      fold_type:-1,\n      couponStatus: 'NOTUSED', //优惠券状态\n      currentPage: 1, //当前页数\n      couponList: {}, //优惠券列表\n      couponType: {\n        'CURRENCY': '通用券',\n        'GOODS': '商品券',\n        'NEWPEOPLE': '新人券'\n      },\n      sess_key: null,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  onLoad: function(options) {\n    // 设置导航栏高度\n    this.setData({\n      navBarHeight\n    })\n\n  },\n  onShow: function (options) {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      sess_key: getApp().globalData.sess_key\n    })\n    this.data.currentPage = 1;\n    this.getCoupon();\n  },\n  //切换tabs\n  switchTab(e) {\n    this.setData({\n      couponStatus: e.currentTarget.dataset.status,\n      currentPage: 1\n    })\n    this.getCoupon();\n  },\n  //获取优惠券列表\n  getCoupon() {\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax('get', 'couponController/findUserCouponList', {\n      couponStatus: this.data.couponStatus, //NOTUSED:未使用，ALREADYUSED:已使用，EXPIRED:已过期\n      pageNum: this.data.currentPage,\n      pageSize: 10,\n      clientType: 'mini'\n    }, res => {\n      Taro.hideLoading();\n      if (res == 2) {\n        return false;\n      }\n      if (res.data.code == 0 && res.data.result) {\n        if (this.data.currentPage == 1) {\n          this.data.couponList = res.data.result;\n        } else {\n          this.data.couponList.coupons.list = [...this.data.couponList.coupons.list, ...res.data.result.coupons.list]\n        }\n        this.setData({\n          couponList: this.data.couponList\n        })\n      }\n    })\n  },\n  //使用优惠券\n  usedCoupon(e) {\n    let coupon = e.detail;\n    //判断优惠券是否可以点击使用（如优惠券还未到可使用时间）\n    if (!coupon.couponTandF) return false;\n\n    // category 0 商品券 1问诊券\n    if(coupon.category == 0){\n      //storeId = 0代表平台券，反之店铺券\n      if(coupon.storeId == 0) {\n        // GOODS商品券 CURRENCY通用券 applicableStores 适用门店 0.全部 1.LBS 2.B2C 3.指定门店\n        if(coupon.applicableStores == 2) {\n          Taro.navigateTo({\n            url: `/pages/b2c/pages/productSearch/productSearch?couponId=${ coupon.couponId }&couponType=${ coupon.couponType }&applicableStores=${ coupon.applicableStores }`\n          })\n        }else if(coupon.couponType == 'GOODS' || coupon.applicableStores == 3) {\n          Taro.navigateTo({\n            url: `/pages/onlineGoods/productSearch/productSearch?couponId=${ coupon.couponId }&couponType=${ coupon.couponType }&applicableStores=${ coupon.applicableStores }`\n          })\n        }else if(coupon.applicableStores == 0){\n          Taro.switchTab({\n            url : '/pages/noteIndex/noteIndex'\n          })\n        }else if(coupon.applicableStores == 1){\n          Taro.navigateTo({\n            url: `/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?data=${JSON.stringify(getApp().address_data)}&sourceType=1`\n          })\n        }\n      }else {\n        // drugstoreType 判断是否是b2c药店 0 false 1 true\n        if(coupon.couponType == 'CURRENCY') {\n          Taro.navigateTo({\n            url: coupon.drugstoreType == 1 ? `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${ coupon.storeId }` \n            : `/pages/onlineGoods/drugList/drugList?drugStoreId=${ coupon.storeId }`\n          })\n        }else {\n          Taro.navigateTo({\n            url: coupon.drugstoreType == 1 ? `/pages/b2c/pages/pharmacyCouponsToUse/pharmacyCouponsToUse?couponId=${ coupon.couponId }&coupon=${ JSON.stringify(coupon) }` \n            : `/pages/onlineGoods/search/search?coupon=${ JSON.stringify(coupon) }&drugStoreId=${ coupon.storeId }&drugStoreName=${ coupon.storeName }`\n          }) \n        }\n      }\n    }else if (coupon.category == 1) {\n      if (coupon.couponType=='CURRENCY') { // 全部问诊\n        Taro.switchTab({\n          url : '/pages/noteIndex/noteIndex'\n        })\n      } else if (coupon.couponType == 'CLASSIFICATION' && coupon.classification == 1) {   // 极速问诊\n        Taro.navigateTo({\n          url: `/pages/inquiry/guidance/guidance`\n        })\n      } else if (coupon.couponType == 'CLASSIFICATION' && coupon.classification == 2) {  // 名医问诊\n        Taro.navigateTo({\n          url : '/pages/famousDoctors/page/doctorDetailList/doctorDetailList'\n        })\n      }\n    }\n  },\n  onReachBottom: function() {\n    if (this.data.couponList.coupons.list.length >= this.data.couponList.coupons.total) {\n      Taro.showToast({\n        title: '没有更多数据了',\n        icon: 'none'\n      })\n    } else {\n      ++this.data.currentPage;\n      this.getCoupon();\n    }\n  },\n  fold_btn(e){\n    let _index = e.currentTarget.dataset.index;\n    if (_index == this.data.fold_type) {\n      this.setData({\n        fold_type: -1\n      })\n    }else{\n      this.setData({\n        fold_type: _index\n      })\n    }\n  },\n  getServiceStatus(e) {\n    let coupon = e.detail;\n    let that = this;\n    let params = {\n      poiId: coupon.storeId,\n      type: 'ykq' //灵芝门店ID，公众号来源\n    }\n    ajax('post', 'api/patientinfo/getServiceStatus2', params, res => {\n      if (res.data.code == 0) {\n        let data = res.data.result\n      if(data.speedConfigStatus==1){\n        if(getApp().globalData.sess_key){\n          let userInfo = {\n            token:  getApp().globalData.sess_key,\n            userId: Taro.getStorageSync('userInfo').userId\n          }\n          Taro.navigateTo({\n            url: `/pages/inquiry/guidance/guidance?userInfo=${ JSON.stringify(userInfo) }&isHideBtn=1&drugstoreId=${coupon.storeId}`\n          })\n        } else {\n          let url = encodeURIComponent(`/pages/inquiry/guidance/guidance?isHideBtn=1&drugstoreId=${coupon.storeId}`)\n          Taro.navigateTo({\n            url: '/pages/note/login/login?backUrl='+ url\n          })\n        }\n      }else{\n         that.usedCoupon(coupon)\n      }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n};","wxml":"\n  <view class=\"myCoupon-auto-container\">  \n    <navBar title-text=\"我的优惠券\"></navBar>\n    <view :class=\"[container,(isDjk?'djk':'')]\" v-if=\"sess_key\">  \n      <view class=\"navs\" :style=\"{top:navBarHeightpx}\">  \n        <view :class=\"[(couponStatus == 'NOTUSED' ? 'active' : '')]\" bindtap=\"switchTab\" data-status=\"NOTUSED\">未使用({{couponList.count.noUseCount || 0}})\n        </view>\n        <view :class=\"[(couponStatus == 'ALREADYUSED' ? 'active' : '')]\" bindtap=\"switchTab\" data-status=\"ALREADYUSED\">已使用({{couponList.count.usedCount || 0}})\n        </view>\n        <view :class=\"[(couponStatus == 'EXPIRED' ? 'active' : '')]\" bindtap=\"switchTab\" data-status=\"EXPIRED\">已过期({{couponList.count.expiredCount || 0}})\n        </view>\n      </view>\n      <view class=\"coupons_box\" v-if=\"couponList.coupons.list.length > 0\">\n        <couponsList :couponsData=\" couponList.coupons.list \" bind:action=\"usedCoupon\"></couponsList>\n      </view>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval=\"这里是空的~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      </block>\n    </view>\n    <missingData-view v-if=\" !sess_key \" zhi=\"new1\" textval=\"优惠券信息请登录后查看~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n\n.navs {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 80rpx;\n  line-height: 80rpx;\n  color: #666883;\n  font-size: 28rpx;\n  background: #fff;\n  z-index: 2;\n  box-shadow: 0 1rpx 0 0 #e2e4ea;\n}\n\n.navs view {\n  text-align: center;\n  flex: 1;\n}\n\n.navs .active {\n  font-size: 28rpx;\n  position: relative;\n  font-weight: bold;\n  color: #00b955;\n}\n\n.navs .active::before {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  width: 40rpx;\n  height: 6rpx;\n  background: #00b955;\n  border-radius: 3rpx;\n  margin-left: -20rpx;\n}\n\n.coupons_box {\n  margin-top: 88rpx;\n  padding: 0 20rpx;\n}"},"convertDir/pages/note/myGroupIndent/myGroupIndent":{"wxml":"\n  <view class=\"myGroupIndent-auto-container\"> \n    <navBar title-text=\"我的预约\" :showCapsule=\" showCapsule \"></navBar>\n    <view :class=\"[container,( isSrcWhyb ? 'djk-view' : '' )]\">    \n      <view class=\"top-tab\" :style=\"{top:  navBarHeight px}\">\n        <view :class=\"[top-tab__item,( status == item.statu ? 'active theme-text' : '' )]\" :data-current=\" item.statu \" bindtap=\"switchTab\" v-for=\"(item, index) in  statusArr \" :key=\"index\">{{ item.text }}\n        </view>\n      </view>\n      <missingData-view zhi=\"new1\" v-if=\" !sess_key \" textval=\"相关订单信息请登录后查看~\" buttonText=\"立即登录\" bind:action=\"toLogin\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      <block v-else-if=\" orderList.list.length > 0 \">\n        <scroll-view scroll-y=\"true\" class=\"content-box\" bindscrolltolower=\"scrollBottom\" style=\"margin-top: 40px\">\n          <view class=\"sku-list_section common_section\" v-for=\"(item, index) in  orderList.list \" :key=\"index\" bindtap=\"openGroupIndent\" :data-orderno=\" item.orderNo \">     \n            <view class=\"cell cell_title\">  \n              <view class=\"cell_center bold\" catchtap=\"handleGoDrugstore\" :data-id=\"item.drugstoreId\"> \n                <text class=\"drugstore-name\">{{ item.drugstoreName }}\n                </text>\n                <text class=\"cell_tag\" v-if=\" item.platformType == 3 \">保险订单\n                </text>\n              </view>\n              <view class=\"cell_right bold\" v-if=\" item.orderStatus == 45 \">取货码：{{ item.pickupCode }}\n              </view>\n              <view class=\"cell_right\" v-else>{{ item.orderStatusDesc }}\n              </view>\n            </view>\n            <block v-if=\" item.hasChild \">\n              <view class=\"cell cell_horizontal\"> \n                <view v-for=\"(order, index) in  item.skuList \" :key=\"index\" v-if=\" index < 3 \">\n                  <image class=\"image\" :src=\" order.mainPhoto \" mode=\"aspectFit\"></image>\n                </view>\n                <view class=\"more\" v-if=\" item.skuList.length > 3 \">共{{ item.skuList.length }}件\n                </view>\n              </view>\n            </block>\n            <block v-else>\n              <view class=\"cell sku-list__cell\" v-for=\"(order, index) in  item.skuList \" :key=\"index\"> \n                <view class=\"cell_left\"> \n                  <view class=\"is_medicare_tag\" v-if=\" order.hasSupportMedicare \">医保支付\n                  </view>\n                  <image class=\"image\" :src=\" order.mainPhoto \" :data-drugid=\"item.drugstoreId\" :data-goodsid=\"order.skuId\" mode=\"aspectFit\"></image>\n                </view>\n                <view class=\"cell_center content-cell__detail\">   \n                  <view class=\"content-cell--name\"> \n                    <view class=\"name\">\n\t\t\t\t\t\t\t\t{{ order.skuName }} {{ order.commonName }} {{ order.skuSpec }}\n\t\t\t\t\t\t\t\t\n                      <text class=\"cell-name__icon\" v-if=\" order.prescribeMedicine \">处方药\n                      </text>\n                    </view>\n                    <view class=\"content-cell--number\">x{{ order.skuNum }}\n                    </view>\n                  </view>\n                  <view v-if=\" order.activityInfos.length > 0 \">\n                    <text class=\"mark-icon-ms\" v-for=\"(item, index) in  order.activityInfos \" :key=\"index\" v-if=\" item.label \">{{ item.label }}\n                    </text>\n                  </view>\n                  <view class=\"empty\"></view>\n                  <view> \n                    <text class=\"price\">￥{{ order.price }}\n                    </text>\n                    <text class=\"common-line-price\" v-if=\" order.salePrice \">¥{{ order.salePrice }}\n                    </text>\n                  </view>\n                </view>\n              </view>\n            </block>\n            <view class=\"cell cell-bottom\"> \n              <view class=\"cell_left\">\n                <view>{{ item.deliveryTypeDesc }}\n                </view>\n              </view>\n              <view class=\"cell_center\"> \n                <view class=\"total\">合计:\n\t\t\t\t\t\t    \n                  <text class=\"price\">￥{{ item.platformType == 2 ? item.payTotalAmountDesc : item.totalAmountDesc }}\n                  </text>\n                  <text v-if=\" item.payStatusDesc \">({{ item.payStatusDesc }})\n                  </text>\n                </view>\n                <view class=\"time\" v-if=\" item.orderStatus == 45 \">取货时间：{{ item.pickupTimeDesc }}\n                </view>\n              </view>\n            </view>\n            <view class=\"content-btns\">  \n              <block v-if=\" item.orderType == 30 && item.orderStatus == 45 \"> \n                <button catchtap=\"openMap\" :data-item=\" item \">去药店\n                </button>\n                <button catchtap=\"callPhone\" :data-phone=\" item.drugstoreTel \">联系药店\n                </button>\n              </block>\n              <button class=\"active theme-bg\" v-if=\" item.orderStatus == 10 \" catchtap=\"toCheckPay\" :data-item=\" item \">去支付\n              </button>\n              <button v-if=\" item.orderStatus == 60 \" catchtap=\"confirmDelete\" :data-orderno=\" item.orderNo \">删除订单\n              </button>\n            </view>\n            <view class=\"cell-tips\" v-if=\" item.afterSaleApplyApproveMsg \">{{ item.afterSaleApplyApproveMsg }}\n            </view>\n          </view>\n        </scroll-view>\n      </block>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval=\"还没有预约订单哦，快去看看吧\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n      </block>\n      <passWord defalutTitle=\"请输入医保支付密码\" bind:getPassVal=\"orderOpen\" :showPayPwdInput=\" passWordShow \">\n        <view slot=\"desc\" class=\"pass-word-text\">医保支付金额：¥\n          <text>{{ medicareCardDate.medicareAmountDesc }}\n          </text>\n        </view>\n      </passWord>\n    </view>\n  </view>","wxss":"/* pages/group/myGroupBuy/myGroupBuy.wxss */\n@import '../../../common/tableView.wxss';\n\npage {\n  background-color: #F5F6FA;\n}\n\n.top_banner {\n  padding: 20rpx 24rpx;\n  background: #fff;\n  border-bottom: 1rpx solid #e1e1e1;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n}\n\n.top_banner image {\n  width: 100%;\n  height: 114rpx;\n}\n\n.top-tab{\n  height: 80rpx;\n  width: 100%;\n  background-color: #fff;\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n}\n\n.top-tab__item {\n  text-align: center;\n  font-size: 30rpx;\n  line-height: 80rpx;\n  position: relative;\n  letter-spacing: 1.11rpx;\n  flex: 1;\n}\n\n.top-tab__item.active{\n  font-weight: bold;\n  font-size: 34rpx;\n}\n\n.top-tab__item.active:after {\n  display: block;\n  width: 50rpx;\n  height: 4px;\n  background: #00b955;\n  content: \"\";\n  left: 50%;\n  margin-left: -25rpx;\n  border-radius: 4rpx;\n  bottom: 0px;\n  position: absolute;\n}\n\n.content-box {\n  height: 100%;\n}\n\n.sku-list_section {\n  margin: 20rpx 24rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n\n.sku-list_section .cell_horizontal {\n  background: #F9F9F9;\n  padding: 20rpx 30rpx;\n}\n\n.sku-list_section .cell_horizontal .image {\n  width: 180rpx;\n  height: 180rpx;\n  margin-right: 20rpx;\n}\n\n.sku-list_section .cell_horizontal .more{\n  background: #FFFFFF;\n  color: #999999;\n  flex: 1;\n  height: 180rpx;\n  padding-top: 20rpx;\n  box-sizing: border-box;\n  font-size: 28rpx;\n  text-align: center;\n} \n\n.sku-list_section .cell-bottom{\n  font-size: 24rpx;\n}\n\n.sku-list_section .cell-bottom .cell_center .total{\n  color: #333333\n}\n\n.sku-list_section .cell-bottom .cell_center .total .price {\n  font-weight: bold;\n  font-size: 30rpx;\n  margin-right: 10rpx;\n}\n\n.sku-list_section .cell-tips {\n  padding: 20rpx;\n  background-color: #FFF7EF;\n  color: #99664D;\n  font-size: 28rpx;\n}\n\n.sku-list_section .cell_title .cell_center {\n  max-width: 65%;\n}\n\n.content-btns {\n  display: flex;\n  padding: 0 30rpx 20rpx;\n  justify-content: flex-end;\n}\n\n.content-btns button{\n  width: 180rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  border: 1rpx solid #CCCCCC;\n  border-radius: 60rpx;\n  font-size: 30rpx;\n  margin-right: 0;\n  margin-left: 20rpx;\n}\n\n.content-btns button.active {\n  color: #FFFFFF;\n  border: 0;\n  font-weight: bold;\n}\n\n.drugstore-name {\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 12rpx;\n}","json":{"missingData-view":"/component/missingData/missingData","passWord":"/component/passWord/passWord"},"js":"let app = getApp();\nimport {\n  open_wechatMap,\n  ajax,\n  ajax2,\n  toWeixinPayNew,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      passWordShow: false,\n      currentOrderNo: '',\n      url_link: cdnStaticResourceUrl,\n      personalPay: '',\n      medicareCardPay: '',\n      statusArr: [{\n        'statu': 0,\n        'text': '全部'\n      }, {\n        'statu': 10,\n        'text': '待付款'\n      },{\n        'statu': 20,\n        'text':'待确认'\n      } , {\n        'statu': 40,\n        'text': '待收货'\n      }, {\n        'statu': 45,\n        'text':'待取货'\n      }],\n      orderList: {}, //订单列表\n      currentPage: 1,\n      status: 0, //预设当前项的值\n      pageShow: false,\n      sess_key: null,\n      showCapsule: true,\n      hideNav: null,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      isSrcWhyb: getApp().globalData.src_whyb,\n      isLastPage: false,\n      medicareCardDate: {}\n    };\n  },\n  //订单状态值 10 待支付、20 待确认、30 待发货、40 待收货、45 待取药、50 已完成、60 已取消\n  onLoad: function(options) {\n    getApp().globalData.burySpotSDK.track(`page_orderListExpo`);\n\n    // 获取页面来源\n    if (options.source) {\n      this.data.source = options.source;\n      app.globalData.globalSource = options.source;\n    }\n\n    if (options.status) {\n      this.setData({\n        status: options.status\n      })\n    }\n    this.data.hideNav = options.hideNav || null;\n  },\n  onShow: function(e) {\n    // 腾讯过来隐藏顶部左侧胶囊\n    if (this.data.source == 'tx' || \n    (this.data.source && this.data.source.indexOf(\"tx_jk\") === 0) ||\n    this.data.hideNav == '1') {\n      this.setData({\n        showCapsule: false\n      })\n    }\n    this.setData({\n      isSrcWhyb: getApp().globalData.src_whyb,\n      sess_key: Taro.getStorageSync('sess_key') || null\n    })\n    if (this.data.sess_key) {\n      this.getOrderList();\n    }\n  },\n  /**\n   * @description: 组件点击跳转首页\n   * @return: void\n   */\n  exFun() {\n    Taro.switchTab({\n      url: '/pages/noteIndex/noteIndex'\n    })\n  },\n  toLogin(){\n    Taro.navigateTo({\n      url: '/pages/note/login/login',\n    })\n  },\n   /**\n   * @description: 切换导航状态\n   * @params e\n   * @return: void\n   */\n  switchTab(e) {\n    let status = e.target.dataset.current || 0;\n    if (status == this.data.status) return false;\n    this.data.currentPage = 1;\n    this.setData({\n      status:status,\n      orderList: {},\n      pageShow: false\n    });\n    this.getOrderList();\n  },\n  // 区分药店类型   b2c  or lbs\n  handleIsB2c(data,callBack){\n    ajax('get', 'miniapp/miniappDrugstore/checkIsB2cDrugstore', data, res => {\n      if(res.data.result.status == 0){\n        Taro.showToast({\n          title: '药店已下线或被禁用',\n          icon:'none'\n        })\n        return false\n      }\n      if (res.data.code == 0 && res.data.result) {\n        let isb2c = res.data.result.isB2c; // 1:b2c   0:lbs\n        callBack(isb2c);\n      }\n    })\n  },\n  // 跳转商品\n  handleGoGoodsDetail(e){\n    let drugId = e.currentTarget.dataset.drugid;\n    let goodsId = e.currentTarget.dataset.goodsid;\n    // 判断药店b2c 接口的data\n    let data = {\n      drugstoreId:drugId\n    }\n    this.handleIsB2c(data,function(isb2c){\n      if(isb2c == 1){\n        console.log('b2c')\n        Taro.navigateTo({\n          url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ goodsId }&drugStoreId=${ drugId }`\n        })\n      }else{\n        console.log('lbs')\n        Taro.navigateTo({\n          url: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${ goodsId }&drugStoreId=${ drugId }`\n        })\n      }\n    })\n  },\n  // 跳转药店主页\n  handleGoDrugstore(e){\n    let id = e.currentTarget.dataset.id;\n    // 判断药店主页\n    let data = {\n      drugstoreId:id\n    }\n    this.handleIsB2c(data,function(isb2c){\n      if(isb2c == 1){\n        console.log('b2c')\n        Taro.navigateTo({\n          url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${ id }`\n        })\n      }else{\n        console.log('lbs')\n        Taro.navigateTo({\n          url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${ id }`\n        })\n      }\n    })\n  },\n  /**\n   * @description: 获取订单列表数据\n   * @return: void\n   */\n  getOrderList() {\n    Taro.showLoading({\n      title: '加载中'\n    });\n    let orderStatusSet = [];\n    //待收货需要返回待发货和待收货两种状态订单\n    orderStatusSet = this.data.status == 40 ? [30, 40] : [this.data.status];\n    ajax2('post', `api/ykq/order/r/list`, {\n      pageNum: this.data.currentPage,\n      pageSize: 10,\n      orderStatusSet\n    }, res => {\n      Taro.hideLoading();\n      if (res == 2) return false;\n      if (res.data.code === 0 && res.data.result) {\n        if (res.data.result.pageNum == 1) {\n          this.data.orderList = res.data.result;\n        } else {\n          this.data.orderList.list = [...this.data.orderList.list, ...res.data.result.list];\n        }\n        this.setData({\n          orderList: this.data.orderList,\n          isLastPage: res.data.result.isLastPage,\n          pageShow: true\n        })   \n      }else {\n        this.setData({\n          orderList: {}\n        })  \n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 支付成功\n   */\n  toSuccess(data){\n    Taro.redirectTo({\n      url: `/pages/djk/pages/paymentSuccessful/paymentSuccessful?price=${data}`\n    })\n  },\n    /**\n   * @description: 上拉触底事件\n   */\n  onReachBottom() {\n    if (this.data.isLastPage) {\n      Taro.showToast({\n        title: '没有更多数据了',\n        icon: 'none'\n      })\n      return false;\n    }\n    ++this.data.currentPage;\n    this.getOrderList();\n  },\n  /**\n   * @description: 跳转订单详情\n   * @return: void\n   */\n  openGroupIndent(e) {\n    let orderNo = e.currentTarget.dataset.orderno;\n    let data = {\n      orderNo\n    }\n    getApp().globalData.burySpotSDK.track(`action_orderList_orderClick`, data);\n    \n    Taro.navigateTo({\n      url: `/pages/note/myIndentDetail/myIndentDetail?orderNo=${ orderNo }`\n    })\n  },\n  /**\n   * @description: 去药店，查看地图\n   * @return: void\n   */\n  openMap(e) {\n    let item = e.currentTarget.dataset.item;\n    console.log(item)\n    open_wechatMap(Number(item.drugstoreLatitude), Number(item.drugstoreLongitude), item.drugstoreName, item.drugstoreAddress);\n  },\n  /**\n   * @description: 联系药店\n   * @return: void\n   */\n  callPhone(e) {\n    let phoneNumber = e.currentTarget.dataset.phone;\n    Taro.makePhoneCall({\n      phoneNumber\n    })\n  },\n  /**\n   * @description: 支付\n   * @return: void\n   */\n  toCheckPay(e) {\n    let item = e.currentTarget.dataset.item;\n    let param = {\n      orderNo: item.orderNo,\n      payChannel: 20\n    }\n\n    this.data.currentOrderNo = param.orderNo;\n    getApp().globalData.burySpotSDK.track(`action_orderList_payClick`, param);\n\n    //非大健康医保支付\n    if(!this.data.isSrcWhyb && item.payMethod != 30) {\n      this.toOrderPay(param);\n      return;\n    }\n\n    item.payInfoDetail.forEach(item=>{\n      if(item.payChannel != 70) this.data.personalPay = item; //个人支付为0后台不返回数据\n      if(item.payChannel == 70) this.data.medicareCardPay = item;\n    })\n\n    //是否需要医保支付 payMethod等于30代表医保支付 10是个人支付\n    if(item.payMethod == 30){\n      //大于0 需要个人支付\n      if(item.totalAmountDesc > 0){\n        //判断个人支付状态\n        if(this.data.personalPay.payStatus == 30){\n          Taro.navigateTo({\n            url: `/pages/djk/pages/medicalPay/medicalPay?id=${ param.orderNo }`\n          })\n        }else{\n          this.toOrderPay(param);\n        }\n      }else{\n        // 打开大健康医保支付密码弹窗\n        this.setData({ \n          passWordShow: true,\n          medicareCardDate: item\n        });\n      }\n    }else {\n      this.toOrderPay(param);\n    }\n  },\n  toOrderPay(param){\n    toWeixinPayNew(param, callBack => {\n      //支付金额为0 且 医保支付金额大于0\n      if(callBack == 0 && param.payMethod == 30) {\n        this.setData({ passWordShow: true });\n        return;\n      }\n      //个人支付金额大于0 且 需要医保支付\n      if(callBack > 0 && param.payMethod == 30) {\n        Taro.redirectTo({\n          url: `/pages/djk/pages/medicalPay/medicalPay?id=${ param.orderNo }`\n        })\n        return false;\n      }\n      //支付成功\n      if(param.payChannel == 70){\n        this.toSuccess(this.data.medicareCardDate.medicareAmountDesc);\n      }else{\n        this.getOrderList();\n      }\n    }, ()=>{\n      \n      //支付失败\n      this.setData({ passWordShow: false });\n    })\n  },\n  /**\n   * 武汉大健康医保支付回调\n   */\n  orderOpen(e) {\n    let param = {};\n    param.orderNo = this.data.currentOrderNo;\n    param.payChannel = 70;\n\n    if(e.detail.length != 6) return false; \n    param.medicareInfo = {\n      medicareCardPassword: e.detail\n    }\n\n    this.toOrderPay(param)\n  },\n  /**\n   * @description: 二次弹窗确认是否删除订单\n   * @return: void\n   */\n  confirmDelete(e){\n    let orderNo = e.currentTarget.dataset.orderno;\n    Taro.showModal({\n      title: '提示',\n      content: '确定删除?',\n      confirmColor: getApp().globalData.mainColor,\n      success: res=> {\n        if (res.confirm) this.deleteOrder(orderNo);\n      }\n    })\n  },\n  /**\n   * @description: 删除订单\n   * @return: void\n   */\n  deleteOrder(orderNo) {\n    ajax2('POST', 'api/ykq/order/w/delete', { orderNo }, res => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          title: \"删除成功\",\n          image: '/images/successIcon.png',\n          mask: true,\n          duration: 1000\n        })\n        this.data.currentPage = 1;\n        // that.setData({\n        //   orderList: {}\n        // })\n        this.getOrderList();\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    });\n  }\n};\n"},"convertDir/pages/note/myIndentDetail/myIndentDetail":{"json":{"countDown":"/component/countDown/countDown","interrogationTime":"/component/interrogationTime/interrogationTime","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog","passWord":"/component/passWord/passWord"},"wxss":"@import '/common/tableView.wxss';\n.container {\n  width: 100%;\n  overflow-x: hidden;\n  padding-bottom: 120rpx;\n  background: linear-gradient(to bottom, #00b955, 15%, #F5F6FA, 25%, #F5F6FA);\n}\n.common_section {\n  margin: 0 24rpx 20rpx;\n  border-radius: 12rpx;\n}\n\n.common_section .cell_title {\n  height: 90rpx;\n  line-height: 90rpx;\n}\n\n.common_section .cell_center {\n  flex: 1;\n}\n\n.common_section .red {\n  color: #FF4531\n}\n\n.common_section .cell_title .cell_right {\n  font-weight: bold;\n}\n\n.common_section .cell.arrow .cell_right {\n  padding-right: 20rpx;\n}\n\n.common_section .cell_center .score-icon{\n  font-size: 20rpx;\n  color: #E02E24;\n  background: #FFEDEB;\n  border: 1px solid #E02E24;\n  border-radius: 3px;\n  padding: 0 4rpx;\n  margin-right: 10rpx;\n}\n\n.common_section .cell-copy {\n  display: inline-block;\n  width: 80rpx;\n  height: 36rpx;\n  text-align: center;\n  line-height: 36rpx;\n  border-radius: 36rpx;\n  font-size: 20rpx;\n  border: 1rpx solid #D1D1D6;\n  margin-left: 20rpx;\n}\n\n.header {\n  padding: 36rpx 30rpx 0 46rpx;\n  color: #fff;\n  font-size: 0;\n  position: relative;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n}\n\n.header .status {\n  flex: 1;\n}\n\n.header .status-txt-1 {\n  font-size: 36rpx;\n  font-weight: bold;\n}\n\n.header .status-txt-2 {\n  font-size: 28rpx;\n  opacity: 0.7;\n}\n.header .status-txt-desc {\n  font-size: 28rpx;\n  opacity: 0.7;\n}\n.header .status-icon {\n  width: 160rpx;\n  height: 160rpx;\n}\n\n.address-box {\n  padding: 27rpx 25rpx 18rpx;\n  background: #fff;\n  margin: 20rpx 24rpx 0;\n  font-size: 28rpx;\n  color: #999;\n  border-top-right-radius: 12rpx;\n  border-top-left-radius: 12rpx;\n  margin: 20rpx 24rpx 0;\n}\n\n.address-box .address-box__title {\n  box-sizing: border-box;\n  width: 100%;\n  font-size: 32rpx;\n  color: #000000;\n  font-weight: 600;\n  overflow:hidden; \n  text-overflow:ellipsis; \n  white-space:nowrap; \n}\n\n.btn-group-box5 {\n  display: flex;\n  height: 50rpx;\n  line-height: 50rpx;\n  background: #fff;\n  text-align: center;\n  margin: 0 24rpx 20rpx;\n  padding: 15rpx 0;\n  border-top: 1rpx solid #EEEEEE;\n  border-bottom-right-radius: 12rpx;\n  border-bottom-left-radius: 12rpx;\n}\n.btn-group-box5 .box5-btn {\n  box-sizing: border-box;\n  width: 50%;\n  position: relative;\n}\n\n.btn-group-box5 .box5-btn:first-child {\n  border-right: 1rpx solid #ddd;\n}\n\n.btn-group-box5 .box5-btn image {\n  width: 38rpx;\n  height: 38rpx;\n  vertical-align: middle;\n}\n\n.btn-group-box5 .box5-btn text {\n  color: #333;\n  font-size: 30rpx;\n  margin-left: 12rpx;\n}\n\n.bold {\n  font-weight: bold;\n}\n\n.delivery-type .cell {\n  padding: 25rpx 30rpx;\n  font-size: 28rpx;\n}\n\n.delivery-type .cell .cell_left {\n  margin-right: 20rpx;\n  color: #999999;\n  position: relative;\n}\n\n.delivery-type .cell_bottom {\n  text-align: center;\n  height: 90rpx;\n  line-height: 90rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.delivery-type .cell_bottom image {\n  width: 28rpx;\n  height: 28rpx;\n  margin-left: 10rpx;\n}\n\n.sku-list_section .cell-bottom {\n  border-top: 1rpx solid #EEEEEE;\n}\n.sku-list_section .cell-detail__flex .flex-right.cell-text-red {\n  color: #FF4531;\n}\n\n.sku-list_section .price-box {\n  display: flex;\n  font-size: 24rpx;\n  font-size: #000000;\n  padding: 34rpx 30rpx;\n  border-top: 1rpx solid #EEEEEE;\n}\n\n.sku-list_section .price-box .cell_left {\n  flex: 1\n}\n\n.sku-list_section .price-box .price text{\n  color: #999999;\n}\n\n.sku-list_section .price-box .price {\n  margin-right: 20rpx;\n}\n\n.sku-list_section .price-box .right text {\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.sku-list_section .cell-bottom .center {\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28rpx;\n  color: #333333;\n}\n\n.footer {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 100rpx;\n  background: #fff;\n  text-align: right;\n  z-index: 10;\n  padding: 13rpx 30rpx;\n}\n\n.footer button {\n  display: inline-block;\n  font-size: 28rpx;\n  border-radius: 34rpx;\n  width: 180rpx;\n  height: 72rpx;\n  line-height: 72rpx;\n  margin-left: 20rpx;\n  text-align: center;\n  border: 1rpx solid #C5C9D5;\n}\n\n.footer button.active {\n  color: #FFFFFF;\n  border: 0;\n  font-weight: bold;\n}\n\n.received_list {\n  margin: 20rpx 0;\n}\n.received_list .cell {\n  height: 90rpx;\n  color: #292626;\n  font-size: 28rpx;\n  background: #FBFBFB;\n}\n.received_list .cell:first-child {\n  background: #FFFFFF;\n}\n.received_list .cell_top .cell_center {\n  color: #00b955;\n}\n.received_list .cell_top .cell-right {\n  color: #999;\n}\n.received_list .cell_top::after {\n  width: 14rpx;\n  height: 14rpx;\n  transform: rotate(315deg);\n  margin-top: -6rpx;\n  right: 20rpx;\n  transition: all .3s;\n}\n.received_list .cell_top .cell_right {\n  color: #999;\n}\n.received_list .up::after {\n  transform: rotate(135deg);\n  margin-top: -12rpx;\n  right: 20rpx;\n  transition: all .3s;\n}\n.received_list .cell .cell_left {\n  width: 20rpx;\n  height: 24rpx;\n  margin-right: 14rpx;\n}\n.received_list .cell .cell_center {\n  flex: 1;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.received_list .cell .cell_right {\n  width: 150rpx;\n  text-align: right;\n}\n.received_list .cell_right--gray {\n  color: #999;\n}\n\n.lading-code-box9 {\n  box-sizing: border-box;\n  background: #fff;\n  margin: 0 24rpx 20rpx;\n  border-radius: 12rpx;\n}\n\n.lading-code-box9 .box9-time {\n  box-sizing: border-box;\n  width: 100%;\n  font-size: 0;\n  padding: 23rpx;\n  border-bottom: 1rpx solid #ddd;\n}\n\n.lading-code-box9 .box9-time view {\n  font-size: 30rpx;\n  color: #333;\n  font-weight: 600;\n  text-align: center;\n  margin: 0 24rpx;\n}\n\n.lading-code-box9 .box9-barcode {\n  box-sizing: border-box;\n  width: 100%;\n  font-size: 0;\n  padding: 23rpx;\n}\n\n.lading-code-box9 .box9-barcode .barcode-box {\n  width: 100%;\n  height: 135rpx;\n  text-align: center;\n  overflow: hidden;\n}\n\n.lading-code-box9 .box9-barcode .box9-code {\n  width: 100%;\n  height: 38rpx;\n  line-height: 38rpx;\n  text-align: center;\n  font-size: 38rpx;\n  font-weight: 700;\n  margin: 18rpx 0;\n}\n\n.lading-code-box9 .box9-barcode .box9-tips {\n  width: 100%;\n  text-align: center;\n  font-size: 24rpx;\n  color: #999;\n}\n\n.order-detail {\n  color: #666666;\n  font-size: 26rpx;\n}\n\n.deliver-detail .cell {\n  padding: 22rpx 30rpx;\n  justify-content: space-between;\n}\n\n.deliver-detail .cell_left {\n  margin-right: 20rpx;\n  font-weight: bold;\n}\n\n.deliver-detail .cell_left image{\n  width: 88rpx;\n  height: 88rpx;\n  border-radius: 88rpx;\n}\n\n.deliver-detail .tag {\n  border: 1rpx solid #00b955;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #00b955;\n  display: inline-block;\n  padding: 0 10rpx;\n  margin-top: 12rpx;\n}\n\n.common_section .phone-icon{\n  width: 33rpx;\n  height: 33rpx;\n  margin-right: 10rpx;\n}\n\n.order-track {\n  border-left: 1rpx solid #EEEEEE;\n  margin: 0 40rpx 60rpx;\n}\n\n.order-track .cell{\n  padding-left: 44rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: #AAAAAA;\n  font-size: 28rpx;\n  margin-top: 60rpx;\n  position: relative;\n}\n\n.order-track .cell::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 50%;\n  width: 8rpx;\n  height: 8rpx;\n  border-radius: 100%;\n  margin-top: -22rpx;\n  margin-left: -22rpx;\n  border: 18rpx solid #FFFFFF;\n  background: #CCCCCC;\n}\n\n.order-track .cell.active {\n  color: #333333;\n  font-weight: bold;\n}\n\n.order-track .cell.active::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 50%;\n  border-radius: 100%;\n  border: 14rpx solid #FFFFFF;\n  background: #00b955;\n  width: 20rpx;\n  height: 20rpx;\n  border-width: 18rpx;\n  margin-top: -28rpx;\n  margin-left: -28rpx;\n}\n\n.order-track .cell.active::after {\n  background:#FFFFFF;\n  border: 0;\n  margin-left: -4rpx;\n  margin-top: -4rpx;\n}\n\n.overflow-style {\n  line-height: unset;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 12rpx;\n  max-width: 50%;\n}\n\n.main{\n  width: 100%;\n  padding: 24rpx 30rpx;\n  margin: 20rpx 0;\n  background: #FFFFFF;\n  box-sizing: border-box;\n}\n.main .item{\n  width:100%;\n  display:flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 48rpx;\n  position: relative;\n}\n\n.main .item:last-child {\n  margin-bottom: 0;\n}\n\n.main .border{\n  position: absolute;\n  left:8rpx;\n  top:47rpx;\n  height:96rpx;\n  width:1px;\n  box-sizing: border-box;\n  border-left: 1px dotted #d3d3d3;\n}\n.main .item-left{\n  display:flex; \n  align-items: center;\n}\n.main .circle{\n  width:20rpx;\n  height:20rpx;\n  border-radius: 10rpx;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  background:#C5C9D5;\n}\n.main .inside{\n  display:block;\n  width:12rpx;\n  height: 12rpx;\n  border-radius: 6rpx;\n  background:#F7F7F7;\n}\n.main .item-right{\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  text-align: center;\n  color: #333333;\n  line-height: 40rpx;\n}\n.main .item-right .price{\n  font-weight: bold;\n  font-size: 32rpx;\n}\n.main .blue{\n  background:#307DFF;\n}\n\n.main .item-left image{\n  display:block;\n  width:60rpx;\n  height:60rpx;\n  margin: 0 33rpx 0 30rpx;\n}\n.main .item-left .type{\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  line-height: 45rpx;\n}\n.main .gray{\n  color:#999;\n  font-size: 28rpx;\n}\n\n.main .red{\n  color:rgb(255,74,54)\n}\n.banner{\n  width: calc(100% - 50rpx);\n  height: 132rpx;\n  display: block;\n  margin: 0 auto;\n  margin-bottom: 20rpx;\n}\n.zf-zt-list {\n  margin-top: 20rpx;\n}\n.zf-zt-list .cell .right {\n  font-weight: 100 !important;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n.common_section .price-box {\n  font-size: 24rpx;\n}\n\n.common_section .price-box .price {\n  margin-right: 20rpx;\n  color: #000000;\n}\n\n.common_section .price-box .price text{\n  color: #999999;\n}\n\n.common_section .price-box .right text {\n  font-weight: bold;\n  font-size: 32rpx;\n  margin-left: 10rpx;\n}\n/* 1号项目 */\n.gz-text{\n  color: #F93A4A;\n  font-size: 28rpx;\n  text-align: right;\n  flex: 1;\n}\n.icon_fx{\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 5rpx;\n}\n.gz_left{\n  display: flex;\n  width: 50%;\n}\n.icon_wh{\n  width: 36rpx;\n  height: 36rpx;\n  margin-left: 5rpx;\n  margin-bottom: -7rpx;\n}\n\n.common_section .cell .cell_center .symbol {\n  display: inline-block;\n  width: 32rpx;\n  height: 32rpx;\n  text-align: center;\n  line-height: 32rpx;\n  border-radius: 32rpx;\n  color: #C5C6D5;\n  border: 1rpx solid #C5C6D5;\n  margin-left: 14rpx;\n} \n","js":"import {\n  ajax,\n  ajax2,\n  open_wechatMap,\n  toWeixinPayNew,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      gzShow:false,\n      bannerUrl:'',\n      banner:'',\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      navBarHeight: getApp().globalData.navBarHeight,\n      djkArrow:false,//是否收起订单跟踪\n      orderTrack:[],\n      ddName:'',\n      orderNo: null,\n      timeType: false,\n      prescription: {},\n      cdnLink: cdnStaticResourceUrl,\n      orderTrackShow: false,\n      indentInfo: {},//订单信息\n      personalPay: '',\n      medicareCardPay: '',\n      //订单状态值 10 待支付、20 待确认、30 待发货、40 待收货、45 待取药、50 已完成、60 已取消\n      statusShowTxt: {\n        '45': {\n          \"txt1\": \"订单待取货\",\n          \"bannerImg\": \"/images/icon-order-status4.png\"\n        },\n        '50': {\n          \"txt1\": \"订单已完成\",\n          \"bannerImg\": \"/images/icon-order-status3.png\"\n        },\n        '60': {\n          \"txt1\": \"订单已取消\",\n          \"bannerImg\": \"/images/icon-order-status4.png\"\n        },\n        '9': {\n          \"txt1\": \"订单已退货\",\n          \"bannerImg\": \"/images/icon-order-status4.png\"\n        },\n        '30': {\n          \"txt1\": \"订单待发货\",\n          \"bannerImg\": \"/images/icon-order-status6.png\"\n        },\n        '40': {\n          \"txt1\": \"订单待收货\",\n          \"bannerImg\": \"/images/icon-order-status5.png\"\n        },\n        '20': {\n          \"txt1\": \"订单待确认\",\n          \"bannerImg\": `${ cdnStaticResourceUrl }/images/wait.png`\n        },\n        '10': {\n          \"txt1\": \"订单待支付\",\n          \"txt2\": \"\",\n          \"bannerImg\": \"/images/interrogation-status1.png\"\n        }\n      },\n      receivedListShow: false,\n      passWordShow: false,\n      ruleBoxShow: false\n    };\n  },\n  onLoad: function (options) {\n    getApp().globalData.burySpotSDK.track(`page_orderDetailExpo`);\n    \n    this.data.orderNo = options.orderNo;\n  },\n  onShow(){\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      timeType:true\n    })\n    this.getIndentInfo();\n    this.getBanner();\n  },\n  getBanner(){\n    let data = {\n      adType:11\n    }\n    ajax('get', 'miniapp/notify/getPurchaseBanner', data, res => {\n      if (res.data.code == 0 && res.data.result[0]) {\n        this.setData({\n          banner:res.data.result[0].bannerImage,\n          bannerUrl:res.data.result[0].bannerUrl\n        })\n      }\n    })\n  },\n  // 跳转商品\n  handleGoGoodsDetail(e){\n    let drugId = e.currentTarget.dataset.drugid;\n    let goodsId = e.currentTarget.dataset.goodsid;\n    // 判断药店b2c 接口的data\n    let data = {\n      drugstoreId:drugId\n    }\n    this.handleIsB2c(data,function(isb2c){\n      if(isb2c == 1){\n        console.log('b2c')\n        Taro.navigateTo({\n          url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ goodsId }&drugStoreId=${ drugId }`\n        })\n      }else{\n        console.log('lbs')\n        Taro.navigateTo({\n          url: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${ goodsId }&drugStoreId=${ drugId }`\n        })\n      }\n    })\n  },\n  /**\n   * 支付成功\n   */\n  toSuccess(data){\n    Taro.redirectTo({\n      url: `/pages/djk/pages/paymentSuccessful/paymentSuccessful?price=${data}`\n    })\n  },\n  handleRule(){\n    this.setData({\n      gzShow:true\n    }) \n  },\n  tolink(){\n    let url = this.getCompleteUrl(this.data.bannerUrl)\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n    })\n  },\n  getCompleteUrl(url) {\n    let resultUrl = '';\n    // 分割url\n    let urlArray = url.split('?');\n    // 获取全局sess_key\n    let token = getApp().globalData.sess_key;\n    // 区分 url 后是否带参数\n    if (urlArray[1]) {\n      resultUrl = `${urlArray[0]}?${urlArray[1]}&token=${token}`;\n    } else {\n      resultUrl = `${urlArray[0]}?token=${token}`;\n    }\n    return resultUrl;\n  },\n  handleDjkTrack(){\n    if(this.data.djkArrow){\n      this.setData({\n        djkArrow: false\n      })\n    }else{\n      this.setData({\n        djkArrow: true\n      })\n    }\n  },\n\n  // 区分药店类型   b2c  or lbs\n  handleIsB2c(data,callBack){\n    ajax('get', 'miniapp/miniappDrugstore/checkIsB2cDrugstore', data, res => {\n      if(res.data.result.status == 0){\n        Taro.showToast({\n          title: '药店已下线或被禁用',\n          icon:'none'\n        })\n        return false\n      }\n      if (res.data.code == 0 && res.data.result) {\n        let isb2c = res.data.result.isB2c; // 1:b2c   0:lbs\n        callBack(isb2c);\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  // 跳转药店主页\n  handleGoDrugstore(e){\n    let id = e.currentTarget.dataset.id;\n    // 判断药店主页\n    let data = {\n      drugstoreId:id\n    }\n    this.handleIsB2c(data,function(isb2c){\n      if(isb2c == 1){\n        console.log('b2c')\n        Taro.navigateTo({\n          url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${ id }`\n        })\n      }else{\n        console.log('lbs')\n        Taro.navigateTo({\n          url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${ id }`\n        })\n      }\n    })\n  },\n  /**\n   * @description: 获取处方信息\n   * @return: void\n   */\n  getPrescriptionInfo() {\n    ajax('POST', `miniapp/miniappController/getUserOrderPrescriptionInfo`, {\n      prescriptionId: this.data.indentInfo.prescriptionNo\n    }, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          prescription: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  /**\n   * @description: 点击查看处方详情\n   * @return: void\n   */\n  toPrescription(e) {\n    if (this.data.prescription.type == 1){\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/prescriptionDetails/prescriptionDetails?guid=${this.data.prescription.guid}`\n      });\n    }else{\n      let urls = this.data.prescription.images;\n      Taro.previewImage({\n        current: urls[0], // 当前显示图片的http链接\n        urls // 需要预览的图片http链接列表\n      })\n    }\n  },\n  openPassWord(e){\n    let param = {\n      orderNo: this.data.indentInfo.orderNo,\n      payChannel: 70\n    }\n    //医保卡支付\n    if(e.detail.length != 6) return false; \n    param.medicareInfo = {\n      medicareCardPassword: e.detail\n    }\n    \n    this.toOrderPay(param);\n  },\n  /**\n   * @description: 二次弹窗确认是否确认收货\n   * @return: void\n   */\n  confirmReceipt(){\n\n    getApp().globalData.burySpotSDK.track(`action_orderDetail_confirmClick`);\n\n    Taro.showModal({\n      title: '提示',\n      content: '是否确认收货?',\n      confirmColor: getApp().globalData.mainColor,\n      success: res=> {\n        if (res.confirm) this.confirmReceive();\n      }\n    })\n  },\n  /**\n   * @description: 确认收货\n   * @return: void\n   */\n  confirmReceive() {\n    let orderNo = this.data.indentInfo.orderNo;\n    ajax2('POST', 'api/ykq/order/w/receive', { orderNo }, (res) => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          title: \"确认收货成功\",\n          image: '/images/successIcon.png',\n          mask: true,\n          duration: 1000\n        })\n        this.getIndentInfo();\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    });\n  },\n  /**\n   * @description: 支付\n   * @return: void\n   */\n  toCheckPay(e) {\n    let param = {\n      orderNo: this.data.indentInfo.orderNo,\n      payChannel: 20\n    }\n    getApp().globalData.burySpotSDK.track(`action_orderDetail_payClick`, param);\n\n    //非大健康医保支付\n    if(!this.data.isSrcWhyb && this.data.indentInfo.payMethod != 30) {\n      this.toOrderPay(param);\n      return false;\n    }\n\n    this.data.indentInfo.payInfoDetail.forEach(item=>{\n      if(item.payChannel != 70) this.data.personalPay = item;\n      if(item.payChannel == 70) this.data.medicareCardPay = item;\n    })\n\n    //是否需要医保支付 payMethod等于30代表医保支付 10是个人支付\n    if(this.data.indentInfo.payMethod == 30){\n      //大于0 需要个人支付\n      if(this.data.indentInfo.totalAmountDesc > 0){\n        //判断个人支付状态\n        if(this.data.personalPay.payStatus == 30){\n          Taro.navigateTo({\n            url: `/pages/djk/pages/medicalPay/medicalPay?id=${ param.orderNo }`\n          })\n        }else{\n          this.toOrderPay(param);\n        }\n      }else{\n        // 打开大健康医保支付密码弹窗\n        this.setData({  passWordShow: true });\n      }\n    }else {\n      this.toOrderPay(param);\n    }\n  },\n  toOrderPay(param){\n    toWeixinPayNew(param, callBack => {\n      //支付金额为0\n      if(callBack == 0 && param.payMethod == 30) {\n        this.setData({ passWordShow: true });\n        return;\n      }\n      \n      if(callBack > 0 && param.payMethod == 30) {\n        Taro.redirectTo({\n          url: `/pages/djk/pages/medicalPay/medicalPay?id=${ param.orderNo }`\n        })\n        return false;\n      }\n      //支付成功\n      if(param.payChannel == 70){\n        this.toSuccess(this.data.indentInfo.medicareAmountDesc);\n      }else{\n        this.getOrderList();\n      }\n    }, ()=>{\n      //支付失败\n      this.setData({ passWordShow: false });\n    })\n  },\n  toOrderList(){\n    Taro.redirectTo({\n      url: '/pages/note/myGroupIndent/myGroupIndent'\n    })\n  },\n  toCancelDetail() {\n    Taro.navigateTo({\n      url: `/pages/note/orderCancelDetail/orderCancelDetail?orderNo=${this.data.orderNo}`\n    })\n  },\n  onHide: function () {\n    this.setData({\n      timeType: false\n    })\n  },\n  onUnload: function () {\n    this.setData({\n      timeType: false\n    })\n  },\n  /**\n   * @description: 查看物流\n   * @return: void\n   */\n  viewLogistics() {\n    Taro.navigateTo({\n      url: `/pages/note/logisticsInfo/logisticsInfo?mailNo=${ this.data.indentInfo.trackingNo }&orderId=${ this.data.indentInfo.orderNo }&phone=${ this.data.indentInfo.recipientPhone }`\n    });\n  },\n  /**\n   * @description: 获取订单详情\n   * @return: void\n   */\n  getIndentInfo() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    ajax2('post', `api/ykq/order/r/detail`, {orderNo: this.data.orderNo}, res => {\n      Taro.hideLoading();\n      if(res == 2) return false;\n      if (res.data.code == 0) {\n        let indentInfo = res.data.result;\n        indentInfo.pickupCodeBarcode = indentInfo.pickupCodeBarcode ? 'data:image/png;base64,' + indentInfo.pickupCodeBarcode.replace(/\\s+/g, \"\") : ''\n        let name = indentInfo.deliverName ? indentInfo.deliverName : '';\n        this.setData({\n          indentInfo,\n          ddName: name.charAt(name.length - 1)\n        },() => {\n          this.getCardDetail();\n        })\n        //判断是否参与赠险\n        if(indentInfo.prescriptionNo){\n          this.getPrescriptionInfo();\n        }\n        //判断是否展示处方详情\n        if(indentInfo.hasGiftReceived){\n          this.getMarketReceivedGiftList(indentInfo.orderNo)\n        }\n        if(indentInfo.deliveryType == 2){\n          // 获取运单信息\n          this.getOrderTrack(indentInfo.orderNo);\n        }\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  /**\n   * @description: 查看地图\n   * @return: void\n   */\n  openMap(e) {\n    let indentInfo = this.data.indentInfo;\n    open_wechatMap(Number(indentInfo.drugstoreSkuList[0].drugstoreLatitude), Number(indentInfo.drugstoreSkuList[0].drugstoreLongitude), indentInfo.drugstoreSkuList[0].drugstoreName, indentInfo.drugstoreAddress);\n  },\n  /**\n   * @description: 联系药店\n   * @return: void\n   */\n  callPhone(e) {\n    let phoneNumber = e.currentTarget.dataset.phone;\n    Taro.makePhoneCall({\n      phoneNumber\n    })\n  },\n  /**\n   * @description: 复制功能\n   * @return: void\n   */\n  copyCode(e) {\n    let orderCode = e.currentTarget.dataset.orderCode;\n    Taro.setClipboardData({\n      data: orderCode,\n      success(res) {\n        Taro.showToast({\n          title: '订单编号复制成功',\n          icon: 'none',\n          mask: true,\n          duration: 2000\n        })\n      }\n    })\n  },\n  // 倒计时组件回调方法\n  updataList(){\n    this.getIndentInfo();\n  },\n  /**\n   * 跳转会员卡详情页面\n   * @param {*} e \n   */\n  toDrugStore() {\n    const indentInfo = this.data.indentInfo;\n    Taro.navigateTo({\n      url: `/pages/my/myPage/vipCardDetail/vipCardDetail?drugstoreSign=${ indentInfo.drugstoreSign }`\n    })\n  },\n\n  /**\n   *  获取积分详情\n   */\n  getCardDetail() {\n    const indentInfo = this.data.indentInfo,\n          userInfo = Taro.getStorageSync('userInfo');\n    if(!indentInfo.drugstoreSign) return;\n    const sendData = {\n      drugstoreSign: indentInfo.drugstoreSign,\n      phone: userInfo.phone\n    }\n    ajax2('post', `member/detail`, sendData, res => {\n      if(res.data.code == 0){\n        const resData = res.data.result;\n        resData && this.setData({\n          cardDetail:resData\n        })\n      }else{\n        // Taro.showToast({\n        //   title: res.data.msg,\n        //   icon: 'none',\n        // })\n      }\n    }, function () {\n      // Taro.showToast({\n      //   title: '请求失败',\n      //   icon: 'none',\n      // })\n    })\n  },\n  // 配送跟踪信息\n  getOrderTrack(orderNo){\n    Taro.showLoading({\n      title: '加载中',\n    })\n    let url = 'api/ykq/order/r/delivery/trace';\n    ajax2('post', url, {\n      orderNo:orderNo,\n    }, (res) => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.setData({\n          orderTrack: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n          mask: true,\n          duration: 1000\n        })\n      }\n    });\n  },\n\n  /**\n   * @description: 获取赠险信息\n   * @return: void\n   */\n  getMarketReceivedGiftList(orderNo) {\n    //支付完成/预约成功后 待取药2 已完成3 待发货10 待收货11\n    let orderStatus = this.data.indentInfo.orderStatus;\n    if(orderStatus == 45 || orderStatus == 50 || orderStatus == 30 || orderStatus == 40){\n      ajax('post', `mimiapp/grouparea/getMarketReceivedGiftList`, {\n        orderNo\n      }, res => {\n        if(res.data.code == 0) {\n          this.setData({\n            giftReceivedList: res.data.result\n          })\n        }else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none'\n          })\n        }\n      })\n    }\n  },\n  openReceivedList() {\n    this.setData({\n      receivedListShow: !this.data.receivedListShow\n    })\n  },\n  toInsurancePage(e) {\n    let item = e.currentTarget.dataset.item;\n    let url = `${ item.jumpLink }&Code=${ this.data.indentInfo.drugstoreSign }&userid=${ Taro.getStorageSync('userInfo').userId }&receiveId=${ item.id }&orderNo=${ item.orderNo }&ADTAG=ykq_mini_app`\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${ encodeURIComponent(url) }`\n    })\n  },\n  /**\n   * @description: 确认是否取消订单\n   * @return: void\n   */\n  toCheckCancel(e) {\n    getApp().globalData.burySpotSDK.track(`action_orderDetail_confirmClick`);\n    let indentInfo = this.data.indentInfo;\n\n    console.log(this.data.indentInfo);\n    // 到店自提-到店付 \n    if (indentInfo.deliveryType == 1 && indentInfo.payMethod == 20) {\n      // 若商家已接单 待取货阶段 点击取消按钮 to 取消订单申请 页面\n      if (indentInfo.orderStatus == 45) {\n        console.log('to 取消订单申请页面');\n        Taro.navigateTo({\n          url: `/pages/note/applyCancel/applyCancel?orderNo=${ indentInfo.orderNo }`,\n        })\n        return;\n      }\n    }\n\n    Taro.showModal({\n      content: '确定要取消订单吗?',\n      confirmColor: getApp().globalData.mainColor,\n      confirmText: '残忍取消',\n      cancelText: '考虑一下',\n      success: res => {\n        if (res.confirm) {\n          this.orderCancel();\n        } else if (res.cancel) {\n          console.log('用户点击取消');\n        }\n      }\n    })\n  },\n  /**\n   * @description: 取消订单\n   * @return: void\n   */\n  orderCancel() {\n    ajax2('post', 'api/ykq/order/w/cancel', {\n      orderNo: this.data.indentInfo.orderNo\n    }, res => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          title: \"取消成功\",\n          image: '/images/successIcon.png',\n          mask: true,\n          duration: 1000\n        })\n        setTimeout(function() {\n          Taro.redirectTo({\n            url: \"/pages/note/myGroupIndent/myGroupIndent?status=0\"\n          })\n        }, 1000)\n      } else {\n        Taro.showToast({\n          title: res.data.code == 1 ? res.data.msg : '请求失败',\n          icon: 'none',\n          mask: true,\n          duration: 1000\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      console.log(err)\n    });\n  },\n  /**\n   * @description: 确认是否申请退款\n   * @return: void\n   */\n  toCheckApply(e) {\n    console.log(this.data)\n    let indentInfo = this.data.indentInfo;\n    // 到店自取-到店付 已完成的时候 点击申请退款 只给提示\n    if (indentInfo.deliveryType == 1 \n        && indentInfo.payMethod == 20 \n        && indentInfo.orderStatus == 50) {\n      Taro.showModal({\n        content: '如已到店支付，请联系商家线下退款',\n        showCancel: false, \n        confirmText: \"知道了\", \n        confirmColor: '#00b955',\n      })\n\n      return false;\n    }\n    getApp().globalData.burySpotSDK.track(`action_orderDetail_refundClick`);\n    \n    if (indentInfo.deliveryType == 2 || \n        // 到店逆向需求新增逻辑： 到店自提-在线支付 (待取货 或者 已完成)的订单 点击申请退款也跳转到退款申请页面\n        (indentInfo.deliveryType == 1 && indentInfo.payMethod != 20)) {\n      let url = indentInfo.hasRefundApply ? '/pages/note/refundDetail/refundDetail' : '/pages/note/applyRefund/applyRefund';\n      // 如果为到店自提-在线支付 携带标记 为了到申请退款页面区分接口路径\n      let otherParams = (indentInfo.deliveryType == 1 && indentInfo.payMethod != 20)  ? '&payOnlineInStore=1' : '';\n\n      url = `${ url }?orderNo=${ indentInfo.orderNo }${otherParams}`;\n      Taro.navigateTo({\n        url\n      })\n      return false;\n    }\n\n    Taro.showModal({\n      content: '退款申请仅可发起一次，且不可撤回，退款成功后支付金额将原路退回，是否提交申请？',\n      confirmColor: getApp().globalData.mainColor,\n      success: res => {\n        if (res.confirm) {\n          this.toApply();\n        } else if (res.cancel) {\n          console.log('用户点击取消');\n        }\n      }\n    })\n  },\n  /**\n   * @description: 申请退款\n   * @return: void\n   */\n  toApply() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    ajax2('post', `api/ykq/order/w/apply`, {\n      orderNo: this.data.indentInfo.orderNo\n    }, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          this.getIndentInfo();\n        }, 1000);\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, res => {\n      Taro.showToast({\n        title: res.data.msg,\n        icon: 'none'\n      })\n    })\n  },\n    /**\n   * @description: 平台客服\n   * @return: void\n   */\n  handleContactService() {\n    Taro.navigateTo({\n      url: '/pages/onlineGoods/contactService/contactService'\n    })\n  },\n  /**\n  * @description: 展开订单跟踪\n  * @return: void\n  */\n  openOrderTrack(){\n    this.setData({\n      orderTrackShow: true\n    })\n  },\n  /**\n  * @description: 跳转防控登记详情\n  * @return: void\n  */\n  toRegisterInfo(){\n    Taro.navigateTo({\n      url: `/pages/note/register/register?pageFrom=orderDetail&registerInfo=${ JSON.stringify(this.data.indentInfo.temperatureDetail)}`\n    })\n  },\n    /**\n  * @description: 打开保险规则弹窗\n  * @return: void\n  */\n  openRuleBox(e){\n    this.setData({\n      ruleBoxShow: true,\n      openRuleBoxType:e.currentTarget.dataset.type\n    })\n  }\n};\n","wxml":"\n  <view class=\"myIndentDetail-auto-container\">    \n    <navBar title-text=\"订单详情\" background=\"#00b955\" higherNav=\"true\"></navBar>\n    <view :class=\"[container,(isDjk?'djk':'')]\" :style=\"{margin-top:  navBarHeight px}\">                \n      <view class=\"header\"> \n        <view class=\"status\">   \n          <view class=\"status-txt-1\">{{ statusShowTxt[indentInfo.orderStatus].txt1 }}\n          </view>\n          <view class=\"status-txt-2\">{{ statusShowTxt[indentInfo.orderStatus].txt2 }}\n          </view>\n          <view class=\"status-txt-desc\" v-if=\" indentInfo.cancelReasonStr && indentInfo.orderStatus === 60 \">\n\t\t\t\t{{ indentInfo.cancelReasonStr }}\n          </view>\n          <view class=\"status-txt-desc\" v-if=\" indentInfo.orderStatus === 10 || indentInfo.orderStatus === 20 \">剩余\n\t\t\t\t\n            <interrogationTime routeType=\"2\" :timeType=\" timeType \" :time=\" indentInfo.countDownTime \" bind:updataList=\"updataList\"></interrogationTime>\n          </view>\n        </view>\n        <image class=\"status-icon\" :src=\" statusShowTxt[indentInfo.orderStatus].bannerImg \"></image>\n      </view>\n      <view class=\"common_section delivery-type\">    \n        <view class=\"cell\"> \n          <view class=\"cell_left\">配送方式\n          </view>\n          <view class=\"cell_center\">{{ indentInfo.deliveryTypeDesc }}\n          </view>\n        </view>\n        <view class=\"cell\" v-if=\" indentInfo.payMethod == 30 \"> \n          <view class=\"cell_left\">电子社保卡\n          </view>\n          <view class=\"cell_center\">{{ indentInfo.medicareCardNo }}\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"cell_left\">支付方式\n          </view>\n          <view class=\"cell_center\">{{ indentInfo.payMethodDesc }}\n          </view>\n        </view>\n        <view class=\"cell\" v-if=\" indentInfo.deliveryType != 1\" style=\"align-items: flex-start;\"> \n          <view class=\"cell_left\">配送地址\n          </view>\n          <view class=\"cell_center\"> \n            <view class=\"bold\">{{ indentInfo.recipientName }} {{ indentInfo.recipientPhone }}\n            </view>\n            <view>{{ indentInfo.recipientAddress }}\n            </view>\n          </view>\n        </view>\n        <block v-if=\" indentInfo.deliveryType == 3 \">\n          <view bindtap=\"viewLogistics\" class=\"cell_bottom\" v-if=\" indentInfo.orderStatus == 50 || indentInfo.orderStatus == 40 \"> \n            <text>点击查看物流信息\n            </text>\n            <image src=\"../../../images/icon-arrow.png\" mode=\"widthFix\"></image>\n          </view>\n        </block>\n      </view>\n      <image v-if=\"banner\" bindtap=\"tolink\" class=\"banner\" :src=\"banner\" mode=\"aspectFill\"></image>\n      <view class=\"common_section deliver-detail\" v-if=\" indentInfo.deliveryType == 2 && indentInfo.orderStatus != 60 && indentInfo.orderStatus != 10 \"> \n        <view class=\"cell arrow\" bindtap=\"openOrderTrack\"> \n          <view class=\"cell_left\">配送信息\n          </view>\n          <view class=\"cell_right\">{{ indentInfo.orderStatusDetail.desc }}\n          </view>\n        </view>\n        <view class=\"cell\" v-if=\" indentInfo.deliverName \">  \n          <view class=\"cell_left\">\n            <image src=\"../../../images/deliverPhoto.png\"></image>\n          </view>\n          <view class=\"cell_center\"> \n            <view>{{ indentInfo.deliverName }}\n            </view>\n            <view class=\"tag\">达达配送\n            </view>\n          </view>\n          <view class=\"cell_right\" bindtap=\"callPhone\" :data-phone=\" indentInfo.deliverPhone \">\n            <image class=\"phone-icon\" :src=\" isDjk ? '/images/djk_order_tel.png' : '/images/icon-phone2.png' \" mode=\"widthFix\"></image>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\" v-if=\" indentInfo.temperatureDetail \">\n        <view class=\"cell cell_title arrow\" bindtap=\"toRegisterInfo\"> \n          <view class=\"cell_center\">疾病防控登记\n          </view>\n          <view class=\"cell_right theme-text\">{{ indentInfo.temperatureDetail.patientName }}\n          </view>\n        </view>\n      </view>\n      <view class=\"main\" v-if=\" isDjk \">\n        <view class=\"item\" v-for=\"(item, index) in  indentInfo.payInfoDetail \" :key=\"index\">  \n          <view class=\"border\" v-if=\" index == 0 && indentInfo.payInfoDetail.length > 1 \"></view>\n          <view class=\"item-left\">  \n            <view class=\"circle\">\n              <text :class=\"[inside,( item.payStatus == 30 ? 'blue' : '' )]\"></text>\n            </view>\n            <image :src=\"'../../../images/'+ item.payChannel == 70 ? 'yb' : 'wx'+''+ item.payStatus == 30 ? '-active' : '' +'.png'\"></image>\n            <text :class=\"[type,( item.payStatus == 30 ? '' : 'gray' )]\">{{ item.payChannel == 70 ? '医保支付' : '个人支付' }}\n            </text>\n          </view>\n          <view class=\"item-right\"> \n            <text :class=\"[( item.payStatus == 30 ? '' : 'gray' )]\">{{ item.payStatus == 30 ? '已支付' : '未支付' }} \n            </text>\n            <text :class=\"[gray,price,( item.payStatus == 30 ? 'red' : '' )]\">¥{{ item.payAmountDesc }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <block v-if=\" indentInfo.orderType == 30 && indentInfo.deliveryType == 1 && indentInfo.orderStatus == 45 \">  \n        <view class=\"address-box\">  \n          <view class=\"address-box__title\">取药门店:{{ indentInfo.drugstoreSkuList[0].drugstoreName }}\n          </view>\n          <view>{{ indentInfo.drugstoreAddress }}\n          </view>\n          <view>营业时间：{{ indentInfo.drugstoreBusinessTime }}\n          </view>\n        </view>\n        <view class=\"btn-group-box5\"> \n          <view class=\"box5-btn\" bindtap=\"openMap\"> \n            <image src=\"../../../images/icon-addr.png\"></image>\n            <text>去门店\n            </text>\n          </view>\n          <view class=\"box5-btn\" bindtap=\"callPhone\" :data-phone=\" indentInfo.drugstoreSkuList[0].drugstoreTel \" v-if=\" indentInfo.orderType == 30 \"> \n            <image src=\"../../../images/icon-phone2.png\"></image>\n            <text>联系门店\n            </text>\n          </view>\n        </view>\n        <view class=\"lading-code-box9\"> \n          <view class=\"box9-time\"> \n            <view>取货时间\n            </view>\n            <view>{{ indentInfo.pickupTimeDesc }}\n            </view>\n          </view>\n          <view class=\"box9-barcode\">  \n            <view class=\"barcode-box\">\n              <image :src=\" indentInfo.pickupCodeBarcode \" mode=\"widthFix\"></image>\n            </view>\n            <view class=\"box9-code theme-text\">取货码：{{ indentInfo.pickupCode }}\n            </view>\n            <view class=\"box9-tips\">小提示：{{ indentInfo.waitToShopTip }}\n            </view>\n          </view>\n        </view>\n      </block>\n      <view class=\"common_section sku-list_section\" v-for=\"(item, index) in  indentInfo.drugstoreSkuList \" :key=\"index\">     \n        <view class=\"cell cell_title\">\n          <view class=\"cell_center bold\" bindtap=\"handleGoDrugstore\" :data-id=\"item.drugstoreId\"> \n            <text class=\"overflow-style\">{{ item.drugstoreName }}\n            </text>\n            <text class=\"cell_tag\" v-if=\" indentInfo.platformType == 3 \">保险订单\n            </text>\n          </view>\n        </view>\n        <view class=\"cell sku-list__cell\" bindtap=\"handleGoGoodsDetail\" :data-drugid=\"item.drugstoreId\" :data-goodsid=\"order.skuId\" v-for=\"(order, index) in  item.skus \" :key=\"index\"> \n          <view class=\"cell_left\"> \n            <view class=\"is_medicare_tag\" v-if=\"order.hasSupportMedicare\">医保支付\n            </view>\n            <image class=\"image\" :src=\" order.mainPhoto \" mode=\"aspectFit\"></image>\n          </view>\n          <view class=\"cell_center content-cell__detail\">   \n            <view class=\"content-cell--name\"> \n              <view class=\"name\">\n\t\t\t\t\t\t{{ order.skuName }} {{ order.commonName }} {{ order.skuSpec }}\n\t\t\t\t\t\n                <text class=\"cell-name__icon\" v-if=\" order.prescribeMedicine \">处方药\n                </text>\n              </view>\n              <view class=\"content-cell--number\">x{{ order.skuNum }}\n              </view>\n            </view>\n            <view v-if=\" order.activityInfos.length > 0 \">\n              <text class=\"mark-icon-ms\" v-for=\"(item, index) in  order.activityInfos \" :key=\"index\" v-if=\" item.label \">{{ item.label }}\n              </text>\n            </view>\n            <view class=\"empty\"></view>\n            <view> \n              <text class=\"price\">￥{{ order.price }}\n              </text>\n              <text class=\"common-line-price\" v-if=\" order.salePrice \">¥{{ order.salePrice }}\n              </text>\n            </view>\n          </view>\n        </view>\n        <view class=\"cell-detail\">     \n          <view class=\"cell-detail__flex\" v-if=\" isDjk \"> \n            <view>商品金额\n            </view>\n            <view class=\"flex-right\">{{ item.originAmountDesc }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.deliveryAmountDesc > 0 \"> \n            <view>配送费用\n            </view>\n            <view class=\"flex-right\">{{ item.deliveryAmountDesc > 0 ? '¥' + item.deliveryAmountDesc : '快递免邮' }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.activityAmountDesc > 0 \"> \n            <view>优惠活动\n            </view>\n            <view class=\"flex-right\">-¥{{ item.activityAmountDesc }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.merchantCouponAmountDesc > 0 && indentInfo.orderType == 70 \"> \n            <view>店铺优惠券\n            </view>\n            <view class=\"flex-right\">-¥{{ item.merchantCouponAmountDesc }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.merchantCouponAmountDesc > 0 && indentInfo.orderType == 30 \"> \n            <view>优惠券\n            </view>\n            <view class=\"flex-right\">-¥{{ item.merchantCouponAmountDesc }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" item.remark \"> \n            <view>订单备注\n            </view>\n            <view class=\"flex-right\">{{ item.remark }}\n            </view>\n          </view>\n        </view>\n        <view class=\"cell price-box\" v-if=\" isDjk \"> \n          <view class=\"cell_left\"> \n            <text class=\"price\">¥{{ indentInfo.totalAmountDesc }}\n              <text>个人支付\n              </text>\n            </text>\n            <text class=\"price\" v-if=\" isDjk && indentInfo.orderType == 30  \">¥{{ indentInfo.medicareAmountDesc }}\n              <text>医保支付\n              </text>\n            </text>\n          </view>\n          <view class=\"right\">合计\n            <text>¥{{ indentInfo.payTotalAmountDesc }}\n            </text>\n          </view>\n        </view>\n        <view class=\"cell-bottom\" v-if=\" indentInfo.hasChild \"> \n          <view class=\"total-price bold\">¥{{ item.totalAmountDesc }}\n          </view>\n          <view>共{{ item.skuTotal }}件 商品金额¥{{ item.originAmountDesc }} \n\t\t\t\t\n\t\t\t\t 运费¥{{ item.deliveryAmountDesc }}\n            <text v-if=\" indentInfo.platformType !=3 \">优惠¥{{ item.actCouponAmountWithoutPlatformCouponDesc }}\n            </text>\n          </view>\n        </view>\n        <view class=\"cell-bottom\" v-if=\" indentInfo.orderType == 30 \">\n          <view class=\"center\" bindtap=\"callPhone\" :data-phone=\" item.drugstoreTel \">\n\t\t\t\t联系商家\n\t\t\t\n            <image class=\"phone-icon\" src=\"../../../images/icon-phone2.png\"></image>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\" v-if=\" indentInfo.prescriptionNo \">\n        <view class=\"cell cell_title arrow\" bindtap=\"toPrescription\"> \n          <view class=\"cell_center\">购药处方\n          </view>\n          <view class=\"cell_right\">查看\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\" v-if=\" indentInfo.orderType == 70 && indentInfo.platformCouponAmountDesc > 0 \">\n        <view class=\"cell cell_title\"> \n          <view class=\"cell_center\">平台优惠券\n          </view>\n          <view class=\"cell_right\">-¥{{ indentInfo.platformCouponAmountDesc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section received_list\">  \n        <view :class=\"[cell,arrow,cell_top,( receivedListShow ? '' : 'up')]\" v-if=\" giftReceivedList.length > 1 \">  \n          <image class=\"cell_left\" src=\"../../../images/insuranceIcon.png\"></image>\n          <view class=\"cell_center\">您购买的商品可以免费领取保险\n          </view>\n          <view class=\"cell_right\" bindtap=\"openReceivedList\">{{ receivedListShow ? '收起' : '查看'}}\n          </view>\n        </view>\n        <view class=\"cell arrow\" v-if=\" giftReceivedList.length == 1 \">  \n          <image class=\"cell_left\" src=\"../../../images/insuranceIcon.png\"></image>\n          <view class=\"cell_center\">{{ giftReceivedList[0].giftName }}\n          </view>\n          <view :class=\"[cell_right,( giftReceivedList[0].status == 0 ? 'cell_right--gray' : '' )]\" bindtap=\"toInsurancePage\" :data-item=\" giftReceivedList[0] \">{{ giftReceivedList[0].status == 0 ? '填写信息' : '申请成功'}}\n          </view>\n        </view>\n        <block v-if=\" giftReceivedList.length > 1 && receivedListShow \">\n          <view class=\"cell arrow\" v-for=\"(item, key) in  giftReceivedList \" :key=\"key\"> \n            <view class=\"cell_center\">{{ item.giftName }}\n            </view>\n            <view :class=\"[cell_right,( item.status == 0 ? 'cell_right--gray' : '' )]\" bindtap=\"toInsurancePage\" :data-item=\"item\">{{ item.status == 0 ? '填写信息' : '申请成功'}}\n            </view>\n          </view>\n        </block>\n      </view>\n      <view class=\"common_section\" v-if=\" cardDetail.memberNumber \">\n        <view class=\"cell cell_title arrow\" bindtap=\"toDrugStore\">\n          <view class=\"cell_center\">完成订单奖励积分\n            <text class=\"score-icon\">店铺积分\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list\" v-if=\"indentInfo.orderStatus != 10 && indentInfo.userSubsidyAmountDesc\">\n        <view class=\"cell\"> \n          <view class=\"gz_left\">\n\t\t\t\t返现红包\n\t\t\t\t\n            <image mode=\"scaleToFill\" src=\"../../../images/icon_fx.png\" class=\"icon_fx\"></image>\n            <image mode=\"scaleToFill\" src=\"../../../images/icon_wh.png\" class=\"icon_wh\" bindtap=\"handleRule\"></image>\n          </view>\n          <view class=\"right zf-right-text bz-text-yz gz-text\">\n\t\t\t\t￥{{indentInfo.userSubsidyAmountDesc}}\n\t\t\t\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\" v-if=\" indentInfo.platformType ==3 && indentInfo.insuranceInfoResultVo.hasUseInsurance \"> \n        <view class=\"cell cell_title\" bindtap=\"openRuleBox\" data-type=\"1\">  \n          <view class=\"cell_tag\">险\n          </view>\n          <view class=\"cell_center\">保险报销药费\n            <text class=\"symbol\">?\n            </text>\n          </view>\n          <view class=\"cell_right\">\n            <text class=\"red\">-¥{{ indentInfo.insuranceInfoResultVo.insuranceAmountDesc }}\n            </text>\n          </view>\n        </view>\n        <view class=\"cell cell_title\" bindtap=\"openRuleBox\" data-type=\"2\" v-if=\"indentInfo.insuranceInfoResultVo.insuranceDeliveryAmountDesc != 0\">  \n          <view class=\"cell_tag\">险\n          </view>\n          <view class=\"cell_center\">保险报销运费\n            <text class=\"symbol\">?\n            </text>\n          </view>\n          <view class=\"cell_right\">\n            <text class=\"red\">-¥{{ indentInfo.insuranceInfoResultVo.insuranceDeliveryAmountDesc }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section sku-list_section order-detail\"> \n        <view class=\"cell-detail\">      \n          <view class=\"cell-detail__flex\">  \n            <view>订单编号：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.orderNo }}\n            </view>\n            <view class=\"cell-copy\" bindtap=\"copyCode\" :data-order-code=\" indentInfo.orderNo \">复制\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\"> \n            <view>创建时间：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.orderTime }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" indentInfo.payTime \"> \n            <view>支付时间：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.payTime }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" indentInfo.takeOrderTime \"> \n            <view>确认时间：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.takeOrderTime }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" indentInfo.deliveryStartTime \"> \n            <view>发货时间：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.deliveryStartTime }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" indentInfo.finishTime \"> \n            <view>完成时间：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.finishTime }}\n            </view>\n          </view>\n          <view class=\"cell-detail__flex\" v-if=\" indentInfo.cancelTime \"> \n            <view>取消时间：\n            </view>\n            <view class=\"flex-center\">{{ indentInfo.cancelTime }}\n            </view>\n          </view>\n        </view>\n        <view class=\"cell-bottom\" v-if=\" !isDjk \"> \n          <view class=\"total-price bold\">实付款：¥{{ indentInfo.totalAmountDesc }}\n          </view>\n          <view>共{{ indentInfo.skuTotal }}件 商品金额¥{{ indentInfo.originAmountDesc }} \n\t\t\t\t  \n            <text v-if=\" indentInfo.platformType !=3 \">优惠¥{{ indentInfo.actCouponAmountDesc }}\n            </text>\n            <text v-if=\" indentInfo.deliveryAmountDesc \"> 运费¥{{ indentInfo.deliveryTotalAmountDesc }}\n            </text>\n            <text v-if=\" indentInfo.platformType ==3 && indentInfo.insuranceInfoResultVo \"> 保险报销¥{{ indentInfo.insuranceInfoResultVo.insuranceTotalAmountDesc }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"footer\">       \n        <block v-if=\" indentInfo.deliveryType == 1 \"> \n          <button bindtap=\"toCheckCancel\" v-if=\" indentInfo.orderStatus != 50 && indentInfo.orderStatus != 60 && !(indentInfo.orderStatus == 45 && indentInfo.payMethod != 20) && !indentInfo.hasCancelApply\">{{ (indentInfo.deliveryType == 1 && indentInfo.payMethod == 20 &&  indentInfo.orderStatus == 45) ? '申请取消' : '取消订单' }}\n          </button>\n          <button class=\"active theme-bg to-apy\" bindtap=\"toCancelDetail\" v-if=\" indentInfo.hasCancelApply && indentInfo.orderStatus != 50 \">取消详情\n          </button>\n        </block>\n        <block v-else-if=\" indentInfo.deliveryType == 2 \">\n          <button bindtap=\"toCheckCancel\" v-if=\" indentInfo.orderStatus == 10 || indentInfo.orderStatus == 20 \">取消订单\n          </button>\n        </block>\n        <block v-else>\n          <button bindtap=\"toCheckCancel\" v-if=\" indentInfo.orderStatus == 10 \">取消订单\n          </button>\n        </block>\n        <button bindtap=\"confirmReceipt\" class=\"active theme-bg\" v-if=\" indentInfo.orderStatus == 40 && indentInfo.deliveryType != 2 \">确认收货\n        </button>\n        <button bindtap=\"toCheckPay\" v-if=\" indentInfo.orderStatus == 10 \" class=\"active theme-bg to-pay\">去支付\n        </button>\n        <button class=\"to-apy\" v-if=\" indentInfo.hasAfterSaleApply \" bindtap=\"toCheckApply\">申请退款\n        </button>\n        <button class=\"active theme-bg to-apy\" v-if=\" indentInfo.hasRefundApply \" bindtap=\"toCheckApply\">退款详情\n        </button>\n        <button bindtap=\"handleContactService\">平台客服\n        </button>\n      </view>\n      <halfScreenDialog :show=\" orderTrackShow \" maskClosable=\"ture\" title=\"订单跟踪\">\n        <view slot=\"desc\">\n          <view class=\"order-track\">\n            <view :class=\"[cell,( item.hasCurrentNode == 1 ? 'active' : '' )]\" v-for=\"(item, key) in  orderTrack \" :key=\"key\"> \n              <view class=\"left\">{{ item.desc }}\n              </view>\n              <view class=\"right\">{{ item.modifyTime ? item.modifyTime : '' }}\n              </view>\n            </view>\n          </view>\n        </view>\n      </halfScreenDialog>\n    </view>\n    <halfScreenDialog :show=\" gzShow \" title=\"规则内容\" type=\"2\" btnText=\"知道了\">\n      <view slot=\"desc\">{{indentInfo.userSubsidyTips}}\n      </view>\n    </halfScreenDialog>\n    <passWord defalutTitle=\"请输入医保支付密码\" bind:getPassVal=\"openPassWord\" :showPayPwdInput=\" passWordShow \">\n      <view slot=\"desc\" class=\"pass-word-text\">医保支付金额：¥\n        <text>{{ indentInfo.medicareAmountDesc }}\n        </text>\n      </view>\n    </passWord>\n    <halfScreenDialog :show=\" ruleBoxShow \" title=\"规则内容\" type=\"2\" btnText=\"知道了\">\n      <view slot=\"desc\"> \n        <view v-if=\"openRuleBoxType == 1\" v-for=\"(item, index) in  indentInfo.insuranceInfoResultVo.tip1 \" :key=\"index\">{{ item }}\n        </view>\n        <view v-if=\"openRuleBoxType == 2\" v-for=\"(item, index) in  indentInfo.insuranceInfoResultVo.deliveryInsuTip \" :key=\"index\">{{ item }}\n        </view>\n      </view>\n    </halfScreenDialog>\n  </view>"},"convertDir/pages/note/nearbyDrugstoreList/nearbyDrugstoreList":{"js":"// pages/note/nearbyDrugstoreList/nearbyDrugstoreList.js\nconst app = getApp();\nimport {\n  ajax,\n  ajax2,\n  open_wechatMap,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      address_data:[],\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      nearbyDrugstoreList:[],\n      pageNo:1,\n      totalSize:null,\n      showTooglePanel: false,  // 筛选面板默认隐藏\n      storeTypeList: [], // 药店分类列表\n      scrollTop:0,\n      pageShow: false,\n      pageTitle: '',\n      isSrc_whyb: getApp().globalData.src_whyb || '',\n      inputText: null, //输入框内容\n      type:\"\",\n      options:{}\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    console.log(this.data.navBarHeight)\n    if(options.type){\n      this.setData({\n        type:options.type\n      })\n    }\n    this.data.options = options;\n    Taro.getSystemInfo({\n      success: e => {\n        // t.barheight = e.statusBarHeight; //状态栏高\n        console.log(e.statusBarHeight, '状态栏高')\n      }\n    })\n    let data;\n    if(options.data){\n       data = JSON.parse(options.data);\n    }\n    this.setData({\n      address_data: data,\n      pageTitle: options.pageTitle || '药店列表'\n    })\n    \n    console.warn(options)\n    this.getStoreTypeList();\n  },\n  // 点击切换按钮\n  tooglcePanel() {\n    this.setData({\n      showTooglePanel: !this.data.showTooglePanel\n    })\n  },\n  // 点击标签\n  clickTypeTag(e) {\n    console.log(e.currentTarget, '当前点击的分类id')\n    const curLabelCode = e.currentTarget.dataset.labelcode;\n\n    this.data.storeTypeList.map(itm => {\n      if (itm.labelCode == curLabelCode) {\n        if (itm.check) delete itm.check;\n          else itm.check = true\n      }\n    });\n\n    this.setData({\n      storeTypeList: this.data.storeTypeList\n    })\n    this.data.pageNo = 1;\n    if(!this.data.showTooglePanel){\n      this.getNearbyDrugstore();\n    }\n  },\n  // 重置标签\n  resetTypeTag() {\n    this.data.storeTypeList.map(itm => {\n      delete itm.check;\n    })\n\n    this.setData({\n      storeTypeList: this.data.storeTypeList,\n      showTooglePanel: false\n    })\n\n    this.data.pageNo = 1;\n    this.getNearbyDrugstore();\n  },\n  // 点击完成\n  searchByTag() {\n    this.setData({\n      showTooglePanel: false\n    })\n    this.data.pageNo = 1;\n    this.getNearbyDrugstore();\n  },\n  // 点击药店\n  nearbyDrugstoreBtn(e) {\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${e.currentTarget.dataset.id}`\n    })\n  },\n  // 点击遮罩, 收起下拉区域\n  maskClick() {\n    this.setData({\n      showTooglePanel: false\n    })\n  },\n  //获取药店分类专区\n  getStoreTypeList() {\n    ajax('post', 'miniapp/miniappController/getDrugstoreTypeList', {}, res => {\n      if (res.data.code == 0 && res.data.result && res.data.result.length > 0) {\n        console.warn(res.data)\n        this.setData({\n          storeTypeList: res.data.result\n        })\n      } \n    })\n  },\n  // 获取附近药店list\n  getNearbyDrugstore(pagetype) {\n    Taro.showLoading({\n      title: '加载中',\n    })\n\n    const params = {\n      pageNo: this.data.pageNo,\n      pageSize: 10,\n    }\n\n    if (this.data.storeTypeList.length) params.drugstroreType = this.data.storeTypeList;\n\n    console.log(this.data.address_data)\n    let url = this.data.isSrc_whyb ? 'miniapp/bighealth/drugstore/getSevereCaseDrugstore' : 'miniapp/miniappController/getNearbyDrugStoreListV2';\n    if(this.data.type){\n      url = 'drugstore/ykq/mini/v1/getHistoryDrugStoreList';\n      params.lat = getApp().address_data.latitude;\n      params.lng = getApp().address_data.longitude;\n    }else{\n      params.lat = this.data.address_data.latitude;\n      params.lng = this.data.address_data.longitude;\n      params.cityCode = this.data.address_data.cityCode;\n    }\n    params.sourceType = this.data.options.sourceType || '';\n\n    ajax2('post', url, params, (res) => {\n      Taro.hideLoading();\n      console.log(res);\n      if (res.data.code == 0) {\n        if(pagetype){\n          // 分页\n          this.data.nearbyDrugstoreList = this.data.nearbyDrugstoreList.concat(res.data.result.list);\n        }else{\n          this.data.nearbyDrugstoreList = res.data.result.list;\n          this.data.totalSize = res.data.result.totalSize\n        }\n        this.setData({\n          nearbyDrugstoreList: this.data.nearbyDrugstoreList,\n          pageShow: true\n        })\n        setTimeout(() => {\n          Taro.pageScrollTo({\n            scrollTop: this.data.scrollTop - 1,\n          })\n        }, 200);\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, (res) => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  onPageScroll(e) {\n    this.data.scrollTop = e.scrollTop\n  },\n  //导航到药店\n  openMap: function (e) {\n    let data = e.currentTarget.dataset;\n    open_wechatMap(data.lat, data.lng, data.name, data.address);\n  },\n  // 输入框输入内容\n  searchInput : function(e){\n    this.setData({\n      inputText : e.detail.value\n    })\n  },\n  // 清除输入框内容\n  searchClearBtn : function(e){\n    this.setData({\n      inputText : null\n    })\n  },\n  // 点击搜索按钮\n  searchConfirmBtn : function(e){\n    // 无内容不进行搜索\n    if (!this.data.inputText) return;\n\n    // 输入内容为空字符串，显示toast框、清空输入框内容\n    if (this.data.inputText.match(/^\\s+$/)) {\n      Taro.showToast({\n        title: '请输入药品名',\n        icon: 'none',\n      })\n\n      this.setData({\n        inputText : null\n      })\n\n      return;\n    }\n    // 内容正常输入，页面跳转，携带参数\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugstoreSearch/drugstoreSearch?keyword=${this.data.inputText.trim()}`,\n    })\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n    this.data.pageNo = 1;\n    this.getNearbyDrugstore();\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    if (this.data.nearbyDrugstoreList.length < this.data.totalSize){\n      this.setData({\n        pageNo: this.data.pageNo+1\n      })\n      this.getNearbyDrugstore(true);\n    }else{\n      Taro.showToast({\n        title: '没有更多',\n        icon:'none'\n      })\n    }\n  }\n};","json":{"medList":"../../../component/medList/medList","missingData-view":"../../../component/missingData/missingData"},"wxml":"\n  <view class=\"nearbyDrugstoreList-auto-container\">    \n    <navBar :title-text=\" pageTitle \" :showCapsule=\"type?false:true\"></navBar>\n    <view class=\"fix_contain\" :style=\"{top:  navBarHeight + 6 px}\"> \n      <view class=\"search_contion\" v-if=\" !isDjk \"> \n        <view class=\"search_hearder\">   \n          <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n          <image :class=\"[search_clear,(inputText ? 'show' : '')]\" bindtap=\"searchClearBtn\" src=\"../../../images/search_clear.png\"></image>\n          <view class=\"search_kuai\" bindtap=\"searchClearBtn\"></view>\n          <input class=\"search_input\" :value=\"inputText\" bindinput=\"searchInput\" bindconfirm=\"searchConfirmBtn\" placeholder=\"搜索商品/药店\"></input>\n        </view>\n        <view :class=\"[search_btn,(inputText ? '' : 'gray')]\" bindtap=\"searchConfirmBtn\">搜索\n        </view>\n      </view>\n      <view :class=\"[classification-panel,( showTooglePanel ? 'show-panel' : '' ),(isDjk?'djk':'')]\" v-if=\" storeTypeList.length \">  \n        <view class=\"toogle-btn\" bindtap=\"tooglcePanel\">\n          <image src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n        <view class=\"slider-panel\">\n          <text v-for=\"(item, key) in  storeTypeList \" :key=\"key\" :data-labelCode=\"item.labelCode\" bindtap=\"clickTypeTag\" :class=\"[( item.check ? 'active' : '' )]\">{{item.labelName}}\n          </text>\n        </view>\n        <view class=\"drop-down-panel\">  \n          <view class=\"panel-header\">店铺标签\n          </view>\n          <view class=\"tab-content\">\n            <text v-for=\"(item, key) in  storeTypeList \" :key=\"key\" :data-labelCode=\"item.labelCode\" bindtap=\"clickTypeTag\" :class=\"[( item.check ? 'active' : '' )]\">{{item.labelName}}\n            </text>\n          </view>\n          <view class=\"panel-footer\"> \n            <text bindtap=\"resetTypeTag\">重置\n            </text>\n            <text bindtap=\"searchByTag\">完成\n            </text>\n          </view>\n        </view>\n      </view>\n    </view>\n    <view class=\"mask\" v-if=\" showTooglePanel \" bindtap=\"maskClick\"></view>\n    <view v-if=\" nearbyDrugstoreList.length > 0 \" :class=\"[nearbyDrugstore,( storeTypeList.length ? '' : 'padding-top-0' )]\" :style=\"{padding-top:  isDjk ? '53px' : '97px' }\">\n      <medList :lists=\" nearbyDrugstoreList \"></medList>\n    </view>\n    <missingData-view v-if=\" nearbyDrugstoreList.length == 0 && pageShow \" zhi=\"new1\" textval=\"暂无符合条件的药店~\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n  </view>","wxss":"/* pages/note/nearbyDrugstoreList/nearbyDrugstoreList.wxss */\n@import '../../../common/tableView.wxss';\n\n/* 附近药店 */\n\npage {\n  background-color: #fff;\n}\n\n.nearbyDrugstore {\n  padding: 194rpx 24rpx 0 24rpx;\n}\n\n.nearbyDrugstore-list {\n  display: flex;\n  padding: 20rpx 0 20rpx;\n  position: relative;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n}\n\n.nearbyDrugstore-list image {\n  width: 216rpx;\n  height: 144rpx;\n  display: block;\n}\n\n.nearbyDrugstore-list-right {\n  width: calc(100% - 236rpx);\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-address {\n  width: 70%;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-time {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 8rpx;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 6rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #666;\n  position: absolute;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx;\n}\n\n.location-img-right {\n  width: 28rpx;\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n/* 固定框 */\n.fix_contain{\n  position: fixed;\n  z-index: 1000;\n  width : 100%;\n  background: #fff;\n  border-top : 1px solid #F4F4F4;\n}\n\n.search_contion{\n  padding: 15rpx 0 15rpx 24rpx;\n  background: #fff;\n  position: relative;\n}\n.search_hearder{\n  width: 626rpx;\n  height: 60rpx;\n  background: #f0f0f5;\n  border-radius: 36rpx;\n  position: relative;\n\n}\n.search_input{\n  width: 558rpx;\n  height: 60rpx;\n  font-size: 25rpx;\n  padding-left: 68rpx;\n  color: #9D9FB8;\n\n}\n.search_icon{\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 16rpx 12rpx 16rpx 30rpx;\n}\n.search_clear{\n  top: 16rpx;\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  right: 16rpx;\n  z-index: 2;\n  display: none;\n}\n.search_clear.show{\n  display: block;\n}\n.search_kuai{\n  top: 0;\n  right: 0;\n  position: absolute;\n  width: 80rpx;\n  height: 100%;\n  z-index: 9;\n}\n.search_btn{\n  color: #00b955;\n  font-size: 28rpx;\n  position: absolute;\n  width: 100rpx;\n  top: 6rpx;\n  right: 0rpx;\n  line-height: 74rpx;\n  text-align: center;\n}\n.search_btn.gray {\n  color: #CCCCCC;\n}\n\n/* 分类面板 */\n/* .classification-panel {\n  position: fixed;\n  z-index: 1000;\n  border-top: 1px solid #F4F4F4;\n} */\n\n.classification-panel .slider-panel {\n  /* background: #fff; */\n  width: calc(100vw - 80rpx);\n  height: 104rpx;\n  padding-right: 80rpx;\n  text-indent: 24rpx;\n  line-height: 97rpx;\n  overflow: hidden;\n  overflow-x: auto;\n  white-space: nowrap;\n  border-bottom: 1rpx solid rgba(245, 245, 245, 1);\n}\n\n.classification-panel .slider-panel text, .tab-content text {\n  padding: 12rpx 20rpx;\n  margin-right: 20rpx;\n  background: #F8F8F8;\n  color: #333333;\n  font-size: 28rpx;\n  border-radius: 32rpx;\n  box-sizing: border-box;\n}\n\n.toogle-btn {\n  position: fixed;\n  right: 0rpx;\n  width: 80rpx;\n  height: 104rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #fff;\n  z-index: 1000;\n  box-shadow: rgba(238, 238, 238, 0.5) -14rpx 0rpx 10rpx 0rpx;\n}\n\n.toogle-btn image {\n  width: 28rpx;\n  height: 28rpx;\n  transform: rotate(270deg);\n  transition: all linear 0.3s;\n}\n\n.show-panel .toogle-btn {\n  box-shadow: unset;\n}\n\n.show-panel .toogle-btn image {\n  transform: rotate(90deg);\n}\n\n.show-panel .slider-panel {\n  display: none;\n}\n\n/* 筛选面板 默认隐藏 */\n.classification-panel .drop-down-panel {\n  display: none;\n  /* border-top: 1px solid #F4F4F4; */\n  position: absolute;\n  width: 100vw;\n  /* top: -2rpx; */\n  top : 88rpx;\n  background: #fff;\n  z-index: 999;\n  box-shadow: 0px 12rpx 12rpx 0rpx rgba(0, 0, 0, 0.1); \n}\n\n.show-panel .drop-down-panel {\n  display: block;\n}\n\n.panel-header {\n  padding: 31rpx 0rpx 31rpx 24rpx;\n  font-size: 30rpx;\n  font-weight: 400;\n  color:rgba(51, 51, 51, 1);\n}\n\n.tab-content {\n  padding: 0 24rpx;\n}\n\n.tab-content text {\n  margin-bottom: 31rpx;\n  display: inline-block\n}\n\n.panel-footer {\n  display: flex;\n}\n\n.panel-footer text {\n  flex: 1;\n  display: inline-block;\n  height: 87rpx;\n  line-height: 87rpx;\n  text-align: center;\n  font-size: 30rpx;\n}\n\n.panel-footer text:nth-child(2) {\n  background-color: #00b955;\n  color: #fff;\n}\n\n.padding-top-0 {\n  padding-top: 0rpx;\n}\n\n.active {\n  background: #e8fff3 !important;\n  border: 2rpx solid #00b955 !important;\n  color: #00b955 !important;\n  font-size: 28rpx !important;\n  font-weight: 400 !important;\n}\n\n/* 遮罩 */\n.mask {\n  position: fixed;\n  z-index: 50;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.4);\n}"},"convertDir/pages/note/newAddress/newAddress":{"js":"// pages/editAddress/editAddress.js\nimport {\n  url,\n  ajax,\n  ajax2,\n  getLocation,\n  open_wechatMap\n} from \"../../../utils/util\";\nconst app = getApp();\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    newTitle:'新建地址',\n    editAddressInfo:null,\n    navBarHeight: app.globalData.navBarHeight,//自定义导航高度\n    switch1Checked:false,\n    region: ['湖北省', '武汉市', '全部'],\n    beforeRegion: '请选择',\n    customItem: '全部',\n    packer_type:false,\n    btn_type:false,\n    // 数据信息\n    name:'',\n    tel:'',\n    provinceList: [],\n    cityList: [],\n    districtList: [],\n    address:'',\n    editLabel: '',\n    defaultAddress:false,\n    provinceName:'',\n    cityName:'',\n    districtName:'',\n    province: null,\n    city: null,\n    district: null,\n    province1: null,\n    city1: null,\n    dcistrict1: null,\n    addressList: null,\n    longitude:'',\n    latitude:'',\n    selectNearyAddress: '',\n    longitude: '',\n    latitude: '',\n    value: null,\n    addressBoxShow: false,\n    isSrc_whyb: getApp().globalData.src_whyb || ''\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if(options.info){\n      // 如果点击编辑进来将数据展示出来\n      let data = JSON.parse(options.info);\n      console.log(data)\n      this.setData({\n        newTitle:'编辑地址',\n        editAddressInfo: data,\n        name: data.consignee,\n        tel: data.phone,\n        beforeRegion: data.provinceName + ',' + data.cityName + ',' +data.districtName,\n        address: data.address,\n        editLabel: data.label,\n        defaultAddress: data.isDefault==1?true:false,\n        province1: data.province,\n        city1: data.city,\n        district1: data.district,\n        addressId:data.id,\n        longitude: data.longitude,\n        latitude: data.latitude,\n        selectNearyAddress: data.selectNearyAddress\n      })\n      this.formDetection();\n    }else{\n      this.setData({\n        newTitle: '新建地址'\n      })\n    }\n  },\n  onShow:function () {\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n    let _this =this;\n    wx.getStorage({\n      key: 'addressInfo',\n      success:function (res) {\n        _this.setData({\n          city : res.data.city,\n          selectNearyAddress : res.data.selectNearyAddress,\n          longitude : res.data.longitude,\n          latitude : res.data.latitude,\n          city1: res.data.cityCode\n        },function () {\n          wx.removeStorageSync('addressInfo');\n        })\n      }\n    })\n  },\n  onUnload:function () {\n  },\n  inputName(e){\n    this.setData({\n      name: e.detail.value\n    })\n    this.formDetection();\n  },\n  inputTel(e){\n    this.setData({\n      tel: e.detail.value\n    })\n    this.formDetection();\n  },\n  inputAddres(e){\n    this.setData({\n      address: e.detail.value\n    })\n    this.formDetection();\n  },\n  edit_Label(e){\n    this.setData({\n      editLabel: e.target.dataset.name\n    })\n  },\n  formDetection(){\n    if (this.data.name != '' && this.data.tel != ''  && this.data.address!=''){\n      this.setData({\n        btn_type:true\n      })\n    }else{\n      this.setData({\n        btn_type: false\n      })\n    }\n  },\n  submitForm(){\n    if (this.data.btn_type == false)\n    return false\n    if (!this.data.selectNearyAddress) {\n      wx.showToast({\n        title: '请选择所在区域',\n        icon: 'none',\n        mask: true\n      });\n      return false\n    }\n    let str = String(this.data.tel);\n    let dh = str.substr(0, 3) + \"*****\" + str.substr(7);\n    let data = {\n      province: '',\n      city: this.data.city1 || '',\n      district:'',\n      provinceName: '',\n      cityName: '',\n      districtName: '',\n      consignee: this.data.name,\n      phone: this.data.tel,\n      address: this.data.address,\n      label: this.data.editLabel,\n      isDefault: this.data.defaultAddress?1:0,\n      longitude: Number(this.data.longitude),\n      latitude: Number(this.data.latitude),\n      selectNearyAddress: this.data.selectNearyAddress,\n      insensitivityPhone: dh,\n      id: this.data.addressId\n    }\n    if (data.districtName == '') {\n      data.district = null\n    }\n    //验证姓名\n    let name = this.data.name;\n    if(name.length > 10){\n      wx.showToast({\n        title: '收货人最多10个字',\n        icon: 'none',\n        mask: true\n      });\n      return false\n    }\n    // 验证手机号\n    let phone = this.data.tel;\n    if (phone.length != 11 || isNaN(phone)) {\n      wx.showToast({\n        title: '请输入11位数手机号',\n        icon: 'none',\n        mask: true\n      });\n      return false\n    }\n    let zhengze = /^((13[0-9])|(14[5,7,9])|(15([0-3]|[5-9]))|(166)|(17[0,1,3,5,6,7,8])|(18[0-9])|(19[8|9]))\\d{8}$/;\n    if (!(zhengze.test(phone))) {\n      wx.showToast({\n        title: '请输入正确手机号',\n        icon: 'none',\n        mask: true\n      });\n      return false;\n    } \n    //详细地址\n    let address = this.data.address;\n    if(address.length>50){\n      wx.showToast({\n        title: '详细地址最多50个字',\n        icon: 'none',\n        mask: true\n      });\n      return false\n    }\n    // 新建地址\n    if (this.data.editAddressInfo == null){\n      ajax2('post', `miniapp/address/save`, data, (res) => {\n        if(res == 2) {\n          return false;\n        }\n        if (res.data.code == 0) {\n          wx.showToast({\n            icon: 'none',\n            title: '保存成功',\n          })\n          data.id = res.data.result;\n          let pages = getCurrentPages();\n          let prevPage = pages[pages.length - 2]; //上一个页面'\n          \n        \n          // 判断上一个页面是确认订单还是地址列表\n          if (prevPage.route.includes('pages/note/recommendedDrug/placeOrder/placeOrder')) {\n            let prevPage = pages[pages.length - 2]; //上一个页面'\n            //拿到数据返回确认订单页面\n            prevPage.setData({\n              userAddress: data\n            });\n            wx.navigateBack({\n              delta: 1\n            })\n          }else{\n            let prevPage = pages[pages.length - 3]; //上一个页面'\n            //拿到数据返回确认订单页面\n            prevPage && prevPage.setData({\n              userAddress: data\n            });\n            wx.navigateBack({\n              delta: 2\n            })\n          }\n        }else{\n          wx.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    }else{\n      // 编辑地址请求\n      ajax2('post', `miniapp/address/update`, {\n        ...data,\n        id: this.data.editAddressInfo.id\n      }, (res) => {\n        if(res == 2){\n          return false;\n        }\n        if (res.data.code == 0) {\n          wx.showToast({\n            icon: 'none',\n            title: '保存成功',\n          })\n          let pages = getCurrentPages();\n          let prevPage = pages[pages.length - 3]; //上一个页面'\n          //拿到数据返回确认订单页面\n          prevPage && prevPage.setData({\n            userAddress: data\n          });\n          wx.navigateBack({\n            delta: 2\n          })\n        }else{\n          wx.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    }\n  },\n  switch1Change: function (e) {\n    this.setData({\n      defaultAddress:e.detail.value\n    })\n    this.formDetection();\n  },\n  openAddressBox(){\n    if (this.data.selectNearyAddress) {\n      wx.navigateTo({\n        url: `../map/map?city=${this.data.city1}&selectNearyAddress=${this.data.selectNearyAddress}&latitude=${this.data.latitude}&longitude=${this.data.longitude}&title=修改地址`\n      })\n    }else {\n      wx.navigateTo({\n        url: `../map/map?city=${app.address_data.city}&selectNearyAddress=${app.address_data.address}&latitude=${app.address_data.latitude}&longitude=${app.address_data.longitude}&title=新增地址`\n      })\n    } \n  }\n})","json":{},"wxss":"@import '../../../common/tableView.wxss';\npage{\n  background-color: #fff;\n}\n.edit-address-info{\n  display: flex;\n  position: relative;\n}\n.edit-left{\n  padding-left: 24rpx;\n  width: 140rpx;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 28rpx;\n  color: #333333;\n}\n.edit-right{\n  display: block;\n  font-size: 28rpx;\n  color: #333333;\n  line-height: 90rpx;\n  height: 90rpx;\n}\n.edit-address-info::after{\n  content: '';\n  display: block;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 1px;\n  background-color: rgba(238,238,238,1);\n}\n.address-details{\n  height: 170rpx;\n  line-height: 0;\n  display: block;\n  padding-top: 31rpx;\n  padding-right: 24rpx;\n}\n.edit-Label{\n  transition: all 0.2s;\n  width: 120rpx;\n  height: 50rpx;\n  border-radius:25px;\n  border:1px solid rgba(225,225,225,1);\n  line-height: 50rpx;\n  font-size: 28rpx;\n  text-align: center;\n  color: #666666;\n  margin-top: 20rpx;\n  margin-right: 20rpx;\n}\n.edit-right-Label{\n  display: flex;\n}\n.activity{\n  background-color: rgba(0,122,255,0.08);\n  color: #00b955;\n  border: 1px solid rgba(229,248,246,1)\n}\n.zeng{\n  font-size: 54rpx;\n  color: #666666;\n  line-height: 46rpx;\n}\n.edit-Label-right{\n  height: auto;\n  padding-bottom: 20rpx;\n}\n.new-default-Address{\n  padding-left: 24rpx;\n  position: relative;\n}\n.default-text1{\n  font-size: 30rpx;\n  color: #333333;\n  margin-top: 27rpx;\n}\n.default-text2{\n  font-size: 24rpx;\n  color: #CCCCCC;\n  margin-top: 10rpx;\n  margin-bottom: 27rpx;\n}\n.switch{\n   transform:scale(0.8);\n   position: absolute;\n   top: 0rpx;\n   right: 24rpx;\n}\n.newAddress-btn{\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 710rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n  text-align: center;\n  color: #fff;\n  margin: 0 25rpx 30rpx;\n  border-radius: 710rpx;\n  background: #C6CAD4;\n}\n.picker_view{\n  width: calc(100% - 140rpx);\n  overflow: hidden;\n}\n.picker{\n  display: -webkit-box;\n-webkit-box-orient: vertical;\n-webkit-line-clamp: 1;\noverflow: hidden;\n}\n.newAddress-btn-activity{\n  color: #fff;\n  font-weight: bold;\n}\n\n.djk-view .newAddress-btn-activity {\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}\n.djk-view .activity{\n  color: #00B955;\n  border: 1px solid rgba(64,135,255,0.1);\n  background-color: rgba(64,135,255,0.1);\n}\n.black-box {\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 99;\n  overflow: hidden;\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n.address-box {\n  width: 100%;\n  height: 600rpx;\n  position: fixed;\n  bottom: 0;\n  z-index: 100;\n  background: #FFFFFF\n}\n.address-box picker-view-column {\n  text-align: center\n}\n.address-box .btns-box {\n  display: flex;\n  justify-content: space-between;\n  padding: 0 20rpx;\n}\n.address-box .btns-box view {\n  height: 90rpx;\n  line-height: 90rpx;\n}\n/* 收货地址ui变化 */\n.shdz::before{\n  content: \"\";\nposition: absolute;\nright: 30rpx;\ntop: 50%;\nwidth: 16rpx;\nheight: 16rpx;\nborder: 2rpx solid #999999;\nborder-left: 0;\nborder-bottom: 0;\nmargin-top: -8rpx;\ntransform: rotate(45deg);\n\n}","wxml":"\n  <view class=\"newAddress-auto-container\"> \n    <navBar :title-text=\"newTitle\"></navBar>\n    <view :class=\"[edit-address-container,( isSrc_whyb ? 'djk-view' : '' )]\">      \n      <view class=\"edit-address-info\"> \n        <view class=\"edit-left\">收货人\n        </view>\n        <input :value=\"name\" class=\"edit-right\" bindinput=\"inputName\" placeholder=\"请输入收货人姓名\" maxlength=\"10\"></input>\n      </view>\n      <view class=\"edit-address-info\"> \n        <view class=\"edit-left\">手机号\n        </view>\n        <input :value=\"tel\" class=\"edit-right\" bindinput=\"inputTel\" placeholder=\"请输入手机号\" type=\"number\" maxlength=\"11\"></input>\n      </view>\n      <view class=\"edit-address-info shdz\" bindtap=\"openAddressBox\"> \n        <view class=\"edit-left\">收货地址\n        </view>\n        <view class=\"edit-right\">\n      {{selectNearyAddress ? selectNearyAddress : '请选择收货地址'}}\n    \n        </view>\n      </view>\n      <view class=\"edit-address-info\"> \n        <view class=\"edit-left\">门牌号码\n        </view>\n        <textarea :value=\"address\" bindinput=\"inputAddres\" class=\"edit-right address-details\" placeholder=\"请输入门牌号码\" maxlength=\"50\"></textarea>\n      </view>\n      <view class=\"edit-address-info\"> \n        <view class=\"edit-left\">标签\n        </view>\n        <view class=\"edit-right edit-Label-right\">\n          <view class=\"edit-right-Label\">  \n            <view :class=\"[edit-Label,(editLabel == '家'?'activity':'')]\" data-name=\"家\" bindtap=\"edit_Label\">家\n            </view>\n            <view :class=\"[edit-Label,(editLabel == '公司'?'activity':'')]\" data-name=\"公司\" bindtap=\"edit_Label\">公司\n            </view>\n            <view :class=\"[edit-Label,(editLabel == '学校'?'activity':'')]\" data-name=\"学校\" bindtap=\"edit_Label\">学校\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"new-default-Address\">  \n        <view class=\"default-text1\">设置默认地址\n        </view>\n        <view class=\"default-text2\">如果开启开关，则每次下单会默认使用该地址\n        </view>\n        <switch class=\"switch\" :checked=\"defaultAddress\" bindchange=\"switch1Change\" color=\"#00b955\"></switch>\n      </view>\n      <view :class=\"[newAddress-btn,(btn_type?'newAddress-btn-activity theme-bg':'')]\" bindtap=\"submitForm\">保存并使用\n  \n      </view>\n    </view>\n  </view>"},"convertDir/pages/note/orderCancelDetail/orderCancelDetail":{"js":"// pages/my/myDrug/applyRefund/applyRefund.js\nimport { cdnStaticResourceUrl, ajax2 } from \"../../../utils/util\";\nconst app = getApp();\n\nexport default {\n  data: function() {\n    return {\n      orderNo: '',\n      cdnLink: cdnStaticResourceUrl,\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      isIPX: app.globalData.isIPX,\n      showSheet: false,\n      sheetType: '',\n      applyType: null,\n      applyReason: null,\n      showModal: false,\n      baseInfo: {} // 页面基础数据\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.orderNo) {\n      this.data.orderNo = options.orderNo;\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      orderNo: this.data.orderNo\n    }, function() {\n      this.getApplyRefundDetail();\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n   /**\n   * @description: 复制功能\n   * @return: void\n   */\n  copyCode(e) {\n    let orderCode = e.currentTarget.dataset.orderCode;\n    Taro.setClipboardData({\n      data: orderCode,\n      success(res) {\n        Taro.showToast({\n          title: '订单编号复制成功',\n          icon: 'none',\n          mask: true,\n          duration: 2000\n        })\n      }\n    })\n  },\n  /**\n   * @description 退款详情基础数据\n   */\n  getApplyRefundDetail() {\n    Taro.showLoading();\n    ajax2('post', 'api/ykq/order/r/cancel/apply/detail', {\n      orderNo: this.data.orderNo\n    }, ({ data } = { data: {} }) => {\n      Taro.hideLoading();\n      console.log(data, 'datatttttttt')\n      // mock 数据\n      // data = {\n      //   code: 0,\n      //   result: {\n      //     auditStatus: 10,\n      //     orderNo: 'ZX1346053231477784668',\n      //     drugstoreSkuList: [{\n      //       drugstoreName: '测试门店',\n      //       drugstoreTel: '15910830710' \n      //     }],\n      //     applyReason: {\n      //       desc: '买错了/下错单了'\n      //     }\n      //   }\n      // }\n\n      if (data.code == 0) {\n       // 请求成功\n       console.log(data);\n       this.setData({\n         baseInfo: data.result\n       });\n      } else {\n        // code不等于0\n        Taro.showToast({\n          title: data.msg || '数据异常',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: err.msg || '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  //目标位置电话\n  callPhone: function(e) {\n    console.log(e)\n    Taro.makePhoneCall({\n      phoneNumber: e.currentTarget.dataset.phone\n    })\n  },\n  /**\n   * @description: 平台客服\n   * @return: void\n   */\n  handleContactService() {\n    Taro.navigateTo({\n      url: '/pages/onlineGoods/contactService/contactService'\n    })\n  },\n  toApplyPage() {\n    Taro.navigateTo({\n      url: `/pages/note/applyCancel/applyCancel?orderNo=${ this.data.orderNo }`,\n    })\n  }\n};\n","json":{},"wxml":"\n  <view class=\"orderCancelDetail-auto-container\"> \n    <navBar title-text=\"订单取消详情\"></navBar>\n    <view :class=\"[container,( isDjk ? 'djk' : '' )]\" v-if=\" !showSheet \">        \n      <view class=\"apply-st theme-bg\">  \n        <block v-if=\" baseInfo.auditStatus == 10 \"> \n          <view class=\"st-label\">\n          商家审核中\n          \n            <view>到店已支付的订单，请联系商家线下退款\n            </view>\n          </view>\n          <image :src=\" cdnLink + 'images/refund-review.png' \"></image>\n        </block>\n        <block v-if=\" baseInfo.auditStatus == 30 \"> \n          <view class=\"st-label\">\n          审核驳回\n          \n            <view>如有疑问请联系商家\n            </view>\n          </view>\n          <image :src=\" cdnLink + 'images/refund-fail.png' \"></image>\n        </block>\n        <block v-if=\" baseInfo.auditStatus == 20 \"> \n          <view class=\"st-label\">\n          审核通过\n          \n            <view>到店已支付的订单，请联系商家线下退款\n            </view>\n          </view>\n          <image :src=\" cdnLink + 'images/refund-success.png' \"></image>\n        </block>\n      </view>\n      <view class=\"header\"> \n        <text>{{ baseInfo.drugstoreSkuList[0].drugstoreName }}\n        </text>\n        <image :data-phone=\" baseInfo.drugstoreSkuList[0].drugstoreTel \" catchtap=\"callPhone\" src=\"../noteImg/call-phone.png\"></image>\n      </view>\n      <block v-for=\"(item, key) in baseInfo.drugstoreSkuList[0].skus\" :key=\"key\">\n        <view class=\"pInfo\"> \n          <view class=\"pimg\">\n            <image :src=\"item.mainPhoto\"></image>\n          </view>\n          <view class=\"content\">   \n            <view class=\"name\">\n            {{item.skuName}} {{item.commonName}} {{item.skuSpec}}\n            </view>\n            <view class=\"second-kill-tag\" v-for=\"(tagItem, index) in  item.activityInfos \">\n            {{ tagItem.label }}\n          \n            </view>\n            <view class=\"flex_Box\">\n              <view class=\"number\">×{{item.skuNum}}\n              </view>\n            </view>\n            <view class=\"price\"> \n              <text v-if=\" item.price \">¥{{item.price }}\n              </text>\n              <text v-if=\" item.salePrice \" class=\"unline-view\">¥{{ item.salePrice }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </block>\n      <view class=\"common_section\">\n        <view class=\"cell order-number-cell\"> \n          <view class=\"cell_left\">\n          订单编号\n        \n          </view>\n          <view class=\"right\">  \n            <view>{{ baseInfo.orderNo }}\n            </view>\n            <view class=\"split-line\"></view>\n            <view class=\"cell-copy\" bindtap=\"copyCode\" :data-order-code=\" baseInfo.orderNo \">复制\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\">\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          支付方式\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.payMethodDesc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\">  \n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          申请类型\n        \n          </view>\n          <view class=\"right\">取消订单\n          </view>\n        </view>\n        <view class=\"cell\" data-type=\"applyReason\" catchtap=\"openSheet\"> \n          <view class=\"cell_left\">\n          取消原因\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.applyReason.desc }}\n          </view>\n        </view>\n        <view class=\"cell remark-cell\"> \n          <view class=\"cell_left\">取消说明\n          </view>\n          <view class=\"right zf-right-text bz-text-yz\">\n          {{ baseInfo.applyRemark }}\n        \n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\" v-if=\" baseInfo.auditStatus == 30 \">\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          商家驳回原因\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.actualRefundReason.desc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\" v-if=\" baseInfo.auditStatus == 20 \">\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          实际取消原因\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.actualRefundReason.desc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"footer\">  \n        <button :data-phone=\" baseInfo.drugstoreSkuList[0].drugstoreTel \" catchtap=\"callPhone\">商家电话\n        </button>\n        <button bindtap=\"handleContactService\">平台客服\n        </button>\n        <button v-if=\" baseInfo && baseInfo.cancelApplyTotal < 2 && baseInfo.auditStatus == 30 \" catchtap=\"toApplyPage\">申请取消\n        </button>\n      </view>\n    </view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n\n.container {\n  background: #F5F6FA;\n  padding-bottom: 140rpx;\n}\n\n.apply-st {\n  display: flex;\n  padding: 0 40rpx 0 30rpx;\n  justify-content: space-between;\n  height: 190rpx;\n}\n\n.apply-st .st-label {\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: #fff;\n  font-weight: 500;\n  font-size: 36rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.apply-st .st-label view {\n  font-size: 24rpx;\n  opacity: 0.8;\n  font-weight: 400;\n}\n\n.apply-st image {\n  width: 184rpx;\n  height: 184rpx;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: calc(100vw - 30rpx - 30rpx);\n  height: 90rpx;\n  background: #fff;\n  padding: 0 30rpx;\n}\n\n.header text:nth-child(1) {\n  font-size: 30rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #333333;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.header image {\n  width: 30rpx;\n  height: 30rpx;\n}\n\n.phcolor {\n  color: #999999;\n  font-weight: 400;\n}\n\n.pInfo {\n  width: 100%;\n  height: 230rpx;\n  background: #f9f9f9;\n  padding: 20rpx;\n  display: flex;\n  box-sizing: border-box;\n}\n\n.pimg {\n  position: relative;\n}\n\n.pInfo .pimg, .pInfo .pimg image {\n  width: 180rpx;\n  height: 180rpx;\n}\n\n.pInfo .content {\n  flex: 1;\n  margin-left: 26rpx;\n  height: 180rpx;\n  position: relative;\n}\n\n.pInfo .content .group_tag {\n  border: 1rpx solid #e4393b;\n  color: #e4393b;\n  padding: 0 10rpx;\n  height: 19px;\n  line-height: 19px;\n  font-size: 24rpx;\n  display: inline-block;\n  border-radius: 22rpx;\n  margin: 4px 0;\n}\n.pInfo .content .name .limit_tag {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n.pInfo .content .name, .pInfo .content .price {\n  font-size: 28rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.pInfo .content .flex_Box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n}\n\n.pInfo .content .number {\n  font-size: 28rpx;\n  color: #999;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.pInfo .content .price {\n  font-weight: 700;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 20px;\n  line-height: 20px;\n}\n\n.pInfo .content .price text {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 20rpx 23rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fbfbfb;\n  /* margin-bottom: 20rpx; */\n  flex-wrap: wrap;\n}\n\n.point-item {\n  font-size: 26rpx;\n  padding-left: 40rpx;\n  position: relative;\n  margin-bottom: 20rpx;\n}\n\n.point-item image {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  top: 5rpx;\n  left: 0;\n}\n\n.btn-group-box5 {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 90rpx;\n  line-height: 60rpx;\n  padding: 15rpx 23rpx;\n  background: #fff;\n  text-align: center;\n  border-top: 1rpx solid #EEEEEE;\n  margin-bottom: 20rpx;\n}\n\n.box5-btn {\n  box-sizing: border-box;\n  width: 50%;\n  position: relative;\n}\n\n.box5-btn image {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: sub;\n}\n\n.box5-btn text {\n  color: #333;\n  font-size: 30rpx;\n  margin-left: 10rpx;\n}\n\n.box5-btn:first-child {\n  border-right: 1rpx solid #ddd;\n}\n\n.bottomTip {\n  width: 100%;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-align: center;\n  height: 65rpx;\n  line-height: 65rpx;\n}\n\n.common_section {\n  padding: 0 26rpx;\n  margin-top: 20rpx;\n}\n\n.common_section .order-number-cell {\n  margin-top: 20rpx;\n}\n\n.order-number-cell .right {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n}\n\n.order-number-cell .right .split-line {\n  width: 2rpx;\n  height: 36rpx;\n  margin: 0rpx 20rpx;\n  background: #eeeeee;\n}\n\n.order-number-cell .right .cell-copy {\n  display: inline-block;\n  width: 80rpx;\n  height: 36rpx;\n  text-align: center;\n  line-height: 36rpx;\n  border-radius: 36rpx;\n  font-size: 20rpx;\n  border: 1rpx solid #eeeeee;\n}\n\n.common_section .cell {\n  padding: 0;\n  height: 80rpx;\n}\n\n.common_section .cell .cell_left {\n  color: #666;\n}\n\n.common_section .cell .cell_left text {\n  color: #FF2121;\n}\n\n.common_section .cell_left {\n  flex: 1;\n}\n\n.common_section .cell .cell_center {\n  color: #666;\n  font-size: 28rpx;\n  flex: 1;\n}\n\n.common_section .cell .cell_center textarea {\n  width: 100%;\n  height: 150rpx;\n  border: 2rpx solid #ccc;\n  padding: 10rpx;\n  box-sizing: border-box;\n}\n\n.common_section .cell .cell_center .count {\n  position: absolute;\n  bottom: 10rpx;\n  right: 10rpx;\n  text-align: right;\n}\n\n.common_section .arrow .right {\n  padding-right: 20rpx;\n  font-weight: 400 !important;\n  color: #999999;\n}\n\n.common_section .arrow::after {\n  right: 0;\n}\n\n.common_section .cell .picture {\n  width: 32rpx;\n  height: 27rpx;\n  margin-right: 8rpx;\n}\n\n/* 会员弹框 */\n\n.Member-alert-back {\n  background-color: #000;\n  opacity: 0.5;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n\n.Member-alert {\n  width: 520rpx;\n  height: auto;\n  position: absolute;\n  left: calc(50% - 260rpx);\n  top: 30%;\n  z-index: 3;\n}\n\n.Member-alert image {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.Member-text {\n  font-size: 28rpx;\n  color: #333;\n  padding: 30rpx;\n  background-color: #fff;\n}\n\n.Member-view {\n  padding: 0 30rpx 0 30rpx;\n  background-color: #fff;\n  padding-bottom: 20rpx;\n}\n\nradio .wx-radio-input.wx-radio-input-checked {\n  border: none;\n  background: #bc7b3d !important;\n}\n\n.Member-btn {\n  height: 90rpx;\n  padding: 0 30rpx 0 30rpx;\n  border-radius: 110rpx;\n  background-color: #bc7b3d;\n  text-align: center;\n  line-height: 90rpx;\n  color: #fff;\n  background: -webkit-linear-gradient(left, #d89352, #ba793b);\n  margin-top: 30rpx;\n}\n\n/* 邮寄 */\n\n.yj-box {\n  padding: 20rpx 24rpx 20rpx 24rpx;\n  display: flex;\n  background-color: #fff;\n  border-bottom: 1rpx solid rgba(238, 238, 238, 1);\n  margin-bottom: 20rpx;\n}\n\n.yj-box-nr {\n  width: calc(33% - 14rpx);\n  height: 100rpx;\n  text-align: center;\n  line-height: 100rpx;\n  color: #666;\n  font-size: 32rpx;\n  border-radius: 8px;\n  border: 1px solid rgba(238, 238, 238, 1);\n  position: relative;\n  margin-right: 22rpx;\n  overflow: hidden;\n}\n.yj-box .yj-box-nr:last-child{\n  margin-right: 0;\n}\n.yj-box-md {\n  display: inline-block;\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: sub;\n}\n\n.cell_center .name {\n  font-size: 32rpx;\n  color: #333;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 支付ui */\n\n.zf-right-text {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 100 !important;\n}\n\n.zf-zt-list {\n  margin-top: 20rpx;\n}\n.zf-zt-list .cell .right {\n  font-weight: 100 !important;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n\n.zf-zt-list .cell .red-font {\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: rgba(255, 33, 33, 1) !important;\n  font-weight: 500 !important;\n  font-size: 28rpx;\n}\n\n.bz-css {\n  margin-top: 0;\n  border-top: 1rpx solid #eee;\n}\n\n.bz-ps-box {\n  height: 80rpx;\n  background: rgba(250, 250, 250, 1);\n  line-height: 80rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 24rpx 0 24rpx;\n  margin-bottom: 20rpx;\n}\n\n.bz-text-yz {\n  max-width: 532rpx;\n  word-break: break-all;\n  text-align: left;\n  line-height: unset !important;\n  height: unset !important;\n  padding: 10rpx 0;\n}\n\n.bz-mr-text {\n  color: #999;\n}\n\n.bz-text-bt-box {\n  margin-bottom: 20rpx;\n}\n.bz-text-bt-box .bz-text-bt{\n  min-width: 200rpx;\n}\n.bz-text-bt-box .right{\n  flex: 1;\n  text-align: right;\n}\n.bz-text-bt text {\n  color: #ff3b30;\n}\n\n.bz-sf-box {\n  height: 120rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  border-bottom:1rpx solid #DDDDDD;\n  color: #666666;\n  font-size: 24rpx;\n  line-height: 120rpx;\n}\n\n.bz-sf-box-icon {\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: sub;\n  display: inline-block;\n  margin-top: -10rpx;\n}\n.bz-sf-box-name{\n  font-size: 32rpx;\n  color: #333333;\n  margin-left: 12rpx;\n  margin-right: 10rpx;\n}\n.page_fixed {\n  overflow: hidden;\n  position:fixed;\n}\n\n.second-kill-tag {\n  display: inline-block;\n  padding: 0 8rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  color: rgba(255,33,33,1);\n  line-height: 28rpx;\n  background:rgba(255,33,33,0.05);\n  border-radius: 2rpx;\n  border: 1rpx solid rgba(255,33,33,0.5);\n}\n\n.rel-price {\n  text-decoration: line-through;\n  margin-left: 10rpx;\n  font-size: 23rpx !important;\n  color: rgba(102, 102, 102, 1) !important;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  font-size: 20rpx!important;\n  color: #999!important;\n}\n\n.hot-price {\n  color: rgba(255, 33, 33, 1) !important;\n}\n\n.djk-view .btnOpen view {\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}\n\n.djk-view .btn-hui view {\n  background: #c6cad4;\n  color: #fff;\n}\n\n.djk-view .common_section .green {\n  color: #00B955;\n}\n\n.djk-view .yj-xz {\n  border-color: #00B955;\n}\n\n.concact-drugstore {\n  margin-top: 20rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  height: 90rpx;\n  line-height: 90rpx;\n  text-align: center;\n  background: #fff;\n}\n\n.concact-drugstore image {\n  vertical-align: sub;\n  width: 33rpx;\n  height: 32rpx;\n  margin-right: 10rpx;\n}\n\n.remark-view {\n  height: unset;\n}\n\n.remark-cell {\n  height: unset !important;\n  min-height: 80rpx;\n}\n\n.footer {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  color: #fff;\n  height: 120rpx;\n  background: #fff;\n}\n\n.footer button {\n  margin-top: calc((120rpx - 60rpx) / 2);\n  display: inline-block;\n  padding: 0 30rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #333333;\n  background: #fff;\n  border: 2rpx solid #cccccc;\n  border-radius: 32rpx;\n  float: right;\n  margin-right: 30rpx;\n}\n\n.grey-view {\n  color: #999999;\n  font-size: 28rpx;\n  margin-right: 21rpx;\n}\n\n.unline-view {\n  margin-left: 12rpx;\n  font-weight: 400;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #999999 !important;\n  font-size: 20rpx !important; \n  text-decoration: line-through !important;\n}\n\n/* 大健康 */\n.djk .apply-st {\n  background: linear-gradient(270deg,#00B955, #4fb1ff);\n}\n"},"convertDir/pages/note/patient/patientInfo/patientInfo":{"js":"export default {\n  data: function() {\n    return {\n      currentPatientId: '',\n      pageFrom: null\n    };\n  },\n  onLoad: function (options) {\n    this.data.pageFrom = options.pageFrom || ''\n    if (options.currentPatientId) {\n      this.data.currentPatientId = options.currentPatientId;\n    }\n    this.setData({\n      currentPatientId: this.data.currentPatientId,\n      pageFrom: this.data.pageFrom\n    })\n  }\n};\n","json":{"patientInfo":"/component/patientInfo/patientInfo"},"wxml":"\n  <view class=\"patientInfo-auto-container\"> \n    <navBar title-text=\"患者信息\" :showCapsule=\"true\"></navBar>\n    <patientInfo :pageFrom=\" pageFrom \" :currentPatientId=\" currentPatientId \"></patientInfo>\n  </view>","wxss":"/* pages/note//patient/patientInfo/patientInfo.wxss */\n"},"convertDir/pages/note/patient/patientInfoManage/patientInfoManage":{"js":"// pages/note//patient/patientInfoManage/patientInfoManage.js\nimport {\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      patientList: null,\n      patientSex: {\n        '0': '未知',\n        '1': '男',\n        '2': '女'\n      },\n      currentPatientId: null,\n      isSrc_whyb: getApp().globalData.src_whyb || '',\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  onLoad: function (options) {\n    this.setData({\n      slideButtons: [{\n        type: 'warn',\n        text: '删除',\n        extClass: 'test',\n        src: '/page/weui/cell/icon_del.svg', // icon的路径\n      }]\n    })\n    console.log(options);\n    if (options.currentPatientId) {\n      this.data.currentPatientId = options.currentPatientId;\n    }  \n  },\n  onShow: function () {\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n    this.getPatientList();\n  },\n  deletePatient(e) {\n    let patient = e.currentTarget.dataset.item;\n    if (patient.checked) {\n      Taro.showToast({\n        icon: 'none',\n        title: '已选中患者无法删除'\n      })\n      return false;\n    }\n    Taro.showModal({\n      content: '删除当前患者信息？',\n      confirmColor: getApp().globalData.mainColor,\n      success: (res) => {\n        if (res.confirm) {\n          ajax2('POST', 'api/userPatient/deleteUserPatient', {\n            id: patient.id,\n            userId: Taro.getStorageSync('userInfo').userId\n          }, (res) => {\n            if (res.data.code == 0) {\n              Taro.showToast({\n                icon: 'none',\n                title: res.data.msg\n              })\n              this.getPatientList();\n            }else {\n              Taro.showToast({\n                icon: 'none',\n                title: res.data.msg,\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n  getPatientList() {\n    ajax2('POST', 'api/userPatient/selectUserPatientList', {\n      userId: Taro.getStorageSync('userInfo').userId\n    }, (res) => {\n      if (res.data.code == 0) {\n        res.data.result.map(item => {\n          return item.checked = true && item.id == this.data.currentPatientId\n        })\n        this.setData({\n          patientList: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  toPatientInfo(e) {\n    let currentPatientId = e.currentTarget.dataset.id;\n    if (currentPatientId) {\n      Taro.navigateTo({\n        url: `/pages/note/patient/patientInfo/patientInfo?currentPatientId=${ currentPatientId }`\n      })\n    }else {\n      if (this.data.patientList.length < 10) {\n        Taro.navigateTo({\n          url: '/pages/note/patient/patientInfo/patientInfo'\n        })\n      }else{\n        Taro.showToast({\n          icon: 'none',\n          title: '添加患者不得超过10个'\n        })\n      }\n    }\n  },\n  selectPatient(e) {\n    console.log('select--', e.currentTarget.dataset.item);\n    let _pidcard = e.currentTarget.dataset.item.patientIDCard;\n    if (_pidcard.length == 0) {\n      let currentPatientId = e.currentTarget.dataset.item.id;\n      Taro.navigateTo({\n        url: `/pages/note/patient/patientInfo/patientInfo?currentPatientId=${ currentPatientId }`\n      })\n      return;\n    }\n    //只在填写问诊信息页面执行\n    if (this.data.currentPatientId) {\n      var pages = getCurrentPages();\n      var prevPage = pages[pages.length - 2];\n      prevPage.setData({\n        patientObj: e.currentTarget.dataset.item,\n        toChooseCoupon: true//选择返回不刷新下单详情\n      })\n      Taro.navigateBack({\n        delta: 1\n      })\n    }\n  }\n};","json":{"mp-slideview":"../../../../component/slideview/slideview","missingData-view":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"patientInfoManage-auto-container\">  \n    <navBar title-text=\"患者管理\" :showCapsule=\"true\"></navBar>\n    <view :class=\"[container,( isSrc_whyb ? 'djk-view' : '' )]\" v-if=\" patientList.length > 0 \"> \n      <view class=\"common_section section\">\n        <mp-slideview :buttons=\"slideButtons\" bindbuttontap=\"deletePatient\" :data-item=\" item \" v-for=\"(item, index) in  patientList \">\n          <view class=\"cell\" catchtap=\"selectPatient\" :data-item=\" item \">  \n            <view class=\"cell_left\" v-if=\" item.checked \">\n              <radio :checked=\" item.checked \"></radio>\n            </view>\n            <view class=\"cell_center\"> \n              <view>{{ item.patientName }}\n                <text>{{ patientSex[item.patientSex] }}\n                </text>\n                <text>{{ item.patientAge }}岁\n                </text>\n              </view>\n              <view v-if=\"item.patientIDCard.length == 0\" class=\"idcard_text\">身份信息不全，请点击补充\n              </view>\n            </view>\n            <view class=\"edit\" catchtap=\"toPatientInfo\" :data-id=\" item.id \">\n              <image src=\"../../../../pages/note/noteImg/edit-icon.png\" mode=\"widthFix\"></image>\n            </view>\n          </view>\n        </mp-slideview>\n      </view>\n      <view class=\"common_footer\"> \n        <view class=\"tips\" v-if=\" !currentPatientId \">每个账号最多可添加10个患者\n        </view>\n        <button bindtap=\"toPatientInfo\" :class=\"[( patientList.length >= 10 ? '' : 'active' )]\">添加患者信息\n        </button>\n      </view>\n    </view>\n    <missingData-view zhi=\"new1\" v-else-if=\" patientList.length <= 0 \" textval=\"暂无患者信息\" textval2=\"添加患者后可发起问医生服务\" buttonText=\"添加患者信息\" bind:action=\"toPatientInfo\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n  </view>","wxss":"/* pages/note//patient/patientInfoManage/patientInfoManage.wxss */\n@import '../../../../common/tableView.wxss';\npage {\n  background: #FFFFFF\n}\n.section {\n  padding-bottom: 170rpx;\n}\n\n.section .cell {\n  padding: 0 0 0 30rpx;\n}\n.section .cell:last-child:before {\n  border-bottom: 2rpx solid #EEEEEE;\n}\n\n.cell:last-child:before {\n  border: 0;\n}\n\n.section .cell .cell_center {\n  flex: 1;\n  font-size: 32rpx;\n  padding: 26rpx 0 26rpx 10rpx;\n  font-weight: bold\n}\n.section .cell .cell_center text {\n  font-size: 28rpx;\n  color: #666666;\n  margin-left: 14rpx;\n  font-weight: inherit\n}\n.section .cell .edit {\n  padding: 20rpx;\n}\n.section .cell .edit image{\n  width: 32rpx;\n  height: 32rpx;\n}\n.section .cell .idcard_text {\n  font-size: 24rpx;\n  color: #ff5f1b;\n}\n.common_footer .tips {\n  font-size: 26rpx;\n  color: #A9AEB7;\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n}"},"convertDir/pages/note/realNameRegister/realNameRegister":{"json":{"register":"/component/register/register"},"js":"// pages/realNameRegister/realNameRegister.js\nimport {\n  ajax\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n    };\n  },\n  onLoad: function (options) {\n    this.getUserCertification();\n  },\n  getUserCertification() {\n    ajax(\"get\", \"mimiapp/userCertification/getUserCertification\", {}, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          registerInfo: res.data.result\n        })\n      }\n    })\n  }\n};","wxml":"\n  <view class=\"realNameRegister-auto-container\"> \n    <navBar title-text=\"实名信息\" :showCapsule=\"true\"></navBar>\n    <register buttonType=\"2\" bind:success=\"changeStatus\" :userData=\" registerInfo \"></register>\n  </view>","wxss":"/* pages/realNameRegister/realNameRegister.wxss */\npage {\n  background: #FFFFFF\n}\n"},"convertDir/pages/note/refundDetail/refundDetail":{"js":"// pages/my/myDrug/applyRefund/applyRefund.js\nimport { cdnStaticResourceUrl, ajax2 } from \"../../../utils/util\";\nconst app = getApp();\n\nexport default {\n  data: function() {\n    return {\n      orderNo: '',\n      cdnLink: cdnStaticResourceUrl,\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      isIPX: app.globalData.isIPX,\n      showSheet: false,\n      sheetType: '',\n      applyType: null,\n      applyReason: null,\n      showModal: false,\n      baseInfo: {} // 页面基础数据\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.orderNo || options.payOnlineInStore) {\n      this.data.orderNo = options.orderNo;\n      this.data.payOnlineInStore = options.payOnlineInStore;\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      orderNo: this.data.orderNo,\n      payOnlineInStore: this.data.payOnlineInStore\n    }, function() {\n      this.getApplyRefundDetail();\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n    /**\n   * @description: 复制功能\n   * @return: void\n   */\n  copyCode(e) {\n    let orderCode = e.currentTarget.dataset.orderCode;\n    Taro.setClipboardData({\n      data: orderCode,\n      success(res) {\n        Taro.showToast({\n          title: '订单编号复制成功',\n          icon: 'none',\n          mask: true,\n          duration: 2000\n        })\n      }\n    })\n  },\n    /**\n   * @description 退款详情基础数据\n   */\n  getApplyRefundDetail() {\n    Taro.showLoading();\n    let apiUrl =  this.data.payOnlineInStore == 1 ? 'api/ykq/order/r/refund/apply/detail' : 'api/ykq/order/r/o2o/refund/apply/detail';\n    \n    ajax2('post', apiUrl, {\n      orderNo: this.data.orderNo\n    }, ({ data } = { data: {} }) => {\n      Taro.hideLoading();\n      if (data.code == 0) {\n       // 请求成功\n       console.log(data);\n       this.setData({\n         baseInfo: data.result\n       });\n      } else {\n        // code不等于0\n        Taro.showToast({\n          title: data.msg || '数据异常',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: err.msg || '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * @description: 平台客服\n   * @return: void\n   */\n  handleContactService() {\n    Taro.navigateTo({\n      url: '/pages/onlineGoods/contactService/contactService'\n    })\n  },\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  },\n  //目标位置电话\n  callPhone: function(e) {\n    Taro.makePhoneCall({\n      phoneNumber: e.currentTarget.dataset.phone\n    })\n  },\n  toApplyPage() {\n    Taro.navigateTo({\n      url: `/pages/note/applyRefund/applyRefund?orderNo=${ this.data.orderNo }&payOnlineInStore=${ this.data.payOnlineInStore }`,\n    })\n  }\n};\n","wxml":"\n  <view class=\"refundDetail-auto-container\"> \n    <navBar title-text=\"退款详情\"></navBar>\n    <view :class=\"[container,( isDjk ? 'djk' : '' )]\" v-if=\" !showSheet \">        \n      <view class=\"apply-st theme-bg\">  \n        <block v-if=\" baseInfo.auditStatus == 10 \"> \n          <view class=\"st-label\">\n          商家审核中\n          \n            <view wx:if=\"payOnlineInStore == 1\">请与商家沟通一致后将商品送回店内\n            </view>\n          </view>\n          <image :src=\" cdnLink + 'images/refund-review.png' \"></image>\n        </block>\n        <block v-if=\" baseInfo.auditStatus == 30 \"> \n          <view class=\"st-label\">\n          审核驳回\n          \n            <view>如有疑问请联系商家\n            </view>\n          </view>\n          <image :src=\" cdnLink + 'images/refund-fail.png' \"></image>\n        </block>\n        <block v-if=\" baseInfo.auditStatus == 20 \"> \n          <view class=\"st-label\">\n          审核通过\n          \n            <view>审核通过后，货款2小时内返回到原付款账户\n            </view>\n          </view>\n          <image :src=\" cdnLink + 'images/refund-success.png' \"></image>\n        </block>\n      </view>\n      <view class=\"header\"> \n        <text>{{ baseInfo.drugstoreSkuList[0].drugstoreName }}\n        </text>\n        <image :data-phone=\" baseInfo.drugstoreSkuList[0].drugstoreTel \" catchtap=\"callPhone\" src=\"../noteImg/call-phone.png\"></image>\n      </view>\n      <block v-for=\"(item, key) in baseInfo.drugstoreSkuList[0].skus\" :key=\"key\">\n        <view class=\"pInfo\"> \n          <view class=\"pimg\">\n            <image :src=\"item.mainPhoto\"></image>\n          </view>\n          <view class=\"content\">   \n            <view class=\"name\">\n            {{item.skuName}} {{item.commonName}} {{item.skuSpec}}\n            </view>\n            <view class=\"second-kill-tag\" v-for=\"(tagItem, index) in  item.activityInfos \">\n            {{ tagItem.label }}\n          \n            </view>\n            <view class=\"flex_Box\">\n              <view class=\"number\">×{{item.skuNum}}\n              </view>\n            </view>\n            <view class=\"price\"> \n              <text v-if=\" item.price \">¥{{item.price }}\n              </text>\n              <text v-if=\" item.salePrice \" class=\"unline-view\">¥{{ item.salePrice }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </block>\n      <view class=\"common_section\">\n        <view class=\"cell order-number-cell\"> \n          <view class=\"cell_left\">\n          订单编号\n        \n          </view>\n          <view class=\"right\">  \n            <view>{{ baseInfo.orderNo }}\n            </view>\n            <view class=\"split-line\"></view>\n            <view class=\"cell-copy\" bindtap=\"copyCode\" :data-order-code=\" baseInfo.orderNo \">复制\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\">\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          支付方式\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.payMethodDesc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list remark-view\">   \n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          申请类型\n        \n          </view>\n          <view class=\"right\"> {{ baseInfo.applyType == 10 ? '仅退款' : '退货退款' }}\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          退款原因\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.applyReason.desc }}\n          </view>\n        </view>\n        <view class=\"cell\">   \n          <view class=\"cell_left\">申请退款金额\n          </view>\n          <view class=\"grey-view\" v-if=\" payOnlineInStore !== 1 && baseInfo.applyRefundDeliveryAmountDesc && baseInfo.applyRefundDeliveryAmountDesc !== '0.00' && (baseInfo.applyReason.val == 110 || baseInfo.applyReason.val == 120 || baseInfo.applyReason.val == 130) \">扣除配送费用{{ '￥' + baseInfo.applyRefundDeliveryAmountDesc }}元\n          </view>\n          <view class=\"grey-view\" v-if=\" baseInfo.applyRefundRedBagAmountDesc && baseInfo.applyRefundRedBagAmountDesc != '0.00' \">\n          扣除红包{{ baseInfo.applyRefundRedBagAmountDesc }}元\n        \n          </view>\n          <view v-if=\" baseInfo.applyRefundAmountDesc \" class=\"right zf-right-text red-font\">\n          {{ '￥' + baseInfo.applyRefundAmountDesc }}\n        \n          </view>\n        </view>\n        <view class=\"cell remark-cell\" v-if=\" baseInfo.applyRemark \"> \n          <view class=\"cell_left\">退款说明\n          </view>\n          <view class=\"right zf-right-text bz-text-yz\">\n          {{ baseInfo.applyRemark }}\n        \n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list\" v-if=\" baseInfo.auditStatus == 20 \">  \n        <view class=\"cell\">   \n          <view class=\"cell_left\">实际退款金额\n          </view>\n          <view class=\"grey-view\" v-if=\" baseInfo && (baseInfo.actualRefundAmountDesc < baseInfo.applyRefundAmountDesc) && baseInfo.applyRefundDeliveryAmountDesc && baseInfo.applyRefundDeliveryAmountDesc !== '0.00' \">扣除配送费用{{ '￥' + baseInfo.applyRefundDeliveryAmountDesc }}元\n          </view>\n          <view class=\"grey-view\" v-if=\" baseInfo && (baseInfo.actualRefundAmountDesc < baseInfo.applyRefundAmountDesc) && baseInfo.applyRefundRedBagAmountDesc && baseInfo.applyRefundRedBagAmountDesc !== '0.00' \">\n          扣除红包{{ baseInfo.applyRefundRedBagAmountDesc }}元\n        \n          </view>\n          <view v-if=\" baseInfo.actualRefundAmountDesc \" class=\"right zf-right-text red-font\">\n          {{ '￥' + baseInfo.actualRefundAmountDesc }}\n        \n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          实际退款类型\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.actualRefundTypeDesc }}\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          实际退款原因\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.actualRefundReason.desc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section zf-zt-list\" v-if=\" baseInfo.auditStatus == 30 \"> \n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          商家驳回类型\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.actualRefundTypeDesc }}\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"cell_left\">\n          商家驳回原因\n        \n          </view>\n          <view class=\"right\">{{ baseInfo.actualRefundReason.desc }}\n          </view>\n        </view>\n      </view>\n      <view class=\"footer\">  \n        <button :data-phone=\" baseInfo.drugstoreSkuList[0].drugstoreTel \" catchtap=\"callPhone\">商家电话\n        </button>\n        <button catchtap=\"handleContactService\">平台客服\n        </button>\n        <button v-if=\" baseInfo && baseInfo.refundApplyTotal < 2 && baseInfo.auditStatus == 30 \" catchtap=\"toApplyPage\">申请退款\n        </button>\n      </view>\n    </view>\n  </view>","json":{},"wxss":"@import '../../../common/tableView.wxss';\n\n.container {\n  background: #F5F6FA;\n  padding-bottom: 140rpx;\n}\n\n.apply-st {\n  display: flex;\n  padding: 0 40rpx 0 30rpx;\n  justify-content: space-between;\n  height: 190rpx;\n}\n\n.apply-st .st-label {\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: #fff;\n  font-weight: 500;\n  font-size: 36rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.apply-st .st-label view {\n  font-size: 24rpx;\n  opacity: 0.8;\n  font-weight: 400;\n}\n\n.apply-st image {\n  width: 184rpx;\n  height: 184rpx;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: calc(100vw - 30rpx - 30rpx);\n  height: 90rpx;\n  background: #fff;\n  padding: 0 30rpx;\n}\n\n.header text:nth-child(1) {\n  font-size: 30rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #333333;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.header image {\n  width: 30rpx;\n  height: 30rpx;\n}\n\n.phcolor {\n  color: #999999;\n  font-weight: 400;\n}\n\n.pInfo {\n  width: 100%;\n  height: 230rpx;\n  background: #f9f9f9;\n  padding: 20rpx;\n  display: flex;\n  box-sizing: border-box;\n}\n\n.pimg {\n  position: relative;\n}\n\n.pInfo .pimg, .pInfo .pimg image {\n  width: 180rpx;\n  height: 180rpx;\n}\n\n.pInfo .content {\n  flex: 1;\n  margin-left: 26rpx;\n  height: 180rpx;\n  position: relative;\n}\n\n.pInfo .content .group_tag {\n  border: 1rpx solid #e4393b;\n  color: #e4393b;\n  padding: 0 10rpx;\n  height: 19px;\n  line-height: 19px;\n  font-size: 24rpx;\n  display: inline-block;\n  border-radius: 22rpx;\n  margin: 4px 0;\n}\n.pInfo .content .name .limit_tag {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n.pInfo .content .name, .pInfo .content .price {\n  font-size: 28rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.pInfo .content .flex_Box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n}\n\n.pInfo .content .number {\n  font-size: 28rpx;\n  color: #999;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.pInfo .content .price {\n  font-weight: 700;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 20px;\n  line-height: 20px;\n}\n\n.pInfo .content .price text {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 20rpx 23rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fbfbfb;\n  /* margin-bottom: 20rpx; */\n  flex-wrap: wrap;\n}\n\n.point-item {\n  font-size: 26rpx;\n  padding-left: 40rpx;\n  position: relative;\n  margin-bottom: 20rpx;\n}\n\n.point-item image {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  top: 5rpx;\n  left: 0;\n}\n\n.btn-group-box5 {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 90rpx;\n  line-height: 60rpx;\n  padding: 15rpx 23rpx;\n  background: #fff;\n  text-align: center;\n  border-top: 1rpx solid #EEEEEE;\n  margin-bottom: 20rpx;\n}\n\n.box5-btn {\n  box-sizing: border-box;\n  width: 50%;\n  position: relative;\n}\n\n.box5-btn image {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: sub;\n}\n\n.box5-btn text {\n  color: #333;\n  font-size: 30rpx;\n  margin-left: 10rpx;\n}\n\n.box5-btn:first-child {\n  border-right: 1rpx solid #ddd;\n}\n\n.bottomTip {\n  width: 100%;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-align: center;\n  height: 65rpx;\n  line-height: 65rpx;\n}\n\n.common_section {\n  padding: 0 26rpx;\n  margin-top: 20rpx;\n}\n\n.order-number-cell .right {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  font-size: 28rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n}\n\n.order-number-cell .right .split-line {\n  width: 2rpx;\n  height: 36rpx;\n  margin: 0rpx 20rpx;\n  background: #eeeeee;\n}\n\n.order-number-cell .right .cell-copy {\n  display: inline-block;\n  width: 80rpx;\n  height: 36rpx;\n  text-align: center;\n  line-height: 36rpx;\n  border-radius: 36rpx;\n  font-size: 20rpx;\n  border: 1rpx solid #eeeeee;\n}\n\n.common_section .cell {\n  padding: 0;\n  height: 80rpx;\n}\n\n.common_section .cell .cell_left {\n  color: #666;\n}\n\n.common_section .cell .cell_left text {\n  color: #FF2121;\n}\n\n.common_section .cell_left {\n  flex: 1;\n}\n\n.common_section .cell .cell_center {\n  color: #666;\n  font-size: 28rpx;\n  flex: 1;\n}\n\n.common_section .cell .cell_center textarea {\n  width: 100%;\n  height: 150rpx;\n  border: 2rpx solid #ccc;\n  padding: 10rpx;\n  box-sizing: border-box;\n}\n\n.common_section .cell .cell_center .count {\n  position: absolute;\n  bottom: 10rpx;\n  right: 10rpx;\n  text-align: right;\n}\n\n.common_section .arrow .right {\n  padding-right: 20rpx;\n  font-weight: 400 !important;\n  color: #999999;\n}\n\n.common_section .arrow::after {\n  right: 0;\n}\n\n.common_section .cell .picture {\n  width: 32rpx;\n  height: 27rpx;\n  margin-right: 8rpx;\n}\n\n/* 会员弹框 */\n\n.Member-alert-back {\n  background-color: #000;\n  opacity: 0.5;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n\n.Member-alert {\n  width: 520rpx;\n  height: auto;\n  position: absolute;\n  left: calc(50% - 260rpx);\n  top: 30%;\n  z-index: 3;\n}\n\n.Member-alert image {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.Member-text {\n  font-size: 28rpx;\n  color: #333;\n  padding: 30rpx;\n  background-color: #fff;\n}\n\n.Member-view {\n  padding: 0 30rpx 0 30rpx;\n  background-color: #fff;\n  padding-bottom: 20rpx;\n}\n\nradio .wx-radio-input.wx-radio-input-checked {\n  border: none;\n  background: #bc7b3d !important;\n}\n\n.Member-btn {\n  height: 90rpx;\n  padding: 0 30rpx 0 30rpx;\n  border-radius: 110rpx;\n  background-color: #bc7b3d;\n  text-align: center;\n  line-height: 90rpx;\n  color: #fff;\n  background: -webkit-linear-gradient(left, #d89352, #ba793b);\n  margin-top: 30rpx;\n}\n\n/* 邮寄 */\n\n.yj-box {\n  padding: 20rpx 24rpx 20rpx 24rpx;\n  display: flex;\n  background-color: #fff;\n  border-bottom: 1rpx solid rgba(238, 238, 238, 1);\n  margin-bottom: 20rpx;\n}\n\n.yj-box-nr {\n  width: calc(33% - 14rpx);\n  height: 100rpx;\n  text-align: center;\n  line-height: 100rpx;\n  color: #666;\n  font-size: 32rpx;\n  border-radius: 8px;\n  border: 1px solid rgba(238, 238, 238, 1);\n  position: relative;\n  margin-right: 22rpx;\n  overflow: hidden;\n}\n.yj-box .yj-box-nr:last-child{\n  margin-right: 0;\n}\n.yj-box-md {\n  display: inline-block;\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: sub;\n}\n\n.cell_center .name {\n  font-size: 32rpx;\n  color: #333;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 支付ui */\n\n.zf-right-text {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 100 !important;\n}\n\n.zf-zt-list {\n  margin-top: 20rpx;\n}\n.zf-zt-list .cell .right {\n  font-weight: 100 !important;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n\n.zf-zt-list .cell .red-font {\n  font-family: PingFangSC, PingFangSC-Medium;\n  color: rgba(255, 33, 33, 1) !important;\n  font-weight: 500 !important;\n  font-size: 28rpx;\n}\n\n.bz-css {\n  margin-top: 0;\n  border-top: 1rpx solid #eee;\n}\n\n.bz-ps-box {\n  height: 80rpx;\n  background: rgba(250, 250, 250, 1);\n  line-height: 80rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 24rpx 0 24rpx;\n  margin-bottom: 20rpx;\n}\n\n.bz-text-yz {\n  max-width: 532rpx;\n  word-break: break-all;\n  text-align: left;\n  line-height: unset !important;\n  height: unset !important;\n  padding: 10rpx 0;\n}\n\n.bz-mr-text {\n  color: #999;\n}\n\n.bz-text-bt-box {\n  margin-bottom: 20rpx;\n}\n.bz-text-bt-box .bz-text-bt{\n  min-width: 200rpx;\n}\n.bz-text-bt-box .right{\n  flex: 1;\n  text-align: right;\n}\n.bz-text-bt text {\n  color: #ff3b30;\n}\n\n.bz-sf-box {\n  height: 120rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  border-bottom:1rpx solid #DDDDDD;\n  color: #666666;\n  font-size: 24rpx;\n  line-height: 120rpx;\n}\n\n.bz-sf-box-icon {\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: sub;\n  display: inline-block;\n  margin-top: -10rpx;\n}\n.bz-sf-box-name{\n  font-size: 32rpx;\n  color: #333333;\n  margin-left: 12rpx;\n  margin-right: 10rpx;\n}\n.page_fixed {\n  overflow: hidden;\n  position:fixed;\n}\n\n.second-kill-tag {\n  display: inline-block;\n  padding: 0 8rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  color: rgba(255,33,33,1);\n  line-height: 28rpx;\n  background:rgba(255,33,33,0.05);\n  border-radius: 2rpx;\n  border: 1rpx solid rgba(255,33,33,0.5);\n}\n\n.rel-price {\n  text-decoration: line-through;\n  margin-left: 10rpx;\n  font-size: 23rpx !important;\n  color: rgba(102, 102, 102, 1) !important;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  font-size: 20rpx!important;\n  color: #999!important;\n}\n\n.hot-price {\n  color: rgba(255, 33, 33, 1) !important;\n}\n\n.djk-view .btnOpen view {\n  background: linear-gradient(270deg,#00B955, #4f90ff);\n}\n\n.djk-view .btn-hui view {\n  background: #c6cad4;\n  color: #fff;\n}\n\n.djk-view .common_section .green {\n  color: #00B955;\n}\n\n.djk-view .yj-xz {\n  border-color: #00B955;\n}\n\n.concact-drugstore {\n  margin-top: 20rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  height: 90rpx;\n  line-height: 90rpx;\n  text-align: center;\n  background: #fff;\n}\n\n.concact-drugstore image {\n  vertical-align: sub;\n  width: 33rpx;\n  height: 32rpx;\n  margin-right: 10rpx;\n}\n\n.remark-view {\n  height: unset;\n}\n\n.remark-cell {\n  height: unset !important;\n  min-height: 80rpx;\n}\n\n.footer {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  color: #fff;\n  height: 120rpx;\n  background: #fff;\n}\n\n.footer button {\n  margin-top: calc((120rpx - 60rpx) / 2);\n  display: inline-block;\n  padding: 0 30rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #333333;\n  background: #fff;\n  border: 2rpx solid #cccccc;\n  border-radius: 32rpx;\n  float: right;\n  margin-right: 30rpx;\n}\n\n.grey-view {\n  color: #999999;\n  font-size: 28rpx;\n  margin-right: 21rpx;\n}\n\n.unline-view {\n  margin-left: 12rpx;\n  font-weight: 400;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #999999 !important;\n  font-size: 20rpx !important; \n  text-decoration: line-through !important;\n}\n\n/* 大健康 */\n.djk .apply-st {\n  background: linear-gradient(270deg,#00B955, #4fb1ff);\n}\n"},"convertDir/pages/note/register/register":{"json":{"halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxss":"/* pages/note//register/register.wxss */\n@import '../../../common/tableView.wxss';\n\n.black, input {\n  color: #111334!important;\n}\n\n.gray {\n  color: #C5C9D5\n}\n\n.tips {\n  color: #00b955;\n  background: #EBF5FF;\n  padding: 18rpx 0;\n  text-align: center;\n  font-size: 28rpx;\n}\n\n.top-box {\n  padding: 0 32rpx;\n  overflow-y: scroll;\n}\n\n.top-box .flex-cell {\n  color: #111334;\n  font-size: 28rpx;\n  height: 96rpx;\n  line-height: 96rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.top-box .flex-cell .add text {\n  font-size: 40rpx;\n  font-weight: bold;\n  margin-right: 10rpx;\n}\n\n.top-box .flex-list {\n  display: flex;\n}\n\n.top-box .flex-list .box {\n  flex-shrink: 0;\n  width: 250rpx;\n  border: 1rpx solid #eff0f5;\n  border-radius: 12rpx;\n  font-size: 24rpx;\n  color: #9D9FB8;\n  position: relative;\n  padding: 48rpx 24rpx 16rpx;\n  box-sizing: border-box;\n  margin-right: 20rpx;\n}\n\n.top-box .flex-list .box.active {\n  background: rgba(0,122,255,0.08);\n  border: 3rpx solid #00b955;\n}\n\n.top-box .flex-list .box:last-child {\n  margin: 0\n}\n\n.top-box .flex-list .box .tag {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 32rpx;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n  font-size: 22rpx;\n  background: #EFEFF2;\n  color: #9D9FB8;\n  border-radius: 8rpx 0 8rpx 0;\n}\n\n.top-box .flex-list .box .tag.active {\n  background: #00b955;\n  color: #FFFFFF;\n}\n\n.top-box .flex-list .box image {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  top: 12rpx;\n  right: 12rpx;\n}\n\n.top-box .flex-list .box .name {\n  font-size: 32rpx;\n  color: #111334;\n}\n\n.common_section .cell {\n  padding: 24rpx 0;\n  font-size: 28rpx;\n  margin: 0 32rpx;\n  flex-wrap: wrap;\n}\n\n.common_section .cell .desc {\n  width: 100%;\n  background: #F5F6FA;\n  border-radius: 12rpx;\n  padding: 24rpx 24rpx 0;\n  margin-top: 32rpx;\n}\n.common_section .cell .desc textarea {\n  height: 138rpx;\n  width: 100%;\n}\n\n.common_section .cell .desc text {\n  display: block;\n  height: 78rpx;\n  line-height: 78rpx;\n  color: #9D9FB8;\n  font-size: 24rpx;\n  text-align: right;\n}\n\n.common_section .cell .cell-right {\n  text-align: right;\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.common_section .cell-right .cell-arrow {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.common_section .cell-right label {\n  display: flex;\n  margin-left: 30rpx;\n}\n\n.common_section .cell-right input {\n  flex: 1\n}\n\n.submit_btns {\n  padding: 32rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n  background: #F5F6FA;\n}\n\n.submit_btns button {\n  background: #C6CAD4;\n  color: #FFFFFF;\n  border-radius: 88rpx;\n}\n\n.temp-dialog {\n  z-index: 100;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background: #FFFFFF;\n  border-radius: 24rpx 24rpx 0 0;\n  height: 635rpx;\n}\n\n.temp-dialog .btns {\n  display: flex;\n  align-items: center;\n  height: 107rpx;\n  border-bottom: 1rpx solid #E5E5E5;\n  justify-content: center;\n}\n\n.temp-dialog .btns text {\n  font-size: 36rpx;\n  font-weight: bold;\n  flex: 1;\n  text-align: center;\n}\n\n.temp-dialog .btns .btn {\n  font-size: 30rpx;\n  padding: 0 32rpx\n}\n\n.weui-half-screen-dialog__bd {\n  padding: 0!important;\n}\n\n.edit-info .red {\n  color: #F93A4A;\n  background: #FFF5F6;\n}\n\n.edit-info .btns {\n  display: flex;\n  margin: 32rpx;\n}\n\n.edit-info .btns .btn {\n  flex: 1;  \n  height: 88rpx;\n  line-height: 88rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #00b955;\n  border-radius: 50rpx;\n  border: 1rpx solid #00b955;\n  text-align: center;\n}\n\n.edit-info .btns .btn.save {\n  width: 424rpx;\n  margin-left: 24rpx;\n  background: #00b955;\n  color: #FFFFFF;\n  flex-shrink: 0;\n  flex: none;  \n}\n\n.edit-info .btns .btn-bg {\n  color: #FFFFFF\n}\n\n\ncheckbox .wx-checkbox-input {\n  border-radius: 4rpx;\n}","js":"// pages/note//register/register.js\nimport {\n  ajax2\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      openTempDialog: false,\n      editInfo: false,\n      symptomList: [\n        { \"id\":0, \"name\":\"发热\"},\n        { \"id\":1, \"name\":\"咳嗽\"},\n        { \"id\":2, \"name\":\"胸闷\"},\n        { \"id\":3, \"name\":\"其他\"}\n      ],\n      registerInfo: {\n        patientName: '',\n        patientIdCard: '',\n        phone: '',\n        address: '',\n        temperature: '',\n        symptom: [],\n        hasBeenDangerousArea: false\n      },\n      tempValue: [1, 5, 0],\n      pageFrom: '',\n      symptomDesc: '',\n      isOther: false,\n      patientSex: {\n        '0': '未知',\n        '1': '男',\n        '2': '女'\n      },\n      selectedPatientId: '',\n      editPatient: {},\n      patientList: [],\n      optionPatientId: '',\n      scrollViewId: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.pageFrom = options.pageFrom || '';\n\n    if(options.registerInfo) {\n      let registerInfo = JSON.parse(options.registerInfo);\n      this.data.selectedPatientId = registerInfo.id || '';\n      //用于区分是否接受到上个页面参数 prescriberId 处方用药人\n      if( options.prescriberId ) this.data.optionPatientId = options.prescriberId;\n      this.data.editPatient = registerInfo;\n      if(this.data.pageFrom != 'orderDetail') this.getPatientList();\n      //处理预览数据\n      if(registerInfo.symptom.length > 0) this.previewData(registerInfo);\n\n      this.data.registerInfo = registerInfo;\n    }\n    \n    this.setData({\n      registerInfo: this.data.registerInfo,\n      pageFrom: this.data.pageFrom,\n      selectedPatientId: this.data.selectedPatientId,\n      editPatient: this.data.editPatient\n    })\n  },\n  /**\n   * @description: 处理预览数据\n   * @return: void\n   */\n  previewData(registerInfo) {\n    this.data.symptomList.forEach(x =>{\n      registerInfo.symptom.forEach(y=>{\n        if(x.id == y.id) x.checked = true;\n        if(y.desc) this.data.symptomDesc = y.desc;\n        if(y.id == 3) this.data.isOther = true;\n      })\n    })\n\n    this.setData({\n      registerInfo,\n      symptomList: this.data.symptomList,\n      symptomDesc: this.data.symptomDesc,\n      isOther: this.data.isOther\n    })\n  },\n  /**\n   * @description: 获取用药人列表\n   * @return: void\n   */\n  getPatientList() {\n    ajax2('POST', 'api/userPatient/selectUserPatientList', {\n      userId: Taro.getStorageSync('userInfo').userId\n    }, (res) => {\n      if (res.data.code == 0) {\n        res.data.result.forEach(item => {\n          if(this.data.registerInfo.id && item.id == this.data.selectedPatientId) {\n            this.data.registerInfo.patientName = item.patientName;\n            this.data.registerInfo.patientIdCard = item.patientIDCard || ' ';\n            this.data.registerInfo.authStatus = item.authStatus;\n          }\n        })  \n\n        this.setData({\n          patientList: res.data.result,\n          registerInfo: this.data.registerInfo,\n          scrollViewId: `box${ this.data.selectedPatientId }`\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  deletePatient() {\n    if (this.data.editPatient.id == this.data.selectedPatientId) {\n      Taro.showToast({\n        icon: 'none',\n        title: '已选中患者无法删除'\n      })\n      return false;\n    }\n    Taro.showModal({\n      content: '删除当前患者信息？',\n      confirmColor: getApp().globalData.mainColor,\n      success: (res) => {\n        if (res.confirm) {\n          ajax2('POST', 'api/userPatient/deleteUserPatient', {\n            id: this.data.editPatient.id,\n            userId: Taro.getStorageSync('userInfo').userId\n          }, (res) => {\n            if (res.data.code == 0) {\n              Taro.showToast({\n                icon: 'none',\n                title: res.data.msg\n              })\n              this.getPatientList();\n              this.setData({\n                editInfo: false,\n                optionPatientId: '',\n                editPatient: {}\n              })\n            }else {\n              Taro.showToast({\n                icon: 'none',\n                title: res.data.msg,\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n  /**\n   * @description: 选择用药人卡片\n   * @return: void\n   */\n  choosePatient(e) {\n    let item = e.currentTarget.dataset.item;\n    //optionPatientId存在代表确认下单页面默认选择了用药人，不可变更\n    if(this.data.optionPatientId && this.data.optionPatientId != item.id) {\n      Taro.showToast({\n        title: '用药人信息和处方信息用药人保持一致，不能选择其他用药人',\n        icon: 'none'\n      })\n      return false;\n    }\n\n    this.data.registerInfo.id = item.id;\n    this.data.registerInfo.patientName = item.patientName;\n    this.data.registerInfo.patientIdCard = item.patientIDCard || ' ';\n    this.data.registerInfo.authStatus = item.authStatus;\n    this.setData({\n      selectedPatientId: item.id,\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 获取姓名信息\n   * @return: void\n   */\n  getName(e){\n    this.data.registerInfo.patientName = e.detail.value;\n    this.setData({\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 获取弹窗姓名信息\n   * @return: void\n   */\n  getPatientName(e) {\n    this.data.editPatient.patientName = e.detail.value;\n    this.setData({\n      editPatient: this.data.editPatient\n    })\n  },\n  /**\n   * @description: 获取身份信息\n   * @return: void\n   */\n  getIdCard(e){\n    this.data.registerInfo.patientIdCard = e.detail.value;\n    this.setData({\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 获取弹窗身份信息\n   * @return: void\n   */\n  getPatientIdCard(e) {\n    this.data.editPatient.patientIdCard = e.detail.value;\n    this.setData({\n      editPatient: this.data.editPatient\n    })\n  },\n  /**\n   * @description: 获取手机号\n   * @return: void\n   */\n  getPhone(e){\n    this.data.registerInfo.phone = e.detail.value;\n    this.setData({\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 获取地址信息\n   * @return: void\n   */\n  getAddress(e){\n    this.data.registerInfo.address = e.detail.value;\n    this.setData({\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 获取症状信息\n   * @return: void\n   */\n  getSymptom(e){\n    let valueList = e.detail.value;\n    this.data.registerInfo.symptom = [];\n    this.data.symptomList.forEach(x => x.checked = false);\n    this.data.isOther = false;\n\n    valueList.forEach(x =>{\n      this.data.symptomList.forEach(y=>{\n        if(x == y.id ) {\n          this.data.registerInfo.symptom.push(this.data.symptomList[x]);\n          this.data.symptomList[x].checked = true;\n          if(x == 3) this.data.isOther = true;\n        }\n      })\n    })\n    this.setData({\n      registerInfo: this.data.registerInfo,\n      symptomList: this.data.symptomList,\n      isOther: this.data.isOther\n    })\n  },\n  /**\n   * @description: 打开体温选择\n   * @return: void\n   */\n  getOtherDesc(e) {\n    this.data.registerInfo.symptom.forEach(item=> {\n      if(item.id == 3) item.desc = e.detail.value;\n    })\n    this.data.symptomDesc = e.detail.value;\n    this.setData({\n      symptomDesc: this.data.symptomDesc,\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 打开体温选择\n   * @return: void\n   */\n  openTemp() {\n    this.setData({\n      openTempDialog: true\n    })\n  },\n  /**\n   * @description: 获取体温选项\n   * @return: void\n   */\n  getTempValue(e) {\n    this.data.tempValue = e.detail.value;\n  },\n  /**\n   * @description: 获取是否危险地区历史\n   * @return: void\n   */\n  getDangerousArea(e) {\n    this.data.registerInfo.hasBeenDangerousArea = e.detail.value == 1 ? true : false;\n    this.setData({\n      registerInfo: this.data.registerInfo\n    })\n  },\n  /**\n   * @description: 关闭体温选项弹窗\n   * @return: void\n   */\n  closeTempDialog() {\n    this.setData({\n      openTempDialog: false\n    })\n  },\n  /**\n   * @description: 确认体温数据\n   * @return: void\n   */\n  checkTempvalue() {\n    this.data.registerInfo.temperature = `${ this.data.tempValue[0]+35 }.${ this.data.tempValue[1]}°C`;\n    this.setData({\n      registerInfo: this.data.registerInfo,\n      openTempDialog: false,\n      tempValue: this.data.tempValue\n    })\n  },\n  /**\n   * @description: 关闭患者编辑窗口\n   * @return: void\n   */\n  closeEditInfo(){\n    this.setData({\n      editInfo: false\n    })\n  },\n  /**\n   * @description: 打开患者编辑窗口\n   * @return: void\n   */\n  openEditInfo(e){\n    let value = e.currentTarget.dataset.item || {}\n    if(!value.id && this.data.patientList.length == 10) {\n      Taro.showToast({\n        title: '每个账号最多可添加十个用药人',\n        icon: 'none'\n      })\n      return false;\n    }\n\n    //重命名\n    value.patientIdCard = value.patientIDCard;\n    this.setData({\n      editInfo: true,\n      editPatient: value\n    })\n  },\n  /**\n   * @description: 订单提交\n   * @return: void\n   */\n  formSubmit(){\n    // let target = this.data.patientList.length > 0 ? this.data.editPatient : this.data.registerInfo;\n    let target = this.data.editPatient.id ? this.data.editPatient : this.data.registerInfo;\n    let nameReg = /^[\\u4e00-\\u9fa5]{2,4}$/;\n    console.log(!nameReg.test(target.patientName), target.patientName)\n    if (!nameReg.test(target.patientName)) {\n      Taro.showToast({\n        title: '请填写真实姓名',\n        icon: 'none'\n      })\n      return;\n    }\n\n    let idCardReg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\n    if (!idCardReg.test(target.patientIdCard)) {\n      Taro.showToast({\n        title: '请填写正确的身份证号',\n        icon: 'none'\n      })\n      return;\n    }\n\n    if(this.data.optionPatientId && this.data.optionPatientId != this.data.registerInfo.id) {\n      Taro.showToast({\n        title: '用药人信息和处方信息用药人保持一致，不能选择其他用药人',\n        icon: 'none'\n      })\n      return false;\n    }\n\n    if(this.data.registerInfo.authStatus) {\n      this.checkParam();\n    }else {\n      this.checkAuthStatus(null, target);\n    }\n  },\n  /**\n   * @description: 提交参数校验\n   * @return: void\n   */\n  checkParam(e) {\n    if(!this.data.registerInfo.phone || this.data.registerInfo.phone.length < 11){\n      Taro.showToast({\n        title: '请填写正确手机号',\n        icon: 'none'\n      })\n      return;\n    }\n\n    if(!this.data.registerInfo.address){\n      Taro.showToast({\n        title: '请填写用药人详细地址',\n        icon: 'none'\n      })\n      return;\n    }\n\n    if(!this.data.registerInfo.temperature){\n      Taro.showToast({\n        title: '请选择用药人体温',\n        icon: 'none'\n      })\n      return;\n    }\n\n    if(!this.data.registerInfo.symptom.length < 0){\n      Taro.showToast({\n        title: '请选择用药人症状',\n        icon: 'none'\n      })\n      return;\n    }\n\n    //选择其他需要校验是否填写详细信息\n    if(this.data.isOther && !this.data.symptomDesc) {\n      Taro.showToast({\n        title: '请填写症状，最多50个字符',\n        icon: 'none'\n      })\n      return;\n    }\n\n    let pages = getCurrentPages();\n    let prevPage = pages[pages.length - 2]; //上一个页面\n    prevPage && prevPage.setData({\n      registerInfo: this.data.registerInfo\n    })\n\n    //返回上一页\n    Taro.navigateBack({\n      delta: 1\n    })\n  },\n  /**\n   * @description: 实名认证\n   * @return: void\n   */\n  checkAuthStatus(e, target) {\n    console.log(target)\n    target = target || this.data.editPatient;\n    Taro.showLoading({\n      title: '加载中...',\n      icon: 'none'\n    })\n    ajax2('POST', 'api/bigHealth/verification/antiepidemicRegisterVerification', {\n      patientId: target.id,//有ID是编辑，反之新增\n      name: target.patientName,\n      idCard: target.patientIdCard,\n      isMedicarePayments: false\n    }, (res) => {\n      if (res.data.code == 0) {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n        this.data.registerInfo.id = res.data.result && res.data.result.id;\n        //区分弹窗触发还是确认按钮触发\n        if(this.data.editInfo) {\n          this.getPatientList();\n        }else {\n          this.checkParam();\n        }\n\n        this.setData({\n          editInfo: false,\n          registerInfo: this.data.registerInfo\n        })\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  }\n};","wxml":"\n  <view class=\"register-auto-container\">     \n    <navBar title-text=\"疫情防控购药登记\"></navBar>\n    <view class=\"tips\" v-if=\" pageFrom != 'orderDetail' \">为了确保用药人信息真实有效请正确填写以下信息\n    </view>\n    <view class=\"common_section\">\n      <form bindsubmit=\"formSubmit\">       \n        <view class=\"top-box\" v-if=\" patientList.length > 0 \"> \n          <view class=\"flex-cell\"> \n            <view>用药人\n            </view>\n            <view class=\"add theme-text\" bindtap=\"openEditInfo\">添加\n              <text>+\n              </text>\n            </view>\n          </view>\n          <scroll-view scroll-with-animation=\"true\" scroll-x=\"true\" :scroll-into-view=\" scrollViewId \">\n            <view class=\"flex-list\">\n              <view :class=\"[box,( item.id == selectedPatientId ? 'active' : '' )]\" v-for=\"(item, index) in  patientList \" :key=\"index\" id=\"box{{ item.id }}\" bindtap=\"choosePatient\" :data-item=\" item \">   \n                <image src=\"../../../images/register-icon.png\" catchtap=\"openEditInfo\" :data-item=\" item \"></image>\n                <view :class=\"[tag,( item.authStatus ? 'active' : '' )]\">{{ item.authStatus ? '已认证' : '未认证' }}\n                </view>\n                <view class=\"name\">{{ item.patientName }}\n                </view>\n                <view>{{ patientSex[item.patientSex] }} {{ item.patientAge }}岁\n                </view>\n              </view>\n            </view>\n          </scroll-view>\n        </view>\n        <block v-else> \n          <view class=\"cell\"> \n            <view class=\"name\">真实姓名\n            </view>\n            <view class=\"cell-right\">\n              <input placeholder=\"请填写用药人姓名\" name=\"patientName\" :value=\" registerInfo.patientName \" type=\"text\" placeholder-class=\"gray\" bindinput=\"getName\" :disabled=\" pageFrom == 'orderDetail' \"></input>\n            </view>\n          </view>\n          <view class=\"cell\"> \n            <view class=\"name\">身份证号\n            </view>\n            <view class=\"cell-right\">\n              <input placeholder=\"请填写用药人身份证\" name=\"patientIdCard\" type=\"text\" :value=\" registerInfo.patientIdCard \" maxlength=\"18\" placeholder-class=\"gray\" bindinput=\"getIdCard\" :disabled=\" pageFrom == 'orderDetail' \"></input>\n            </view>\n          </view>\n        </block>\n        <view class=\"cell\"> \n          <view class=\"name\">联系方式\n          </view>\n          <view class=\"cell-right\">\n            <input placeholder=\"请填写用药人手机号\" name=\"phone\" type=\"number\" :value=\" registerInfo.phone \" maxlength=\"11\" placeholder-class=\"gray\" bindinput=\"getPhone\" :disabled=\" pageFrom == 'orderDetail' \"></input>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"name\">家庭地址\n          </view>\n          <view class=\"cell-right\">\n            <input placeholder=\"请填写用药人详细地址\" name=\"address\" type=\"text\" :value=\" registerInfo.address \" maxlength=\"50\" placeholder-class=\"gray\" bindinput=\"getAddress\" :disabled=\" pageFrom == 'orderDetail' \"></input>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"name\">体温\n          </view>\n          <view :class=\"[cell-right,( registerInfo.temperature ? 'black' : '' )]\" :bindtap=\" pageFrom == 'orderDetail' ? '' : 'openTemp'\"> \n            <text :class=\"[gray,( registerInfo.temperature ? 'black' : '' )]\">{{ registerInfo.temperature ? registerInfo.temperature : '请选择用药人当前体温'}}\n            </text>\n            <image class=\"cell-arrow\" src=\"../../../images/icon-arrow.png\" v-if=\" pageFrom != 'orderDetail' \"></image>\n          </view>\n        </view>\n        <view class=\"cell\">  \n          <view class=\"name\">症状\n          </view>\n          <checkbox-group bindchange=\"getSymptom\" class=\"cell-right\" name=\"symptom\">\n            <label v-for=\"(item, index) in  symptomList \" :key=\"index\"> \n              <checkbox :value=\" item.id \" :checked=\" item.checked \" :disabled=\" pageFrom == 'orderDetail' \"></checkbox>\n              <view>{{ item.name }}\n              </view>\n            </label>\n          </checkbox-group>\n          <view class=\"desc\" v-if=\" isOther \"> \n            <textarea placeholder=\"请填写症状，最多50个字符\" maxlength=\"50\" :value=\" symptomDesc \" bindinput=\"getOtherDesc\" :disabled=\" pageFrom == 'orderDetail' \"></textarea>\n            <text>{{ symptomDesc.length }}/50\n            </text>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"name\">14天内是否有境外、高危地区旅居史\n          </view>\n          <radio-group bindchange=\"getDangerousArea\" class=\"cell-right\" name=\"hasBeenDangerousArea\"> \n            <label> \n              <view>\n                <radio value=\"1\" :checked=\" registerInfo.hasBeenDangerousArea == 1 \" :disabled=\" pageFrom == 'orderDetail' \"></radio>\n              </view>\n              <view>是\n              </view>\n            </label>\n            <label> \n              <view>\n                <radio value=\"0\" :checked=\" registerInfo.hasBeenDangerousArea == 0 \" :disabled=\" pageFrom == 'orderDetail' \"></radio>\n              </view>\n              <view>否\n              </view>\n            </label>\n          </radio-group>\n        </view>\n        <view class=\"submit_btns\" v-if=\" pageFrom != 'orderDetail' \"> \n          <button formType=\"submit\" class=\"theme-bg\" v-if=\" registerInfo.patientName && registerInfo.patientIdCard && registerInfo.phone && registerInfo.address && registerInfo.temperature && registerInfo.symptom.length > 0 \">确认\n          </button>\n          <button v-else>确认\n          </button>\n        </view>\n      </form>\n    </view>\n    <view class=\"black_box\" v-if=\" openTempDialog \"></view>\n    <view class=\"temp-dialog\" v-if=\" openTempDialog \"> \n      <view class=\"btns\">  \n        <view class=\"btn theme-text\" bindtap=\"closeTempDialog\">取消\n        </view>\n        <text>请选择温度\n        </text>\n        <view class=\"btn theme-text\" bindtap=\"checkTempvalue\">确定\n        </view>\n      </view>\n      <picker-view indicator-style=\"height: 50px;\" style=\"width: 100%; height: 312px;\" :value=\" tempValue \" bindchange=\"getTempValue\">  \n        <picker-view-column>\n          <view v-for=\"(item, index) in  43 \" :key=\"index\" style=\"line-height: 50px; text-align: center;\" v-if=\" item > 34 \">{{ item }}\n          </view>\n        </picker-view-column>\n        <picker-view-column>\n          <view v-for=\"(item, index) in  10 \" :key=\"index\" style=\"line-height: 50px;text-align: center;\">{{ item }}\n          </view>\n        </picker-view-column>\n        <picker-view-column>\n          <view class=\"icon-container\" style=\"line-height: 50px;text-align: center;\">°C\n          </view>\n        </picker-view-column>\n      </picker-view>\n    </view>\n    <halfScreenDialog :show=\" editInfo \" maskClosable=\"ture\" title=\"添加用药人\">\n      <view slot=\"desc\" class=\"edit-info\">  \n        <view :class=\"[tips,( editPatient.authStatus ? '' : 'red' )]\" v-if=\" editPatient.id \">信息{{ editPatient.authStatus ? '已' : '未' }}通过实名认证\n        </view>\n        <form bindsubmit=\"formSubmit\" class=\"common_section\"> \n          <view class=\"cell\"> \n            <view class=\"name\">真实姓名\n            </view>\n            <view class=\"cell-right\">\n              <input placeholder=\"请填写用药人姓名\" name=\"name\" :value=\" editPatient.patientName \" type=\"text\" bindinput=\"getPatientName\"></input>\n            </view>\n          </view>\n          <view class=\"cell\"> \n            <view class=\"name\">身份证号\n            </view>\n            <view class=\"cell-right\">\n              <input placeholder=\"请填写用药人身份证\" name=\"idCard\" type=\"text\" :value=\" editPatient.patientIdCard \" maxlength=\"18\" bindinput=\"getPatientIdCard\"></input>\n            </view>\n          </view>\n        </form>\n        <view class=\"btns\"> \n          <view :class=\"[btn,( editPatient.authStatus ? 'theme-bg btn-bg' : '' )]\" v-if=\" editPatient.authStatus \" bindtap=\"deletePatient\">删除\n          </view>\n          <block v-else>  \n            <view class=\"btn\" v-if=\" editPatient.patientName \" bindtap=\"deletePatient\">删除\n            </view>\n            <view class=\"btn\" v-else bindtap=\"closeEditInfo\">取消\n            </view>\n            <view class=\"btn save\" bindtap=\"checkAuthStatus\">保存并实名认证\n            </view>\n          </block>\n        </view>\n      </view>\n    </halfScreenDialog>\n  </view>"},"convertDir/pages/note/ruleDetail/ruleDetail":{"js":"// pages/note/ruleDetail/ruleDetail.js\nimport {\n  url,\n  getH5AbsoluteUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n  jumpQualification(){\n    let url = getH5AbsoluteUrl(`#/qualification`);\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n    })\n  },\n  jumpWebview(e) {\n    let name = e.currentTarget.dataset.name;\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${ url }html/${ name }.html`\n    })\n  }\n};","wxml":"\n  <view class=\"ruleDetail-auto-container\"> \n    <navBar title-text=\"荷叶健康资质与规则\" :showCapsule=\"true\"></navBar>\n    <view class=\"common_section\">   \n      <view class=\"cell arrow\" bindtap=\"jumpQualification\">\n        <view class=\"left\">平台资质\n        </view>\n      </view>\n      <view class=\"cell arrow\" bindtap=\"jumpWebview\" data-name=\"protrol\">\n        <view class=\"cell_left\">用户服务协议\n        </view>\n      </view>\n      <view class=\"cell arrow\" bindtap=\"jumpWebview\" data-name=\"PrivacyPolicies\">\n        <view class=\"cell_left\">隐私政策\n        </view>\n      </view>\n      <view class=\"cell arrow\" bindtap=\"jumpWebview\" data-name=\"LegalNotice\">\n        <view class=\"cell_left\">法律声明\n        </view>\n      </view>\n    </view>\n  </view>","json":{},"wxss":"/* pages/note/ruleDetail/ruleDetail.wxss */\n@import '/common/tableView.wxss';\n.common_section .cell {\n  padding: 0 20rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n}"},"convertDir/pages/note/selectAddress/selectAddress":{"js":"// pages/selectAddress/selectAddress.js\nimport {\n  url,\n  ajax,\n  ajax2,\n  getLocation,\n  open_wechatMap\n} from \"../../../utils/util\";\nconst app = getApp();\n\nexport default {\n\n  data: function() {\n    return {\n      navBarHeight: app.globalData.navBarHeight,//自定义导航高度\n      addressList:{},\n      drugstoreDelivery:{},\n      addressId:'',\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.userAddress){\n      let address = JSON.parse(options.userAddress);\n      console.warn(address);\n      this.setData({\n        addressId: address && address.id\n      })\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n  edit_btn(e){\n    let data = JSON.stringify(e.currentTarget.dataset.info);\n    Taro.navigateTo({\n      url: `/pages/note/newAddress/newAddress?info=${data}`\n    })\n  },\n  newAdd(){\n    if (this.data.addressList.length < 20){\n      Taro.navigateTo({\n        url: `/pages/note/newAddress/newAddress`\n      })\n    }else{\n      Taro.showToast({\n        title: '收获地址数量已经超出限制',\n        icon: 'none',\n      })\n    }\n  },\n  toConfirm(e){\n    console.log(e.currentTarget.dataset.zhi)\n    //拿到数据返回确认订单页面\n    let pages = getCurrentPages();\n    let prevPage = pages[pages.length - 2]; //上一个页面'\n    prevPage.setData({\n      userAddress: e.currentTarget.dataset.zhi\n    });\n    Taro.navigateBack({\n      delta: 1\n    })\n  },\n  addressList:function(){\n    ajax('get', `miniapp/address/list`, {}, (res) => {\n      if(res == 2) {\n        return false;\n      }\n      if (res.data.code == 0) {\n        console.log(res);\n        this.setData({\n          addressList: res.data.result\n        })\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n    this.addressList();\n  },\n  \n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","json":{},"wxml":"\n  <view class=\"selectAddress-auto-container\"> \n    <navBar title-text=\"选择地址\"></navBar>\n    <view :class=\"[address-container,( isSrc_whyb ? 'djk-view' : '' )]\"> \n      <view class=\"address-list\" bindtap=\"toConfirm\" :data-zhi=\"item\" v-for=\"(item, index) in addressList\" :key=\"index\">  \n        <image v-if=\" item.id == addressId \" class=\"address-check\" mode=\"widthFix\" src=\"../../../pages/note/noteImg/address-cheek.png\"></image>\n        <view class=\"address-list-name\">   \n          <view class=\"list-name\">{{item.consignee}}\n          </view>\n          <view class=\"list-tel\">{{item.insensitivityPhone}}\n          </view>\n          <view class=\"list-Label theme-text\" v-if=\"item.isDefault==1?true:false\">默认\n          </view>\n          <view class=\"list-Label theme-text\" v-if=\"item.label != ''?true:false\">{{item.label}}\n          </view>\n        </view>\n        <view class=\"address-list-address\">\n      {{item.selectNearyAddress}}{{item.address}}\n      \n          <image catchtap=\"edit_btn\" :data-info=\"item\" class=\"address-edit\" mode=\"widthFix\" src=\"../../../pages/note/noteImg/edit-icon.png\"></image>\n        </view>\n      </view>\n      <view class=\"newAddress-btn newAddress-btn-activity theme-bg\" bindtap=\"newAdd\">新建地址\n      </view>\n    </view>\n  </view>","wxss":"/* pages/selectAddress/selectAddress.wxss */\n@import '../../../common/tableView.wxss';\npage {\n  background-color: #fff;\n}\n\n.address-container {\n  padding-bottom: 130rpx;\n}\n\n.address-list {\n  position: relative;\n  padding: 30rpx 25rpx 30rpx 25rpx;\n}\n\n\n.address-container .address-list:nth-child(1)::before {\n  content: '';\n  display: block;\n  width: 100%;\n  height: 1px;\n  background-color: rgba(238, 238, 238, 1);\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.address-list::after {\n  content: '';\n  display: block;\n  width: 100%;\n  height: 1px;\n  background-color: rgba(238, 238, 238, 1);\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.address-list-name {\n  display: flex;\n  font-size: 34rpx;\n  color: #333;\n  text-align: left;\n}\n\n.list-tel {\n  margin-left: 21rpx;\n}\n\n.list-name {\n  max-width: 176rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.list-Label {\n  width: 80rpx;\n  height: 34rpx;\n  background: rgba(0,122,255,0.08);\n  text-align: center;\n  line-height: 34rpx;\n  border-radius: 80rpx;\n  font-size: 24rpx;\n  margin-left: 20rpx;\n  margin-top: 7rpx;\n}\n\n.address-list-address {\n  font-size: 29rpx;\n  color: #666;\n  margin-top: 10rpx;\n  position: relative;\n  padding-right: 150rpx;\n}\n\n.address-check {\n  width: 46rpx;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.address-edit {\n  width: 28rpx;\n  position: absolute;\n  bottom: -10rpx;\n  right: 54rpx;\n  padding: 20rpx;\n}\n\n.newAddress-btn {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 710rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n  text-align: center;\n  color: #fff;\n  margin: 0 25rpx 30rpx;\n  border-radius: 710rpx;\n}\n\n.newAddress-btn-activity {\n  font-weight: bold;\n  color: #fff;\n}"},"convertDir/pages/noteIndex/noteIndex":{"json":{"countDown":"/component/countDown/countDown","medList":"/component/medList/medList","djk-index":"/component/djk-index/djk-index"},"wxss":"@import '../../common/tableView.wxss';\n@import \"noteIndex.skeleton.wxss\";\npage {\n  background: #F5F6FA;\n  height: 100%;\n}\n\npage::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n  color: transparent;\n}\n\n.container {\n  color: #111334;\n}\n\n.search-bg__white {\n  background-color: #FFFFFF;\n  padding: 20rpx 24rpx;\n  border-top-left-radius: 16rpx;\n  border-top-right-radius: 16rpx;\n}\n\n.search {\n  border-radius: 90rpx;\n  height: 64rpx;\n  background:#f0f0f5;\n  color: #9D9FB8;\n  position: relative;\n  overflow: hidden;\n  \n}\n\n.search .search__input {\n  height: 64rpx;\n  line-height: 64rpx;\n  font-size: 25rpx;\n  padding-left: 76rpx;\n}\n\n.search .search__img {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  left: 34rpx;\n  top: 18rpx;\n  z-index: 1;\n}\n\n.banner {\n  height: 220rpx;\n  border-radius: 8rpx;\n  overflow: hidden;\n  padding: 0 24rpx;\n  background-color: #FFFFFF;\n  box-sizing: border-box;\n  border-radius: 12rpx;\n}\n\n.banner .banner__item{\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n.banner .banner__item image, .capsule-ad image {\n  width: 100%;\n  display: initial;\n}\n\n/* 默认指示点的样式 */\n.banner .wx-swiper-dot {\n  width: 6rpx;\n  height: 6rpx;\n  background: rgba(255,255,255,0.45);\n  margin: -6rpx;\n  padding: 0;\n}\n\n/* 选中指示点的样式 */\n.banner .wx-swiper-dot.wx-swiper-dot-active {\n  width: 16rpx;\n  height: 6rpx;\n  background: #ffffff;\n  border-radius: 4rpx;\n}\n\n\n.capsule-ad {\n  height: 134rpx;\n  margin: 0 24rpx 20rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n\n.nav-box {\n  width: 100%;\n  padding: 0 47rpx;\n  box-sizing: border-box;\n  padding-top: 30rpx;\n  background: linear-gradient(to bottom, #FFFFFF, #F5F6FA);\n}\n\n.nav__class {\n  display: flex;\n}\n\n.nav__list {\n  width: 96rpx;\n  text-align: center;\n}\n\n.nav__list:first-child {\n  margin-bottom: 29rpx;\n}\n\n.nav__content {\n  display: flex;\n  flex-flow: column;\n  margin-right: 45rpx;\n}\n\n.nav__content:last-child {\n  margin-right: 0;\n}\n\n.nav__list image {\n  width: 88rpx;\n  height: 88rpx;\n  border-radius: 4rpx;\n}\n\n.nav__list__text {\n  font-size: 23rpx;\n  text-align: center;\n}\n\n/* 广告 */\n.ad-box {\n  padding: 0 24rpx;\n}\n.ad-box__top {\n  display: flex;\n  justify-content: space-between;\n  overflow: hidden;\n}\n.ad-box image {\n  width: 100%;\n  flex: 1;\n  margin-bottom: 20rpx;\n}\n\n.ad-box__top image {\n  height: 275rpx;\n}\n\n.ad-box__top .sy-ad-left{\n  border-top-left-radius: 12rpx;\n  border-bottom-left-radius: 12rpx;\n}\n\n.ad-box__top .sy-ad-right{\n  border-top-right-radius: 12rpx;\n  border-bottom-right-radius: 12rpx;\n}\n\n.ad-box__long {\n  height: 90rpx;\n  overflow: hidden;\n}\n\n.list-content {\n  display: flex;\n  padding-bottom: 30rpx;\n}\n\n.empty {\n  flex: 1;\n}\n\n.common_section {\n  display: block;\n  border: 1rpx solid rgba(48, 48, 60, 0.08);\n}\n\n.default_color {\n  color: #ff3b30;\n}\n\n/* 优惠券弹窗 */\n.coupon_alert {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 552rpx;\n  z-index: 1001;\n}\n\n.coupon_alert  .coupon_section {\n  max-height: 540rpx;\n  overflow-y: scroll;\n  padding: 30rpx 25rpx;\n  box-sizing: border-box;\n  border-bottom-left-radius: 20rpx;\n  border-bottom-right-radius: 20rpx;\n}\n\n.coupon_alert .coupon_img {\n  width: 100%;\n  height: 200rpx;\n  border-top-left-radius: 20rpx;\n  border-top-right-radius: 20rpx;\n  display: block;\n}\n\n.close_img {\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  bottom: -136rpx;\n  left: 50%;\n  margin-left: -30rpx;\n  z-index: 1002;\n}\n\n.coupon_alert .coupon_section .cell {\n  height: 146rpx;\n  box-sizing: border-box;\n  box-shadow: 0;\n  border-radius: 8rpx;\n}\n\n.coupon_alert .coupon_section .cell:first-child {\n  margin-top: 0;\n}\n\n.coupon_alert .coupon_section .cell_center {\n  width: 70%;\n  padding: 12rpx 15rpx;\n  height: 100%;\n  border-right: 2rpx dashed #d6d6d6;\n}\n\n.coupon_alert .coupon_section .cell_center .tag {\n  background: #e4393b;\n  color: #FFFFFF;\n  border-color: #FFFFFF\n}\n\n.coupon_alert .coupon_section .cell_center .empty {\n  margin-top: 8rpx;\n  font-size: 22rpx;\n  color: #8a8080;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.coupon_alert .coupon_section .cell_center .text_block {\n  margin-bottom: 0;\n  font-size: 20rpx;\n}\n\n.coupon_alert .coupon_section .cell_center .name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.coupon_alert .coupon_section .cell_left {\n  background: #fff;\n  color: #e4393b;\n  width: 140rpx;\n  height: 100%;\n}\n\n.coupon_alert .coupon_section .cell_left .dot {\n  position: absolute;\n  left: 0;\n  background: #ff3131;\n  width: 16rpx;\n  height: 16rpx;\n  border-radius: 16rpx;\n  margin-left: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .dot_top {\n  top: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .dot_bottom {\n  bottom: -8rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .price {\n  margin-top: 25rpx;\n  font-size: 55rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .price .text {\n  font-size: 20rpx;\n}\n\n.coupon_alert .coupon_section .cell_left .button {\n  border: 1px solid #e02e24;\n  border-radius: 15px;\n  width: 90rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  font-size: 24rpx;\n  margin: 10rpx auto 0;\n}\n\n.coupon_alert .coupon_section .cell_left .gray {\n  color: #8a8080;\n  border-color: #8a8080;\n}\n\n.ad_box {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 570rpx;\n  height: 640rpx;\n  border-radius: 14rpx;\n  z-index:10000;\n  display: flex;\n  flex-direction: column;\n}\n\n.ad_box .contents {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n}\n\n.ad_box .contents image {\n  width: 100%;\n}\n\n.coupon_black {\n  z-index: 1001;\n}\n\n/* 附近药店 */\n.nearby-drug-store {\n  margin: 0 24rpx 20rpx;\n  background-color: #FFFFFF;\n  border-radius: 12rpx;\n}\n\n.nearby-drug-store__title {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 24rpx 16rpx;\n  font-size: 36rpx;\n  color: #333;\n  position: relative;\n}\n\n.nearby-drug-store_more {\n  font-size: 24rpx;\n  padding-right: 20rpx;\n  color: #9D9FB8;\n}\n\n.nearby-drug-store_arrow {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  right: 15rpx;\n}\n\n.nearby-drug-store__tags {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 72rpx;\n  color: #666883;\n  font-size: 22rpx;\n  border-top: 1rpx solid #EFF0F5;\n}\n\n.nearby-drug-store__tags view {\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n}\n\n.nearby-drug-store__tags image {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 10rpx;\n}\n\n.scrollbar1 {\n  width: 40rpx;\n  height: 6rpx;\n  background-color: #E1E1EB;\n  margin: 13rpx auto 0;\n  border-radius: 3rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.scrollbar1 view {\n  height: 100%;\n  position: absolute;\n  transition: all 0.2s;\n  left: 0;\n  top: 0;\n  border-radius: 3rpx;\n}\n\n/* 品牌秒杀 */\n.seconds-kill {\n  background: #FFFFFF;\n  margin: 20rpx 24rpx;\n  border-radius: 12rpx;\n  padding: 4rpx;\n}\n\n.seconds-kill-nav {\n  width: 100%;\n  height: 180rpx;\n  padding: 78rpx 26rpx 0;\n  box-sizing: border-box;\n}\n\n.seconds-kill__title {\n  font-size: 36rpx;\n  color: #333333;\n  padding: 20rpx 0 16rpx;\n  font-weight: bold;\n}\n\n.seconds-kill__nav-content {\n  display: flex;\n  align-items: center;\n}\n\n.seconds-kill__nav-list {\n  flex-shrink: 0;\n  height: 86rpx;\n  border-radius: 8rpx;\n  text-align: center;\n  color: #333333;\n  padding: 7rpx 0;\n  box-sizing: border-box;\n  line-height: 25rpx;\n  margin-right: 8%;\n}\n\n.seconds-kill__nav-list:last-child{\n  margin: 0;\n}\n\n.seconds-kill__nav-name {\n  font-size: 30rpx;\n  font-weight: bold;\n  height: 40rpx;\n  line-height: 40rpx;\n  color: #111334\n}\n\n.seconds-kill__nav-list text {\n  font-size: 24rpx;\n  height: 34rpx;\n  line-height: 34rpx;\n  color: #9D9FB8;\n  height: 34rpx;\n  line-height: 34rpx;\n  padding: 0 12rpx;\n  border-radius: 34rpx;\n  margin-top: 7rpx;\n}\n\n.seconds-kill__nav-list .current {\n  color: #FFFFFF;\n}\n\n.seconds-kill__cell {\n  display: flex;\n  padding: 30rpx 0;\n  margin: 0 30rpx;\n  border-bottom: 1rpx solid #F2F2F2;\n}\n\n.seconds-kill__head-photo {\n  width: 144rpx;\n  height: 144rpx;\n  position: relative;\n  overflow: hidden;\n  background: rgba(5,13,143,0.02);\n  border-radius: 8rpx;\n}\n\n.seconds-kill__head-photo image {\n  width: 100%;\n  height: 100%;\n}\n\n.seconds-kill__head-photo .mask-layer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  background: rgba(5,13,143,0.02);\n  width: 100%;\n  height: 100%;\n}\n\n.seconds-kill__head-tag {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 56rpx;\n  height: 63rpx;\n  font-size: 20rpx;\n  line-height: 22rpx;\n  font-weight: bold;\n  padding-top: 4rpx;\n  color: #FFFFFF;\n  text-align: center;\n}\n\n.seconds-kill__center {\n  flex: 1;\n  margin-left: 20rpx;\n  display: flex;\n  flex-direction: column;\n}\n\n.seconds-kill__center__name {\n  font-weight: bold;\n  font-size: 28rpx;\n  line-height: 34rpx;\n  max-height: 68rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.seconds-kill__progress {\n  height: 26rpx;\n  line-height: 26rpx;\n  display: flex;\n  align-items: center;\n  margin: 0 14rpx;\n}\n.seconds-kill__progress text {\n  font-size: 16rpx;\n  color: #FFFFFF;\n}\n\n.seconds-kill__progress-bar {\n  display: inline-block;\n  width: 206rpx;\n  height: 12rpx;\n  border-radius: 8rpx;\n  background:rgba(255,255,255,0.45);\n  margin-right: 10rpx;\n}\n\n.seconds-kill__progress-bar text {\n  font-size: 20rpx;\n  color: #999999;\n}\n\n.seconds-kill__progress-bar_status{\n  border-radius: 8rpx;\n  height: 12rpx;\n  background: #FFFFFF;\n}\n\n.seconds-kill__center-empty {\n  flex: 1;\n}\n\n.seconds-kill__bottom {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n\n.seconds-kill__bottom-price {\n  font-size: 40rpx;\n  color: #FF2121;\n  font-weight: bold;\n  height: 60rpx;\n  line-height: 76rpx;\n}\n\n.seconds-kill__bottom .tag {\n  font-size: 22rpx;\n  color: #666883;\n  background: #F6F8FD;\n  padding: 2rpx 8rpx;\n  margin: 14rpx 0;\n  border-radius: 4rpx;\n}\n\n.seconds-kill__bottom-price .symbol {\n  font-size: 30rpx;\n}\n.seconds-kill__noMore {\n  text-align: center;\n  color: #9D9FB8;\n  padding: 10rpx 0;\n  font-size: 28rpx;\n}\n\n.common-line-price {\n  font-size: 24rpx;\n  font-weight: normal;\n}\n\n.seconds-kill__bottom-button {\n  width: 154rpx;\n  padding: 16rpx 0;\n  border-radius: 8rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #FFFFFF;\n  text-align: center;\n  margin: 0\n}\n\n.seconds-kill__bottom-button--red {\n  background: linear-gradient(270deg,#fe5427, #ff824A);\n  padding: 10rpx 0;\n}\n\n.seconds-kill__bottom-button--gray {\n  background: #9D9FB8;\n}\n\n.official-account {\n  width: 702rpx; margin: auto;\n  box-shadow: 0px 3px 7px 0px rgba(0,0,0,0.15);\n  position: fixed;\n  bottom: 25rpx;\n  left: 24rpx;\n}\n\n.official-account__close {\n  position: absolute;\n  top: 6rpx;\n  right: 0;\n  width: 70rpx;\n  height: 60rpx;\n  text-align: center;\n  font-size: 50rpx;\n  line-height: 50rpx;\n  color: #999999;\n  transform: rotate(45deg);\n}\n\n.layer1_box{\n  z-index: 1000001;\n}\n\n.nearby-drug-store-title{\n  font-size: 36rpx;\n  color: #111334;\n  font-weight: bold;\n}\n\n/* .notice {\n  background: #F6FCFB;\n  color: #00CCBB;\n  border-radius: 12rpx;\n  font-size: 24rpx;\n  padding: 20rpx 0;\n  margin: 0 30rpx;\n  overflow: hidden;\n  position: relative;\n} \n\n.notice .img-box {\n  background: #F6FCFB;\n  position: absolute;\n  padding: 0 10rpx 0 20rpx;\n  z-index: 1;\n}\n\n.notice image {\n  width: 36rpx;\n  height: 36rpx;\n}\n\n.notice .text-block{\n  display: flex;\n}\n\n.notice .text-block text{\n  -webkit-animation: 36s 1.5s rowup linear infinite normal;\n  animation: 36s 1.5s rowup linear infinite normal;\n  white-space: nowrap;\n  margin-right: 20rpx;\n}\n\n@-webkit-keyframes rowup {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n  100% {\n    -webkit-transform: translate3d(-750px, 0, 0);\n    transform: translate3d(-1500px, 0, 0);\n  }\n}\n@keyframes rowup {\n  0% {\n    -webkit-transform: translate3d(0px, 0, 0);\n    transform: translate3d(0px, 0, 0);\n  }\n  100% {\n    -webkit-transform: translate3d(-750px, 0, 0);\n    transform: translate3d(-1500px, 0, 0);\n  }\n} */\n\n.inquiry-box {\n  background: #ffffff;\n  border-radius: 12rpx;\n  display: flex;\n  align-items: flex-end;\n  margin: 20rpx 24rpx;\n  flex: 1;\n}\n\n.inquiry-box .left {\n  flex: 1;\n  font-size: 36rpx;\n  padding: 36rpx  24rpx;\n}\n\n.inquiry-box .left .text {\n  display: flex;\n  align-items: center;\n  font-weight: bold;\n}\n\n.inquiry-box .left .text image {\n  width: 37rpx;\n  height: 37rpx;\n  margin-right: 6rpx;\n}\n\n.inquiry-box .left .dec {\n  font-size: 24rpx;\n  line-height: 26rpx;\n  color: #9D9FB8;\n  margin-top: 13rpx;\n}\n\n.inquiry-box .left .button {\n  font-size: 26rpx;\n  width: 152rpx;\n  height: 48rpx;\n  line-height: 48rpx;\n  font-weight: bold;\n  border-radius: 48rpx;\n  text-align: center;\n  color: #FFFFFF;\n  margin-top: 13rpx;\n}\n\n.inquiry-box .left .tag {\n  height: 32rpx;\n  line-height: 32rpx;\n  font-weight: normal;\n  color: #fff;\n  background: #FFEEEF;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  padding: 0 10rpx;\n  margin-left: 10rpx;\n  max-width: 100rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  background: linear-gradient( #FF824A, #FE5427);\n  /* text-emphasis: e; */\n}\n\n.inquiry-box image {\n  margin-right: 20rpx;\n  width: 250rpx;\n  height: 188rpx;\n}\n\n/* 扫码问诊 */\n/* .index_label{\n  font-size: 24rpx;\n  color: #fff;\n  background-color: #413a35;\n  height: 66rpx;\n  line-height: 66rpx;\n  margin-top: 20rpx;\n  position: relative;\n  text-align: center;\n}\n.index_label_jt{\n  position: absolute;\n  top: -20rpx;\n  right: 18%;\n  transform: rotate(90deg);\n }\n .index_label_jt:before,.index_label_jt:after{\n  position: absolute;\n  content: '';\n  border-top: 10rpx transparent dashed;\n  border-left: 10rpx transparent dashed;\n  border-bottom: 10rpx transparent dashed;\n  border-right: 10rpx #413a35 solid;\n }\n .index_label_jt:before{\n  border-right: 10rpx #413a35 solid;\n }\n .index_label_jt:after{\n  left: 1rpx; \n  border-right: 10rpx #413a35 solid;\n }\n .index_px1{\n   display: inline-block;\n  transform: scale(1.6);\n }\n .index_label image{\n   width: 40rpx;\n   height: 40rpx;\n   position: absolute;\n   left: 30rpx;\n   top: 13rpx;\n } */\n /*  */\n .inqury-wrap{\n   display: flex;\n }\n \n .text-e2 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n","wxml":"\n  <view class=\"noteIndex-auto-container\">    \n    <wxs module=\"filter\"></wxs>\n    <import></import>\n    <include v-if=\"pageShow\"></include>\n    <navBar :title-text=\" isSrcWhyb ? '武汉您健康' : '' \" :showCapsule=\" false \" background=\"#00b955\" :addressData=\" address_data \" bind:action=\"selectAddress\" pageFrom=\"noteIndex\"></navBar>\n    <view :class=\"[container,( isSrcWhyb ? 'djk-view' : '' )]\" :style=\"{padding-bottom:  tabbarHeight px}\">         \n      <view class=\"search-bg__white\">\n        <view class=\"search\" bindtap=\"goodsSearch\"> \n          <view class=\"search__input\">搜一搜商品名称\n          </view>\n          <image class=\"search__img\" src=\"../../images/search-icon-black.png\"></image>\n        </view>\n      </view>\n      <block v-if=\" !isSrcWhyb \">       \n        <swiper autoplay=\"false\" interval=\"5000\" class=\"banner\" v-if=\" bannerList.length > 0 \" circular indicator-dots>\n          <swiper-item class=\"banner__item\" :key=\"key\" v-for=\"(item, key) in  bannerList \" wx:for-index=\"key\" v-if=\" item.adType == 1 \">\n            <image :src=\" item.bannerImage ? item.bannerImage+'@702x230' : '/images/banner_mr.png' \" data-skeleton-bgColor=\"#ededed\" mode=\"widthFix\" bindtap=\"toLink\" data-index=\"key\" :data-item=\"item\" class=\"sy-sj\" :data-activity_page_id=\" item.id \"></image>\n          </swiper-item>\n        </swiper>\n        <scroll-view class=\"nav-box\" v-if=\" specialArea.length > 0 \" scroll-with-animation=\"true\" scroll-x=\"true\" bindscroll=\"getScrollPosition1\">\n          <view class=\"nav__class\">\n            <view class=\"nav__content\" v-for=\"(item, key) in  specialArea \" :key=\"key\">\n              <block v-for=\"(items, key) in  item \" :key=\"key\">\n                <view class=\"nav__list sy-jg\" :data-item=\" items \" data-type=\"1\" bindtap=\"goodsSearch\" :data-special_area_id=\" items.id \"> \n                  <image mode=\"widthFix\" :src=\" items.logo ? items.logo + (items.id !== 'medicineRush'? '@100x100':''):'/images/index-zq.png' \"></image>\n                  <view class=\"nav__list__text\">{{ items.zoneName }}\n                  </view>\n                </view>\n              </block>\n            </view>\n          </view>\n        </scroll-view>\n        <view class=\"scrollbar1\" v-if=\" slideWidth1 < 40 \">\n          <view class=\"theme-bg\" :style=\"{width: slideWidth1 rpx,left: scrollPosition1 rpx}\"></view>\n        </view>\n        <view class=\"inqury-wrap\"> \n          <view class=\"inquiry-box text-e2 \" bindtap=\"toInquiry\" v-if=\" inquiryData.show \" :style=\"{ 'background: url(' + url_link + '/images/speed.png) no-repeat' , background-size: 100%}\">\n            <view class=\"left\"> \n              <view class=\"text\">\n\t\t\t\t极速问诊\n                <text class=\"tag\" v-if=\" inquiryData.list[0]\">{{ inquiryData.list[0] }}\n                </text>\n              </view>\n              <view class=\"dec\">\n                <view class=\"dec\">主治及以上医生/接通\n                  <text style=\"color: #00b955;font-weight:bold\">3秒\n                  </text>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"inquiry-box text-e2 \" :style=\"{ 'background: url(' + url_link + '/images/famous.png) no-repeat' , background-size: 100%,margin-left:0}\" bindtap=\"toDoctorList\" v-if=\" inquiryData.show \">\n            <view class=\"left\"> \n              <view class=\"text\">找专家\n              </view>\n              <view class=\"dec\">医生/在线\n                <text style=\"color: #ff5c25;font-weight:bold\">3万\n                </text>\n                <text style=\"color:#ff5c25;font-weight:bold\">24小时\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"ad-box\"> \n          <view class=\"ad-box__top\"> \n            <image :src=\"item.bannerImage\" bindtap=\"toLink\" data-index=\"key\" :data-item=\"item\" v-for=\"(item, key) in  adList \" :key=\"key\" v-if=\"item.adType == 6\" class=\"sy-ad-left\"></image>\n            <image :src=\"item.bannerImage\" bindtap=\"toLink\" data-index=\"key\" :data-item=\"item\" v-for=\"(item, key) in  adList \" :key=\"key\" v-if=\"item.adType == 7\" class=\"sy-ad-right\"></image>\n          </view>\n          <view class=\"ad-box__long\" v-if=\" item.adType == 5 \" v-for=\"(item, key) in  adList \" :key=\"key\">\n            <image :src=\"item.bannerImage\" mode=\"widthFix\" bindtap=\"toLink\" data-index=\"key\" :data-item=\"item\"></image>\n          </view>\n        </view>\n        <view class=\"capsule-ad\" v-if=\"capsuleAd\">\n          <image :src=\" capsuleAd.bannerImage \" bindtap=\"toLink\" :data-item=\" capsuleAd \" mode=\"widthFix\" class=\"sy-jnw\" :data-capsule_id=\" capsuleAd.id \"></image>\n        </view>\n        <view class=\"nearby-drug-store\" v-if=\" address_data.latitude && nearbyDrugstoreList.length > 0 \">  \n          <view class=\"nearby-drug-store__title\" bindtap=\"tapNearbyDrugstore\">  \n            <view class=\"nearby-drug-store-title\">附近药店\n            </view>\n            <view class=\"nearby-drug-store_more sy-fjyd-more\">更多\n            </view>\n            <image class=\"nearby-drug-store_arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view class=\"medList_box\">\n            <medList :lists=\" nearbyDrugstoreList[0] \" type=\"true\"></medList>\n          </view>\n          <view class=\"nearby-drug-store__tags\" v-if=\" qualificationList.length > 0 \">\n            <view v-for=\"(item, index) in  qualificationList \" :key=\"index\">\n\t\t\t\t\t{{ item }}\n\t\t\t\t\n              <image :src=\"'../../images/store-tag'+ index +'.png'\"></image>\n            </view>\n          </view>\n        </view>\n        <block v-if=\"secondsKillList.length > 0\">\n          <view class=\"seconds-kill\" v-if=\" secondskillNavList.length \">  \n            <view class=\"seconds-kill-nav\" :style=\"{ 'background: url(' + url_link + '/images/seconds-kill-list-bg.png) no-repeat' , background-size: 100%}\">\n              <scroll-view scroll-with-animation=\"true\" scroll-x=\"true\">\n                <view class=\"seconds-kill__nav-content\">\n                  <view class=\"seconds-kill__nav-list\" v-for=\"(item, key) in  secondskillNavList \" :key=\"key\" bindtap=\"switchAvtive\" :data-id=\" item.id \"> \n                    <view :class=\"[seconds-kill__nav-name,( secondsKillCurrenId == item.id ? 'theme-text' : '' )]\">{{ item.specialName }}\n                    </view>\n                    <text :class=\"[( secondsKillCurrenId == item.id ? 'theme-bg current' : '' )]\">{{ item.actStatusDes }}\n                    </text>\n                  </view>\n                </view>\n              </scroll-view>\n            </view>\n            <view class=\"seconds-kill__content\">\n              <view class=\"seconds-kill__cell sy-ms\" v-for=\"(item, key) in  secondsKillList \" :key=\"key\" :data-classifyid=\"item.classifyId\" :data-drugstoretype=\"item.drugstoreType\" :data-drugStoreId=\" item.drugstoreId \" :data-medicinesId=\" item.medicinesId \" bindtap=\"toMsGoodsDetail\" :data-ms_medicines_id=\"item.medicinesId\"> \n                <view class=\"seconds-kill__head-photo\">  \n                  <view class=\"mask-layer\"></view>\n                  <image lazy-load mode=\"widthFix\" :src=\" filter.getCutSrc(item.img, '@144x144') \"></image>\n                  <view class=\"seconds-kill__head-tag\" v-if=\" item.promptPhrases \" :style=\"{ 'background: url(' + url_link + '/images/seconds-kill-list-tag.png) no-repeat' , background-size: 100%}\">{{ item.promptPhrases }}\n                  </view>\n                </view>\n                <view class=\"seconds-kill__center\">  \n                  <view class=\"seconds-kill__center__name\">\n\t\t\t\t\t\t\t\t{{ item.medicinesName + ' '+ item.commonName  + ' ' + item.product_spec }}\n\t\t\t\t\t\t\t\n                  </view>\n                  <view class=\"seconds-kill__center-empty\"></view>\n                  <view class=\"seconds-kill__bottom\"> \n                    <view> \n                      <view class=\"tag\" v-if=\" item.customMarketingPhrases \">{{ item.customMarketingPhrases }}\n                      </view>\n                      <view class=\"seconds-kill__bottom-price\">{{ item.sellingPric }}\n                        <text class=\"symbol\">¥\n                        </text>\n                        <text class=\"common-line-price\">￥{{ item.price }}\n                        </text>\n                      </view>\n                    </view>\n                    <view :class=\"[seconds-kill__bottom-button,( item.actStatus == 2 ? 'seconds-kill__bottom-button--red' : 'seconds-kill__bottom-button--gray' )]\">\n\t\t\t\t\t\t\t\t\t{{ item.actStatus == 2 ? '马上抢' : '即将开始'}}\n\t\t\t\t\t\t\t\t\t\n                      <view class=\"seconds-kill__progress\" v-if=\" item.actStatus == 2 \"> \n                        <view class=\"seconds-kill__progress-bar\">\n                          <view class=\"seconds-kill__progress-bar_status\" :style=\"{width:  item.initialSchedule %}\"></view>\n                        </view>\n                        <text>{{ item.initialSchedule }}%\n                        </text>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"seconds-kill__noMore\" v-if=\"isMsLastPage\">没有更多了\n            </view>\n          </view>\n        </block>\n      </block>\n      <djk-index v-else :address=\" address_data \" :nearbyDrugstoreList=\" nearbyDrugstoreList \" :medicareDrugs=\" medicareDrugs \" :hasNextPageMedicareCardMed=\" hasNextPageMedicareCardMed \"></djk-index>\n      <view class=\"black_box\" v-if=\"notifyDate.showNotify && notifyDate.alertNotify.notifyJumpUrlType > -1 && showAd\"></view>\n      <view class=\"ad_box\" v-if=\"notifyDate.showNotify && notifyDate.alertNotify.notifyJumpUrlType > -1 && showAd\"> \n        <view class=\"contents\" bindtap=\"jumpLink\" :data-link=\"notifyDate.alertNotify.notifyJumpUrl\" data-type=\"ad\">\n          <image :src=\"notifyDate.alertNotify.notifyImage\" mode=\"widthFix\"></image>\n        </view>\n        <image src=\"../../images/close_alert.png\" class=\"close_img\" bindtap=\"windowClose\" data-name=\"ad\"></image>\n      </view>\n      <view class=\"black_box coupon_black\" v-if=\"notifyDate.showNotify &&  notifyDate.couponList.length > 0 && showCoupon\"></view>\n      <view class=\"coupon_alert\" v-if=\"notifyDate.showNotify && notifyDate.couponList.length > 0 && showCoupon\">  \n        <image :src=\"notifyDate.couponBanner.bannerImage\" class=\"coupon_img\" bindtap=\"jumpLink\" :data-link=\"notifyDate.couponBanner.bannerUrl\" data-type=\"ad\" v-if=\"notifyDate.couponBanner.bannerImage\"></image>\n        <view class=\"common_section coupon_section\" :style=\"{background: notifyDate.couponBanner.bannerBackgroundColor || '#FFFFFF', border-radius: notifyDate.couponBanner.bannerImage ? '': '20rpx'}\">\n          <view class=\"cell\" v-for=\"(item, key) in notifyDate.couponList\" :key=\"key\"> \n            <view class=\"cell_center\">   \n              <view class=\"name\">{{item.couponName}}\n                <text class=\"tag\">{{item.couponDiscountWayStr}}\n                </text>\n              </view>\n              <block v-if=\"item.preferentialDesc\"> \n                <view class=\"empty\" v-if=\"item.couponUseLimit > 0\">{{item.preferentialDesc}}\n                </view>\n                <view class=\"text\" v-else>无门槛使用\n                </view>\n              </block>\n              <block v-else> \n                <view class=\"empty\" v-if=\"item.couponUseLimit > 0\">满{{item.couponUseLimit}}元可用\n                </view>\n                <view class=\"text\" v-else>无门槛使用\n                </view>\n              </block>\n              <view class=\"text_block\">\n                <text class=\"text\">有效日期:{{item.couponExpiryStartDate}}-{{item.couponExpiryEndDate}}\n                </text>\n              </view>\n            </view>\n            <view class=\"cell_left\">     \n              <view class=\"price\" v-if=\"item.couponDiscountWay == 1\">{{item.couponCash}}\n                <text class=\"symbol\">¥\n                </text>\n              </view>\n              <view class=\"price\" v-else>{{item.couponDiscountFactorStr}}\n\t\t\t\t\t\t\n                <text class=\"text\">折\n                </text>\n              </view>\n              <view :class=\"[button,(item.canUse?'':'gray')]\" v-if=\"sess_key\" bindtap=\"usedCoupon\" :data-type=\"item.canUse\" :data-coupon=\"item\">去使用\n              </view>\n              <view :class=\"[button,(item.canUse?'':'gray')]\" bindtap=\"toLogin\" v-else>去登录\n              </view>\n              <view class=\"dot dot_top\" :style=\"{background: notifyDate.couponBanner.bannerBackgroundColor || '#FFFFFF'}\"></view>\n              <view class=\"dot dot_bottom\" :style=\"{background: notifyDate.couponBanner.bannerBackgroundColor || '#FFFFFF'}\"></view>\n            </view>\n          </view>\n        </view>\n        <image src=\"../../images/close_alert.png\" class=\"close_img\" bindtap=\"windowClose\" data-name=\"coupon\"></image>\n      </view>\n      <view class=\"black_box layer1_box\" catchtouchmove=\"true\" v-if=\"isLayer1Show\"></view>\n      <view class=\"alert_box layer1_box\" catchtouchmove=\"true\" v-if=\"isLayer1Show\">  \n        <view class=\"title\">定位失败\n        </view>\n        <view class=\"detail\">请检查网络环境或者手机定位权限设置\n        </view>\n        <view class=\"btns_box\"> \n          <button class=\"left\" bindtap=\"selectAddress\">手动定位\n          </button>\n          <form class=\"button right\" report-submit=\"true\" bindsubmit=\"getLocation\">\n            <button class=\"right theme-text\" form-type=\"submit\">重新定位\n            </button>\n          </form>\n        </view>\n      </view>\n      <view class=\"official-account\" v-if=\" officialAccountShow \"> \n        <official-account></official-account>\n        <view class=\"official-account__close\" catchtap=\"officialAccountClose\">+\n        </view>\n      </view>\n    </view>\n  </view>","js":"const app = getApp();\nimport {\n  ajax,\n  ajax2,\n  indexGetLocation,\n  cdnStaticResourceUrl,\n  getMedicineCateNum\n} from \"../../utils/util\";\n\nconst windowWidth = Taro.getSystemInfoSync().windowWidth;\n\nexport default {\n  data: function() {\n    return {\n      // labelStatus:false,\n      specialData: [],//金刚位原数据\n      isLayer1Show: false,\n      nearbyDrugstoreList: [],\n      address_data: {},\n      bannerList: [],\n      adList: [],\n      url_link: cdnStaticResourceUrl,\n      cleartimeout: true,\n      notifyDate: {}, //弹窗通知数据\n      showAd: false, //广告弹窗是否显示\n      showCoupon: false, //广告弹窗是否显示\n      drugstoreId: null,\n      sess_key: null,\n      specialArea: [],\n      capsuleAd: {},\n      slideWidth1: 0,\n      slideRatio1: null,\n      scrollPosition1: null,\n      secondsKillList: [], // 品牌秒杀列表\n      secondskillNavList: [],//品牌秒杀导航列表\n      msPageNo: 1, // 秒杀活动页码\n      msPageSize: 10,//秒杀条数\n      isMsLastPage: true, // 品牌秒杀当前页是否最后一页\n      scrollTop: 0,\n      officialAccountShow: true,\n      secondsKillCurrenId: '',\n      pageShow: true,\n      tabbarHeight: null,\n      isSrcWhyb: getApp().globalData.src_whyb || '',\n      medicareDrugs: [], // 医保药品列表(大健康)\n      medicarePageNum: 1, // 医保卡页码(大健康)\n      hasNextPageMedicareCardMed: false, // 是否还有下一页医保药品\n      inquiryData: {}\n    };\n  },\n  onLoad: function(options) {\n    this.setData({\n      tabbarHeight: Taro.getStorageSync('tabbarHeight') || 82\n    })\n\n    // 设置来源\n    if (options.source) getApp().globalData.globalSource = options.source;\n\n    if(options.src_whyb) {\n      getApp().globalData.src_whyb = options.src_whyb;\n      this.setData({\n        isSrcWhyb: options.src_whyb\n      })\n    }\n\n    //仅首页展示白色状态导航\n    Taro.setNavigationBarColor({\n      frontColor: '#ffffff',\n      backgroundColor: '#000000'\n    })\n\n    //获取秒杀活动\n    this.getSecondsKillNavList();\n  },\n  onShow: function() {\n    //先用data当前的msPageNo*条数，用于处理秒杀分页跳出返回的场景\n    this.data.msPageSize = this.data.msPageNo * 10;\n    this.data.msPageNo = 1;\n\n    //获取定位信息\n    this.getAddressData();\n    // 自定义底部导航，需要在当前页面修改selected的值 否则无效\n    this.setTabber();\n\n    this.setData({\n      isSrcWhyb: getApp().globalData.src_whyb || '',\n      cleartimeout: true, //组件定时器开启\n      sess_key: getApp().globalData.sess_key\n    })\n    \n    if(this.data.isSrcWhyb) {\n      this.setData({ pageShow: false })\n      this.getMedicareDrugs(); //获取医保药品\n      return false;\n    }\n\n    //非大健康请求\n    this.getInquiryData();//获取问医生信息\n    this.getNotify();     //获取活动弹窗信息\n    this.getBanner();     //获取banner\n    this.getCapsuleAd();  //获取广告位\n\n    // 埋点：曝光事件\n    getApp().globalData.burySpotSDK.track('page_homeExpo');\n  },\n  /**\n  * @description: 设置tabber\n  */\n  setTabber(){\n    if (typeof this.getTabBar === 'function' && this.getTabBar()) {\n      let cateNum = getMedicineCateNum();\n\n      this.getTabBar().setData({\n        selected: 0,  // 这里指的是该页面对应在tabBar的索引\n        brageNum: cateNum || 0\n      })\n    }\n  },\n  /**\n  * @description: 获取更新定位信息\n  */\n  getAddressData(){\n    let appAddressData = getApp().address_data;// app.js存储的地址信息\n    // 判断全局是否存过定位地址\n    if (appAddressData.latitude) {\n      this.setData({\n        isLayer1Show: false,\n        address_data: appAddressData\n      })\n      // 手动定位回来没有citycode处理方式\n      if (!appAddressData.cityCode || !appAddressData.address){\n        this.getCitycode(appAddressData.longitude, appAddressData.latitude);\n      }else{\n        this.getNearbyDrugstore();\n        if (this.data.isSrcWhyb && !this.data.medicareDrugs.length) this.getMedicareDrugs(); // 获取医保药店信息\n      } \n    }else{\n      // 判断是否过有效期\n      if (getApp().locationTime){\n        let storageTime = getApp().locationTime;\n        let currentTime = Date.parse(new Date());\n        let timeDifference = currentTime - storageTime;\n        if ((timeDifference / 1000 / 60)>=30){\n          console.log('定位时间失效，重新定位')\n          this.getLocation();\n        }else{\n          console.log('定位时间有效')\n        }\n      }else{\n        console.log('没有地址时间')\n        this.getLocation();\n      }\n    }\n  },\n  /**\n  * @description: 获取横行滚动条宽度\n  * @params  {String} currentWidth 当前元素宽度 data 滚动区域数据\n  * return _showWidth 根据手机分辨率计算的宽度\n  */\n  getRatio(currentWidth, data){\n    let ratioObj = {};\n    let _totalWidth = data.length * currentWidth; \n    ratioObj.ratio = 40 / _totalWidth * (750 / windowWidth || 750);\n    ratioObj.showWidth = 750 / _totalWidth * 40;\n    this.setData({\n      pageShow: false\n    })\n    return ratioObj;\n  },\n  selectAddress() {\n    // 如果没有经纬度跳转到选择地址清空绑定内容\n    if(!this.data.address_data.latitude){\n      this.setData({\n        address_data:{}\n      })\n    }\n    let data = JSON.stringify(this.data.address_data).replace(/&/,'ASCII38')\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?address_data=${ data }`\n    })\n  },\n  // handleClear(){\n  //   this.setData({\n  //     labelStatus:false\n  //   })\n  // },\n  // toRuleDetail() {\n  //   Taro.navigateTo({\n  //     url: '/pages/note/ruleDetail/ruleDetail',\n  //   })\n  // },\n  getScrollPosition1(e){\n    this.setData({\n      scrollPosition1: e.detail.scrollLeft * this.data.slideRatio1\n    })\n  },\n  // 跳转附近药店列表\n  tapNearbyDrugstore(){\n    let data = JSON.stringify(this.data.address_data);\n    console.log(`/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?data=${ data }`)\n    getApp().globalData.burySpotSDK.track(`sy-fjyd-more`);\n    Taro.navigateTo({\n      url: `/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?data=${ data }`,\n    })\n  },\n  // 获取附近药店list\n  getNearbyDrugstore(){\n    let url = this.data.isSrcWhyb ? '/miniapp/bighealth/drugstore/getSevereCaseDrugstore' : 'miniapp/miniappController/getNearbyDrugStoreListV2';\n    \n    ajax2('POST', url, {\n      lat: this.data.address_data.latitude,\n      lng: this.data.address_data.longitude,\n      pageNo: 1,\n      pageSize: 10,\n      distance: 1,\n      cityCode: this.data.address_data.cityCode\n    }, (res) => {\n      if (res.data.code == 0) {\n        let list = res.data.result.list ? res.data.result.list.slice(0, 3) : [];\n\n        this.setData({\n          qualificationList: res.data.result ? res.data.result.qualificationList : [],\n          nearbyDrugstoreList: list\n        })\n        this.specialArea();// 获取完附近药店再获取专区，需要拿附近药店判断是否展示药急购\n      } else {\n        this.setData({\n          pageShow: false\n        })\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, (res) => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 点击药店\n  nearbyDrugstoreBtn(e){\n    getApp().globalData.burySpotSDK.track('action_home_nearbyShopClick');\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${ e.currentTarget.dataset.id }`\n    })\n  },\n  /**\n   * @description: 获取品牌秒杀活动列表\n   * @params  {String}\n   * return \n   */\n  getSecondsKillNavList() {\n    ajax('get', 'mimiapp/homepage/getSeckillList', {}, res => {\n      if (res.data.code == 0) {\n        if(res.data.result && res.data.result.length > 0) {\n          this.data.secondsKillCurrenId = res.data.result[0].id;\n          this.setData({\n            secondskillNavList: res.data.result,\n            secondsKillCurrenId: this.data.secondsKillCurrenId\n          })\n          this.getSecondsKillList();\n        }else {\n          this.setData({\n            secondskillNavList: [],\n            secondsKillCurrenId: ''\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  // 获取医保药品数据\n  getMedicareDrugs() {\n    let params = {\n      latitude: this.data.address_data.latitude,\n      longitude: this.data.address_data.longitude,\n      pageNum: this.data.medicarePageNum,\n      pageSize: 10,\n      cityCode: this.data.address_data.cityCode\n    }\n\n    Taro.showLoading({\n      title: '加载中...',\n      mask: true\n    })\n\n    ajax2('get', 'miniapp/bighealth/medicine/healthCareMedicine', params, res => {\n      if (res.data.code == 0) {\n        let pageInfo = res.data.result && res.data.result.pageInfo;\n\n        pageInfo && this.setData({\n          medicareDrugs: pageInfo ? this.data.medicarePageNum == 1 ? pageInfo.list : [...this.data.medicareDrugs, ...pageInfo.list] : [],\n          hasNextPageMedicareCardMed: (pageInfo && pageInfo.hasNextPage) || false,\n        });\n      } else {\n        Taro.showToast({\n          title: res.data.msg || '服务器开小差了，请您稍后尝试',\n          icon: 'none',\n        })\n      }\n      Taro.hideLoading();\n    }, ()=> {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  switchAvtive(e) {\n    this.data.msPageNo = 1;\n    this.setData({\n      secondsKillCurrenId: e.currentTarget.dataset.id\n    })\n    this.getSecondsKillList()\n  },\n  /**\n   * @description: 获取品牌秒杀商品列表数据\n   * @params  {String} url\n   * return \n   */\n  getSecondsKillList(pageType) {\n    Taro.showLoading({\n      title: '加载中...',\n      mask: true\n    })\n    ajax('get', 'mimiapp/homepage/getSeckillProductList', {\n      pageNo: pageType ? this.data.msPageNo : 1,\n      pageSize: this.data.msPageSize, // 只有onshow的时候才会改变msPageSize\n      activityId: this.data.secondsKillCurrenId\n    }, res => {\n      this.data.msPageSize = 10; // 恢复秒杀列表条数\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        // 分页\n        if (pageType) {\n          this.setData({\n            secondsKillList: this.data.secondsKillList.concat(res.data.result.list),\n            isMsLastPage: res.data.result.isLastPage\n          })\n        } else {\n          this.setData({\n            secondsKillList: res.data.result && res.data.result.list,\n            isMsLastPage: res.data.result.isLastPage\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  getLocation() {\n    indexGetLocation((longitude, latitude) => {\n      if (!longitude){\n        this.setData({\n          isLayer1Show: true,\n          address_data:{},\n          ['address_data.address']: '定位失败，请重新定位'\n        })\n        app.address_data = {};\n        return false\n      }\n      this.getCitycode(longitude, latitude, 'fromOnShow');\n      // 如果banner没有那么就认为因网络问题导致首页数据拿不到，重新定位回补一下数据\n      // if(this.data.bannerList.length == 0){\n      //   this.onPullDownRefresh(true);\n      // }\n    })\n  },\n  /**\n  * @description: 通过经纬度获取Citycode\n  * @params  {String} type是否记录当前获取地址时间\n  * return \n  **/\n  getCitycode(longitude, latitude, type){\n    Taro.showLoading({\n      title: '加载中'\n    })\n    ajax('get', 'miniapp/miniappController/getYkqDrugstoreByLongitude', {\n      latitude: latitude,\n      longitude: longitude\n    }, (res) => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.setData({\n          isLayer1Show: false,\n          address_data: res.data.result,\n          [\"address_data.latitude\"]: latitude,\n          [\"address_data.longitude\"]: longitude,\n        })\n        app.address_data = this.data.address_data;\n        if(type == 'fromOnShow'){\n          app.locationTime = Date.parse(new Date());\n        }\n        this.getNearbyDrugstore();\n        if (this.data.isSrcWhyb) this.getMedicareDrugs(); // 获取医保药店信息\n      } else {\n        this.setData({\n          isLayer1Show: true,\n          ['address_data.address']: '定位失败，请重新定位'\n        })\n      }\n    }, (res) => {\n      Taro.hideLoading();\n      this.setData({\n        isLayer1Show: true,\n        ['address_data.address']: '定位失败，请重新定位'\n      })\n    })\n  },\n  // 跳转品牌秒杀详情页面\n  toMsGoodsDetail(e) {\n    getApp().globalData.burySpotSDK.track('action_home_robClick');\n    const { drugstoreid, medicinesid, drugstoretype, classifyid } = e.currentTarget.dataset;\n    getApp().globalData.burySpotSDK.track(`sy-ms-${ medicinesid }`);\n    if(drugstoretype == 1){//b2c商品跳转\n      Taro.navigateTo({//b2c跳转\n        url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ medicinesid }&drugStoreId=${ drugstoreid }`\n      })\n    }else{\n      Taro.navigateTo({//lbs跳转\n        url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${ drugstoreid }&areaId=${ classifyid }`\n      })\n    }\n  },\n  handleDataProcessing(data){//金刚图数据处理方法\n    let result = [];\n    for (var i = 0; i < data.length; i += 2) {\n      result.push(data.slice(i, i + 2));\n    }\n    return result;\n  },\n  // 金刚位列表\n  specialArea() {\n    ajax('get', 'product/mini/common/v1/zonePositionList', {}, res => {\n      if (res.data.code === 0) {\n        let data = res.data.result;\n        if(this.data.nearbyDrugstoreList.length>0){//如果附件药店list大于0，金刚图首位添加药急购入口\n          let objVal = [{//药急购数据\n            id:'medicineRush',\n            logo: `${ this.data.url_link }images/urgentPurchase-new.png`,\n            zoneName: \"药急购\",\n          }];\n          data = [...objVal,...data];\n          // 药急购展示埋点\n          getApp().globalData.burySpotSDK.track('page_home_vajraExpo');\n        }\n        let result = this.handleDataProcessing(data);//数据处理\n        let ratioObj = this.getRatio(142, result);\n        this.data.slideRatio1 = ratioObj.ratio;\n        this.setData({\n          specialData:data,\n          specialArea: result,\n          slideWidth1: ratioObj.showWidth\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, () => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 金刚位跳转 / 搜索跳转\n  goodsSearch(e) {\n    let currentItem = e.currentTarget.dataset.item\n    let currentType = e.currentTarget.dataset.type\n    if(currentItem && currentItem.id == 'medicineRush'){//如果是药急购id跳转药店列表\n      let data = JSON.stringify(this.data.address_data);\n      let url = `/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?data=${ data }`;\n      if(this.data.nearbyDrugstoreList.length == 1){//如果附近药店列表大于1则跳转药店主页\n        url = `/pages/onlineGoods/drugList/drugList?drugStoreId=${ this.data.nearbyDrugstoreList[0].id }`\n      }\n      Taro.navigateTo({\n        url: url\n      })\n      return false;\n    }\n    // 数据上报\n    getApp().globalData.burySpotSDK.track('action_enterHomeSearch')\n    if (currentType === '1') {\n      // zoneType 1-URL 2-商品\n      if (currentItem.zoneType === 1) {\n        // urlType 1-小程序内页面 2-自定义链接h5页面\n        if (currentItem.urlType === 1) {\n          Taro.navigateTo({\n            url: currentItem.redirectUrl\n          })\n        } else {\n          // 跳转webviews\n          Taro.navigateTo({\n            url: `/pages/webView/webView?link=${encodeURIComponent(currentItem.redirectUrl)}`\n          })\n        }\n      } else {\n        Taro.navigateTo({\n          url: `/pages/b2c/pages/productSearch/productSearch?groupAreaId=${currentItem.id}&title=${currentItem.zoneName}&id=${currentItem.id}`\n        })\n      }\n    } else {\n      // 搜索跳转\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/productSearch/productSearch`\n      })\n    }\n  },\n  toLogin() {\n    Taro.navigateTo({\n      url: '/pages/note/login/login',\n    })\n  },\n  onPageScroll(e) {\n    this.data.scrollTop = e.scrollTop\n  },\n  //获取banner列表\n  getBanner() {\n    //通过adtype区分banner类型，1是首页顶部banner，2是app开屏广告，3是首页胶囊广告，4是专区广告，5是首页小banner，6左广告，7右广告\n    ajax('get', \"miniapp/notify/getPurchaseBanner\", {\n      source: 1 //代表微信，为了区分支付宝\n    }, (res) => {\n      this.setData({\n        sess_key: getApp().globalData.sess_key\n      })\n      if (res == 2) return false;\n      if (res != 2 && res.data.code == 0) {\n        if (res.data.result && res.data.result.length > 0) {\n          this.data.drugstoreId = res.data.result[0].drugstoreId;\n          this.data.bannerList = res.data.result.filter(item => item.adType == 1);\n          this.data.adList = res.data.result.filter(item => item.adType != 1);\n        }\n        \n        this.setData({\n          bannerList: this.data.bannerList,\n          adList: this.data.adList\n        })\n        // 埋点\n        if(this.data.adList && this.data.adList.adType == 5){\n          getApp().globalData.burySpotSDK.track('page_home_capsuleExpo');\n        }\n      }\n    })\n  },\n  //获取首页广告位\n  getCapsuleAd(){\n    ajax('get', 'miniapp/ad/getCapsuleAd', {}, (res) => {\n      if (res.data.code == 0) {\n        this.setData({\n          capsuleAd: res.data.result\n        })\n      }else{\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  toLink(e) {\n    let target = e.currentTarget.dataset.item;\n\n    //埋点\n    //adType 1 活动banner ，3 胶囊 ，6 左广告，7 右广告\n    if(target.adType == 1) { \n      getApp().globalData.burySpotSDK.track(`sy-sj-${ target.id }`);\n    }else if(target.adType == 3){\n      getApp().globalData.burySpotSDK.track(`sy-jnw-${ target.id }`);\n    }else if(target.adType == 6) {\n      getApp().globalData.burySpotSDK.track(`sy-ad-left`);\n    }else if(target.adType == 7) {\n      getApp().globalData.burySpotSDK.track(`sy-ad-right`);\n    }else if(target.adType == 5) {\n      getApp().globalData.burySpotSDK.track(`action_home_capsuleClick`, {\n        activityPageId: target.id\n      });\n    }\n    //0是拼团商品详情页 1是我想拼商品详情页 2是自定义页面\n    if (target.bannerUrl) {\n      if (target.bannerUrlType == 0) {\n        //如果没有药店直接跳转拼团首页\n        if (target.drugstoreId) {\n          Taro.navigateTo({\n            url: '/pages/group/groupLoading/goodsDetail/goodsDetail?goodsId=' + target.bannerUrl + '&drugStoreId=' + target.drugstoreId\n          })\n        } else {\n          Taro.navigateTo({\n            url: '/pages/index/index'\n          })\n        }\n      } else if (target.bannerUrlType == 1) {\n        Taro.navigateTo({\n          url: '/pages/group/groupIWant/drugDetail/drugDetail?drugId=' + target.bannerUrl\n        })\n      } else if (target.bannerUrlType == 2) {\n        if (target.activityPageShare) {\n          const activityPageShare = JSON.stringify(target.activityPageShare)\n          if (target.bannerUrl.indexOf('?') > -1) {\n            target.bannerUrl = `${ target.bannerUrl }&activityPageShare=${ encodeURIComponent(activityPageShare) }`\n          } else {\n            target.bannerUrl = `${ target.bannerUrl }?activityPageShare=${ encodeURIComponent(activityPageShare) }`\n          }\n        }\n        // 参数格式化        \n        let url = this.getCompleteUrl(target.bannerUrl);\n        Taro.navigateTo({\n          url: `/pages/webView/webView?link=${ encodeURIComponent(url) }`\n        })\n      } else if (target.bannerUrlType == 3) {//跳转小程序页面\n        Taro.navigateTo({\n          url: target.bannerUrl\n        })\n      }\n    }\n  },\n  /**\n   * @description: 获取 url 参数\n   * @params  {String} url\n   * return {String} 格式化后的 url\n   */\n  getCompleteUrl (url) {\n    let resultUrl = '';\n    // 分割url\n    let urlArray = url.split('?');\n    // 获取全局sess_key\n    let token = getApp().globalData.sess_key;\n    // 区分 url 后是否带参数\n    if (urlArray[1]) {\n      resultUrl = `${ urlArray[0] }?${ urlArray[1] }&token=${ token }`;\n    } else {\n      resultUrl = `${ urlArray[0] }?token=${ token }`;\n    }\n    return resultUrl;\n  },\n  onShareAppMessage: function(e) {\n    let shareObj = {};\n    let path = this.data.isSrcWhyb ? `pages/noteIndex/noteIndex?src_whyb=${ this.data.isSrcWhyb }` : `pages/noteIndex/noteIndex`\n    shareObj = {\n      title: this.data.isSrcWhyb ? '定点重症药店，快速配送到家' : '荷叶健康|问诊买药药店送药到家', // 默认是小程序的名称(可以写slogan等)\n      path, // 默认是当前页面，必须是以‘/’开头的完整路径\n      imageUrl: `${ this.data.url_link }images/${ this.data.isSrcWhyb ? 'wh-share' : 'share' }.png`, //../../images/share-image-2.png\n    }\n    return shareObj;\n  },\n  //使用优惠券\n  usedCoupon(e) {\n    let coupon = e.currentTarget.dataset.coupon;\n    if (coupon.activityStatus == 'meituan') {\n      Taro.navigateTo({\n        url: '/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=' + coupon.medicinesId\n      })\n    } else {\n      let type_val = e.currentTarget.dataset.type;\n      if (!type_val) return false\n\n      let couponId = coupon.couponId || 0;\n      app.globalData.couponId = couponId;\n      //商品券跳转搜索商品可用列表，其他券跳转优惠券列表\n      if (coupon.couponType == 'GOODS'){\n        Taro.navigateTo({\n          url: '/pages/onlineGoods/productSearch/productSearch?couponId=' + couponId\n        })\n      }else {\n        Taro.navigateTo({\n          url: '/pages/note/myCoupon/myCoupon'\n        })\n      }\n    }\n  },\n  //弹窗关闭\n  windowClose(e) {\n    let name = e.target.dataset.name\n    if (name == 'ad') {\n      this.data.showAd = false;\n    } else if (name == 'coupon') {\n      this.data.showCoupon = false;\n    }\n    this.setData({\n      showAd: this.data.showAd,\n      showCoupon: this.data.showCoupon\n    })\n    // 弹框关闭，显示收藏引导\n    this.handleTiming();\n  },\n  // 打开首页横条，引导收藏\n  handleTiming(){\n    let start = Taro.getStorageSync('collectionTime');//记录时间戳\n    let end = Date.parse(new Date());\n    if(start && (end - start)/(24*60*60*1000) < 1){//如果缓存的收藏时间戳小于一天就不执行\n      return false\n    }\n    let that = this;\n    this.setData({\n      labelStatus: true\n    })\n    // 记录当前收藏时间戳\n    Taro.setStorage({\n      key:\"collectionTime\",\n      data:Date.parse(new Date())\n    })\n    setTimeout(function(){\n      that.setData({\n        labelStatus: false\n      })\n    },1000 * 20)\n  },\n  //获取弹窗内容\n  getNotify() {\n    let url, parame = {};\n    if (this.data.sess_key) {\n      url = `miniapp/notify/getNotifyInfo/${ this.data.sess_key }/mini`;\n      if (app.globalData.status) {\n        url += `/${ app.globalData.status }`\n      }\n    } else {\n      // 如果未登录并且缓存有当前广告弹出的记录就获取广告接口了\n      let start = Taro.getStorageSync('advertisingStatus');//记录时间戳\n      let end = Date.parse(new Date());\n      if(start && (end - start)/(24*60*60*1000) < 1){//如果上次弹出的时间戳至今小于一天则不调用广告接口\n        this.handleTiming();\n        return false\n      }\n      url = `miniapp/notify/listCoupon`;\n    }\n    if (app.globalData.status) {\n      parame.status = app.globalData.status;\n    }\n    ajax('post', url, parame, (res) => {\n      if (res != 2 && res.data.code == 0) {\n        this.data.notifyDate = res.data.result;\n        //showNotify判断是否有弹窗\n        if (this.data.notifyDate.showNotify) {\n          if (this.data.notifyDate.alertNotify) {\n            // 如果缓存有当前广告弹出的记录就获取广告接口了\n            let start = Taro.getStorageSync('advertisingStatus');//记录时间戳\n            let end = Date.parse(new Date());\n            if(start && (end - start)/(24*60*60*1000) < 1){//如果上次弹出的时间戳至今小于一天则不调用广告接口\n              this.handleTiming();\n              return false\n            }\n            this.data.showAd = true;\n            if(!this.data.sess_key){//未登录状态记录广告弹出状态\n              Taro.setStorage({\n                key:\"advertisingStatus\",\n                data:Date.parse(new Date())\n              })\n            }\n          }\n          if (this.data.notifyDate.couponList.length > 0) {\n            this.data.showCoupon = true;\n          }\n        }else{\n          this.handleTiming();\n        }\n        this.setData({\n          notifyDate: this.data.notifyDate,\n          showCoupon: this.data.showCoupon,\n          showAd: this.data.showAd\n        })\n      }else{\n        this.handleTiming();//没有弹框直接展示收藏引导\n      }\n    }, null,{\n      controlBack: false\n    })\n  },\n  //跳转到webview\n  jumpLink(e) {\n    let notifyDate = this.data.notifyDate;\n    let target = e.currentTarget.dataset;\n    if (notifyDate.alertNotify.notifyJumpUrlType == 0 && target.type == 'ad') { //商品详情\n      if (this.data.drugstoreId) {\n        Taro.navigateTo({\n          url: '/pages/group/groupLoading/goodsDetail/goodsDetail?goodsId=' + target.link + '&drugStoreId=' + this.data.drugstoreId\n        })\n      } else {\n        Taro.navigateTo({\n          url: '/pages/index/index'\n        })\n      }\n    } else if (notifyDate.alertNotify.notifyJumpUrlType == 1 && target.type == 'ad') { //跳转我想拼商品详情\n      Taro.navigateTo({\n        url: '/pages/group/groupIWant/drugDetail/drugDetail?drugId=' + target.link\n      })\n    } else { //跳转外链\n      let url = this.getCompleteUrl(target.link);\n      let activityPageShare = notifyDate.alertNotify.activityPageShare || notifyDate.couponBanner.activityPageShare\n      if (target.link) {\n        if (activityPageShare) {\n          activityPageShare = JSON.stringify(activityPageShare)\n          if (url.indexOf('?') > -1) {\n            url = `${ url }&activityPageShare=${ encodeURIComponent(activityPageShare) }`\n          } else {\n            url = `${ url }?activityPageShare=${ encodeURIComponent(activityPageShare) }`\n          }\n        }\n\n        Taro.navigateTo({\n          url: `/pages/webView/webView?link=${ encodeURIComponent(url) }`\n        })\n      }\n    }\n  },\n  //下拉刷新\n  onPullDownRefresh: function (isGetLocation) {\n    if(this.data.isSrcWhyb) {\n      Taro.stopPullDownRefresh() //停止下拉刷新\n      return false;\n    };\n    Taro.pageScrollTo({\n      scrollTop: 0\n    })\n    //重新定位后才请求获取优惠券的接口，默认不请求\n    if (!isGetLocation) {\n      this.getNotify();\n    }\n    this.onShow();\n    Taro.stopPullDownRefresh() //停止下拉刷新\n  },\n  // 上拉加载 品牌秒杀列表\n  onReachBottom(){\n    if (!this.data.isMsLastPage && !this.data.isSrcWhyb) {\n      this.data.msPageNo++\n      console.log(this.data.msPageNo)\n      this.getSecondsKillList(true);\n    }\n\n    if (!this.data.is && this.data.isSrcWhyb) {\n      // 大健康 -> 医保药品列表\n      // this.data.medicarePageNum++;\n\n      // this.data.hasNextPageMedicareCardMed;\n      if (this.data.hasNextPageMedicareCardMed) {\n          this.data.medicarePageNum = ++this.data.medicarePageNum;\n          this.getMedicareDrugs();\n      }\n    }\n  },\n  onHide: function() {\n    this.setData({\n      cleartimeout: false, //组件定时器关闭\n      showAd: false,\n      showCoupon: false\n    })\n  },\n  officialAccountClose() {\n    this.setData({\n      officialAccountShow: false\n    })\n  },\n  toInquiry() {\n    getApp().globalData.inquiryChannel = 1;\n    getApp().globalData.inquirySource = 1;\n    if(this.data.sess_key){\n      let userInfo = {\n        token: this.data.sess_key,\n        userId: Taro.getStorageSync('userInfo').userId\n      }\n      Taro.navigateTo({\n        url: `/pages/inquiry/guidance/guidance?userInfo=${ JSON.stringify(userInfo) }`\n      })\n    }else {\n      Taro.navigateTo({\n        url: '/pages/note/login/login?backUrl=/pages/inquiry/guidance/guidance',\n      })\n    }\n    getApp().globalData.burySpotSDK.track('click_homepage_wenyisheng');    \n  },\n  /**\n   * @description: 获取问诊卡片\n   * @return: void\n   */\n  getInquiryData() {\n    this.setData({\n      'inquiryData.show':true,\n    })\n    ajax('POST', '/api/extremeInterrogation/inquiringPrice/V2', {\n      thirdChannel: getApp().globalData.inquiryChannel//渠道code 1:平台 2 药店 3 保险 4 您健康\n    }, res=> {\n      if (res.data.code == 0) {\n        this.setData({\n          inquiryData: res.data.result.speed,\n          famousData:res.data.result.famous,\n          'inquiryData.show':true,\n        })\n      }else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  toDoctorList(){\n    Taro.navigateTo({\n      url: '/pages/famousDoctors/page/doctorDetailList/doctorDetailList',\n    })\n  }\n};"},"convertDir/pages/onlineGoods/chooseCoupon/chooseCoupon":{"js":"import {\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      groupPurchaseId: '', //活动ID\n      couponList: [], //优惠券列表\n      selectedCouponId: '',//选中的优惠券\n      formOrder: false,\n      drugstoreId:'',\n      productAndNums: [],\n      set_data:'',\n      sp_jsonData:'',\n      isIPX: getApp().globalData.isIPX,\n      pageForm: '',\n      isPageShow: false,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  onLoad: function (options) {\n    //区分lbs订单还是b2c订单,b2c订单直接传递list不重新请求数据\n    if (options.drugstoreId) {\n      this.setData({\n        drugstoreId: options.drugstoreId,\n        formOrder: true,\n        selectedCouponId: options.selectedCouponId,\n        productAndNums: JSON.parse(options.productAndNums)\n      })\n      this.getCouponList();\n    } else {\n      this.data.pageForm = 'b2c';\n      this.setData({\n        couponList: JSON.parse(options.couponList),\n        isPageShow: true,\n        selectedCouponId: options.selectedCouponId,\n      }, () => this.statusCheck())\n    }\n  },\n  radioChange(e) {\n    console.log(e)\n    let pages = getCurrentPages();//页面集合\n    let prevPage = pages[pages.length - 2];//上一页面\n    this.setData({\n      selectedCouponId: e.detail.value\n    })\n\n\n    this.data.couponList && this.data.couponList.map(item =>{\n      if (this.data.selectedCouponId == item.id){\n        if(this.data.pageForm == 'b2c') {\n          prevPage.setData({\n            selectedCoupon: item\n          })\n          // prevPage.getGoodsDetail();\n          return false;\n        }\n        prevPage.setData({\n          usedCoupon: item,\n          toChooseCoupon:true,\n          ['usedCoupon.defaultOption']:1//更改优惠券使用状态\n        }, function() {\n          prevPage.getGoodsDetail(2); //更新提交订单数据，带e给上级页面代表手动选择优惠券,避免商家券和平台冲突\n        });\n      }\n    })\n\n    Taro.navigateBack({\n      delta: 1\n    })\n  },\n  onShow(){\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n  },\n  //不使用优惠券\n  notUsed(){\n    this.setData({\n      selectedCouponId: ''\n    })\n    let pages = getCurrentPages();//页面集合\n    let prevPage = pages[pages.length - 2];//上一页面\n\n    if(this.data.pageForm == 'b2c') {\n      prevPage.setData({\n        selectedCoupon: {\n          storeId: this.data.couponList[0].storeId,\n          notUse: true\n        }\n      })\n      // prevPage.getGoodsDetail();\n      Taro.navigateBack({\n        delta: 1\n      })\n      return false;\n    }\n\n    prevPage.setData({\n      usedCoupon: [],\n    }, function() {\n      prevPage.getGoodsDetail(); // 重新计算金额\n    });\n    Taro.navigateBack({\n      delta: 1\n    })\n  },\n  //获取优惠券列表\n  getCouponList() {\n    let that = this;\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax2('post', 'couponController/findCouponList', {\n      \"drugstoreId\": that.data.drugstoreId,\n      \"productAndNums\": that.data.productAndNums,\n      \"clientType\": \"mini\"\n    }, res => {\n      console.log(res)\n      Taro.hideLoading();\n      if(res == 2) {\n        return false;\n      }\n      if (res.data.code == 0 && res.data.result) {\n        this.setData({\n          couponList: res.data.result,\n          isPageShow: true\n        }, () => this.statusCheck())\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  //匹配选中状态\n  statusCheck() {\n    //判断确认订单页面选中的优惠券在优惠券列表是否存在\n    if (this.data.couponList.length > 0) {\n      let exit = false;\n      this.data.couponList.map( x => {\n        if (x.id == this.data.selectedCouponId && x.canUse){\n          exit = true;\n        }\n      })\n      if (!exit) {\n        this.data.selectedCouponId = this.data.couponList[0].id.canUse ? this.data.couponList[0].id : '';\n      } \n    }\n    if (this.data.couponList.length > 0) {\n      let usedNumber = 0;\n      let pages = getCurrentPages(); //页面集合\n      let prevPage = pages[pages.length - 2]; //上一页面\n\n      this.data.couponList.map( x => x.canUse && usedNumber++)\n\n      prevPage.setData({\n        usedNumber\n      });\n    }\n    this.setData({\n      selectedCouponId: this.data.selectedCouponId\n    })\n  }\n};","json":{"missingData-view":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"chooseCoupon-auto-container\"> \n    <navBar title-text=\"选择优惠券\"></navBar>\n    <view :class=\"[container,(isDjk?'djk':'')]\" v-if=\"isPageShow\"> \n      <block v-if=\"couponList.length > 0\"> \n        <radio-group class=\"common_section coupon_section\" bindchange=\"radioChange\">\n          <block v-for=\"(item, index) in couponList\" :key=\"index\"> \n            <label :class=\"[cell,(item.canUse ? '' : 'cell_gray')]\">   \n              <radio :value=\"item.id\" class=\"check_style\" :disabled=\"!item.canUse\" :checked=\"selectedCouponId == item.id\">\n                <image src=\"../../../images/icon-checked-right.png\" v-if=\"selectedCouponId == item.id\"></image>\n              </radio>\n              <view class=\"cell_left\">    \n                <view class=\"price\" v-if=\"item.couponDiscountWay==1 || item.couponDiscountWay==3\">{{item.couponCash}}\n                  <text class=\"symbol\">¥\n                  </text>\n                </view>\n                <view class=\"price\" v-if=\"item.couponDiscountWay == 2\">{{item.couponDiscountFactorStr}}\n                  <text class=\"symbol\"></text>\n                  <text class=\"text\">折\n                  </text>\n                </view>\n                <block v-if=\"item.couponDiscountWay == 3\">\n                  <view class=\"text\">下单立减\n                  </view>\n                </block>\n                <block v-else> \n                  <view class=\"text\" v-if=\"item.couponUseLimit > 0\">满{{item.couponUseLimit}}元可用\n                  </view>\n                  <view class=\"text\" v-else>无门槛使用\n                  </view>\n                </block>\n                <text :class=\"[tag,(item.canUse ? 'active' : '')]\">{{item.couponDiscountWayStr}}\n                </text>\n              </view>\n              <view class=\"cell_center\">  \n                <view class=\"name\">{{item.goodsTips}}\n                </view>\n                <view class=\"text\">{{item.preferentialDesc}}\n                </view>\n                <view :class=\"[text,(item.canUse ? '' : 'no_margin')]\">\n                  <text class=\"text\">有效日期:{{item.couponUseStartDate}} - {{item.couponUseEndDate}}\n                  </text>\n                </view>\n              </view>\n              <view class=\"cell_right\"></view>\n            </label>\n            <view v-if=\"!item.canUse\" class=\"unUse-reason\"> \n              <icon type=\"warn\" size=\"13\" color=\"#995D4D\"></icon>\n              <text>不可用原因：{{item.useMsg}}\n              </text>\n            </view>\n          </block>\n        </radio-group>\n        <view class=\"fixed_bottom\" :style=\"{padding-bottom:  isIPX ? '20rpx' : 0 }\" bindtap=\"notUsed\">不使用优惠券\n        </view>\n      </block>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval=\"这里是空的\" :imageUrl=\" url_link + 'images/empty-log.png' \">>\n\t\t\n        </missingData-view>\n      </block>\n    </view>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n.container{\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n}\n.coupon_section {\n  padding-bottom: 120rpx;\n}\n.coupon_section .cell_center .text_tips{\n  font-size: 22rpx;\n  color: #666666;\n  height: 40rpx;\n  line-height: 40rpx;\n}\n.coupon_section .cell_center .no_margin {\n  margin-bottom: 0;\n}\n.fixed_bottom {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  height: 100rpx;\n  line-height: 100rpx;\n  text-align: center;\n  width: 100%;\n  font-size: 32rpx;\n  color: #999999;\n  background: #FFFFFF;\n  box-shadow: inset 0 1px 0 0 #DCDCDC;\n}\nradio .wx-radio-input {\n  width: 0;\n  height: 0;\n  border: 0;\n}\n.check_style {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.check_style image{\n  width: 54rpx;\n  height: 54rpx;\n}\n.unUse-reason{\n  background: #FFECE3;\n  font-size: 24rpx;\n  color: #995D4D;\n  height: 72rpx;\n  display: flex;\n  align-items: center;\n  padding: 0 24rpx;\n  border-radius: 0 0 12rpx 12rpx;\n  margin-top: -20rpx;\n}\n\n.unUse-reason icon {\n  margin-right: 10rpx;\n}\n.coupon_section .cell {\n  padding-right: 24rpx;\n}\n\n.coupon_section .cell_right .button {\n  margin: 0;\n}\n\n/* 优惠券梯度 */\n.td_text{\n  font-size: 22rpx;\n  color: #999999;\n}\n.td_text{\n  margin-top: 16rpx;\n}\n"},"convertDir/pages/onlineGoods/cityList/cityList":{"js":"const cityList = require('./allcity.js');\nconst hotList = require('./hotcity.js');\nvar res = {\n  result:cityList,\n}\n\nexport default {\n  data: function() {\n    return {\n      hotList:hotList,\n      input_text:'',\n      navBarHeight: getApp().globalData.navBarHeight\n    };\n  },\n  onLoad(options) {\n    var _this = this;\n    _this.getCitys()\n  },\n\n  onChoose(e) {\n    let res = e.detail.item || e.currentTarget.dataset.item;\n    console.log(res)\n    var pages = getCurrentPages();\n    var prevPage = pages[pages.length - 2]; //上一个页面\n    prevPage.setData({\n      [\"location_data.city\"]: res.name,\n      [\"location_data.cityCode\"]: res.cityCode,\n      [\"location_data.latitude\"]: res.location.lat,\n      [\"location_data.longitude\"]: res.location.lng,\n      isType:true\n    })\n    Taro.navigateBack({\n      url: '../storeList/storeList?cityType=1'\n    })\n  },\n  search_input(e){\n    this.setData({\n      input_text:e.detail.value\n    })\n    this.getCitys(e.detail.value)\n  },\n  getCitys(searchVal) {\n    const _this = this\n    const cities = res.result[0]\n        // 按拼音排序\n        cities.sort((c1, c2) => {\n          let pinyin1 = c1.pinyin.join('')\n          let pinyin2 = c2.pinyin.join('')\n          return pinyin1.localeCompare(pinyin2)\n        })\n        // 添加首字母\n        const map = new Map()\n        for (const city of cities) {\n          const alpha = city.pinyin[0].charAt(0).toUpperCase()\n          if (!map.has(alpha)) map.set(alpha, [])\n          map.get(alpha).push({ name: city.fullname ,location:city.location,cityCode:city.id,pinyin:city.pinyin})\n        }\n        const keys = []\n        for (const key of map.keys()) {\n          keys.push(key)\n        }\n        keys.sort()\n    \n        const list = []\n        for (const key of keys) {\n          if(searchVal){\n            let data = map.get(key);\n            let cl = [];\n            \n            data.forEach((item,key) => {\n              let citypinyin = item.pinyin[0]+item.pinyin[1];\n              if(item.name.match(searchVal) || item.pinyin[0].match(searchVal) || item.pinyin[0].match(searchVal) || citypinyin.match(searchVal)){\n                console.log(item)\n                cl.push(item)\n              }\n            });\n            if(cl.length>0){\n              list.push({\n                alpha: key,\n                subItems: cl\n              })\n            }\n          }else{\n            list.push({\n              alpha: key,\n              subItems: map.get(key)\n            })\n          }\n        }\n\n        _this.setData({list})\n  }\n\n};\n","json":{"mp-indexList":"/component/index-list/index-list"},"wxml":"\n  <view class=\"cityList-auto-container\">  \n    <navBar title-text=\"选择地址\"></navBar>\n    <view class=\"search_contion\" :style=\"{top:navBarHeightpx}\">\n      <view class=\"search_hearder\">   \n        <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n        <image class=\"search_clear\" v-if=\"input_text\" bindtap=\"search_clear_btn\" mode=\"widthFix\" src=\"../../../images/search_clear.png\"></image>\n        <view class=\"search_kuai\" v-if=\"input_text\" bindtap=\"search_clear_btn\"></view>\n        <input class=\"search_input\" :value=\"input_text\" bindinput=\"search_input\" placeholder=\"搜索您想查找的城市\" bindconfirm=\"search_btn\"></input>\n      </view>\n    </view>\n    <mp-indexList class=\"city__list\" :list=\"list\" :hotList=\"hotList\" bindchoose=\"onChoose\">\n      <view class=\"city_hot\" v-if=\"!input_text\">\n        <view v-for=\"(item, key) in hotList\" :key=\"key\" :data-item=\"item\" bindtap=\"onChoose\">{{item.name}}\n        </view>\n      </view>\n    </mp-indexList>\n  </view>","wxss":"page {\n  background-color: #fff;\n}\n\n.search_contion {\n  padding: 20rpx;\n  background-color: #fff;\n  position: fixed;\n  /* border-bottom: 1px solid rgba(244, 244, 244, 1); */\n  z-index: 9;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.search_hearder {\n  height: 60rpx;\n  position: relative;\n  border-radius: 36rpx;\n  background-color: #f4f4f4;\n}\n\n.search_input {\n\n  height: 60rpx;\n  font-size: 25rpx;\n  padding-left: 65rpx;\n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  padding: 16rpx;\n}\n\n.search_clear {\n  top: -10rpx;\n  width: 36rpx;\n  height: 36rpx;\n  position: absolute;\n  right: 5rpx;\n  z-index: 2;\n  padding: 20rpx;\n}\n\n.search_btn {\n  color: #00b955;\n  font-size: 28rpx;\n  position: absolute;\n  top: 32rpx;\n  right: 20rpx;\n}\n\n.search_btn.gray {\n  color: #ccc;\n}\n\n.city_hot {\n  width: 100%;\n  height: auto;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.city_hot view {\n  width: 100rpx;\n  min-width: 100rpx;\n  padding: 0 20rpx;\n  height: 60rpx;\n  border-radius: 30rpx;\n  background-color: #f7f7f7;\n  color: #000;\n  font-size: 28rpx;\n  text-align: center;\n  line-height: 60rpx;\n  margin: 0 15rpx 30rpx 15rpx;\n}\n.city_list_item:nth-child(1){\n  padding-top: 100rpx;\n}\n"},"convertDir/pages/onlineGoods/cityList/hotcity":{"js":"var city=[{\"id\":\"420100\",\"name\":\"武汉\",\"fullname\":\"武汉市\",\"pinyin\":[\"wu\",\"han\"],\"location\":{\"lat\":30.59276,\"lng\":114.30525},\"cidx\":[1441,1453]},{\"id\":\"110000\",\"name\":\"北京\",\"fullname\":\"北京市\",\"pinyin\":[\"bei\",\"jing\"],\"location\":{\"lat\":39.90469,\"lng\":116.40717},\"cidx\":[0,15]},{\"id\":\"310000\",\"name\":\"上海\",\"fullname\":\"上海市\",\"pinyin\":[\"shang\",\"hai\"],\"location\":{\"lat\":31.23037,\"lng\":121.4737},\"cidx\":[102,117]},{\"id\":\"440100\",\"name\":\"广州\",\"fullname\":\"广州市\",\"pinyin\":[\"guang\",\"zhou\"],\"location\":{\"lat\":23.12908,\"lng\":113.26436},\"cidx\":[1662,1672]},{\"id\":\"440300\",\"name\":\"深圳\",\"fullname\":\"深圳市\",\"pinyin\":[\"shen\",\"zhen\"],\"location\":{\"lat\":22.54286,\"lng\":114.05956},\"cidx\":[1683,1691]},{\"id\":\"510100\",\"name\":\"成都\",\"fullname\":\"成都市\",\"pinyin\":[\"cheng\",\"du\"],\"location\":{\"lat\":30.5702,\"lng\":104.06476},\"cidx\":[1910,1929]},{\"id\":\"330100\",\"name\":\"杭州\",\"fullname\":\"杭州市\",\"pinyin\":[\"hang\",\"zhou\"],\"location\":{\"lat\":30.27415,\"lng\":120.15515},\"cidx\":[767,779]},{\"id\":\"320100\",\"name\":\"南京\",\"fullname\":\"南京市\",\"pinyin\":[\"nan\",\"jing\"],\"location\":{\"lat\":32.05838,\"lng\":118.79647},\"cidx\":[671,681]},{\"id\":\"320500\",\"name\":\"苏州\",\"fullname\":\"苏州市\",\"pinyin\":[\"su\",\"zhou\"],\"location\":{\"lat\":31.29834,\"lng\":120.58319},\"cidx\":[705,713]},{\"id\":\"500000\",\"name\":\"重庆\",\"fullname\":\"重庆市\",\"pinyin\":[\"chong\",\"qing\"],\"location\":{\"lat\":29.56471,\"lng\":106.55073},\"cidx\":[297,334]},{\"id\":\"120000\",\"name\":\"天津\",\"fullname\":\"天津市\",\"pinyin\":[\"tian\",\"jin\"],\"location\":{\"lat\":39.0851,\"lng\":117.19937},\"cidx\":[16,31]},{\"id\":\"610100\",\"name\":\"西安\",\"fullname\":\"西安市\",\"pinyin\":[\"xi\",\"an\"],\"location\":{\"lat\":34.34127,\"lng\":108.93984},\"cidx\":[2384,2396]}];module.exports=city;"},"convertDir/pages/onlineGoods/contactService/contactService":{"js":"import {\n  customerServerUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n   return {\n     userInfo: '',\n     webViewUrl: '',\n   };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n     \n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n      // 跳转客服所需参数\n      let userInfo = Taro.getStorageSync('userInfo');\n      let appkey = \"0c0d4d9f1df941a498562c4d1de19d46\";\n      let sc = 1005;\n      let theme = 123;\n      // 跳转webview\n      console.log('url-------------',`${customerServerUrl}/custom/#/?appKey=${appkey}&sc=${sc}&userid=${userInfo.userId}&theme=${theme}`)\n      if (userInfo) {\n        this.setData({\n          webViewUrl: `${customerServerUrl}/custom/#/?appKey=${appkey}&sc=${sc}&userid=${userInfo.userId}&theme=${theme}`\n        })\n      } \n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  }\n};","json":{},"wxml":"\n  <view class=\"contactService-auto-container\">\n    <view class=\"page\">\n      <web-view :src=\"webViewUrl\" onMessage=\"onmessage\"></web-view>\n    </view>\n  </view>","wxss":"  /* pages/contactService/con.wxss */"},"convertDir/pages/onlineGoods/drugList/drugList":{"json":{"shopCart":"../../../component/shopCart/shopCart","missingData-view":"../../../component/missingData/missingData","vipCard":"/component/vipCard/vipCard","loginPhone":"/component/loginPhone/loginPhone","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog","couponsList":"/component/couponsList/couponsList","famous-doctors-list":"/component/famousDoctorsList/famousDoctorsList","inquiryHome":"/component/inquiryHome/inquiryHome","my-tools":"/component/myTools/myTools"},"wxml":"\n  <view class=\"drugList-auto-container\">    \n    <import></import>\n    <navBar higherNav=\"true\" :background=\" higherNav ? 'none' : '#FFFFFF' \" :titleText=\" higherNav ? '':drugStoreTitle \" titleColor=\"#000000\" :showCapsule=\" publicDomain==1 || hasBackIcon \"></navBar>\n    <view v-if=\"drugStore.establishYkqService ==1 && drugStore.hasProduct == 1 && !isDefault\">   \n      <my-tools :closeStatus=\"closeStatus\" v-if=\" !publicDomain\"></my-tools>\n      <scroll-view bindscrolltolower=\"pageScrolltolower\" scroll-y=\"true\" bindscroll=\"pageScroll\" id=\"scrollView\" style=\"height: 100vh\" v-if=\" !drugStoreDisable \">\n        <view class=\"container\" v-if=\" !drugStoreDisable && !drugDisable \">           \n          <view class=\"drug-store_header\" :style=\"{height:  !higherNav ? drugStoreHeight + navBarHeight : drugStoreHeight + navBarHeightpx}\"> \n            <view class=\"drug-store_image_box\">\n              <image class=\"drug-store_image\" mode=\"aspectFill\" :src=\" drugStore.doorheadPhoto ? drugStore.doorheadPhoto : url_link + 'images/drug_store_header.png' \"></image>\n            </view>\n            <view class=\"drug-store_detail\" id=\"drugStoreHeader\" :style=\"{top:  navBarHeight px}\">  \n              <view :class=\"[top-cell,( !higherNav ? 'header-fixed' : '' )]\" :style=\"{top:  navBarHeight px}\">  \n                <view class=\"search\" bindtap=\"toSerach\" v-if=\"drugStore\"> \n                  <image src=\"../../../images/search-icon-black.png\"></image>\n                  <text>搜索商品名称\n                  </text>\n                </view>\n                <view class=\"scancode theme-bg\" catchtap=\"scancodeOpen\"> \n                  <image src=\"../../../pages/onlineGoods/images/scancode-icon.png\"></image>\n                  <text>扫码购药\n                  </text>\n                </view>\n                <view :class=\"[attention,( gz_type ? 'gray' : '' )]\" catchtap=\"handleFollow\"> \n                  <image :src=\"'../../../pages/onlineGoods/images/'+ higherNav ? 'attention' : 'blue-attention'+'.png'\" v-if=\" !gz_type \"></image>\n                  <text>{{gz_type?'已关注':'关注'}}\n                  </text>\n                </view>\n              </view>\n              <view v-if=\" !higherNav \" style=\"height:95rpx;\"></view>\n              <view class=\"center-box\"> \n                <view class=\"center-box_header\"> \n                  <view class=\"common_section\"> \n                    <view class=\"cell\">\n                      <view class=\"cell_center\"> \n                        <view class=\"name\" bindtap=\"toDrugStoreDetail\"> \n                          <text>{{ drugStore.drugstoreName }}\n                          </text>\n                          <image class=\"arrow_icon\" src=\"../../../images/black-arrow.png\"></image>\n                        </view>\n                        <view class=\"time\"> \n                          <text>营业时间：{{ drugStore.businessHours }}\n                          </text>\n                          <view catchtap=\"callPhone\" :data-phone=\" drugStore.tel \">\n                            <image class=\"phone_box_icon\" src=\"../../../pages/onlineGoods/images/green_tel.png\"></image>\n                          </view>\n                        </view>\n                      </view>\n                    </view>\n                    <view class=\"cell\">\n                      <view class=\"cell_center cell_center-flex\" catchtap=\"openMap\" :data-info=\" drugStore \">  \n                        <text class=\"text\">{{ drugStore.address }}，\n                        </text>\n                        <text class=\"distance\">距您{{drugStore.distance}}\n                        </text>\n                        <image class=\"arrow_icon\" src=\"../../../images/black-arrow.png\"></image>\n                      </view>\n                    </view>\n                  </view>\n                  <view class=\"logo-box\"> \n                    <view class=\"tag\" v-if=\" drugStore.brandId > 0 \">连锁\n                    </view>\n                    <image :src=\" drugStore.logoPhoto ? drugStore.logoPhoto : '/pages/onlineGoods/images/store-logo.png' \"></image>\n                  </view>\n                </view>\n                <view class=\"drug-store_coupons\"> \n                  <view class=\"coupons_list\" v-if=\" couponsList.coupons.length > 0 \">  \n                    <view class=\"coupons\">\n                      <block v-for=\"(item, key) in  couponsList.coupons \" :key=\"key\">\n                        <view :class=\"[coupon,( item.receiveStatus == 2 || item.receiveStatus == 3 ? 'get_coupon' : '' ),( item.receiveStatus == 1 ? 'get_disable' : '' )]\" catchtap=\"userCoupon\" :data-coupon=\"item\">  \n                          <view class=\"text bold\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{item.couponDiscountWay == '3' ? '下单立' : item.couponUseLimit }}减{{ item.couponCash }}\n                          </view>\n                          <image :src=\"'../../../pages/onlineGoods/images/coupon_line'+receiveStatusTxt[item.receiveStatus].number+'.png'\"></image>\n                          <view class=\"text\">{{ receiveStatusTxt[item.receiveStatus].text }}\n                          </view>\n                        </view>\n                      </block>\n                    </view>\n                    <view class=\"cell_right\" catchtap=\"moreCoupons\">更多\n                    </view>\n                    <image class=\"arrow_icon\" src=\"../../../images/icon-arrow.png\" catchtap=\"moreCoupons\"></image>\n                  </view>\n                  <view class=\"tag-list\">\n                    <view class=\"tags\"> \n                      <view class=\"tag red\" v-if=\" couponsList.userSubsidyDesc.length > 0 \">\n                        <block v-for=\"(item, key) in  couponsList.userSubsidyDesc \" :key=\"key\"> \n                          <text>{{ item }}\n                          </text>\n                          <text class=\"line\" v-if=\" index < couponsList.userSubsidyDesc.length-1 \"></text>\n                        </block>\n                      </view>\n                      <view class=\"tag blue\" v-if=\" drugStore.conditionDeliveryLabel \">\n\t\t\t\t\t\t\t\t\t\t{{ drugStore.conditionDeliveryLabel }}\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"inquiry-box\" v-if=\" publicDomain == 0 \">  \n            <image class=\"inquiry_icon\" mode=\"widthFix\" :src=\"url_link + 'images/header_img_tx.png'\"></image>\n            <view class=\"left inquiry_info\"> \n              <view class=\"title\">\n\t\t\t\t\t\t{{ serviceStatus.title }}\n\t\t\t\t\t\n              </view>\n              <view class=\"desc\">{{ serviceStatus.describe }}\n              </view>\n            </view>\n            <view class=\"button\" bindtap=\"toInquiry\">免费咨询\n            </view>\n          </view>\n          <view :class=\"[head-box,( menuFixed ? 'menu-fixed' : '')]\" :style=\"{top:  navBarHeight+ 46 px}\">\n            <view class=\"menu\">  \n              <view v-if=\"drugStore.hasProduct == 1&&serviceStatus.establishYkqService\" :class=\"[menu_btn,(showBox == 1 ? 'active' : '')]\" bindtap=\"switchBox\" data-num=\"1\">全部商品\n              </view>\n              <view v-if=\"drugStore.famousDoctorConfigStatus == 0 || drugStore.speedConfigStatus == 0\" :class=\"[menu_btn,(showBox == 2 ? 'active' : '')]\" bindtap=\"switchBox\" data-num=\"2\">精选名医\n              </view>\n              <view :class=\"[menu_btn,(showBox == 3 ? 'active' : '')]\" bindtap=\"switchBox\" data-num=\"3\" v-if=\"drugStore.isDisplayMemberLabel == 1\">精选会员\n              </view>\n            </view>\n          </view>\n          <view style=\"height:80rpx\" v-if=\" menuFixed \"></view>\n          <view class=\"hot-list\" id=\"hotGoodsList\" v-if=\" showBox == 1 && hotGoodsList.list.length >= 3&& serviceStatus.establishYkqService == 1\"> \n            <view class=\"hot-list_title\">  \n              <image src=\"../../../pages/onlineGoods/images/hot-icon.png\"></image>\n              <text>热销爆款\n              </text>\n              <image src=\"../../../pages/onlineGoods/images/hot-icon.png\" class=\"bg-icon\"></image>\n            </view>\n            <view class=\"common_section hot-list_box\">\n              <view class=\"cell\" v-for=\"(item, key) in  hotGoodsList.list \" :key=\"key\" wx:for-index=\"index\" catchtap=\"toOrderDetail\" :data-item=\"item\"> \n                <view class=\"cell_left\">  \n                  <image :src=\"item.img\"></image>\n                  <view class=\"over_status\" v-if=\"item.stock <= 0\">已抢光\n                  </view>\n                  <view class=\"coupon-tag\" v-if=\" item.activityInfo.limitNum > 0 \">优惠价\n\t\t\t\t\t\t\t\t限{{ item.activityInfo.limitNum }}件\n                  </view>\n                </view>\n                <view class=\"cell_center\">  \n                  <view class=\"name\">{{item.medicinesName}} {{item.commonName}} {{ item.product_spec }}\n                  </view>\n                  <view class=\"detail\"> \n                    <text class=\"price\">{{ item.activityInfo ? item.activityInfo.actPrice : item.sellingPric }}\n                      <text class=\"symbol\">¥\n                      </text>\n                    </text>\n                    <view class=\"cart_button\" v-if=\"item.stock > 0\"> \n                      <view class=\"button\" catchtap=\"addDrug\" :data-item=\"item\" :data-index=\"index\">\n                        <view>+\n                        </view>\n                      </view>\n                      <view v-if=\" item.number > 0 \" class=\"bubble\">{{item.number}}\n                      </view>\n                    </view>\n                  </view>\n                  <view style=\"margin-top: -14rpx\">\n                    <text class=\"common-line-price\" v-if=\"item.activityInfo\">¥{{item.price}}\n                    </text>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"content\" :hidden=\"showBox !=1||showBox==1&&!serviceStatus.establishYkqService\" :style=\"{padding-bottom:  isIPX ? '146rpx' : '100rpx'}\"> \n            <block wx:if=\"goodsArea.length > 0\"> \n              <view :class=\"[left,(scrollTop ? 'menu-fixed': '')]\" :style=\"{padding-bottom:  isIPX ? '146rpx' : '100rpx',top: scrollTop ?  navBarHeight+90 : '' px,height:  scrollHeight px}\"> \n                <view :class=\"[item,(item.classifyId == areaId ? 'active' : '')]\" v-for=\"(item, key) in goodsArea\" :key=\"key\" bindtap=\"switchArea\" :data-item=\"item\">{{item.classifyName}}\n\t\t\t\t\t\t\t\n                  <image v-if=\"item.isActivity\" class=\"sm-hd-icon\" src=\"../../../pages/onlineGoods/images/sm-hd-icon.png\"></image>\n                  <text class=\"tips\" v-if=\"areaTips[item.classifyId].number > 0\">{{areaTips[item.classifyId].number >= 100 ? '99+' : areaTips[item.classifyId].number}}\n                  </text>\n                </view>\n                <view :style=\"{height:  isIPX ? 148 : 126 rpx}\"></view>\n              </view>\n              <view class=\"right\" bindscrolltolower=\"scroll_bottom\" :style=\"{min-height:  scrollHeight px}\"> \n                <view class=\"title-cell\"> \n                  <text>{{ areaName }}\n                  </text>\n                  <view :class=\"[sort,( orderByType == 'ASC' ? 'down' : ''),( orderByType == 'DESC' ? 'up' : '')]\" bindtap=\"priceSort\">价格\n                  </view>\n                </view>\n                <shopCart :area-id=\"areaId\" :is-add-cart=\"isAddCart\" id=\"OnlineGoods\" :drugStore-id=\"drugStore.id\" bind:action=\"exFun\" bind:scancode=\"showLoad\" bind:hotGoods=\"hotGoodsChange\" bind:areaIdChange=\"areaIdChange\" :is-search=\"isSearch\" pageFrom=\"drugList\" :scroll-y=\" contentFixed \" :scroll-height=\"scrollHeight-25\"></shopCart>\n              </view>\n            </block>\n            <block v-else>\n              <missingData-view zhi=\"new1\" paddingValue=\"-5%\" textval2=\"药店暂未上架任何商品\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n            </block>\n          </view>\n          <view class=\"vip_content\" :hidden=\"showBox!=3\"> \n            <view :style=\"{height: scrollHeightpx}\" v-if=\"sess_key\">\n              <vipCard :drugstoreSign=\"drugStore.smartfaceOrganSign\" pageFrom=\"drugList\" id=\"vipCard\"></vipCard>\n            </view>\n            <block v-else>\n              <missingData-view zhi=\"new1\" paddingValue=\"10%\" textval2=\"店铺会员信息， 请登录后查看~\" :imageUrl=\" url_link + 'images/empty-log.png' \" bind:action=\"tologin\" buttonText=\"点击登录\"></missingData-view>\n            </block>\n          </view>\n          <view :hidden=\"showBox!=2\">\n            <famous-doctors-list id=\"famousDoctor\" :drugStore=\"drugStore\" :adsorbentTop=\"menuFixed ? true : false\" :tabTop=\"navBarHeight+ 46 + 40\" :canInquiry=\"serviceStatus.canInquiry\" :speedConfigStatus=\"drugStore.speedConfigStatus\" :famousDoctorConfigStatus=\"drugStore.famousDoctorConfigStatus\"></famous-doctors-list>\n          </view>\n          <loginPhone v-if=\"logonPhone\" bind:action=\"loginPhone_fun\"></loginPhone>\n          <view class=\"black_box\" v-if=\" purchaseBanner.bannerImage \"></view>\n          <view class=\"alert_box\" v-if=\" purchaseBanner.bannerImage \"> \n            <image class=\"banner\" :src=\" purchaseBanner.bannerImage \" bindtap=\"toLink\" :data-item=\" purchaseBanner \"></image>\n            <image class=\"close_img\" bindtap=\"closeBanner\" src=\"../../../images/close_alert.png\"></image>\n          </view>\n          <view class=\"ms-alert-box\" v-if=\"isAlert && checkNewUserData.list.length > 0\"> \n            <view class=\"ms-alert-shadow\"></view>\n            <view class=\"ms-alert-nr\">   \n              <image class=\"ms-alert-top-img\" :src=\"''+url_link+'images/ms-top.png'\"></image>\n              <image class=\"ms-alert-nr-clear\" bindtap=\"subscribeMessage\" src=\"../../../images/close_alert.png\"></image>\n              <view class=\"ms-alert-yhq-box\">  \n                <view class=\"ms-alert-nr-title\">{{checkNewUserData.received?'使用优惠券享受更多权益': checkNewUserData.title}}\n                </view>\n                <view class=\"ms-alert-nr-text\" v-if=\"!checkNewUserData.received\">已放入我的-我的优惠券中，下单即可抵扣\n                </view>\n                <block v-for=\"(item, key) in checkNewUserData.list\" :key=\"key\">\n                  <view class=\"ms-alert-yhq\"> \n                    <view class=\"ms-alert-yhq-left\">  \n                      <view class=\"ms-alert-yhq-left-name\"> \n                        <view class=\"ms-yhq-type\">{{item.couponDiscountWayStr}}\n                        </view>\n                        <view class=\"ms-yhq-text\">{{item.couponName}}\n                        </view>\n                      </view>\n                      <view class=\"ms-alert-yhq-left-tj\">\n\t\t\t\t\t\t\t\t\t\t{{item.preferentialDesc?item.preferentialDesc:item.couponUsingThreshold}}\n                      </view>\n                      <view class=\"ms-alert-yhq-left-time\">{{item.couponExpireDate}}\n                      </view>\n                    </view>\n                    <view class=\"ms-alert-yhq-right\">\n                      <view class=\"ms-jg\">{{item.couponCash}}\n                        <text>￥\n                        </text>\n                      </view>\n                    </view>\n                  </view>\n                </block>\n              </view>\n              <image mode=\"widthFix\" class=\"ms-lc\" src=\"../../../pages/onlineGoods/images/ms-lc.png\"></image>\n            </view>\n          </view>\n        </view>\n      </scroll-view>\n      <view class=\"drugStore-alert\" v-if=\"isInquiryAlert\">  \n        <view class=\"drugStore-alert-back\"></view>\n        <view class=\"drugStore-alert-img\">\n          <image mode=\"widthFix\" :src=\"url_link + 'images/icon-guide.png'\"></image>\n        </view>\n        <view class=\"drugStore-alert-btn\" bindtap=\"handleAlert\">知道了\n        </view>\n      </view>\n      <halfScreenDialog :show=\" couponsDialog \" maskClosable=\"ture\" title=\"可领取的优惠券\" hasData=\"true\">\n        <view slot=\"desc\" class=\"coupons-dialog\">\n          <couponsList :couponsData=\" couponsList.coupons \" pageFrom=\"drugList\" bind:action=\"userCoupon\"></couponsList>\n        </view>\n      </halfScreenDialog>\n    </view>\n    <view v-else-if=\"(drugStore.hasProduct == 0 || drugStore.establishYkqService == 0) && (drugStore.famousDoctorConfigStatus == 0 || drugStore.speedConfigStatus == 0) && !isDefault\">\n      <inquiryHome :drugStore=\"drugStore\" :organSign=\"serviceStatus.organSign\" :canInquiry=\"serviceStatus.canInquiry\" :speedConfigStatus=\"drugStore.speedConfigStatus\" :famousDoctorConfigStatus=\"drugStore.famousDoctorConfigStatus\"></inquiryHome>\n    </view>\n    <view v-else-if=\"isDefault\">\n      <missingData-view zhi=\"new1\" textval2=\"很抱歉，您查看的商品不存在可能已下架或被移除\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n    </view>\n  </view>","wxss":"/* pages/drugList/drugList.wxss */\n@import '../../../common/tableView.wxss';\n@import \"./drugList.skeleton.wxss\";\n\npage {\n  background: #fff;\n}\n\n.drug-store_header {\n  width: 100%;\n  height: 600rpx;\n  position: relative;\n}\n\n.drug-store_header .tel_box {\n  position: absolute;\n  top: 30rpx;\n  right: 20rpx;\n  width: 125rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  color: #fff;\n  font-size: 24rpx;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 30px;\n  display: flex;\n  padding: 0 10rpx;\n  box-sizing: border-box;\n  align-items: center;\n}\n\n.drug-store_header .tel_box image {\n  margin-right: 6rpx;\n  width: 40rpx;\n  height: 40rpx;\n}\n\n.drug-store_detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  color: #666;\n}\n\n.drug-store_detail .top-cell {\n  display: flex;\n  align-items: center;\n  padding: 10px 24rpx;\n  font-size: 24rpx;\n  color: #FFFFFF;\n  font-weight: bold;\n}\n\n.drug-store_detail .top-cell .search {\n  flex: 1;\n  height: 60rpx;\n  border-radius: 60rpx;\n  background: #F0F0F5;\n  display: flex;\n  align-items: center;\n  padding: 0 10rpx;\n  box-sizing: border-box;\n  font-size: 26rpx;\n}\n\n.drug-store_detail .top-cell .search image {\n  width: 28rpx;\n  height: 28rpx;\n  margin: 0 10rpx;\n  flex-shrink: 0;\n}\n\n.drug-store_detail .top-cell .search text {\n  font-size: 25rpx;\n  color: #9AA0B5;\n  font-weight: normal;\n}\n\n.drug-store_detail .top-cell .scancode{\n  width: 172rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  border-radius: 30rpx;\n  margin: 0 24rpx;\n  display: flex;\n  align-items: center;\n  padding: 0 14rpx;\n  box-sizing: border-box;\n}\n\n.drug-store_detail .top-cell .scancode image{\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 12rpx;\n}\n\n.drug-store_detail .top-cell .attention{\n  width: 136rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  display: flex;\n  align-items: center;\n  border: 1rpx solid #FFFFFF;\n  border-radius: 30rpx;\n  padding: 0 14rpx;\n  box-sizing: border-box;\n}\n\n.drug-store_detail .top-cell .gray {\n  opacity: 0.5;\n  display: inline-block;\n  text-align: center;\n}\n\n.drug-store_detail .top-cell .attention image{\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 12rpx;\n}\n\n.drug-store_detail .center-box {\n  margin: 0 20rpx;\n  border-radius: 12rpx;\n  box-shadow: 0px 3px 16px 0px rgba(48, 48, 60, 0.08);\n  background: #FFFFFF;\n  padding: 20rpx 24rpx 20rpx 0;\n}\n.drug-store_detail .center-box_header {\n  display: flex;\n  align-items: flex-start;\n}\n\n.drug-store_detail .center-box_header .common_section {\n  flex: 1;\n}\n\n.drug-store_detail .center-box .logo-box {\n  width: 100rpx;\n  height: 100rpx;\n  border-radius: 8rpx;\n  flex-shrink: 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.drug-store_detail .center-box .logo-box .tag {\n  position: absolute;\n  left: -4rpx;\n  top: -4rpx;\n  background: #00B955;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #FFFFFF;\n  padding: 0 8rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n}\n\n.drug-store_detail .center-box .logo-box image {\n  width: 100%;\n  height: 100%;\n  background: #ccc;\n}\n\n.drug-store_detail .header-fixed {\n  position: fixed;\n  left: 0; \n  background: #FFFFFF;\n  z-index: 999;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.drug-store_detail .header-fixed .attention {\n  color: #00b955;\n  border-color: #00b955;\n}\n\n.drug-store_detail .header-fixed .gray {\n  color:#9D9FB8;\n  border-color: #9D9FB8;\n}\n\n.drug-store_detail .cell {\n  padding: 0 24rpx;\n  font-size: 24rpx;\n  align-items: center;\n}\n\n.drug-store_detail .arrow {\n  padding: 12rpx 20rpx;\n}\n\n.drug-store_detail .cell::before {\n  border: 0;\n  padding-bottom: 0;\n}\n\n.drug-store_detail .cell_center {\n  flex: 1;\n  position: relative;\n  color: #41465D;\n}\n\n.drug-store_detail .cell_center-flex {\n  display: flex;\n  align-items: center;\n}\n\n.drug-store_detail .cell_center-flex .distance {\n  white-space: nowrap;\n}\n\n.drug-store_detail .cell_center-flex .arrow_icon {\n  opacity: 0.7;\n  width: 22rpx;\n  height: 22rpx;\n}\n\n.drug-store_detail .cell_right {\n  color: #999;\n  line-height: 25rpx;\n  display: flex;\n  align-items: center;\n}\n\n.drug-store_detail .addr_box_icon {\n  width: 30rpx;\n  height: 30rpx;\n}\n\n.drug-store_detail .cell_right .call {\n  padding-left: 20rpx;\n}\n\n.drug-store_detail .phone_box_icon {\n  width: 36rpx;\n  height: 36rpx;\n  margin-left: 14rpx;\n}\n\n.drug-store_detail .cell_right {\n  text-align: center;\n}\n.drug-store_detail .name {\n  display: flex;\n  align-items: center;\n}\n.drug-store_detail .name text {\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n  line-height: 44rpx;\n  margin-right: 10rpx;\n}\n\n.drug-store_detail .name .arrow_icon {\n  width: 36rpx;\n  height: 36rpx;\n}\n\n .drug-store_detail .time {\n  margin: 12rpx 0 18rpx;\n  display: flex;\n  align-items: center;\n}\n\n.drug-store_detail .cell_center .text {\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n  line-height: 33rpx;\n  font-size: 24rpx;\n}\n\n\n.drug-store_header .drug-store_image {\n  width: 100%;\n  height: inherit;\n  /* height: 163px; */\n}\n\n.inquiry-box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 32rpx;\n  color: #111334;\n  font-weight: bold;\n  margin: 20rpx 24rpx;\n  background: #fff;\n  border-radius: 12rpx;\n  box-shadow: 0px 12px 20px 0px rgba(48,48,60,0.04); \n  padding: 20rpx 24rpx;\n}\n\n.inquiry-box .title {\n  display: flex;\n  align-items: center;\n}\n\n\n\n.inquiry-box .desc {\n  font-size: 28rpx;\n  color: #666883;\n  font-weight: normal;\n  margin-top: 8rpx;\n}\n\n.inquiry-box .button {\n  width: 144rpx;\n  height: 48rpx;\n  line-height: 48rpx;\n  font-size: 24rpx;\n  color: #FFFFFF;\n  text-align: center;\n  background: #00b955;\n  border-radius: 48rpx;\n\n}\n\n.head-box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #fff;\n  padding: 0 30rpx;\n  box-sizing: border-box;\n  height: 40px;\n}\n\n.menu-fixed {\n  position: fixed !important;\n  left: 0;\n  width: 100%;\n  z-index: 99;\n}\n\n.head-box .menu {\n  display: flex;\n  color: #666;\n  font-size: 28rpx;\n  justify-content: space-between;\n}\n\n.head-box .menu .menu_btn {\n  height: 80rpx;\n  line-height: 80rpx;\n  margin-right: 50rpx;\n}\n\n.head-box .menu .active {\n  font-weight: bold;\n  color: #333;\n  position: relative;\n}\n\n.head-box .menu .active::before {\n  content: '';\n  position: absolute;\n  bottom: 4rpx;\n  left: 50%;\n  margin-left: -28rpx;\n  width: 40rpx;\n  height: 6rpx;\n  background: #00b955;\n  border-radius: 3px;\n}\n\n.hot-list {\n  background: linear-gradient(to bottom, #FFEDEE,20%, #FFFFFF );\n}\n\n.hot-list_title {\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n  height: 92rpx;\n  line-height: 92rpx;\n  padding: 0 24rpx;\n  position: relative;\n}\n\n.hot-list_title image {\n  width: 28rpx;\n  height: 28rpx;\n  margin-right: 12rpx;\n}\n\n.hot-list_title .bg-icon {\n  width: 90rpx;\n  height: 90rpx;\n  position: absolute;\n  right: 10rpx;\n  top: 0;\n  opacity: 0.1;\n}\n\n.content {\n  padding-bottom: 100rpx;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.content .left {\n  z-index: 1;\n  width: 170rpx;\n  background: #f4f4f4;\n  font-size: 26rpx;\n  flex-shrink: 0;\n  float: left;\n  -webkit-overflow-scrolling: touch;\n  overflow-y: scroll;\n  position: absolute;\n  /* height: 100vh; */\n}\n\n.content .left .item {\n  color: #8a8080;\n  padding: 33rpx 0;\n  position: relative;\n  text-align: center;\n}\n.fix--right-title{\n  position: absolute;\n  top: 0;\n  width: 100%;\n  z-index: 1;\n  background: #FFFFFF;\n}\n\n.content .left .item .tips {\n  display: inline-block;\n  min-width: 20rpx;\n  padding: 0 6rpx;\n  line-height: 30rpx;\n  text-align: center;\n  border-radius: 20rpx;\n  color: #fff;\n  background: #FF4531;\n  position: absolute;\n  right: 0;\n  top: 0;\n  font-size: 20rpx;\n  z-index: 2;\n}\n\n.content .left .active {\n  background: #fff;\n  color: #333333;\n  font-weight: bold;\n}\n\n.content .right {\n  /* overflow: scroll; */\n  width: 100%;\n  padding-left:170rpx;\n  box-sizing: border-box;\n  position: relative;\n  /* -webkit-overflow-scrolling: touch */\n}\n.content .right .title-cell {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: bold;\n  font-size: 28rpx;\n  color: #111334;\n  padding: 30rpx 24rpx;\n}\n\n.content .right .title-cell .sort {\n  font-weight: normal;\n  font-size: 24rpx;\n  color: #9D9FB8;\n  position: relative;\n  padding-right: 26rpx;\n}\n\n.content .right .title-cell .sort::before, .content .right .title-cell .sort::after{\n  content: '';\n  position: absolute;\n  right: 0;\n  width: 0;  \n  height :0;  \n  border: 4px solid transparent;\n  border-bottom: 4px solid #9D9FB8;\n}\n\n.content .right .title-cell .sort::before{\n  top: -1rpx;\n}\n\n.content .right .title-cell .sort::after{\n  bottom: -1rpx;\n  transform: rotate(180deg);\n}\n\n.content .right .title-cell .up, .content .right .title-cell .down {\n  color: #111334;\n}\n\n.content .right .title-cell .up::before{\n  border-bottom: 4px solid #111334;\n}\n\n.content .right .title-cell .down::after{\n  border-bottom: 4px solid #111334;\n}\n\n.content .right .title-cell {\n  display: flex;\n  align-items: center;\n}\n\n.alert_box {\n  background: none;\n  width: 580rpx;\n  height: 970rpx;\n  padding: 0;\n  top: 50%;\n  margin-top: -485rpx;\n  transform: translate(-50%, 0);\n}\n\n.alert_box .banner {\n  width: 100%;\n  height: 880rpx;\n  border-radius: 14rpx;\n  overflow: hidden;\n}\n\n.alert_box .close_img {\n  width: 50rpx;\n  height: 50rpx;\n  margin: 40rpx auto 0;\n}\n\n.vip_content {\n  width: 100%;\n  height: 100vh;\n}\n\n/* 秒杀 */\n\n.ms-alert-box {\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  z-index: 9999;\n  height: 100vh;\n}\n\n.ms-alert-shadow {\n  width: 100%;\n  height: 100%;\n  background: rgba(4, 4, 4, 1);\n  opacity: 0.5;\n}\n\n.ms-alert-nr {\n  width: 572rpx;\n  position: absolute;\n  left: calc(50% - 286rpx);\n  top: 30%;\n  z-index: 2;\n  background-color: #ff3131;\n  border-bottom-right-radius: 20px;\n  border-bottom-left-radius: 20px;\n  padding-bottom: 30rpx;\n}\n\n.scroll-view-item {\n  height: 100rpx;\n}\n\n.ms-alert-nr-title {\n  font-size: 34rpx;\n  color: #fff;\n  text-align: center;\n  padding-top: 30rpx;\n}\n\n.ms-alert-nr-text {\n  font-size: 24rpx;\n  color: #fff;\n  text-align: center;\n  padding-top: 4rpx;\n}\n\n.ms-alert-yhq {\n  width: 532rpx;\n  height: 157rpx;\n  border-radius: 8rpx;\n  background-color: #fff;\n  margin: 0 auto;\n  margin-top: 25rpx;\n  display: flex;\n  overflow: hidden;\n  position: relative;\n}\n\n.ms-alert-msg {\n  text-align: center;\n  color: #fff;\n  font-size: 24rpx;\n  padding-top: 34rpx;\n}\n\n.ms-alert-yhq-left {\n  width: 70%;\n  height: 100%;\n  position: relative;\n}\n\n.ms-alert-yhq-left::after {\n  content: '';\n  display: block;\n  right: -8rpx;\n  width: 14rpx;\n  height: 14rpx;\n  border-radius: 90%;\n  top: -7rpx;\n  position: absolute;\n  background-color: #ff3131;\n  z-index: 999;\n}\n\n.ms-alert-yhq-left::before {\n  content: '';\n  display: block;\n  bottom: -8rpx;\n  right: -8rpx;\n  width: 14rpx;\n  height: 14rpx;\n  border-radius: 90%;\n  position: absolute;\n  background-color: #ff3131;\n  z-index: 999;\n}\n\n.ms-alert-yhq-right {\n  width: 30%;\n  height: 100%;\n  position: relative;\n}\n\n.ms-alert-yhq-right::after {\n  content: '';\n  display: block;\n  position: absolute;\n  top: 0px;\n  left: 0;\n  width: 1rpx;\n  height: 100%;\n  border-left: 2px dashed rgba(245, 245, 245, 1);\n}\n\n.ms-alert-yhq-left-name {\n  display: flex;\n  padding-left: 16rpx;\n  padding-top: 20rpx;\n}\n\n.ms-yhq-type {\n  width: 73rpx;\n  height: 30rpx;\n  border-radius: 45rpx;\n  font-size: 20rpx;\n  color: #e4393b;\n  text-align: center;\n  line-height: 30rpx;\n  border: 1px solid rgba(230, 64, 63, 1);\n}\n\n.ms-yhq-text {\n  font-size: 28rpx;\n  color: #333;\n  margin-left: 16rpx;\n  margin-top: -2rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.ms-alert-yhq-left-tj {\n  font-size: 20rpx;\n  color: #666;\n  margin-top: 30rpx;\n  padding-left: 16rpx;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.ms-alert-yhq-left-time {\n  font-size: 20rpx;\n  padding-left: 16rpx;\n  color: #999;\n}\n\n.ms-jg {\n  font-size: 58rpx;\n  color: #e4393b;\n  text-align: center;\n  padding-top: 40rpx;\n}\n\n.ms-jg text {\n  font-size: 28rpx;\n  color: #e4393b;\n}\n\n.ms-btn {\n  width: 100rpx;\n  height: 34rpx;\n  background: rgba(228, 57, 59, 1);\n  border-radius: 17rpx;\n  line-height: 34rpx;\n  text-align: center;\n  color: #fff;\n  margin: 0 auto;\n  margin-top: 8rpx;\n}\n\n.ms-alert-nr-clear{\n  display: block;\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  bottom: -94rpx;\n  left: calc(50% - 30rpx);\n}\n.ms-alert-top-img{\n  position: absolute;\n  width: 100%;\n  height: 200rpx;\n  top: -200rpx;\n  left: 0;\n}\n\n.sm-hd-icon{\n  width: 26rpx;\n  height: 26rpx;\n  padding: 0;\n  margin: 0;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 10rpx;\n  margin-top: -2rpx;\n}\n.ms-lc{\n  display: block;\n  width: 100%;\n  padding-top: 20rpx;\n}\n.drug-store_image_box{\n  height:163px;overflow:hidden;\n  position: relative;\n}\n.drug-store_image_box::after{\n  content: '';\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000000;\n  opacity: 0.5;\n}\n.ms-alert-yhq-box{\n  height: auto;\n  height: 500rpx;\n  overflow-y: scroll;\n}\n\n.drug-store_coupons .cell_center {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n  color: #333333;\n  font-weight: 500;\n}\n.drug-store_coupons .cell_center .name {\n  font-weight: bold;\n}\n.drug-store_coupons .cell_center image {\n  width: 34rpx;\n  height: 34rpx;\n  margin-left: 10rpx;\n}\n\n.drug-store_coupons .cell_right {\n  font-size: 24rpx;\n  color: #999999;\n  margin-left: 20rpx;\n}\n.drug-store_coupons .coupons_list {\n  display: flex;\n  align-items: center;\n  padding-top: 20rpx;\n}\n\n.drug-store_coupons .coupons_list .coupons {\n  display: flex;\n  overflow-x: auto;\n  padding: 0 24rpx;\n  flex: 1;\n}\n\n.drug-store_coupons .coupons_list .coupon, .yb-tag {\n  background: #F93A4A;\n  padding: 8rpx;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #FFFFFF;\n  height: 44rpx;\n  line-height: 44rpx;\n  margin-right: 20rpx;\n  box-sizing: border-box;\n  display: inline-flex;\n  align-items: center;\n  flex-shrink: 0;\n}\n\n.yb-tag {\n  margin-left: 30rpx;\n}\n\n.arrow_icon {\n  width: 28rpx;\n  height: 28rpx;\n  margin-left: 4rpx;\n  flex-shrink: 0;\n}\n\n.drug-store_coupons .coupons_list .arrow_icon {\n  transform: rotate(90deg);\n  margin-left: 0;\n}\n\n.drug-store_coupons .coupons_list .coupon .text {\n  padding: 0 5rpx;\n}\n\n.drug-store_coupons .coupons_list .coupon image {\n  width: 2rpx;\n  height: 20rpx;\n  margin: 0 12rpx;\n}\n.drug-store_coupons .coupons_list .get_disable {\n  background: #F5F6FA;\n  color: #9D9FB8;\n}\n.drug-store_coupons .coupons_list .get_coupon {\n  background: #FEF4F3;\n  color: #F93A4A;\n}\n\n.drug-store_coupons .tag-list {\n  display: flex;\n  align-items: center;\n  padding: 0 24rpx;\n}\n\n.drug-store_coupons .tag-list .tags {\n  flex: 1;\n  overflow-x: auto;\n  display: flex;\n}\n\n.drug-store_coupons .tag-list .tag {\n  font-size: 22rpx;\n  border-radius: 4rpx;\n  display: inline-block;\n  height: 32rpx;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n  margin-right: 16rpx;\n  margin-top: 15rpx;\n  flex-shrink: 0;\n}\n\n.drug-store_coupons .tag-list .tag .line {\n  display: inline-block;\n  width: 2rpx;\n  height: 18rpx;\n  background: #F9AEB5;\n  margin: 0 8rpx;\n}\n\n.drug-store_coupons .tag-list .red {\n  border: 1rpx solid #FC9CA4;\n  color: #F93A4A;\n}\n\n.drug-store_coupons .tag-list .blue {\n  border: 1rpx solid #e8fff3;\n  color: #00b955;\n}\n\n.coupons-dialog {\n  height: 846rpx;\n  overflow-y: auto;\n  padding-bottom: 20rpx;\n}\n\n/* ui调整 */\n.theme-text {\n  color: #00b955;\n  border: none;\n  background: rgba(0,122,255,0.06);\n}\n\nscroll-view {\n  box-sizing: border-box;\n  -webkit-overflow-scrolling: touch;\n}\n\n.hot-list_box .cell_left {\n  width: 160rpx;\n  height: 160rpx;\n  background: #eee;\n  flex: inherit;\n  flex-shrink: 0;\n  position: relative;\n  margin: auto;\n  margin-bottom: 20rpx;\n}\n\n.hot-list_box .cell_left .over_status {\n  width: 110rpx;\n  height: 110rpx;\n  text-align: center;\n  line-height: 110rpx;\n  border-radius: 100rpx;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -55rpx 0 0 -55rpx;\n  font-size: 24rpx;\n}\n\n.hot-list_box .cell_center {\n  width: 100%;\n  /* display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  overflow:hidden; */\n}\n\n.hot-list_box .cell_center .name {\n  width: 200rpx;\n  color: #292626;\n  font-weight: bold;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  font-size: 26rpx;\n  line-height: 37rpx;\n}\n\n.hot-list_box .cell_center .name text {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n\n.hot-list_box .cell_center .spec {\n  color: #9D9FB8;\n  font-size: 24rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n  word-break: break-all;\n}\n\n.hot-list_box .cell_center .detail {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 44rpx;\n}\n\n.hot-list_box .cell_center .common-line-price {\n  margin: 0;\n  font-size: 22rpx;\n}\n\n.hot-list_box .cell_center .detail .price {\n  color: #e02e24;\n  font-weight: bold;\n  font-size: 32rpx;\n}\n\n.hot-list_box .cell_center .detail .price .symbol {\n  font-size: 24rpx;\n  font-weight: bold;\n  color: #e02e24;\n}\n\n.hot-list_box {\n  display: flex;\n  background: none;\n  padding-left: 12rpx;\n  overflow-x: scroll;\n}\n\n.hot-list_box .cell {\n  padding: 0;\n  width: 200rpx;\n  display: inline-block;\n  background: #FFFFFF;\n  border-radius: 8rpx;\n  margin: 0 12rpx;\n  height: 327rpx;\n}\n\n.hot-list_box .cell::before {\n  border: 0;\n}\n\n.hot-list_box .coupon-tag {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 150rpx;\n  height: 36rpx;\n  text-align: center;\n  line-height: 36rpx;\n  color: #FFFFFF;\n  font-size: 22rpx;\n  background: linear-gradient(270deg,#fd6c81, #f93a4a);\n  border-radius: 20rpx;\n  border-bottom-left-radius: 0;\n  box-sizing: border-box;\n}\n\n/* 公用加减按钮样式 */\n\n.cart_button {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.cart_button .bubble {\n  position: absolute;\n  right: -6rpx;\n  top: -6rpx;\n  width: 30rpx;\n  height: 30rpx;\n  border-radius: 1rpx solid #FFFFFF;\n  background: #FF4B33;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  text-align: center;\n  border-radius: 30rpx;\n}\n\n.cart_button .text {\n  padding: 0 20rpx;\n  font-size: 26rpx;\n}\n\n.cart_button .button {\n  padding: 0 10rpx;\n}\n\n.cart_button .button view {\n  width: 44rpx;\n  height: 44rpx;\n  line-height: 36rpx;\n  border-radius: 44rpx;\n  text-align: center;\n  background: #00b955;\n  color: #fff;\n  font-size: 44rpx;\n}\n\n.cart_button .less view {\n  border: 1px solid #00b955;\n  background: none;\n  color: #00b955;\n  box-sizing: border-box;\n  line-height: 28rpx;\n}\n\n::-webkit-scrollbar{\n\twidth: 0;\n\theight: 0;\n\tcolor: transparent;\n}\n.drugStore-alert{\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 9999;\n  top: 0;\n  left: 0;\n}\n.drugStore-alert-img{\n  position: relative;\n  z-index: 2;\n  width: 702rpx;\n  margin: 0 auto;\n  padding-top: 200rpx;\n}\n.drugStore-alert-img image{\n  display: block;\n}\n.drugStore-alert-back{\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  background-color: #000000;\n  opacity: 0.3;\n}\n.drugStore-alert-btn{\n  width: 220rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  border: 2rpx solid #ffffff;\n  border-radius: 46rpx;\n  font-size: 32rpx;\n  color: #fff;\n  text-align: center;\n  position: relative;\n  z-index: 3;\n  margin: 0 auto;\n  margin-top: 150rpx;\n}\n.inquiry_icon{\n  display: block;\n  width: 151rpx;\n  height: 128rpx;\n}\n.inquiry_info{\n  margin-left: -120rpx;\n}","js":"// pages/onlineGoods/drugList/drugList.js\nconst app = getApp()\nlet navBarHeight = app.globalData.navBarHeight;\nimport {\n  ajax,\n  open_wechatMap,\n  isLogonPhone,\n  cdnStaticResourceUrl,\n  wxReportAnalytics,\n  getCompleteUrl\n} from \"../../../utils/util\";\nimport getLocation from '../../../utils/getLocation.js'\n\n// Object.value Polyfill\nif (!Object.values) Object.values = function(obj) {\n  if (obj !== Object(obj))\n    throw new TypeError('Object.values called on a non-object');\n  var val = [],\n    key;\n  for (key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      val.push(obj[key]);\n    }\n  }\n  return val;\n}\n\nexport default {\n  data: function() {\n    return {\n      isCode:false,//是否扫码进来\n      isDefault:false,\n      closeStatus:false,\n      isInquiryAlert:false,\n      pageType: false,\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      isAlertType: false,\n      isIPX: getApp().globalData.isIPX,\n      checkNewUserData: {},\n      gz_type: false,\n      isAlert: false,\n      drugStore: {},\n      goodsArea: {}, //在线专区\n      areaId: 0,\n      goodsId: null,\n      isAddCart: null,\n      cart: Taro.getStorageSync('cart') || {},\n      cartLength: 0,\n      areaTips: {},\n      pageShow: false,\n      drugStoreChange: false,\n      logonPhone: false,// 判断是否绑定手机号\n      showBox: 1,\n      sess_key: getApp().globalData.sess_key,\n      isSearch: 1,\n      scrollHeight:  500,\n      drugStoreHeight: 310,\n      hotGoodsListHeight: 200,\n      drugStoreTitle: '',//设置药店主页title\n      longitude: null,\n      latitude: null,\n      url_link: cdnStaticResourceUrl,\n      drugStoreDisable: false,\n      activityStatus:'',\n      activityData:null,\n      couponsList: {},\n      couponsDialog: false,\n      isShowLoad: true,\n      resData: '',\n      orderByType: '',//商品列表价格排序\n      hotGoodsList: [],\n      areaName: '',\n      higherNav: true,//通栏导航\n      menuFixed: false,\n      contentFixed: false,\n      receiveStatusTxt: [{\n          'text':'领取',\n          'number': '1'\n        },{\n          'text':'已领光',\n          'number': '3'\n        },{\n        'text':'已领取',\n        'number': '2'\n      },{\n        'text':'去使用',\n        'number': '2'\n      }],\n      promoterAccountId: '',//推广人员ID\n      purchaseBanner: {},\n      throttleEnterTime: 0,\n      publicDomain: app.globalData.publicDomain,\n      scrollTop: '',\n      brandId: ''\n    };\n  },\n  onLoad: function(options) {\n    // 设置来源\n    if (options.source) {\n      getApp().globalData.globalSource = options.source;\n    }\n    if (options.type == 5) {\n      this.setData({\n        isCode:true\n      })\n    }\n    // options.drugStoreId = null;\n    // options.scene = '1-347-396-2'\n    let longitude = (app.address_data && app.address_data.longitude) ? app.address_data.longitude : null;\n    let latitude = (app.address_data && app.address_data.latitude) ? app.address_data.latitude : null;\n    \n    // 设置导航栏高度\n    this.setData({\n      navBarHeight,\n      longitude,\n      latitude,\n      isIPX: app.globalData.isIPX,\n      publicDomain: app.globalData.publicDomain,\n      hasBackIcon: app.globalData.hasBackIcon\n    })\n    if (options.drugStoreId) {\n      this.data.drugStore.id = options.drugStoreId\n      this.setData({\n        drugStore: this.data.drugStore,\n        areaId: options.areaId,\n        goodsId: options.goodsId,\n        isAddCart: options.isAddCart\n      })\n    } else if (options.scene) {\n      //扫码小程序码进入\n      \n      let scene = options.scene.split('-');\n      this.parseScene(scene);\n    }\n  },\n  onShow: function() {\n    this.setData({\n      showBox:1\n    })\n    if (this.data.activityData) {\n      if(!app.globalData.sess_key) return false;\n      this.handleTolink(this.data.activityData, res=> {\n        if (res.isB2c == 1) {\n          Taro.redirectTo({\n            url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?scene=${ JSON.stringify(this.data.activityData) }`\n          }) \n        }else{\n          // lbs走正常流程\n          this.getServiceStatus();\n        }\n      })\n    }else{\n      // 正常流程\n      this.getServiceStatus();\n    }\n    //获取门店分享banner\n    this.getPurchaseBanner();\n  },\n  //解析option scene参数\n  parseScene(scene) {\n    console.log(scene.length>1?'秒杀活动扫码':'正常扫码')\n    if (scene.length > 1){\n      // 秒杀活动扫码 scene数组>渠道类型-活动id-药店id-活动类型，示例：1-1000-10817-2\n      let data = {\n        actId: scene[1],\n        drugstoreId: scene[2],\n        marketingActType: scene[3]\n      }\n      // 扫码购埋点\n      getApp().globalData.globalSource = `internal_b_actcode_${data.drugstoreId}`\n      // 扫码购埋点\n      let reportAnalyticsData = {\n        drugstore_id: data.drugstoreId,\n        activity_id: data.actId,\n        activity_type: data.marketingActType\n      }\n      \n      getApp().globalData.burySpotSDK.track('activity_scan_view', reportAnalyticsData);\n      wxReportAnalytics('activity_scan_view',reportAnalyticsData)\n      // data赋值\n      this.setData({\n        activityStatus: scene[3],\n        [\"drugStore.id\"]: scene[2],\n        activityData:data\n      })\n      // 判断是否登录\n      if (!getApp().globalData.sess_key) {\n        Taro.navigateTo({\n          url: `/pages/note/login/login?reportAnalyticsData=${JSON.stringify(reportAnalyticsData)}`,\n        })\n        return false\n      }\n    }else{\n      // 正常扫码进药店\n      // 设置来源\n      getApp().globalData.globalSource = 'internal_b_mpcode';\n      this.data.drugStore.id = scene.join()\n\n      this.setData({\n        drugStore: this.data.drugStore\n      })\n    }\n  },\n  // 关闭引导弹框\n  handleAlert(){\n    this.setData({\n      isInquiryAlert:false\n    })\n  },\n  // 判断函数\n  handleTolink(options, callback){\n    let data = {\n      drugstoreId:options.drugstoreId\n    }\n    ajax('get', 'miniapp/miniappDrugstore/checkIsB2cDrugstore', data, res => {\n      if (res.data.code == 0 && res.data.result) {\n        callback && callback(res.data.result)\n        this.setData({\n          // pageShow: true\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 顶部滚动监听\n   */\n  pageScroll(e){\n      this.setData({\n        closeStatus:true\n      })\n      // 导航条定位\n      if(e.detail.scrollTop >= this.data.navBarHeight) {\n          if (this.data.higherNav) {\n            this.setData({\n              higherNav: false\n            })\n          }\n\n      }else {\n        if (!this.data.higherNav) {\n          this.setData({\n            higherNav: true\n          })\n        }\n      }\n\n\n      // 隐藏公告区域\n      //80问诊入口占用高度\n      let topHeight = this.data.serviceStatus && this.data.serviceStatus.lzDrugstoreStatus ? this.data.drugStoreHeight+80 : this.data.drugStoreHeight;\n      if(e.detail.scrollTop >= topHeight - 50) {\n        if (!this.data.menuFixed) {\n          this.setData({\n            menuFixed: true\n          })\n        }\n       \n      }else {\n        if (this.data.menuFixed) {\n          this.setData({\n            menuFixed: false\n          })\n        }\n        \n      }\n\n      // 左侧菜单\n      //50代表悬浮搜索的高度\n      if(e.detail.scrollTop >= topHeight - 50 + this.data.hotGoodsListHeight) {\n        if (!this.data.scrollTop) {\n          this.setData({\n            scrollTop: true\n          })\n        }\n         \n      } else {\n        if (this.data.scrollTop) {\n          this.setData({\n            scrollTop: false\n          })\n        }\n      }\n    // // 截流函数\n    // this.throttle(comp, 400)()\n  },\n  //节流\n  throttle(fn, interval) {\n    var enterTime = this.data.throttleEnterTime;//触发的时间\n    var gapTime = interval || 300 ;//间隔时间，如果interval不传，则默认300ms\n    return ()=> {\n      var backTime = new Date();//第一次函数return即触发的时间\n      if (backTime - enterTime > gapTime) {\n        fn.apply(this, arguments);\n        this.data.throttleEnterTime = backTime;//赋值给第一次触发的时间，这样就保存了第二次触发的时间\n      }\n    };\n  },\n  tologin() {\n    Taro.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  handleCoupon(){\n    Taro.showLoading({\n      title: '加载中',\n      mask: true\n    })\n    ajax('get', 'mimiapp/homepage/checkNewUser', this.data.activityData, res => {\n      Taro.hideLoading();\n      if(res.data.code == 0){\n        let data = res.data.result;\n        if(data.isNewUser) this.data.isAlertType = true;\n        //推广banner和扫码购弹窗同时存在，只展示推广banner\n        this.setData({\n          isAlert: this.data.purchaseBanner.bannerImage ? false : data.isNewUser,\n          checkNewUserData: data,\n          isAlertType: this.data.isAlertType\n        })\n      }else{\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  handleInit(){\n    let _this = this\n    this.setData({\n      pageType:true\n    });\n    if(!this.data.isShowLoad) return false;\n    console.log(_this.data.drugStore)\n    // 如果有扫码购标识，并且登录，并且当前页面没弹出过优惠券弹框\n    if (this.data.activityStatus && getApp().globalData.sess_key && !this.data.isAlertType){\n      // 如果登录查询扫码购的优惠券列表\n      this.handleCoupon();\n    }\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      sess_key: app.globalData.sess_key\n    })\n    if (this.data.showBox == 2 && this.data.sess_key) {\n      console.log(this.data.sess_key)\n      isLogonPhone((callback) => {\n        if (callback == 2) {\n          Taro.removeStorageSync('sess_key');\n          getApp().globalData.sess_key = null;\n          this.setData({\n            sess_key: null\n          })\n          return false;\n        }\n        if (!callback) {\n          this.selectComponent('#vipCard').getCardDetail();\n        } else {\n          this.setData({\n            logonPhone: true\n          })\n        }\n      })\n    }\n    this.getCouponsList();\n    // 判断是否有经纬度,有则用首页经纬度，没有重新请求\n    if (app.address_data.latitude) {\n      this.getDrugStore(app.address_data.longitude, app.address_data.latitude);\n    } else {\n      getLocation.init(function(res){\n        _this.getDrugStore(res.longitude, res.latitude)\n      })\n    }\n  },\n  //获取药店主页推广banner\n  getPurchaseBanner(){\n    let purchaseBannerLog = Taro.getStorageSync('purchaseBannerLog') || [];\n    let start;\n    purchaseBannerLog.forEach(item=>{\n      if(item.storeId == this.data.drugStore.id) start = item.time;\n    })\n    let end = Date.parse(new Date());\n    //1天只展示一次\n    if( start && (end - start)/(24*60*60*1000) < 1) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true\n    })\n    ajax('get', 'miniapp/notify/getPurchaseBanner', {\n      adType: 13,\n      drugstoreId: this.data.drugStore.id\n    }, res => {\n      Taro.hideLoading();\n      if(res.data.code == 0){\n        // 记录当前收藏时间戳\n        purchaseBannerLog.push({\n          time: Date.parse(new Date()),\n          storeId: this.data.drugStore.id\n        })\n        Taro.setStorage({\n          key:\"purchaseBannerLog\",\n          data: purchaseBannerLog\n        })\n        let resPurchaseBanner = {};\n        if(res.data.result && res.data.result.length > 0) {\n          resPurchaseBanner = res.data.result[0];\n        }\n        this.setData({\n          purchaseBanner: resPurchaseBanner\n        })\n      }else{\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  //点击门店分享图跳转\n  toLink(e) {\n    let target = e.currentTarget.dataset.item;\n    //0是拼团商品详情页 1是我想拼商品详情页 2是自定义页面\n    if (target.bannerUrl) {\n      if (target.bannerUrlType == 2) {\n        if (target.activityPageShare) {\n          const activityPageShare = JSON.stringify(target.activityPageShare)\n          if (target.bannerUrl.indexOf('?') > -1) {\n            target.bannerUrl = `${ target.bannerUrl }&activityPageShare=${ encodeURIComponent(activityPageShare) }`\n          } else {\n            target.bannerUrl = `${ target.bannerUrl }?activityPageShare=${ encodeURIComponent(activityPageShare) }`\n          }\n        }\n        // 参数格式化        \n        let url = getCompleteUrl(target.bannerUrl);\n        Taro.navigateTo({\n          url: `/pages/webView/webView?link=${ encodeURIComponent(url) }`\n        })\n      } else if (target.bannerUrlType == 3) {//跳转小程序页面\n        Taro.navigateTo({\n          url: target.bannerUrl\n        })\n      }\n    }\n  },\n  //价格排序\n  priceSort() {\n    if(!this.data.orderByType || this.data.orderByType == 'DESC') {\n      this.data.orderByType = 'ASC';\n    }else if( this.data.orderByType == 'ASC') {\n      this.data.orderByType = 'DESC';\n    }\n    this.selectComponent('#OnlineGoods').getOnlineGoods(this.data.goodsId, this.data.orderByType);\n    this.setData({\n      orderByType: this.data.orderByType\n    })\n  },\n  scancodeOpen() {\n    // 判断是否登录\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: `/pages/note/login/login`\n      })\n      return false;\n    }\n    Taro.scanCode({\n      success: (res)=> {\n        console.log('扫码结果', res)\n        if(res.result) this.searchDrug(res.result);\n      },\n      fail(res){\n        console.log(res)\n      }\n    })\n    this.data.isShowLoad = false\n  },\n  searchDrug(barCode) {\n    ajax('get', 'mimiapp/drugStoreClassify/getMedicinesInfoByBarCode', {\n      drugstoreId: this.data.drugStore.id,\n      barCode: barCode\n    }, res => {\n      console.log('搜索结果', res)\n      if(res.data.code == 0 && res.data.result){\n        //判断商品是否在店铺展示，展示时直接定位分类商品加购，不展示时直接加购不会显示在店铺\n        if(res.data.result.medicinesIsShow) {\n          this.setData({\n            isAddCart: 1,\n            areaId: res.data.result.classifyId,\n            areaName: res.data.result.classifyName\n          }, ()=>{\n            this.selectComponent('#OnlineGoods').getOnlineGoods(res.data.result.medicinesId);\n          })\n        }else {\n          let cart = Taro.getStorageSync('cart') || {};\n          res.data.result.number = 0;\n          JSON.stringify(cart) != '{}' && Object.values(cart[this.data.drugStore.id]).forEach(item => {\n            if(item.medicinesId == res.data.result.medicinesId) {\n              res.data.result.number = item.number;\n            }\n          })\n          this.selectComponent('#OnlineGoods').addDrug(null, res.data.result, false);\n        }\n      }else {\n        Taro.showModal({\n          content: res.data.msg,\n          showCancel: false,\n          confirmText: '知道了',\n          confirmColor: getApp().globalData.mainColor\n        })\n      }\n    })\n  },\n  // 绑定手机号回调主页面方法\n  loginPhone_fun: function () {\n    this.setData({\n      logonPhone: false\n    })\n  },\n  //购物车专区同步\n  exFun() {\n    let cart = Taro.getStorageSync('cart') || {};\n    this.data.areaTips = {}\n    if (cart[this.data.drugStore.id]) {\n      Object.values(cart[this.data.drugStore.id]).forEach((item, index) => {\n        if (this.data.areaTips[item.classifyId]) {\n          this.data.areaTips[item.classifyId].number += item.number;\n        } else {\n          this.data.areaTips[item.classifyId] = {\n            number: item.number\n          }\n        }\n        this.data.areaTips[item.classifyId].goodsId = Object.values(cart[this.data.drugStore.id])[index] ? Object.values(cart[this.data.drugStore.id])[index].medicinesId : null\n      })\n    }\n    this.setData({\n      areaTips: this.data.areaTips,\n      cartLength: cart[this.data.drugStore.id] ? Object.values(cart[this.data.drugStore.id]).length : 0\n    })\n  },\n  //切换内容\n  switchBox(e){\n    this.setData({\n      showBox: e.currentTarget.dataset.num\n    })\n    //点击店铺会员触发\n    if (this.data.showBox == 3 && this.data.sess_key){\n      console.log(this.data.sess_key)\n      isLogonPhone((callback) => {\n        if (callback == 2) {\n          Taro.removeStorageSync('sess_key');\n          getApp().globalData.sess_key = null;\n          this.setData({\n            sess_key: null\n          })\n          return false;\n        }\n        if (!callback) {\n          this.selectComponent('#vipCard').getCardDetail();\n        } else {\n          this.setData({\n            logonPhone: true\n          })\n        }\n      })\n    }\n  },\n  //获取热销爆款商品\n  getHotGoods() {\n    let data = {};\n    data = {\n      drugstoreId: this.data.drugStore.id,\n      channel: 'MINI'\n    }\n    ajax('get', 'product/ykq/mini/v1/getDrugstoreGoodsByHotSale', data, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.data.hotGoodsList = res.data.result;\n        let cart = Taro.getStorageSync('cart') || {};\n        //初始数据\n        this.data.hotGoodsList.list && this.data.hotGoodsList.list.forEach((item, index)=>{\n          if (cart[this.data.drugStore.id] && cart[this.data.drugStore.id][item.medicinesId]){\n            item.number = cart[this.data.drugStore.id][item.medicinesId].number\n          }else {\n            item.number = 0;\n          }\n        })\n        \n        this.setData({\n          hotGoodsList: this.data.hotGoodsList\n        }, ()=>{\n          this.computeScrollViewHeight();\n        })    \n      }else{\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  addDrug(e){\n    let item = e.currentTarget.dataset.item;\n    let index = e.currentTarget.dataset.index;\n    item.type = 'hotGoods';   \n    this.selectComponent('#OnlineGoods').addDrug(null, item, null, res=>{\n      this.data.hotGoodsList.list[index].number = res;\n      this.setData({\n        hotGoodsList: this.data.hotGoodsList\n      })\n    });\n  },\n  hotGoodsChange(e){\n    let currentItem = e.detail;\n    this.data.hotGoodsList.list && this.data.hotGoodsList.list.forEach(item => {\n      if(currentItem) {\n        if(item.medicinesId == currentItem.medicinesId) item.number= currentItem.number;\n      }else {\n        item.number= 0;\n      }\n    })\n    this.setData({\n      hotGoodsList: this.data.hotGoodsList\n    })\n  },\n  //切换专区\n  switchArea(e) {\n    let item = e.currentTarget.dataset.item\n    this.setData({\n      areaName: item.classifyName,\n      areaId: item.classifyId,\n      isAddCart: null,\n      toView: 'b0',\n      orderByType: ''\n    })\n    let goodsId = this.data.areaTips[this.data.areaId] ? this.data.areaTips[this.data.areaId].goodsId : null;\n    this.selectComponent('#OnlineGoods').getOnlineGoods(goodsId);\n  },\n  //去搜索\n  toSerach() {\n    let drugStoreId = this.data.drugStore.id;\n    Taro.navigateTo({\n      url: '/pages/onlineGoods/search/search?drugStoreId=' + drugStoreId\n    })\n  },\n  //获取药店地址\n  getDrugStore(longitude, latitude) {\n    let data = {\n      longitude: longitude,\n      latitude: latitude,\n      drugstoreId: this.data.drugStore.id\n    }\n    ajax('get', `miniapp/miniappDrugstore/getDrugstoreInfo`, data, res => {\n      if (res.data.code == 0) {\n        // 赋值\n        this.setData({\n          drugStore: res.data.result,\n          drugStoreTitle: res.data.result.drugstoreName.length > 7 ? `${res.data.result.drugstoreName.substr(0, 7)}...` : res.data.result.drugstoreName,\n          gz_type: res.data.result.isAttention ? res.data.result.isAttention == 0 ? false : true:false,\n          pageShow: true\n        })\n        let data = res.data.result;\n        // 问诊引导弹框判断逻辑\n        let status = Taro.getStorageSync('guideShow')\n        if(!status && data.famousDoctorConfigStatus == 0){\n          this.setData({\n            isInquiryAlert:true,\n          })\n          Taro.setStorageSync('guideShow', 1);\n        }\n        if (data) {\n          app.drugStore = {\n            cityCode: data.cityCode,\n            city: data.city\n          };\n          this.getOnlineGoodsArea();\n          this.computeScrollViewHeight();\n          // this.getCouponsList();\n          this.exFun();\n        } else {\n          Taro.showModal({\n            content: '暂无位置信息，请检查软件设置',\n            showCancel: false,\n            confirmText: '知道了',\n            success(res) {\n              if (res.confirm) {\n                Taro.navigateBack({\n                  delta: 1\n                })\n              }\n            }\n          })\n        }\n      } else if (res.data.code == -1) {//药店被禁用或下架\n        this.setData({\n          drugStoreDisable: true,\n          pageShow: true\n        })\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg\n        })\n      }\n    })\n  },\n  //获取在线专区\n  getOnlineGoodsArea() {\n    let url = this.data.isDjk ? `miniapp/bighealth/drugstore/getDrugstoreClassify` : `mimiapp/drugStoreClassify/getDrugstoreClassify`;\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax('get', url, {\n      drugstoreId: this.data.drugStore.id\n    }, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0 && res.data.result && res.data.result.length > 0) {\n        this.setData({\n          goodsArea: res.data.result,\n          areaId: this.data.areaId || res.data.result[0].classifyId,\n          areaName: res.data.result[0].classifyName\n        })\n        if(this.data.showBox == 1) {\n          this.selectComponent('#OnlineGoods').getOnlineGoods(this.data.goodsId);\n          this.getHotGoods();\n        }\n      } else {\n        this.setData({\n          goodsArea: res.data.result,\n        })\n      }\n    })\n  },\n  //获取优惠券列表\n  getCouponsList() {\n    Taro.showLoading({\n      title: '加载中...',\n      mask: true\n    })\n    ajax('get', 'miniapp/marketing/getDrugstoreMarketingInfo', {\n      drugstoreId: this.data.drugStore.id\n    }, res => {\n      Taro.hideLoading({})\n      if(res.data.code == 0) {\n        this.setData({\n          couponsList: res.data.result\n        })\n        this.computeScrollViewHeight();\n      }\n    })\n  },\n  moreCoupons() {\n    this.setData({\n      couponsDialog: true\n    })\n  },\n  userCoupon(e) {\n    console.log(e)\n    let coupon = e.type == 'action' ? e.detail : e.currentTarget.dataset.coupon;\n    if(coupon.receiveStatus == 1 || coupon.receiveStatus == 2) {\n      return false;\n    }\n    // 判断是否登录\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: `/pages/note/login/login`\n      })\n      return false;\n    }\n    \n    if(coupon.receiveStatus == 0){\n      this.pullCoupon(coupon);\n    }else if(coupon.receiveStatus == 3) {\n      //跳转商品聚合页面\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/search/search?coupon=${ JSON.stringify(coupon) }&drugStoreId=${ this.data.drugStore.id }&drugStoreName=${ this.data.drugStore.drugstoreName }`\n      })\n    }\n  },\n  pullCoupon(coupon) {\n    ajax('get', 'couponController/pullCoupon', {\n      drugstoreId: this.data.drugStore.id,\n      couponId: coupon.id\n    }, res => {\n      if(res.data.code == 0) {\n        Taro.showToast({\n          title: '领取成功',\n          icon: 'none'\n        })\n        this.data.couponsList && this.data.couponsList.coupons.forEach(item=>{\n          if(item.id == coupon.id) {\n            item.receiveStatus = item.couponType == 'GOODS' ? 3 : 2;\n            item.couponUseStartDate = res.data.result && res.data.result.couponUseStartDate;\n            item.couponUseEndDate = res.data.result && res.data.result.couponUseEndDate;\n          }\n        })\n        this.setData({\n          couponsList: this.data.couponsList\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  closeBanner(){\n    this.setData({\n      purchaseBanner: {}\n    })\n  },\n  toDrugStoreDetail() {\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugStoreDetail/drugStoreDetail?drugStoreId=${ this.data.drugStore.id }`,\n    })\n  },\n  //联系药店\n  callPhone: function (e) {\n    Taro.makePhoneCall({\n      phoneNumber: e.currentTarget.dataset.phone,\n    })\n  },\n  //查看地图\n  openMap: function (e) {\n    var info = e.currentTarget.dataset.info;\n    console.error(info)\n    open_wechatMap(info.storeLatitude, info.storeLongitude, info.drugstoreName, info.address);\n  },\n  //计算 scroll-view 的高度\n  computeScrollViewHeight() {\n    Taro.hideLoading();\n    //获取屏幕可用高度\n    let screenHeight = Taro.getSystemInfoSync().windowHeight;\n    let query = Taro.createSelectorQuery()\n\n    query.select('#drugStoreHeader').boundingClientRect();\n    query.select('#hotGoodsList').boundingClientRect();\n    \n    query.exec((res) => {\n      console.log(res)\n      if (res[0]) {\n        //计算 scroll-view 的高度\n        let scrollHeight = screenHeight - this.data.navBarHeight - 90;//40导航高度+50搜索条高度\n        this.setData({\n          scrollHeight: scrollHeight,\n          drugStoreHeight: res[0].height\n        })\n      }\n      this.data.hotGoodsListHeight= res[1] ? res[1].height : 0;\n    })\n  },\n  handleFollow(){\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n    }else{\n      if (this.data.gz_type) {\n        Taro.showToast({\n          title: '已取消，将无法在[我的→我关注的店铺]中找到我',\n          icon: 'none'\n        })\n        this.setData({\n          gz_type: false,\n          [\"drugStore.attentionUserCount\"]: this.data.drugStore.attentionUserCount-1\n        })\n        this.getFollow(0);\n      } else {\n        Taro.showToast({\n          title: '已关注，您可在[我的→我关注的店铺]中找到我',\n          icon: 'none'\n        })\n        this.setData({\n          gz_type: true,\n          [\"drugStore.attentionUserCount\"]: this.data.drugStore.attentionUserCount+1\n        })\n        this.getFollow(1);\n      }\n    }\n  },\n  getFollow(type){\n    ajax('post', 'miniapp/miniappDrugstore/drugstoreAttention', {\n      drugstoreId: this.data.drugStore.id,\n      status:type // 0：取消关注   1：关注\n    }, res => {\n      console.log(res);\n    })\n  },\n  toOrderDetail(e){\n    let goodsId = e.currentTarget.dataset.item.medicinesId;\n    let classifyId = e.currentTarget.dataset.item.classifyId;\n    let drugStoreId = this.data.drugStore.id;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${goodsId}&drugStoreId=${drugStoreId}&classifyId=${classifyId}`\n    })\n  },\n  onShareAppMessage: function (e) {\n    let path = this.data.isDjk ? `/pages/onlineGoods/drugList/drugList?drugStoreId=${ this.data.drugStore.id }&src_whyb=${ this.data.isDjk }` : `/pages/onlineGoods/drugList/drugList?drugStoreId=${ this.data.drugStore.id }`;\n    let shareObj = {\n      title: this.data.drugStore.drugstoreName,\n      path,\n      imageUrl: this.data.drugStore.doorheadPhoto || this.data.url_link + 'images/share.png',\n    };\n    return shareObj;\n  },\n  //向用户发起订阅请求\n  subscribeMessage() {\n    this.setData({\n      isAlert: false\n    })\n    let tmplIds = ['osYBy0kFCHt6qiQd0xb2valQr6rr3afPxYja_y6ZztA','HBB_4Lbg3XAFiAOM9jTVADNC-ddTQBKFRM4mzfIOW_o'];\n    if(!Taro.requestSubscribeMessage) return;\n    Taro.requestSubscribeMessage({\n      tmplIds: tmplIds,\n      success (res) { \n        ajax('get', 'api/wechat/saveSubscribeUser', {\n          templateId: tmplIds[0],\n          status: res && res[tmplIds[0]]\n        }, res1 => {\n          console.log('订阅结果上报', res, res1)\n        })\n      }\n    })\n  },\n  pageScrolltolower(){\n    this.selectComponent('#famousDoctor').onBottom();\n  },\n  //公众号卡片跳转，根据服务状态判断是否\n  getServiceStatus() {\n    ajax('post', 'api/patientinfo/getServiceStatus2', { \n      poiId: this.data.drugStore.id,\n      type: 'ykq'\n    }, res => {\n      if (res.data.code == 0) {\n        // skipUrl 1 :药店首页  2 :扫码补方  3:缺省页\n        console.log(res.data.result)\n        if(res.data.result.skipUrl == 1){\n          this.setData({\n            serviceStatus: res.data.result\n          })\n          // 走药店逻辑\n          this.handleInit();\n        }else if(res.data.result.skipUrl == 2){\n          // 跳扫码补方\n          Taro.redirectTo({\n            url: `/pages/scan/pages/addInformation/addInformation?scene=${(res.data.result.organSign)}`,\n          })\n        }else{\n          // 展示缺省\n          this.setData({\n            isDefault:true\n          })\n        }\n      }else {\n        // 展示缺省\n        this.setData({\n          isDefault:true\n        })\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  //跳转扫码补方\n  toInquiry() {\n    Taro.navigateTo({\n      url: `/pages/scan/pages/addInformation/addInformation?scene=${ this.data.serviceStatus.organSign}&pageFrom=drugList`,\n    })\n  }\n};\n"},"convertDir/pages/onlineGoods/drugStoreDetail/drugStoreDetail":{"json":{"countDown":"/component/countDown/countDown","missingData-view":"/component/missingData/missingData","shopCart":"/component/shopCart/shopCart"},"js":"const app = getApp();\nimport {\n  ajax,\n  open_wechatMap,\n  getH5AbsoluteUrl,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      drugStoreId: null,\n      detailsInfo: {},\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.drugStoreId = options.drugStoreId;\n\n    this.getData();\n  },\n  onShow(){\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n  },\n  /**\n   * 获取店铺活动数据\n   */\n  getData: function () {\n    ajax('GET', 'miniapp/ykqDrugStore/getDrugstoreDetails', { drugstoreId: this.data.drugStoreId }, res=> {\n      if(res.data.code == 0) {\n        this.setData({\n          detailsInfo: res.data.result\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      } \n    })\n  },\n  /**\n   * 点击关注\n   */\n  handleFollow() {\n    const _this = this;\n    if (!getApp().globalData.sess_key) {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n    } else {\n      if (Object.keys(_this.data.detailsInfo).length) {\n        if (_this.data.detailsInfo.ykqDrugstore.isAttention) {\n          Taro.showToast({\n            title: '已取消，将无法在[我的→我关注的店铺]中找到我',\n            icon: 'none'\n          })\n          _this.data.detailsInfo.ykqDrugstore.isAttention = 0;\n          _this.data.detailsInfo.ykqDrugstore.attentionUserCount -= 1;\n          _this.getFollow(0);\n        } else {\n          Taro.showToast({\n            title: '已关注，您可在[我的→我关注的店铺]中找到我',\n            icon: 'none'\n          })\n          _this.data.detailsInfo.ykqDrugstore.isAttention = 1;\n          _this.data.detailsInfo.ykqDrugstore.attentionUserCount += 1;\n          _this.getFollow(1);\n        }\n        _this.setData({\n          detailsInfo: _this.data.detailsInfo\n        })\n      }\n    }\n  },\n  getFollow(type) {\n    ajax('post', 'miniapp/miniappDrugstore/drugstoreAttention', {\n      drugstoreId: this.data.drugStoreId,\n      status: type // 0：取消关注   1：关注\n    }, res => {\n      console.log(res);\n    })\n  },\n  //查看地图\n  openMap: function (e) {\n    var info = e.currentTarget.dataset.info;\n    open_wechatMap(info.storeLatitude, info.storeLongitude, info.drugstore_name, info.address);\n  },\n  //联系药店\n  callPhone: function (e) {\n    Taro.makePhoneCall({\n      phoneNumber: e.currentTarget.dataset.phone,\n    })\n  },\n  //店铺资质\n  openDetail() {\n    let url = getH5AbsoluteUrl(`#/qualification?drugstoreId=${this.data.drugStoreId}`);\n    Taro.navigateTo({\n      url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n    })\n  }\n};","wxml":"\n  <view class=\"drugStoreDetail-auto-container\">  \n    <wxs module=\"filter\">\n\tvar formatFollowingNum = function(value) {\n\t\tvar data = value > 10000 ? parseInt(value / 10000) + 'w+' : value;\n\t\treturn data\n\t}\n\tmodule.exports = {\n\t\tformatFollowingNum: formatFollowingNum\n\t}\n\n    </wxs>\n    <navBar title-text=\"店铺详情\"></navBar>\n    <view :class=\"[container,(isDjk?'djk':'')]\" v-if=\" !loading \">    \n      <view class=\"banner-content\">  \n        <view class=\"header-banner\"> \n          <image :src=\" detailsInfo.ykqDrugstore.doorheadPhoto ? detailsInfo.ykqDrugstore.doorheadPhoto : cdnLink + 'images/drugstore-mr-new.png' \" mode=\"aspectFit\"></image>\n          <view class=\"follow-info\">  \n            <view class=\"follow-btn\" bindtap=\"handleFollow\" v-if=\" !detailsInfo.ykqDrugstore.isAttention \">关注\n            </view>\n            <view class=\"followed-btn\" bindtap=\"handleFollow\" v-if=\" detailsInfo.ykqDrugstore.isAttention \">已关注\n            </view>\n            <text>{{ filter.formatFollowingNum(detailsInfo.ykqDrugstore.attentionUserCount) }}人已关注\n            </text>\n          </view>\n        </view>\n        <view class=\"drugstore-name\">{{ detailsInfo.ykqDrugstore.drugstoreName }}\n        </view>\n        <view class=\"distance\" catchtap=\"openMap\" :data-info=\" detailsInfo.ykqDrugstore \">  \n          <image class=\"addr_box_icon\" src=\"../../../images/require-list-adreess.png\"></image>\n          <view class=\"text\">{{ detailsInfo.ykqDrugstore.address }}\n          </view>\n          <view bindtap=\"callPhone\" :data-phone=\" detailsInfo.ykqDrugstore.tel \" class=\"call\">\n            <image class=\"phone_box_icon\" src=\"../../../pages/onlineGoods/images/green_tel.png\"></image>\n          </view>\n        </view>\n      </view>\n      <view class=\"preferentialism-activity\" v-if=\"detailsInfo.activities.length>0 && !isDjk\"> \n        <view class=\"title\">优惠活动\n        </view>\n        <view v-for=\"(activity, key) in  detailsInfo.activities \" :key=\"key\" :class=\"[cell,( activity.actType == 6 ? 'red' : '' )]\"> \n          <text>{{ activity.actType == 6 ? '秒' : '券' }}\n          </text>\n          <text>{{ activity.label }}\n          </text>\n        </view>\n      </view>\n      <view class=\"drugstore-service\" v-if=\" detailsInfo.businessService.length > 0 || detailsInfo.securitycardOnlinePayLabel\"> \n        <view class=\"title\">商家服务\n        </view>\n        <view class=\"tag-list\"> \n          <block v-if=\"isDjk\">\n            <text>{{ detailsInfo.ykqDrugstore.securitycardOnlinePayLabel }}\n            </text>\n          </block>\n          <block v-else>\n            <text v-for=\"(tag, tag) in  detailsInfo.businessService \" :key=\"tag\">{{ tag }}\n            </text>\n          </block>\n        </view>\n      </view>\n      <view class=\"drugstore-info\"> \n        <view class=\"title\">店铺信息\n        </view>\n        <view class=\"content\"> \n          <view v-if=\" detailsInfo.ykqDrugstore.businessHours \"> \n            <text>营业时间\n            </text>\n            <text>{{ detailsInfo.ykqDrugstore.businessHours }}\n            </text>\n          </view>\n          <view v-if=\" detailsInfo.ykqDrugstore.noticeContent \"> \n            <text>店铺公告\n            </text>\n            <text>{{ detailsInfo.ykqDrugstore.noticeContent }}\n            </text>\n          </view>\n        </view>\n      </view>\n      <view class=\"common_section\">\n        <view class=\"cell arrow\" bindtap=\"openDetail\">\n          <view class=\"cell_center\">店铺资质\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/goodsDetail/goodsDetail.wxss */\n@import '../../../common/tableView.wxss';\n.container {\n  background: #F0F0F0;\n}\n\n.container .banner-content {\n  background: #fff;\n  padding: 0 20rpx;\n}\n\n.container .header-banner {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  height: 293rpx;\n}\n\n.header-banner image {\n  width: 320rpx;\n  height: 214rpx;\n}\n\n.follow-info .follow-btn, .follow-info .followed-btn {\n  position: absolute;\n  right: 0rpx;\n  top: 20rpx;\n  width: 96rpx;\n  height: 44rpx;\n  line-height: 44rpx;\n  background: #e8fff3;\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #00b955;\n  border-radius: 22rpx;\n  text-align: center;\n}\n\n.follow-info .followed-btn {\n  color: #A7A7A7;\n  background: #E7E7E7;\n  border: #fff;\n}\n\n.follow-info text {\n  position: absolute;\n  right: 0rpx;\n  top: 81rpx;\n  font-size: 20rpx;\n  font-weight: 400;\n  color:rgba(153, 153, 153, 1);\n}\n\n.drugstore-name {\n  text-align: center;\n  font-size: 36rpx;\n  font-weight: 500;\n  color:rgba(51, 51, 51, 1);\n  line-height: 50rpx;\n}\n\n.preferentialism-activity {\n  background: #fff;\n  padding: 30rpx 20rpx;\n  margin-top: 15rpx;\n  font-size: 28rpx;\n  color:rgba(41, 38, 38, 1);\n}\n\n.preferentialism-activity .title {\n  margin-bottom: 10rpx;\n  font-weight: bold;\n}\n.preferentialism-activity .cell {\n  display: flex;\n  align-items: center;\n  margin-top: 20rpx;\n}\n\n.preferentialism-activity .cell text {\n  color: #666666;\n  font-size: 24rpx;\n  height: 24rpx;\n  line-height: 24rpx;\n  border-radius: 4rpx;\n  display: inline-block;\n  font-weight: normal;\n}\n\n.preferentialism-activity .cell text:first-child {\n  color: #fff;\n  background: #FE4743;\n  font-size: 20rpx;\n  height: 20rpx;\n  line-height: 20rpx;\n  font-weight: bold;\n  margin-right: 8rpx;\n  padding: 4rpx;\n}\n\n.preferentialism-activity .red text:first-child {\n  background: #FFA012;\n}\n\n.drugstore-service, .drugstore-info {\n  background: #fff;\n  padding: 30rpx 20rpx;\n  margin-top: 15rpx;\n}\n\n.drugstore-service .title, .drugstore-info .title {\n  margin-bottom: 3rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n  color:#292626;\n}\n\n.drugstore-service .tag-list {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.drugstore-service .tag-list text {\n  display: inline-block;\n  height: 36rpx;\n  line-height: 36rpx;\n  margin: 13rpx 12rpx 0 0;\n  padding: 0 10rpx;\n  border-radius: 2rpx;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: rgba(153, 153, 153, 1);\n  border: 1px solid rgba(225, 225, 225, 1);\n}\n\n.drugstore-info .content view {\n  display: flex;\n  margin-top: 22rpx;\n  font-size: 24rpx;\n}\n\n.drugstore-info .content view text:nth-child(1) {\n  display: inline-block;\n  line-height: 33rpx;\n  margin-right: 20rpx;\n}\n\n.drugstore-info .content view text:nth-child(2) {\n  flex: 1;\n  color: #666666;\n  line-height: 33rpx;\n}\n\n.distance {\n  display: flex;\n  font-size: 24rpx;\n  padding: 20rpx 20rpx;\n  padding-left: 0;\n}\n\n.distance .text {\n  margin: 0 6rpx;\n  flex: 1;\n  padding-right: 20rpx;\n}\n\n.arrow_icon {\n  width: 12rpx;\n  height: 18rpx;\n  margin-left: 4rpx;\n}\n\n.addr_box_icon {\n  width: 34rpx;\n  height: 34rpx;\n}\n\n.call {\n  width: 70rpx;\n  position: relative;\n}\n\n.call image {\n  width: 34rpx;\n  height: 34rpx;\n  margin-left: 19rpx;\n}\n\n.call::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 10rpx;\n  width: 2rpx;\n  height: 20rpx;\n  background: #e1e1e1;\n}\n.common_section {\n  margin-top: 15rpx;\n}\n.common_section .cell {\n  padding: 20rpx;\n}\n.common_section .cell_center {\n  font-weight: bold;\n  font-size: 28rpx;\n}"},"convertDir/pages/onlineGoods/drugstoreSearch/drugstoreSearch":{"json":{"missingData-view":"../../../../component/missingData/missingData","medList":"../../../component/medList/medList"},"wxml":"\n  <view class=\"drugstoreSearch-auto-container\">       \n    <view class=\"index_z\">\n      <navBar title-text=\"搜索商品\" :showCapsule=\"true\"></navBar>\n    </view>\n    <view class=\"search_contion\" :hidden=\"scrollType\">  \n      <view class=\"search_hearder\">   \n        <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n        <image class=\"search_clear\" v-if=\"input_text\" bindtap=\"search_clear_btn\" mode=\"widthFix\" src=\"../../../images/search_clear.png\"></image>\n        <view class=\"search_kuai\" v-if=\"input_text\" bindtap=\"search_clear_btn\"></view>\n        <input class=\"search_input\" :value=\"input_text\" bindinput=\"search_input\" placeholder=\"搜索您想查找的商品/药店\" bindconfirm=\"search_btn\"></input>\n      </view>\n      <text class=\"search_btn\" bindtap=\"search_btn\" v-if=\"input_text\">搜索\n      </text>\n      <text class=\"search_btn gray\" v-else>搜索\n      </text>\n    </view>\n    <view style=\"height:100rpx\"></view>\n    <block v-if=\"searc_key_box\">\n      <view class=\"searc_key_box\" :style=\"{height:calc(100vh - navBarHeight  + 50px),top:calc(navBarHeight + 50)px}\" catchtouchmove=\"ture\">\n        <view class=\"searc_key_list\" bindtap=\"handleKeyWord\" v-for=\"(item, key) in relatedWord\" :key=\"key\" :data-index=\"index\" data-text=\"{{item[0].str?item[0].str:''}}{{item[1].str?item[1].str:''}}{{item[2].str?item[2].str:''}}\">\n          <text :class=\"[(item[0].key?'text_color':'')]\">{{item[0].str}}\n          </text>\n          <text :class=\"[(item[1].key?'text_color':'')]\">{{item[1].str}}\n          </text>\n          <text :class=\"[(item[2].key?'text_color':'')]\">{{item[2].str}}\n          </text>\n        </view>\n      </view>\n    </block>\n    <view :class=\"[suspension,(scrollType?'fixd':'')]\" :style=\"{top:navBarHeightpx}\">\n      <view class=\"search_tab\"> \n        <view :class=\"[search_tab_left,(stateType==1?'state':'')]\" data-state=\"1\" bindtap=\"handleStateType\">商品\n        </view>\n        <view :class=\"[search_tab_right,(stateType==2?'state':'')]\" data-state=\"2\" bindtap=\"handleStateType\">药店\n        </view>\n      </view>\n    </view>\n    <view v-if=\"scrollType\"> \n      <view v-if=\"proList.length != 0\" style=\"height:90rpx\"></view>\n      <view v-if=\"showSortTab\" style=\"height:270rpx;\"></view>\n    </view>\n    <block v-if=\"stateType==1\"> \n      <view class=\"proList sp_list\" v-if=\"proList.length\">  \n        <view class=\"proItem\" v-for=\"(item, index) in proList\" :key=\"index\"> \n          <view class=\"itemTop flex\" :data-item=\"item\" :data-index=\"index\" bindtap=\"toCheckPro\"> \n            <image :src=\"item.medicineMainImage\"></image>\n            <view class=\"itemInfo\">   \n              <view class=\"title\">{{item.medicineName}} {{item.medicineCommonName}}\n              </view>\n              <view class=\"title title2\">{{item.medicineSpecifications}}\n              </view>\n              <view class=\"flex\">\n                <view class=\"money\">\n              ¥{{item.medicinesPrice}}\n              \n                  <text v-if=\"item.isShowLineationPrice==0?false:true\">¥{{item.discountPrice}}\n                  </text>\n                </view>\n              </view>\n              <view class=\"flex2\"> \n                <view :class=\"[storeName,( item.drugstoreDistanceDesc ? '' : 'no-border' )]\">{{item.drugstoreName}}\n                </view>\n                <view class=\"storeKm\" :data-info=\"item\">{{item.drugstoreDistanceDesc || '' }}\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"itemBottom flex\" data-title=\"{{item.medicineName}} {{item.medicineCommonName}}\" :data-medicineid=\"item.medicineId\" bindtap=\"drugStore_list\" v-if=\"item.otherDrugstoreNum == 0?false:true\"> \n            <view class=\"dr\">附近还有{{item.otherDrugstoreNum}}家药店\n            </view>\n            <image class=\"itemBottom_img\" src=\"../../../images/icon-arrow.png\"></image>\n          </view>\n        </view>\n        <view class=\"tip\" v-if=\"isAjaxing\">加载中...\n        </view>\n        <view class=\"tip\" v-else-if=\"!hasNextPage\">已加载全部内容\n        </view>\n      </view>\n      <block v-if=\"proList.length == 0\">\n        <view style=\"background-color:#fff;height: 100vh;\">\n          <missingData-view zhi=\"new1\" textval2=\"抱歉，没有找到您想要的搜索结果\" :imageUrl=\" url_link + 'images/empty-log.png' \" bind:action=\"select_address\" buttonText=\"切换城市\"></missingData-view>\n        </view>\n      </block>\n    </block>\n    <block v-else>  \n      <view class=\"search_lable\" v-if=\"stateType==2\">\n        <checkbox-group class=\"lable_group\" bindchange=\"handleChoice\" :data-zhi=\"item.labelCode\" v-for=\"(item, key) in labelList\" :key=\"key\">\n          <label :class=\"[checkbox,lable,(item.check?'xz_lable':'')]\">\n            <checkbox :value=\"item.labelCode\">{{item.labelName}}\n            </checkbox>\n          </label>\n        </checkbox-group>\n      </view>\n      <view class=\"drugstore_list\" v-if=\"drugstoreList.length\">  \n        <medList :lists=\" drugstoreList \"></medList>\n        <view class=\"tip\" v-if=\"isAjaxing\">加载中...\n        </view>\n        <view class=\"tip\" v-else-if=\"!hasNextPage\">已加载全部内容\n        </view>\n      </view>\n      <block v-if=\"drugstoreList.length == 0\">\n        <view style=\"background-color:#fff;height: 100vh;\">\n          <missingData-view zhi=\"new1\" textval2=\"抱歉，没有找到您想要的搜索结果\" :imageUrl=\" url_link + 'images/empty-log.png' \" bind:action=\"select_address\" buttonText=\"切换城市\"></missingData-view>\n        </view>\n      </block>\n    </block>\n  </view>","js":"const app = getApp();\nimport {\n  ajax,\n  ajax2,\n  getLocation,\n  open_wechatMap,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      searc_key_box:false,\n      relatedWord:[],\n      drugstoreList: [],\n      labelList: [],\n      stateType: 1,\n      showSortTab: true, //显示分类tab\n      searchLog: [],\n      longitude: 114.304695,\n      latitude: 30.59331,\n      pageNum: 1,\n      pageNumDurg: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      proList: [], //商品列表\n      isAjaxing: false,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      scrollType: false,\n      id: null,\n      input_text: null, //搜索关键词\n      address_data: {},\n      options: '',\n      scrollTop:0,\n      searchType: 1\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    // 设置来源\n    if (options.source) {\n      getApp().globalData.globalSource = options.source;\n    }\n\n    if (options.keyword) {\n      this.setData({\n        input_text: options.keyword // 药店列表带过来的关键词\n      });\n    }\n    this.getLabel();\n  },\n  onShow: function() {\n    this.data.pageNumDurg = 1;\n    //获取本地存储经纬度信息\n    const addressData = getApp().address_data;\n    //判断是否有经纬度，没有自动获取\n    this.data.pageNum = 1;\n\n    if (addressData.latitude) {\n      this.data.address_data = addressData;\n      this.search_btn();\n    } else {\n      getLocation((longitude, latitude) => {\n        this.data.address_data = {\n          longitude: longitude,\n          latitude: latitude\n        };\n        this.search_btn();\n      })\n    }   \n  },\n  getSearchDrugstore(e) {\n    Taro.showLoading({\n      title: '加载中',\n    })\n    ajax2('post', 'mimiapp/grouparea/getDrugStoreList', {\n      longitude: app.address_data.longitude,\n      latitude: app.address_data.latitude,\n      drugstoreName: this.data.input_text,\n      drugstroreType: this.data.labelList,\n      cityCode: app.address_data.cityCode,\n      page: this.data.pageNumDurg,\n      rows: 10\n    }, res => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        // 如果是上拉加载\n        if (e) {\n          this.setData({\n            drugstoreList: this.data.drugstoreList.concat(res.data.result.list),\n            hasNextPage: res.data.result.hasNextPage || false,\n            isAjaxing: false\n          })\n        } else {\n          this.setData({\n            drugstoreList: res.data.result.list,\n            hasNextPage: res.data.result.hasNextPage || false,\n            isAjaxing: false\n          })\n        }\n        let shopSearchData = {\n          searchTerms: this.data.input_text,\n          shopsNumber: res.data.result.list && res.data.result.list.length\n        }\n        getApp().globalData.burySpotSDK.track('action_storeListshopSearch ', shopSearchData);\n        setTimeout(() => {\n          Taro.pageScrollTo({\n            scrollTop: this.data.scrollTop - 1,\n          })\n        }, 200);\n      }\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  // 点击药店\n  nearbyDrugstoreBtn(e) {\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${e.currentTarget.dataset.id}`\n    })\n  },\n  getLabel() {\n    ajax('post', 'mimiapp/grouparea/getDrugStoreLabel', {}, res => {\n      if (res.data.code == 0) {\n        this.setData({\n          labelList: res.data.result\n        });\n      }\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  handleChoice(e) {\n    let list = this.data.labelList;\n    for (let j = 0; j < list.length; j++) {\n      if (e.currentTarget.dataset.zhi == list[j].labelCode) {\n        if (!list[j].check) {\n          list[j].check = true\n        } else {\n          list[j].check = false\n        }\n      }\n    }\n    this.setData({\n      labelList: list,\n    })\n    this.data.pageNumDurg = 1;\n    this.getSearchDrugstore();\n  },\n  handleStateType(e) {\n    let data = e.currentTarget.dataset.state;\n    this.setData({\n      stateType: data\n    })\n    if (data == 1) {\n      this.searchFn();\n    } else {\n      this.data.pageNumDurg = 1;\n      this.getSearchDrugstore();\n    }\n  },\n  drugStore_list(e) {\n    let medicinesId = e.currentTarget.dataset.medicineid;\n    let title = e.currentTarget.dataset.title.length > 7 ? `${e.currentTarget.dataset.title.substr(0, 7)}...` : e.currentTarget.dataset.title;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/subscribeList/subscribeList?medicinesId=${medicinesId}&navAreaId=${this.data.id}`\n    })\n  },\n  /**\n   * 输入检测\n   */\n  search_input(e) {\n    console.log(e)\n    this.setData({\n      input_text: e.detail.value,\n      searc_key_box: true\n    })\n    if(!this.data.input_text) {\n      this.setData({\n        searc_key_box: false\n      })\n    }\n    this.data.searchType = 1;//输入框输入\n    this.getKeyWord(this.data.input_text)\n  },\n  // 点击关键词\n  handleKeyWord(e){\n    let text = e.currentTarget.dataset.text;\n    let index = e.currentTarget.dataset.index;\n    this.setData({\n      input_text:text\n    })\n    let chooseSughData = {\n      choosenTerms: this.data.input_text,\n      choosenSeq: index\n    }\n    getApp().globalData.burySpotSDK.track('action_chooseSug', chooseSughData);\n    this.data.searchType = 3;//关联词自动补全\n    this.search_btn();\n\n  },\n  // 获取关键词\n  getKeyWord(input_text){\n    if(!input_text){\n      return false;\n    }\n    let data = {\n      keyword:input_text\n    }\n    ajax2('get', 'miniApp/search/getRelatedWordsByKeyword', data, res => {\n      if(res.data.code == 0){\n        res.data.result && res.data.result.forEach((item, index)=>{\n          res.data.result[index] = this.hilight_word(this.data.input_text, item);\n        })\n        this.setData({\n          relatedWord: res.data.result\n        })\n      }\n    }, function() {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  // 根据搜索字分割字符\n  hilight_word: function(key, word) {\n    if (!key) {\n      return false;\n    }\n    let idx = word.indexOf(key),\n      t = [];\n    if (idx > -1) {\n      if (idx == 0) {\n        t = this.hilight_word(key, word.substr(key.length));\n        t.unshift({\n          key: true,\n          str: key\n        });\n        return t;\n      }\n\n      if (idx > 0) {\n        t = this.hilight_word(key, word.substr(idx));\n        t.unshift({\n          key: false,\n          str: word.substring(0, idx)\n        });\n        return t;\n      }\n    }\n    return [{\n      key: false,\n      str: word\n    }];\n  },\n  /**\n   * 删除按钮\n   * @param {*} e \n   */\n  search_clear_btn() {\n    // this.data.pageNum = 1;\n    this.setData({\n      input_text: '',\n      searc_key_box: false\n    });\n  },\n  /**\n   * 搜索Btn\n   */\n  search_btn() {\n    if (this.data.input_text) {\n      const input_text = (this.data.input_text).replace(/^\\s*|\\s*$/g, \"\");\n      console.log(input_text)\n      if (!input_text) {\n        Taro.showToast({\n          title: '请输入药品名',\n          icon: 'none',\n        })\n        this.setData({\n          input_text: ''\n        })\n        return false;\n      }\n      this.searchFn()\n    }\n    this.data.pageNum = 1;\n    this.setData({\n      proList: [],\n      searc_key_box: false\n    });\n  },\n  onPageScroll: function(e) { // 获取滚动条当前位置\n    if (e.scrollTop <= 45) {\n      this.setData({\n        scrollType: false\n      })\n    } else {\n      this.setData({\n        scrollType: true\n      })\n    }\n    this.data.scrollTop = e.scrollTop\n  },\n  /**\n   * 搜索方法\n   */\n  searchFn() {\n    if (this.isAjaxing) return false;\n    if (!this.data.input_text) return false;\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    this.setData({\n      isAjaxing: true\n    })\n    if (this.data.stateType == 2) {\n      this.getSearchDrugstore();\n    } else {\n      const sendData = {\n        pageNum: this.data.pageNum,\n        pageSize: this.data.pageSize,\n        longitude: this.data.address_data.longitude,\n        latitude: this.data.address_data.latitude,\n        cityCode: this.data.address_data.cityCode,\n        keyword: this.data.input_text\n      };\n\n      ajax2('get', 'product/ykq/mini/v1/lbs/queryProductListByKeyWord', sendData, res => {\n        if (res.data.code == 0) {\n          const resData = res.data.result;\n          //数据上报\n          let homeSearchData = {\n            searchTerms: sendData.keyword,\n            goodsNumber: resData.list.length,\n            source: this.data.searchType\n          }\n          getApp().globalData.burySpotSDK.track('action_storeListHomeSearch', homeSearchData);\n          //点击商品tab\n          if (this.data.stateType == 1) {\n            let goodsSearchData = {\n              searchTerms: sendData.keyword,\n              goodsNumber: resData.list.length\n            }\n            getApp().globalData.burySpotSDK.track('action_storeListGoodsSearch', goodsSearchData);\n          }\n          let showSortTab = true;\n          if (resData.pageNum == 1 && !resData.list.length) {\n            showSortTab = false\n          }\n          resData && this.setData({\n            proList: this.data.pageNum == 1 ? resData.list : [...this.data.proList, ...resData.list],\n            hasNextPage: resData.hasNextPage || false,\n            isAjaxing: false,\n            showSortTab\n          });\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none',\n          })\n        }\n        this.setData({\n          isAjaxing: false\n        })\n        Taro.hideLoading();\n      }, ()=> {\n        this.setData({\n          isAjaxing: false\n        })\n        Taro.hideLoading();\n        Taro.showToast({\n          title: '请求失败',\n          icon: 'none',\n        })\n      })\n    }\n  },\n\n  /**\n   * 请求接口，确认商品状态\n   * @param {*} e \n   */\n  toCheckPro(e) {\n    const proItem = e.currentTarget.dataset.item;\n    const isAddCart = e.currentTarget.dataset.cart;\n    let index = e.currentTarget.dataset.index;\n    console.log(isAddCart)\n    const sendData = {\n      drugstoreId: proItem.drugstoreId,\n      medicinesId: proItem.medicineId\n    }\n    let searchGoodsClickData = {\n      goodsId: proItem.medicineId,\n      goodsSeq: index\n    }\n    console.log(searchGoodsClickData)\n    getApp().globalData.burySpotSDK.track('action_searchGoodsClick', searchGoodsClickData);\n    Taro.showLoading({\n      mask: true\n    })\n    ajax2('get', 'mimiapp/grouparea/medicinesAddPurchaseConditionChecked', sendData, res => {\n      if (res.data.code == 0) {\n        Taro.hideLoading();\n        if (res.data.result.code == 0) {\n          Taro.navigateTo({\n            url: `/pages/onlineGoods/drugList/drugList?goodsId=${proItem.medicineId}&drugStoreId=${proItem.drugstoreId}&areaId=${proItem.merchandiseClassifyId}&isAddCart=1`\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.result.msg,\n            icon: 'none',\n          })\n          setTimeout(() => {\n            this.search_btn()\n          }, 1000)\n        }\n      } else {\n        Taro.hideLoading();\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n        })\n      }\n    }, function() {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  //打开地图\n  openMap: function(e) {\n    const info = e.currentTarget.dataset.info,\n      latitude = info.latitude ? info.latitude : this.data.latitude,\n      longitude = info.longitude ? info.longitude : this.data.longitude;\n    open_wechatMap(Number(latitude), Number(longitude), info.drugstoreName);\n    console.log(info)\n\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    const hasNextPage = this.data.hasNextPage;\n    if (this.data.stateType == 1) {\n      if (hasNextPage) {\n        this.data.pageNum = ++this.data.pageNum\n        this.searchFn()\n      }\n    } else {\n      if (hasNextPage) {\n        this.data.pageNumDurg = ++this.data.pageNumDurg;\n        this.getSearchDrugstore(1);\n      }\n    }\n  },\n  select_address() {\n    // 如果没有经纬度跳转到选择地址清空绑定内容\n    if (!this.data.address_data.latitude) {\n      this.setData({\n        address_data: {}\n      })\n    }\n    let data = JSON.stringify(this.data.address_data).replace(/&/, 'ASCII38')\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?address_data=${data}`\n    })\n  }\n};\n","wxss":"/* pages/onlineGoods/drugstoreSearch/drugstoreSearch.wxss */\n.index_z {\n  position: relative;\n  z-index: 99999999;\n}\n\npage {\n  background: #f5f5f5;\n  height: 100%;\n}\n\n.suspension-banner {\n  padding: 20rpx;\n  border-bottom: 1rpx solid #eee;\n}\n\n.flex {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.search_contion {\n  padding: 20rpx 0;\n  background-color: #fff;\n  position: fixed;\n  border-bottom: 1px solid rgba(244, 244, 244, 1);\n  width: 100%;\n  z-index: 9;\n}\n\n.search_hearder {\n  width: 640rpx;\n  height: 60rpx;\n  position: relative;\n  margin-left: 20rpx;\n  border-radius: 36rpx;\n  background-color: #f4f4f4;\n}\n\n.search_input {\n  width: 500rpx;\n  height: 60rpx;\n  font-size: 25rpx;\n  padding-left: 65rpx;\n}\n\n.search_icon {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 10rpx;\n  padding: 16rpx;\n}\n\n.search_clear {\n  top: -10rpx;\n  width: 36rpx;\n  height: 36rpx;\n  position: absolute;\n  right: 5rpx;\n  z-index: 2;\n  padding: 20rpx;\n}\n\n.search_btn {\n  color: #00b955;\n  font-size: 28rpx;\n  position: absolute;\n  top: 32rpx;\n  right: 20rpx;\n}\n\n.search_btn.gray {\n  color: #ccc;\n}\n\n.searchHistory {\n  width: 100%;\n  background-color: #fff;\n  overflow: hidden;\n}\n\n.searchHistory_text {\n  font-size: 26rpx;\n  color: #999;\n  padding-left: 20rpx;\n  padding-top: 20rpx;\n  margin-bottom: 26rpx;\n  position: relative;\n}\n\n.searchHistory_list {\n  padding: 0 20rpx 0 20rpx;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  box-sizing: border-box;\n  height: 60rpx;\n  background-color: rgba(245, 247, 248, 1);\n  border-radius: 30rpx;\n  line-height: 60rpx;\n  font-size: 24rpx;\n  text-align: center;\n  float: left;\n  margin-right: 20rpx;\n  margin-bottom: 20rpx;\n  color: #515163;\n}\n\n.searchHistory_nr {\n  width: calc(100% - 40rpx);\n  margin: 0 auto;\n  overflow: hidden;\n}\n\n.you {\n  top: 0;\n  width: 29rpx;\n  height: 32rpx;\n}\n\n.search_kuai {\n  top: 0;\n  right: 0;\n  position: absolute;\n  width: 80rpx;\n  height: 100%;\n  z-index: 9;\n}\n\n.sort_box {\n  height: 90rpx;\n  display: flex;\n  background: #fff;\n  width: 100%;\n  /* border-top: 1px solid #eee; */\n}\n\n.suspension {\n  width: 100%;\n  z-index: 99999;\n  background-color: #fff;\n}\n\n.fixd {\n  position: fixed;\n  left: 0;\n}\n\n.suspension-img {\n  width: 100%;\n  display: block;\n  height: 230rpx;\n  margin: 0 auto;\n}\n\n.sort_box .sort_item {\n  width: 50%;\n  font-size: 30rpx;\n  color: #8a8080;\n  text-align: center;\n  line-height: 90rpx;\n  position: relative;\n}\n\n.sort_img {\n  width: 16rpx;\n  height: 24rpx;\n  margin-left: 10rpx;\n}\n\n.sort_box .sort_item.active {\n  font-size: 34rpx;\n  color: #292626;\n  font-weight: 500;\n}\n\n.sort_box .sort_item.active:after {\n  width: 14%;\n  height: 4px;\n  background: linear-gradient(90deg, #09c2ca 0%, #05daa0 100%);\n  content: \"\";\n  left: 43%;\n  border-radius: 4rpx;\n  bottom: 0px;\n  position: absolute;\n}\n\n.proList, .drugstore_list {\n  background: #fff;\n  overflow: hidden;\n  border-bottom: 20rpx solid #f5f5f5;\n  padding: 0 20rpx;\n}\n\n.proItem {\n  margin-top: 20rpx;\n  font-size: 26rpx;\n  color: #666;\n  background: white;\n}\n\n.proItem .itemTop {\n  padding: 25rpx 30rpx;\n}\n\n.proItem .itemTop image {\n  width: 160rpx;\n  height: 160rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: 500rpx;\n  display: flex;\n  flex-flow: column;\n  justify-content: space-between;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-size: 28rpx;\n  color: rgba(41, 38, 38, 1);\n  line-height: 34rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  width: 150rpx;\n  height: 50rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  font-size: 30rpx;\n  color: rgba(0, 185, 173, 1);\n  text-align: center;\n  line-height: 50rpx;\n}\n\n.itemBottom {\n  height: 90rpx;\n  line-height: 90rpx;\n  padding: 0 30rpx;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n  position: relative;\n}\n\n.storeName {\n  max-width: 480rpx;\n  font-size: 24rpx;\n  color: rgba(153, 153, 153, 1);\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  margin-right: 10rpx;\n  -webkit-box-orient: vertical;\n  position: relative;\n  padding-right: 10rpx;\n}\n\n.storeName::after {\n  content: '';\n  display: block;\n  width: 1rpx;\n  height: 20rpx;\n  position: absolute;\n  top: 9rpx;\n  right: 1rpx;\n  background-color: rgba(238, 238, 238, 1);\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  /* background: #f7f7f7; */\n}\n\n.flex2 {\n  display: flex;\n  margin-top: 20rpx;\n}\n\n.storeKm {\n  font-size: 26rpx;\n  color: rgba(153, 153, 153, 1);\n}\n\n.itemBottom .dr {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  padding-left: 192rpx;\n}\n\n.itemBottom_img {\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  right: 20rpx;\n  top: 34rpx;\n}\n\n/* 搜索改版 */\n\n.search_tab {\n  display: flex;\n}\n\n.search_tab_left, .search_tab_right {\n  width: 50%;\n  height: 90rpx;\n  line-height: 90rpx;\n  font-size: 30rpx;\n  color: #999;\n  text-align: center;\n  position: relative;\n}\n\n.state {\n  color: #292626;\n  font-size: 34rpx;\n  font-weight: 500;\n}\n\n.state::after {\n  content: \"\";\n  width: 36rpx;\n  height: 6rpx;\n  border-radius: 8rpx;\n  background-color: #00b955;\n  position: absolute;\n  left: calc(50% - 18rpx);\n  bottom: 0;\n}\n\n.nearbyDrugstore-list {\n  display: flex;\n  padding: 20rpx;\n  position: relative;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n  background-color: #fff;\n  margin-top: 20rpx;\n}\n\n.nearbyDrugstore-list image {\n  width: 216rpx;\n  height: 144rpx;\n  display: block;\n}\n\n.nearbyDrugstore-list-right {\n  width: calc(100% - 236rpx);\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-address {\n  width: 70%;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-time {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 8rpx;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #666;\n  position: absolute;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx;\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n\n.search_lable {\n  height: 108rpx;\n  line-height: 108rpx;\n  display: flex;\n  border-top: 1px solid rgba(238,238,238,1);\n  background-color: #fff;\n}\n\n.lable {\n  width: 150rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  background: rgba(245, 247, 248, 1);\n  border-radius: 30px;\n  font-size: 26rpx;\n  color: #666666;\n  text-align: center;\n  margin-top: 24rpx;\n  margin-left: 24rpx;\n}\n.lable_group{\n  display: flex;\n}\ncheckbox .wx-checkbox-input {\n    /* checkbox 前面选项框的背景样式 */\n    /* opacity: 0; */\n    display: none;\n}\n.xz_lable{\n  background: #e8fff3;\n  border: 2rpx solid #00b955;\n  border-radius: 32rpx;\n  color: #00b955;\n}\n.sp_list{\n  background: none;\n}\n/* 搜索关键词 */\n.searc_key_box{\n  background-color:#fff;\n  position: fixed;\n  left: 0;\n  z-index: 9999;\n  width: 100%;\n}\n.searc_key_list{\n  height: 87rpx;\n  line-height: 87rpx;\n  text-align: left;\n  font-size:28px;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(51,51,51,1);\n  font-size: 28rpx;\n  border-top: 1px solid #EEEEEE;\n  padding: 0 24rpx 0 24rpx;\n}\n.text_color{\n  color: #00b955;\n}\n\n.no-border::after {\n  display: none;\n}"},"convertDir/pages/onlineGoods/livePlayer/livePlayer":{"js":"export default {\n\n  data: function() {\n    return {\n      roomId: '',\n      customParams: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    let roomId = 4\n    let customParams = encodeURIComponent(JSON.stringify({ path: 'pages/livePlayer/livePlayer', pid: 1 }))\n    Taro.navigateTo({\n      url: `plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id=${roomId}&custom_params=${customParams}`,\n    })\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n  /**\n   * 返回首页事件\n   */\n  handleBackIndex: function () {\n    Taro.switchTab({\n      url: '/pages/noteIndex/noteIndex'\n    }) \n  },\n  /**\n   * 重新打开直播间\n   */\n  handleGoLive: function () {\n    Taro.redirectTo({\n      url: '/pages/onlineGoods/livePlayer/livePlayer',\n    })\n  }\n};","json":{},"wxss":"/* pages/onlineGoods/livePlayer/livePlayer.wxss */\n.container{\n  padding-top:200rpx ;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n.back-index{\n  width: 100%;\n  line-height: 100rpx;\n  border-radius: 0.6px;\n  font-size: 38rpx;\n  color: #fff;\n  font-weight: bold;\n  letter-spacing: 0;\n  text-align: center;\n  padding: 20rpx;\n}\n.back-index view {\n  border-radius: 50rpx;\n  background: #00b955;\n}\n\n","wxml":"\n  <view class=\"livePlayer-auto-container\"> \n    <navBar title-text=\"荷叶健康\"></navBar>\n    <view class=\"container\"> \n      <button class=\"back-index\" bindtap=\"handleBackIndex\">\n        <view>去荷叶健康首页\n        </view>\n      </button>\n      <button class=\"back-index\" bindtap=\"handleGoLive\">\n        <view>继续观看\n        </view>\n      </button>\n    </view>\n  </view>"},"convertDir/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail":{"json":{"countDown":"/component/countDown/countDown","missingData-view":"/component/missingData/missingData","shopCart":"/component/shopCart/shopCart"},"wxml":"\n  <view class=\"onlineGoodsDetail-auto-container\">         \n    <navBar title-text=\"商品详情\" :titleColor=\" '#111334' \"></navBar>\n    <import></import>\n    <include v-if=\" !pageShow \"></include>\n    <wxs module=\"filter\"></wxs>\n    <view :class=\"[container,(isDjk?'djk':'')]\" v-if=\" json_data \">         \n      <view class=\"swiper-box\">     \n        <swiper indicator-color=\"#efeff4\" indicator-active-color=\"#f16a33\" circular=\"true\" interval=\"2000\" duration=\"600\" bindchange=\"swiperChange\">\n          <block v-for=\"(item, index) in json_data.goods[0].images\" :key=\"index\" wx:for-index=\"index\">\n            <swiper-item>\n              <image :src=\"filter.getCutSrc(item.img_url,'@750x750')\" class=\"swiper-image\" mode=\"aspectFit\"></image>\n            </swiper-item>\n          </block>\n        </swiper>\n        <button class=\"share-box\" open-type=\"share\">\n          <image src=\"../../../pages/onlineGoods/images/share-icon.png\"></image>\n        </button>\n        <view :class=\"[swiper-subscript,(drugStore.is_medicare==1?'':'hide')]\">支持医保卡\n        </view>\n        <view class=\"swiper-pager\">/\n          <text>{{swiperConfig.current+1}}\n          </text>\n          <text class=\"gray-text\">{{json_data.goods[0].images.length}}\n          </text>\n        </view>\n        <view class=\"swiper-finish-mark\" v-if=\"json_data.goods[0].stock <= 0\">已抢光\n        </view>\n        <view class=\"swiper-finish-mark\" v-else-if=\"json_data[0].status == 'DOWN'\">已下架\n        </view>\n      </view>\n      <view class=\"activity-box\" v-if=\" json_data.goods[0].activityInfo \">\n        <view class=\"activity-box__content\"> \n          <view class=\"activity-box__left\"> \n            <image v-if=\" json_data.goods[0].activityInfo.label == '限时秒杀' \" :src=\" cdnLink + 'images/seconds-kill-new.png'\" mode=\"aspectFit\"></image>\n            <image v-if=\" json_data.goods[0].activityInfo.label == '限时促销' \" :src=\" cdnLink + 'images/limited-time.png'\" mode=\"aspectFit\"></image>\n          </view>\n          <view class=\"activity-box__right\">  \n            <image class=\"lightning-icon\" src=\"../images/Lightning.png\"></image>\n            <view class=\"seconds-kill-info\"> \n              <view>仅剩{{ json_data.goods[0].activityInfo.surplusStock }}件\n              </view>\n              <view class=\"activity-box__text-mini\" v-if=\" json_data.goods[0].activityInfo.limitNum > 0 && json_data.goods[0].activityInfo.actType != 4 \">\n\t\t\t\t\t\t每人限购{{ json_data.goods[0].activityInfo.limitNum }}件\n              </view>\n            </view>\n            <view class=\"seconds-kill-time\"> \n              <text>剩余时间\n              </text>\n              <countDown bind:updataList=\"handleUpdataList\" class=\"timer-stepper\" class-type=\"4\" :endtime=\" json_data.goods[0].activityInfo.endTime \"></countDown>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"goods_detail_boxs\"> \n        <view v-if=\" isDjk && json_data.securitycardOnlinePayLabel\" class=\"goods_detail_boxs_marks\">\n          <view>医保支付\n          </view>\n        </view>\n        <view class=\"goods_detail\">  \n          <view class=\"detail-left\">\n            <view class=\"price_con\">\n\t\t\t\t\t￥ \n              <text class=\"new_price\">{{json_data.goods[0].medicinesPrice}}\n              </text>\n              <text class=\"common-line-price\" v-if=\" json_data.goods[0].activityInfo \">¥{{json_data.goods[0].medicinesSellPrice}}\n              </text>\n            </view>\n          </view>\n          <block v-if=\"sj_stock > 0 && cartNumber > 0\">\n            <view class=\"cart_button\">  \n              <view class=\"button less\" bindtap=\"lessDrug\" :data-item=\"json_data.goods[0]\">\n                <view>-\n                </view>\n              </view>\n              <view class=\"text\">{{cartNumber}}\n              </view>\n              <view class=\"button\" bindtap=\"addDrug\" :data-item=\"json_data.goods[0]\">\n                <view>+\n                </view>\n              </view>\n            </view>\n          </block>\n          <block v-else> \n            <block v-if=\"json_data[0].status == 'DOWN'\">\n              <view class=\"online_shopping gray\" :data-item=\"json_data.goods[0]\">已下架\n              </view>\n            </block>\n            <block v-else> \n              <view class=\"online_shopping\" bindtap=\"addDrug\" :data-item=\"json_data.goods[0]\" v-if=\"json_data.goods[0].stock > 0\">加入需求清单\n              </view>\n              <view class=\"online_shopping gray\" v-else>已抢光\n              </view>\n            </block>\n          </block>\n        </view>\n      </view>\n      <view class=\"good-title\">{{json_data.goods[0].medicinesName}}\n\t\t{{json_data.goods[0].medicinesCommonName}} {{json_data.goods[0].medicinesSpecifications}}\n        <text v-if=\"json_data.goods[0].limitPurchaseAct.limitNum\">限{{json_data.goods[0].limitPurchaseAct.limitNum}}件\n        </text>\n      </view>\n      <view class=\"coupon active-cell\" v-if=\"!isDjk && json_data.goods[0].activityType\"> \n        <text class=\"coupon_left\">限时促销\n        </text>\n        <view class=\"coupon_center\">{{json_data.goods[0].activityName}}\n        </view>\n      </view>\n      <view class=\"coupon\" v-if=\"!isDjk && json_data.coupons.length > 0\"> \n        <view class=\"coupon_left\"> \n          <text class=\"coupon_left_title\">优惠券\n          </text>\n          <view class=\"coupon_center\">\n            <block v-for=\"(item, {{item}}) in json_data.coupons\" :wx:key=\"item\" v-if=\"index<3\">\n              <view class=\"coupon_list\"> \n                <text :class=\"[coupon_list_text,(item.canPull && coupon_text?\"\":\"coupon_hui\")]\" v-if=\"item.couponDiscountWay==1\">{{item.couponCash}}元\n                </text>\n                <text :class=\"[coupon_list_text,(item.canPull && coupon_text?\"\":\"coupon_hui\")]\" v-else>{{item.couponDiscountFactorStr}}折\n                </text>\n              </view>\n            </block>\n          </view>\n        </view>\n        <view class=\"coupon_right\" bindtap=\"collection\">{{coupon_text?\"一键领取\":\"已领取\"}}\n        </view>\n      </view>\n      <view class=\"points-box5\">\n        <view class=\"point-item\" v-for=\"(item, index) in  json_data.supportAttr \" :key=\"index\">{{ item }}\n\t\t\n          <icon type=\"success\" size=\"11\" color=\"#666883\"></icon>\n        </view>\n      </view>\n      <view class=\"back-color\">\n        <view class=\"go-drugstore\" :data-id=\"json_data.drugstoreId\" bindtap=\"handleGoDrugstore\">  \n          <view class=\"img-warp\">\n            <image class=\"go-drugstore-img\" :src=\"json_data.headPhoto?json_data.headPhoto:cdnLink + 'images/drugstore-mr-new.png'\" mode=\"widthFix\"></image>\n          </view>\n          <view class=\"go-drugstore-name\">\n\t\t\t\t{{json_data.drugstoreName}}\n\t\t\t\n          </view>\n          <image class=\"to-drugstore-icon\" src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n      </view>\n      <view class=\"descript-box7\"> \n        <view class=\"descript-title\">商品描述\n        </view>\n        <view class=\"descript-content\">\n          <template is=\"wxParse\" :data=\"wxParseData:article.nodes\"></template>\n        </view>\n      </view>\n      <block v-if=\"json_data.headPhoto != ''\">\n        <view class=\"addrshow-box8\"> \n          <view class=\"addrshow-title\">药店展示\n          </view>\n          <view class=\"addrshow-content\">\n            <image :src=\"json_data.headPhoto\" mode=\"aspectFit\"></image>\n          </view>\n        </view>\n      </block>\n    </view>\n    <view class=\"white_bg\" v-else-if=\" drugStoreDisable \">\n      <missingData-view zhi=\"new1\" textval2=\"很抱歉，您查看的药店不存在可能已下线或被禁用\" :imageUrl=\" cdnLink + 'images/empty-log.png' \"></missingData-view>\n    </view>\n    <view class=\"white_bg\" v-else-if=\" drugDisable \">\n      <missingData-view zhi=\"new1\" textval2=\"很抱歉，您查看的商品不存在可能已下架或被移除\" :imageUrl=\" cdnLink + 'images/empty-log.png' \"></missingData-view>\n    </view>\n    <block v-if=\"json_data.goods[0].stock > 0\">\n      <shopCart id=\"OnlineGoods\" :drugStore-id=\"drugStoreId\" page-name=\"1\" bind:action=\"updateCart\"></shopCart>\n    </block>\n    <view class=\"black_box\" catchtouchmove=\"true\" v-if=\"isLayer1Show\"></view>\n    <view class=\"alert_box\" catchtouchmove=\"true\" v-if=\"isLayer1Show\">  \n      <view class=\"title\">定位失败\n      </view>\n      <view class=\"detail\">请检查网络环境或者手机定位权限设置\n      </view>\n      <view class=\"btns_box\"> \n        <button class=\"left\" bindtap=\"editcard\">手动定位\n        </button>\n        <form class=\"button right\" report-submit=\"true\" bindsubmit=\"onShow\">\n          <button class=\"right\" form-type=\"submit\">重新定位\n          </button>\n        </form>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/goodsDetail/goodsDetail.wxss */\n@import '../../../common/tableView.wxss';\n@import \"onlineGoodsDetail.skeleton.wxss\";\n\npage {\n  background: #f5f6fa;\n}\n\n.group_msg {\n  position: absolute;\n  top: 37rpx;\n  left: 23rpx;\n}\n.swiper-box {\n  width: 100%;\n  height: 750rpx;\n  position: relative;\n  background-color: #fff;\n}\n\n.swiper-box swiper {\n  width: 100%;\n  height: 100%;\n}\n\n.swiper-box .swiper-image {\n  width: 100%;\n  height: 100%;\n}\n\n.swiper-box .swiper-subscript {\n  width: 215rpx;\n  height: 58rpx;\n  line-height: 58rpx;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  bottom: 21rpx;\n  color: #FFFFFF;\n  font-size: 28rpx;\n  border-top-right-radius: 30rpx;\n  border-bottom-right-radius: 30rpx;\n  background: linear-gradient(to right, #5bcbf8, #4182f6);\n}\n\n.swiper-box .swiper-pager {\n  width: 81rpx;\n  height: 36rpx;\n  line-height: 36rpx;\n  font-size: 28rpx;\n  color: #EFEFF5;\n  text-align: center;\n  position: absolute;\n  right: 24rpx;\n  bottom: 30rpx;\n  background: rgba(0,0,0,0.2);\n  border-radius: 20rpx;\n}\n\n.swiper-box .swiper-pager text:nth-child(1) {\n  color: #fff;\n  margin-right: 4rpx;\n}\n\n.swiper-box .swiper-pager .gray-text {\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #EFEFF5;\n  margin-left: 4rpx;\n}\n\n.swiper-box .swiper-finish-mark {\n  width: 180rpx;\n  height: 180rpx;\n  line-height: 180rpx;\n  text-align: center;\n  font-size: 30rpx;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 90rpx;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.share-box {\n  width: 60rpx;\n  height: 60rpx;\n  position: absolute;\n  top: 30rpx;\n  right: 20rpx;\n  background: none;\n}\n\n.share-box image {\n  width: 100%;\n  height: 100%;\n}\n\n.goods_detail_boxs {\n  background-color: #fff;\n  position: relative;\n}\n.goods_detail_boxs .goods_detail_boxs_marks{\n  padding: 0 28rpx 14rpx;\n}\n.goods_detail_boxs .goods_detail_boxs_marks view{\n  display: inline-block;\n  height: 32rpx;\n  font-size: 22rpx;\n  font-weight: 400;\n  color: #ff3b30;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n  background: rgba(255,59,48,0.05);\n  border: 1rpx solid #ff3b30;\n  border-radius: 4rpx;\n}\n.price_con {\n  font-family: PingFangSC, PingFangSC-Semibold;\n  height: 75rpx;\n  font-size: 36rpx;\n  color: #F93A4A;\n  line-height: 75rpx;\n  position: relative;\n  font-weight: 600;\n}\n\n.price_con .new_price {\n  font-size: 56rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.price_con .old_price {\n  margin-left: 12rpx;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-decoration: line-through;\n}\n.goods-avtive{\n  height: 170rpx;\n}\n.goods-avtive .detail-left {\n  flex: 1;\n}\n.goods-avtive .price_con{\n color: #FFFFFF;\n margin-top: 36rpx;\n}\n.common-line-price {\n  margin-left: 20rpx;\n  font-size: 28rpx;\n  color: #858A9C !important;\n  font-weight: 400;\n}\n.goods-avtive .common-line-price {\n  color: #FFFFFF !important;\n}\n.goods-avtive .common-line-price::before {\n  background: #FFFFFF;\n}\n.goods-avtive .online_shopping {\n  background: #FFFFFF;\n  color: #FF3232;\n  font-size: 28rpx;\n  font-weight: bold;\n  box-shadow:0px 8px 12px 0px rgba(186,25,25,0.33);\n  width: 186rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n}\n.goods_detail {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24rpx 24rpx 24rpx 24rpx;\n}\n.goods-avtive .goods_detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  box-sizing: border-box;\n}\n.goods_detail .avtive-tag {\n  color: #FFF2D3;\n  font-size: 24rpx;\n  width: 96rpx;\n  height: 38rpx;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: linear-gradient(to right,#FFB559, #FF9247);\n  border-bottom-right-radius: 20rpx;\n}\n.goods_detail_boxs .active-bg {\n  width: 100%;\n  height: 170rpx;\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-weight: bold\n}\n.active-cell {\n  /* border: 1rpx solid #F4F4F4; */\n  font-size: 26rpx;\n  color: #858a97;\n}\n.active-cell .coupon_center {\n  color: #FF5343;\n  flex: 1;\n  font-size: 26rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  /* border: 1px solid #eff0f5; */\n}\n.status0_box {\n  width: 100%;\n  height: 32rpx;\n  background-color: #fff;\n}\n\n.price-timer-box2 {\n  width: 100%;\n  height: 90rpx;\n  position: relative;\n}\n\n.box2-bgimg {\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-image: linear-gradient(-269deg, #fe9e20 0%, #ff5800 100%);\n}\n\n.box2-info {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  line-height: 90rpx;\n  z-index: 2;\n  padding: 0 23rpx;\n  font-size: 28rpx;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.sale-price {\n  font-size: 54rpx;\n  font-weight: bold;\n}\n\n.through-price {\n  margin-left: 20rpx;\n  text-decoration: line-through;\n}\n\n.box2-finish-prompt {\n  height: 100%;\n  line-height: 90rpx;\n  z-index: 2;\n  font-size: 28rpx;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  right: 23rpx;\n}\n\n.box2-timer {\n  box-sizing: border-box;\n  width: 340rpx;\n  height: 100%;\n  z-index: 2;\n  font-size: 26rpx;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.timer-tips {\n  display: inline-block;\n  width: 100%;\n  margin: 10rpx 0 6rpx;\n  height: 24rpx;\n  line-height: 24rpx;\n  font-size: 22rpx;\n}\n\n.timer-stepper {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n}\n\n.notBeginning {\n  background: #fef9ba;\n  color: #333;\n}\n\n.good-title {\n  color: #111334;\n  font-size: 36rpx;\n  font-weight: bold;\n  padding: 4rpx 24rpx 0 24rpx;\n  background: #FFFFFF;\n}\n\n.good-title text {\n  flex-shrink: 0;\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n  display: inline-block;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  height: 72rpx;\n  padding: 20rpx 32rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fff;\n  flex-wrap:wrap;\n}\n\n.point-item {\n  font-size: 22rpx;\n  position: relative;\n  /* margin-right: 24rpx; */\n  margin-bottom: 20rpx;\n  box-sizing: border-box;\n  color: #666d83;\n}\n\n.point-item icon {\n  margin-right: 9rpx;\n  position: relative;\n  top: 2rpx;\n}\n\n.point-item image {\n  width: 24rpx;\n  height: 24rpx;\n  position: relative;\n  top: 4rpx;\n  left: -8rpx;\n}\n\n.rules-box6 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 23rpx;\n  background: #fff;\n  margin-bottom: 20rpx;\n}\n\n.rules-title {\n  font-size: 30rpx;\n  border-bottom: 1rpx solid #e4e4e4;\n  padding: 23rpx 0 15rpx;\n  font-weight: 700;\n}\n\n.rules-content {\n  font-size: 28rpx;\n  padding: 15rpx 0;\n}\n\n.descript-box7 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 23rpx;\n  background: #fff;\n  margin-bottom: 20rpx;\n}\n\n.descript-title {\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-size: 32rpx;\n  padding: 32rpx 0 31rpx;\n  font-weight: 500;\n  color: #111734;\n  margin-top: 20rpx;\n}\n\n.descript-content {\n  padding: 15rpx 0 48rpx 0;\n  width: 100%;\n}\n\n.addrshow-box8 {\n  box-sizing: border-box;\n  width: 100%;\n  background: #fff;\n  /*margin-bottom: 20rpx;*/\n}\n\n.addrshow-title {\n  font-size: 30rpx;\n  border-bottom: 1rpx solid #e4e4e4;\n  padding: 23rpx 23rpx 15rpx;\n  font-weight: 700;\n}\n.descript-content image{\n  width: 100%;\n}\n.addrshow-content {\n  /*padding: 15rpx 0;*/\n  font-size: 0;\n}\n\n.addrshow-content image {\n  width: 100%;\n  margin-bottom: 15rpx;\n}\n\n.addrshow-content image:last-child {\n  margin-bottom: 0;\n}\n\n/* 底部footer */\n\n.footer {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100rpx;\n  line-height: 100rpx;\n  display: flex;\n  background-color: #fff;\n  color: #fff;\n  z-index: 9;\n}\n\n.footer view {\n  text-align: center;\n}\n\n.footer .icon_times {\n  display: inline-block;\n  width: 37rpx;\n  height: 39rpx;\n  vertical-align: middle;\n}\n\n.footer .f_remind {\n  width: 210rpx;\n  font-size: 26rpx;\n  color: #999;\n}\n\n.footer .f_msg {\n  flex: 1;\n  width: 200rpx;\n  background: #cacaca;\n  font-size: 36rpx;\n  font-weight: 600;\n}\n\n.footer .f_focus {\n  width: 175rpx;\n  font-size: 26rpx;\n  color: #666;\n  letter-spacing: 1.44rpx;\n}\n\n.footer .f_focus .icon_focus {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: middle;\n}\n\n.footer .f_phone_group {\n  width: 287rpx;\n  font-weight: 600;\n  background: #fe8916;\n}\n\n.footer .f_open_group {\n  flex: 1;\n  width: 100rpx;\n  font-weight: 600;\n  background: #e4393b;\n}\n\n.footer .f_remind_again {\n  width: 265rpx;\n  font-size: 26rpx;\n  color: #999;\n}\n\n/* modal */\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  color: #333;\n  z-index: 99;\n}\n\n.modal .modal_con {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -360rpx 0 0 -300rpx;\n  width: 600rpx;\n  height: 720rpx;\n  background: #fff;\n  border-radius: 14rpx;\n}\n\n.modal .modal_con .modal_header {\n  height: 108rpx;\n  margin: 40rpx 38rpx 0;\n  font-weight: 600;\n  font-size: 30rpx;\n  letter-spacing: 1.11rpx;\n}\n\n.modal .modal_con .store_list {\n  margin: 10rpx 50rpx;\n  height: 462rpx;\n}\n\n.modal .modal_con .store_list .store_con {\n  width: 500rpx;\n  height: 120rpx;\n  margin-bottom: 20rpx;\n  background: #f9f9f9;\n  border-radius: 6rpx;\n  padding: 20rpx;\n  box-sizing: border-box;\n  border: 2px solid transparent;\n}\n\n.modal .modal_con .store_list .store_con .store_title {\n  display: flex;\n  font-size: 30rpx;\n  height: 43rpx;\n  line-height: 42rpx;\n}\n\n.modal .modal_con .store_list .store_con .store_title .name {\n  width: 270rpx;\n}\n\n.modal .modal_con .store_list .store_con .store_title .dist {\n  flex: 1;\n  font-size: 24rpx;\n  color: #999;\n  text-align: right\n}\n\n.modal .modal_con .store_list .store_con .store_addr {\n  width: 100%;\n  margin-top: 10rpx;\n  height: 33rpx;\n  line-height: 33rpx;\n  font-size: 24rpx;\n  color: #666;\n}\n\n.modal .modal_con .store_list .active {\n  background: #fff6f6;\n  border: 2px solid #e4393b;\n}\n\n.modal .modal_con .modal_footer {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 88rpx;\n  display: flex;\n  border-top: 1px solid #eee;\n}\n\n.modal .modal_con .modal_footer .modal_btn {\n  flex: 1;\n  width: 300rpx;\n  line-height: 88rpx;\n  text-align: center;\n  font-size: 30rpx;\n  letter-spacing: 1.11rpx;\n}\n\n.modal .modal_con .modal_footer .cancel {\n  border-right: 1px solid #EEEEEE;\n}\n\n.modal .modal_con .modal_footer .confirm {\n  color: #e4393b;\n}\n\n.wxParse-tr{\n  border-color: #EEEEEE;\n}\n\n.wxParse-tr:not(:last-child) {\n  border-bottom: none !important;\n}\n\n.wxParse-th, .wxParse-td{\n  border-color: #EEEEEE;\n}\n/* 优惠券 */\n.coupon_list_text{\n  position: relative;\n  z-index: 1;\n  font-size: 22rpx;\n  color: #f93a4a;\n  background: #ffeeef;\n  border-radius: 6rpx;\n  padding: 3rpx 12rpx;\n}\n.coupon_hui{\n  opacity: .45;\n  border: none;\n}\n.coupon_left_title{\n  font-size: 26rpx;\n  line-height: 52rpx;\n  color: #858a97;\n  position: relative;\n  top: 2rpx;\n}\n.coupon_center{\n  display: flex;\n  justify-content:flex-start;\n  padding-left: 30rpx;\n}\n.coupon_list{\n  height: 40rpx;\n  position: relative;\n  text-align: center;\n  line-height: 40rpx;\n  margin-right: 12rpx;\n}\n.coupon_list image{\n  position: absolute;\n  left: 0rpx;\n  top: 0rpx;\n  width: 100%;\n  height: 100%;\n}\n.coupon{\n  font-size: 30rpx;\n  padding: 7rpx 24rpx 23rpx;\n  background-color: #ffffff;\n  display: flex;\n  justify-content:space-between;\n  border-bottom: 1px solid #eff0f5;\n  align-items: center;\n}\n.coupon_left{\n  font-size: 26rpx;\n  color: #858a97;\n  line-height: 48rpx;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n.coupon_right {\n  width: 144rpx;\n  height: 52rpx;\n  background: #e8fff3;\n  border-radius: 24rpx;\n  line-height: 52rpx;\n  text-align: center;\n  font-size: 24rpx;\n  color: #00b955;\n}\n.online_shopping{\n  width: 194rpx;\n  height: 54rpx;\n  background:#00b955;\n  color: #FFFFFF;\n  text-align: center;\n  line-height: 54rpx;\n  border-radius: 33rpx;\n  font-size: 28rpx;\n}\n.online_shopping.gray {\n  background: #D3D3D3;\n}\n\n.cart_button {\n  display: flex;\n  align-items: center;\n}\n.cart_button .text {\n  padding: 0 20rpx;\n  font-size: 26rpx;\n}\n.cart_button .button {\n  padding: 10rpx;\n}\n.cart_button .button view{\n  width: 40rpx;\n  height: 40rpx;\n  line-height: 34rpx;\n  border-radius: 40rpx;\n  text-align: center;\n  background: #00b955;\n  color: #FFFFFF;\n  font-size: 40rpx;\n}\n.cart_button .less view{\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border: 1px solid #00b955;\n  background: none;\n  color: #00b955;\n}\n.goods-avtive .cart_button {\n  color: #FFFFFF\n}\n.goods-avtive .cart_button .less view{\n  border-color: #FFFFFF;\n  background: none;\n}\n.goods-avtive .cart_button .button view{\n  background: #FFFFFF;\n  color: #FFFFFF;\n  color: #FF3232;\n}\n.white_bg {\n  background: #FFFFFF;\n  height: 100vh;\n}\n/* 药店入口 */\n.go-drugstore{\n  width: calc(100vw - 32rpx - 32rpx);\n  height: 114rpx;\n  margin: 0 auto;\n  padding-right: 24rpx;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #F8F8FD;\n  border-radius: 12rpx;\n}\n\n.img-warp {\n  margin-left: 24rpx;\n  width: 110rpx;\n  height: 74rpx;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.go-drugstore-img{\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.to-drugstore-icon {\n  width: 28rpx;\n  height: 28rpx;\n}\n.go-drugstore-name{\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  font-size: 28rpx;\n  color: #41435d;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n  max-width: 416rpx;\n  flex: 1;\n  position: relative;\n  left: -40rpx;\n}\n.go-drugstore-btn{\n  color: #00b955;\n  font-size: 28rpx;\n  text-align: center;\n  width: 152rpx;\n  height: 60rpx;\n  border: 1px solid #00b955;\n  line-height: 60rpx;\n  border-radius: 80rpx;\n}\n/* 活动 */\n.activity-box__content {\n  height: 88rpx;\n  position: relative;\n  background-color: #FEE9E9;\n  display: flex;\n}\n\n.activity-box__bg {\n  display: block;\n  position: absolute;\n  height: 88rpx;\n  top: 0;\n  left: 0;\n  width: 497rpx;\n}\n\n.activity-box__left {\n  width: 291rpx;\n}\n\n.activity-box__left image {\n  width: 100%;\n  height: 88rpx;\n}\n\n.activity-box__tag {\n  width: 74rpx;\n  height: 74rpx;\n  padding: 9rpx 10rpx;\n  box-sizing: border-box;\n  font-weight: bold;\n  font-size: 26rpx;\n  line-height: 30rpx;\n  color: #FFFFFF;\n  font-style: italic;\n  background: #F7322E;\n  border-radius: 10rpx;\n  margin: 0 20rpx 0 24rpx;\n}\n\n.activity-box__right {\n  display: flex;\n  align-items: center;\n  justify-content: space-between; \n  flex: 1;\n  padding-right: 20rpx;\n}\n\n.activity-box__right .lightning-icon {\n  width: 36rpx;\n  height: 41rpx;\n  margin-left: 32rpx;\n  margin-right: 12rpx;\n}\n\n.seconds-kill-info {\n  display: flex;\n  flex: 1;\n  /* padding-top: 15rpx; */\n  text-align: left;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.seconds-kill-info view:nth-child(1) {\n  color: #F93A4A !important;\n  font-size: 24rpx;\n  font-weight: 600;\n}\n\n.activity-box__text-mini {\n  font-size: 20rpx;\n  color: #F93A4A;\n}\n\n.seconds-kill-time {\n  display: flex;\n  flex-direction: column;\n  font-size: 22rpx;\n  text-align: center;\n}\n\n.seconds-kill-time text:nth-child(1) {\n  color: #994517;\n}\n\n.back-color{\n  background-color: #ffffff;\n  padding-bottom: 32rpx;\n}","js":"// pages/goodsDetail/goodsDetail.js\nconst app = getApp()\nimport {\n  ajax,\n  indexGetLocation,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\nimport {\n  wxParse,\n} from \"../../../wxParse/wxParse\";\n\n// Object.value Polyfill\nif (!Object.values) Object.values = function(obj) {\n  if (obj !== Object(obj))\n    throw new TypeError('Object.values called on a non-object');\n  var val = [],\n    key;\n  for (key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      val.push(obj[key]);\n    }\n  }\n  return val;\n}\n\nexport default {\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      isLayer1Show: false,\n      json_data: '',\n      //轮播图配置\n      swiperConfig: {\n        current: 0\n      },\n      cartNumber: 0, //购物车数量\n      coupon_text: true,\n      pageShow: false,\n      sj_stock: '',\n      drugStoreId: null,\n      classifyId: null,\n      drugStoreDisable: false,\n      drugDisable: false,\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n\n  onLoad: function(options) {\n    // 设置来源\n    if (options.source) {\n      getApp().globalData.globalSource = options.source;\n    }\n    let goodsId = options.goodsId\n    let drugStoreId = options.drugStoreId\n    let classifyId = options.classifyId\n\n    // 推广扫码逻辑处理：leo\n    this.handlePromotion(options)\n\n    if (options.share) {\n      this.setData({\n        shareSratus: options.share\n      })\n    }\n    if (options.userId) {\n      this.setData({\n        userId: options.userId\n      })\n    }\n    if (goodsId) {\n      this.setData({\n        goodsDetail: {\n          id: goodsId\n        },\n        classifyId: classifyId\n      })\n    }\n\n    if (drugStoreId) {\n      this.setData({\n        drugStoreId: drugStoreId\n      })\n    }\n\n    // 公益推广过来, marketActId 活动ID, promoterId推广ID\n    if (options.promoterId) {\n      let spreadData = {\n        marketActId: 1,\n        promoterId: options.promoterId\n      }\n      //推广信息需要存储，登录授权绑定用户关系用\n      Taro.setStorageSync('spreadData', spreadData)\n    }\n  },\n  onShow: function() {\n    let that = this;\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    // 判断是否有经纬度\n    if (getApp().address_data.latitude) {\n      this.getGoodsDetail();\n    } else {\n      // 没有去尝试拿经纬度\n      indexGetLocation((longitude, latitude) => {\n        if (!longitude) {\n          this.setData({\n            isLayer1Show:true\n          })\n          return false\n        }\n        getApp().address_data.longitude = longitude;\n        getApp().address_data.latitude = latitude;\n        this.getGoodsDetail();\n      })\n      \n    }\n    if (app.scene_val.val_zhi == 1036 || app.scene_val.val_zhi == 1007) {\n      Taro.reportAnalytics('clickmainmap', {\n        view_entry: '微信分享入口'\n      });\n    }\n  },\n  // 推广扫码逻辑:leo   渠道类型a\n  handlePromotion(options){\n    if (options.scene) {\n      // 药店id-商品id-推广人员id-任务id ， 示例：a-1-1000-10817-2\n      let scene = options.scene.split('-');\n      if(scene.length > 0){\n        // 页面参数赋值\n        this.setData({\n          drugStoreId: scene[1],\n          goodsDetail: {\n            id: scene[2]\n          },\n        })\n        // 打标（存到缓存） promoterId\tint\t推广员ID;popularizeId\tint\t任务ID;productId\tint\t商品ID;promoterDrugstoreId int\t推广员的药店id\n        let promotion = Taro.getStorageSync('promotion');\n        if(promotion){ // 如果缓存有promotion标\n          promotion[scene[1]+scene[2]] = {\n            promoterDrugstoreId:scene[1],\n            productId: scene[2],\n            promoterId: scene[3],\n            popularizeId: scene[4],\n            storageTime: Date.parse(new Date())//记录当前存储时间戳\n          }\n          Taro.setStorage({\n            key: 'promotion',\n            data: promotion\n          })\n        }else{ //没有promotion标直接存储\n          Taro.setStorage({\n            key: 'promotion',\n            data: {\n              [scene[1]+scene[2]]:{\n                promoterDrugstoreId: scene[1],\n                productId: scene[2],\n                promoterId: scene[3],\n                popularizeId: scene[4],\n                storageTime: Date.parse(new Date())//记录当前存储时间戳\n              }\n            }\n          })\n        }\n      }else{\n        Taro.showToast({\n          title: '参数异常',\n          icon: 'none'\n        })\n      }\n    }\n  },\n  // 倒计时结束触发\n  updataList(){\n    let that = this;\n    setTimeout(() => {\n      that.getGoodsDetail();\n    }, 1500);\n  },\n  // 加入购物车\n  addDrug: function(e) {\n    if (this.data.json_data.goods[0].stock - this.data.cartNumber > 0) { //判断库存\n      let detailItem = this.data.json_data.goods[0];\n      this.selectComponent('#OnlineGoods').addDrug(null, detailItem);\n    } else {\n      Taro.showToast({\n        title: '超过最大可售库存',\n        icon: 'none'\n      })\n    }\n  },\n  // 跳转药店\n  handleGoDrugstore(e){\n    let drugStoreId = e.currentTarget.dataset.id;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${drugStoreId}`\n    })\n  },\n  // 减去购物车\n  lessDrug: function() {\n    let detailItem = this.data.json_data.goods[0];\n    this.selectComponent('#OnlineGoods').lessDrug(null, detailItem);\n  },\n  //同步购物车\n  updateCart() {\n    let cart = Taro.getStorageSync('cart') || {};\n    let getItem;\n    if (cart[this.data.drugStoreId]) {\n      Object.values(cart[this.data.drugStoreId]).forEach((item, index) => {\n        if (item.medicinesId == this.data.json_data.goods[0].medicinesId) {\n          getItem = item;\n        }\n      })\n    }\n    if (getItem) {\n      this.data.cartNumber = getItem.number;\n      this.data.json_data.goods[0].number = getItem.number\n    } else {\n      this.data.cartNumber = 0;\n      this.data.json_data.goods[0].number = 0\n    }\n    this.setData({\n      cartNumber: this.data.cartNumber,\n      json_data: this.data.json_data\n    })\n  },\n  //轮播事件\n  swiperChange: function(event) {\n    this.setData({\n      [\"swiperConfig.current\"]: event.detail.current\n    })\n  },\n  // 一键领取\n  collection: function() {\n    let that = this;\n    if (that.data.coupon_text) {\n      that.setData({\n        coupon_text: false\n      })\n      ajax('get', 'couponController/pullCoupon', {\n        productId: that.data.goodsDetail.id,\n        clientType: 'mini',\n        drugstoreId:this.data.drugStoreId\n      }, (res) => {\n        if (res == 2) {\n          return false;\n        }\n        if (res.data.code == 0) {\n          Taro.showToast({\n            title: '领取成功',\n            image: '/images/successIcon.png',\n            mask: true,\n            duration: 2000\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none',\n            mask: true,\n            duration: 2000\n          })\n        }\n      })\n    }\n  },\n  onShareAppMessage: function(e) {\n    // 埋点\n    Taro.reportAnalytics('invitation', {\n      sharing_type: '分享商品'\n    });\n    let {\n      json_data\n    } = this.data;\n    if(!json_data.goods) return false;\n    //share=1  分享标识\n    let shareObj = {\n      title: json_data.goods[0].medicinesName + ' ' + json_data.goods[0].medicinesCommonName + ' ' + json_data.goods[0].medicinesSpecifications + '  ¥' + json_data.goods[0].medicinesPrice,\n      path: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${ json_data.goods[0].medicinesId }&share=1&drugStoreId=${ json_data.goods[0].drugstoreId }`,\n      imageUrl: json_data.goods[0].medicinesSharePhoto\n    };\n    shareObj.path = this.data.isDjk ? `${ shareObj.path }&src_whyb=${ this.data.isDjk }` : shareObj.path;\n    return shareObj;\n  },\n  //轮播事件\n  swiperChange: function(event) {\n    this.setData({\n      [\"swiperConfig.current\"]: event.detail.current\n    })\n  },\n  // 手动选择地址\n  editcard() {\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?address_data=${JSON.stringify({})}`\n    })\n  },\n  //获取商品详情\n  getGoodsDetail() {\n    let data = {\n      productId: this.data.goodsDetail.id,\n      lng: getApp().address_data.longitude,\n      lat: getApp().address_data.latitude,\n      clientType: \"mini\"\n    }\n    let sess_key = getApp().globalData.sess_key;\n    if (this.data.drugStoreId) {\n      data.drugstoreId = this.data.drugStoreId;\n    }\n    const url = this.data.isDjk ? 'miniapp/bighealth/medicine/onLineGoodsDetail' : 'mimiapp/grouparea/onLineGoodsDetail';\n    ajax('POST', url, data, res => {\n      if (res == 2) {\n        return false;\n      }\n      Taro.hideLoading();\n      this.setData({\n        pageShow: true\n      })\n      if (res.data.code == 0) {\n        this.setData({\n          isLayer1Show: false,\n        })\n        if (res.data.result.goods.length > 0) {\n          let data = res.data.result;\n          //重置商品字段，为了和购物车字段数据同步\n          data.goods[0].number = 0;\n          data.goods[0].classifyId = this.data.classifyId;\n          data.goods[0].price = data.goods[0].medicinesSellPrice;\n          data.goods[0].commonName = data.goods[0].medicinesCommonName;\n          data.goods[0].medicinesId = data.goods[0].medicinesId;\n          this.data.json_data = data;\n          this.data.drugStoreId = data.drugstoreId;\n          this.setData({\n            json_data: data,\n            coupon_text: data.couponStatus,\n            sj_stock: data.goods[0].stock,\n            drugStoreId: this.data.drugStoreId\n          })\n          // this.updateCart();//更新商品详情购物车数量\n          if (this.selectComponent('#OnlineGoods')) {\n            this.selectComponent('#OnlineGoods').cartCount();\n          }\n          if (data.goods.length > 0) {\n            wxParse('article', 'html', data.goods[0].medicinesDescription, this, 0);\n          }\n        } else {\n          Taro.showToast({\n            title: '药品已下架',\n            icon: 'none'\n          })\n          this.setData({\n            drugDisable: true\n          })\n        }\n      } else if (res.data.code == -1){//药店被禁用或下架\n        this.setData({\n          drugStoreDisable: true\n        })\n      } else if (res.data.code == -2) {//药品被禁用或下架\n        this.setData({\n          drugDisable: true\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n        setTimeout(() => {\n          Taro.switchTab({\n            url: '/pages/noteIndex/noteIndex'\n          })\n        }, 2000)\n      }\n    })\n\n  }\n};"},"convertDir/pages/onlineGoods/onlinePlaceOrder/onlinePlaceOrder":{"json":{"missingData-view":"/component/missingData/missingData","loginPhone":"/component/loginPhone/loginPhone","passWord":"/component/passWord/passWord","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxml":"\n  <view class=\"onlinePlaceOrder-auto-container\">    \n    <navBar title-text=\"确认预约\" :higherNav=\" true \" background=\"#00b955\" titleColor=\"#fff\"></navBar>\n    <view class=\"top-tips\" v-if=\" json_data.tips \" :style=\"{padding-top: calc( (navBarHeight + 10) + 'px' )}\">\n\t{{ json_data.tips }}\n    </view>\n    <view :class=\"[( LogonPhone ? 'page_fixed' : '' ),( isSrc_whyb ? 'djk-view' : '' )]\" :style=\"{padding-top:  !json_data.tips ? (navBarHeight + 10) + 'px' : unset }\">   \n      <block v-if=\"!json_data.hasVirDrugstore\">\n        <view class=\"yj-box\">  \n          <block v-if=\"json_data.isPinckupin == 1\">\n            <view :class=\"[yj-box-nr,(yj_switch_val == 1?'yj-xz':'')]\" bindtap=\"yj_switch\" data-tab=\"1\">\n\t\t\t\t\t到店自取\n\t\t\t\t\t\n              <image class=\"yj-box-md\" :src=\"'../../../pages/onlineGoods/images/'+ yj_switch_val==1 ? 'qr-icon-md-check' : 'qr-icon-md' +'.png'\"></image>\n              <image class=\"yj-check-icon\" src=\"../../../pages/onlineGoods/images/qr-icon-xz.png\" v-if=\"yj_switch_val == 1\"></image>\n            </view>\n          </block>\n          <block v-if=\"json_data.hasExpress == 1\">\n            <view :class=\"[yj-box-nr,(yj_switch_val == 3?'yj-xz':'')]\" bindtap=\"yj_switch\" data-tab=\"3\">\n\t\t\t\t\t快递邮寄\n\t\t\t\t\t\n              <image class=\"yj-box-md\" :src=\"'../../../pages/onlineGoods/images/'+ yj_switch_val==3 ? 'qr-icon-kd-check' : 'qr-icon-kd' +'.png'\"></image>\n              <image class=\"yj-check-icon\" src=\"../../../pages/onlineGoods/images/qr-icon-xz.png\" v-if=\"yj_switch_val == 3\"></image>\n            </view>\n          </block>\n          <block v-if=\"json_data.isDelivery == 1\">\n            <view :class=\"[yj-box-nr,(yj_switch_val == 2?'yj-xz':'')]\" bindtap=\"yj_switch\" data-tab=\"2\">\n\t\t\t\t\t同城闪送\n\t\t\t\t\t\n              <image class=\"yj-box-md\" :src=\"'../../../pages/onlineGoods/images/'+ yj_switch_val==2 ? 'qr-icon-tc-check' : 'qr-icon-tc' +'.png'\"></image>\n              <image class=\"yj-check-icon\" src=\"../../../pages/onlineGoods/images/qr-icon-xz.png\" v-if=\"yj_switch_val == 2\"></image>\n            </view>\n          </block>\n        </view>\n      </block>\n      <block v-if=\"json_data.hasDrugstore != false\">\n        <view class=\"container\" v-if=\"isPageShow\">           \n          <block v-if=\"!json_data.hasVirDrugstore\"> \n            <block v-if=\"yj_switch_val == 1\"> \n              <view class=\"headInfo\"> \n                <view class=\"title\">取药门店:{{drugStore.drugstore_name}}\n                </view>\n                <view class=\"block\"> \n                  <view class=\"left\">\n                    <view class=\"address\">\n\t\t\t\t\t\t\t\t\t店铺地址：{{drugStore.address}}\n\t\t\t\t\t\t\t\t\n                    </view>\n                  </view>\n                  <view class=\"time\">\n\t\t\t\t\t\t\t\t门店营业时间：{{json_data.businessHours}}\n\t\t\t\t\t\t\t\n                  </view>\n                </view>\n              </view>\n              <view class=\"btn-group-box5\"> \n                <view class=\"box5-btn\" bindtap=\"openMap\"> \n                  <image src=\"../../../images/icon-addr.png\"></image>\n                  <text>去药店\n                  </text>\n                </view>\n                <view class=\"box5-btn\" bindtap=\"callPhone\" :data-phone=\"json_data.tel\"> \n                  <image src=\"../../../images/icon-phone2.png\"></image>\n                  <text>联系药店\n                  </text>\n                </view>\n              </view>\n            </block>\n            <block v-else>\n              <view class=\"common_section address_box\" bindtap=\"toSelectAddress\">\n                <view :class=\"[cell,(userAddress.consignee?'arrow':'')]\"> \n                  <view class=\"cell_center\" catchtap=\"toSelectAddress\" v-if=\"userAddress.consignee\"> \n                    <view class=\"name\">  \n                      <text>{{ userAddress.consignee }}\n                      </text>\n                      <text>{{ userAddress.insensitivityPhone }}\n                      </text>\n                      <text class=\"tag\" v-if=\" userAddress.label \">{{ userAddress.label }}\n                      </text>\n                    </view>\n                    <view class=\"detail\">{{ userAddress.selectNearyAddress }}{{ userAddress.address }}\n                    </view>\n                  </view>\n                  <view class=\"cell_center\" v-else>\n                    <view class=\"empty\">请添加您的地址信息\n\t\t\t\t\t\t\t\t\n                      <text>+\n                      </text>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </block>\n          </block>\n          <view class=\"common_section register\" bindtap=\"toRegisterInfo\" v-if=\" json_data.showAntiepidemicRegister \">\n            <view class=\"cell arrow\"> \n              <view class=\"cell_left\">疾病防控登记\n                <text v-if=\" json_data.mustInputAntiepidemicRegister \">* \n                </text>\n              </view>\n              <view :class=\"[right,( registerInfo ? 'theme-text' : '' )]\">\n\t\t\t\t\t\t{{ registerInfo.patientName ? registerInfo.patientName : '请填写疫病防控登记信息'}}\n              </view>\n            </view>\n          </view>\n          <view class=\"drugstore-name\"> \n            <view class=\"yj-yd-name\"> \n              <view class=\"yj-yd-name-drugstore\">{{drugStore.drugstore_name}}\n              </view>\n              <view class=\"yj-yd-name-text\" v-if=\"json_data.amount > 0\" bindtap=\"handleDrugstore\">\n\t\t\t\t\t\t还差{{json_data.amount}}元{{ yj_switch_val == 2 ? '免配送费' : '包邮' }} 去凑单>\n              </view>\n            </view>\n            <view class=\"yj-yd-name-tips\" v-if=\" yj_switch_val == 1 && json_data.medicinesIsPrescribe \">您购买的药品包含处方药，请您凭处方到门店取药\n            </view>\n          </view>\n          <view class=\"pInfo-box\">\n            <block v-for=\"(item, key) in json_data.goods\" :key=\"key\">\n              <view class=\"pInfo\"> \n                <view class=\"pimg\"> \n                  <view :class=\"[medicare,(json_data.isMedicare==1?'':'hide')]\">医保支付\n                  </view>\n                  <image :src=\"item.medicinesSalePhoto\"></image>\n                </view>\n                <view class=\"content\">   \n                  <view class=\"name\"> {{item.medicinesName}}\n\t\t\t\t\t\t\t\t{{item.medicinesCommonName}} {{item.medicinesSpecifications}}\n                    <text v-if=\"item.limitNum > 0\" class=\"limit_tag\">限{{item.limitNum}}件\n                    </text>\n                    <text class=\"mark-icon\" v-if=\"item.activityInfo\">惠\n                    </text>\n                  </view>\n                  <view class=\"second-kill-tag\" v-if=\" item.activityInfo.actTag \">\n\t\t\t\t\t\t\t\t{{ item.activityInfo.actTag }}\n\t\t\t\t\t\t\t\n                  </view>\n                  <view class=\"flex_Box\">\n                    <view class=\"number\">×{{item.medicinesUtil}}\n                    </view>\n                  </view>\n                  <view class=\"price\"> \n                    <text v-if=\" item.activityInfo \" class=\"hot-price\">¥{{item.medicinesPrice }}\n                    </text>\n                    <text :class=\"[( item.activityInfo ? 'rel-price' : '' )]\">¥{{item.medicinesSellPrice}}\n                    </text>\n                  </view>\n                </view>\n              </view>\n            </block>\n          </view>\n          <view class=\"common_section zf-zt-list bz-text-bt-box\">  \n            <view class=\"cell arrow\" v-if=\" json_data.medicinesIsTemperature \"> \n              <view class=\"cell_left bold bz-text-bt\">实名信息\n                <text>* \n                </text>\n              </view>\n              <view class=\"right\" bindtap=\"toRegister\"> \n                <text v-if=\" selectedUserInfo.name \">{{ selectedUserInfo.name }}\n                </text>\n                <text class=\"green\" v-else>添加\n                </text>\n              </view>\n            </view>\n            <view class=\"cell arrow\" v-if=\" json_data.medicinesIsPrescribe \"> \n              <view class=\"cell_left bold bz-text-bt\">用药人信息\n                <text :hidden=\" !json_data.validPrescriptionAndPatientGuid \">* \n                </text>\n              </view>\n              <view class=\"right\" bindtap=\"toChoosePatient\"> \n                <text v-if=\" patientObj.patientName \" class=\"theme-text\">{{ patientObj.patientName }}\n                </text>\n                <text class=\"green\" v-else>请添加用药人信息\n                </text>\n              </view>\n            </view>\n            <view class=\"cell arrow\" v-if=\" json_data.medicinesIsPrescribe \">   \n              <view class=\"cell_left bold bz-text-bt\">处方信息\n                <text :hidden=\" !json_data.validPrescriptionAndPatientGuid \">* \n                </text>\n              </view>\n              <view class=\"right\" v-if=\" clickType == 1 && canUsePrescribeId \" bindtap=\"toPrescriptionDetail\">\n                <text class=\"theme-text\">查看处方\n                </text>\n              </view>\n              <view class=\"right\" v-else-if=\" clickType == 0 && uploadPrescriptionData.length > 0 \" bindtap=\"toAddPrescription\">\n                <text>已添加\n                </text>\n              </view>\n              <view class=\"right\" v-else bindtap=\"checkMedicinesPrescribe\">\n                <text class=\"green\">添加\n                </text>\n              </view>\n            </view>\n          </view>\n          <view class=\"common_section card-box\"> \n            <view class=\"cell\"> \n              <view class=\"cell_left\">支付方式\n              </view>\n              <view class=\"right zf-right-text\">\n\t\t\t\t\t\t{{json_data.paymentMethodDesc}}\n\t\t\t\t\t\n              </view>\n            </view>\n            <view :class=\"[cell,( json_data.medicareCardVo ? '' : 'arrow')]\" v-if=\" isSrcWhyb && json_data.hasSupportMedicare \">  \n              <view class=\"cell_left bz-text-bt\">电子社保卡\n              </view>\n              <view class=\"cell_right\" v-if=\" !json_data.medicareCardVo \" bindtap=\"toMedicareCard\">绑定城镇职工社保卡可以进行医保支付\n\t\t\t\t\t\n              </view>\n              <checkbox-group bindchange=\"selectedMedicareCard\" class=\"cell_right\" v-else>\n                <label>\n\t\t\t\t\t\t\t{{ json_data.medicareCardVo.accountName }} {{ json_data.medicareCardVo.userCardNo }}\n\t\t\t\t\t\t\t\n                  <checkbox :value=\" hasUseMedicare \" :checked=\" hasUseMedicare \"></checkbox>\n                </label>\n              </checkbox-group>\n            </view>\n          </view>\n          <view class=\"common_section\">    \n            <view class=\"cell arrow\" v-if=\" !isSrcWhyb \">   \n              <image class=\"picture\" src=\"../../../pages/onlineGoods/images/coupon.png\"></image>\n              <view class=\"cell_left\">优惠券\n              </view>\n              <view class=\"right default_color\" bindtap=\"toChooseCoupon\" v-if=\"usedCoupon.canUse && usedCoupon.defaultOption == 1\">-¥{{json_data.couponPrice}}\n              </view>\n              <view :class=\"[right,(usedNumber > 0 ? 'default_color' : 'gray')]\" v-else bindtap=\"toChooseCoupon\">\n\t\t\t\t\t\t{{usedNumber > 0 ? usedNumber + '张可用' : '暂无可用优惠券'}}\n              </view>\n            </view>\n            <view class=\"cell\"> \n              <view class=\"cell_left\">商品金额\n              </view>\n              <view class=\"right\">¥{{json_data.totalPrice}}\n              </view>\n            </view>\n            <view class=\"cell\" v-if=\"yj_switch_val != 1 && !json_data.hasVirDrugstore\"> \n              <view class=\"cell_left\">配送费用\n              </view>\n              <view class=\"right\">¥{{json_data.deliveryFee}}\n              </view>\n            </view>\n            <view class=\"cell\" v-if=\"json_data.discountPrice > 0\"> \n              <view class=\"cell_left\">优惠金额\n              </view>\n              <view class=\"right\">-¥{{json_data.discountPrice}}\n              </view>\n            </view>\n            <view class=\"cell\" v-if=\"usedCoupon.canUse\"> \n              <view class=\"cell_left\">使用优惠券\n              </view>\n              <view class=\"right\">-¥{{json_data.couponPrice}}\n              </view>\n            </view>\n          </view>\n          <view class=\"common_section zf-zt-list\" v-if=\" isSrc_whyb \">\n            <view class=\"cell price-box\"> \n              <view class=\"cell_left\"> \n                <text class=\"price\">¥{{ json_data.payAmount }}\n                  <text>个人支付\n                  </text>\n                </text>\n                <text class=\"price\" v-if=\" isSrcWhyb && json_data.hasSupportMedicare \">¥{{ json_data.medicareAmountDesc }}\n                  <text>医保支付\n                  </text>\n                </text>\n              </view>\n              <view class=\"right\">合计\n                <text>¥{{ json_data.payTotalAmountDesc }}\n                </text>\n              </view>\n            </view>\n          </view>\n          <view class=\"common_section zf-zt-list\" bindtap=\"go_remarks\">\n            <view class=\"cell arrow\"> \n              <view class=\"cell_left bold\">备注\n              </view>\n              <view :class=\"[right,zf-right-text,bz-text-yz,(!bz_text?'bz-mr-text':'')]\">\n\t\t\t\t\t\t{{!bz_text?'添加':bz_text}}\n\t\t\t\t\t\n              </view>\n            </view>\n          </view>\n          <view class=\"gz_jg_box\" v-if=\"json_data.userSubsidyText\">\n            <view class=\"gz_jg_box_text\">{{json_data.userSubsidyText}}\n              <image mode=\"scaleToFill\" src=\"../../../images/icon-question-mark.png\" class=\"icon_wh\" bindtap=\"handleRule\"></image>\n            </view>\n          </view>\n          <block>\n            <form report-submit=\"true\" bindsubmit=\"orderOpen\"> \n              <button :class=\"[btnOpen,(!addressStatus && yj_switch_val != 1?'btn-hui':'')]\" :style=\"{padding-bottom:  isIPX ? '40rpx' : '20rpx' }\" form-type=\"submit\" hover-class=\"none\" v-if=\" !isSrcWhyb \"> \n                <view v-if=\" yj_switch_val == 1  && json_data.paymentMethod == 2 \">￥{{ json_data.payAmount }}去支付备货金\n                </view>\n                <view v-else>￥{{ json_data.payAmount }}{{yj_switch_val == 1  && json_data.paymentMethod == 1? '提交预约' : '去支付'}}\n\t\t\t\t\t\t\n                </view>\n              </button>\n              <button :class=\"[btnOpen,(!addressStatus && yj_switch_val != 1?'btn-hui':'')]\" :style=\"{padding-bottom:  isIPX ? '40rpx' : '20rpx' }\" form-type=\"submit\" hover-class=\"none\" v-else>\n                <view class=\"pay-box\"> \n                  <view class=\"left\"> \n                    <text>个人支付：￥{{ json_data.payAmount }}\n                    </text>\n                    <text v-if=\" isSrcWhyb && json_data.hasSupportMedicare \">医保支付：￥{{ json_data.medicareAmountDesc }}\n                    </text>\n                  </view>\n                  <view class=\"right\">{{yj_switch_val == 1  && json_data.paymentMethod == 1? '提交预约' : '去支付'}}</ view>\n\t\t\t\t\t\t\t\n                  </view>\n                </view>\n              </button>\n            </form>\n          </block>\n          <block v-if=\"json_data.onLineStatus != 0 && json_data.goods.length == 0\">\n            <view class=\"btnOpen kucunbuzu\">\n\t\t\t\t\t库存不足\n\t\t\t\t\n            </view>\n          </block>\n        </view>\n      </block>\n      <halfScreenDialog :show=\" gzShow \" title=\"规则内容\" type=\"2\" btnText=\"我知道了\">\n        <view slot=\"desc\">{{json_data.userSubsidyTips}}\n        </view>\n      </halfScreenDialog>\n      <block v-if=\"json_data.hasDrugstore == false\">\n        <missingData-view zhi=\"new1\" :imageUrl=\" url_link + 'images/empty-log.png' \" bind:action=\"exFun\" buttonText=\"返回首页\"></missingData-view>\n      </block>\n    </view>\n    <passWord defalutTitle=\"请输入医保支付密码\" bind:getPassVal=\"medicareCardPay\" :showPayPwdInput=\" passWordShow \">\n      <view slot=\"desc\" class=\"pass-word-text\">医保支付金额：¥\n        <text>{{ json_data.medicareAmountDesc }}\n        </text>\n      </view>\n    </passWord>\n    <loginPhone v-if=\"LogonPhone\" bind:action=\"loginPhone_fun\"></loginPhone>\n  </view>","wxss":"@import '../../../common/tableView.wxss';\n\n.container {\n  padding-bottom: 220rpx;\n}\n\n.container {\n  background: #F5F6FA;\n}\n\n.top-tips {\n  color: #FF2121;\n  font-size: 24rpx;\n  padding: 20rpx 30rpx;\n  background: #FFF4F4;\n}\n\n.medicare {\n  position: absolute;\n  top: 10rpx;\n  left: 0;\n  width: 120rpx !important;\n  height: 39rpx !important;\n  line-height: 39rpx;\n  text-align: center;\n  border-top-right-radius: 30rpx;\n  border-bottom-right-radius: 30rpx;\n  background: linear-gradient(to right, #5bcbf8, #4182f6);\n  font-size: 20rpx;\n  color: #FFFFFF;\n}\n\n.headInfo {\n  position: relative;\n  background: #fff;\n  padding: 20rpx 24rpx 14rpx;\n  box-sizing: border-box;\n  border-radius: 12rpx 12rpx 0 0;\n  margin: 0 24rpx;\n}\n\n.kucunbuzu {\n  background: #cacaca !important;\n}\n\n.headInfo .title {\n  font-size: 32rpx;\n  color: #333;\n  letter-spacing: 0;\n}\n\n.headInfo .block .left {\n  width: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.headInfo .block .address, .headInfo .block .time {\n  font-size: 28rpx;\n  color: #666;\n  margin: 10rpx 0;\n  flex: 1;\n}\n\n.headInfo .colour_bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 7rpx;\n}\n\n.pInfo-box {\n  border-radius: 0 0 12rpx 12rpx;\n  margin: 0 24rpx;\n  overflow: hidden;\n}\n\n.pInfo {\n  width: 100%;\n  height: 230rpx;\n  background: #FFFFFF;\n  padding: 20rpx;\n  display: flex;\n  box-sizing: border-box;\n}\n\n.pimg {\n  position: relative;\n}\n\n.pInfo .pimg, .pInfo .pimg image {\n  width: 180rpx;\n  height: 180rpx;\n}\n\n.pInfo .content {\n  flex: 1;\n  margin-left: 26rpx;\n  height: 180rpx;\n  position: relative;\n}\n\n.pInfo .content .group_tag {\n  border: 1rpx solid #e4393b;\n  color: #e4393b;\n  padding: 0 10rpx;\n  height: 19px;\n  line-height: 19px;\n  font-size: 24rpx;\n  display: inline-block;\n  border-radius: 22rpx;\n  margin: 4px 0;\n}\n.pInfo .content .name .limit_tag {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n.pInfo .content .name, .pInfo .content .price {\n  font-size: 28rpx;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.pInfo .content .flex_Box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n}\n\n.pInfo .content .number {\n  font-size: 28rpx;\n  color: #999;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.pInfo .content .price {\n  font-weight: 700;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 20px;\n  line-height: 20px;\n}\n\n.pInfo .content .price text {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.column {\n  width: 100%;\n  background: #fff;\n}\n\n.points-box5 {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 20rpx 23rpx;\n  padding-bottom: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fbfbfb;\n  /* margin-bottom: 20rpx; */\n  flex-wrap: wrap;\n}\n\n.point-item {\n  font-size: 26rpx;\n  padding-left: 40rpx;\n  position: relative;\n  margin-bottom: 20rpx;\n}\n\n.point-item image {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  top: 5rpx;\n  left: 0;\n}\n\n.btn-group-box5 {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 90rpx;\n  line-height: 60rpx;\n  padding: 15rpx 23rpx;\n  background: #fff;\n  text-align: center;\n  border-top: 1rpx solid #EEEEEE;\n  margin: 0 24rpx 20rpx;\n  border-radius: 0 0 12rpx 12rpx;\n}\n\n.box5-btn {\n  box-sizing: border-box;\n  width: 50%;\n  position: relative;\n}\n\n.box5-btn image {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: middle;\n}\n\n.box5-btn text {\n  color: #333;\n  font-size: 30rpx;\n  margin-left: 10rpx;\n}\n\n.box5-btn:first-child {\n  border-right: 1rpx solid #ddd;\n}\n\n.bottomTip {\n  width: 100%;\n  font-size: 32rpx;\n  color: #999;\n  letter-spacing: 0;\n  text-align: center;\n  height: 65rpx;\n  line-height: 65rpx;\n}\n\n.btnOpen {\n  position: fixed;\n  left: 20rpx;\n  bottom: 0;\n  width: calc(100% - 40rpx);\n  line-height: 100rpx;\n  /* box-shadow: inset 0 1px 0 0 #dcdcdc; */\n  border-radius: 50rpx;\n  font-size: 32rpx;\n  color: #fff;\n  font-weight: bold;\n  letter-spacing: 0;\n  text-align: center;\n}\n\n.btnOpen view {\n  border-radius: 50rpx;\n  background: #00b955;\n}\n\n.btn-hui view {\n  border-radius: 50rpx;\n  background: #c6cad4;\n  color: #fff;\n}\n\n.common_section {\n  margin: 0 26rpx;\n  border-radius: 12rpx;\n}\n\n.common_section .cell {\n  margin: 0 24rpx;\n  height: 98rpx;\n  padding: 0;\n}\n\n.common_section .cell .cell_left {\n  color: #666;\n}\n\n.common_section .cell_left {\n  flex: 1;\n}\n\n.common_section .cell .cell_center {\n  color: #666;\n  font-size: 28rpx;\n  flex: 1;\n}\n\n.common_section .cell .cell_center textarea {\n  width: 100%;\n  height: 150rpx;\n  border: 2rpx solid #ccc;\n  padding: 10rpx;\n  box-sizing: border-box;\n}\n\n.common_section .cell .cell_center .count {\n  position: absolute;\n  bottom: 10rpx;\n  right: 10rpx;\n  text-align: right;\n}\n\n.common_section .arrow .right {\n  padding-right: 20rpx;\n}\n\n.common_section .green {\n  color: #9D9FB8;\n}\n\n.common_section .arrow::after {\n  right: 0;\n}\n\n.common_section .cell .picture {\n  width: 32rpx;\n  height: 27rpx;\n  margin-right: 8rpx;\n}\n\n/* 会员弹框 */\n\n.Member-alert-back {\n  background-color: #000;\n  opacity: 0.5;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n\n.Member-alert {\n  width: 520rpx;\n  height: auto;\n  position: absolute;\n  left: calc(50% - 260rpx);\n  top: 30%;\n  z-index: 3;\n}\n\n.Member-alert image {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.Member-text {\n  font-size: 28rpx;\n  color: #333;\n  padding: 30rpx;\n  background-color: #fff;\n}\n\n.Member-view {\n  padding: 0 30rpx 0 30rpx;\n  background-color: #fff;\n  padding-bottom: 20rpx;\n}\n\nradio .wx-radio-input.wx-radio-input-checked {\n  border: none;\n  background: #bc7b3d !important;\n}\n\n.Member-btn {\n  height: 90rpx;\n  padding: 0 30rpx 0 30rpx;\n  border-radius: 110rpx;\n  background-color: #bc7b3d;\n  text-align: center;\n  line-height: 90rpx;\n  color: #fff;\n  background: -webkit-linear-gradient(left, #d89352, #ba793b);\n  margin-top: 30rpx;\n}\n\n/* 邮寄 */\n\n.yj-box {\n  padding: 20rpx 24rpx 20rpx 24rpx;\n  display: flex;\n  background-color: #fff;\n  border-bottom: 1rpx solid rgba(238, 238, 238, 1);\n  margin-bottom: 20rpx;\n}\n\n.yj-box-nr {\n  width: calc(33% - 14rpx);\n  height: 100rpx;\n  text-align: center;\n  line-height: 100rpx;\n  color: #666;\n  font-size: 32rpx;\n  border-radius: 8px;\n  border: 1px solid rgba(238, 238, 238, 1);\n  position: relative;\n  margin-right: 22rpx;\n  overflow: hidden;\n}\n.yj-box .yj-box-nr:last-child{\n  margin-right: 0;\n}\n.yj-box-md {\n  display: inline-block;\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: middle;\n}\n\n.yj-check-icon {\n  width: 44rpx;\n  height: 44rpx;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n\n.yj-xz {\n  border: 3rpx solid #00b955;\n}\n\n.drugstore-name {\n  padding: 24rpx;\n  background-color: #fff;\n  margin: 20rpx 24rpx 0;\n  border-bottom: 1rpx solid #EEEEEE;\n}\n\n.yj-yd-name {\n  font-weight: 500;\n  color: rgba(51, 51, 51, 1);\n  font-size: 30rpx;\n  display: flex;\n  border-radius: 12rpx 12rpx 0 0;\n}\n.yj-yd-name-drugstore{\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  flex: 1;\n  font-weight: bold;\n}\n\n.yj-yd-name-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.yj-yd-name-tips {\n  font-size: 24rpx;\n  color: #017AFF;\n}\n\n.address_box .cell{\n  padding: 15rpx 0;\n  margin: 0 24rpx;\n  height: inherit;\n}\n.address_box .cell .cell_center {\n  width: 100%;\n}\n\n.address_box .cell::before {\n  border: 0;\n}\n\n.address_box .cell_center .empty {\n  text-align: center;\n  font-size: 30rpx;\n  padding: 30rpx 0;\n  color: #666;\n}\n\n.address_box {\n  position: relative;\n  /* padding: 30rpx 0; */\n}\n\n.address_box .colour_bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 5rpx;\n}\n\n.cell_center .name {\n  font-size: 32rpx;\n  color: #333;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.cell_center .name text{\n  margin-right: 20rpx;\n}\n\n.cell_center .name .tag {\n  font-size: 24rpx;\n  background: rgba(0,122,255,0.08);\n  height: 30rpx;\n  line-height: 30rpx;\n  border-radius: 4rpx;\n  padding: 0 16rpx;\n  color: #00b955;\n}\n\n.address_box .colour_bar {\n  width: calc(100vw - 24rpx - 24rpx);\n  margin-left: 24rpx;\n  background: #eff0f5;\n  height: 2rpx;\n}\n\n/* 支付ui */\n\n.zf-right-text {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 100 !important;\n}\n\n.zf-zt-list {\n  margin-top: 20rpx;\n}\n.zf-zt-list .cell .right {\n  font-weight: 100 !important;\n  height: 80rpx;\n  line-height: 80rpx;\n}\n\n.bz-css {\n  margin-top: 0;\n  border-top: 1rpx solid #eee;\n}\n\n.bz-ps-box {\n  height: 80rpx;\n  background: rgba(250, 250, 250, 1);\n  line-height: 80rpx;\n  font-size: 24rpx;\n  color: #666;\n  padding: 0 24rpx 0 24rpx;\n  margin-bottom: 20rpx;\n}\n\n.bz-text-yz {\n  width: 532rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: right;\n}\n\n.bz-mr-text {\n  color: #999;\n}\n\n.bz-text-bt-box {\n  margin-bottom: 20rpx;\n}\n.bz-text-bt-box .bz-text-bt{\n  min-width: 200rpx;\n}\n.bz-text-bt-box .right{\n  flex: 1;\n  text-align: right;\n}\n.bz-text-bt text {\n  color: #ff3b30;\n}\n\n.bz-sf-box {\n  height: 120rpx;\n  background-color: #fff;\n  padding-left: 24rpx;\n  padding-right: 24rpx;\n  border-bottom:1rpx solid #DDDDDD;\n  color: #666666;\n  font-size: 24rpx;\n  line-height: 120rpx;\n}\n\n.bz-sf-box-icon {\n  width: 44rpx;\n  height: 44rpx;\n  vertical-align: middle;\n  display: inline-block;\n  margin-top: -10rpx;\n}\n.bz-sf-box-name{\n  font-size: 32rpx;\n  color: #333333;\n  margin-left: 12rpx;\n  margin-right: 10rpx;\n}\n.page_fixed {\n  overflow: hidden;\n  position:fixed;\n}\n\n.second-kill-tag {\n  display: inline-block;\n  padding: 0 8rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  color: rgba(255,33,33,1);\n  line-height: 28rpx;\n  background:rgba(255,33,33,0.05);\n  border-radius: 2rpx;\n  border: 1rpx solid rgba(255,33,33,0.5);\n}\n\n.rel-price {\n  text-decoration: line-through;\n  margin-left: 10rpx;\n  font-size: 23rpx !important;\n  color: rgba(102, 102, 102, 1) !important;\n  font-family: PingFangSC-Regular,PingFang SC;\n  font-weight: 400;\n  font-size: 20rpx!important;\n  color: #999!important;\n}\n\n.hot-price {\n  color: rgba(255, 33, 33, 1) !important;\n}\n\n.register {\n  margin: 20rpx 24rpx;\n}\n\n.register .cell text {\n  color: #F93A4A;\n}\n\n.register .right {\n  color: #9D9FB8;\n  font-weight: normal;\n}\n\n.card-box {\n  margin-bottom: 20rpx;\n}\n\n.card-box .cell .cell_right{\n  font-size: 28rpx;\n  color: #999999\n}\n\n.card-box checkbox .wx-checkbox-input.wx-checkbox-input-checked {\n  background: #00B955;\n}\n\n.pass-word-text {\n  font-size: 36rpx;\n  font-weight: bold;\n}\n\n.pass-word-text text{\n  font-size: 60rpx;\n}\n\n.common_section .price-box {\n  font-size: 24rpx;\n}\n\n.common_section .price-box .price {\n  margin-right: 20rpx;\n  color: #000000;\n}\n\n.common_section .price-box .price text{\n  color: #999999;\n}\n\n.common_section .price-box .right text {\n  font-weight: bold;\n  font-size: 32rpx;\n  margin-left: 10rpx;\n}\n/* 1号项目 */\n.gz-text{\n  color: #F93A4A;\n  font-size: 28rpx;\n}\n.icon_fx{\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 5rpx;\n}\n.gz_left{\n  display: flex;\n  width: 50%;\n}\n.icon_wh{\n  width: 36rpx;\n  height: 36rpx;\n  margin-left: 5rpx;\n  margin-bottom: -8rpx;\n}\n.gz_jg_box{\n  background-color: #fff6d5;\n  width: calc(100% - 40rpx);\n  position: fixed;\n  left: 20rpx;\n  bottom: 90rpx;\n  margin: 0 auto;\n  height: 108rpx;\n}\n.gz_jg_box_text{\n  text-align: center;\n  color: #FF6010;\n  font-size: 26rpx;\n  padding-top: 14rpx;\n}\n","js":"/*\n * @Description: In User Settings Edit\n * @Author: your name\n * @Date: 2019-08-22 20:42:45\n * @LastEditTime: 2021-04-06 10:31:53\n * @LastEditors: Please set LastEditors\n * 注：确认订单的palyType ：3代表sf物流\n */\n// pages/Collage/placeOrder/placeOrder.js\nconst app = getApp();\nimport {\n  isLogonPhone,\n  open_wechatMap,\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl,\n  toWeixinPayNew\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      gzShow:false,//规则弹框是否显示\n      oderPromotion: [],//当前订单匹配的商品标记，用来下单成功后删除用\n      pageLoad: false,\n      toChooseCoupon: false,\n      toWeixinPayType: false,//支付状态\n      shakeNumerId: '',\n      palyType: '',\n      bz_text: '',\n      alert_zt: true,\n      addressStatus: false,\n      userAddress: null,\n      yj_switch_val: 3,\n      url_link: cdnStaticResourceUrl,\n      levelId: null, //会员等级标识\n      memberAlertType: false,\n      LogonPhone: false, // 判断是否绑定手机号\n      online_detail: false,\n      json_data: {},\n      location: {\n        longitude: 114.30,\n        latitude: 30.60\n      },\n      drugStore: {\n        // 当前药店id\n        id: \"88\"\n      },\n      goodsDetail: {\n        //当前药品活动Id\n        id: \"181\"\n      },\n      pusherUserId: null, //分享名片的用户id\n      pusherUserType: null,\n      isLayer1Show: false, // 弹框状态\n      usedCoupon: {}, //优惠券可减折扣\n      usedNumber: null, //优惠券可用数量\n      isPageShow: false,\n      sp_jsonData: [], //商品数据（数量，id）\n      type_quan: '',\n      radio_type: true,\n      phone: null,\n      orederOpenClickTime: null,\n      orderSubmitClickTime: null,\n      prescribeClickTime: null,\n      isIPX: app.globalData.isIPX,\n      selectedUserInfo: {},\n      uploadPrescriptionData: [],\n      patientObj: {}, //用药人信息\n      clickType: 1,//上传处方选择的方式\n      canUsePrescribeId: null,\n      isCheckMedicinesPrescribe: false,\n      // remark: '',\n      orderPrice: 0, // 商品订单金额 \n      isSrcWhyb: getApp().globalData.src_whyb || '',\n      hasUseMedicare: true,\n      passWordShow: false,\n      medicareCardPassword: null,\n      orderNo: null,\n      navBarHeight: getApp().globalData.navBarHeight,\n      registerInfo: {\n        patientName: '',\n        patientIdCard: '',\n        phone: '',\n        address: '',\n        temperature: '',\n        symptom: [],\n        hasBeenDangerousArea: false\n      },\n      promoterAccountId: ''\n    };\n  },\n  onLoad: function (options) {\n    Taro.removeStorageSync('prescription_image_data');\n    Taro.removeStorageSync('upload_click_type');\n    this.data.pageLoad = true;\n    this.setData({\n      drugStore: {\n        id: options.drugStoreId ? options.drugStoreId : ''\n      },\n      goodsDetail: {\n        id: options.goodsId,\n      },\n      pusherUserId: getApp().globalData.userId,\n      pusherUserType: Taro.getStorageSync('userInfo').pusher_user_type\n    })\n    if (options.palyType) {\n      console.log('palyType:' + options.palyType)\n      this.setData({\n        palyType: options.palyType\n      })\n    }\n    if (options.shakeNumerId) {\n      console.log('shakeNumerId:' + options.shakeNumerId)\n      this.setData({\n        shakeNumerId: options.shakeNumerId\n      })\n    }\n\n    if (options.medicineId) {\n      this.data.sp_jsonData.push({\n        \"productId\": options.medicineId,\n        \"productNum\": 1\n      })\n    } else {\n      let cart = Taro.getStorageSync('cart');\n\n      //异常处理，过滤未null的对象\n      Object.keys(cart[this.data.drugStore.id]).forEach((key) => (cart[this.data.drugStore.id][key] == null) && delete cart[this.data.drugStore.id][key]);\n\n      cart && Object.values(cart[this.data.drugStore.id]).forEach(item => {\n        if (item) {\n          this.data.sp_jsonData.push({\n            \"productId\": item.medicinesId,\n            \"productNum\": item.number\n          })\n        }\n      })\n    }\n    this.getRealName();\n    this.getCoupon();\n    this.getPromotionScanRecord();\n  },\n  onShow: function () {\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n    Taro.removeStorageSync('selected_disgnosis_name');\n    Taro.getStorage({\n      key: 'userInfo',\n      success: (res) => {\n        this.data.phone = res.data.phone\n      }\n    });\n    let latitude = getApp().address_data.latitude;\n    let longitude = getApp().address_data.longitude;\n    this.setData({\n      location: {\n        longitude: longitude,\n        latitude: latitude\n      },\n      uploadPrescriptionData: Taro.getStorageSync('prescription_image_data') || [],\n      clickType: Taro.getStorageSync('upload_click_type') || 1,\n      isSrcWhyb: getApp().globalData.src_whyb\n    });\n\n    //防疫登记和处方用药人为同一人(防疫登记已填写不自动根据用药人变更)\n    if(this.data.json_data.medicinesIsPrescribe && !this.data.registerInfo.patientName) this.data.registerInfo.id = this.data.patientObj.id;\n\n    //如果有用药人信息检查是否有可用处方\n    if (this.data.patientObj.id && this.data.isCheckMedicinesPrescribe) {\n      this.checkMedicinesPrescribe('showChecked');\n    }\n    if (this.data.pageLoad) {\n      this.data.pageLoad = false;\n    } else {\n      // 不是支付完成触发的onshow才会更新数据&&不是从选择优惠券触发的onshow\n      if (!this.data.toWeixinPayType && !this.data.toChooseCoupon) {\n        this.getGoodsDetail();\n      } else {\n        // 初始化选择优惠券页面返回的状态\n        this.data.toChooseCoupon = false\n      }\n    }\n  },\n  handleRule(){\n    this.setData({\n      gzShow:true\n    }) \n  },\n  yj_switch(e) {\n    let data = e.currentTarget.dataset.tab;\n    if (data == this.data.yj_switch_val) {\n      return false\n    } else {\n      this.setData({\n        yj_switch_val: data,\n        palyType: data,\n        hasUseMedicare: data == 2 ? true : false\n      }, function () {\n        this.getCoupon();\n      });\n    }\n  },\n  // 清掉当前订单匹配的缓存标记leo\n  handleEliminatePromotion() {\n    //获取缓存标记\n    let promotion = Taro.getStorageSync('promotion');\n    // 获取匹配的缓存数组\n    let storeList = this.data.oderPromotion;\n    // 如果有匹配的标记则遍历删除\n    if (storeList.length > 0) {\n      storeList.forEach((item) => {\n        delete promotion[item]\n      })\n      // 处理完的标记，则更新缓存\n      Taro.setStorage({\n        key: 'promotion',\n        data: promotion\n      })\n    }\n  },\n  // 缓存超过24小时清空处理；leo\n  handle24Hours() {\n    let that = this;\n    //获取缓存标记\n    let promotion = Taro.getStorageSync('promotion');\n    //如果缓存有数据\n    if (promotion && JSON.stringify(promotion) != \"{}\") {\n      //当前时间戳\n      let time = Date.parse(new Date());\n      for (let key in promotion) {\n        console.log(promotion[key])\n        // 如果超过24小时则删除标记     24*60*60*1000\n        if ((time - promotion[key].storageTime) / (24 * 60 * 60 * 1000) > 1) {\n          delete promotion[key]\n        } else {\n          //否则判断当前订单是否有满足当前标记的药店+商品，满足则把标记打到商品上\n          let goodsList = that.data.sp_jsonData;\n          // 遍历订单商品list，查找匹配标记\n          goodsList.forEach((item, index) => {\n            // 如果有匹配标记种在商品对象中\n            console.log(key, (that.data.drugStore.id + item.productId));\n            if (key == `${that.data.drugStore.id}${item.productId}`) {\n              that.data.oderPromotion.push(key);\n              console.log(that.data.oderPromotion);\n              // 在订单商品list找到匹配推广标记的商品，将标记种在商品对象中\n              item = Object.assign(item, {\n                promoterId: parseInt(promotion[key].promoterId), // 推广员id\n                popularizeId: parseInt(promotion[key].popularizeId), // 任务id\n                promoterDrugstoreId: parseInt(promotion[key].promoterDrugstoreId) //药店id\n              })\n            }\n          })\n          that.setData({\n            sp_jsonData: goodsList\n          })\n        }\n      }\n      // 处理完的标记，则更新缓存\n      Taro.setStorage({\n        key: 'promotion',\n        data: promotion\n      })\n    }\n  },\n  handleMatching() {\n\n  },\n  bindPickerChange: function (e) {\n    this.setData({\n      index: e.detail.value\n    })\n  },\n  // 添加地址\n  toSelectAddress() {\n    this.data.isCheckMedicinesPrescribe = false\n    Taro.navigateTo({\n      url: `/pages/note/selectAddress/selectAddress?userAddress=${JSON.stringify(this.data.userAddress)}`\n    })\n  },\n  toChoosePatient() {\n    this.data.isCheckMedicinesPrescribe = true;\n    if (this.data.patientObj.id) {\n      //有患者列表点击跳转患者管理，反之跳转新增患者\n      Taro.navigateTo({\n        url: `/pages/note/patient/patientInfoManage/patientInfoManage?currentPatientId=${this.data.patientObj.id}`,\n      })\n    } else {\n      Taro.navigateTo({\n        url: '/pages/note/patient/patientInfo/patientInfo?pageFrom=inquiryInfo',\n      })\n    }\n  },\n  // 加入会员(体温登记版本暂时禁用)\n  // joinMember(e) {\n  //   let that = this;\n  //   if (that.data.radio_type) {\n  //     ajax2('POST', 'member/add', {\n  //       levelId: this.data.levelId,\n  //       drugstoreSign: this.data.drugstoreSign,\n  //       phone: this.data.phone\n  //     }, (res) => {\n  //       that.order_submit(e.detail.formId)\n  //     }, (res) => {\n  //       Taro.showToast({\n  //         title: '请求失败',\n  //         icon: 'none'\n  //       })\n  //     })\n  //   }else{\n  //     that.order_submit(e.detail.formId)\n  //   }\n  // },\n  // 判断是否为会员(体温登记版本暂时禁用2月11日)\n  // memberType(formId) {\n  //   let that = this;\n  //   ajax2('POST', 'member/checkMember', {\n  //     drugstoreSign: this.data.drugstoreSign,\n  //     phone: this.data.phone\n  //   }, (res) => {\n  //     console.log(res);\n  //     if (res.data.code == 0) {\n  //       console.log(res);\n  //       if (res.data.result.showJoinMemberWindow) {\n  //         this.setData({\n  //           memberAlertType: true,\n  //           levelId: res.data.result.levelId\n  //         })\n  //       } else {\n  //         that.order_submit(formId)\n  //       }\n  //     } else {\n  //       that.order_submit(formId)\n  //     }\n  //   }, (res) => {\n  //     Taro.showToast({\n  //       title: '请求失败',\n  //       icon: 'none'\n  //     })\n  //   })\n  // },\n\n  toMedicareCard() {\n    this.data.isCheckMedicinesPrescribe = true;\n    Taro.navigateTo({\n      url: '/pages/djk/pages/medicareCard/medicareCard',\n    })\n  },\n  selectedMedicareCard(e) {\n    this.setData({\n      hasUseMedicare: e.detail.value[0]\n    })\n    this.getGoodsDetail();\n  },\n  radioChange() {\n    if (this.data.radio_type == true) {\n      this.setData({\n        radio_type: false\n      })\n    } else {\n      this.setData({\n        radio_type: true\n      })\n    }\n  },\n  clear_btn: function () {\n    this.setData({\n      isLayer1Show: false\n    })\n  },\n  handleDrugstore() {\n    Taro.redirectTo({\n      url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${this.data.drugStore.id}`\n    })\n  },\n  toRegister() {\n    this.data.isCheckMedicinesPrescribe = false\n    Taro.navigateTo({\n      url: '/pages/note/realNameRegister/realNameRegister'\n    })\n  },\n  toPrescriptionDetail() {\n    this.data.isCheckMedicinesPrescribe = false;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/prescriptionDetails/prescriptionDetails?inquiryId=${ this.data.canUsePrescribeId }`\n    })\n  },\n  // 获取用户实名登记信息\n  getRealName() {\n    ajax('get', 'mimiapp/userCertification/getUserCertification', {}, (res) => {\n      console.log(res);\n      if (res.data.code == 0) {\n        this.setData({\n          selectedUserInfo: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          duration: 3000,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  // 获取用户扫码记录\n  getPromotionScanRecord() {\n    ajax('post', 'api/wechat/scan/getPromotionScanRecord', {\n      poiId: this.data.drugStore.id\n    }, (res) => {\n      if (res.data.code == 0) {\n        　this.setData({\n          promoterAccountId: res.data.result ? res.data.result : ''\n        })\n      }\n    })\n  },\n  // 跳转备注\n  go_remarks() {\n    this.data.isCheckMedicinesPrescribe = false\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/remarks/remarks?text=${encodeURIComponent(this.data.bz_text)}`\n    })\n  },\n  // 查询运费\n  // freight(){\n  //   if (!this.data.userAddress){\n  //     return false\n  //   }\n  //   let spData = this.data.sp_jsonData\n  //   console.log(JSON.stringify(spData))\n  //   let data = {\n  //     addressId: this.data.userAddress.id,\n  //     productAndNums: JSON.stringify(spData),\n  //     drugstoreId: this.data.drugStore.id,\n  //     palyType: this.data.yj_switch_val\n  //   }\n  //   if (!this.data.shakeNumerId) {\n  //     data.type = 1;\n  //   }\n  //   ajax('get', 'mimiapp/grouparea/deliveryFee',data, (res) => {\n  //     console.log(res);\n  //     if (res.data.code == 0) {\n  //       let data = this.data.json_data\n  //       data.deliveryFee = res.data.result\n  //       this.setData({\n  //         json_data: data\n  //       })\n  //       if (this.data.yj_switch_val == 3){\n  //         this.setData({\n  //           addressStatus: true,\n  //         })\n  //       }\n  //     } else {\n  //       Taro.showToast({\n  //         title: this.data.yj_switch_val == 3 ? '当前收货地址不在可购买地区' : '当前地址不在配送范围内',\n  //         duration: 3000,\n  //         icon: 'none'\n  //       })\n  //       if (this.data.yj_switch_val == 3) {\n  //         this.setData({\n  //           addressStatus: false,\n  //         })\n  //       }\n  //     }\n  //   })\n  // },\n  // openPassWord(){\n  //   if (!this.data.userAddress && this.data.yj_switch_val != 1){\n  //     Taro.showToast({\n  //       title: '请添加收货地址',\n  //       duration: 3000,\n  //       icon: 'none'\n  //     })\n  //     return false;\n  //   }\n  //   // 判断是否支持配送\n  //   if (!this.data.addressStatus && this.data.yj_switch_val != 1){\n  //     Taro.showToast({\n  //       title: this.data.yj_switch_val == 3 ? '当前收货地址不在可购买地区' : '当前地址不在配送范围内',\n  //       duration: 3000,\n  //       icon: 'none'\n  //     })\n  //     return false;\n  //   }\n  //   if(!this.data.json_data.medicareCardVo) {\n  //     Taro.showModal({\n  //       content: '您未绑定电子社保卡，无法使用医保支付，是否绑定电子社保卡?',\n  //       confirmColor: \"#00B955\",\n  //       confirmText: '去绑定',\n  //       cancelText: '继续支付',\n  //       success: res => {\n  //         if (res.confirm) {\n  //           Taro.navigateTo({\n  //             url: '/pages/djk/pages/medicareCard/medicareCard',\n  //           })\n  //         }else if(res.cancel) {\n  //           this.orderOpen();\n  //           this.data.hasUseMedicare = false;\n  //         }\n  //       }\n  //     })\n  //     return false;\n  //   }\n  //选择不使用\n  // if(!this.data.hasUseMedicare) {\n  //   this.orderOpen();\n  //   return;\n  // }\n  // this.setData({\n  //   passWordShow: true\n  // })\n  // },\n  orderOpen: function (e) {\n    //避免重复点击\n    if (new Date().getTime() - this.data.orederOpenClickTime < 3000) {\n      return false;\n    }\n    this.data.orederOpenClickTime = new Date().getTime();\n\n    if (!this.data.userAddress && this.data.yj_switch_val != 1) {\n      Taro.showToast({\n        title: '请添加收货地址',\n        duration: 3000,\n        icon: 'none'\n      })\n      return false;\n    }\n\n    //校验疾病防控信息填写\n    if(this.data.json_data.mustInputAntiepidemicRegister && !this.data.registerInfo.patientIdCard) {\n      Taro.showModal({\n        title: '',\n        content: '请填写疫病防控登记信息',\n        confirmColor: getApp().globalData.mainColor,\n        cancelText: '取消',\n        confirmText: '去填写',\n        success: (res) => {\n          if (res.confirm) this.toRegisterInfo();\n        }\n      })\n      return false;\n    }\n\n    // 判断是否满足营业时间\n    if (!this.data.canSubmitOrder) {\n      Taro.showToast({\n        title: this.data.cannotSubmitOrderMsg,\n        duration: 3000,\n        icon: 'none'\n      })\n      return false;\n    }\n    // 判断是否支持配送\n    if (!this.data.addressStatus && this.data.yj_switch_val != 1) {\n      Taro.showToast({\n        title: this.data.yj_switch_val == 3 ? '当前收货地址不在可购买地区' : '当前地址不在配送范围内',\n        duration: 3000,\n        icon: 'none'\n      })\n      return false;\n    }\n\n    // 判断是否绑定手机号\n    isLogonPhone((callback) => {\n      if (!callback) {\n        //到店自提根据字段判断是否校验处方信息\n        if (!this.data.json_data.validPrescriptionAndPatientGuid) {\n          this.order_submit(e.detail.formId)\n        } else if (this.data.json_data.medicinesIsPrescribe && !this.data.canUsePrescribeId) {\n          this.checkMedicinesPrescribe('orderSubmit', e.detail.formId);\n        } else {\n          this.order_submit(e ? e.detail.formId : '')\n        }\n        //如果是处方药判断用户是否完善信息(2.4.1版本暂时不校验身份和加入会员2月10日)\n        // if (this.data.json_data.medicinesIsPrescribe) {\n        //   that.userChecked(e.detail.formId)\n        // } else {\n        //   that.memberType(e.detail.formId);\n        // }\n      } else {\n        that.setData({\n          LogonPhone: true\n        })\n      }\n    });\n  },\n  // 绑定手机号回调主页面方法\n  loginPhone_fun: function () {\n    this.setData({\n      LogonPhone: false\n    })\n  },\n  //判断是否完善用户信息\n  // userChecked(formId) {\n  //   Taro.showLoading({\n  //     title: '加载中',\n  //   })\n  //   ajax('get', `mimiapp/grouppurchaseuser/selectPatientUserChecked`, {}, (res) => {\n  //     if (res.data.code == 0) {\n  //       let userInfo = res.data.result;\n  //       if (!userInfo.isUserInfo || !userInfo.isBingPhone) {\n  //         Taro.showModal({\n  //           content: '当前药品含有处方药品，请您前往填写身份证信息',\n  //           confirmColor: \"#00B9AD\",\n  //           success: (res) => {\n  //             if (res.confirm) {\n  //               Taro.navigateTo({\n  //                 url: `/pages/note/doctor/userInfo/userInfo?isBingPhone=${userInfo.isBingPhone}`\n  //               })\n  //             }\n  //           }\n  //         })\n  //       } else {\n  //         this.memberType(formId);\n  //       }\n  //     }\n  //     Taro.hideLoading();\n  //   })\n  // },\n  // 下单\n  order_submit: function (formId) {\n    let that = this;\n    Taro.showLoading({ title: '加载中', mask: true })\n    // 24小时验证，以及商品打标\n    this.handle24Hours()\n    // 获取扫码补贴店员id \n    let promoterAccountId = getApp().globalData.promoterAccountId ? getApp().globalData.promoterAccountId : that.data.promoterAccountId\n    // 下单数据整合\n    let data = {\n      \"couponId\": that.data.usedCoupon.defaultOption == 1 ? that.data.usedCoupon.id : 'null',\n      \"drugstoreId\": that.data.drugStore.id,\n      \"productAndNums\": that.data.sp_jsonData,\n      \"pusherUserId\": that.data.pusherUserId,\n      \"formId\": formId,\n      \"addressId\": that.data.userAddress ? that.data.userAddress.id : '',\n      'source': app.globalData.globalSource || '',\n      'pointData': app.globalData.pointData || '',\n      'remark': that.data.bz_text,\n      'palyType': that.data.yj_switch_val,\n      'shakeNumerId': that.data.shakeNumerId,\n      'imageUrl': that.data.uploadPrescriptionData,\n      'patientGuid': that.data.json_data.medicinesIsPrescribe ? that.data.patientObj.id : '',\n      'type': that.data.clickType,\n      'platformType': that.data.isSrcWhyb ? 2 : 1,\n      'showAntiepidemicRegister': this.data.json_data.showAntiepidemicRegister,\n      'mustInputAntiepidemicRegister': this.data.json_data.mustInputAntiepidemicRegister,\n      'promoterAccountId': promoterAccountId\n    }\n\n    //防疫登记信息(id有可能是默认赋值，填写了手机号才能确保防疫信息完善)\n    if(this.data.registerInfo.phone) {\n      data.temperatureDetail = JSON.parse(JSON.stringify(this.data.registerInfo));\n      data.temperatureDetail.userPatientId = data.temperatureDetail.id;\n      delete data.temperatureDetail.id;\n      delete data.temperatureDetail.authStatus;\n      data.temperatureDetail.symptom.forEach(item => {\n        delete item.checked\n      })\n      console.log(data.temperatureDetail)\n    }\n\n    //大健康&是否选择使用&是否支持使用&是否有医保卡\n    if (that.data.isSrcWhyb && this.data.hasUseMedicare && this.data.json_data.hasSupportMedicare && this.data.json_data.medicareCardVo) {\n      data.medicareTransNo = that.data.json_data.medicareSerialNo;\n      data.medicareCardNo = that.data.json_data.medicareCardVo.userCardNo;\n      data.cashAmountDesc = that.data.json_data.cashAmountDesc;\n      data.hasUseMedicare = that.data.hasUseMedicare;\n      data.medicareAmountDesc = that.data.json_data.medicareAmountDesc;\n    }\n\n    if (that.data.json_data.medicinesIsTemperature) {\n      if (!that.data.selectedUserInfo) {\n        Taro.showToast({\n          title: '您购买的商品需要实名登记',\n          duration: 3000,\n          icon: 'none'\n        })\n        return false;\n      }\n      data.orderTemperatures = [that.data.selectedUserInfo];\n    }\n    //到店自提根据字段判断是否校验处方信息\n    if (that.data.json_data.validPrescriptionAndPatientGuid) {\n      //是处方药但未上传处方图片 0是图片处方 1是在线处方\n      if ((that.data.json_data.medicinesIsPrescribe && (data.type == 0 && data.imageUrl.length == 0)) ||\n        (that.data.json_data.medicinesIsPrescribe && (data.type == 1 && !that.data.canUsePrescribeId))) {\n        Taro.hideLoading();\n        Taro.showModal({\n          title: '',\n          content: '订单中含有处方药，请添加购药处方',\n          confirmColor: getApp().globalData.mainColor,\n          cancelText: '我再想想',\n          confirmText: '添加处方',\n          success: (res) => {\n            if (res.confirm) {\n              that.toAddPrescription();\n            }\n          }\n        })\n        return false;\n      }\n    }\n    // 该用户是否携带推广标记\n    ajax2('post', 'mimiapp/grouparea/onLineOrderConfirm', data, res => {\n      Taro.hideLoading();\n      if (res.data.code == 1) {\n        if (res.data.result == 1) {\n          Taro.showModal({\n            title: '',\n            content: ' 购物车中有商品库存不足， 已为您将该商品剔除',\n            showCancel: false,\n            confirmColor: getApp().globalData.mainColor,\n            success: () => {\n              that.getCoupon();\n            }\n          })\n        } else if (res.data.result == 2) {\n          Taro.showModal({\n            title: '',\n            content: '购物车中有商品已下架，已为您将该商品剔除',\n            showCancel: false,\n            confirmColor: getApp().globalData.mainColor,\n            success: () => {\n              that.getCoupon();\n            }\n          })\n        } else if (res.data.result == 3) {\n          that.clearCart();\n          Taro.showModal({\n            title: '',\n            content: '您来晚啦！购物车所选商品 已被抢光',\n            showCancel: false,\n            confirmColor: getApp().globalData.mainColor,\n            success: () => {\n              Taro.switchTab({\n                url: '/pages/noteIndex/noteIndex'\n              })\n            }\n          })\n        } else if (res.data.result == 4) {\n          that.clearCart();\n          Taro.showModal({\n            title: '',\n            content: '商品已下架',\n            showCancel: false,\n            confirmColor: getApp().globalData.mainColor,\n            success: () => {\n              Taro.switchTab({\n                url: '/pages/noteIndex/noteIndex'\n              })\n            }\n          })\n        } else if (res.data.result == 5) {\n          Taro.showToast({\n            title: '药店已被禁用',\n            duration: 3000,\n            icon: 'none',\n          })\n          that.clearCart();\n          setTimeout(function () {\n            Taro.switchTab({\n              url: '/pages/noteIndex/noteIndex'\n            })\n          }, 1000);\n        } else if (res.data.result == 6) {\n          Taro.showModal({\n            title: '',\n            content: '商品超出限购数量',\n            showCancel: false,\n            confirmColor: getApp().globalData.mainColor,\n            confirmText: '我知道了',\n            success: () => {\n              Taro.redirectTo({\n                url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${that.data.drugStore.id}`\n              })\n            }\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            duration: 1000,\n            icon: 'none'\n          })\n          setTimeout(() => {\n            that.getCoupon();\n          }, 1000);\n        }\n        that.data.alert_zt = false;\n      } else if (res.data.code == 0) {\n        that.handleEliminatePromotion();\n        that.data.toWeixinPayType = true;\n        // 在线支付\n        let param = {\n          orderNo: res.data.result.order_number,\n          storesId: that.data.drugStore.id,\n          payChannel: 20//微信支付渠道值\n        }\n        this.setData({\n          orderNo: res.data.result.order_number\n        })\n        // paymentMethod 说明：1:到店付，2:在线付\n        if (that.data.json_data.paymentMethod == 2) {\n          this.orderPay(param);\n        } else {\n          // 更新首页刷新状态\n          getApp().globalData.refreshType = true;\n          that.clearCart();\n          Taro.removeStorageSync('userInfoList')\n          this.toOrderLst();\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          duration: 1000,\n          icon: 'none'\n        })\n      }\n    }, function (res) {\n      console.log(res);\n    });\n  },\n  //医保卡支付\n  medicareCardPay(e) {\n    //判断医保密码是否输入正确\n    let param;\n    if (e.detail.length != 6) return false;\n    param = {\n      orderNo: this.data.orderNo,\n      payChannel: 70,\n      medicareInfo: {\n        medicareCardPassword: e.detail\n      }\n    }\n    // this.toSuccess(this.data.json_data.payAmount);\n    this.orderPay(param);\n  },\n  orderPay(param) {\n    toWeixinPayNew(param, (callback) => {\n      // 更新首页刷新状态\n      getApp().globalData.refreshType = true;\n      this.clearCart();\n      Taro.removeStorageSync('userInfoList');\n      //支付金额为0\n      if (callback == 0) {\n        this.setData({\n          passWordShow: true\n        })\n        return false;\n      }\n      //非医保支付 支付金额大于0 选择使用 可以使用 有医保卡\n      if (param.payChannel != 70 && callback > 0 && this.data.hasUseMedicare && this.data.json_data.hasSupportMedicare && this.data.json_data.medicareCardVo) {\n        Taro.redirectTo({\n          url: `/pages/djk/pages/medicalPay/medicalPay?id=${this.data.orderNo}`\n        })\n        return false;\n      }\n      if (param.payChannel == 70) {\n        this.toSuccess(this.data.json_data.medicareAmountDesc);\n      } else {\n        this.toOrderLst();\n      }\n    }, () => {\n      this.clearCart();\n      setTimeout(() => {\n        Taro.redirectTo({\n          url: `/pages/note/myGroupIndent/myGroupIndent`\n        })\n      }, 1000);\n    })\n  },\n  /**\n   * 支付成功\n   */\n  toSuccess(data) {\n    Taro.redirectTo({\n      url: `/pages/djk/pages/paymentSuccessful/paymentSuccessful?price=${data}`\n    })\n  },\n  toOrderLst() {\n    Taro.redirectTo({\n      url: `/pages/note/myGroupIndent/myGroupIndent`\n    })\n  },\n  clearCart() {\n    let cart = Taro.getStorageSync('cart');\n    delete cart[this.data.drugStore.id];\n    Taro.setStorageSync('cart', cart);\n  },\n  // 验证地址是否支持配送\n  verifyAddress(isType) {\n    if (isType) {\n      this.setData({\n        addressStatus: true\n      })\n    } else {\n      this.setData({\n        addressStatus: false\n      })\n      if (this.data.yj_switch_val != 1) {\n        Taro.showToast({\n          title: this.data.yj_switch_val == 3 ? '当前收货地址不在可购买地区' : '当前地址不在配送范围内',\n          icon: 'none',\n        })\n      }\n    }\n  },\n  //获取商品详情\n  getGoodsDetail: function (e) {\n    //defaultOption字段为，如果是活动不自动选择优惠券（1:自动选择 0:不自动选择）\n    let couponId = this.data.usedCoupon && this.data.usedCoupon.id && this.data.usedCoupon.defaultOption == 1 ? this.data.usedCoupon.id : null;\n    // 商家活动不自动选择优惠券，选择优惠券的时候会带有e，用于判断是手动选择的优惠券\n    if (e == 2) {\n      couponId = this.data.usedCoupon && this.data.usedCoupon.id ? this.data.usedCoupon.id : null;\n    }\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n\n    let that = this;\n    let data = {\n      addressId: that.data.userAddress ? that.data.userAddress.id : '',\n      drugstoreId: that.data.drugStore.id,\n      productAndNums: that.data.sp_jsonData,\n      clientType: \"mini\",\n      palyType: that.data.palyType,\n      shakeNumerId: that.data.shakeNumerId,\n      couponId,\n      platformType: that.data.isSrcWhyb ? 2 : 1, //来源，荷叶健康1 大健康2\n    }\n\n    if (that.data.isSrcWhyb) data.hasUseMedicare = that.data.hasUseMedicare//是否使用医保卡\n\n    ajax2('post', 'mimiapp/grouparea/onLineOrderConfirmDetail', data, (res) => {\n      Taro.hideLoading()\n      if (res == 2) {\n        return false;\n      }\n      if (res.data.code == 0) {\n        let data = res.data.result;\n        if (data.goods) {\n          let sp_data = [];\n          for (var i = 0; i < data.goods.length; i++) {\n            sp_data.push({\n              'productId': data.goods[i].medicinesId,\n              'productNum': data.goods[i].medicinesUtil\n            })\n          }\n          console.log(sp_data)\n          that.data.sp_jsonData = sp_data;\n        }\n        if (res.data.result.onLineStatus == 0 || !that.data.alert_zt) {\n          // 正常流程\n          // 如果有可用优惠券并且优惠券金额0  则刷新可用优惠券初始化逻辑\n          if (that.data.usedCoupon.id && that.data.usedCoupon.defaultOption == 1 && data.couponPrice == 0) {\n            Taro.showModal({\n              title: '',\n              content: '商品价格发生变化，请重新确认订单！',\n              showCancel: false,\n              confirmColor: getApp().globalData.mainColor,\n              success: () => {\n                that.getCoupon();\n              }\n            })\n            return false;\n          }\n          console.log(data, 'data')\n          that.data.registerInfo.phone = that.data.registerInfo.phone ? that.data.registerInfo.phone : data.userAddress && data.userAddress.insensitivityPhone;\n          that.data.registerInfo.address = that.data.registerInfo.address ? that.data.registerInfo.address : data.userAddress && data.userAddress.selectNearyAddress + data.userAddress.address;\n          that.setData({\n            canSubmitOrder: data.canSubmitOrder,\n            cannotSubmitOrderMsg: data.cannotSubmitOrderMsg,\n            addressStatus: data.userAddress ? true : false,\n            yj_switch_val: data.palyType,\n            json_data: data,\n            // hasUseMedicare: data.hasSupportMedicare,\n            isPageShow: true,\n            drugStore: {\n              id: data.drugstoreId,\n              drugstore_name: data.drugstoreName,\n              address: data.drugstoreAdress,\n            },\n            drugstoreSign: data.drugstoreSign,\n            userAddress: data.userAddress,\n            palyType: data.palyType\n          })\n          if (that.data.yj_switch_val == 2) {\n            that.setData({\n              addressStatus: data.canSubmitOrder //canSubmitOrder :能否提交订单，为false时，提单按钮置灰\t\n            })\n            // 如果不在营业时间则提示\n            if (!data.canSubmitOrder) {\n              Taro.showToast({\n                title: data.cannotSubmitOrderMsg,\n                icon: 'none',\n                duration: 3000\n              })\n            } else {//否则验证用户地址是否可配送\n              that.verifyAddress(data.addressStatus);\n            }\n          }\n          //处方药且第一次加载请求，onshow不刷新 或需要防疫登记\n          if ((this.data.json_data.medicinesIsPrescribe && !this.data.patientObj.id) || (this.data.json_data.showAntiepidemicRegister && !this.data.patientObj.id)) {\n            this.getPatientList();\n          }\n        } else {\n          // 异常逻辑处理\n          that.handleExceptionHandling(res.data.result.onLineStatus);\n        }\n      } else {\n        Taro.showModal({\n          title: '',\n          content: res.data.msg,\n          showCancel: false,\n          confirmColor: getApp().globalData.mainColor,\n          success: () => {\n            Taro.switchTab({\n              url: '/pages/noteIndex/noteIndex'\n            })\n          }\n        })\n      }\n\n    })\n  },\n  handleExceptionHandling(code) {\n    let that = this;\n    if (!that.data.alert_zt) return false\n    let codeFun = {\n      1: () => {\n        that.data.alert_zt = false;\n        Taro.showModal({\n          title: '',\n          content: '购物车中有商品库存不足，已为您将该商品剔除',\n          showCancel: false,\n          confirmColor: getApp().globalData.mainColor,\n          success: () => {\n            that.getCoupon();\n            that.data.alert_zt = true;\n          }\n        })\n      },\n      2: () => {\n        that.data.alert_zt = false\n        Taro.showModal({\n          title: '',\n          content: '购物车中有商品已下架，已为您将该商品剔除',\n          showCancel: false,\n          confirmColor: getApp().globalData.mainColor,\n          success: () => {\n            that.getCoupon();\n            that.data.alert_zt = true;\n          }\n        })\n      },\n      3: () => {\n        that.clearCart();\n        Taro.showModal({\n          title: '',\n          content: '您来晚啦！购物车所选商品 已被抢光',\n          showCancel: false,\n          confirmColor: getApp().globalData.mainColor,\n          success: () => {\n            Taro.switchTab({\n              url: '/pages/noteIndex/noteIndex'\n            })\n          }\n        })\n      },\n      4: () => {\n        that.clearCart();\n        Taro.showModal({\n          title: '',\n          content: '商品已下架',\n          showCancel: false,\n          confirmColor: getApp().globalData.mainColor,\n          success: () => {\n            Taro.switchTab({\n              url: '/pages/noteIndex/noteIndex'\n            })\n          }\n        })\n      },\n      5: ()=> {\n        Taro.showModal({\n          title: '',\n          content: '商品超出限购数量',\n          showCancel: false,\n          confirmColor: getApp().globalData.mainColor,\n          confirmText: '我知道了',\n          success: () => {\n            Taro.redirectTo({\n              url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${that.data.drugStore.id}`\n            })\n          }\n        })\n      }\n    }\n    codeFun[code]();\n  },\n  //校验处方药品\n  checkMedicinesPrescribe(type, formId) {\n    //避免重复点击\n    if (type != 'orderSubmit' && (new Date().getTime() - this.data.prescribeClickTime < 2000)) {\n      return false;\n    }\n    this.data.prescribeClickTime = new Date().getTime();\n    //添加处方前先判断是否填写用药人信息\n    if (!this.data.patientObj.id) {\n      Taro.showToast({\n        title: '请填写用药人信息',\n        icon: 'none'\n      })\n      return false;\n    }\n    ajax2('post', 'mimiapp/grouparea/checkMedicinesPrescribe', {\n      patientGuid: this.data.patientObj.id,\n      productAndNums: this.data.sp_jsonData\n    }, (res) => {\n      //判断商品中包含处方药品是否超过5种且是否已有处方单,code=1代表超5种\n      if (res.data.code == 0) {\n        //存在处方单result返回处方ID，不存在返回空字符串\n        if (res.data.result) {\n          this.setData({\n            canUsePrescribeId: res.data.result\n          })\n          Taro.showToast({\n            title: '检测到您有未使用的处方，系统已为您自动添加',\n            icon: 'none'\n          })\n          //入口是点击去下单按钮，存在处方直接吊起下单流程\n          if (type == 'orderSubmit') {\n            this.order_submit(formId)\n          }\n        } else {\n          if (type == 'orderSubmit') { //点击下单按钮触发\n            this.order_submit(formId)\n          } else if (type == 'showChecked') {\n            //onshow触发\n            this.setData({\n              canUsePrescribeId: null\n            })\n          } else {\n            this.toAddPrescription();\n          }\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  toAddPrescription() {\n    this.data.isCheckMedicinesPrescribe = true;\n    //过滤非处方订单\n    let prescriptionData = [];\n    this.data.json_data.goods.forEach(item => {\n      if (item.medicinesIsPrescribe) {\n        prescriptionData.push({\n          'productId': item.medicinesId,\n          'productNum': item.medicinesUtil\n        })\n      }\n    });\n    console.log(prescriptionData)\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/uploadPrescription/uploadPrescription?medicinesList=${JSON.stringify(prescriptionData)}&patientId=${this.data.patientObj.id}&drugStoreId=${this.data.drugStore.id}&type=${this.data.clickType}`\n    })\n  },\n  //查询是否有可用优惠券\n  getCoupon(e) {\n    if (e == 2) {\n      this.getGoodsDetail(2);\n      return false;\n    }\n    let that = this;\n    console.log(that.data.sp_jsonData);\n    ajax2('post', 'couponController/findCouponList', {\n      \"drugstoreId\": that.data.drugStore.id,\n      \"productAndNums\": that.data.sp_jsonData,\n      \"clientType\": 'mini'\n    }, res => {\n      if (res == 2) {\n        return false;\n      }\n      if (res.data.code == 0 && res.data.result && res.data.result.length > 0) {\n        if (res.data.result[0].canUse) {\n          this.setData({\n            usedCoupon: this.data.isSrcWhyb ? [] : res.data.result[0]\n          }, function () {\n            this.getGoodsDetail();\n          })\n        } else {\n          this.setData({\n            usedCoupon: {}\n          }, function () {\n            this.getGoodsDetail();\n          })\n        }\n        if (res.data.result && res.data.result.length > 0) {\n          let usedNumber = 0;\n          res.data.result.map(x => {\n            if (x.canUse) {\n              usedNumber++;\n            }\n          })\n          this.setData({\n            usedNumber: usedNumber\n          })\n        }\n      } else {\n        this.getGoodsDetail();\n      }\n    })\n  },\n  //去选择优惠券\n  toChooseCoupon() {\n    this.data.isCheckMedicinesPrescribe = false\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/chooseCoupon/chooseCoupon?drugstoreId=${this.data.drugStore.id}&productAndNums=${JSON.stringify(this.data.sp_jsonData)}&selectedCouponId=${this.data.usedCoupon.defaultOption == 1 ? this.data.usedCoupon.id : 'null'}`\n    })\n  },\n  //打电话\n  callPhone: function (e) {\n    Taro.makePhoneCall({\n      phoneNumber: e.currentTarget.dataset.phone,\n    })\n  },\n  //导航到药店\n  openMap: function () {\n    var data = this.data.json_data;\n    open_wechatMap(data.latitude, data.longitude, data.drugstoreName, data.drugstoreAdress);\n  },\n  // 没有药店跳首页\n  exFun: function () {\n    Taro.switchTab({\n      url: '/pages/noteIndex/noteIndex'\n    })\n  },\n  getPatientList() {\n    ajax2('POST', 'api/userPatient/selectUserPatientList', {\n      userId: Taro.getStorageSync('userInfo').userId\n    }, (res) => {\n      if (res.data.code == 0) {\n        if (res.data.result) {\n          res.data.result.forEach(item => {\n            if (item.isDefaultSelected == 1) {\n              this.data.patientObj = item;\n            }\n          })\n          //防疫登记和处方用药人为同一人(订单包含处方才设置默认用药人)\n          if(this.data.json_data.medicinesIsPrescribe) this.data.registerInfo.id = this.data.patientObj.id;\n          this.setData({\n            patientObj: this.data.patientObj,\n            registerInfo: this.data.registerInfo\n          })\n          if (this.data.patientObj.id) {\n            this.checkMedicinesPrescribe('showChecked');\n          }\n        }\n      } else {\n        Taro.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  /**\n  * @description: 跳转防控登记\n  * @return: void\n  */\n  toRegisterInfo(){\n    let url;\n    if(this.data.json_data.medicinesIsPrescribe) {\n      url = `/pages/note/register/register?registerInfo=${ JSON.stringify(this.data.registerInfo)}&prescriberId=${ this.data.patientObj.id || '' }`\n    }else {\n      url = `/pages/note/register/register?registerInfo=${ JSON.stringify(this.data.registerInfo)}`\n    }\n    Taro.navigateTo({ url });\n  }\n};"},"convertDir/pages/onlineGoods/prescriptionDetails/prescriptionDetails":{"json":{},"wxml":"\n  <view class=\"prescriptionDetails-auto-container\">  \n    <navBar title-text=\"电子处方\" :showCapsule=\"true\"></navBar>\n    <block v-if=\"jsonData.inquiryPrescription.signType == 20 && jsonData.inquiryPrescription.prescriptionImage\">\n      <image class=\"img\" mode=\"widthFix\" :src=\"jsonData.inquiryPrescription.prescriptionImage\"></image>\n    </block>\n    <block v-if=\"jsonData.inquiryPrescription.signType == 10\">\n      <view class=\"cf-box\"> \n        <image class=\"cf-yz\" mode=\"widthFix\" :src=\"''+cf_chapter+'/images/chapter.png'\"></image>\n        <view class=\"cf-nr\">         \n          <view class=\"cf-title\">海南宜贰叁互联网医院\n          </view>\n          <view class=\"cf-title cf-title-2\">电子处方签\n          </view>\n          <view class=\"cf-time border_solid\"> \n            <view>NO.{{jsonData.inquiryPrescription.pref}}\n            </view>\n            <view>处方日期：{{jsonData.inquiryPrescription.outPrescriptionTime}}\n            </view>\n          </view>\n          <view class=\"cf-info\">  \n            <view>姓名：{{jsonData.inquiryPrescription.patientName}}\n            </view>\n            <view>性别：{{jsonData.inquiryPrescription.patientSex==1?'男':'女'}}\n            </view>\n            <view>年龄：{{jsonData.inquiryPrescription.patientAge}}\n            </view>\n          </view>\n          <view class=\"top_20\">科室：{{jsonData.physicianDeptName}}\n          </view>\n          <view class=\"top_20 border_solid\">诊断：{{jsonData.inquiryPrescription.diagnosis}}\n          </view>\n          <view class=\"cf-rp\">Rp\n          </view>\n          <view class=\"border_solid\">\n            <block v-for=\"(item, key) in jsonData.inquiryPrescriptionDetails\" :key=\"key\"> \n              <view class=\"cf-info\">  \n                <view>{{index+1}}.{{item.productName}}\n                </view>\n                <view>{{item.attributeSpecification}}\n                </view>\n                <view>×{{item.quantity}}\n                </view>\n              </view>\n              <view class=\"top_10\">{{item.directions}} {{item.useFrequency}} 一次{{item.singleDoseValue}}{{item.singleUnit}}\n              </view>\n            </block>\n          </view>\n          <view class=\"cf-info\"> \n            <view class=\"cf-info-qm-nr\">医师: \n              <image class=\"cf-info-qm\" :src=\"'data:image/png;base64,'+jsonData.physicianSign+''\"></image>\n            </view>\n            <view class=\"cf-info-qm-nr\">药师: \n              <image class=\"cf-info-qm\" :src=\"'data:image/png;base64,'+jsonData.pharmacistSign+''\"></image>\n            </view>\n          </view>\n          <view class=\"cf-ps\">注：处方有效期为1天，且只能购买一次，失效后购买需要重新申请\n          </view>\n        </view>\n      </view>\n    </block>\n  </view>","wxss":"/* pages/onlineGoods/prescriptionDetails/prescriptionDetails.wxss */\n\npage {\n  background-color: #f5f5f5;\n  font-size: 24rpx;\n  color: #30303c;\n}\n\n.cf-box {\n  width: 690rpx;\n  background: rgba(255, 255, 255, 1);\n  border-radius: 10rpx;\n  border: 1px solid rgba(231, 234, 236, 1);\n  margin: 0 auto;\n  padding: 40rpx 0 30rpx 0;\n  margin-top: 20rpx;\n  position: relative;\n}\n\n.cf-nr {\n  width: 630rpx;\n  margin: 0 auto;\n}\n\n.cf-title {\n  font-size: 40rpx;\n  color: #30303c;\n  font-weight: 600;\n  text-align: center;\n}\n\n.cf-title-2 {\n  margin-top: 8rpx;\n}\n\n.cf-time {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  font-size: 24rpx;\n  color: #30303c;\n  margin-top: 30rpx;\n}\n\n.cf-info {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  font-size: 24rpx;\n  color: #30303c;\n  margin-top: 20rpx;\n}\n\n.top_20 {\n  margin-top: 20rpx;\n}\n\n.top_10 {\n  margin-top: 10rpx;\n  color: #515163;\n}\n\n.border_solid {\n  border-bottom: 1rpx solid #777785;\n  padding-bottom: 20rpx;\n}\n\n.cf-rp {\n  font-size: 40rpx;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: rgba(48, 48, 60, 1);\n  margin-top: 20rpx;\n}\n\n.cf-ps {\n  font-size: 24rpx;\n  color: #515163;\n  margin-top: 30rpx;\n}\n\n.cf-info-qm {\n  width: 150rpx;\n  height: 50rpx;\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.cf-info-qm-nr {\n  height: 50rpx;\n  line-height: 50rpx;\n}\n\n.cf-yz {\n  width: 250rpx;\n  position: absolute;\n  right: 45rpx;\n  bottom: 110rpx;\n}\n/* 灵芝1.7.0 */\n.img{\n  display: block;\n  width: 690rpx;\n  height: auto;\n  margin: 0 auto;\n  margin-top: 20rpx;\n}\n","js":"// pages/onlineGoods/prescriptionDetails/prescriptionDetails.js\nimport {\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      inquiryId:'',\n      guid: '',\n      jsonData: {},\n      cf_chapter: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    if (options.inquiryId) {\n      this.setData({\n        inquiryId: options.inquiryId\n      })\n    }\n    if (options.guid) {\n      this.setData({\n        guid: options.guid\n      })\n    }\n    this.getQueryPrescriptionInfo();\n  },\n  //时间戳转时间类型\n  timeStampTurnTime(timeStamp) {\n    if (timeStamp > 0) {\n      var date = new Date();\n      date.setTime(timeStamp);\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      m = m < 10 ? ('0' + m) : m;\n      var d = date.getDate();\n      d = d < 10 ? ('0' + d) : d;\n      var h = date.getHours();\n      h = h < 10 ? ('0' + h) : h;\n      var minute = date.getMinutes();\n      var second = date.getSeconds();\n      minute = minute < 10 ? ('0' + minute) : minute;\n      second = second < 10 ? ('0' + second) : second;\n      return y + '-' + m + '-' + d;\n    } else {\n      return \"\";\n    }\n  },\n  getQueryPrescriptionInfo() {\n    Taro.showLoading({\n      title: '加载中'\n    })\n    let _url = '';\n    if (this.data.inquiryId){\n      _url = { inquiryId: this.data.inquiryId}\n    }else{\n      _url = { guid: this.data.guid }\n    }\n    ajax('get', 'miniapp/InquiryIM/queryPrescriptionInfoByGuid',_url, (res) => {\n      console.log(res.data);\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        let data = res.data.result\n        if (data){\n          data.inquiryPrescription.outPrescriptionTime = this.timeStampTurnTime(data.inquiryPrescription.outPrescriptionTime);\n          this.setData({\n            jsonData: data\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          duration: 3000,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function() {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function() {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function() {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function() {\n\n  }\n};\n"},"convertDir/pages/onlineGoods/productList/productList":{"js":"import { ajax } from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      jumpLink: {}\n    };\n  },\n  onShow: function () {\n    this.getJumpLink();\n  },\n  getJumpLink() {\n    ajax('get', 'thirdinterface/activityPage/url', {}, res => {\n      if(res.data.code == 0) {\n        this.setData({\n          jumpLink: res.data.data\n        })\n      }else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"productList-auto-container\">\n    <web-view :src=\" jumpLink \" :style=\"{top: navBarHeight px}\"></web-view>\n  </view>","wxss":""},"convertDir/pages/onlineGoods/productSearch/productSearch":{"js":"import {\n  ajax2,\n  getLocation,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      longitude: 114.304695,\n      latitude: 30.59331,\n      pageNum: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      proList: [], //商品列表\n      isAjaxing: false,\n      address_data: {},\n      couponId: '',\n      couponType: '',\n      applicableStores: '',\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  onLoad: function(options) {\n    // 设置来源\n    if (options.source) {\n      getApp().globalData.globalSource = options.source;\n    }\n    this.data.couponId = options.couponId;\n    this.data.couponType = options.couponType;\n    this.data.applicableStores = options.applicableStores;\n  },\n  onShow: function() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    this.data.pageNum = 1;\n    //获取本地存储经纬度信息\n    const addressData = getApp().address_data;\n    //判断是否有经纬度，没有自动获取\n    if (addressData.latitude) {\n      this.data.address_data = addressData;\n      this.getMedicinesList();\n    } else {\n      getLocation((longitude, latitude) => {\n        this.data.address_data = {\n          longitude: longitude,\n          latitude: latitude\n        };\n        this.getMedicinesList();\n      })\n    }   \n  },\n  /**\n  * 获取商品列表\n  */\n  getMedicinesList() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n  \n    const sendData = this.data.address_data;\n    sendData.pageNum = this.data.pageNum;\n    sendData.pageSize = this.data.pageSize;\n    sendData.couponId = this.data.couponId;\n    sendData.storeId = 0;\n    sendData.couponType = this.data.couponType;\n    sendData.applicableStores = this.data.applicableStores;\n    \n\n    let url = 'product/ykq/mini/v1/lbs/queryProductListByCouponId';\n    // if(sendData.applicableStores == 1 || sendData.applicableStores == 3) url = 'product/ykq/mini/v1/lbs/queryProductListByCouponId'\n    //   else if(sendData.applicableStores == 2) url = 'product/ykq/mini/v1/b2c/queryProductListByCouponId'\n\n    ajax2('get', url, sendData, res => {\n      Taro.hideLoading();\n      this.setData({\n        isAjaxing: true\n      })\n      if (res.data.code == 0) {\n        const resData = res.data.result;\n        this.setData({\n          proList: this.data.pageNum == 1 ? resData.list : [...this.data.proList, ...resData.list],\n          hasNextPage: resData.hasNextPage || false\n        });\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n        })\n      }\n    }, () => {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n  * 点击sku跳转\n  * @param {*} e \n  */\n  jumpUrl(e) {\n    const proItem = e.currentTarget.dataset.item;\n    console.log(proItem.isB2C)\n    //isB2C 0 不是 1 是\n    if(proItem.isB2C == 1) {\n      let goodsId = proItem.medicineId;\n      let drugStoreId = proItem.drugstoreId;\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ goodsId }&drugStoreId=${ drugStoreId }`\n      })\n    }else {\n      this.checkPro(proItem);\n    }\n  },\n  /**\n  * 请求接口，确认商品状态\n  */\n  checkPro(proItem) {\n    const sendData = {\n      drugstoreId: proItem.drugstoreId,\n      medicinesId: proItem.medicineId\n    }\n    Taro.showLoading({\n      mask: true\n    })\n    ajax2('get', 'mimiapp/grouparea/medicinesAddPurchaseConditionChecked', sendData, res => {\n      if (res.data.code == 0) {\n        Taro.hideLoading();\n        if (res.data.result.code == 0) {\n          Taro.navigateTo({\n            url: `/pages/onlineGoods/drugList/drugList?goodsId=${ proItem.medicineId }&drugStoreId=${ proItem.drugstoreId }&areaId=${ proItem.merchandiseClassifyId }&isAddCart=1`\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.result.msg,\n            icon: 'none',\n          })\n        }\n      } else {\n        Taro.hideLoading();\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    }, () => {\n      Taro.hideLoading();\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none'\n      })\n    })\n  },\n  drugStore_list(e) {\n    let item = e.currentTarget.dataset.item;\n    Taro.navigateTo({\n      url: `/pages/onlineGoods/subscribeList/subscribeList?medicinesId=${ item.medicineId }&otherDrugstoreIdList=${ item.otherDrugstoreIdList.toString() }`\n    })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    if (this.data.hasNextPage) {\n      this.data.pageNum = ++this.data.pageNum;\n      this.getMedicinesList();\n    }\n  },\n  select_address() {\n    // 如果没有经纬度跳转到选择地址清空绑定内容\n    if (!this.data.address_data.latitude) {\n      this.setData({\n        address_data: {}\n      })\n    }\n    let data = JSON.stringify(this.data.address_data).replace(/&/, 'ASCII38');\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?address_data=${ data }`\n    })\n  },\n  onShareAppMessage: function(e) {\n    let path;\n    if (this.data.pageType == 'groupArea') {\n      path = `/pages/onlineGoods/productSearch/productSearch?groupAreaId=${this.data.groupAreaId}&title=${this.data.pageTitle}&id=${this.data.id}`\n    } else if (this.data.pageType == 'couponPage') {\n      path = `/pages/onlineGoods/productSearch/productSearch?couponId=${this.data.couponId}`\n    } else {\n      path = \"/pages/onlineGoods/productSearch/productSearch?key=\" + this.data.input_text\n    }\n    console.log(path);\n    path = this.data.isDjk ? `${ path }&src_whyb=${ this.data.isDjk }` : path;\n    let shareObj = {\n      title: '为您推荐' + (this.data.input_text || this.data.pageTitle) + '相关商品',\n      path: `/pages/onlineGoods/productSearch/productSearch?couponId=${ this.data.couponId }`,\n      imageUrl: '',\n    };\n    return shareObj;\n  }\n};\n","json":{"missingData-view":"../../../../component/missingData/missingData","medList":"../../../component/medList/medList"},"wxss":"/* pages/onlineGoods/productSearch/productSearch.wxss */\n\n.index_z {\n  position: relative;\n  z-index: 99999999;\n}\n\npage {\n  background: #f5f5f5;\n  height: 100%;\n}\n\n.flex {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.proList, .drugstore_list {\n  /* background: #fff; */\n  overflow: hidden;\n  border-bottom: 20rpx solid #f5f5f5;\n  padding: 0 20rpx;\n}\n\n.proItem {\n  margin-top: 20rpx;\n  font-size: 26rpx;\n  color: #666;\n  background: white;\n  margin-bottom: 20rpx;\n}\n\n.proItem .itemTop {\n  padding: 25rpx 30rpx;\n}\n\n.proItem .itemTop image {\n  width: 160rpx;\n  height: 160rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: 500rpx;\n  display: flex;\n  flex-flow: column;\n  justify-content: space-between;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-size: 28rpx;\n  color: rgba(41, 38, 38, 1);\n  line-height: 34rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.itemBottom {\n  height: 90rpx;\n  line-height: 90rpx;\n  padding: 0 30rpx;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n  position: relative;\n}\n\n.storeName {\n  max-width: 480rpx;\n  font-size: 24rpx;\n  color: rgba(153, 153, 153, 1);\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  margin-right: 10rpx;\n  -webkit-box-orient: vertical;\n  position: relative;\n  padding-right: 10rpx;\n}\n\n.storeName::after {\n  content: '';\n  display: block;\n  width: 1rpx;\n  height: 20rpx;\n  position: absolute;\n  top: 9rpx;\n  right: 1rpx;\n  background-color: rgba(238, 238, 238, 1);\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  /* background: #f7f7f7; */\n}\n\n.flex2 {\n  display: flex;\n  margin-top: 20rpx;\n}\n\n.storeKm {\n  font-size: 26rpx;\n  color: rgba(153, 153, 153, 1);\n}\n\n.itemBottom .dr {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  padding-left: 192rpx;\n}\n\n.itemBottom_img {\n  width: 24rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 20rpx;\n  top: 34rpx;\n}\n.active_tag {\n  display: flex;\n  flex-wrap: wrap;\n}\n.active_tag .tag{\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 4rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  color: #FF2121;\n  margin: 10rpx 10rpx 0 0;\n}","wxml":"\n  <view class=\"productSearch-auto-container\">  \n    <view class=\"index_z\">\n      <navBar title-text=\"荷叶健康\" :showCapsule=\" true \"></navBar>\n    </view>\n    <view class=\"proList sp_list\" v-if=\" proList.length > 0 \"> \n      <view class=\"proItem\" v-for=\"(item, index) in  proList \" :key=\"index\"> \n        <view class=\"itemTop flex\" :data-item=\" item \" :data-index=\" index \" bindtap=\"jumpUrl\"> \n          <image :src=\" item.medicineMainImage \"></image>\n          <view class=\"itemInfo\">    \n            <view class=\"title\">{{ item.medicineName }} {{ item.medicineCommonName }}\n            </view>\n            <view class=\"title title2\">{{ item.medicineSpecifications }}\n            </view>\n            <view class=\"active_tag\">\n              <view class=\"tag\" v-for=\"(nameItem, key) in  item.activityLabel \" :key=\"key\">{{ nameItem }}\n              </view>\n            </view>\n            <view class=\"flex\">\n              <view class=\"money\">\n            ¥{{ item.activityInfo ? item.activityInfo.actPrice : item.medicinesPrice }}\n            \n                <text v-if=\" item.isShowLineationPrice == 0 ? false : true \">¥{{ item.discountPrice }}\n                </text>\n              </view>\n            </view>\n            <view class=\"flex2\"> \n              <view class=\"storeName\">{{ item.drugstoreName }}\n              </view>\n              <view class=\"storeKm\" :data-info=\" item \" v-if=\" item.isB2C != 1 \">{{ item.drugstoreDistanceDesc }}\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"itemBottom flex\" :data-item=\" item \" bindtap=\"drugStore_list\" v-if=\" item.otherDrugstoreNum > 0 \"> \n          <view class=\"dr\">还有{{ item.otherDrugstoreNum }}家药店在售\n          </view>\n          <image class=\"itemBottom_img\" src=\"../../../images/icon-arrow.png\"></image>\n        </view>\n      </view>\n      <view class=\"tip\">{{ hasNextPage ? '加载中...' : '已加载全部内容' }}\n      </view>\n    </view>\n    <block v-else-if=\" proList.length == 0 && isAjaxing \">\n      <view style=\"background-color:#fff;height: 100vh;\">\n        <missingData-view zhi=\"new1\" textval=\"抱歉，没有找到您想要的搜索结果\" buttonText=\"切换城市\" bind:action=\"select_address\" :imageUrl=\" url_link + 'images/empty-log.png' \"></missingData-view>\n      </view>\n    </block>\n  </view>"},"convertDir/pages/onlineGoods/remarks/remarks":{"js":"export default {\n\n  data: function() {\n    return {\n      value:'',\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (options.text){\n      this.setData({\n        value: decodeURIComponent(options.text)\n      })\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n  },\n  go_back(){\n    if (this.data.value.match(/^\\s*$/)) {\n      Taro.showToast({\n        title: '请输入正确内容',\n        icon: 'none',\n      })\n      return false;\n    }\n    let pages = getCurrentPages();\n    let prevPage = pages[pages.length - 2]; //上一个页面\n    prevPage.setData({\n      bz_text: this.data.value\n    })\n    Taro.navigateBack({\n      delta: 1\n    })\n  },\n  get_input(e){\n    console.log(e.detail.value)\n    let data = e.detail.value;\n    this.setData({\n      value: data,\n    })\n  },\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n};","wxml":"\n  <view class=\"remarks-auto-container\">  \n    <navBar title-text=\"添加备注\"></navBar>\n    <textarea bindinput=\"get_input\" auto-focus :value=\"value\" maxlength=\"50\" class=\"bz-texttarea\">    <text class=\"length-text\">{{value.length}}/50</text>\n  \n    </textarea>\n    <button :class=\"[bz-btn,( isSrc_whyb ? 'djk-view' : '' )]\" bindtap=\"go_back\">完成\n    </button>\n  </view>","json":{},"wxss":"/* pages/onlineGoods/remarks/remarks.wxss */\n.bz-texttarea{\n  width: calc(100% - 40rpx);\n  display: block;\n  height: 429rpx;\n  background-color: rgba(255,255,255,1);\n  padding: 20rpx;\n  position: relative;\n}\n.bz-btn{\n  display: block;\n  width: 702rpx;\n  height: 100rpx;\n  background: #00b955;\n  border-radius: 360rpx;\n  color:#fff;\n  text-align: center;\n  line-height: 100rpx;\n  margin-top: 40rpx;\n  font-size: 36rpx;\n}\n.length-text{\n  position: absolute;\n  bottom: 20rpx;\n  right: 24rpx;\n}"},"convertDir/pages/onlineGoods/search/search":{"json":{"shopCart":"../../../component/shopCart/shopCart","missingData-view":"../../../component/missingData/missingData"},"js":"// pages/group/groupLoading/search/search.js\nimport {\n  ajax2,\n  ajax\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      input_text: null, //输入框内容\n      searchLog: '', //搜索历史记录\n      historyShow: true,//历史记录默认显示\n      drugStoreId: '',\n      searchEmpty: false,\n      isSearch: 0,\n      coupon: {},\n      pageTitle: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    console.log(options)\n    this.data.pageTitle = options.drugStoreName && options.drugStoreName.length > 7 ? `${options.drugStoreName.substr(0, 7)}...` : options.drugStoreName\n    this.setData({\n      drugStoreId: options.drugStoreId || '',\n      coupon: options.coupon ? JSON.parse(options.coupon) : '',//优惠券展示商品聚合页面\n      pageTitle: this.data.pageTitle || '荷叶健康'\n    });\n    if(this.data.coupon) {\n      this.setData({\n        isSearch: 1\n      })\n    }\n    this.getSearchLog();\n  },\n  onShow(){\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false\n    })\n    // this.selectComponent('#OnlineGoods').getOnlineGoods();\n  },  \n  getSearchLog(){\n    ajax2('post', 'miniapp/searchOnlineGoodsLog/getUserSearchLog', {}, res => {\n      this.setData({\n        searchLog: res.data.result\n      });\n    }, function () {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  clear_btn: function(e) {\n    let that = this;\n    Taro.showModal({\n      title: '',\n      content: '确认清空历史搜索记录?',\n      confirmColor: getApp().globalData.mainColor,\n      success(res) {\n        if (res.confirm) {\n          Taro.showToast({\n            title: '已清空',\n            image: '/images/successIcon.png',\n            mask: true,\n            duration: 2000\n          })\n          that.setData({\n            searchLog: ''\n          });\n          let token;\n          Taro.getStorage({\n            key: 'sess_key',\n            success: function(res) {\n              token = res.data;\n              console.log(token);\n              ajax2('delete', `miniapp/searchOnlineGoodsLog/deleteAllSearchLogByUserId/${token}`, {}, function(res) {\n                console.log(res);\n              }, function(res) {\n                console.log(res);\n              })\n            }\n          })\n        } else if (res.cancel) { \n          console.log('用户点击取消')\n        }\n      }\n    })\n  },\n  search_clear_btn:function(){\n    this.getSearchLog();\n    this.setData({\n      input_text:'',\n      historyShow: true\n    });\n    this.selectComponent('#OnlineGoods').clearGoodsList();\n  },\n  search_input: function(e) {\n    console.log(\"搜索页面点击了\")\n    this.setData({\n      input_text: (e.detail.value).replace(/^ +| +$/g, '')\n    })\n  },\n  search_btn: function(e) {\n    if (e.currentTarget.dataset.title){\n      this.data.input_text = e.currentTarget.dataset.title\n    }\n    this.setData({\n      input_text: this.data.input_text,\n      historyShow: false\n    });\n    this.selectComponent('#OnlineGoods').getOnlineGoods();\n  },\n  onReachBottom: function () {\n    this.selectComponent('#OnlineGoods').scrollBottom();\n  }\n};","wxml":"\n  <view class=\"search-auto-container\"> \n    <navBar :title-text=\" pageTitle \"></navBar>\n    <view :class=\"[(isDjk?'djk':'')]\">  \n      <block v-if=\" coupon \"> \n        <view class=\"tips\" v-if=\"coupon.couponDiscountWay == 3\">以下商品可使用下单立减{{ coupon.couponCash }}的优惠券\n        </view>\n        <view class=\"tips\" v-else>以下商品可使用满{{ coupon.couponUseLimit }}减{{ coupon.couponCash }}的优惠券\n        </view>\n      </block>\n      <block v-else> \n        <view class=\"search_contion\">  \n          <view class=\"search_hearder\">   \n            <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n            <image class=\"search_clear\" bindtap=\"search_clear_btn\" mode=\"widthFix\" src=\"../../../images/search_clear.png\"></image>\n            <view class=\"search_kuai\" bindtap=\"search_clear_btn\"></view>\n            <input class=\"search_input\" :value=\"input_text\" bindinput=\"search_input\" placeholder=\"搜索商品名称\" auto-focus bindconfirm=\"search_btn\"></input>\n          </view>\n          <text class=\"search_btn\" bindtap=\"search_btn\" v-if=\"input_text\">搜索\n          </text>\n          <text class=\"search_btn gray\" v-else>搜索\n          </text>\n        </view>\n        <view class=\"searchHistory\" v-if=\"historyShow && searchLog.length > 0\"> \n          <view class=\"searchHistory_text\">\n\t\t\t\t历史搜索\n\t\t\t\t\n            <image bindtap=\"clear_btn\" class=\"search_clear you\" mode=\"widthFix\" src=\"../../../images/clear_ss.png\"></image>\n          </view>\n          <view class=\"searchHistory_nr\">\n            <block v-for=\"(item, index) in searchLog\">\n              <view class=\"searchHistory_list\" bindtap=\"search_btn\" :data-title=\"item.searchTitle\">{{item.searchTitle}}\n              </view>\n            </block>\n          </view>\n        </view>\n      </block>\n      <view>\n        <shopCart :goods-name=\"input_text\" id=\"OnlineGoods\" :drugStore-id=\"drugStoreId\" :coupon-id=\"coupon.couponId\" :is-search=\"isSearch\"></shopCart>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/group/groupLoading/search/search.wxss */\npage{\n  background-color: #fff;\n}\n.tips {\n  background: #FDFCEC;\n  font-size: 28rpx;\n  color: #F86E21;\n  text-align: center;\n  padding: 22rpx 0;\n}\n.search_contion{\n  padding: 20rpx;\n  background-color: #fff;\n  position: relative;\n  border-bottom: 1px solid rgba(244,244,244,1);\n}\n.search_hearder{\n   width: 640rpx;\n  height: 60rpx;\n  position: relative\n}\n.search_input{\n  width: 580rpx;\n  height: 60rpx;\n  font-size: 26rpx;\n  border-radius: 36rpx;\n  background-color: #F4F4F4;\n  padding-left: 60rpx;\n}\n.search_icon{\n  width: 28rpx;\n  height: 28rpx;\n  position: absolute;\n  top: 0;\n  left: 8rpx;\n  padding: 16rpx;\n}\n.search_clear{\n  top: 12rpx;\n  width: 36rpx;\n  height: 36rpx;\n  position: absolute;\n  right: 20rpx;\n  z-index: 2;\n}\n.search_btn{\n  color: #00b955;\n  font-size: 28rpx;\n  position: absolute;\n  top: 32rpx;\n  right: 25rpx;\n}\n.search_btn.gray {\n  color: #CCCCCC;\n}\n.searchHistory{\n  width: 100%;\n  background-color: #fff;\n  overflow: hidden;\n}\n.searchHistory_text{\n  font-size: 28rpx;\n  color: #8A8080;\n  padding-left: 20rpx;\n  padding-top: 20rpx;\n  margin-bottom: 26rpx;\n  position: relative;\n}\n.searchHistory_list{\n  padding: 0 20rpx 0 20rpx;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow:ellipsis;\n  white-space: nowrap;\n  box-sizing: border-box;\n  height: 60rpx;\n  background-color: #F4F4F4;\n  border-radius: 30rpx;\n  line-height: 60rpx;\n  font-size: 24rpx;\n  text-align: center;\n  float: left;\n  margin-right: 20rpx;\n  margin-bottom: 20rpx;\n}\n.searchHistory_nr{\n  width:calc(100% - 40rpx);\n  margin: 0 auto;\n  overflow: hidden;\n}\n.you{\n  top: 0;\n  width: 29rpx;\n  height: 32rpx;\n  padding: 20rpx;\n}\n.search_kuai{\n  top: 0;\n  right: 0;\n  position: absolute;\n  width: 80rpx;\n  height: 100%;\n  z-index: 9;\n}"},"convertDir/pages/onlineGoods/searchDiseaseName/searchDiseaseName":{"js":"import {\n  ajax2,\n  ajax\n} from \"../../../utils/util\";\nconst SELECTED_KEY= 'selected_disgnosis_name'\n\nexport default {\n  data: function() {\n    return {\n      searchKey: null, //输入框内容\n      selectedName: [],\n      selectedId: [],\n      commonDisgnosis: [],\n      searchResult: [],//搜索名称列表\n      searchBoxShow: false,\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    };\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (Taro.getStorageSync(SELECTED_KEY)) {\n      this.data.selectedName = Taro.getStorageSync(SELECTED_KEY).selectedName;\n      this.data.selectedId = Taro.getStorageSync(SELECTED_KEY).selectedId;\n      this.setData({\n        selectedName: this.data.selectedName\n      })\n    }\n    this.getCommonDisgnosis();\n  },\n  onShow(){\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n  },\n  clearSearchKey () {\n    this.setData({\n      searchKey: '',\n      searchBoxShow: false\n    })\n  },\n  getSearchKey (e) {\n    if (!e.detail.value) {\n      this.data.searchBoxShow = false;\n    }\n    this.setData({\n      searchKey: (e.detail.value).replace(/^ +| +$/g, ''),//过滤空格\n      searchBoxShow: this.data.searchBoxShow\n    })\n    \n  },\n  //获取常用诊断列表\n  getCommonDisgnosis() {\n    Taro.showLoading({\n      title: '加载中'\n    })\n    ajax('post', 'api/chat/inquiry/diagnosticsHot', {}, (res) => {\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        this.setData({\n          commonDisgnosis: res.data.result || []\n        })\n        this.updateCommonDisgnosis();\n      }\n    })\n  },\n  //选择诊断名称\n  getDisgnosisName(e) {\n    let value = e.currentTarget.dataset.item;\n    let type = e.currentTarget.dataset.type;\n    let selectedId = this.data.selectedId;\n    let selectedName = this.data.selectedName;\n    let currentName = type == 'search' ? value.diagnosticName.join('') : value.diagnosticName;\n    \n    if (selectedName.join('').length + currentName.length > 50) {\n      Taro.showToast({\n        title: '诊断字数超限',\n        icon: 'none'\n      })\n      return false\n    }\n    if (selectedName.length >= 5) {\n      Taro.showToast({\n        title: '常用诊断不能超过5个',\n        icon: 'none'\n      })\n      return false\n    }\n\n    if (selectedId.indexOf(value.diagnosticCooe) === -1) {\n      selectedId.push(value.diagnosticCooe)\n      selectedName.push(value.diagnosticName)\n    }else {\n      //搜索入口点击的不去除选中的\n      if(type !== 'search'){\n        let index = selectedId.indexOf(value.diagnosticCooe);\n        selectedId.splice(index, 1);\n        selectedName.splice(index, 1)\n      }\n    }\n\n    this.updateCommonDisgnosis();\n\n    this.setData({\n      searchBoxShow: false,\n      selectedName: selectedName\n    })\n  },\n  //搜索诊断名称\n  searchDisgnosis() {\n    ajax('post', 'api/chat/inquiry/diagnostics', {\n      diagnosticName: this.data.searchKey,\n      pageNum: 1,\n      pageSize: 1000\n    }, (res) => {\n      if (res.data.code == 0) {\n        let list = res.data.result.list;\n        let result = list.map(item => {\n          item.diagnosticName = this.getInfo(item.diagnosticName, this.data.searchKey)\n          return item;\n        })\n        this.setData({\n          searchResult: result,\n          searchBoxShow: true\n        })\n      }\n    })\n  },\n  //拆分获取高亮字段\n  getInfo(text, key) {\n    return text.replace(new RegExp(`${key}`, 'g'), `%%${key}%%`).split('%%');\n  },\n  updateCommonDisgnosis() {\n    let commonDisgnosis = this.data.commonDisgnosis;\n    let selectedIndex = [];\n    //先将选中状态全部改成false，再取出选中index,改变常用诊断列表的选中状态\n    commonDisgnosis.forEach((commonitem, index) => {\n      commonDisgnosis[index].checked = false;\n      this.data.selectedId.forEach(selecteItem => {\n        if (selecteItem == commonitem.diagnosticCooe) {\n          selectedIndex.push(index)\n        }\n      })\n    })\n    selectedIndex.forEach((item) => commonDisgnosis[item].checked = true);\n    this.setData({\n      commonDisgnosis: commonDisgnosis\n    })\n  },\n  deleteName(e) {\n    let index = e.currentTarget.dataset.index;\n    this.data.selectedId.splice(index, 1);\n    this.data.selectedName.splice(index, 1);\n    this.updateCommonDisgnosis();\n    this.setData({\n      selectedName: this.data.selectedName\n    })\n  },\n  checkedNmae() {\n    let data = {\n      selectedName: this.data.selectedName,\n      selectedId: this.data.selectedId\n    }\n    Taro.setStorageSync(SELECTED_KEY, data);\n\n    var pages = getCurrentPages();\n    var prevPage = pages[pages.length - 2];\n\n    prevPage && prevPage.setData({\n      selectedDiagnosisIdList: this.data.selectedId\n    })\n\n    Taro.navigateBack({\n      delta: 1\n    })\n  }\n};","json":{},"wxml":"\n  <view class=\"searchDiseaseName-auto-container\"> \n    <navBar title-text=\"确诊疾病\"></navBar>\n    <view :class=\"[search_contion,( isSrc_whyb ? 'djk-view' : '' )]\">     \n      <view class=\"search_hearder\">  \n        <view class=\"search_box\">  \n          <image class=\"search_icon\" mode=\"widthFix\" src=\"../../../images/search-icon-black.png\"></image>\n          <input class=\"search_input\" :value=\"searchKey\" bindinput=\"getSearchKey\" placeholder=\"请输入诊断\" bindconfirm=\"searchDisgnosis\"></input>\n          <view class=\"clear_btn\" bindtap=\"clearSearchKey\">\n            <image mode=\"widthFix\" src=\"../../../images/search_clear.png\"></image>\n          </view>\n        </view>\n        <text class=\"search_btn active\" bindtap=\"searchDisgnosis\" v-if=\" searchKey \">搜索\n        </text>\n        <text class=\"search_btn\" v-else>搜索\n        </text>\n      </view>\n      <block v-if=\" selectedName.length > 0 \"> \n        <view class=\"title\">已选择\n        </view>\n        <view class=\"tag_list\">\n          <text class=\"name close\" v-for=\"(item, key) in  selectedName \" :key=\"key\" bindtap=\"deleteName\" :data-index=\"index\">{{ item }}\n          </text>\n        </view>\n      </block>\n      <view class=\"title\" v-if=\" commonDisgnosis.length > 0 \">常用诊断\n      </view>\n      <view class=\"tag_list bottom-padding\">\n        <view :class=\"[name,( item.checked ? 'active' : '' )]\" v-for=\"(item, key) in  commonDisgnosis \" :key=\"key\" bindtap=\"getDisgnosisName\" :data-item=\"item\">{{ item.diagnosticName }}\n    \n        </view>\n      </view>\n      <view class=\"search_result\" v-if=\" searchBoxShow \"> \n        <block v-if=\" searchResult.length > 0 \">\n          <view class=\"cell\" v-for=\"(item, key) in  searchResult \" :key=\"key\" bindtap=\"getDisgnosisName\" :data-item=\"item\" data-type=\"search\">\n            <text :class=\"[(text == searchKey? 'theme-text' : '')]\" v-for=\"(text, key) in  item.diagnosticName \" :key=\"key\">{{ text }}\n            </text>\n          </view>\n        </block>\n        <block v-else>\n          <view class=\"empty\">未搜索到诊断\n          </view>\n        </block>\n      </view>\n      <view class=\"common_footer\">\n        <button class=\"active\" bindtap=\"checkedNmae\">完成\n        </button>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/note//searchDiseaseName/searchDiseaseName.wxss */\n@import '/common/tableView.wxss';\npage{\n  background-color: #fff;\n}\n.search_contion{\n  padding: 20rpx;\n  position: relative;\n}\n.search_hearder{\n  display: flex;\n  align-items: center;\n  height: 68rpx;\n  position: relative\n}\n.search_box {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  border-radius: 36rpx;\n  background-color: #F5F5F5;\n}\n.search_box .search_input{\n  flex: 1;\n  height: 68rpx;\n  font-size: 25rpx;\n  padding-left: 15rpx;\n}\n.search_box .search_icon{\n  width: 28rpx;\n  height: 28rpx;\n  margin-left: 15rpx;\n}\n.search_box .clear_btn{\n  width: 68rpx;\n  height: 68rpx;\n  text-align: center;\n}\n.search_box .clear_btn image {\n  width: 36rpx;\n  height: 36rpx;\n  margin-top: 16rpx;\n}\n.search_btn{\n  width: 80rpx;\n  color: #CCCCCC;\n  font-size: 30rpx;\n  text-align: right;\n}\n.search_btn.active {\n  color: #00b955;\n}\n\n.title {\n  font-size: 32rpx;\n  font-weight: bold;\n  margin: 50rpx 0 20rpx;\n}\n.tag_list {\n  display: flex;\n  flex-wrap: wrap\n}\n.bottom-padding {\n  padding-bottom: 120rpx;\n}\n.tag_list .name {\n  padding: 13rpx 30rpx;\n  background: #F8F8F8;\n  border-radius: 32rpx;\n  margin: 0 20rpx 20rpx 0;\n  font-size: 28rpx;\n}\n.tag_list .close {\n  padding-right: 70rpx;\n  position: relative;\n}\n.tag_list .close::before {\n  content: '+';\n  position: absolute;\n  top: 3rpx;\n  right: 30rpx;\n  font-size: 40rpx;\n  transform: rotate(45deg)\n}\n.tag_list .name checkbox {\n  display: none;\n}\n.tag_list .name.active {\n  background: #e8fff3;\n  color: #00b955;\n}\n\n.search_result {\n  background: #FFFFFF;\n  position: absolute;\n  top: 100rpx;\n  left: 0;\n  z-index: 101;\n  width: 100%;\n  height: calc(100vh - 100rpx);\n  padding: 0 24rpx;\n  box-sizing: border-box;\n}\n.search_result .cell {\n  background: #FFFFFF;\n  padding: 20rpx 0;\n  font-size: 28rpx;\n  border-bottom: 1rpx solid #EEEEEE;\n}\n.search_result .empty {\n  text-align: center;\n  margin-top: 50%;\n  color: #999999;\n}\n\n.common_footer {\n  background: #FFFFFF;\n}"},"convertDir/pages/onlineGoods/subscribeList/subscribeList":{"json":{"missingData-view":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"subscribeList-auto-container\"> \n    <view class=\"index_z\">\n      <navBar :title-text=\"pageTitle\" :showCapsule=\"showCapsule\"></navBar>\n    </view>\n    <view :class=\"[(isDjk?'djk':'')]\">  \n      <view style=\"background-color:#fff;height: 100vh;\" v-if=\" !sess_key \">\n        <missingData-view zhi=\"new1\" textval=\"登录后查看\" :imageUrl=\" cdnLink + 'images/empty-log.png' \" buttonText=\"立即登录\" bind:action=\"toLogin\"></missingData-view>\n      </view>\n      <view class=\"container\" v-else-if=\" proList.length > 0 \">   \n        <view :class=\"[suspension,(scrollType?'fixd':'')]\" :style=\"{top:navBarHeightpx}\"> \n          <view v-if=\"specialAreaData.bannerImage && showSortTab\" class=\"suspension-banner\">\n            <image :data-url=\"specialAreaData.bannerUrl\" bindtap=\"open_banner\" class=\"suspension-img\" :src=\"specialAreaData.bannerImage\"></image>\n          </view>\n          <view class=\"sort_box\" v-if=\"showSortTab\"> \n            <view :class=\"[sort_item,(activeType=='default'?'active':'')]\" data-type=\"default\" bindtap=\"sortTab\">综合\n            </view>\n            <view :class=\"[sort_item,(activeType=='asc' || activeType=='desc'?'active':'')]\" data-type=\"sort\" bindtap=\"sortTab\">   \n              <text>价格\n              </text>\n              <image v-if=\"activeType=='default'\" class=\"sort_img\" src=\"../../../pages/onlineGoods/images/order_unclick.png\"></image>\n              <image v-else-if=\"activeType=='asc'\" class=\"sort_img\" src=\"../../../pages/onlineGoods/images/djk_top.png\"></image>\n              <image v-else-if=\"activeType=='desc'\" class=\"sort_img\" src=\"../../../pages/onlineGoods/images/djk_bottom.png\"></image>\n            </view>\n          </view>\n        </view>\n        <view v-if=\"scrollType\"> \n          <view v-if=\"proList.length != 0\" style=\"height:90rpx\"></view>\n          <view v-if=\"specialAreaData.bannerImage && showSortTab\" style=\"height:270rpx;\"></view>\n        </view>\n        <view class=\"proList flex\" v-for=\"(item, index) in proList\" :key=\"index\"> \n          <view class=\"store_img\">\n            <image :src=\"item.doorheadPhoto?item.doorheadPhoto: cdnLink + '/images/drugstore-mr-new.jpg'\"></image>\n          </view>\n          <view class=\"proItem\"> \n            <view class=\"header flex\"> \n              <view class=\"storeName\"> \n                <view class=\"name\">{{ item.drugstoreName }}\n                </view>\n                <view class=\"tag\" v-for=\"(tagName, index) in  item.title \" :key=\"index\">{{ tagName }}\n                </view>\n              </view>\n              <text class=\"st noreKm\" :data-info=\"item\">{{item.drugstoreDistanceDesc}}\n              </text>\n            </view>\n            <view class=\"itemTop flex\" :data-item=\"item\" bindtap=\"toCheckPro\"> \n              <image :src=\"item.medicineMainImage\"></image>\n              <view class=\"itemInfo\"> \n                <view class=\"title\">{{item.medicineName}} {{item.medicineCommonName}}\n                  <text v-if=\"item.limitPurchaseAct\">限{{item.limitPurchaseAct.limitNum}}件\n                  </text>\n                </view>\n                <view class=\"flex flex_end\"> \n                  <view class=\"money\"> \n                    <view class=\"title title2\">{{item.medicineSpecifications}}\n                    </view>\n                    <view>\n\t\t\t\t\t\t\t\t\t¥{{ item.activityInfo ? item.activityInfo.actPrice : item.medicinesPrice }}\n\t\t\t\t\t\t\t\t\t\n                      <text v-if=\"item.isShowLineationPrice==0?false:true\">¥{{item.discountPrice}}\n                      </text>\n                    </view>\n                  </view>\n                  <view class=\"buyBtn\" :data-item=\"item\" data-cart=\"1\" data-type=\"toOrder\" catchtap=\"toCheckPro\" v-if=\" item.isB2C != 1 \">加入需求清单\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"tip\">{{ hasNextPage ? '加载中...' : '已加载全部内容' }}\n        </view>\n      </view>\n      <view style=\"background-color:#fff;height: 100vh;\" v-else-if=\" proList.length == 0 && isAjaxing \">\n        <missingData-view zhi=\"new1\" textval=\"当前城市未找到符合条件的商品\" :imageUrl=\" cdnLink + 'images/empty-log.png' \" buttonText=\"切换城市\" bind:action=\"select_address\"></missingData-view>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/onlineGoods//subscribeList/subscribeList.wxss */\n.index_z{\n  position: relative;\n  z-index: 99999999;\n}\npage {\n  background: #f5f5f5;\n}\n.container {\n  padding-bottom: 20rpx;\n}\n.suspension-banner{\n  padding: 20rpx;\n  border-bottom: 1rpx solid #eee;\n}\n.flex {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n\n.sort_box {\n  height: 90rpx;\n  display: flex;\n  background: #fff;\n  width: 100%;\n  /* border-top: 1px solid #eee; */\n}\n\n.suspension {\n  width: 100%;\n  z-index: 99999;\n  background-color: #fff;\n}\n\n.fixd {\n  position: fixed;\n  left:0;\n}\n\n.suspension-img {\n  width: 100%;\n  display: block;\n  height: 230rpx;\n  margin: 0 auto;\n}\n\n.sort_box .sort_item {\n  width: 50%;\n  font-size: 30rpx;\n  color: #8a8080;\n  text-align: center;\n  line-height: 90rpx;\n  position: relative;\n}\n\n.sort_img {\n  width: 16rpx;\n  height: 24rpx;\n  margin-left: 10rpx;\n}\n\n.sort_box .sort_item.active {\n  font-size: 34rpx;\n  color: #292626;\n  font-weight: 500;\n}\n\n.sort_box .sort_item.active:after {\n  width: 14%;\n  height: 4px;\n  background: #00b955;\n  content: \"\";\n  left: 43%;\n  border-radius: 4rpx;\n  bottom: 0px;\n  position: absolute;\n}\n\n.proList {\n  background: #FFFFFF;\n  overflow: hidden;\n  border-top: 20rpx solid #f5f5f5;\n  padding: 0 24rpx;\n}\n.proList .store_img {\n  width: 80rpx;\n  height: 80rpx;\n  border: 1rpx solid #EEEEEE;\n  border-radius: 8rpx;\n  overflow: hidden;\n  margin: 24rpx 18rpx 0 0;\n}\n.proList .store_img image {\n  width: 100%;\n  height: 100%;\n}\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  background: white;\n  flex: 1;\n}\n.proItem .flex {\n  padding: 20rpx 0;\n}\n.proItem .header .storeName {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #292626;\n}\n.proItem .header .storeName .name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n.proItem .header .storeName .tag {\n  display: inline;\n  padding: 2rpx 5rpx;\n  font-size: 20rpx;\n  color: #666666;\n  border-radius: 4rpx;\n  border: 1rpx solid #E1E1E1;\n  margin-right: 20rpx;\n}\n.proItem .header .storeKm {\n  font-size: 26rpx;\n  color: #999999;\n}\n.proItem .itemTop {\n  border-top: 1rpx solid #EEEEEE;\n}\n\n.proItem .itemTop image {\n  width: 130rpx;\n  height: 130rpx;\n  margin-right: 20rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  flex: 1;\n  display: flex;\n  flex-flow: column;\n  justify-content: space-between;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-size: 28rpx;\n  color: rgba(41, 38, 38, 1);\n  line-height: 40rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title text {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-bottom: 14rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n.proItem .itemTop .flex_end {\n  align-items: flex-end;\n  padding: 0;\n}\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 8rpx;\n  flex: 1;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  padding: 0 10rpx;\n  height: 60rpx;\n  border-radius: 30rpx;\n  border: 1px solid #00b955;\n  font-size: 30rpx;\n  color: #00b955;\n  text-align: center;\n  line-height: 60rpx;\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  /* background: #f7f7f7; */\n}\n","js":"// pages/onlineGoods//subscribeList/subscribeList.js\nconst app = getApp();\nimport {\n  ajax2,\n  getLocation,\n  cdnStaticResourceUrl\n} from \"../../../utils/util\";\n\nexport default {\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      specialAreaData: {},\n      showSortTab: true, //显示分类tab\n      longitude: 114.304695,\n      latitude: 30.59331,\n      pageNum: 1,\n      pageSize: 10,\n      hasNextPage: false,\n      proList: '', //商品列表\n      activeType: 'default',\n      isAjaxing: false,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      pageType: '',\n      pageTitle: '',\n      scrollType: false,\n      id: null,\n      input_text: null, //搜索关键词\n      address_data: {},\n      medicinesId: null,\n      drugstoreId: null,\n      sess_key: null,\n      showCapsule: true,\n      hideNav: null,\n      cdnLink: cdnStaticResourceUrl,\n      otherDrugstoreIdList: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function(options) {\n    this.data.medicinesId = options.medicinesId || null;\n    this.data.navAreaId = options.navAreaId || '';\n    this.data.source = options.source || null;\n    this.data.hideNav = options.hideNav || null;\n    this.data.drugStoreId = options.drugStoreId || null;\n    this.data.otherDrugstoreIdList = options.otherDrugstoreIdList || '';\n  },\n  onShow: function() {\n    // 腾讯过来隐藏顶部左侧胶囊\n    if (this.data.source == 'tx' ||\n      (this.data.source && this.data.source.indexOf(\"tx_jk\") === 0) ||\n      this.data.hideNav == '1') {\n      this.setData({\n        showCapsule: false\n      })\n    }\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      sess_key: getApp().globalData.sess_key\n    })\n    this.data.pageNum = 1;\n    if (this.data.sess_key) {\n      //取首页存的，没有则自动获取\n      if (getApp().address_data.longitude) {\n        this.data.address_data = getApp().address_data;\n        this.getAreaIdAndMedicinesId();\n      } else {\n        getLocation((longitude, latitude) => {\n          this.data.address_data = {\n            longitude: longitude,\n            latitude: latitude\n          };\n          this.getAreaIdAndMedicinesId();\n        })\n      }\n    }\n  },\n  specialArea() {\n    if (this.data.navAreaId) {\n      ajax2('get', 'miniapp/ad/getNavAreaAd', {\n        navAreaId: this.data.navAreaId\n      }, res => {\n        if (res.data.code == 0) {\n          this.setData({\n            specialAreaData: res.data.result\n          });\n        }\n      }, function() {\n        Taro.showToast({\n          title: '请求失败',\n          icon: 'none',\n        })\n      })\n    }\n  },\n  getAreaIdAndMedicinesId() {\n    if (this.ifNeedGetSpecialMedicineInfo()) {\n      ajax2('get', 'mimiapp/grouparea/getAreaIdAndMedicinesId', {\n        source: app.globalData.globalSource\n      }, res => {\n        if (res.data.code == 0) {\n          this.data.medicinesId = res.data.result.mediciensId;\n          this.data.navAreaId = res.data.result.areaId;\n          this.specialArea();\n          this.searchFn();\n        }\n      }, function() {\n        Taro.showToast({\n          title: '请求失败',\n          icon: 'none',\n        })\n      })\n    } else {\n      this.specialArea();\n      this.searchFn();\n    }\n  },\n  // 判断是否需要从后台读 预约药品id和专区id\n  ifNeedGetSpecialMedicineInfo() {\n    // 以tx开头为腾讯流量\n    // 以external开头为其他外部流量\n    // 以internal开头的为内部流量\n    // offline为荷叶健康线下门店\n    // h5为荷叶健康小程序H5活动页\n    if (!this.data.medicinesId) {\n      return true;\n    }\n    let source = this.data.source\n    if (!source) {\n      return false;\n    }\n    if (source.indexOf('tx') === 0 ||\n      source.indexOf('external') === 0 ||\n      source.indexOf('internal') === 0 ||\n      source == 'offline' ||\n      source == 'h5') {\n      return true;\n\n    } else {\n      return false;\n    }\n  },\n  open_banner(e) {\n    let url = e.currentTarget.dataset.url + '&token=' + getApp().globalData.sess_key;\n    if (e.currentTarget.dataset.url) {\n      Taro.navigateTo({\n        url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n      })\n    }\n  },\n  /**\n   * 价格tab点击\n   */\n  sortTab(e) {\n    let type = '';\n    let activeType = this.data.activeType;\n    if (e) {\n      type = e.currentTarget.dataset.type;\n      if (type == 'sort') {\n        if (activeType == 'asc') {\n          activeType = 'desc'\n        } else {\n          activeType = 'asc'\n        }\n      } else {\n        activeType = 'default'\n      }\n    }\n    this.setData({\n      activeType,\n      proList: []\n    })\n    this.data.pageNum = 1;\n    this.searchFn(activeType)\n  },\n  onPullDownRefresh: function() {\n    Taro.pageScrollTo({\n      scrollTop: 0\n    })\n    this.sortTab();\n    this.specialArea();\n    Taro.stopPullDownRefresh() //停止下拉刷新\n  },\n  onPageScroll: function(e) { // 获取滚动条当前位置\n    if (e.scrollTop <= 0) {\n      this.setData({\n        scrollType: false\n      })\n    } else {\n      this.setData({\n        scrollType: true\n      })\n    }\n  },\n  /**\n   * 搜索方法\n   */\n  searchFn() {\n    Taro.showLoading({\n      title: '加载中',\n      mask: true,\n    })\n    const {\n      activeType = 'default', pageNum = 1, pageSize, medicinesId\n    } = this.data\n    const sendData = {\n      pageNum,\n      pageSize,\n      longitude: this.data.address_data.longitude,\n      latitude: this.data.address_data.latitude,\n      productId: medicinesId,\n      drugstoreIdList: this.data.otherDrugstoreIdList\n    }\n    if (this.data.address_data.cityCode) {\n      sendData.cityCode = this.data.address_data.cityCode\n    }\n    // sendData.longitude = 114.304695;//116.72476;\n    // sendData.latitude = 30.59331;//39.904896;\n    //升序降序处理\n    if (activeType == 'asc' || activeType == 'desc') {\n      sendData.sort = 'price'\n      sendData.order = activeType\n    }\n    let url = this.data.isDjk ? 'miniapp/bighealth/medicine/searchSevereCaseDrugstoreByMedicinesId' : 'product/ykq/mini/v1/lbs/queryDrugstoreListByProductId';\n    ajax2('get', url, sendData, res => {\n      this.setData({\n        isAjaxing: true\n      })\n      Taro.hideLoading();\n      if (res.data.code == 0) {\n        const resData = res.data.result;\n        if (resData.isBoolean) {\n          let name = resData.textAndStatus ? resData.textAndStatus.title : '';\n          this.setData({\n            pageTitle: name.length > 7 ? `${name.substr(0, 7)}...` : name,\n            proList: resData\n          })\n        } else {\n          // // 1号项目逻辑处理\n          // if(resData.list.length == 0){\n          //   Taro.redirectTo({\n          //     url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${this.data.medicinesId}&drugStoreId=${this.data.medicinesId}`,\n          //   })\n          // }\n          let showSortTab = true;\n          if (resData.pageNum == 1 && !resData.list.length) {\n            showSortTab = false\n          }\n          resData && this.setData({\n            proList: this.data.pageNum == 1 ? resData.list : [...this.data.proList, ...resData.list],\n            hasNextPage: resData.hasNextPage || false,\n            showSortTab\n          });\n          if (this.data.proList.length > 0) {\n            let name = this.data.proList[0].medicineName + this.data.proList[0].medicineCommonName;\n            this.setData({\n              pageTitle: name.length > 7 ? `${name.substr(0, 7)}...` : name\n            })\n          } else {\n            this.setData({\n              pageTitle: '荷叶健康'\n            })\n          }\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n        })\n      }\n    }, ()=> {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  open_banner(e) {\n    let url = e.currentTarget.dataset.url + '&token=' + getApp().globalData.sess_key;\n    if (e.currentTarget.dataset.url) {\n      Taro.navigateTo({\n        url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n      })\n    }\n  },\n  /**\n   * 请求接口，确认商品状态\n   * @param {*} e \n   */\n  toCheckPro(e) {\n    // 跳转药店主页\n    const proItem = e.currentTarget.dataset.item;\n    //isB2C 1跳转B2C商品详情 0跳转LBS药店主页\n    if(proItem.isB2C){\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/goodsDetail/goodsDetail?goodsId=${ proItem.medicineId }&drugStoreId=${ proItem.drugstoreId }`\n      })\n      return false;\n    }\n    if(proItem.limitPurchaseAct && proItem.limitPurchaseAct.surplusLimitPurchaseNum <= 0) {\n      Taro.showToast({\n        title: '商品超出限购数量',\n        icon: 'none'\n      })\n    }else {\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/drugList/drugList?goodsId=${proItem.medicineId}&drugStoreId=${proItem.drugstoreId}&areaId=${proItem.merchandiseClassifyId}&isAddCart=1`\n      })\n    }\n    // 跳转确认订单\n    // const proItem = e.currentTarget.dataset.item;\n    // const isAddCart = e.currentTarget.dataset.cart;\n    // const type = e.currentTarget.dataset.type;\n    // console.log(isAddCart)\n    // console.log(proItem)\n    // const sendData = {\n    //   drugstoreId: proItem.drugstoreId,\n    //   medicinesId: proItem.medicineId\n    // }\n    // Taro.showLoading({\n    //   mask: true\n    // })\n    // ajax2('get', 'mimiapp/grouparea/medicinesAddPurchaseConditionChecked', sendData, res => {\n    //   if (res.data.code == 0) {\n    //     Taro.hideLoading();\n    //     if (res.data.result.code == 0) {\n    //       if (type == 'toOrder') {\n    //         this.data.drugstoreId = proItem.drugstoreId;\n    //         Taro.removeStorageSync('cart');\n    //         //检验是否登录授权,授权成功直接跳转确认订单页面\n    //         if (!getApp().globalData.sess_key) {\n    //           let link = `/pages/onlineGoods/onlinePlaceOrder/onlinePlaceOrder?drugStoreId=${proItem.drugstoreId}&medicineId=${proItem.medicineId}`\n    //           Taro.navigateTo({\n    //             url: `/pages/note/login/login?pageLink=${encodeURIComponent(link)}`\n    //           })\n    //           return false;\n    //         }\n    //         Taro.navigateTo({\n    //           url: `/pages/onlineGoods/onlinePlaceOrder/onlinePlaceOrder?drugStoreId=${proItem.drugstoreId}&medicineId=${proItem.medicineId}`\n    //         })\n    //       } else {\n    //         Taro.navigateTo({\n    //           url: `/pages/onlineGoods/drugList/drugList?goodsId=${proItem.medicineId}&drugStoreId=${proItem.drugstoreId}&areaId=${proItem.merchandiseClassifyId}&isAddCart=1`\n    //         })\n    //       }\n    //     } else {\n    //       Taro.showToast({\n    //         title: res.data.result.msg,\n    //         icon: 'none',\n    //       })\n    //       setTimeout(() => {\n    //         this.search_btn()\n    //       }, 1000)\n    //     }\n    //   } else {\n    //     Taro.hideLoading();\n    //     Taro.showToast({\n    //       title: res.data.msg,\n    //       icon: 'none',\n    //     })\n    //   }\n    // }, function () {\n    //   Taro.hideLoading();\n    //   Taro.showToast({\n    //     title: '请求失败',\n    //     icon: 'none',\n    //   })\n    // })\n  },\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function() {\n    const hasNextPage = this.data.hasNextPage;\n    if (hasNextPage) {\n      this.data.pageNum = ++this.data.pageNum\n      this.searchFn()\n    }\n  },\n  select_address() {\n    // 如果没有经纬度跳转到选择地址清空绑定内容\n    if (!this.data.address_data.latitude) {\n      this.setData({\n        address_data: {}\n      })\n    }\n    let data = JSON.stringify(this.data.address_data).replace(/&/, 'ASCII38')\n    Taro.navigateTo({\n      url: `/pages/note/locationAddress/locationAddress?address_data=${data}`\n    })\n  },\n  onShareAppMessage: function(e) {\n    let shareObj = {\n      title: '为您推荐' + this.data.pageTitle + '相关商品',\n      path: `/pages/onlineGoods/subscribeList/subscribeList?medicinesId=${this.data.medicinesId}&navAreaId=${this.data.navAreaId}`,\n      imageUrl: '',\n    };\n    console.log(shareObj.path)\n    return shareObj;\n  },\n  toLogin() {\n    Taro.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  }\n};"},"convertDir/pages/onlineGoods/transfer/transfer":{"json":{"missingData-view":"../../../component/missingData/missingData"},"wxml":"\n  <view class=\"transfer-auto-container\">\n    <missingData-view v-if=\"missingDataShow\" zhi=\"new1\" textval2=\"很抱歉，您查看的药店不存在可能已下线或被禁用\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n  </view>","wxss":"/* pages/onlineGoods/transfer/transfer.wxss */","js":"// pages/transfer/transfer.js\nimport {ajax, ajax2, cdnStaticResourceUrl} from \"../../../utils/util\";\nimport getLocation from '../../../utils/getLocation.js'\nconst API = {\n  getHistoryDrugStoreType: 'drugstore/ykq/mini/v1/getHistoryDrugStoreType',//获得访问药店数量接口\n  getRelationInfo: \"api/user/doctor/relation/info\",//查询用户医生绑定关系\n  bindRelationInfo: 'api/user/doctor/relation/bind',// 用户关系绑定\n  getServiceStatus: 'api/patientinfo/getServiceStatus2' //获取是否开启问诊服务的状态\n}\n\nexport default {\n  data: function() {\n    return {\n      options: '',\n      url_link: cdnStaticResourceUrl,\n      missingDataShow: false\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.options = options;\n  },\n  onShow() {\n\n    getApp().globalData.hasBackIcon = false;\n    // 未登陆跳转登陆页面进行授权\n    if (!getApp().globalData.sess_key) {\n      this.goToAuth()\n      return\n    }\n    // 获取经纬度存储到全局\n    let lonlat = getApp().address_data.longitude && getApp().address_data.latitude\n    // 如果全局有经纬度不需要获取直接跳转\n    lonlat ? this.setJumpPage() : this.getLatLong()\n  },\n  // 获取经纬度\n  getLatLong() {\n    getLocation.init((res) => {\n      if (res.longitude && res.latitude) {\n        getApp().address_data = res\n        this.setJumpPage()\n      } else {\n        Taro.showToast({\n          title: '获取经纬度失败，请重新进入',\n        })\n      }\n    })\n  },\n  // 跳转授权页面\n  goToAuth() {\n    console.log('中转页面-------------')\n    var url = \"/pages/note/login/login\"\n    Taro.navigateTo({\n      url: url\n    })\n  },\n  getServiceStatus(type) {\n    let params\n    type == 1 ? params = {}: params = {\n      poiId: this.data.options.lzStoreId,\n      type: 'lz' //灵芝门店ID，公众号来源\n    }\n    ajax('post', API.getServiceStatus, params, res => {\n      if (res.data.code == 0) {\n        let data = res.data.result\n        type == 1 ? this.getCountToPage(data) : this.getSkipUrlToPage(data)\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  // 公众号入口在线找到-根据用户访问的数量判断跳转数量\n  getCountToPage(data){\n    const _pages = [\n      '/pages/noteIndex/noteIndex',//首页\n      `/pages/onlineGoods/drugList/drugList?drugStoreId=${data.drugstoreId}`,//门店主页\n      `/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?type=\"transfer\"`//门店列表\n    ]\n    if (data.drugstoreCount == 0) {\n      getApp().globalData.publicDomain = 1;\n      Taro.switchTab({\n        url: `/pages/noteIndex/noteIndex`\n      })\n    } else {\n      getApp().globalData.publicDomain = 0;\n      Taro.redirectTo({\n        url: _pages[data.drugstoreCount > 1 ? 2 : data.drugstoreCount],\n      })\n    }\n  },\n  // 公众号卡片跳转，根据服务状态判断是否\n  getSkipUrlToPage(data){\n    let url;\n    if (!data) return false;\n    getApp().globalData.publicDomain = 0;\n    // skipUrl 1:药店首页 2：扫码补方\n    if (data.skipUrl == 1) {\n      url = `/pages/onlineGoods/drugList/drugList?drugStoreId=${data.ykqId}`\n    } else if (data.skipUrl == 2) {\n      url = `/pages/scan/pages/addInformation/addInformation?scene=${data.organSign}`\n    } else if (data.skipUrl == 3) {\n      this.setData({\n        missingDataShow: true\n      })\n      return false\n    }\n    Taro.navigateTo({ url })\n  },\n  setJumpPage() {\n    let options = this.data.options\n    // 参数控制公域还是私域\n    getApp().globalData.publicDomain = 0\n    // 公众号消息只有药店id 和店员id\n    if (options.drugstoreId && options.accountId) {\n      getApp().globalData.promoterAccountId = options.accountId;\n      Taro.redirectTo({\n        url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${options.drugstoreId}`,\n      })\n\n      return\n    }\n\n    if (options.type) {\n\n      // console.log(options.type)\n      // return \n      // 满足经纬度，登录条件后跳转页面\n      // 访问过的药店数量=0，跳转至【宜块钱首页】\n      // 访问过的药店数量=1，跳转至【门店主页】\n      // 访问过的药店数量>1，跳转至【药店列表页】\n      const pageConfig = {\n        1: () => {\n          this.getServiceStatus(1)\n        },\n        2: (res) => {\n          Taro.redirectTo({\n            url: `/pages/note/myIndentDetail/myIndentDetail?orderNo=${res.orderNo}`\n          })\n        },\n        3: () => {\n          Taro.switchTab({\n            url: '/pages/my/myDrug/myInfo/myInfo'\n          })\n        },\n        4: (res) => {\n          if (res.brandId) getApp().globalData.hasBackIcon = true\n          Taro.redirectTo({\n            url: `/pages/note/brandDrugstoreList/brandDrugstoreList?brandId=${res.brandId}`//门店列表\n          })\n        },\n\n        5: () => {\n          this.getServiceStatus(5)\n        },\n        6: (res) => {\n          // 医带患 菜单进来\n          this.getRelation()\n        }\n      }\n      pageConfig[options.type](options)\n    }\n    },\n    getRelation() {\n      // 菜单或者医生卡片进入的 \n      // 根据来源和绑定关系在判断跳转关系\n      //优先判断是否开启是否开启医带患权限\n      Taro.showLoading({\n        title: '加载中',\n      })\n      var data = {\n        doctorGuid: this.data.options.doctorId,\n        bindSource: \"1\"\n      }\n      let that = this;\n      ajax2('post', API.getRelationInfo, data, res => {\n        Taro.hideLoading({})\n        if (res.data.code == 0) {\n          var url;  \n          var relationInfo = res.data.result\n          // 先根据来源在根据医患关系绑定状态去跳转 \n          if (this.data.options&&this.data.options.source&&this.data.options.source == 'FAMOUS_DOCTOR') {\n            // 从医生卡片来 \n            //  判断权限未开启 跳转至 首页\n            //  开启 绑定关系跳转至 患者信息报道页\n            var url;\n            if (relationInfo.physicianInvitePatientEnableStatus != undefined && relationInfo.physicianInvitePatientEnableStatus === 0) {\n              Taro.switchTab({\n                url: `/pages/noteIndex/noteIndex`\n              })\n            } else {\n              this.bindRelation()\n            }\n          } else {\n            if (relationInfo.userDoctorBindCount) {\n              var url = '/pages/my/myDoctor/doctorList/doctorList';\n              Taro.navigateTo({\n                url: url,\n              })\n            } else if (relationInfo.poiList.length) {\n        \n              // 绑定过药店 去往药店 变为私域\n              const _pages = [\n                '/pages/noteIndex/noteIndex',//首页\n                `/pages/onlineGoods/drugList/drugList?drugStoreId=${relationInfo.poiList[0]}`,//门店主页\n                `/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?type=\"transfer\"`//门店列表\n              ]\n              if (relationInfo.poiList.length == 0) {\n                getApp().globalData.publicDomain = 1;\n                Taro.switchTab({\n                  url: `/pages/noteIndex/noteIndex`\n                })\n              } else {\n                Taro.redirectTo({\n                  url: _pages[relationInfo.poiList.length > 1 ? 2 : relationInfo.poiList.length],\n                })\n              }\n              Taro.navigateTo({\n                url: url,\n              })\n            } else {\n              // 去首页\n              Taro.switchTab({\n                url: `/pages/noteIndex/noteIndex`\n              })\n            }\n          }\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none'\n          })\n        }\n      })\n    },\n    bindRelation(){\n      // 绑定用户医生关系\n      var obj = {\n        doctorGuid: this.data.options.doctorId,\n        bindSource: 1\n      }\n      ajax2('post', API.bindRelationInfo, obj, res => {\n        Taro.hideLoading({})\n        if (res.data.code == 0) {\n          // 医患关系绑定成功 跳转至 患者报道页面\n          Taro.redirectTo({\n            url: `/pages/famousDoctors/page/patientReports/patientReports?doctorId=${this.data.options.doctorId}`// 跳转至报道页面\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none'\n          })\n        }\n      })\n    },\n\n  };"},"convertDir/pages/onlineGoods/uploadPrescription/uploadPrescription":{"js":"// pages/onlineGoods//uploadPrescription/uploadPrescription.js\nimport {\n  url,\n  ajax,\n  ajax2,\n  ajaxNotRepeat,\n  getH5ImUrl\n} from \"../../../utils/util\";\nconst UPLOAD_IMAGE_DATE = \"prescription_image_data\";\n\nexport default {\n  data: function() {\n    return {\n      urlLink: url,\n      fileList: [],\n      clickTime: false,\n      files: [],\n      boxShow: 1,\n      adverseReaction: 0,\n      historyAllergy: 0,\n      symptomDes: '',\n      selectedDiagnosisIdList: [],\n      medicinesList: [],\n      patientId: '',\n      drugStoreId: null,\n      toInquiryClickTime: null,\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    };\n  },\n  onLoad: function (options) {\n    let imageData = Taro.getStorageSync(UPLOAD_IMAGE_DATE) || [];\n    let files = [];\n    imageData.forEach((item, index) => {\n      console.log(item, index)\n      files[index] = {\n        url: item\n      };\n    })\n\n    if (options.medicinesList) {\n      this.data.medicinesList = JSON.parse(options.medicinesList)\n    }\n    this.setData({\n      selectFile: this.selectFile.bind(this),\n      uplaodFile: this.uplaodFile.bind(this),\n      files: files,\n      fileList: imageData,\n      medicinesList: this.data.medicinesList,\n      patientId: options.patientId,\n      drugStoreId: options.drugStoreId,\n      boxShow: options.type || 1\n    });\n  },\n  onShow(){\n    this.setData({\n      isSrc_whyb: getApp().globalData.src_whyb || ''\n    })\n  },\n  switchTab(e){\n    this.setData({\n      boxShow: e.currentTarget.dataset.index\n    })\n  },\n  getSymptomDes(e){\n    this.setData({\n      symptomDes: e.detail.value\n    })\n  },\n  getAdverseReaction(e){\n    this.setData({\n      adverseReaction: e.detail.value\n    })\n  },\n  getHistoryAllergy(e) {\n    this.setData({\n      historyAllergy: e.detail.value\n    })\n  },\n  //搜索疾病名称\n  toSearchDisease() {\n    Taro.navigateTo({\n      url: '/pages/onlineGoods/searchDiseaseName/searchDiseaseName',\n    })\n  },\n  //发起问诊\n  toInquiry(){\n    //避免重复点击\n    if (new Date().getTime() - this.data.toInquiryClickTime < 3000) {\n      return false;\n    }\n    this.data.toInquiryClickTime = new Date().getTime();\n\n    Taro.showLoading({\n      title: '加载中'\n    });\n\n    let data = {\n      medicinesList: this.data.medicinesList,\n      patientId: this.data.patientId,\n      definiteDiagnosisIdList: this.data.selectedDiagnosisIdList,\n      symptomDescription: this.data.symptomDes,\n      isHaveAdverseReaction: this.data.adverseReaction,\n      isHaveHistoryAllergy: this.data.historyAllergy,\n      drugStoreId: this.data.drugStoreId\n    }\n    if (!data.symptomDescription.trim()) {\n      Taro.showToast({\n        title: '请输入症状描述',\n        icon: 'none'\n      })\n      Taro.hideLoading()\n      return false;\n    }\n    if (data.isHaveHistoryAllergy == 1 || data.isHaveAdverseReaction == 1) {\n      Taro.showModal({\n        content: '为了您的用药安全，建议您到线下医院问诊',\n        confirmColor: getApp().globalData.mainColor,\n        confirmText: '我知道了',\n        showCancel: false\n      })\n      Taro.hideLoading()\n      return false;\n    }\n    \n    ajax2('POST', 'api/slowSickness/createInquiry', data, (res) => {\n      Taro.hideLoading()\n      if (res.data.code == 0) {\n        Taro.setStorageSync('upload_click_type', this.data.boxShow);\n        let url = getH5ImUrl(`im/?token=${Taro.getStorageSync('sess_key')}&inquiryId=${res.data.result.inquiryReportGuid }`)\n        console.log(url)\n        Taro.redirectTo({\n          url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n        })\n      }else {\n        Taro.hideLoading()\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  },\n  selectFile(files) {\n    console.log('files', files)\n    // 返回false可以阻止某次文件上传\n  },\n  uplaodFile(tempFilePaths, contents) {\n    let that = this;\n    return new Promise((resolve, reject) => {\n      Taro.uploadFile({\n        url: that.data.urlLink + 'app/upload/uploadBaseImg',\n        filePath: tempFilePaths,\n        name: 'file',\n        header: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        formData: {\n          base: Taro.arrayBufferToBase64(contents),\n          index: 1\n        },\n        success(res) {\n          console.log(res)\n          res.data = JSON.parse(res.data)\n          // 服务器返回的数据 res.data = {url:'图片上传后的地址'}\n          if (res.data.code == 0) {\n            var urls = []\n            urls.push(res.data.result.path)\n            resolve({\n              urls: urls\n            });\n          } else {\n            reject(res)\n          }\n        },\n        fail(res) {\n          console.log(res)\n          reject(res)\n        }\n      })\n    })\n  },\n  uploadError(e) {\n    console.log('upload error', e.detail)\n    Taro.showToast({\n      icon: 'none',\n      title: e.detail.errMsg,\n    })\n  },\n  //批量上传，依次push到数组中\n  uploadSuccess(e) {\n    console.log('upload success', e)\n    e.detail.urls.forEach(item => {\n      console.log(item)\n      this.data.fileList.push(item)\n    })\n    this.setData({\n      fileList: this.data.fileList\n    })\n    console.log(this.data.fileList)\n  },\n  //图片删除时更新列表\n  updateImg(index) {\n    console.log('updateImg', index.detail)\n    this.data.fileList.splice(index.detail, 1)\n    this.setData({\n      fileList: this.data.fileList\n    })\n  },\n  submit() {\n    if (this.data.fileList.length == 0) {\n      Taro.showToast({\n        title: '请上传处方单',\n        icon: 'none'\n      })\n      return false;\n    }\n    console.log(this.data.fileList)\n    Taro.setStorageSync(UPLOAD_IMAGE_DATE, this.data.fileList);\n    Taro.setStorageSync('upload_click_type', this.data.boxShow);\n\n    Taro.navigateBack({\n      delta: 1\n    })\n  }\n};","json":{"mp-uploader":"../../../component/uploader/uploader"},"wxss":"/* pages/onlineGoods//uploadPrescription/uploadPrescription.wxss */\n@import '/common/tableView.wxss';\n.container {\n  padding: 24rpx;\n}\n.nav {\n  display: flex;\n  height: 100rpx;\n  text-align: center;\n  align-items: flex-end;\n  font-size: 28rpx;\n  color: #666666;\n  overflow: hidden;\n}\n\n.nav view {\n  flex: 1;\n  height: 80rpx;\n  line-height: 80rpx;\n  background: #FAFAFA;\n}\n.nav .active {\n  height: 100rpx;\n  line-height: 100rpx;\n  background: #FFFFFF;\n  position: relative;\n  border-radius: 6rpx;\n  font-size: 32rpx;\n  color: #00b955;\n  font-weight: bold\n}\n.nav .active::after {\n  content: '';\n  position: absolute;\n  right: -28rpx;\n  top: 14rpx;\n  background: #FFFFFF;\n  width: 80rpx;\n  height: 120rpx;\n  border-right: 1rpx solid #EEEEEE;\n  transform: rotate(-20deg);\n  border-radius: 6rpx;\n}\n.nav .right::after {\n  left: -28rpx;\n  top: 14rpx;\n  border: 0;\n  border-left: 1rpx solid #EEEEEE;\n  transform: rotate(20deg);\n  border-radius: 6rpx;\n}\n.common_section .cell {\n  padding: 28rpx 20rpx;\n  color: #333333;\n  background: #FFFFFF;\n}\n.common_section .cell .left {\n  flex: 1;\n  font-size: 32rpx;\n}\n.common_section .text-enter {\n  display: block;\n  padding-top: 0;\n}\n.common_section .text-enter .left {\n  padding: 20rpx 0;\n}\n.common_section .text-enter .text-block {\n  background: #FAFAFA;\n  padding: 20rpx;\n  font-size: 28rpx;\n  border-radius: 6rpx;\n  border: 1rpx solid #EEEEEE\n}\n.common_section .text-enter .text-block textarea {\n  height: 138rpx;\n  line-height: 40rpx;\n}\n.common_section .text-enter .text-block .text-count {\n  text-align: right;\n  font-size: 24rpx;\n}\nradio-group label {\n  margin-left: 20rpx;\n  font-size: 28rpx;\n}\n.card-box {\n  border-radius: 4rpx;\n  font-size: 30rpx;\n  color: #999999\n}\n.card-box .subtitle {\n  font-size: 32rpx;\n  color: #333333;\n  padding: 20rpx 20rpx 0;\n  background: #FFFFFF;\n}\n.card-box .detail {\n  padding: 0 20rpx 20rpx;\n  min-height: 600rpx;\n  background: #FFFFFF;\n}\n.card-box .detail textarea {\n  width: 100%;\n  height: 250rpx;\n  line-height: 42rpx;\n  color: #333333\n}\n.card-box .detail .count {\n  text-align: right;\n  font-size: 24rpx;\n}\n.card-box .detail .add {\n  position: relative;\n  padding: 10rpx 0;\n  color: #333333\n}\n\n.card-box .detail .add::before {\n  content: \"\";\n  position: absolute;\n  right: 0;\n  top: 50%;\n  width: 16rpx;\n  height: 16rpx;\n  border: 2rpx solid #CCCCCC;\n  border-left: 0;\n  border-bottom: 0;\n  margin-top: -8rpx;\n  transform: rotate(45deg)\n}\n.tips {\n  color: #666666;\n  font-size: 24rpx;\n  padding: 30rpx 0;\n}\n","wxml":"\n  <view class=\"uploadPrescription-auto-container\"> \n    <navBar title-text=\"处方信息\" :showCapsule=\"true\"></navBar>\n    <view :class=\"[container,( isSrc_whyb ? 'djk-view' : '' )]\">  \n      <view class=\"nav\"> \n        <view :class=\"[( boxShow == 1 ? 'active' : '')]\" bindtap=\"switchTab\" data-index=\"1\">在线获取处方\n        </view>\n        <view :class=\"[right,( boxShow == 0 ? 'active' : '')]\" bindtap=\"switchTab\" data-index=\"0\">上传处方\n        </view>\n      </view>\n      <form bindsubmit=\"toInquiry\" class=\"common_section\" v-if=\" boxShow == 1 \">    \n        <view class=\"cell arrow\" bindtap=\"toSearchDisease\">\n          <view class=\"left\">线下确诊疾病名称\n          </view>\n        </view>\n        <view class=\"cell text-enter\"> \n          <view class=\"left\">症状描述\n          </view>\n          <view class=\"text-block\"> \n            <textarea placeholder=\"请描述您现在的主要症状，如“头疼三天\" :value=\" symptomDes \" bindinput=\"getSymptomDes\" maxlength=\"50\"></textarea>\n            <view class=\"text-count\">{{ symptomDes.length }}/50\n            </view>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"left\">服用该药品是否有不良反应\n          </view>\n          <radio-group name=\"adverseReaction\" bindchange=\"getAdverseReaction\"> \n            <label>无\n              <radio value=\"0\" checked></radio>\n            </label>\n            <label>有\n              <radio value=\"1\"></radio>\n            </label>\n          </radio-group>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"left\">是否有过敏史\n          </view>\n          <radio-group name=\"historyAllergy\" bindchange=\"getHistoryAllergy\"> \n            <label>无\n              <radio value=\"0\" checked></radio>\n            </label>\n            <label>有\n              <radio value=\"1\"></radio>\n            </label>\n          </radio-group>\n        </view>\n        <view class=\"common_footer\"> \n          <button class=\"active\" v-if=\" selectedDiagnosisIdList.length > 0 && symptomDes \" bindtap=\"toInquiry\">免费问诊\n          </button>\n          <button v-else>免费问诊\n          </button>\n        </view>\n      </form>\n      <view class=\"card-box\" :hidden=\" boxShow == 1 \">   \n        <view class=\"subtitle\">请上传医生开具的处方单\n        </view>\n        <view class=\"detail\">\n          <mp-uploader bindfail=\"uploadError\" bindsuccess=\"uploadSuccess\" bindupdate=\"updateImg\" :select=\"selectFile\" :upload=\"uplaodFile\" :files=\"files\" max-count=\"5\" tips=\"线下就诊的历史处方\"></mp-uploader>\n        </view>\n        <view class=\"tips\">由药店直接为您提供药学服务，此订单中含有处方药，如处方不合规，药店有权拒绝本订单\n        </view>\n        <view class=\"common_footer\">\n          <button :class=\"[( fileList.length > 0 ? 'active' : '' )]\" bindtap=\"submit\">提交\n          </button>\n        </view>\n      </view>\n    </view>\n  </view>"},"convertDir/pages/quickConsultation/pages/checkSessKey/checkSessKey":{"wxml":"\n  <view class=\"checkSessKey-auto-container\"></view>","js":"export default {\n\n  data: function() {\n    return {\n      sess_key: getApp().globalData.sess_key,\n      inquirySource: 1,//平台来源 宜块钱是1 大健康是4 保险5\n      inquiryType: '',//1跳转购药问诊记录 2跳转订单列表\n      supportCode: ''\n    };\n  },\n  onLoad(options){\n    // options.source 平台来源\n    //options.type 区分跳转页面路径\n    console.log(options)\n    //您健康\n    if(options.source && options.source == 'njk_app') {\n      getApp().globalData.inquirySource = 4;\n      this.data.inquirySource = 4;\n\n      getApp().globalData.inquiryChannel = 4;\n    }\n    \n    //保险\n    if(options.source && options.source == 'INSU') {\n      getApp().globalData.inquirySource = 5;\n      this.data.inquirySource = 5;\n      \n      getApp().globalData.inquiryChannel = 3;\n    }\n    this.data.inquiryType = options.type || '';\n    this.data.supportCode = options.id || ''\n  },\n  onShow(){\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    this.data.sess_key = getApp().globalData.sess_key;\n    this.checkSessKey();\n  },\n  checkSessKey(){\n    console.log(this.data.sess_key,  Taro.getStorageSync('sess_key'), getApp().globalData.sess_key,  'sess_keysess_keysess_key')\n    let url;\n    //1跳转购药问诊记录 2跳转订单列表\n    if(this.data.inquiryType == 1) url = '/pages/note/inquiryRecord/inquiryRecord';\n    if(this.data.inquiryType == 2) url = '/pages/note/myGroupIndent/myGroupIndent';\n    if(this.data.sess_key){\n      let userInfo = {\n        token: this.data.sess_key,\n        userId: Taro.getStorageSync('userInfo').userId\n      }\n      if(!this.data.inquiryType) url = `/pages/inquiry/guidance/guidance?userInfo=${ JSON.stringify(userInfo) }&inquirySource=${ this.data.inquirySource }&supportCode=${ this.data.supportCode }`;\n      Taro.redirectTo({ url });\n    }else {\n      if(!this.data.inquiryType) url = `/pages/inquiry/guidance/guidance&inquiryFrom=speedNativeInquiry&inquirySource=${ this.data.inquirySource }&supportCode=${ this.data.supportCode }`\n      Taro.redirectTo({\n        url: `/pages/note/login/login?backUrl=${ url }`\n      })\n    }\n  }\n};","json":{},"wxss":"/* pages/quickConsultation//pages/checkSessKey/checkSessKey.wxss */"},"convertDir/pages/quickConsultation/pages/selectProducts/selectProducts":{"json":{"halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxml":"\n  <view class=\"selectProducts-auto-container\">  \n    <navBar title-text=\"选择商品\" :showCapsule=\" true \"></navBar>\n    <view class=\"container\">   \n      <view class=\"adress-view\" v-if=\"json_data.productInfo.address && inquiryChannel != 3\">  \n        <image src=\"../../../../images/require-list-adreess.png\"></image>\n        <text bindtap=\"toSelectAddress\">切换地址\n        </text>\n        <text class=\"adress-desc\">配送至: {{ userAddress.selectNearyAddress?userAddress.selectNearyAddress:json_data.productInfo.address }} \n        </text>\n      </view>\n      <view class=\"drugstore-item\" v-for=\"(item, key) in  json_data.medicinesInfo \" :key=\"key\" wx:for-index=\"drugIndex\"> \n        <view class=\"header\"> \n          <checkbox catchtap=\"slectCheckBox\" data-flag=\"drugstore\" :checked=\"item.check\"></checkbox>\n          <text class=\"drugstore-name\" :data-drugstore-id=\" drugstore.drugstoreId \">{{item.drugstoreName}}\n          </text>\n        </view>\n        <view :class=\"[touch-item,( medicinesIitem.failure ? 'down' : '' )]\" v-for=\"(medicinesIitem, key) in item.medicinesList\" :key=\"key\" wx:for-index=\"goodsIndex\">\n          <view class=\"content med-item\">  \n            <view class=\"check-box\" data-flag=\"medicine\" catchtap=\"slectCheckBox\" :data-id=\"medicinesIitem.medicineId\">\n              <checkbox :checked=\"medicinesIitem.check\" :disabled=\" medicinesIitem.failure \"></checkbox>\n            </view>\n            <view class=\"med-logo\">\n              <view class=\"img-box\"> \n                <view class=\"status\" v-if=\" medicinesIitem.failure \">已失效\n                </view>\n                <image :src=\"medicinesIitem.medicineMainImage\"></image>\n              </view>\n            </view>\n            <view class=\"item-content\">    \n              <text class=\"med-number\">×{{ medicinesIitem.quantity }}\n              </text>\n              <view class=\"med-name\"> \n                <text v-if=\" shoppingCartStr[drugIndex].medicinesList[goodsIndex].medicinesIsPrescribe \" class=\"prescription-flag\">处方药\n                </text>\n                <text class=\"medicines-mame\">{{ medicinesIitem.medicineName }} {{ medicinesIitem.medicineCommonName }}\n\t\t\t\t\t\t\t{{ medicinesIitem.medicineSpecifications }}\n                </text>\n              </view>\n              <view class=\"active_tag\" v-if=\"inquiryChannel != 3\">\n                <view class=\"tag\" v-for=\"(lableList, key) in shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityLabel\" :key=\"key\">{{lableList}}\n                </view>\n              </view>\n              <text v-if=\"inquiryChannel != 3\"> \n                <text class=\"act-number-desc\" v-if=\"shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount < medicinesIitem.quantity\">包含{{shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount}}件活动商品\n\t\t\t\t\t\n                </text>\n                <text class=\"act-number-desc\" v-if=\"shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount == 0\">活动商品购买数量已达上限\n                </text>\n              </text>\n              <view class=\"med-footer\">  \n                <text :class=\"[price-character,(inquiryChannel ==3?'Insurance':'')]\">¥\n                </text>\n                <text :class=\"[price,(inquiryChannel ==3?'Insurance':'failure-medicine')]\">{{ shoppingCartStr[drugIndex].medicinesList[goodsIndex].customPrice }}\n                </text>\n                <text v-if=\"inquiryChannel != 3\">  \n                  <text class=\"price\" v-if=\" !(shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount == 0) \">{{  shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.actPrice || shoppingCartStr[drugIndex].medicinesList[goodsIndex].customPrice }}\n                  </text>\n                  <text class=\"price\" v-else-if=\"  shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount == 0 \">{{ shoppingCartStr[drugIndex].medicinesList[goodsIndex].customPrice }}\n                  </text>\n                  <text class=\"underline-price\" v-if=\"!(shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.realDiscountCount == 0) && shoppingCartStr[drugIndex].medicinesList[goodsIndex].activityInfo.actPrice \">{{ '¥' + shoppingCartStr[drugIndex].medicinesList[goodsIndex].customPrice }}\n                  </text>\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"rule-cell\" :style=\"{bottom:  isIPX ? '142rpx' : '110rpx'}\" bindtap=\"handleRule\" v-if=\" ruleDetail.userSubsidyRule \"> \n        <text>{{ ruleDetail.userSubsidyRule }}\n        </text>\n        <image mode=\"scaleToFill\" src=\"../../../../images/icon-question-mark.png\"></image>\n      </view>\n      <view :class=\"[footer,(isIPX?'_bottom':'')]\"> \n        <view class=\"footer-bar\"> \n          <text class=\"footer_hj\">合计\n          </text>\n          <view class=\"price-area\"> \n            <view :class=\"[top-line,(inquiryChannel == 3?'bx':'')]\">  \n              <text class=\"price-character\">¥\n              </text>\n              <text class=\"price\">{{ hjAmount }}\n              </text>\n              <text class=\"shipping\" v-if=\"inquiryChannel != 3\">不含运费\n              </text>\n            </view>\n            <view class=\"bottom-line\" v-if=\"inquiryChannel != 3\">商品金额 ¥{{ totalAmount }} 优惠 ¥{{ discountAmount }}\n\t\t\t\t\n            </view>\n          </view>\n        </view>\n        <view :class=\"[btn,theme-bg,(list.length == 0?'disable':'')]\" bindtap=\"toPlaceOrder\">提交预约\n        </view>\n      </view>\n    </view>\n    <halfScreenDialog :show=\" ruleBoxShow \" title=\"规则内容\" type=\"2\" btnText=\"我知道了\">\n      <view slot=\"desc\">{{ ruleDetail.userSubsidyDoc }}\n      </view>\n    </halfScreenDialog>\n  </view>","wxss":"/* pages/quickConsultation/pages/selectProducts/selectProducts.wxss */\n@import '../../../../common/tableView.wxss';\n\npage { \n  overflow-y: auto;\n  background-color: #f7f7f7;\n  padding-bottom: 108rpx;\n}\n\n.requirement-list {\n  padding-bottom: 130rpx;\n  overflow-y: auto;\n}\n\n/* 左滑卡片list */\n.touch-item {\n  background: #fff;\n  font-size: 26rpx;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1rpx solid #f2f2f2;\n  width: 100%;\n  overflow: hidden;\n}\n\n.del {\n  background-color: orangered;\n  width: 120rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  -webkit-transform: translateX(240rpx);\n  transform: translateX(240rpx);\n  -webkit-transition: all 0.4s;\n  transition: all 0.4s;\n  border:1rpx solid #ccc;\n}\n\n.touch-move-active .med-item,.touch-move-active .del {\n  -webkit-transform: translateX(0);\n  transform: translateX(0);\n}\n\n.drugstore-item {\n  margin-bottom: 20rpx;\n}\n\n.drugstore-item .header {\n  display: flex;\n  align-items: center;\n  height: 72rpx;\n  line-height: 72rpx;\n  padding: 0 30rpx;\n  background: #ffffff;\n  box-shadow: 0px -1px 0px 0px #f2f2f2 inset; \n}\n\n.drugstore-item .header .drugstore-name {\n  display: inline-block;\n  width: 100%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  font-weight: 700;\n}\n\n.drugstore-item .header checkbox {\n  margin-right: 20rpx;\n}\n\n.drugstore-item .header .arrow_icon {\n  width: 20rpx;\n  height: 20rpx;\n  margin-left: 10rpx;\n}\n\n.drugstore-item .header .post-tooltip {\n  color: #999999;\n  flex: 1;\n  text-align: right;\n  font-size: 24rpx;\n}\n\n.drugstore-item .post-tooltip-icon {\n  /* float: right; */\n  /* position: relative;\n  top: 24rpx;\n  left: 8rpx; */\n  width: 20rpx;\n  height: 20rpx;\n}\n\n/* 商品item */\n.med-item {\n  display: flex;\n  height: 288rpx;\n  padding: 0 30rpx;\n  width: 100%;\n  line-height: 40rpx;\n  margin-right: 0;\n  -webkit-transition: all 0.4s;\n  transition: all 0.4s;\n  -webkit-transform: translateX(240rpx);\n  transform: translateX(240rpx);\n  margin-left: -240rpx;\n}\n\n.med-item .check-box {\n  line-height: 288rpx;\n  padding-right: 30rpx;\n}\n\n.med-item .failure-medicine {\n  display: none;\n}\n\n.med-item .med-logo {\n  display: flex;\n  align-items: center;\n}\n\n.med-item .med-logo .cover {\n  display: none;\n}\n\n.med-item .item-content {\n  position: relative;\n  flex: 1;\n  padding: 38rpx 0 30rpx 30rpx;\n}\n\n.med-item .item-content .med-name {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 30rpx;\n  font-weight: 500;\n  color: #333333;\n  padding-top: 8rpx;\n  padding-right: 20rpx;\n  width: 80%;\n}\n\n.med-item .item-content .med-name .limit-flag, .med-item .item-content .med-name .prescription-flag {\n  position: relative;\n  top: -4rpx;\n  margin-right: 4rpx;\n  display: inline-block;\n  padding: 6rpx;\n  line-height: 24rpx;\n  text-align: center;\n  background: linear-gradient(270deg,#ff884a, #ff3232);\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 400;\n}\n\n.med-item .item-content .med-name .common-name, .med-item .item-content .med-name .medicines-mame {\n  margin-right: 8rpx;\n}\n\n.med-item .item-content .tag-list {\n  margin-top: 14rpx;\n}\n\n.med-footer .price-character {\n  font-size: 28rpx;\n  font-weight: 500;\n  color:#F93A4A;\n}\n.act-number-desc {\n  color: #9d9fb8;\n  font-size: 20rpx;\n  font-weight: 400;\n  margin-top: 12rpx;\n}\n.med-footer {\n  position: absolute;\n  bottom: 20rpx;\n  width: 80%;\n}\n.med-footer .med-num {\n  display: none;\n}\n\n.med-footer .price {\n  font-size: 36rpx;\n    font-family: PingFangSC, PingFangSC-Medium;\n    font-weight: 500;\n    color: #f93a4a;\n    line-height: 40rpx;\n}\n\n.med-footer .underline-price {\n  margin-left: 12rpx;\n  color: #999999;\n  font-size: 20rpx;\n  font-weight: 400;\n  text-decoration: line-through;\n}\n\n\n.down{\n  color: #999999;\n}\n\n.down .img-box{\n  position: relative;\n}\n.med-item .med-logo image {\n  width: 180rpx;\n  height: 180rpx;\n}\n\n.down .med-logo .status {\n  width: 118rpx;\n  height: 118rpx;\n  border-radius: 100rpx;\n  background: rgba(0,0,0,0.3);\n  color: #FFFFFF;\n  font-size: 30rpx;\n  font-weight: bold;\n  position: absolute;\n  text-align: center;\n  line-height: 118rpx;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n}\n\n.down .item-content .medicines-mame {\n  color: #999999;\n}\n\n.med-number{\n  color: #999999;\n  font-size: 25rpx;\n  position: absolute;\n  right: 53rpx;\n  top: 46rpx;\n}\n\n.footer{\n  width: calc(100% - 60rpx);\n  padding-left: 30rpx;\n  padding-right: 30rpx;\n  height: 108rpx;\n  line-height: 108rpx;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  display: flex; \n  flex-flow: row nowrap;\n  justify-content: space-between;\n  background-color: #fff;\n  z-index: 2;\n  color: #333333;\n\n}\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 21rpx;\n}\n.active_tag .tag {\n  padding: 0 9rpx;\n  height: 30rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  border: 1px solid #FF8A8A;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  color: #FF2121;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n.footer_hj{\n  font-size: 24rpx;\n  margin-right: 10rpx;\n}\n.footer_jg{\n  font-size: 40rpx;\n}\n.footer_gj{\n  font-size: 20rpx;\n  color: #999999;\n}\n.btn{\n  width: 177rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  border-radius: 32rpx;\n  text-align: center;\n  color: #fff;\n  font-size: 28rpx;\n  margin-top: 27rpx;\n}\n.disable{\n  background: #CCCCCC;\n}\n/* 切换地址 */\n.adress-view {\n  margin-bottom: 20rpx;\n  height: 70rpx;\n  line-height: 70rpx;\n  background: #fff;\n  line-height: 70rpx;\n  padding: 0 24rpx;\n  color: #41435d;\n  font-size: 24rpx;\n}\n\n.adress-view text:nth-child(1) {\n  float: left;\n}\n\n.adress-view text:nth-child(2) {\n  float: right;\n}\n\n.adress-view .adress-desc {\n  display: inline-block;\n  width: calc(100vw - 24rpx - 24rpx - 32rpx - 12rpx - 140rpx);\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n}\n\n.adress-view image {\n  float: left;\n  width: 32rpx;\n  height: 32rpx;\n  vertical-align: middle;\n  margin-right: 12rpx;\n  position: relative;\n  top: 10px;\n}\n/* 优惠活动 */ \n.rule-cell {\n  color: #FF6010;\n  font-size: 26rpx;\n  background: #FFF6D5;\n  padding: 10rpx 20rpx;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  width: 100%;\n  justify-content: center;\n}\n\n.rule-cell image {\n  width: 36rpx;\n  height: 36rpx;\n  flex-shrink: 0;\n}\n.footer-bar {\n  display: flex;\n  box-sizing: border-box;\n  padding: 0 24rpx;\n  height: 120rpx;\n  line-height: 120rpx;\n  background: #FFFFFF;\n  border-bottom: none;\n}\n\n.footer-bar .select-all {\n  font-family: PingFangSC, PingFangSC-Medium;\n  width: 102rpx;\n  height: 120rpx;\n  line-height: 120rpx;\n  font-size: 24rpx;\n  font-weight: 700;\n  color: #333333;\n}\n\n.footer-bar .select-all checkbox {\n  width: 36rpx;\n  margin-right: 12rpx;\n  position: relative;\n  top: -2rpx;\n}\n\n.footer-bar .price-area {\n  flex: 1;\n  margin-left: 6rpx;\n}\n\n.footer-bar .price-area .top-line {\n  margin-top: -15rpx;\n}\n\n.footer-bar .price-area .bottom-line {\n  font-size: 22rpx;\n  font-weight: 400;\n  color: #9AA0B5;\n}\n\n.footer-bar .price-area view {\n  height: 40rpx;\n}\n\n.footer-bar .price-area .shipping {\n  margin-left: 10rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #9AA0B5;\n}\n\n.footer-bar .price-area .price-character {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.footer-bar .price-area .price {\n  font-size: 40rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.footer-bar button {\n  float: right;\n  margin: 0;\n  margin-top: 23rpx;\n  padding: 0 20rpx;\n  height: 74rpx;\n  border-radius: 40rpx;\n  font-size: 30rpx;\n  font-weight: 700;\n  text-align: center;\n  color: #ffffff;\n  line-height: 74rpx;\n}\n.Insurance{\n  color: #000000!important;\n}\n.bx{\n  margin-top: -1rpx!important;\n  \n}\n.bx .price-character{\n  color: #000!important;\n}\n.bx .price{\n  color: #000!important;\n}\n._bottom{\n  padding-bottom: 22rpx;\n}","js":"// pages/b2c/pages/requirements/requirementList.js\nconst app = getApp();\nimport {\n  ajax,\n  ajax2\n} from \"../../../../utils/util\";\n\nexport default {\n  data: function() {\n    return {\n      userAddress:{},\n      isIPX: false,\n      inquiryChannel: 1,//问诊渠道code 1平台，2药店 3保险 4您健康(基于商品)\n      hjAmount: 0,//合计金额\n      shoppingCartStr: [],\n      ruleBoxShow: false,\n      json_data: {},\n      totalAmount: 0,\n      discountAmount: 0,\n      totalCount: 0,\n      list: [],\n      prescriptionNum: ''\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.prescriptionNum = options.prescriptionNum;\n    this.setData({\n      isIPX: getApp().globalData.isIPX\n    })\n    this.getGoods(this.data.prescriptionNum);\n  },\n  onShow: function (options) {\n    \n  },\n  // 跳转选择地址\n  toSelectAddress() {\n    let id = this.data.json_data.productInfo.addressId;\n\n    Taro.navigateTo({\n      url: `/pages/note/selectAddress/selectAddress?userAddress=${JSON.stringify({ id })}`\n    })\n  },\n  /**\n   * 获取活动返现规则\n   */\n  getSubsidyInfo() {\n    let drugstoreIdList = this.data.json_data.medicinesInfo.map(item => item.drugstoreId);\n    if (drugstoreIdList.length <= 0) return false;\n    ajax2('post', 'miniapp/marketing/getSkuListSubsidyInfo', { drugstoreIdList: drugstoreIdList }, res => {\n      if (res.data.code == 0 && res.data.result) {\n        this.setData({\n          ruleDetail: res.data.result\n        })\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n  ,\n  handleRule() {\n    this.setData({\n      ruleBoxShow: true\n    })\n  },\n  /**\n   * 获取商品list\n   */\n  getGoods(prescriptionNum) {\n    let cityCode = app.address_data.cityCode || '110000';\n    console.log(cityCode)\n    let data = { prescriptionNum, cityCode }\n    ajax('get', 'mimiapp/grouparea/confirmMedicine', data, res => {\n      if (res.data.code == 0 && res.data.result) {\n        let totalAmount = 0, totalCount = 0; // 初始金额\n        let invalidGoods = '';\n        let discountAmount = 0;\n        res.data.result.medicinesInfo.forEach(item => {\n          item.check = true;\n          item.medicinesList.forEach(item2 => {\n            //判断商品是否失效\n            if (!item2.failure) {\n              item2.check = true;\n              totalAmount += (item2.medicinesPrice * item2.quantity);\n              totalCount += item2.quantity\n            } else {\n              invalidGoods += `${item2.medicineCommonName};`\n            }\n          })\n        })\n        // 不是保险获取，优惠金额\n        if (res.data.result.inquiryPrescription.source != 5) {\n          res.data.result.productInfo.shoppingCartStr.forEach(item => {\n            item.check = true;\n            item.medicinesList.forEach(item2 => {\n              if (item2.activityInfo && item2.activityInfo.realDiscountCount > 0) {\n                discountAmount += item2.customPrice - item2.activityInfo.actPrice\n              }\n\n            })\n          })\n        }\n        if (invalidGoods) {\n          Taro.showModal({\n            title: '以下商品未找到有效库存',\n            content: invalidGoods,\n            showCancel: false,\n            confirmText: '我知道了',\n            confirmColor: '#09c1cb',\n            success(res) {\n              if (res.confirm) {\n                console.log('用户点击确定')\n              } else if (res.cancel) {\n                console.log('用户点击取消')\n              }\n            }\n          })\n        }\n        this.setData({\n          hjAmount: (totalAmount - discountAmount).toFixed(2),\n          json_data: res.data.result,\n          totalAmount: totalAmount.toFixed(2),\n          discountAmount: discountAmount,\n          shoppingCartStr: res.data.result.productInfo.shoppingCartStr,\n          totalCount,\n          inquiryChannel: res.data.result.inquiryPrescription.source == 5 ? 3 : 1\n        })\n        this.handleUpdate();\n        // 获取优惠活动\n        this.getSubsidyInfo();\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none',\n        })\n      }\n    }, function () {\n      Taro.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  // 总金额，商品件数，按钮状态\n  handleUpdate() {\n    let data = this.data.json_data;\n    let list = [];\n    let amount = 0;\n    let discountAmount = 0;\n    let totalCount = 0;\n    data.medicinesInfo.forEach((item,index) => {\n      item.medicinesList.forEach((item2, index2) => {\n        if (item2.check && !item2.failure) {\n          // 不是保险获取，优惠金额\n          if (this.data.json_data.inquiryPrescription.source != 5) {\n            let goods = this.data.shoppingCartStr[index].medicinesList[index2];\n            if (goods.activityInfo && goods.activityInfo.realDiscountCount > 0) {\n              discountAmount += (goods.customPrice - goods.activityInfo.actPrice) * (goods.activityInfo.realDiscountCount<item2.quantity?goods.activityInfo.realDiscountCount:item2.quantity);\n            }\n          }\n          list.push(item);//添加已选商品\n          amount += (item2.medicinesPrice * item2.quantity);//商品总金额\n          totalCount += item2.quantity;\n        }\n      })\n    })\n\n    this.setData({\n      list: list,\n      totalAmount: amount.toFixed(2),\n      discountAmount: discountAmount.toFixed(2),\n      hjAmount:(amount - discountAmount).toFixed(2),\n      totalCount\n    })\n  },\n  /**\n   * 多选框选择\n   * @param { Object } e\n   * * @param { number } drugstoreId 药店ID\n   * * @param { number } medicineId 药品ID\n   * * @param { string } flag 'all' 全选, 'durgStore' 药店范围内全选, 'medicine' 药店勾选\n   */\n  slectCheckBox(e) {\n    let { flag, id } = e.currentTarget.dataset;\n    let data = this.data.json_data;\n    switch (flag) {\n      case 'drugstore':\n        data.medicinesInfo.forEach(item => {\n          let typeVal = true;\n          if (item.check) typeVal = false;//布尔，点击前是选中状态则变更为未选中\n          item.check = typeVal\n          item.medicinesList.forEach(item2 => {\n            if (!item2.failure) item2.check = typeVal;\n          })\n        })\n        this.setData({\n          json_data: data\n        })\n        this.handleUpdate();\n      case 'medicine':\n        let hasCheckIndex = -1;\n        data.medicinesInfo.forEach((item, index) => {\n          item.check = false;\n          item.medicinesList.forEach(item2 => {\n            if (item2.medicineId == id) {\n              item2.check = item2.check ? item2.check = false : item2.check = true;\n            }\n            if (item2.check) hasCheckIndex = index;\n          })\n        })\n        if (hasCheckIndex >= 0) data.medicinesInfo[hasCheckIndex].check = true;\n        this.setData({\n          json_data: data\n        })\n        this.handleUpdate();\n        break;\n    }\n  },\n  toPlaceOrder() {\n    if (this.data.list.length == 0) return false; //已选list长度为0则不能提交\n    let data = this.data.json_data;\n    let orderDetailList = [];\n    data.medicinesInfo.forEach((drugStoreItem, index) => {\n      if (drugStoreItem.check) {\n        orderDetailList.push({\n          drugstoreId: drugStoreItem.drugstoreId,\n          skus: []\n        })\n        drugStoreItem.medicinesList.forEach(item => {\n          if (item.check) {\n            orderDetailList[index].skus.push({\n              skuId: item.medicineId,\n              skuNum: item.quantity\n            })\n          }\n        })\n      }\n    })\n    let inquiryPrescription = {\n      patientObj: {\n        patientName: data.inquiryPrescription.patientName,\n        id: data.inquiryPrescription.thirdUserId\n      },\n      prescriptionId: data.inquiryPrescription.pref,\n      inquirySource: data.source,\n      thirdChannel: data.thirdChannel\n    }\n    if(this.data.json_data.productInfo.addressId){\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/placeOrder/placeOrder?orderDetailList=${JSON.stringify(orderDetailList)}&inquiryPrescription=${JSON.stringify(inquiryPrescription)}&addressId=${JSON.stringify(this.data.userAddress.id?this.data.userAddress.id:this.data.json_data.productInfo.addressId)}`,\n      })\n    }else{\n      Taro.navigateTo({\n        url: `/pages/b2c/pages/placeOrder/placeOrder?orderDetailList=${JSON.stringify(orderDetailList)}&inquiryPrescription=${JSON.stringify(inquiryPrescription)}`,\n      })\n    }\n    \n  }\n};"},"convertDir/pages/requirementList/requirementList":{"json":{"shop-cart":"../../component/b2cShopCart/shopCart","missingData-view":"../../component/missingData/missingData","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxml":"\n  <view class=\"requirementList-auto-container\">   \n    <navBar title-text=\"需求清单\" :titleColor=\" '#111334' \" :showCapsule=\" false \"></navBar>\n    <view :class=\"[requirement-list,( isDjk ? 'djk-theme' : '' )]\" :style=\"{padding-bottom:  65 + tabbarHeight + 'px' }\" v-if=\" sess_key \">\n      <shop-cart class=\"shop-cart\"> \n        <view v-if=\" cartList.length \">   \n          <view class=\"adress-view\" v-if=\" userAddress.address \">  \n            <image src=\"../../images/require-list-adreess.png\"></image>\n            <text bindtap=\"toSelectAddress\">切换地址\n            </text>\n            <text class=\"adress-desc\">配送至: {{ (userAddress.selectNearyAddress || '')  + (userAddress.address || '') }}\n            </text>\n          </view>\n          <view class=\"container\">\n            <view class=\"drugstore-item\" v-for=\"(drugstore, drugstoreId) in  cartList \" wx:for-index=\"drugstoreIdx\" :key=\"drugstoreId\"> \n              <view class=\"header\">    \n                <checkbox :data-drugstore-id=\" drugstore.drugstoreId \" data-flag=\"drugstore\" catchtap=\"slectCheckBox\" :checked=\" drugstore.checked \"></checkbox>\n                <text :class=\"[drugstore-name,( drugstore.drugstoreStatus ? '' : 'sold-out-durgstore-name' )]\" bindtap=\"linkTodrugstore\" :data-drugstore-id=\" drugstore.drugstoreId \">{{ drugstore.drugstoreName }}\n                </text>\n                <image bindtap=\"linkTodrugstore\" :data-drugstore-id=\" drugstore.drugstoreId \" class=\"arrow_icon\" src=\"../../images/icon-arrow.png\"></image>\n                <view class=\"post-tooltip\" bindtap=\"linkTodrugstore\" v-if=\" drugstore.postTooltipLabel \" :data-drugstore-id=\" drugstore.drugstoreId \">\n                {{drugstore.postTooltipLabel}}\n            \n                </view>\n                <image class=\"post-tooltip-icon\" v-if=\" drugstore.postTooltipLabel && drugstore.postTooltipLabel !== '已免运费' \" src=\"../../images/icon-arrow.png\" bindtap=\"linkTodrugstore\" :data-drugstore-id=\" drugstore.drugstoreId \">{{ drugstore.drugstoreName }}\n                </image>\n              </view>\n              <view :class=\"[touch-item,( medicine.isTouchMove ? 'touch-move-active' : '' ),( (!drugstore.drugstoreStatus || medicine.failure) ? 'sold-out' : '' )]\" bindtouchstart=\"touchstart\" bindtouchmove=\"touchmove\" v-for=\"(medicine, medicinesId) in  drugstore.medicinesList \" wx:for-index=\"medicinesIdx\" :key=\"medicinesId\" :data-cur-drugstore-index=\" drugstoreIdx \" :data-cur-medicine-index=\" medicinesIdx \" :data-drugstore-id=\" drugstore.drugstoreId \" :data-medicine-id=\" medicine.medicineId \" bindtap=\"linkToMedicinesDetail\"> \n                <view class=\"content med-item\">  \n                  <view class=\"check-box\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku=\" medicine \" data-flag=\"medicine\" catchtap=\"slectCheckBox\">\n                    <checkbox :checked=\" medicine.checked \"></checkbox>\n                  </view>\n                  <view class=\"med-logo\">\n                    <view class=\"med-div\">  \n                      <view class=\"image-cover\"></view>\n                      <image lazy-load :src=\" medicine.medicineMainImage \"></image>\n                      <view class=\"cover\">\n                        <view class=\"circle\">已失效\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                  <view class=\"item-content\">   \n                    <view class=\"med-name\">    \n                      <text class=\"limit-flag\" v-if=\" medicine.limitPurchaseAct.limitNum \">{{ \"\b限\" + medicine.limitPurchaseAct.limitNum + \"件\" }}\n                      </text>\n                      <text v-if=\" medicine.medicinesIsPrescribe \" class=\"prescription-flag\">处方药\n                      </text>\n                      <text class=\"medicines-mame\">{{ medicine.medicineName }}\n                      </text>\n                      <text class=\"common-name\">{{ medicine.medicineCommonName }}\n                      </text>\n                      <text class=\"product_spec\">{{ medicine.medicineSpecifications }}\n                      </text>\n                    </view>\n                    <view class=\"tag-list\" v-if=\" drugstore.drugstoreStatus && !medicine.failure && medicine.activityLabel && medicine.activityLabel.length \">\n                      <text v-for=\"(label, labelKey) in  medicine.activityLabel \" wx:for-index=\"labelInx\" :key=\"labelKey\">{{ label }}\n                      </text>\n                    </view>\n                    <text class=\"act-number-desc\">{{ medicine.actNumDesc }}\n                    </text>\n                    <view class=\"med-footer\">      \n                      <text class=\"price-character\">¥\n                      </text>\n                      <text class=\"price failure-medicine\">{{ medicine.customPrice }}\n                      </text>\n                      <text class=\"price\" v-if=\"  medicine.actNumDesc !== '活动商品购买数量已达上限' \">{{  medicine.activityInfo.actPrice || medicine.customPrice }}\n                      </text>\n                      <text class=\"price\" v-if=\"  medicine.actNumDesc == '活动商品购买数量已达上限' \">{{ medicine.customPrice }}\n                      </text>\n                      <text class=\"underline-price\" v-if=\" medicine.activityInfo.actPrice \">{{ '¥' + medicine.customPrice }}\n                      </text>\n                      <text class=\"med-num\">{{ \"x\" + medicine.skuNum }}\n                      </text>\n                      <view class=\"cart_button custom-theme\">  \n                        <view :class=\"[button,less,( medicine.skuNum > 1 ? '' : 'gray-btn' )]\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku-id=\" medicine.medicineId \" :data-sku-num=\" medicine.skuNum \" catchtap=\"removeGoods\">\n                          <view>-\n                          </view>\n                        </view>\n                        <view class=\"text\">{{ medicine.skuNum }}\n                        </view>\n                        <view class=\"button\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku-id=\" medicine.medicineId \" :data-sku-stock=\" medicine.medicinesDrugstoreStock \" :data-sku-limit=\" medicine.limitPurchaseAct.surplusLimitPurchaseNum \" catchtap=\"addToCart\">\n                          <view>+\n                          </view>\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n                <view class=\"del\" catchtap=\"removeGoods\" :data-drugstore-id=\" drugstore.drugstoreId \" :data-sku-id=\" medicine.medicineId \" data-sku-rm-num=\"all\" data-show-toast=\"true\" :data-index=\"index\">删除\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"rule-cell\" :style=\"{bottom:  tabbarHeight + 60 px}\" bindtap=\"handleRule\" v-if=\" ruleDetail.userSubsidyRule \"> \n            <text>{{ ruleDetail.userSubsidyRule }}\n            </text>\n            <image mode=\"scaleToFill\" src=\"../../images/icon-question-mark.png\"></image>\n          </view>\n          <view class=\"footer-bar\" :style=\"{bottom:  tabbarHeight px}\">  \n            <label class=\"select-all\" data-flag=\"all\" bindtap=\"slectCheckBox\">全选\n        \n              <checkbox :checked=\"selectedAll\"></checkbox>\n            </label>\n            <view class=\"price-area\"> \n              <view class=\"top-line\">  \n                <text class=\"price-character\">¥\n                </text>\n                <text class=\"price\">{{  (priceInfo.sumPrice - priceInfo.totalDiscountAmount) / 1000 }}\n                </text>\n                <text class=\"shipping\">不含运费\n                </text>\n              </view>\n              <view class=\"bottom-line\">商品金额 ¥{{ priceInfo.sumPrice / 1000 }} 优惠 ¥{{ priceInfo.totalDiscountAmount / 1000 }} \n              </view>\n            </view>\n            <button :class=\"[( addUpNum ? 'theme-bg' : 'gray-button' )]\" bindtap=\"submit\">\n          {{ addUpNum ? '提交需求(' + addUpNum + ')' : '提交需求' }}\n        \n            </button>\n          </view>\n        </view>\n        <block v-if=\" defaultType \">\n          <missingData-view zhi=\"new1\" textval=\"清单中暂无商品\" textval2=\"继续逛逛~\" buttonText=\"去购买\" bind:action=\"toHome\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n        </block>\n      </shop-cart>\n    </view>\n    <block class=\"not-login-view\" v-if=\" !sess_key \">\n      <missingData-view zhi=\"new1\" textval=\"清单中暂无商品\" textval2=\"登录后查看购物车\" :imageUrl=\" url_link + 'images/empty-log.png' \" bind:action=\"toLogin\" buttonText=\"立即登录\"></missingData-view>\n    </block>\n    <halfScreenDialog :show=\" ruleBoxShow \" title=\"规则内容\" type=\"2\" btnText=\"我知道了\">\n      <view slot=\"desc\">{{ ruleDetail.userSubsidyDoc }}\n      </view>\n    </halfScreenDialog>\n  </view>","wxss":"@import '../../common/tableView.wxss';\n\npage { \n  overflow-y: auto;\n  background-color: #f5f7fa;\n}\n\n.requirement-list {\n  padding-bottom: 130rpx;\n  overflow-y: auto;\n}\n\n/* 左滑卡片list */\n.touch-item {\n  background: #fff;\n  font-size: 26rpx;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  overflow: hidden;\n  padding-bottom: 10rpx;\n}\n\n.del {\n  background-color: orangered;\n  width: 120rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  -webkit-transform: translateX(240rpx);\n  transform: translateX(240rpx);\n  -webkit-transition: all 0.4s;\n  transition: all 0.4s;\n  border:1rpx solid #ccc;\n}\n\n.touch-move-active .med-item,.touch-move-active .del {\n  -webkit-transform: translateX(0);\n  transform: translateX(0);\n}\n\n.drugstore-item {\n  width: calc(100vw - 24rpx - 24rpx);\n  margin: 0 auto;\n  margin-bottom: 20rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n\n.drugstore-item .header {\n  display: flex;\n  align-items: center;\n  height: 72rpx;\n  line-height: 72rpx;\n  padding: 0 24rpx;\n  background: #ffffff;\n  border-bottom: 1rpx solid #EFF0F5;\n}\n\n.drugstore-item .header .drugstore-name {\n  display: inline-block;\n  max-width: 240rpx;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  font-weight: 700;\n  color: #111334;\n  font-size: 28rpx;\n}\n\n.drugstore-item .header checkbox {\n  margin-right: 20rpx;\n  position: relative;\n  top: -4rpx;\n}\n\n.drugstore-item .header .arrow_icon {\n  width: 28rpx;\n  height: 28rpx;\n  margin-left: 2rpx;\n}\n\n.drugstore-item .header .post-tooltip {\n  color: #666883;\n  flex: 1;\n  text-align: right;\n  font-size: 24rpx;\n}\n\n.drugstore-item .parcels-icon {\n  width: 26rpx;\n  height: 26rpx;\n  vertical-align: middle;\n}\n\n.drugstore-item .post-tooltip-icon {\n  /* float: right; */\n  /* position: relative;\n  top: 24rpx;\n  left: 8rpx; */\n  width: 28rpx;\n  height: 28rpx;\n}\n\n/* 商品item */\n.med-item {\n  display: flex;\n  /* height: 288rpx; */\n  padding: 0 24rpx;\n  width: 100%;\n  line-height: 40rpx;\n  margin-right: 0;\n  -webkit-transition: all 0.4s;\n  transition: all 0.4s;\n  -webkit-transform: translateX(240rpx);\n  transform: translateX(240rpx);\n  margin-left: -240rpx;\n}\n\n.med-item .check-box {\n  width: 34rpx;\n  padding-right: 24rpx;\n  padding-top: calc(24rpx + (150rpx / 2) - 22rpx);\n}\n\ncheckbox {\n  width: 34rpx;\n}\n\n.med-item .failure-medicine {\n  display: none;\n}\n\n.med-item .med-logo {\n  padding-top: 24rpx;\n  width: 150rpx;\n  position: relative;\n}\n\n.med-item .med-logo image {\n  width: 150rpx;\n  height: 150rpx;\n}\n\n.med-item .med-logo .image-cover {\n  position: absolute !important;\n  top: 0rpx;\n  width: 150rpx;\n  height: 150rpx;\n  background: rgba(5, 13, 143, .02);\n  border-radius: 8rpx;\n}\n\n.med-item .med-logo .cover {\n  display: none;\n}\n\n.med-item .item-content {\n  position: relative;\n  flex: 1;\n  padding: 24rpx 48rpx 14rpx 24rpx;\n  word-break: break-all;\n}\n\n.med-item .item-content .med-name {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 30rpx;\n  font-weight: 500;\n  color: #111334;\n}\n\n.med-item .item-content .med-name .limit-flag, .med-item .item-content .med-name .prescription-flag {\n  position: relative;\n  top: -4rpx;\n  margin-right: 4rpx;\n  display: inline-block;\n  padding: 0rpx 8rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  text-align: center;\n  background: #F93A4A;\n  border-radius: 4rpx;\n  color: #FFFFFF;\n  font-size: 22rpx;\n  font-weight: 400;\n}\n\n.med-item .item-content .med-name .common-name, .med-item .item-content .med-name .medicines-mame {\n  margin-right: 8rpx;\n}\n\n.med-item .item-content .tag-list {\n  margin-top: 12rpx;\n}\n\n.med-item .item-content .tag-list text {\n  display: inline-block;\n  padding: 0rpx 8rpx;\n  margin-right: 10rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  text-align: center;\n  background: #FFEEEF;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  font-weight: 400;\n  color: #f93a4a;\n}\n\n.med-footer .price-character {\n  color: #F93A4A;\n  font-size: 28rpx;\n  font-weight: 500;\n}\n\n.med-footer {\n  /* position: absolute;\n  bottom: 30rpx; */\n  width: 100%;\n  margin-top: 12rpx;\n}\n\n/* .more-top {\n  position: absolute;\n  bottom: 24rpx;\n}\n\n.more-top .custom-theme {\n  left: -72rpx;\n} */\n\n.med-footer .med-num {\n  display: none;\n}\n\n.med-footer .price {\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  color: #f93a4a;\n  line-height: 40rpx;\n}\n\n.med-footer .underline-price {\n  font-family: PingFangSC, PingFangSC-Regular;\n  margin-left: 12rpx;\n  color: #9D9FB8;\n  font-size: 24rpx;\n  font-weight: 400;\n  text-decoration: line-through;\n}\n\n/* .med-footer .cart_button {\n  display: inline-block;\n  margin-left: 56rpx;\n} */\n\n/* 公用加减按钮样式 */\n\n.cart_button {\n  float: right;\n  /* margin-left: 52rpx; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  top: -8rpx;\n}\n\n.cart_button .text {\n  padding: 0 9rpx;\n  font-size: 26rpx;\n  color: #111334;\n}\n\n.cart_button .button {\n  padding: 10rpx;\n}\n\n.cart_button .button view {\n  width: 38rpx;\n  height: 38rpx;\n  line-height: 32rpx;\n  border: none;\n  text-align: center;\n  color: #111334;\n  font-size: 40rpx;\n}\n\n.cart_button .less view {\n  background: none;\n  box-sizing: border-box;\n  line-height: 31rpx;\n}\n\n/* 灰色按钮 */\n.cart_button .gray-btn view {\n  color: #C9CFCF !important;\n  background: #fff !important;\n}\n\n.rule-cell {\n  color: #FF6010;\n  font-size: 26rpx;\n  background: #FFF6D5;\n  padding: 10rpx 20rpx;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  width: 100%;\n  justify-content: center;\n}\n\n.rule-cell image {\n  width: 36rpx;\n  height: 36rpx;\n  flex-shrink: 0;\n}\n\n.footer-bar {\n  display: flex;\n  box-sizing: border-box;\n  padding: 0 24rpx;\n  width: 100%;\n  height: 120rpx;\n  line-height: 120rpx;\n  position: fixed;\n  background: #FFFFFF;\n  border: 1rpx solid #F2F2F2;\n  border-bottom: none;\n}\n\n.footer-bar .select-all {\n  font-family: PingFangSC, PingFangSC-Medium;\n  width: 102rpx;\n  height: 120rpx;\n  line-height: 120rpx;\n  font-size: 24rpx;\n  font-weight: 700;\n  color: #333333;\n}\n\n.footer-bar .select-all checkbox {\n  width: 36rpx;\n  margin-right: 12rpx;\n  position: relative;\n  top: -2rpx;\n}\n\n.footer-bar .price-area {\n  flex: 1;\n  margin-left: 6rpx;\n}\n\n.footer-bar .price-area .top-line {\n  margin-top: -15rpx;\n}\n\n.footer-bar .price-area .bottom-line {\n  font-size: 22rpx;\n  font-weight: 400;\n  color: #9AA0B5;\n}\n\n.footer-bar .price-area view {\n  height: 40rpx;\n}\n\n.footer-bar .price-area .shipping {\n  margin-left: 10rpx;\n  font-size: 20rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #9AA0B5;\n}\n\n.footer-bar .price-area .price-character {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.footer-bar .price-area .price {\n  font-size: 40rpx;\n  font-weight: 600;\n  color: #F93A4A;\n}\n\n.footer-bar button {\n  float: right;\n  margin: 0;\n  margin-top: 23rpx;\n  padding: 0 20rpx;\n  height: 74rpx;\n  border-radius: 40rpx;\n  font-size: 30rpx;\n  font-weight: 700;\n  text-align: center;\n  color: #ffffff;\n  line-height: 74rpx;\n}\n\n/* 售罄卡片 */\n.sold-out-durgstore-name {\n  color: #999999;\n}\n\n.sold-out .med-item .cart_button {\n  visibility: hidden;\n}\n\n.sold-out .med-item .med-name {\n  color: #C5C6D5;\n  font-weight: 400 !important;\n}\n\n.sold-out .limit-flag {\n  display: none;\n}\n\n\n.sold-out .med-item .med-footer .failure-medicine {\n  display: inline-block !important;\n  color: #C5C6D5 !important;\n}\n\n.sold-out .med-item .med-footer .price-character {\n  color: #C5C6D5 !important;\n}\n\n.sold-out .med-item .med-footer .price, .sold-out .med-item .med-footer .underline-price {\n  display: none;\n}\n\n.sold-out .med-item .med-footer .med-num {\n  display: inline-block;\n  font-size: 24rpx;\n  font-weight: 400;\n  margin-left: 15rpx;\n  color: #C5C6D5;\n}\n\n.sold-out .med-item .med-logo view {\n  position: relative;\n}\n\n.med-item .med-logo .med-div {\n  width: 150rpx;\n  height: 150rpx;\n  position: relative;\n}\n\n.sold-out .med-item .med-logo .cover {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 150rpx;\n  height: 150rpx;\n  background: rgba(0, 0, 0, .25);\n  border-radius: 8rpx;\n}\n\n.sold-out .med-item .med-logo .cover .circle {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 120rpx;\n  height: 120rpx;\n  color: #fff;\n  font-size: 30rpx;\n  font-weight: 500;\n}\n\n.act-number-desc {\n  color: #9d9fb8;\n  font-size: 20rpx;\n  font-weight: 400;\n  margin-top: 12rpx;\n}\n\n.gray-button {\n  color: #fff;\n  background: #9d9fb8 !important;\n}\n\n.not-login-view, .empty-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color:#fff;\n}\n\n.not-login-view .missing-view, .empty-page .missing-view {\n  flex: 1;\n}\n\n/* 大健康主题 */\n.djk-theme .cart_button .less view {\n  border: 1px solid #00B955;\n  color: #fff;\n}\n\n/* 加减号样式优化 */\n.custom-theme {\n  border: 1rpx solid #e7eaec;\n  border-radius: 25rpx;\n  height: 50rpx;\n  box-sizing: border-box;\n  position: relative;\n  top: -3rpx;\n}\n\n/* 切换地址 */\n.adress-view {\n  margin-bottom: 20rpx;\n  height: 70rpx;\n  line-height: 70rpx;\n  background: #fff;\n  line-height: 70rpx;\n  padding: 0 24rpx;\n  color: #41435d;\n  font-size: 24rpx;\n}\n\n.adress-view text:nth-child(1) {\n  float: left;\n}\n\n.adress-view text:nth-child(2) {\n  float: right;\n}\n\n.adress-view .adress-desc {\n  display: inline-block;\n  width: calc(100vw - 24rpx - 24rpx - 32rpx - 12rpx - 140rpx);\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n}\n\n.adress-view image {\n  float: left;\n  width: 32rpx;\n  height: 32rpx;\n  vertical-align: middle;\n  margin-right: 12rpx;\n  position: relative;\n  top: 10px;\n}\n._bottom{\n  padding-bottom: 22rpx;\n}","js":"// pages/b2c/pages/requirements/requirementList.js\n\n// 请求的接口\nlet apiUrl = {\n  shoppingCart: 'mimiapp/homepage/shoppingCart',\n  subsidyInfo: 'miniapp/marketing/getSkuListSubsidyInfo'\n}\n\nimport {\n  ajax2,\n  getMedicineCateNum,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    defaultType:false,\n    url_link: cdnStaticResourceUrl,\n    tabbarHeight: null,\n    isDjk: getApp().globalData.src_whyb ? true : false,\n    sess_key: null,\n    startX: 0, //开始坐标\n    startY: 0,\n    cartList: [],\n    removeBtnFlag: null,\n    selectedAll: false, // 默认不全部\n    addUpNum: null, // 商品总数\n    priceInfo: {\n      actSumPrice: 0, // 活动总金额\n      sumPrice: 0, // 商品总金额\n      totalDiscountAmount: 0, // 优惠总金额 \n      sumDrugstoreExpressCost: 0 // 运费总金额\n    },\n    userAddress: {\n    },\n    isLoading: false,\n    isIPX: false,\n    ruleDetail: '',\n    ruleBoxShow: false\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function () {\n    this.setData({\n      isIPX: getApp().globalData.isIPX\n    })\n  },\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    let { id, city } = this.data.userAddress;\n    console.log('onshows-torge',wx.getStorageSync('tabbarHeight'))\n    console.log('onshow-app',getApp().globalData.tabbarHeight)\n    this.setData({\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      sess_key: getApp().globalData.sess_key,\n      tabbarHeight: wx.getStorageSync('tabbarHeight') || getApp().globalData.tabbarHeight || 82,\n      // 切换地址回来重新赋值\n      userAddress: {\n        ...this.data.userAddress,\n        cityCode: city || 0,\n        addressId: id,\n      }\n    }, function() {\n      this.shopCart = this.selectComponent(\".shop-cart\");\n      this.leftSwiperCartList = this.selectAllComponents(\".left-swiper-cart\");\n  \n      // 判断是否登录\n      if (this.data.sess_key) {\n        this.getShopCart();\n        this.getSubsidyInfo();\n      } \n    }) \n\n    //自定义底部导航，需要在当前页面修改selected的值 否则无效\n    if (typeof this.getTabBar === 'function' && this.getTabBar()) {\n      let cateNum = getMedicineCateNum();\n\n      this.getTabBar().setData({\n        selected: 2,  //这里指的是该页面对应在tabBar的索引\n        brageNum: cateNum || 0\n      })\n    }\n    getApp().globalData.burySpotSDK.track(`sy-fjyd-more`);\n  },\n  // 重新计算角标\n  setBrageNum() {\n    if (typeof this.getTabBar === 'function' && this.getTabBar()) {\n      let cateNum = getMedicineCateNum();\n\n      this.getTabBar().setData({\n        brageNum: cateNum || 0\n      })\n    }\n  },\n  toLogin() {\n    wx.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  /**\n   * @description 跳转药店主页\n   * @param { Object } { 药店id }\n   * @returns void\n   */\n  linkTodrugstore(e) {\n    let { drugstoreId } = e.currentTarget.dataset;\n\n    getApp().globalData.burySpotSDK.track('action_requirementsList_shopClick', { \n      drugstoreId,\n      cate: 'b2c'\n    });\n\n    wx.navigateTo({\n      url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${ drugstoreId }`\n    })\n  },\n  /**\n   * @description 跳转商品详情\n   * @param { Object } { 药店id, 商品id }\n   * @returns void\n   */\n  linkToMedicinesDetail(e) {\n    let { drugstoreId, medicineId } = e.currentTarget.dataset;\n\n    getApp().globalData.burySpotSDK.track('action_requirementsList_goodsClick', { \n      drugstoreId,\n      medicineId,\n      cate: 'b2c'\n    });\n\n    wx.navigateTo({\n      url: `/pages/b2c/pages/goodsDetail/goodsDetail?drugStoreId=${ drugstoreId }&goodsId=${ medicineId }`\n    })\n  },\n  /**\n   * @description 获取购物车列表\n   * @returns void\n   */\n  getShopCart() {\n    wx.showLoading({\n      title: '加载中',\n      mask: true\n    })\n    const listFromStorage = wx.getStorageSync('b2cCart') || [];\n    \n    ajax2('get', apiUrl.shoppingCart, { \n      shoppingCartStr: JSON.stringify(listFromStorage),\n      cityCode: this.data.userAddress.cityCode\n    }, res => {\n      wx.hideLoading();\n      if (res.data.code == 0 && res.data.result) { \n        let { address, addressId, cityCode, shoppingCartStr: cartList } = res.data.result;\n\n        // 首次进入页面 从接口拿地址默认值\n        if (this.data.userAddress.cityCode == 0) {\n          this.setData({\n            userAddress: { address, addressId, cityCode }\n          });\n        }\n\n        this.calculationCartList(cartList);\n      } else {\n        this.setData({\n          cartList: [],\n          defaultType:true // 缺省判断标识，catList没有数据则为true，否则false\n        });\n\n        this.setBrageNum();\n      }\n    }, function() {\n      wx.hideLoading();\n      wx.showToast({\n        title: '请求失败',\n        icon: 'none',\n      })\n    })\n  },\n  /**\n   * 根据缓存重新组织购物车数据 增加 checked num 等字段\n   * @param { Array } listFormServer 服务端返回的购物车数据\n   * @param { Array } listFromStorage 本地存储的购物车数据 包含商品数量 是否勾选等字段\n   * @returns { Array } 糅合后的购物车数据\n   */\n  calculationCartList(listFormServer) {\n    let listFromStorage = wx.getStorageSync('b2cCart') || [];\n    let totalArray = [];\n    let priceInfo = {\n      actSumPrice: 0,\n      sumPrice: 0,\n      totalDiscountAmount: 0, // 优惠总金额\n      sumDrugstoreExpressCost: 0 // 运费总金额\n    }\n\n    listFormServer.forEach(storeInServer => {\n      listFromStorage.forEach((storeInStorage, storeKeyInStorage) => {\n        // 同步药店数量\n        if (storeInStorage.drugstoreId == storeInServer.drugstoreId) {\n          // 共同药店\n          storeInServer.updateTime = storeInStorage.updateTime; // 同步更新时间\n          storeInServer.checked = storeInStorage.checked; // 同步勾选状态\n          \n          // 同一家药店下都存在的商品\n          let skus = [];\n          \n          storeInStorage.skus.forEach((skuInStorage, skuKeyInStorage) => {\n            const curSku = storeInServer.medicinesList.find(item => item.medicineId == skuInStorage.skuId); // 服务端与客户端缓存的共同商品\n\n            if (curSku) {\n              if (skuInStorage.skuNum) curSku.skuNum = skuInStorage.skuNum; // 同步number\n              if (skuInStorage.updateTime) curSku.updateTime = skuInStorage.updateTime; // 同步更新时间\n              curSku.checked = skuInStorage.checked ? true : false; // 同步勾选状态\n\n              if (curSku.checked) { // 选中的商品 计算价格 设置额外展示属性\n                priceInfo.sumPrice += (curSku.customPrice * 1000 * curSku.skuNum);\n\n                // 购物车购买目标数量超出享受优惠金额的活动件数 提示 包含 xx 件活动商品\n                if (curSku.activityInfo && curSku.activityInfo.realDiscountCount && curSku.activityInfo.realDiscountCount < curSku.skuNum) {\n                  curSku.actNumDesc = `包含${ curSku.activityInfo.realDiscountCount }件活动商品`;\n                } else if (curSku.activityInfo && curSku.activityInfo.realDiscountCount == 0) {\n                  // 如果有活动 且可享受优惠价活动商品数量为0（跟限购没有关系) 展示活动商品购买数量已达上限\n                  curSku.actNumDesc = '活动商品购买数量已达上限';\n                } else {\n                  curSku.actNumDesc = '';\n                }\n\n                // 计算优惠价格 购物车数量 对比 可享受优惠券的商品数量\n                if (curSku.activityInfo && curSku.activityInfo.realDiscountCount) {\n                  let num = (curSku.skuNum > curSku.activityInfo.realDiscountCount) ? curSku.activityInfo.realDiscountCount : curSku.skuNum;\n\n                  // 优惠金额 = 满足优惠条件的活动商品件数 * 价格差\n                  priceInfo.totalDiscountAmount +=  ((curSku.customPrice * 1000)  - (curSku.activityInfo.actPrice * 1000)) * num;\n                }\n              } \n\n              skus.push(curSku);\n            } else {\n              // 如果服务端拉下来的数据不包含药店下某药品 说明店铺和该药品解除绑定 则购物车缓存同步删除此商品\n              storeInStorage.skus.splice(skuKeyInStorage, 1);\n\n              // 如果药店下商品为空 缓存 服务端列表都清除该药店\n              !storeInStorage.skus.length && listFromStorage.splice(storeKeyInStorage, 1);\n            }\n          });\n\n          // skus更新完 排序\n          skus.sort((v1, v2) => v2.updateTime - v1.updateTime);\n\n          let unSelectedSkuList = skus.filter(sku => !sku.checked);\n\n          // 药店下商品全部未勾选 则不展示运费提示\n          if (skus.length == unSelectedSkuList.length) {\n            storeInServer.postTooltipLabel = null;\n          } else {\n            // 计算当前药店下商品价格总数 给出邮费提示label\n            storeInServer.postTooltipLabel = this.getPostMsg(storeInServer, skus);\n            \n            // 计算当前药店是否免运费 计算当前已勾选清单需应付运费\n            if (storeInServer.postTooltipLabel !== '已免运费') {\n              priceInfo.sumDrugstoreExpressCost =  priceInfo.sumDrugstoreExpressCost + storeInServer.drugstoreExpressCost * 1000;\n            }\n          }\n\n          storeInServer.medicinesList = skus;\n\n          // 塞进目标数组\n          storeInServer.medicinesList.length && totalArray.push(storeInServer);\n\n          // 糅合好的药店列表数据排序\n          totalArray.sort((v1, v2) => v2.updateTime - v1.updateTime);\n        }\n      });\n    });\n\n    // 是否非全选 药店全选则底部全选勾上\n    let hasNotChecked = totalArray.find(item => !item.checked);\n\n    // 更新缓存\n    wx.setStorageSync('b2cCart', listFromStorage);\n\n    // 设置角标\n    this.setBrageNum();\n    \n    // 计算商品总数\n    let addUpNum = this.shopCart.getCurMedicineNum();\n\n    this.setData({\n      cartList: totalArray,  \n      defaultType: totalArray.length > 0 ? false : true, // 缺省标识\n      selectedAll: hasNotChecked ? false : true,\n      addUpNum,\n      priceInfo\n    });\n  },\n  /**\n   * @description 加入/批量加入购物车\n   * @returns void\n   */\n  addToCart: function(e) {\n    let { drugstoreId, skuId, skuStock, skuLimit } = e.currentTarget.dataset;\n\n    this.shopCart.addGoods({  // 携带来源字段 此处加购不更新排序\n      drugstoreId,\n      skuId,\n      stock: skuStock,\n      surplusLimitPurchaseNum: skuLimit, \n      source: 'notImpactRankingAct'\n    });\n\n    // 重新计算购物车     \n    this.calculationCartList(this.data.cartList);\n  },\n  /**\n   * @description 购物车删除商品\n   * @returns void\n   */\n  removeGoods: function(e) {\n    let { drugstoreId, skuId, skuNum, skuRmNum, showToast } = e.currentTarget.dataset;\n    \n    if (new Date().getTime() - this.data.removeBtnFlag < 200) return false;\n\n    this.data.removeBtnFlag = new Date().getTime();\n\n    if (skuNum == 1 && skuRmNum !== 'all') {\n      wx.showToast({\n        title: '不能再减啦',\n        icon: 'none',\n        mask: true\n      });\n      return;\n    }\n\n    this.shopCart.removeGoods(drugstoreId, skuId, skuRmNum, 'notImpactRankingAct', true); // 调用购物车组件的方法\n    \n    // 重新计算购物车     \n    this.calculationCartList(this.data.cartList);\n    showToast && wx.showToast({\n      title: '删除成功',\n      icon: 'none'\n    });\n  },\n  /**\n   * @description 清空购物车\n   * @returns void\n   */\n  clearCart() {\n    this.shopCart.clearCart();\n  },\n  /**\n   * @description 重置卡片位置\n   * @returns void\n   */\n  // resetSwiperCart() {\n  //   this.leftSwiperCartList.forEach(card => card.reset());\n  // },\n/**\n   * 计算药店下运费总数 给出邮费提示label\n   * @param { Object } store 当前要处理的药店 \n   * @param { Array }  skus 当前药店内已勾选商品列表\n   * @returns { String } 店铺包邮计算结果提示文案\n   */\n  getPostMsg(store, skus) {\n    // totalMoney 店铺满包邮金额\n    // hasConditionExpress 是否开启满包邮 0 或 1\n    // drugstoreExpressCost 店铺默认运费\n    let { drugstorePostage: totalMoney, hasConditionExpress, drugstoreExpressCost } = store;\n    let sum = 0; // 店内勾选商品总的原价\n    let couponSum = 0; // 店内勾选商品的优惠的总价\n    let realPay = 0; // 店内实付金额\n    let returnStr = '';\n\n    // 运费为0展示 '已免运费'\n    if (drugstoreExpressCost == 0) return '已免运费';\n  \n    // 未勾选店铺满包邮且运费不为0 不显示文案\n    if (hasConditionExpress == 0) return null;\n\n    // 运费不为0 勾选满包邮 满包邮金额为0\n    if (drugstoreExpressCost !== 0 && hasConditionExpress == 1 && totalMoney == 0) return '已免运费';\n\n    // 运费不为0 而且勾选了满包邮 而且满包邮金额不为0 进行以下对比\n    skus.forEach(sku => {\n      let curPirce = sku.customPrice; // 单个商品实付价格\n\n      if (sku.checked) {\n        sum += curPirce * 1000 * sku.skuNum;\n      }\n\n      // 有可用优惠 计算店内总优惠价格\n      if (sku.activityInfo && sku.activityInfo.realDiscountCount) {\n        let couponNum = (sku.skuNum > sku.activityInfo.realDiscountCount) ? sku.activityInfo.realDiscountCount : sku.skuNum;\n\n        // 优惠金额 = 满足优惠条件的活动商品件数 * 价格差\n        couponSum +=  ((sku.customPrice * 1000)  - (sku.activityInfo.actPrice * 1000)) * couponNum;\n      }\n    });\n\n    realPay = sum - couponSum;\n\n    returnStr = (realPay / 1000) >= totalMoney ? '已免运费' : `还差${  (totalMoney * 1000 - realPay) / 1000  }元免运费, 去凑单`;\n\n    return returnStr;\n  },\n  /**\n   * 重置所有卡片\n   * @returns void\n   */\n  reset() {\n    this.data.cartList.forEach(function (v, i) {\n      if (v.isTouchMove){\n        //只操作为true的\n        v.isTouchMove = false;\n      }\n    })\n\n    this.setData({\n      cartList: this.data.cartList,\n      defaultType: this.data.cartList.length > 0 ? false : true, // 缺省标识\n    })\n  },\n  //手指触摸动作开始 记录起点X坐标\n  touchstart: function (e) {\n    //开始触摸时 重置所有删除\n    this.data.cartList.forEach(function (drugstore) {\n      const medicinesList = drugstore.medicinesList;\n\n      medicinesList.length && medicinesList.forEach(function (medicine) {\n        medicine.isTouchMove = false; // 重置所有滑片\n      });\n    })\n  \n    this.setData({\n      startX: e.changedTouches[0].clientX,\n      startY: e.changedTouches[0].clientY,\n      cartList: this.data.cartList,\n      defaultType:this.data.cartList.length > 0 ? false : true // 缺省判断标识，catList没有数据则为true，否则false\n    })\n  },\n  // 滑动事件处理\n  touchmove: function (e) {\n    let that = this,\n    { curDrugstoreIndex, curMedicineIndex } = e.currentTarget.dataset,// 当前药店索引 药品\n    startX = that.data.startX,// 开始X坐标\n    startY = that.data.startY,// 开始Y坐标\n    touchMoveX = e.changedTouches[0].clientX,// 滑动变化坐标\n    touchMoveY = e.changedTouches[0].clientY,// 滑动变化坐标\n    // 获取滑动角度\n    angle = that.angle({ X: startX, Y: startY }, { X: touchMoveX, Y: touchMoveY });\n\n    // 滑动超过30度角 return\n    if (Math.abs(angle) > 30) return;\n\n    this.data.cartList.forEach(function (drugstore, storeIdx) {\n      const medicinesList = drugstore.medicinesList;\n\n      medicinesList.length && medicinesList.forEach(function (medicine, medIdx) {\n        medicine.isTouchMove = false; // 重置所有滑片\n        \n        // 当前操作商品卡片\n        if ((storeIdx == curDrugstoreIndex) && (medIdx == curMedicineIndex)) {\n          // 左滑拉开卡片 右滑收起卡片\n          medicine.isTouchMove = touchMoveX > startX ? false : true;\n        }\n      });\n    })\n\n    //更新数据\n    that.setData({\n      cartList: that.data.cartList,\n      defaultType: that.data.cartList.length > 0 ? false : true // 缺省判断标识，catList没有数据则为true，否则false\n    })\n  },\n  /**\n  * 计算滑动角度\n  * @param {Object} start 起点坐标\n  * @param {Object} end 终点坐标\n  */\n  angle: function (start, end) {\n    var _X = end.X - start.X,\n    _Y = end.Y - start.Y\n    //返回角度 /Math.atan()返回数字的反正切值\n    return 360 * Math.atan(_Y / _X) / (2 * Math.PI);\n  },\n  /**\n   * 多选框选择\n   * @param { Object } e\n   * * @param { number } drugstoreId 药店ID\n   * * @param { number } medicineId 药品ID\n   * * @param { string } flag 'all' 全选, 'durgStore' 药店范围内全选, 'medicine' 药店勾选\n   */\n  slectCheckBox(e) {\n    let { drugstoreId, flag, sku } = e.currentTarget.dataset;\n    let listFromStorage = wx.getStorageSync('b2cCart') || [];\n    let curStore;\n    let eventDesc;\n    \n    switch(flag) {\n      case 'all':\n        // 全部选中\n        listFromStorage.forEach(list => {\n          list.checked = !this.data.selectedAll;\n\n          list.skus.forEach(item => {\n            item.checked = !this.data.selectedAll;\n          });\n        });\n        break;\n      case 'drugstore':\n        // 药店范围内全选\n        curStore = listFromStorage.find(store => store.drugstoreId == drugstoreId);\n\n        curStore.checked = !curStore.checked;\n        curStore.skus.forEach(item => {\n          item.checked = curStore.checked;\n        });\n\n        eventDesc = curStore.checked ? 'action_requirementsList_shopSelectClick' : 'action_requirementsList_shopCancleSelectClick'; \n\n        getApp().globalData.burySpotSDK.track(eventDesc, { \n          drugstoreId: curStore.drugstoreId,\n          cate: 'b2c'\n         });\n        break;\n      case 'medicine':\n        // 商品勾选\n        curStore = listFromStorage.find(store => store.drugstoreId == drugstoreId);\n        const curMedicineIndex = curStore.skus.findIndex(item => item.skuId == sku.medicineId);\n\n        curStore.skus[curMedicineIndex].checked = !sku.checked;\n\n        // 是否全选药店\n        const hasNotCheckedSku = curStore.skus.find(item => !item.checked);\n\n        curStore.checked = hasNotCheckedSku ? false : true;\n\n        // 埋点\n        eventDesc = curStore.skus[curMedicineIndex].checked ? 'action_requirementsList_goodsSelectClick' : 'action_requirementsList_goodsCancleSelectClick';\n\n        getApp().globalData.burySpotSDK.track(eventDesc, { \n          drugstoreId: curStore.drugstoreId,\n          medicine: curStore.skus[curMedicineIndex].skuId,\n          cate: 'b2c'\n         });\n        break;\n    }\n\n    // 重新计算页面\n    wx.setStorageSync('b2cCart', listFromStorage);\n    this.calculationCartList(this.data.cartList);\n  },\n  /**\n   * @description 缓存里获取选中的店 + 药品\n   */\n  getSelectedList() {\n    let b2cList = wx.getStorageSync('b2cCart') || [];\n    let selectedList = b2cList.filter(store => store.skus.find(sku => sku.checked));\n\n    selectedList.forEach((store, storeIdx) => {\n      store.skus = store.skus.filter(sku => sku.checked);\n    });\n\n    return selectedList;\n  },\n  /**\n   * 提交需求\n   * @param { object } e \n   */\n  submit(e) {\n    let selectedList = this.getSelectedList();\n    let id = this.data.userAddress.addressId;\n    \n    if (!selectedList.length) {\n      wx.showToast({\n        title: '未选择商品',\n        icon: 'none'\n      })\n\n      return;\n    }\n\n    // 提交需求埋点\n    getApp().globalData.burySpotSDK.track('action_requirementsList_submitRequirementsClick');\n\n    wx.navigateTo({\n      url: `/pages/b2c/pages/placeOrder/placeOrder?orderDetailList=${ JSON.stringify(selectedList) }&addressId=${ id }`\n    })\n  },\n  /**\n   * 切换收货地址\n   */\n  toSelectAddress() {\n    let id = this.data.userAddress.addressId;\n\n    wx.navigateTo({\n      url: `/pages/note/selectAddress/selectAddress?userAddress=${ JSON.stringify({ id }) }`\n    })\n  },\n  /**\n   * 跳转首页\n   */\n  toHome() {\n    wx.switchTab({\n      url: `/pages/noteIndex/noteIndex`\n    })\n  },\n  /**\n   * 控制活动返现规则弹窗\n   */\n  handleRule(){\n    this.setData({\n      ruleBoxShow: true\n    }) \n  },\n  /**\n   * 获取活动返现规则\n   */\n  getSubsidyInfo() {\n    const b2cCart = wx.getStorageSync('b2cCart') || [];\n    \n    let drugstoreIdList = b2cCart.map(item => item.drugstoreId );\n    if(drugstoreIdList.length <= 0) return false;\n    ajax2('post', apiUrl.subsidyInfo, { drugstoreIdList: drugstoreIdList }, res => {\n      if (res.data.code == 0 && res.data.result) { \n        this.setData({\n          ruleDetail: res.data.result\n        })\n      }else {\n        wx.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n})"},"convertDir/pages/scan/component/diagnose/diagnose":{"json":{"no-data":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"diagnose-auto-container\">\n    <view class=\"diagnose-container\">  \n      <view class=\"search-container\"> \n        <view class=\"input-container\">  \n          <image mode=\"widthFix\" class=\"search-icon\" src=\"../../../../images/search-icon-black.png\"></image>\n          <input type=\"text\" class=\"search-input\" :value=\" keyword \" bindinput=\"onKeywordText\" placeholder=\"请输入诊断\"></input>\n          <image v-if=\" keyword \" class=\"search-icon\" bindtap=\"clearKeyword\" mode=\"widthFix\" src=\"../../../../images/search_clear.png\"></image>\n        </view>\n        <view class=\"search-btn pub-text\" bindtap=\"getDiagnosticsList\">搜索\n        </view>\n      </view>\n      <scroll-view scroll-y=\"true\" bindscrolltolower=\"refresh\" class=\"scroll-view-container\">  \n        <block v-if=\" (keyword || isSearch) && isData \">\n          <view class=\"diagnose-list\">\n            <view class=\"diagnose-list-item\" v-for=\"(item, diagnosticCooe) in  diagnoseList \" :key=\"diagnosticCooe\" bindtap=\"onChoiceDiagnoseInSearch\" :data-item=\" item \">\n              <rich-text :nodes=\" item.richTextName \"></rich-text>\n            </view>\n          </view>\n        </block>\n        <block v-else-if=\" !keyword && !isSearch \">   \n          <view class=\"pub-text\">已选择\n          </view>\n          <view class=\"pub-tab\">\n            <view class=\"pub-tab-item\" v-for=\"(item, diagnosticCooe) in  choicedDiagnose \" :key=\"diagnosticCooe\"> \n              <text>{{ item.diagnosticName }}\n              </text>\n              <image bindtap=\"delDiagnoseItem\" :data-item=\" item \" class=\"pub-tab-item-del\" mode=\"widthFix\" src=\"../../images/scan-del.png\"></image>\n            </view>\n          </view>\n          <view class=\"pub-text tab-title\">常用诊断\n          </view>\n          <view class=\"pub-tab\">\n            <view :class=\"[pub-tab-item,( item.isActive? 'pub-tab-item-active':'' )]\" v-for=\"(item, diagnosticCooe) in  diseaseArr \" :key=\"diagnosticCooe\" :data-item=\" item \" bindtap=\"onChoiceDiagnose\">\n          {{ item.diagnosticName }}\n        \n            </view>\n          </view>\n        </block>\n        <block v-else-if=\" (keyword || isSearch) && !isData \">\n          <no-data zhi=\"scanNoData\" imageUrl=\"{{ cdnLink }}images/require-list-empty.png\" textval=\"暂无搜索结果\"></no-data>\n        </block>\n      </scroll-view>\n      <view class=\"btn-container\">\n        <view class=\"finish-btn\" bindtap=\"onFinish\">完成\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".diagnose-container {\n  padding: 32rpx 0;\n}\n.search-container {\n  display: flex;\n  align-items: center;\n}\n.input-container {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  height: 74rpx;\n  background-color: #F1F2F6;\n  border-radius: 437rpx;\n  padding: 16rpx 22rpx;\n}\n.input-container .search-icon {\n  width: 36rpx;\n  height: 36rpx;\n}\n.search-btn {\n  width: 64rpx;\n  margin-left: 20rpx;\n}\n.search-input {\n  width: 100%;\n  height: 100%;\n  padding: 0 14rpx;\n}\n.tab-title {\n  margin-top: 32rpx;\n}\n.pub-text {\n  color: #111734;\n  font-size: 32rpx;\n  font-weight: 600;\n}\n.pub-tab {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 32rpx;\n}\n.pub-tab-item {\n  display: flex;\n  align-items: center;\n  color: #41465D;\n  font-size: 28rpx;\n  background-color: #F2F3F7;\n  border: 1rpx solid #F2F3F7;\n  border-radius: 32rpx;\n  margin-right: 32rpx;\n  margin-bottom: 20rpx;\n  padding: 18rpx 30rpx;\n}\n.pub-tab-item.pub-tab-item-active {\n  color: #00b955;\n  background: rgba(0,122,255,0.08);\n}\n.pub-tab-item-del {\n  width: 32rpx;\n  height: 32rpx;\n  margin-left: 16rpx;\n}\n.scroll-view-container {\n  width: 100%;\n  height: 600rpx;\n  margin: 52rpx 0 20rpx;\n}\n.diagnose-list {\n  width: 100%;\n  padding: 20rpx 0;\n}\n.diagnose-list-item {\n  display: flex;\n  align-items: center;\n  border-bottom: 1rpx solid #F7F7F7;\n  padding: 30rpx 0;\n}\n.btn-container {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 32rpx;\n}\n.finish-btn {\n  color: #FFFFFF;\n  font-size: 32rpx;\n  font-weight: 600;\n  width: 100%;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background: #00b955;\n  border-radius: 48px;\n}","js":"const apiUrl = {\n  getDiagnosticsHotUrl: 'api/chat/inquiry/diagnosticsHot',   // 获取常用诊断\n  getDiagnosticsListUrl: 'api/chat/inquiry/diagnostics'      // 搜索诊断list\n}\nimport { ajax, ajax2, cdnStaticResourceUrl } from '../../../../utils/util'\n\nComponent({\n  /**\n   * 组件的属性列表\n   */\n  properties: {\n    isClose: {\n      type: Boolean,\n      value: false,\n      observer(nv) {\n        console.log('nvnvnvnvnv', nv)\n        if (!nv) {\n          // this.getDiagnosticsHot()\n        }\n      }\n    }\n  },\n\n  /**\n   * 组件的初始数据\n   */\n  data: {\n    cdnLink: cdnStaticResourceUrl,\n    keyword: '',                              // 搜索框关键字\n    isShowSearchDel: false,                   // 搜索框清楚icon\n    choicedDiagnose: [],                      // 已选择诊断list\n    currentDiagnoseLength: 0,                 // 已选诊断字数长度\n    diagnoseList: [],                         // 搜索list\n    diseaseArr: [],                           // 常用诊断\n    isSearch: false,\n    pageNum: 1,\n    pageSize: 20,\n    isData: true                             // 是否有数据\n  },\n  attached() {\n    this.getDiagnosticsHot()\n  },\n  detached() {\n    console.log('22222222222')\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    // 初始化数据\n    // initData() {\n    //   this.setData({\n    //     keyword: '',\n    //     isShowSearchDel: false,\n    //     choicedDiagnose: []\n    //   })\n    // },  \n    // 获取常用诊断\n    getDiagnosticsHot() {\n      wx.showLoading({\n        title: '加载中...'\n      })\n      ajax2('post', apiUrl.getDiagnosticsHotUrl, {}, res => {\n        wx.hideLoading()\n        console.log('resresresres', this)\n        if (res.data.code === 0) {\n          this.setData({\n            diseaseArr: res.data.result.map(item => {\n              return {\n                ...item,\n                isActive: false\n              }\n            })\n          })\n        } else {\n          wx.showToast({\n            title: res.data.msg || '操作失败',\n            icon: 'none'\n          })\n        }\n      }, err => {\n        wx.hideLoading()\n        wx.showToast({\n          title: err.msg || '操作失败',\n          icon: 'none'\n        })\n      })\n    },\n    // 搜索诊断list\n    getDiagnosticsList(isRefresh) {\n      this.setData({\n        isSearch: true\n      })\n      let params = {\n        diagnosticName: this.data.keyword,\n        pageNum: this.data.pageNum,\n        pageSize: this.data.pageSize\n      }\n      wx.showLoading({\n        title: '加载中...'\n      })\n      ajax('post', apiUrl.getDiagnosticsListUrl, params, res => {\n        wx.hideLoading()\n        if (res.data.code === 0) {\n          if (res.data.result !== null && res.data.result.list && res.data.result.list.length) {\n            // let reg = new RegExp(`(${this.data.keyword})`, 'g')\n            let reg = new RegExp(`(${this.data.keyword.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\")})`, 'g')\n            let tempList = res.data.result.list.map(item => {\n              return {\n                ...item,\n                richTextName: `${item.diagnosticName.replace(reg, `<font style=\"color:#FF5630\">${this.data.keyword}</font>`)}`\n              }\n            })\n            let diagnoseList = isRefresh === 'refresh'? [...this.data.diagnoseList, ...tempList]:tempList\n            this.setData({\n              diagnoseList: diagnoseList,\n              isData: true\n            })\n          } else {\n            if (isRefresh !== 'refresh') {\n              this.setData({\n                diagnoseList: [],\n                isData: false\n              })\n            }\n          }\n        } else {\n          wx.showToast({\n            title: res.data.msg || '操作失败',\n            icon: 'none'\n          })\n        }\n      }, err => {\n        wx.hideLoading()\n        wx.showToast({\n          title: err.msg || '操作失败',\n          icon: 'none'\n        })\n      })\n    },\n    // 下拉加载\n    refresh() {\n      if (this.data.isData && this.data.isSearch && this.data.keyword) {\n        this.data.pageNum += 1\n        this.getDiagnosticsList('refresh')\n      }\n    },  \n    // 选择诊断\n    onChoiceDiagnose(e) {\n      console.log('e', e.currentTarget)\n      let item = e.currentTarget.dataset.item\n      let i = this.data.choicedDiagnose.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n      let index = this.data.diseaseArr.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n      let temp = `diseaseArr[${index}].isActive`\n      if (i === -1) {\n        if (this.data.choicedDiagnose.length === 5) {\n          wx.showToast({\n            title: '常用诊断不能超过5个',\n            icon: 'none'\n          })\n          return\n        }\n        if (this.data.currentDiagnoseLength + item.diagnosticName.length + this.data.choicedDiagnose.length > 50) {\n          wx.showToast({\n            title: '诊断字数超过限制',\n            icon: 'none'\n          })\n          return\n        }\n        this.data.currentDiagnoseLength += item.diagnosticName.length\n        this.data.choicedDiagnose.push(item)\n        this.setData({\n          [temp]: true,\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n      } else {\n        this.data.currentDiagnoseLength = this.data.currentDiagnoseLength - item.diagnosticName.length\n        this.data.choicedDiagnose.splice(i, 1)\n        this.setData({\n          [temp]: false,\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n      }\n      this.onAddOrDeleteItem();\n    },\n    // 选择问诊 - 搜索\n    onChoiceDiagnoseInSearch(e) {\n      let item = e.currentTarget.dataset.item\n      let i = this.data.choicedDiagnose.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n      let index = this.data.diseaseArr.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n      let temp = `diseaseArr[${index}].isActive`\n      if (i === -1) {\n        if (this.data.choicedDiagnose.length === 5) {\n          wx.showToast({\n            title: '常用诊断不能超过5个',\n            icon: 'none'\n          })\n          return\n        }\n        if (this.data.currentDiagnoseLength + item.diagnosticName.length + this.data.choicedDiagnose.length > 50) {\n          wx.showToast({\n            title: '诊断字数超过限制',\n            icon: 'none'\n          })\n          return\n        }\n        this.data.currentDiagnoseLength += item.diagnosticName.length\n        this.data.choicedDiagnose.push(item)\n        this.setData({\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n        if (index > -1) {\n          this.setData({\n            [temp]: true,\n          })\n        }\n        this.onAddOrDeleteItem();\n      }\n      this.setData({\n        keyword: '',\n        isSearch: false,\n        diagnoseList: []\n      })\n    },  \n    // 删除诊断\n    delDiagnoseItem(e) {\n      let item = e.currentTarget.dataset.item\n      let index = this.data.choicedDiagnose.findIndex(v => v.diagnosticCooe === item.diagnosticCooe)\n      if (index > -1) {\n        this.data.currentDiagnoseLength = this.data.currentDiagnoseLength - item.diagnosticName.length\n        let i = this.data.diseaseArr.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n        let temp = ''\n        if (i > -1) {\n          temp = `diseaseArr[${i}].isActive`\n          this.setData({\n            [temp]: false,\n          })\n        }\n        this.data.choicedDiagnose.splice(index, 1)\n        this.setData({\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n        this.onAddOrDeleteItem();\n      }\n      console.log('choicedDiagnose', this.data.choicedDiagnose)\n    },\n    // 搜索框input事件\n    onKeywordText(e) {\n      this.setData({\n        keyword: e.detail.value\n      })\n      if (e.detail.value) {\n        this.data.pageNum = 1\n        this.getDiagnosticsList()\n      } else {\n        this.setData({\n          keyword: '',\n          isSearch: false,\n          diagnoseList: []\n        })\n      }\n    },\n    // 清楚搜索关键字\n    clearKeyword() {\n      this.setData({\n        keyword: '',\n        isSearch: false,\n        diagnoseList: []\n      })\n    },\n    // 完成\n    onFinish() {\n      if (this.data.choicedDiagnose.length === 0) {\n        wx.showToast({\n          title: '请选择诊断',\n          icon: 'none',\n          duration: 2000\n        })\n      } else {\n        let resStr = ''\n        let diagnosisCode = ''\n        this.data.choicedDiagnose.forEach(item => {\n          resStr += item.diagnosticName + '；'\n          diagnosisCode += item.diagnosticCooe + '|'\n        })\n        resStr = resStr.substring(0, resStr.length - 1)\n        diagnosisCode = diagnosisCode.substring(0, diagnosisCode.length - 1)\n        let params = {\n          p: 'diagnoseText',\n          text: resStr,\n          dialogName: 'isDiagnoseDialogShow',\n          diagnosisCodeStr: 'diagnosisCode',\n          diagnosisCode: diagnosisCode,\n          isBtnStr: 'isBtn',\n          isBtnVal: true\n        }\n        this.triggerEvent('addText', params)\n      }\n    },\n\n    // 添加或删除item时，调用方法\n    onAddOrDeleteItem() {\n      let resStr = ''\n        let diagnosisCode = ''\n        if(this.data.choicedDiagnose.length !== 0) {\n          this.data.choicedDiagnose.forEach(item => {\n            resStr += item.diagnosticName + '；'\n            diagnosisCode += item.diagnosticCooe + '|'\n          })\n          resStr = resStr.substring(0, resStr.length - 1)\n          diagnosisCode = diagnosisCode.substring(0, diagnosisCode.length - 1)\n        }\n        let params = {\n          p: 'diagnoseText',\n          text: resStr,\n          diagnosisCodeStr: 'diagnosisCode',\n          diagnosisCode: diagnosisCode,\n        }\n        this.triggerEvent('addText', params)\n    }\n  }\n})\n"},"convertDir/pages/scan/component/patientInfo/patientInfo":{"json":{"no-data":"../../../../component/missingData/missingData","multiline":"../../../../component/textarea/index"},"wxml":"\n  <view class=\"patientInfo-auto-container\"> \n    <wxs module=\"filter\">\n  var patientSexFilter = function (value) {\n    if (value === 1) {\n      return \"男\"\n    } else if (value === 2) {\n      return \"女\"\n    }\n  }\n  module.exports = {\n    patientSexFilter: patientSexFilter\n  }\n\n    </wxs>\n    <view>  \n      <view style=\"height: 890rpx; position: relative\" v-if=\"isAddOrEditUserInfo\">  \n        <view class=\"pati_top_tips\">提示：为了问诊和处方的有效性，请您仔细填写个人信息，确保个人信息填写无误\n        </view>\n        <view class=\"common_section\" style=\"overflow-y: auto;\">       \n          <view class=\"cell\">  \n            <view class=\"red-start\">*\n            </view>\n            <view class=\"cell_left\">姓名\n            </view>\n            <view class=\"cell_center\">\n              <input placeholder=\"请输入问诊人真实姓名\" type=\"text\" placeholder-class=\"phcolor\" maxlength=\"10\" :value=\" patientName \" bindinput=\"nameInputChange\"></input>\n            </view>\n          </view>\n          <view class=\"cell\">  \n            <view style=\"color: #ffffff\">*\n            </view>\n            <view class=\"cell_left\">身份证号\n            </view>\n            <view class=\"cell_center\">\n              <input placeholder=\"请输入用药人身份证号\" placeholder-class=\"phcolor\" bindblur=\"checkedCard\" maxlength=\"18\" :value=\" patientIdCard \" bindinput=\"idCardInputChange\" cursor-spacing=\"20\"></input>\n            </view>\n          </view>\n          <view class=\"cell\">  \n            <view class=\"red-start\">*\n            </view>\n            <view class=\"cell_left\">性别\n            </view>\n            <view class=\"cell_center\">\n              <view class=\"select_containter\"> \n                <view bindtap=\"selectGender\" :data-gender=\"1\"> \n                  <image class=\"sel_img\" :src=\"genderSelectPathLeft\"></image>\n                  <text style=\"margin-right:100rpx\">男\n                  </text>\n                </view>\n                <view bindtap=\"selectGender\" :data-gender=\"2\"> \n                  <image class=\"sel_img\" :src=\"genderSelectPathRight\"></image>\n                  <text>女\n                  </text>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"cell\">  \n            <view class=\"red-start\">*\n            </view>\n            <view class=\"cell_left\">年龄\n            </view>\n            <view class=\"cell_center\">\n              <input placeholder=\"请输入年龄\" type=\"number\" :disabled=\"idCardJudgeAgeSex\" placeholder-class=\"phcolor\" maxlength=\"3\" :value=\" patientAge \" bindinput=\"ageInputChange\" cursor-spacing=\"20\"></input>\n            </view>\n          </view>\n          <view class=\"cell\">  \n            <view class=\"red-start\">*\n            </view>\n            <view class=\"cell_left\">过往病史\n            </view>\n            <view class=\"cell_center\">\n              <view class=\"select_containter\"> \n                <view bindtap=\"selectMedicalHistory\" :data-medicalhistory=\"false\"> \n                  <image class=\"sel_img\" :src=\"pastMedicalHistoryLeft\"></image>\n                  <text style=\"margin-right:100rpx\">无\n                  </text>\n                </view>\n                <view bindtap=\"selectMedicalHistory\" :data-medicalhistory=\"true\"> \n                  <image class=\"sel_img\" :src=\"pastMedicalHistoryRight\"></image>\n                  <text>有\n                  </text>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view v-if=\"pastMedicalHistoryFlag\" class=\"cell_textarea\"> \n            <multiline wrap-class=\"wrap\" textarea-class=\"textarea\" placeholder-class=\"phcolor\" placeholder=\"请输入您的过往病史\" virtual_textarea_style=\"line-height: 32rpx\" bindinput=\"getMedicalHistory\" :value=\" pastMedicalHistory \"></multiline>\n            <view class=\"count\"> \n              <text>{{pastMedicalHistory.length}}\n              </text>\n              <text class=\"phcolor\">/50\n              </text>\n            </view>\n          </view>\n          <view class=\"cell\" v-if=\"!channel\">   \n            <view class=\"red-start\">*\n            </view>\n            <view class=\"cell_left\">药物过敏史\n            </view>\n            <view class=\"cell_center\">\n              <view class=\"select_containter\"> \n                <view bindtap=\"selectHistoryDrugAllergySelect\" :data-historydrug=\"false\"> \n                  <image class=\"sel_img\" :src=\"historyDrugAllergyLeft\"></image>\n                  <text style=\"margin-right:100rpx\">无\n                  </text>\n                </view>\n                <view bindtap=\"selectHistoryDrugAllergySelect\" :data-historydrug=\"true\"> \n                  <image class=\"sel_img\" :src=\"historyDrugAllergyRight\"></image>\n                  <text>有\n                  </text>\n                </view>\n              </view>\n            </view>\n            <view v-if=\"historyDrugAllergyFlag\" class=\"cell_right\">（可多选）\n            </view>\n          </view>\n          <view v-if=\"historyDrugAllergyFlag && !channel\"> \n            <view class=\"medicinal_item\">\n              <view v-for=\"(item, key) in allergyList\" :key=\"key\" bindtap=\"onChoiceAllergyItem\" :data-item=\"item\" :class=\"[item,(item.isActive ? 'item_y':'item_n')]\">{{item.name}}\n              </view>\n            </view>\n            <view class=\"cell_textarea\"> \n              <multiline wrap-class=\"wrap\" textarea-class=\"textarea\" placeholder-class=\"phcolor\" class=\"textarea\" placeholder=\"请输入药物过敏史\" virtual_textarea_style=\"line-height: 32rpx\" bindinput=\"getHistoryDrugAllergy\" :value=\" historyDrugAllergy \"></multiline>\n              <view class=\"count\"> \n                <text>{{historyDrugAllergy.length}}\n                </text>\n                <text class=\"phcolor\">/50\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n        <cover-view class=\"patient_bottom_btn_con_cover\">\n          <cover-view class=\"patient_bottom_btn yes_add_cover\" bindtap=\"confirmAddUser\">确认保存\n          </cover-view>\n        </cover-view>\n      </view>\n      <view style=\"height: 890rpx; position: relative;\" v-if=\"!isAddOrEditUserInfo && patientList.length > 0\">  \n        <view class=\"listtoptip\">最多可以添加10名问诊人信息\n        </view>\n        <view style=\"height: 624rpx; overflow-y: auto;\">\n          <view class=\"patient_list_con\">\n            <view class=\"item_container\">\n              <view v-for=\"(item, key) in patientList\" :key=\"key\" class=\"item\">  \n                <view class=\"leftcon\" bindtap=\"selectDefaultListObj\" :data-item=\" item \">  \n                  <view class=\"name text\">{{item.patientName}}\n                  </view>\n                  <view class=\"gender text\">{{filter.patientSexFilter(item.patientSex)}}\n                  </view>\n                  <view class=\"age text\">{{item.patientAge}}岁\n                  </view>\n                </view>\n                <image bindtap=\"editDefaultListObj\" :data-item=\" item \" class=\"edit\" src=\"../../../../images/edit-icon.png\"></image>\n                <image bindtap=\"deletePatient\" :data-item=\" item \" class=\"delete\" src=\"../../../../images/clear_ss.png\"></image>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"patient_bottom_btn_con\">\n          <view bindtap=\"addNewPatient\" :class=\"[patient_bottom_btn,(patientList.length >= 10 ? 'no_add':'theme-bg')]\">新建就诊人\n      \n          </view>\n        </view>\n      </view>\n      <view style=\"height: 890rpx;\" v-if=\" !isAddOrEditUserInfo && patientList.length < 1 \"> \n        <view style=\"height: 704rpx; padding-top: 200rpx\">\n          <no-data v-if=\" true \" zhi=\"scanNoData\" imageUrl=\"{{ cdnLink }}images/require-list-empty.png\" textval=\"暂无问诊人\"></no-data>\n        </view>\n        <view class=\"patient_bottom_btn_con\">\n          <view bindtap=\"addNewPatient\" :class=\"[patient_bottom_btn,(patientList.length >= 10 ? 'no_add':'yes_add')]\">新建就诊人\n      \n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/scan/component/patientInfo/patientInfo.wxss */\n@import '/common/tableView.wxss';\n\n.pati_top_tips {\n  padding: 0rpx 20rpx;\n  height: 80rpx;\n  /* line-height: 80rpx; */\n  padding-top: 10rpx;\n  font-size: 24rpx;\n  color: #f8890a;\n  background: #fffbe6;\n  text-align: left;\n}\n\n.common_section {\n  /* padding-bottom: 30rpx; */\n  padding-bottom: 0rpx;\n  height: 624rpx;\n}\n\n.common_section .cell {\n  padding: 0rpx 8rpx;\n  height: 96rpx;\n  line-height: 96rpx;\n  font-size: 32rpx;\n  color: #111734;\n}\n\n.common_section .cell .red-start {\n  color: red;\n}\n\n.common_section .cell .cell_left {\n  min-width: 160rpx;\n  margin-right: 40rpx;\n}\n\n.common_section .cell .cell_center {\n  flex: 1;\n}\n\n.common_section .cell .cell_right {\n  width: 140rpx;\n  height: 28rpx;\n  line-height: 28rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #c5c9d5;\n}\n\n.common_section .select_containter {\n  display: flex;\n  /* justify-content: center; */\n  align-items: center;\n}\n\n.select_containter .sel_img {\n  vertical-align: middle;\n  width: 36rpx;\n  height: 36rpx;\n  background-size: 100% 100%;\n  margin-right: 20rpx;\n}\n\n.common_section .cell_textarea {\n  /* 设置8rpx 因为 halfScreenDialog 有个24rpx padding值 */\n  padding: 0rpx 8rpx;\n  position: relative;\n}\n\n.common_section .cell_textarea .textarea {\n  /* padding: 24rpx;\n  box-sizing: border-box;\n  background: #F7F8FA;\n  color: #666666;\n  width: 686rpx;\n  height: 200rpx; */\n  word-wrap: break-word;\n  font-size: 28rpx;\n  color: #333;\n  line-height: 1;\n}\n\n.medicinal_item {\n  /* float: left; */\n  padding-top: 12rpx;\n}\n\n.medicinal_item .item {\n  display: inline-block;\n  height: 64rpx;\n  line-height: 64rpx;\n  padding: 0rpx 30rpx;\n  font-size: 28rpx;\n  border-radius: 32rpx;\n  margin-right: 32rpx;\n  margin-bottom: 12rpx;\n}\n\n.medicinal_item .item_y {\n  color: #00CCBB;\n  background: rgba(0, 204, 187, 0.08);\n  border: 2rpx solid #00ccbb;\n}\n\n.medicinal_item .item_n {\n  background: #f2f3f7;\n  border: 2rpx solid #f2f3f7;\n}\n\n.common_section .cell_textarea .count {\n  position: absolute;\n  right: 24rpx;\n  bottom: 24rpx;\n  color: #111734;\n  font-size: 24rpx;\n}\n\n.common_section .cell .text_show {\n  width: 100%;\n  height: 150px;\n  color: #666666;\n  display: inline-block;\n  margin-top: 10rpx;\n}\n\n.phcolor {\n  color: #9AA0B5;\n}\n\n.common_footer {\n  background: #FFFFFF\n}\n\n.patient_bottom_btn_con {\n  position: absolute;\n  bottom: 0rpx;\n  left: 0rpx;\n  padding-top: 60rpx;\n  width: 100%;\n  box-sizing: border-box;\n  background: #ffffff;\n  height: 186rpx;\n}\n\n.patient_bottom_btn {\n  margin: 0 auto;\n  width: 686rpx;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  border-radius: 48rpx;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #FFFFFF;\n}\n\n.patient_bottom_btn_con_cover {\n  /* position: absolute; */\n  position: fixed;\n  bottom: 0rpx;\n  left: 0rpx;\n  padding: 60rpx 32rpx 0 32rpx;\n  width: 100%;\n  box-sizing: border-box;\n  background: #ffffff;\n  height: 186rpx;\n}\n\n.patient_bottom_btn_con_cover .yes_add_cover {\n  background: #00b955\n}\n\n.patient_bottom_btn_con .no_add {\n  background: #BBC2CA;\n}\n\n/* 联系人列表样式 */\n.patient_list_con {\n  background-color: #FFFFFF;\n}\n\n.listtoptip {\n  /* padding: 30rpx 0; */\n  height: 80rpx;\n  line-height: 80rpx;\n  font-size: 24rpx;\n  text-align: center;\n  /* color: #9AA0B5; */\n  /* background: #f9fafb; */\n  color: #f8890a;\n  background: #fffbe6;\n}\n\n.patient_list_con .item_container {\n  /* margin-bottom: 184rpx; */\n  margin-bottom: 0rpx;\n}\n\n.patient_list_con .item {\n  padding: 0rpx 8rpx;\n  height: 96rpx;\n  display: flex;\n  align-items: center;\n}\n\n.patient_list_con .item .sel_img {\n  vertical-align: middle;\n  width: 36rpx;\n  height: 36rpx;\n  background-size: 100% 100%;\n  margin-right: 20rpx;\n}\n\n\n.patient_list_con .item .text {\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #111734;\n}\n\n.patient_list_con .item .leftcon {\n  flex: 1;\n  min-width: 0;\n  /*解决里面名字撑开问题*/\n  display: flex;\n  align-items: center;\n}\n\n.patient_list_con .item .name {\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.patient_list_con .item .gender {\n  width: 34rpx;\n  /* margin-right: 100rpx; */\n  margin-right: 60rpx;\n  margin-left: 20rpx;\n}\n\n.patient_list_con .item .age {\n  width: 74rpx;\n  width: 90rpx;\n  /* margin-right: 156rpx; */\n  margin-right: 126rpx;\n}\n\n.patient_list_con .item .edit {\n  width: 40rpx;\n  height: 40rpx;\n  background-size: 100% 100%;\n}\n\n.patient_list_con .item .delete {\n  margin-left: 40rpx;\n  width: 40rpx;\n  height: 40rpx;\n  background-size: 100% 100%;\n}\n\n.bottom_no_scorll {\n  overflow: hidden;\n}","js":"// pages/scan/component/patientInfo/patientInfo.js\nconst selImagePath_y = '../../images/checked.png';\nconst selImagePath_n = '../../images/check-default.png';\nimport {\n  url,\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl,\n  getUserBirthAndAgeAndGenderUseIdNumber\n} from \"../../../../utils/util\";\n\nexport default {\n  // 组件所在页面的生命周期函数\n  onShow: function () {\n    console.log('page show生命周期')\n  },\n\n  onHide: function () {\n    console.log('page hide生命周期')\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    channel: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data: function() {\n    return {\n      cdnLink: cdnStaticResourceUrl,\n      patientId: '',\n      patientName: '',\n      patientIdCard: '',\n      patientSex: '',\n      patientAge: '',\n\n      allergyList: [], // 过敏史选项列表\n      allergySelectItemList: [], // 过敏史选中列表\n      idCardJudgeAgeSex: false, // 年龄和性别是否是通过身份证号计算的,false: 不是，true：是\n      selectImageYes: selImagePath_y,\n      selectImageNo: selImagePath_n,\n      genderSelectPathLeft: selImagePath_y,\n      genderSelectPathRight: selImagePath_n,\n\n      pastMedicalHistoryFlag: false, // 有无过往病史\n      pastMedicalHistory: '', // 过往病史输入的内容\n      pastMedicalHistoryLeft: selImagePath_y,\n      pastMedicalHistoryRight: selImagePath_n,\n\n      historyDrugAllergyFlag: false, // 有无药物过敏史\n      historyDrugAllergy: '', // 药物过敏史输入内容\n      historyDrugAllergyLeft: selImagePath_y,\n      historyDrugAllergyRight: selImagePath_n,\n\n      isAddOrEditUserInfo: false, // 用于判断展示添加信息、联系人列表 , true :添加信息， false：联系人列表\n\n      // 下面是联系人列表相关变量\n      patientList: [],\n      isEditGotoDetail: false, // 从编辑界面进入详情页面\n      currentPatientId: '' // 患者列表的第一个用户的id存储起来，用于编辑、删除当前用户方法时使用\n\n    };\n  },\n\n  onReady() {\n    console.log('组件ready 生命周期');\n  },\n\n  lifetimes: {\n    attached: function () {\n      console.log('attached 生命周期');\n    }\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    // 选择性别\n    selectGender(e) {\n      let sex = e.currentTarget.dataset.gender;\n      console.log('性别--', typeof sex, sex);\n      if (this.data.idCardJudgeAgeSex) {\n        return;\n      }\n      this.setData({\n        patientSex: sex,\n        genderSelectPathLeft: sex == 1 ? selImagePath_y : selImagePath_n,\n        genderSelectPathRight: sex == 2 ? selImagePath_y : selImagePath_n\n      })\n    },\n\n    // 勾选有无过往病史\n    selectMedicalHistory(e) {\n      let medical = e.currentTarget.dataset.medicalhistory;\n      console.log('过往病史--', medical);\n      if (!medical) {\n        // 当输入一些过往病史后，再次点击了无，输入内容清空\n        console.log('无过往病史');\n        this.setData({\n          pastMedicalHistory: ''\n        })\n      }\n      this.setData({\n        pastMedicalHistoryFlag: medical,\n        pastMedicalHistoryLeft: !medical ? selImagePath_y : selImagePath_n,\n        pastMedicalHistoryRight: medical ? selImagePath_y : selImagePath_n,\n      })\n    },\n\n    // 勾选有无药物过敏史\n    selectHistoryDrugAllergySelect(e) {\n      let historyDrug = e.currentTarget.dataset.historydrug;\n      console.log('药物过敏史--', historyDrug);\n      if (!historyDrug) {\n        // 当选择了一些药物之后，再次点击了无，清空选择的药物item，item数组选项置为未选择，输入内容清空\n        this.data.allergyList.findIndex(value => value.isActive = false)\n        this.setData({\n          allergySelectItemList: [],\n          allergyList: this.data.allergyList,\n          historyDrugAllergy: ''\n        })\n      }\n      this.setData({\n        historyDrugAllergyFlag: historyDrug,\n        historyDrugAllergyLeft: !historyDrug ? selImagePath_y : selImagePath_n,\n        historyDrugAllergyRight: historyDrug ? selImagePath_y : selImagePath_n,\n      })\n    },\n\n    // 校验输入的身份证号码\n    checkedCard(e) {\n      let _idCard = e.detail.value;\n      this.checkedCardPublic(_idCard);\n    },\n    // 根据身份证号计算出年龄和性别\n    checkedCardPublic(idCard) {\n      let retObj = getUserBirthAndAgeAndGenderUseIdNumber(idCard);\n      if (!retObj) {\n        // this.data.patientIdCard = '';\n        this.setData({\n          genderSelectPathLeft: this.data.patientSex == 1 ? selImagePath_y : selImagePath_n,\n          genderSelectPathRight: this.data.patientSex == 2 ? selImagePath_y : selImagePath_n,\n          idCardJudgeAgeSex: false\n        })\n        if (this.data.isEditGotoDetail) {\n          // 说明是点击列表的编辑信息，执行此逻辑\n          console.log('说明是点击列表的编辑信息，执行此逻辑');\n          this.setData({\n            isEditGotoDetail: false\n          })\n        } else {\n          // 如果从编辑进入详情，当前问诊人没有身份证号码，这种情况不提示：请输入正确的身份证号\n          Taro.showToast({\n            icon: 'none',\n            title: '请输入正确的身份证号'\n          })\n        }\n\n      } else {\n        this.data.patientIdCard = idCard;\n        this.setData({\n          isEditGotoDetail: false, // 置为默认值，防止没有身份证号码的进来提示\n          patientIdCard: idCard,\n          patientSex: retObj.gender,\n          patientAge: '' + retObj.age, // 转字符串\n          idCardJudgeAgeSex: true,\n          genderSelectPathLeft: retObj.gender == 1 ? selImagePath_y : selImagePath_n,\n          genderSelectPathRight: retObj.gender == 2 ? selImagePath_y : selImagePath_n\n        })\n      }\n    },\n\n    // 获取过敏史列表\n    getAllergyList() {\n      console.log('请求过敏史列表');\n      // let retArray = ['头孢过敏', '阿莫西林过敏', '青霉素过敏', '这个那个几个都过敏', '阿莫西林过敏2', '青霉素过敏2', '这个那个几个都过敏2'];\n      // let _tempAllergyList = [];\n      // for (let i = 0; i < retArray.length; i++) {\n      //   let obj = {\n      //     id: i,\n      //     name: retArray[i],\n      //     isActive: false\n      //   };\n      //   _tempAllergyList.push(obj);\n      // }\n      // this.setData({\n      //   allergyList: _tempAllergyList\n      // })\n      // return;\n      ajax('post', 'api/patientinfo/getAllergy', {}, (res) => {\n        console.log(res);\n        if (res.data.code == 0) {\n          let retArray = res.data.result;\n          let _tempAllergyList = [];\n          for (let i = 0; i < retArray.length; i++) {\n            let obj = {\n              id: i,\n              name: retArray[i],\n              isActive: false\n            };\n            _tempAllergyList.push(obj);\n          }\n          this.setData({\n            allergyList: _tempAllergyList || []\n          })\n        } else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg,\n          })\n        }\n      })\n    },\n\n    // 点击药物过敏史标签\n    onChoiceAllergyItem(e) {\n      console.log('e', e.currentTarget)\n      let item = e.currentTarget.dataset.item;\n      let i = this.data.allergySelectItemList.findIndex(value => value.id === item.id)\n      let index = this.data.allergyList.findIndex(value => value.id === item.id)\n      let temp = `allergyList[${index}].isActive`\n      if (i === -1) {\n        this.data.allergySelectItemList.push(item)\n        this.setData({\n          [temp]: true,\n          allergySelectItemList: this.data.allergySelectItemList\n        })\n      } else {\n        this.data.allergySelectItemList.splice(i, 1)\n        this.setData({\n          [temp]: false,\n          allergySelectItemList: this.data.allergySelectItemList\n        })\n      }\n    },\n\n    // 每次重新进入页面的时候，清除所有数据\n    resetUserInfo() {\n      this.setData({\n        patientId: '',\n        patientName: '',\n        patientIdCard: '',\n        patientSex: 1,\n        genderSelectPathLeft: selImagePath_y,\n        genderSelectPathRight: selImagePath_n,\n        patientAge: '',\n        idCardJudgeAgeSex: false,\n        pastMedicalHistory: '', // 过往病史\n        pastMedicalHistoryLeft: selImagePath_y,\n        pastMedicalHistoryRight: selImagePath_n,\n        pastMedicalHistoryFlag: false, // 是否展示过往病史输入框\n        historyDrugAllergy: '', // 药物过敏史\n        historyDrugAllergyLeft: selImagePath_y,\n        historyDrugAllergyRight: selImagePath_n,\n        historyDrugAllergyFlag: false, // 是否展示药物过敏史输入框\n        allergySelectItemList: []\n      })\n    },\n\n    // 用户输入姓名\n    nameInputChange(e) {\n      this.setData({\n        patientName: (e.detail.value).replace(/^ +| +$/g, '').replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g, '').trim()\n      })\n    },\n    // 用户输入年龄\n    ageInputChange(e) {\n      this.setData({\n        patientAge: e.detail.value\n      })\n    },\n    // 用户输入身份证号码\n    idCardInputChange(e) {\n      this.setData({\n        patientIdCard: e.detail.value\n      })\n    },\n    // 用户输入过往病史\n    getMedicalHistory(e) {\n      console.log('过往病史--', e.detail.value);\n      if (e.detail.value.match(/^[ ]*$/)) {\n        console.log(\"为空或全为空格\");\n        this.data.pastMedicalHistory = ''\n      } else {\n        this.data.pastMedicalHistory = e.detail.value.length > 50 ? e.detail.value.substring(0, 50) : e.detail.value\n      }\n      this.setData({\n        pastMedicalHistory: this.data.pastMedicalHistory\n      })\n    },\n\n    // 用户输入药物过敏史\n    getHistoryDrugAllergy(e) {\n      console.log('药物过敏史--', e.detail.value);\n      if (e.detail.value.match(/^[ ]*$/)) {\n        console.log(\"为空或全为空格\");\n        this.data.historyDrugAllergy = ''\n      } else {\n        this.data.historyDrugAllergy = e.detail.value.length > 50 ? e.detail.value.substring(0, 50) : e.detail.value\n      }\n      this.setData({\n        historyDrugAllergy: this.data.historyDrugAllergy\n      })\n    },\n\n    // 确认保存按钮，修改患者，和添加新患者，都走此逻辑\n    confirmAddUser() {\n      console.log('确认添加或修改');\n      if (this.data.patientName.length < 2) {\n        Taro.showToast({\n          icon: 'none',\n          title: '姓名字数2-10个字'\n        })\n        return;\n      }\n      console.log('用户姓名类型--', typeof this.data.patientName, '--值', this.data.patientName);\n      if (this.data.patientIdCard.length !== 0) {\n        let retObj = getUserBirthAndAgeAndGenderUseIdNumber(this.data.patientIdCard);\n        console.log('------', retObj);\n        if (!retObj) {\n          this.data.patientIdCard = '';\n          this.setData({\n            patientIdCard: this.data.patientIdCard,\n            // patientAge: '',\n            idCardJudgeAgeSex: false\n          })\n          Taro.showToast({\n            icon: 'none',\n            title: '请输入正确的身份证号'\n          })\n          return;\n        }\n      }\n\n      if (this.data.patientIdCard.length === 0 && (this.data.patientAge === \"\" || this.data.patientAge === \"0\")) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入年龄'\n        })\n        return;\n      }\n      console.log('用户年龄类型--', typeof this.data.patientAge, '--值', this.data.patientAge);\n      console.log('用户身份证类型--', typeof this.data.patientIdCard, '--值', this.data.patientIdCard);\n\n      let post_url = \"\";\n      let patientInfo = {};\n      console.log('----', this.data.patientId);\n      if (this.data.patientId !== '') {\n        // 修改联系人\n        post_url = \"api/userPatient/newUpdateUserPatient\";\n        patientInfo['id'] = this.data.patientId;\n      } else {\n        // 添加新的联系人\n        post_url = \"api/userPatient/newSaveUserPatient\"\n      }\n\n      let allergyJoinString = this.data.allergySelectItemList.reduce(function (total, obj) {\n        return total + ' ' + obj.name;\n      }, '');\n\n      if (this.data.pastMedicalHistoryFlag && this.data.pastMedicalHistory.length == 0) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入过往病史'\n        })\n        return;\n      }\n\n      if (this.data.historyDrugAllergyFlag && allergyJoinString.length == 0 && this.data.historyDrugAllergy.length == 0) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入药物过敏史'\n        })\n        return;\n      }\n      Taro.showLoading({\n        title: '加载中',\n        mask: true,\n      })\n      \n      patientInfo['userId'] = Taro.getStorageSync('userInfo').userId;\n      patientInfo['patientName'] = this.data.patientName;\n      patientInfo['patientIdCard'] = this.data.patientIdCard;\n      patientInfo['patientSex'] = parseInt(this.data.patientSex);\n      patientInfo['patientAge'] = parseInt(this.data.patientAge);\n      patientInfo['pastMedicalHistoryFlag'] = this.data.pastMedicalHistoryFlag; // 过往病史，true/false\n      patientInfo['historyDrugAllergyFlag'] = this.data.historyDrugAllergyFlag; // 药物过敏史true/false\n      patientInfo['pastMedicalHistory'] = this.data.pastMedicalHistory; // 输入过往病史\n      patientInfo['historyDrugAllergy'] = this.data.historyDrugAllergy + allergyJoinString; // 输入药物过敏史\n      if (!this.data.pastMedicalHistoryFlag) {\n        patientInfo['pastMedicalHistory'] = '无';\n      }\n      if (!this.data.historyDrugAllergyFlag) {\n        patientInfo['historyDrugAllergy'] = '无';\n      }\n      console.log('添加患者信息--', patientInfo);\n\n      ajax2('POST', post_url, patientInfo, (res) => {\n        Taro.hideLoading()\n        if (res.data.code == 0) {\n          console.log('添加或修改用户成功', res);\n          console.log('修改curid和itemId', this.data.currentPatientId, patientInfo.id)\n          // 修改父组件正在显示的那个问诊人时会执行\n          if (this.data.currentPatientId === patientInfo.id) {\n            let params = {\n              userGenderStr: 'userGender',\n              userGender: parseInt(patientInfo.patientSex)\n            }\n            this.triggerEvent('addText', params)\n          }\n          this.getPatientList();\n        } else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg,\n          })\n        }\n      })\n    },\n\n    // 新建就诊人\n    addNewPatient() {\n      if (this.data.patientList.length >= 10) {\n        console.log('最多10个就诊人信息');\n        return;\n      }\n      this.resetUserInfo();\n      this.setData({\n        isAddOrEditUserInfo: true\n      });\n    },\n\n    // 以下联系人列表相关方法\n    getPatientList(comeParentComp) {\n      this.resetUserInfo();\n      this.getAllergyList();\n      console.log('父组件调用子组件获取问诊人列表方法---', comeParentComp);\n      this.setData({\n        isAddOrEditUserInfo: false\n      })\n      ajax2('POST', 'api/userPatient/selectUserPatientList', {\n        userId: Taro.getStorageSync('userInfo').userId\n      }, (res) => {\n        console.log('patientList---', res);\n        if (res.data.code == 0) {\n          if (res.data.result && res.data.result.length > 0) {\n            this.setData({\n              patientList: res.data.result\n            })\n            getApp().globalData.loggerSDK.info(`子组件接口获取患者列表信息 userPatientId: ${res.data.result}`)\n            if (comeParentComp) { // 在父组件页面点击时，存储\n              getApp().globalData.loggerSDK.info(`父组件在点击时，存储患者列表第一位患者ID userPatientId[0]: ${res.data.result[0].id}`)\n              this.data.currentPatientId = res.data.result[0].id // 将患者列表的第一个用户的id存储起来，用于编辑、删除方法使用\n            }\n          } else {\n            let params = {\n              p: 'patientName',\n              text: '',\n            }\n            this.triggerEvent('addText', params)\n            // 当父组件调用子组件方法时，列表为空，显示添加患者页面\n            if (comeParentComp) {\n              this.setData({\n                isAddOrEditUserInfo: true\n              });\n            }\n            this.setData({\n              patientList: res.data.result\n            })\n\n          }\n        } else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg,\n          })\n        }\n      })\n    },\n    // 选择问诊人列表的某一项\n    selectDefaultListObj(e) {\n      let clickItem = e.currentTarget.dataset.item;\n      let params = {\n        p: 'patientName',\n        text: clickItem.patientName,\n        dialogName: 'addPatientShow',\n        userPatientUserIdStr: 'userPatientUserId',\n        userPatientUserId: clickItem.userId,\n        userPatientIdStr: 'userPatientId',\n        userPatientId: clickItem.id,\n        userGenderStr: 'userGender',\n        userGender: parseInt(clickItem.patientSex),\n        isBtnStr: 'isBtn',\n        isBtnVal: true\n      }\n      this.data.currentPatientId = clickItem.id;\n      this.triggerEvent('addText', params)\n      getApp().globalData.loggerSDK.info(`选择患者列表的某一个ID userPatientId: ${clickItem.id}`)\n    },\n\n    // 当点击编辑用户时， 先查用户详细信息，在修改用户\n    editDefaultListObj(e) {\n      let editItem = e.currentTarget.dataset.item;\n      console.log('editItem--', editItem);\n      ajax2('POST', 'api/userPatient/viewUserPatient', {\n        id: editItem.id,\n        userId: Taro.getStorageSync('userInfo').userId\n      }, (res) => {\n        console.log('detail--', res);\n        if (res.data.code == 0) {\n          let _patientInfo = res.data.result;\n          // 判断过往病史\n          let _pastMedicalHistoryStr = _patientInfo.pastMedicalHistory.length > 50 ? _patientInfo.pastMedicalHistory.substring(0, 50) : _patientInfo.pastMedicalHistory;\n          // let _pastMedicalHistoryBoolean = true;\n          if (_pastMedicalHistoryStr.length == 0 || (_pastMedicalHistoryStr.length == 1 && _pastMedicalHistoryStr.replace(/^ +| +$/g, '') == '无')) {\n            // _pastMedicalHistoryBoolean = false;\n            _pastMedicalHistoryStr = \"\";\n          }\n\n          // 判断药物过敏史\n          let _historyDrugAllergyStr = _patientInfo.historyDrugAllergy.length > 50 ? _patientInfo.historyDrugAllergy.substring(0, 50) : _patientInfo.historyDrugAllergy;\n          // let _historyDrugAllergyBoolean = true;\n          if (_historyDrugAllergyStr.length == 0 || (_historyDrugAllergyStr.length == 1 && _historyDrugAllergyStr.replace(/^ +| +$/g, '') == '无')) {\n            // _historyDrugAllergyBoolean = false;\n            _historyDrugAllergyStr = \"\"\n          }\n\n          this.setData({\n            patientId: _patientInfo.id,\n            patientName: _patientInfo.patientName,\n            patientIdCard: _patientInfo.patientIdCard,\n            patientAge: _patientInfo.patientAge,\n            patientSex: _patientInfo.patientSex,\n\n            // 过往病史 描述、是否有、左右选择按钮展示\n            pastMedicalHistory: _pastMedicalHistoryStr,\n            pastMedicalHistoryFlag: (_pastMedicalHistoryStr.length > 0 ? true : false),\n            pastMedicalHistoryLeft: (_pastMedicalHistoryStr.length > 0 ? selImagePath_n : selImagePath_y),\n            pastMedicalHistoryRight: (_pastMedicalHistoryStr.length > 0 ? selImagePath_y : selImagePath_n),\n\n            // 药物过敏史 描述、是否有、左右选择按钮展示\n            historyDrugAllergy: _historyDrugAllergyStr,\n            historyDrugAllergyFlag: (_historyDrugAllergyStr.length > 0 ? true : false),\n            historyDrugAllergyLeft: (_historyDrugAllergyStr.length > 0 ? selImagePath_n : selImagePath_y),\n            historyDrugAllergyRight: (_historyDrugAllergyStr.length > 0 ? selImagePath_y : selImagePath_n),\n\n            isAddOrEditUserInfo: true, // 显示添加信息页面\n            isEditGotoDetail: true\n          }, function () {\n            console.log('获取到待编辑对象详情');\n            this.checkedCardPublic(this.data.patientIdCard);\n          })\n          // this.data.isEdit = true;\n        } else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg,\n          })\n        }\n      })\n\n      // this.setData({\n      //   isAddOrEditUserInfo: true\n      // });\n    },\n\n    // 删除某个联系人\n    deletePatient(e) {\n      let delItem = e.currentTarget.dataset.item;\n      console.log('点击了删除', delItem);\n      // let delIndex = this.data.patientList.findIndex(value => value.id === delItem.id)\n      // this.data.patientList.splice(delIndex, 1);\n      // this.setData({\n      //   patientList: this.data.patientList\n      // });\n\n      Taro.showModal({\n        content: '删除当前就诊人信息？',\n        confirmColor: getApp().globalData.mainColor,\n        success: (res) => {\n          if (res.confirm) {\n            ajax2('POST', 'api/userPatient/deleteUserPatient', {\n              id: delItem.id,\n              userId: Taro.getStorageSync('userInfo').userId\n            }, (res) => {\n              if (res.data.code == 0) {\n                Taro.showToast({\n                  icon: 'none',\n                  title: res.data.msg\n                })\n                console.log('删除curid和itemId', this.data.currentPatientId, delItem.id)\n                // 删除父组件正在显示的那个问诊人时会执行\n                // if (this.data.currentPatientId === delItem.id) {\n                //   let params = {\n                //     p: 'patientName',\n                //     text: '',\n                //     userPatientIdStr: 'userPatientId',\n                //     userPatientId: '',\n                //     userGenderStr: 'userGender',\n                //     userGender: 1\n                //   }\n                //   this.triggerEvent('addText', params)\n                // }\n                getApp().globalData.loggerSDK.info(`删除当前患者的ID userPatientId: ${delItem.id}`)\n                this.getPatientList();\n              } else {\n                Taro.showToast({\n                  icon: 'none',\n                  title: res.data.msg,\n                })\n              }\n            })\n          }\n        }\n      })\n    },\n  }\n};\n"},"convertDir/pages/scan/component/picker/picker":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n   isShow:{\n     type:Boolean,\n     default:false\n   },\n   list:{\n    type:Array,\n    default:[]\n  },\n  title:{\n    type:String,\n    default:''\n  },\n  type:{\n    type:String,\n    default:''\n  }\n  },\n\n  data: function() {\n    return {\n\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    close(){\n      console.log('close')\n      this.triggerEvent('Close',)\n    },\n    select(e){\n      console.log(e,this.data.type)\n      if(this.data.type=='usage'){\n        this.triggerEvent('selectUsage',e.currentTarget.dataset.item)\n      }else if(this.data.type=='processingMethod'){\n        this.triggerEvent('selectProcessingMethod',item)\n      }\n    }\n  },\n\n  watch: {\n    type: function (newVal, oldVal){\n      this.setData({\n        type:newVal\n      })\n    }\n  }\n};\n","json":{},"wxss":"/* pages/scan/component/picker/picker.wxss */\n.notify_box {\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 100000;\n  width: 100%;\n  background-color: rgba(5, 5, 5, 0.55);\n}\n\n.info_wrap {\n  max-height: 50vh;\n  overflow: scroll;\n}\n\n.message_box {\n  border-radius: 24rpx 24rpx 0 0;\n  width: 100%;\n  background: #fff;\n  position: absolute;\n  z-index: 100000;\n  text-align: center;\n  animation: action_scale 0.5s infinite;\n  animation-fill-mode: forwards;\n  animation-iteration-count: 1;\n  box-sizing: border-box;\n  max-height: 80%;\n  overflow: scroll;\n}\n\n\n.message_boxWrap {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n@keyframes action_scale {\n  0% {\n    transform: scale(0.2);\n    opacity: 0;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.notify_box {\n  position: fixed;\n}\n\n.title {\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #333333;\n  border-bottom: 1rpx solid #eee;\n  height: 100rpx;\n  line-height: 100rpx;\n  position: sticky;\n  top: 0;\n  z-index: 1000000;\n  background:#fff;\n}\n\n.item {\n  height: 105rpx;\n  line-height: 105rpx;\n  text-align: center;\n  border-bottom: 1rpx solid #eee;\n}\n\n.icon-close {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  right: 30rpx;\n  top: 35rpx;\n}\n\n.icon-selected {\n  width: 44rpx;\n  height: 44rpx;\n  margin-left: 30rpx;\n}","wxml":"\n  <view class=\"picker-auto-container\">\n    <view class=\"info_wrap\">\n      <view v-for=\"(item, index) in list\">\n        <view class=\"item\" bindtap=\"select\" :data-item=\"item\">\n            {{item}}\n            \n          <image v-if=\"activeItem === item\" class=\"icon-selected\" mode=\"aspectFit\" src=\"../../images/icon-selected.png\"></image>\n        </view>\n      </view>\n    </view>\n  </view>"},"convertDir/pages/scan/component/preorderChineseDialog/preorderChineseDialog":{"js":"// pages/scan/component/preorderChineseDialog/preorderChineseDialog.js\nimport {\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\n\nexport default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    drugList: {\n      type: Array,\n      default: []\n    }\n  },\n\n  data: function() {\n    return {\n      cdnLink: cdnStaticResourceUrl,\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    reduce(e) {\n      let reduceItem = e.currentTarget.dataset.item;\n      this.triggerEvent('reduceCardNumsComp', reduceItem)\n    },\n    add(e) {\n      let addItem = e.currentTarget.dataset.item;\n      this.triggerEvent('addCardNumsComp', addItem)\n    },\n    changeNums(e) {\n      let prame = {\n        changeItem: e.currentTarget.dataset.item,\n        value: e.detail.value,\n        type: 'drugsCar'\n      }\n      this.triggerEvent('changeCardNumsComp', prame)\n    },\n    deleteDrugList(e) {\n      let deleteItem = e.currentTarget.dataset.item;\n      this.triggerEvent('deleteCardNumsComp', deleteItem)\n    },\n    checkCarnums(e) {\n      let value = e.detail.value\n      return {\n        value: value.replace(/[^\\d.]/g,\"\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n      }\n      // return {\n      //   value: value.replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n      // }\n    }\n  },\n\n  watch: {\n    drugList: function (newVal, oldVal) {\n      console.log('druglist---', newVal)\n    }\n  }\n};\n","json":{"no-data":"../../../../component/missingData/missingData"},"wxss":"/* pages/scan/component/preorderChineseDialog/preorderChineseDialog.wxss */\n\n.druglist_con {\n  margin-bottom: 156rpx;\n  background: #ffffff;\n}\n.one_line {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.drug_item {\n  height: 100rpx;\n  display: flex;\n  align-items: center;\n  font-family: PingFangSC, PingFangSC-Regular;\n  border-bottom: 1rpx solid #f7f7ff;\n}\n\n.drug_item .left {\n  flex: 1;\n  min-width: 0;\n}\n.drug_item .left .title_con {\n  display: flex;\n  align-items: center;\n}\n.drug_item .left .rx {\n  width: 46rpx;\n  height: 32rpx;\n  background-size: 100% 100%;\n  margin-right: 12rpx;\n  vertical-align: middle;\n}\n\n.drug_item .left .title {\n  font-size: 30rpx;\n  font-weight: 400;\n  color: #111734;\n  flex: 1;\n  min-width: 0;\n}\n\n.drug_item .left .number {\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #9aa0b5;\n  margin: 20rpx 0;\n}\n\n.drug_item .left .desc {\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #41465d;\n}\n\n.drug_item .right {\n  width: 160rpx;\n  height: 100rpx;\n  margin-left: 12rpx;\n  display: flex;\n  align-items: center;\n}\n\n.drug_item .right .reduce_con {\n  width: 40rpx;\n  height: 40rpx;\n}\n.drug_item .right .add_reduce {\n  width: 40rpx;\n  height: 40rpx;\n  background-size: 100% 100%;\n}\n.drug_item .icon_delete {\n  width: 44rpx;\n  height: 44rpx;\n  margin-left: 30rpx;\n}\n.drug_item .right .num {\n  width: 80rpx;\n  height: 28rpx;\n  font-size: 28rpx;\n  color: #272e36;\n  text-align: center;\n}\n.drug_item >text {\n  margin-left: 20rpx;\n}\n\n.no-data {\n  margin: 120rpx 0rpx 235rpx 0rpx;\n}","wxml":"\n  <view class=\"preorderChineseDialog-auto-container\">\n    <view class=\"druglist_con\"> \n      <scroll-view v-if=\" drugList.length > 0 \" scroll-y=\"true\" style=\"height: 534rpx;\">\n        <view class=\"drug_item\" v-for=\"(item, key) in drugList\" :key=\"key\">   \n          <view class=\"left\">\n            <view class=\"title_con\"> \n              <image class=\"rx\" v-if=\" item.prescriptionYn === '1' \" src=\"../../../../images/rx.png\"></image>\n              <text class=\"one_line title\">{{item.commonName || item.productName}}\n              </text>\n            </view>\n          </view>\n          <view class=\"right\">  \n            <view class=\"reduce_con\">\n              <image :hidden=\"item.quantity <= 0\" bindtap=\"reduce\" :data-item=\"item\" class=\"add_reduce\" src=\"../../images/reduce.png\"></image>\n            </view>\n            <input class=\"num\" type=\"text\" :value=\" item.quantity  \" bindinput=\"checkCarnums\" bindblur=\"changeNums\" :data-item=\"item\"></input>\n            <image bindtap=\"add\" :data-item=\"item\" class=\"add_reduce\" src=\"../../images/add.png\"></image>\n          </view>\n          <text>g\n          </text>\n          <image bindtap=\"deleteDrugList\" :data-item=\"item\" class=\"icon_delete\" src=\"../../images/scan-delete.png\"></image>\n        </view>\n      </scroll-view>\n      <view v-if=\" drugList.length < 1 \" class=\"no-data\">\n        <no-data v-if=\" true \" zhi=\"scanNoData\" imageUrl=\"{{ cdnLink }}images/require-list-empty.png\" textval=\"请添加预购商品\"></no-data>\n      </view>\n    </view>\n  </view>"},"convertDir/pages/scan/component/preorderDialog/preorderDialog":{"js":"// pages/scan/component/preorderDialog/preorderDialog.js\nimport {\n  cdnStaticResourceUrl\n} from \"../../../../utils/util\";\n\nexport default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    drugList: {\n      type: Array,\n      default: []\n    }\n  },\n\n  data: function() {\n    return {\n      cdnLink: cdnStaticResourceUrl,\n      // drugList: [\n        // {\n        //   pref: 1,\n        //   productName: \"感冒药1\",\n        //   attributeSpecification: \" 20片/盒\",\n        //   producingArea: \"XXXXX制药厂1\",\n        //   quantity: 1\n        // },\n        // {\n        //   pref: 2,\n        //   productName: \"感冒药2\",\n        //   attributeSpecification: \" 20片/盒\",\n        //   producingArea: \"XXXXX制药厂2\",\n        //   quantity: 2\n        // },\n        // {\n        //   pref: 3,\n        //   productName: \"感冒药3\",\n        //   attributeSpecification: \" 20片/盒\",\n        //   producingArea: \"XXXXX制药厂3\",\n        //   quantity: 3\n        // },\n        // {\n        //   pref: 4,\n        //   productName: \"感冒药4\",\n        //   attributeSpecification: \" 20片/盒\",\n        //   producingArea: \"XXXXX制药厂4\",\n        //   quantity: 4\n        // },\n        // {\n        //   pref: 5,\n        //   productName: \"感冒药5\",\n        //   attributeSpecification: \" 20片/盒\",\n        //   producingArea: \"XXXXX制药厂5\",\n        //   quantity: 5\n        // }\n      // ]\n\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    \n    loadDrugList() {\n      let value = Taro.getStorageSync('preorderdrugCart');\n      console.log('lalal', value);\n      this.setData({\n        drugList: value\n      })\n    },\n\n    reduce(e) {\n      let reduceItem = e.currentTarget.dataset.item;\n      // console.log('减少---', reduceItem);\n      // let index = this.data.drugList.findIndex(value => value.pref === reduceItem.pref);\n      // let temp = `drugList[${index}].quantity`;\n      // let _value = this.data.drugList[index].quantity - 1;\n      // if (_value < 1) {\n      //   this.data.drugList.splice(index, 1);\n      //   this.setData({\n      //     drugList: this.data.drugList\n      //   })\n      // }else {\n      //   this.setData({\n      //     [temp]: _value\n      //   })\n      // }\n      // this.saveLocalDrugCart();\n      this.triggerEvent('reduceCardNumsComp', reduceItem)\n      // this.triggerEvent('getNewCategoryNums')\n    },\n    add(e) {\n      let addItem = e.currentTarget.dataset.item;\n      // console.log('增加---', addItem)\n      // let index = this.data.drugList.findIndex(value => value.pref === addItem.pref);\n      // let temp = `drugList[${index}].quantity`;\n      // this.setData({\n      //   [temp]: this.data.drugList[index].quantity + 1\n      // }, function() {\n      //   this.saveLocalDrugCart();\n      //   this.triggerEvent('addCardNumsComp', addItem)\n      // })\n      this.triggerEvent('addCardNumsComp', addItem)\n    },\n\n    clearDrug() {\n\n      let adrugList = [\n      {\n        pref: 1,\n        productName: \"感冒药1\",\n        attributeSpecification: \" 20片/盒\",\n        producingArea: \"XXXXX制药厂1\",\n        quantity: 1\n      },\n      {\n        pref: 2,\n        productName: \"感冒药2\",\n        attributeSpecification: \" 20片/盒\",\n        producingArea: \"XXXXX制药厂2\",\n        quantity: 0\n      },\n      {\n        pref: 3,\n        productName: \"感冒药3\",\n        attributeSpecification: \" 20片/盒\",\n        producingArea: \"XXXXX制药厂3\",\n        quantity: 3\n      },\n      {\n        pref: 4,\n        productName: \"感冒药4\",\n        attributeSpecification: \" 20片/盒\",\n        producingArea: \"XXXXX制药厂4\",\n        quantity: 0\n      },\n      {\n        pref: 5,\n        productName: \"感冒药5\",\n        attributeSpecification: \" 20片/盒\",\n        producingArea: \"XXXXX制药厂5\",\n        quantity: 5\n      }\n    ]\n      let _storageArray = Taro.getStorageSync('preorderdrugCart')\n      Taro.setStorageSync(\"preorderdrugCart\", _storageArray.filter(value => value.quantity > 0));\n\n    },\n\n    saveLocalDrugCart() {\n      Taro.setStorageSync(\"preorderdrugCart\", this.data.drugList)\n    },\n    getLocalDrugCartData() {\n      return Taro.getStorageSync('preorderdrugCart')\n    }\n\n  },\n\n  watch: {\n    drugList: function (newVal, oldVal) {\n      console.log('druglist---', newVal)\n    }\n  }\n};\n","json":{"no-data":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"preorderDialog-auto-container\">\n    <view class=\"druglist_con\"> \n      <scroll-view v-if=\" drugList.length > 0 \" scroll-y=\"true\" style=\"height: 534rpx;\">\n        <view class=\"drug_item\" v-for=\"(item, key) in drugList\" :key=\"key\"> \n          <view class=\"left\"> \n            <view class=\"title_con\"> \n              <image class=\"rx\" v-if=\" item.prescriptionYn === '1' \" src=\"../../../../images/rx.png\"></image>\n              <text class=\"one_line title\">{{item.commonName || item.productName}}\n              </text>\n            </view>\n            <view class=\"one_line number\">{{item.attributeSpecification}}\n            </view>\n          </view>\n          <view class=\"right\">  \n            <view class=\"reduce_con\">\n              <image :hidden=\"item.quantity < 1\" bindtap=\"reduce\" :data-item=\"item\" class=\"add_reduce\" src=\"../../images/reduce.png\"></image>\n            </view>\n            <view class=\"num\">{{item.quantity}}\n            </view>\n            <image bindtap=\"add\" :data-item=\"item\" class=\"add_reduce\" src=\"../../images/add.png\"></image>\n          </view>\n        </view>\n      </scroll-view>\n      <view v-if=\" drugList.length < 1 \" class=\"no-data\">\n        <no-data v-if=\" true \" zhi=\"scanNoData\" imageUrl=\"{{ cdnLink }}images/require-list-empty.png\" textval=\"请添加预购商品\"></no-data>\n      </view>\n    </view>\n  </view>","wxss":"/* pages/scan/component/preorderDialog/preorderDialog.wxss */\n\n.druglist_con {\n  margin-bottom: 156rpx;\n  background: #ffffff;\n}\n.one_line {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.drug_item {\n  height: 178rpx;\n  display: flex;\n  align-items: center;\n  font-family: PingFangSC, PingFangSC-Regular;\n  border-bottom: 1rpx solid #f7f7ff;\n}\n\n.drug_item .left {\n  flex: 1;\n  min-width: 0;\n}\n.drug_item .left .title_con {\n  display: flex;\n  align-items: center;\n}\n.drug_item .left .rx {\n  width: 46rpx;\n  height: 32rpx;\n  background-size: 100% 100%;\n  margin-right: 12rpx;\n  vertical-align: middle;\n}\n\n.drug_item .left .title {\n  font-size: 30rpx;\n  font-weight: 400;\n  color: #111734;\n  flex: 1;\n  min-width: 0;\n}\n\n.drug_item .left .number {\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #9aa0b5;\n  margin: 20rpx 0;\n}\n\n.drug_item .left .desc {\n  font-size: 24rpx;\n  font-weight: 400;\n  color: #41465d;\n}\n\n.drug_item .right {\n  width: 160rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n  margin-left: 12rpx;\n}\n\n.drug_item .right .reduce_con {\n  display: inline-block;\n  width: 40rpx;\n  height: 40rpx;\n}\n.drug_item .right .add_reduce {\n  width: 40rpx;\n  height: 40rpx;\n  vertical-align: middle;\n  background-size: 100% 100%;\n}\n.drug_item .right .num {\n  display: inline-block;\n  width: 80rpx;\n  height: 28rpx;\n  font-size: 28rpx;\n  color: #272e36;\n  text-align: center;\n}\n\n\n.no-data {\n  margin: 120rpx 0rpx 235rpx 0rpx;\n}"},"convertDir/pages/scan/component/scanTabBar/scanTabBar":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    active: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data: function() {\n   return {\n\n   };\n  },\n  lifetimes: {\n\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n\n  }\n};\n","wxml":"\n  <view class=\"scanTabBar-auto-container\">\n    <view class=\"scan-tab-bar-container\">      \n      <view></view>\n      <view :class=\"[scan-tab-bar-item,( active === '1'?'active':'' )]\">填写信息\n      </view>\n      <image mode=\"widthFix\" class=\"scan-icon-right-tab-bar\" src=\"../../../../images/icon-arrow.png\"></image>\n      <view :class=\"[scan-tab-bar-item,( active === '2'?'active':'' )]\">咨询医生\n      </view>\n      <image mode=\"widthFix\" class=\"scan-icon-right-tab-bar\" src=\"../../../../images/icon-arrow.png\"></image>\n      <view :class=\"[scan-tab-bar-item,( active === '3'?'active':'' )]\">查看处方\n      </view>\n      <view></view>\n    </view>\n  </view>","json":{},"wxss":".scan-tab-bar-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 84rpx;\n  background-color: #FFFFFF;\n}\n\n.scan-tab-bar-item {\n  font-size: 28rpx;\n  color: #999999;\n}\n\n.scan-tab-bar-item.active {\n  color: #00b955;\n  font-weight: 600;\n}\n\n.scan-icon-right-tab-bar {\n  width: 28rpx;\n  height: 28rpx;\n  margin: 0 30rpx;\n}"},"convertDir/pages/scan/pages/addInformation/addInformation":{"json":{"scan-tab-bar":"../../component/scanTabBar/scanTabBar","halfScreenDialog":"../../../../component/halfScreenDialog/halfScreenDialog","patientInfo":"../../component/patientInfo/patientInfo","diagnose":"../../component/diagnose/diagnose","dataPicker":"../../component/picker/picker","no-data":"../../../../component/missingData/missingData","missingData-view":"../../../../component/missingData/missingData"},"wxss":"@import '../../../../common/tableView.wxss';\n\nview {\n  box-sizing: border-box;\n}\n\n/*视频问诊*/\n.inquiry-header {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  font-size: 32rpx;\n  font-weight: 400;\n  color: #292933;\n  padding-top: 24rpx;\n}\n\n.inquiry-image,\n.inquiry-video {\n  flex: 1;\n  width: 327rpx;\n  height: 114rpx;\n  line-height: 112rpx;\n  text-align: center;\n  border-radius: 16rpx;\n  border: 1rpx solid #eee;\n  box-shadow: 0 0 15rpx 0 rgba(48, 48, 60, 0.05);\n}\n\n.inquiry-image {\n  margin-right: 32rpx;\n}\n\n.inquiry-active {\n  border: 1rpx solid #00b955;\n  box-shadow: none;\n  background: #f3faff;\n}\n\n.inquiry-icon {\n  width: 74rpx;\n  height: 74rpx;\n  margin-right: 20rpx;\n  vertical-align: middle;\n}\n\n.inquiry-record-btn {\n  position: relative;\n  font-size: 24rpx;\n  color: #41465d;\n}\n\n.inquiry-record-icon {\n  width: 44rpx;\n  height: 44rpx;\n  margin: 0 auto;\n  margin-bottom: 14rpx;\n}\n\n/********/\n/*******问诊同步灵芝*******/\n.add-grey {\n  color: #c7c7cc;\n  font-weight: 700;\n}\n\n.info-item .info-item-scan {\n  text-align: center;\n  border-left: 1rpx solid #e2e3ea;\n  padding: 0 10rpx 0 30rpx;\n  margin-left: 20rpx;\n}\n\n.info-item .info-item-scan>view {\n  font-size: 22rpx;\n  color: #00b955;\n}\n\n.info-item .icon-scan {\n  width: 48rpx;\n  height: 48rpx;\n}\n\n.allergy-container,\n.diagnose-des-container {\n  height: 650rpx;\n  padding: 32rpx 0;\n}\n\n.allergy-container .allergy-btn-container,\n.diagnose-des-container .diagnose-btn-container {\n  box-sizing: border-box;\n  width: 100%;\n}\n\n.allergy-container .allergy-finish-btn,\n.diagnose-des-container .diagnose-finish-btn {\n  color: #FFFFFF;\n  font-size: 32rpx;\n  font-weight: 600;\n  width: 100%;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background: #00b955;\n  border-radius: 48px;\n  margin-top: 298rpx;\n}\n\n.read-agreement {\n  margin-top: 40rpx;\n}\n\n.red-dot {\n  position: absolute;\n  top: 0;\n  right: 24rpx;\n  width: 14rpx;\n  height: 14rpx;\n  background: #ef4d4d;\n  border-radius: 50%;\n}\n\n.drug-right {\n  justify-content: flex-start;\n}\n\n.newbie-lead {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  left: 0;\n  background: rgba(5, 6, 15, 0.55);\n  padding: 0 15rpx;\n}\n\n.newbie-lead-type {\n  width: 720rpx;\n  position: absolute;\n  top: 195rpx;\n}\n\n.newbie-lead-add {\n  width: 720rpx;\n  position: absolute;\n  top: 455rpx;\n}\n\n.close-newbie-lead {\n  width: 318rpx;\n  height: 96rpx;\n  line-height: 92rpx;\n  border: 2rpx solid #fff;\n  border-radius: 48rpx;\n  color: #fff;\n  text-align: center;\n  position: absolute;\n  bottom: 190rpx;\n  left: 216rpx;\n}\n\n.is-inquiry {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  left: 0;\n  background: rgba(5, 6, 15, 0.55);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.is-inquiry-container {\n  width: 560rpx;\n  height: 293rpx;\n  background: #fff;\n  border-radius: 16rpx;\n  text-align: center;\n  position: relative;\n  line-height: 70rpx;\n  padding-top: 30rpx;\n}\n\n.is-inquiry-container view:first-child {\n  font-size: 36rpx;\n  font-weight: 500;\n  color: #111334;\n}\n\n.is-inquiry-container view:nth-child(2) {\n  font-size: 30rpx;\n  font-weight: 400;\n  color: #41435d;\n}\n\n.is-inquiry-btn {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  height: 98rpx;\n  border-top: 1rpx solid #e2e3ea;\n  display: flex;\n}\n\n.is-inquiry-btn view:first-child,\n.is-inquiry-btn view:last-child {\n  line-height: 98rpx;\n  text-align: center;\n  flex: 1;\n  font-size: 36rpx;\n  font-weight: 400;\n}\n\n.is-inquiry-btn view:first-child {\n  border-right: 1rpx solid #e2e3ea;\n  color: #111334;\n}\n\n.is-inquiry-btn view:last-child {\n  color: #00b955;\n}\n\n.diagnose-container {\n  padding: 32rpx 0;\n}\n\n.search-container {\n  display: flex;\n  align-items: center;\n}\n\n.input-container {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  height: 74rpx;\n  background-color: #F1F2F6;\n  border-radius: 437rpx;\n  padding: 16rpx 22rpx;\n}\n\n.input-container .search-icon {\n  width: 36rpx;\n  height: 36rpx;\n}\n\n.search-btn {\n  width: 64rpx;\n  margin-left: 20rpx;\n}\n\n.search-input {\n  width: 100%;\n  height: 100%;\n  padding: 0 14rpx;\n}\n\n.tab-title {\n  margin-top: 32rpx;\n}\n\n.pub-text {\n  color: #111734;\n  font-size: 32rpx;\n  font-weight: 600;\n}\n\n.pub-tab {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 32rpx;\n}\n\n.pub-tab-item {\n  display: flex;\n  align-items: center;\n  color: #41465D;\n  font-size: 28rpx;\n  background-color: #F2F3F7;\n  border: 1rpx solid #F2F3F7;\n  border-radius: 32rpx;\n  margin-right: 32rpx;\n  margin-bottom: 20rpx;\n  padding: 18rpx 30rpx;\n}\n\n.pub-tab-item.pub-tab-item-active {\n  color: #00b955;\n  background: rgba(0, 122, 255, 0.08);\n  /*border: 1rpx solid #00b955;*/\n}\n\n.pub-tab-item-del {\n  width: 32rpx;\n  height: 32rpx;\n  margin-left: 16rpx;\n}\n\n.scroll-view-container {\n  width: 100%;\n  height: 600rpx;\n  margin: 15rpx 0 20rpx;\n}\n\n.diagnose-list {\n  width: 100%;\n  padding: 20rpx 0;\n}\n\n.diagnose-list-item {\n  display: flex;\n  align-items: center;\n  border-bottom: 1rpx solid #F7F7F7;\n  padding: 30rpx 0;\n}\n\n.btn-container {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 32rpx;\n}\n\n.finish-btn {\n  color: #FFFFFF;\n  font-size: 32rpx;\n  font-weight: 600;\n  width: 100%;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background: #00b955;\n  border-radius: 48px;\n}\n\n/***********/\n.star-opacity {\n  opacity: 0;\n}\n\n.info-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.info-step {\n  position: fixed;\n  left: 0;\n  z-index: 99;\n  width: 100%;\n  background-color: #fff;\n}\n\n.info-content {\n  box-sizing: border-box;\n  flex: 1;\n  width: 100%;\n  background-color: #FFFFFF;\n  margin-top: 75rpx;\n  padding: 0 32rpx 165rpx;\n}\n\n.info-content .info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1rpx solid #F7F7F7;\n  padding: 32rpx 0;\n}\n\n.info-content .no-bottom-bd {\n  border-bottom: none;\n}\n\n.info-item .info-item-left {\n  color: #111734;\n  font-size: 32rpx;\n  font-weight: 500;\n  min-width: 190rpx;\n}\n\n.info-item-left .red-start {\n  color: #F65455;\n}\n\n.info-item-left .gray-remind {\n  color: #999;\n  font-size: 28rpx;\n}\n\n.info-item-right {\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.info-item-right .text {\n  flex: 1;\n  font-weight: 400;\n  text-align: right;\n}\n\n.info-item-right .text-name {\n  display: inline-block;\n  color: #111734;\n  text-align: left;\n}\n\n.default-text {\n  color: #999;\n}\n\n.info-item-right .patient-name {\n  color: #111734;\n}\n\n.info-item-right .icon-right {\n  width: 28rpx;\n  height: 28rpx;\n  margin-left: 12rpx;\n}\n\n.radio-container label:first-child {\n  margin-right: 100rpx;\n}\n\n.radio-container text {\n  margin-left: 20rpx;\n}\n\n.tabs-container {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 10rpx;\n}\n\n.textarea-container {\n  position: relative;\n}\n\n.textarea-container.is-visibility {\n  visibility: hidden;\n}\n\n.textarea-container textarea {\n  padding: 16rpx;\n}\n\n.textarea-container .word-number {\n  position: absolute;\n  right: 24rpx;\n  bottom: 24rpx;\n}\n\n.word-number .limit-number {\n  color: #9AA0B5;\n}\n\n.tabs-container .tab-item {\n  word-break: break-all;\n  color: #41465D;\n  /*height: 64rpx;*/\n  /*line-height: 64rpx;*/\n  /*text-align: center;*/\n  background: #F2F3F7;\n  border-radius: 32px;\n  margin-right: 32rpx;\n  margin-bottom: 20rpx;\n  padding: 12rpx 30rpx;\n  border: 1px solid #F2F3F7;\n}\n\n.tab-item.tab-item-active {\n  color: #00b955;\n  background: rgba(0, 122, 255, 0.08);\n  border-color: #00b955;\n}\n\n.placeholder-class {\n  color: #9AA0B5;\n  font-size: 28rpx;\n}\n\ntextarea {\n  box-sizing: border-box;\n  color: #111734;\n  font-size: 28rpx;\n  line-height: 28rpx;\n  height: 200rpx;\n  width: 100%;\n  background-color: #F7F8FA;\n  border-radius: 12rpx;\n  padding: 24rpx;\n}\n\n/* .read-checkbox {\n  display: flex;\n  padding: 30rpx 0;\n}\n.read-checkbox text {\n  color: #41465D;\n  font-size: 28rpx;\n}\n.read-checkbox .read-link {\n  color: #00b955;\n}\n.read-checkbox checkbox {\n  opacity: 0;\n}\n.read-checkbox image {\n  position: absolute;\n  top: 6rpx;\n  left: 5rpx;\n  width: 36rpx;\n  height: 36rpx;\n  border-radius: 50%;\n} */\n.read-checkbox text {\n  color: #41465D;\n  font-size: 28rpx;\n}\n\n.read-checkbox .read-link {\n  color: #00b955;\n}\n\n.btn-container {\n  box-sizing: border-box;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  z-index: 99;\n  width: 100%;\n  padding: 30rpx 32rpx 30rpx 47rpx;\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n}\n\n.inquiry-btn {\n  color: #FFFFFF;\n  font-size: 32rpx;\n  font-weight: 600;\n  width: 528rpx;\n  margin-left: 47rpx;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background: #00b955;\n  border-radius: 48px;\n}\n\n.btn-container button {\n  height: 88rpx;\n  color: #fff;\n  background: #00b955;\n  border-radius: 50rpx;\n}\n\n\n.radio-ref .wx-radio-input {\n  width: 32rpx;\n  height: 32rpx;\n  border-radius: 32rpx;\n  background: #F5F5F5;\n  border: 1rpx solid #DFDFDF;\n  box-sizing: border-box;\n}\n\n.radio-ref .wx-radio-input.wx-radio-input-checked {\n  background: #00b955 !important;\n  border: 0;\n  border-radius: 32rpx;\n}\n\n.djk-view radio .wx-radio-input.wx-radio-input-checked {\n  background: #00b955 !important;\n}\n\n.radio-ref .wx-radio-input.wx-radio-input-checked::before {\n  width: 32rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  text-align: center;\n  font-size: 25rpx;\n  color: #fff;\n  transform: translate(-50%, -50%) scale(1);\n}\n\n/* 中药 部分开始*/\n.info-medicine {\n  margin-top: 30rpx;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.info-medicine:after {\n  content: \"\";\n  width: 330rpx;\n}\n\n.info-medicine-wrap {\n  width: 330rpx;\n  border: 1rpx solid #F0F0F0;\n  border-radius: 8rpx;\n  height: 140rpx;\n  padding: 20rpx;\n  box-sizing: border-box;\n  margin-bottom: 20rpx;\n}\n\n.info-medicine-name {\n  font-size: 28rpx;\n  overflow:hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.info-medicine-num {\n  display: flex;\n  align-content: center;\n  margin-top: 18rpx;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.icon-del {\n  width: 44rpx;\n  height: 44rpx;\n\n}\n\n.info-medicine-del {\n  width: 46rpx;\n  height: 46rpx;\n  display: flex;\n  align-content: center;\n  justify-items: center;\n}\n\n.info-medicine-input {\n  display: flex;\n  height: 46rpx;\n}\n\n.info-medicine-ipt {\n  width: 100rpx; \n  height: 45rpx; \n  line-height: 45rpx;\n  box-sizing: border-box;\n  border-bottom: 1px solid #d8d8d8;\n  margin-right: 1rpx;\n  align-self: center;\n  text-align: center;\n}\n\n.phcolor {\n  color: #00b955;\n}\n.medicine-take-ways{\n  margin-top: 10rpx;\n  border-top: 1rpx solid #f7f7f7;\n}\n.medicine-ways-item {\n  height: 106rpx;\n  line-height: 106rpx;\n  display: flex;\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  color: #222222;\n  border-bottom: 1rpx solid #f7f7f7;\n  padding-left: 18rpx;\n  align-items: center;\n}\n\n.medicine-ways-ipt {\n  width: 80rpx;\n  height: 45rpx;\n  padding: 0 12rpx;\n  box-sizing: border-box;\n  color: #00b955;\n  border-bottom: 1rpx solid #dddddd;\n  align-self: center;\n}\n.medicine-ways-item >input{\n  text-align: center;\n}\n.medicine-ways-left {\n  width: 150rpx;\n  margin-right: 50rpx;\n}\n\n.medicine-ways-center {\n  width: 448rpx;\n  margin-right: 16rpx;\n  color: #999999;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.icon-arrow{\n  width: 28rpx;\n  height: 28rpx;\n}\n/* 用法用量 */\n.notify_box {\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 100000;\n  width: 100%;\n  background-color: rgba(5, 5, 5, 0.55);\n}\n\n.info_wrap {\n  max-height: 50vh;\n  overflow: scroll;\n}\n\n.message_box {\n  border-radius: 24rpx 24rpx 0 0;\n  width: 100%;\n  background: #fff;\n  position: absolute;\n  z-index: 100000;\n  text-align: center;\n  animation: action_scale 0.5s infinite;\n  animation-fill-mode: forwards;\n  animation-iteration-count: 1;\n  box-sizing: border-box;\n  max-height: 80%;\n  overflow: scroll;\n}\n\n\n.message_boxWrap {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n@keyframes action_scale {\n  0% {\n    transform: scale(0.2);\n    opacity: 0;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.notify_box {\n  position: fixed;\n}\n\n.title {\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #333333;\n  border-bottom: 1rpx solid #eee;\n  height: 100rpx;\n  line-height: 100rpx;\n  position: sticky;\n  top: 0;\n  z-index: 1000000;\n  background:#fff;\n}\n\n.item {\n  height: 105rpx;\n  line-height: 105rpx;\n  text-align: center;\n  border-bottom: 1rpx solid #eee;\n  position: relative;\n}\n.item text{\n  width:80%;\n  padding-left:10%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  display: block;\n}\n.icon-close {\n  width: 30rpx;\n  height: 30rpx;\n  position: absolute;\n  right: 30rpx;\n  top: 35rpx;\n}\n\n.icon-selected {\n  width: 44rpx;\n  height: 44rpx;\n  margin-left: 30rpx;\n  position: absolute;\n  top:30rpx;\n  right:30rpx;\n\n}","wxml":"\n  <view class=\"addInformation-auto-container\">\n    <view class=\"info-container\" :style=\"{width:100%,height:  windowHeight px,position:  isBtn || isStatus ? 'relative':'fixed' }\"> \n      <view v-if=\"organSignFlag\">          \n        <navBar :title-text=\"pageFrom!= 'drugList'?drugStoreName:'复诊开方'\" :isCustom=\"true\" :isIconHide=\" pageFrom != 'drugList' ? true : false\" :leftStatus=\" pageFrom != 'drugList' ? true : false\"></navBar>\n        <view v-if=\"newbieLeadShow\" class=\"newbie-lead\" :style=\"{height: windowHeight}\">  \n          <image class=\"newbie-lead-type\" mode=\"widthFix\" :src=\" cdnLink + 'images/icon-newbie-lead2.png' \"></image>\n          <image class=\"newbie-lead-add\" mode=\"widthFix\" :src=\" cdnLink + 'images/icon-newbie-lead1.png' \"></image>\n          <view bindtap=\"closeNewbieLead\" class=\"close-newbie-lead\">我知道了\n          </view>\n        </view>\n        <view v-if=\"hasInquiryStatus\" class=\"is-inquiry\" :style=\"{height: windowHeight}\">\n          <view class=\"is-inquiry-container\">  \n            <view>您当前有进行中的问诊\n            </view>\n            <view>是否返回当前问诊或重新发起问诊\n            </view>\n            <view class=\"is-inquiry-btn\"> \n              <view bindtap=\"backInquiry\">重新发起\n              </view>\n              <view bindtap=\"goInquiryRecord\">返回问诊\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"info-step\" :style=\"{top:  navBarHeight px}\">\n          <scan-tab-bar active=\"1\"></scan-tab-bar>\n        </view>\n        <scroll-view class=\"info-content\" scroll-y=\"true\" :style=\"{padding-bottom: isIPX ? '187rpx' : '165rpx'}\">                 \n          <view class=\"inquiry-header\" v-if=\"inquiryTypeStatus\"> \n            <view :class=\"[inquiry-image,( inquiryType === 'image'?'inquiry-active':'' )]\" bindtap=\"inquiryTypeChoose\" data-type=\"image\">\n\t\t\t\t\t图文问诊\n\t\t\t\t\n              <image class=\"inquiry-icon\" mode=\"widthFix\" src=\"../../../../images/icon-inquiry-image.png\"></image>\n            </view>\n            <view :class=\"[inquiry-video,( inquiryType === 'video'?'inquiry-active':'' )]\" bindtap=\"inquiryTypeChoose\" data-type=\"video\">\n\t\t\t\t\t视频问诊\n\t\t\t\t\n              <image class=\"inquiry-icon\" mode=\"widthFix\" src=\"../../../../images/icon-inquiry-video.png\"></image>\n            </view>\n          </view>\n          <view class=\"info-item\"> \n            <view class=\"info-item-left\"> \n              <text class=\"red-start\">*\n              </text>\n              <text>添加患者\n              </text>\n            </view>\n            <view class=\"info-item-right\" bindtap=\"addPatient\">  \n              <view v-if=\" patientName \" class=\"default-text patient-name\">{{ patientName }}\n              </view>\n              <view class=\"default-text\" v-else>新增\n              </view>\n              <image class=\"icon-right\" mode=\"widthFix\" :src=\" iconRightSrc \"></image>\n            </view>\n          </view>\n          <view class=\"info-item\"> \n            <view class=\"info-item-left\"> \n              <text class=\"red-start\">*\n              </text>\n              <text>用药类型\n              </text>\n            </view>\n            <view class=\"info-item-right\" style=\"justify-content: flex-start\">\n              <radio-group bindchange=\"handleChangeMedicineType\" class=\"radio-container\" data-type=\"medicineType\">\n                <label :for=\" item.id \" v-for=\"(item, value) in  medicineTypeArr \" :key=\"value\"> \n                  <radio :id=\" item.id \" class=\"radio-ref\" :value=\" item.value \" :checked=\" medicineType == item.value \" color=\"#00CCBB\"></radio>\n                  <text>{{ item.label }}\n                  </text>\n                </label>\n              </radio-group>\n            </view>\n          </view>\n          <view class=\"info-item\" v-if=\"medicineType==0\">  \n            <view class=\"info-item-left\"> \n              <text :class=\"[red-start,(inquiryType === 'image' ? '' : 'star-opacity')]\">*\n              </text>\n              <text>预购药品\n              </text>\n            </view>\n            <view class=\"info-item-right drug-right\" bindtap=\"goPreorderDrug\"> \n              <view class=\"text\" v-if=\" drugText \">\n                <view class=\"text-name\">{{ drugText }}\n                </view>\n              </view>\n              <view class=\"default-text\" v-else>选择药品,支持扫码加药\n              </view>\n            </view>\n            <view class=\"info-item-scan\" bindtap=\"getCameraScan\"> \n              <image class=\"icon-scan\" mode=\"widthFix\" src=\"../../../../images/icon-scan.png\"></image>\n              <view>扫码加药\n              </view>\n            </view>\n          </view>\n          <view class=\"info-item\" v-if=\"medicineType==1\"> \n            <view class=\"info-item-left\"> \n              <text :class=\"[red-start,(inquiryType === 'image' ? '' : 'star-opacity')]\">*\n              </text>\n              <text>预购药品\n              </text>\n            </view>\n            <view class=\"info-item-right drug-right\" bindtap=\"goPreorderDrug\"> \n              <view class=\"text\" v-if=\" drugTextCn \">\n                <view class=\"text-name\">{{ drugTextCn }}\n                </view>\n              </view>\n              <view class=\"default-text\" v-else>请选择预购药品\n              </view>\n            </view>\n          </view>\n          <view class=\"medicineCn\" v-if=\"medicineType==1 && drugObjCn.length>0\"> \n            <view class=\"info-medicine\">\n              <view v-for=\"(item, index) in  drugObjCn \" :key=\"index\" :data-item=\" item \" class=\"info-medicine-wrap\"> \n                <view class=\"info-medicine-name\">\n\t\t\t\t\t\t{{item.commonName || item.productName}}\n\t\t\t\t\t\n                </view>\n                <view class=\"info-medicine-num\"> \n                  <view class=\"info-medicine-del\" bindtap=\"delItem\" :data-index=\"index\">\n                    <image class=\"icon-del\" mode=\"aspectFit\" src=\"../../images/del.png\"></image>\n                  </view>\n                  <view class=\"info-medicine-input\">\n\t\t\t\t\t\t\tg\n\t\t\t\t\t\t\n                    <input class=\"info-medicine-ipt\" type=\"digit\" :value=\"item.quantity\" placeholder-class=\"phcolor\" bindblur=\"setIpt\" :data-index=\"index\"></input>\n                  </view>\n                </view>\n              </view>\n            </view>\n            <view class=\"medicine-take-ways\">  \n              <view class=\"medicine-ways-item\">\n\t\t\t\t\t共\n\t\t\t\t\t \n\t\t\t\t\t副，每日\n\t\t\t\t\t\n\t\t\t\t\t副，每日服用\n\t\t\t\t\t\n\t\t\t\t\t次\n\n\t\t\t\t\n                <text style=\"color: #ff3b30;\" v-if=\"inquiryType=='image'\">*\n                </text>\n                <input type=\"digit\" class=\"medicine-ways-ipt\" :value=\"dosageAndUsage.tcmTotalDosage\" placeholder-class=\"phcolor\" bindblur=\"blurDosageAndUsage\" bindinput=\"editDosageAndUsage\" data-type=\"tcmTotalDosage\"></input>\n                <input type=\"digit\" placeholder-class=\"phcolor\" :value=\"dosageAndUsage.tcmDailyDosage\" class=\"medicine-ways-ipt\" bindblur=\"blurDosageAndUsage\" bindinput=\"editDosageAndUsage\" data-type=\"tcmDailyDosage\"></input>\n                <input type=\"digit\" class=\"medicine-ways-ipt\" :value=\"dosageAndUsage.tcmDailyFrequency\" placeholder-class=\"phcolor\" bindblur=\"blurDosageAndUsage\" bindinput=\"editDosageAndUsage\" data-type=\"tcmDailyFrequency\"></input>\n              </view>\n              <view class=\"medicine-ways-item\" bindtap=\"changePicker\" data-index=\"1\">  \n                <view class=\"medicine-ways-left\">用法\n                </view>\n                <view class=\"medicine-ways-center\">{{dosageAndUsage.tcmUsage||'请选择用法'}}\n                </view>\n                <image class=\"icon-arrow\" mode=\"aspectFit\" src=\"../../images/medicine_arrow.png\"></image>\n              </view>\n              <view class=\"medicine-ways-item\" bindtap=\"changePicker\" data-index=\"2\">  \n                <view class=\"medicine-ways-left\">加工方式\n                </view>\n                <view class=\"medicine-ways-center\">\n\t\t\t\t\t\t{{dosageAndUsage.tcmProcessingMethod||'请选择加工方式'}}\n\t\t\t\t\t\n                </view>\n                <image class=\"icon-arrow\" mode=\"aspectFit\" src=\"../../images/medicine_arrow.png\"></image>\n              </view>\n            </view>\n          </view>\n          <halfScreenDialog :show=\"pickerShowUsage\" maskClosable=\"true\" :title=\"usageTitle\" style=\"padding: 0;!important;\" bind:close=\"closePicker\">\n            <view slot=\"desc\">\n              <view class=\"info_wrap\">\n                <view v-for=\"(item, index) in tcmUsageArr\">\n                  <view class=\"item\" bindtap=\"selectUsage\" :data-item=\"item\"> \n                    <text>{{item.tcmUsage}}\n                    </text>\n                    <image v-if=\"dosageAndUsage.tcmUsage === item.tcmUsage\" class=\"icon-selected\" mode=\"aspectFit\" src=\"../../images/icon-selected.png\"></image>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </halfScreenDialog>\n          <halfScreenDialog :show=\"pickerShowMethod\" maskClosable=\"true\" :title=\"methodTitle\" style=\"padding: 0;!important;\" bind:close=\"closePicker\">\n            <view slot=\"desc\">\n              <view class=\"info_wrap\">\n                <view v-for=\"(item, index) in tcmProcessingMethodArr\">\n                  <view class=\"item\" bindtap=\"selectProcessingMethod\" :data-item=\"item\"> \n                    <text>{{item.tcmProcessingMethod}}\n                    </text>\n                    <image v-if=\"dosageAndUsage.tcmProcessingMethod === item\" class=\"icon-selected\" mode=\"aspectFit\" src=\"../../images/icon-selected.png\"></image>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </halfScreenDialog>\n          <view class=\"diagnoseWest\" v-if=\"medicineType == 0\"> \n            <view class=\"info-item no-bottom-bd\">\n              <view class=\"info-item-left\">  \n                <text :class=\"[red-start,(inquiryType === 'image' ? '' : 'star-opacity')]\">*\n                </text>\n                <text>诊断\n                </text>\n                <text class=\"gray-remind\">（最多可选5项）\n                </text>\n              </view>\n            </view>\n            <view class=\"tabs-container\"> \n              <view v-if=\" choicedDiagnose \" :class=\"[tab-item,( item.isActive? 'tab-item-active':'')]\" v-for=\"(item, id) in  choicedDiagnose \" :key=\"id\" bindtap=\"onChooseIllness\" :data-item=\" item \">\n\t\t\t\t\t{{ item.diagnosticName }}\n\t\t\t\t\n              </view>\n              <view class=\"tab-item\" bindtap=\"showDiagnoseDialog\"> 添加\n                <text class=\"add-grey\">+\n                </text>\n              </view>\n            </view>\n          </view>\n          <view class=\"diagnoseCn\" v-if=\"medicineType==1\"> \n            <view class=\"info-item no-bottom-bd\">\n              <view class=\"info-item-left\">  \n                <text :class=\"[red-start,(inquiryType === 'image' ? '' : 'star-opacity')]\">*\n                </text>\n                <text>诊断\n                </text>\n                <text class=\"gray-remind\">（最多可选5项）\n                </text>\n              </view>\n            </view>\n            <view class=\"tabs-container\"> \n              <view v-if=\" choicedDiagnoseCn \" :class=\"[tab-item,( item.isActive? 'tab-item-active':'')]\" v-for=\"(item, id) in  choicedDiagnoseCn \" :key=\"id\" bindtap=\"onChooseIllnessCn\" :data-item=\" item \">\n\t\t\t\t\t{{ item.diagnosticName }}\n\t\t\t\t\n              </view>\n              <view class=\"tab-item\" bindtap=\"showDiagnoseDialogCn\"> 添加\n                <text class=\"add-grey\">+\n                </text>\n              </view>\n            </view>\n          </view>\n          <view class=\"info-item no-bottom-bd\">\n            <view class=\"info-item-left\">  \n              <text class=\"red-start\" style=\"visibility: hidden;\">*\n              </text>\n              <text>病情描述\n              </text>\n              <text class=\"gray-remind\">（最多可选5项）\n              </text>\n            </view>\n          </view>\n          <view>\n            <view class=\"tabs-container\"> \n              <view :class=\"[tab-item,( item.isActive? 'tab-item-active':'' )]\" v-for=\"(item, id) in  diseaseArr \" :key=\"id\" bindtap=\"onChoiceDisease\" :data-item=\" item \">{{ item.name }}\n\t\t\t\t\t\n              </view>\n              <view class=\"tab-item\" bindtap=\"openDiseaseDes\"> 添加\n                <text class=\"add-grey\">+\n                </text>\n              </view>\n            </view>\n          </view>\n          <view class=\"info-item no-bottom-bd\">\n            <view class=\"info-item-left\">  \n              <text class=\"red-start\">*\n              </text>\n              <text>过敏史\n              </text>\n              <text class=\"gray-remind\">（可多选）\n              </text>\n            </view>\n          </view>\n          <view>\n            <view class=\"tabs-container\">  \n              <view :class=\"[tab-item,( notIsActive? 'tab-item-active':'' )]\" bindtap=\"chooseNot\">无\n              </view>\n              <view :class=\"[tab-item,( item.isActive? 'tab-item-active':'' )]\" v-for=\"(item, id) in  allergyList \" :key=\"id\" bindtap=\"onChoiceAllergyItem\" :data-item=\" item \">{{ item.name }}\n\t\t\t\t\t\n              </view>\n              <view class=\"tab-item\" bindtap=\"openAllergy\"> 添加\n                <text class=\"add-grey\">+\n                </text>\n              </view>\n            </view>\n          </view>\n          <view class=\"info-item\"> \n            <view class=\"info-item-left\"> \n              <text class=\"red-start\">*\n              </text>\n              <text>肝、肾功能异常\n              </text>\n            </view>\n            <view class=\"info-item-right\">\n              <radio-group bindchange=\"radioChange\" class=\"radio-container\" data-type=\"liverAndRenalFunction\">\n                <label :for=\" item.id \" v-for=\"(item, value) in  radioArr \" :key=\"value\"> \n                  <radio :id=\" item.id \" class=\"radio-ref\" :value=\" item.value \" :checked=\" liverAndRenalFunction === item.value \" color=\"#00CCBB\"></radio>\n                  <text>{{ item.label }}\n                  </text>\n                </label>\n              </radio-group>\n            </view>\n          </view>\n          <view class=\"info-item\" v-if=\" userGender === 2 \"> \n            <view class=\"info-item-left\"> \n              <text class=\"red-start\">*\n              </text>\n              <text>是否妊娠、哺乳期\n              </text>\n            </view>\n            <view class=\"info-item-right\">\n              <radio-group bindchange=\"radioChange\" class=\"radio-container\" data-type=\"pregnancyAndLactation\">\n                <label :for=\" item.id \" v-for=\"(item, value) in  radioArr \" :key=\"value\"> \n                  <radio :id=\" item.id \" class=\"radio-ref\" :value=\" item.value \" :checked=\" pregnancyAndLactation === item.value \" color=\"#00CCBB\"></radio>\n                  <text>{{ item.name }}\n                  </text>\n                </label>\n              </radio-group>\n            </view>\n          </view>\n          <view class=\"info-item\"> \n            <view class=\"info-item-left\"> \n              <text class=\"red-start\">*\n              </text>\n              <text>是否复诊\n              </text>\n            </view>\n            <view class=\"info-item-right\">\n              <radio-group bindchange=\"radioChange\" class=\"radio-container\" data-type=\"offlineDiagnosis\">\n                <label :for=\" item.id \" v-for=\"(item, value) in  isSubsequentArr \" :key=\"value\"> \n                  <radio :id=\" item.id \" class=\"radio-ref\" :value=\" item.value \" :checked=\" offlineDiagnosis === item.value \" color=\"#00CCBB\"></radio>\n                  <text>{{ item.name }}\n                  </text>\n                </label>\n              </radio-group>\n            </view>\n          </view>\n          <view class=\"read-agreement\">\n            <checkbox-group class=\"read-checkbox\" bindchange=\"readAndAgreeChange\">\n              <view>    \n                <label for=\"readAndAgree\">\n                  <checkbox id=\"readAndAgree\" value=\"cb\" :checked=\"isReadAndAgree\"></checkbox>\n                </label>\n                <text>我已详细阅读并同意\n                </text>\n                <text bindtap=\"goWebviewLoadUrl\" data-linkurl=\"1\" class=\"read-link\">《问诊知情同意书》\n                </text>\n                <text>和\n                </text>\n                <text bindtap=\"goWebviewLoadUrl\" data-linkurl=\"2\" class=\"read-link\">《海南宜贰叁互联网医院服务协议》\n                </text>\n              </view>\n            </checkbox-group>\n          </view>\n        </scroll-view>\n        <cover-view class=\"btn-container\" v-if=\" isBtn \" :style=\"{padding-bottom: isIPX ? '52rpx' : '30rpx'}\"> \n          <cover-view class=\"inquiry-record-btn\" bindtap=\"goInquiryRecord\">  \n            <cover-image class=\"inquiry-record-icon\"></cover-image>\n            <cover-view>问诊记录\n            </cover-view>\n            <cover-view :class=\"[( redDot ? 'red-dot' : '')]\"></cover-view>\n          </cover-view>\n          <cover-view class=\"inquiry-btn\" bindtap=\"goInquiry\">去问诊\n          </cover-view>\n        </cover-view>\n        <halfScreenDialog :show=\"addPatientShow\" :maskClosable=\"true\" title=\"患者管理\" style=\"padding: 0;!important;\" bind:close=\"dialogClose\">\n          <patientInfo id=\"patientinfoRef\" slot=\"desc\" channel=\"scanType\" bind:addText=\"addText\" :style=\"{padding-bottom:  tabbarHeight px}\"></patientInfo>\n        </halfScreenDialog>\n        <halfScreenDialog :show=\" isDiagnoseDialogShow \" :maskClosable=\"true\" title=\"诊断\" bind:close=\"diagnoseClose\">\n          <view slot=\"desc\">\n            <view class=\"diagnose-container\"> \n              <view class=\"search-container\"> \n                <view class=\"input-container\">  \n                  <image mode=\"widthFix\" class=\"search-icon search-icon\" src=\"../../../../images/search-icon-black.png\"></image>\n                  <input type=\"text\" class=\"search-input\" :value=\" keyword \" bindinput=\"onKeywordText\" placeholder=\"请输入诊断\"></input>\n                  <image v-if=\" keyword \" class=\"search-icon\" bindtap=\"clearKeyword\" mode=\"widthFix\" src=\"../../../../images/search_clear.png\"></image>\n                </view>\n                <view class=\"search-btn pub-text\" bindtap=\"getDiagnosticsList\">搜索\n                </view>\n              </view>\n              <scroll-view scroll-y=\"true\" bindscrolltolower=\"refresh\" class=\"scroll-view-container\">  \n                <block v-if=\" (keyword || isSearch) && isData \">\n                  <view class=\"diagnose-list\">\n                    <view class=\"diagnose-list-item\" v-for=\"(item, diagnosticCooe) in  diagnoseList \" :key=\"diagnosticCooe\" bindtap=\"onChoiceDiagnoseInSearch\" :data-item=\" item \">\n                      <rich-text :nodes=\" item.richTextName \"></rich-text>\n                    </view>\n                  </view>\n                </block>\n                <block v-else-if=\" !keyword && !isSearch \"> \n                  <view class=\"pub-text tab-title\">常用诊断\n                  </view>\n                  <view class=\"pub-tab\">\n                    <view :class=\"[pub-tab-item,( item.isActive? 'pub-tab-item-active':'' )]\" v-for=\"(item, diagnosticCooe) in  diseaseItem \" :key=\"diagnosticCooe\" :data-item=\" item \" bindtap=\"onChoiceDiagnose\">\n\t\t\t\t\t\t\t\t\t{{ item.diagnosticName }}\n\t\t\t\t\t\t\t\t\n                    </view>\n                  </view>\n                </block>\n                <block v-else-if=\" (keyword || isSearch) && !isData \">\n                  <no-data zhi=\"scanNoData\" imageUrl=\"{{ cdnLink }}images/require-list-empty.png\" textval=\"暂无搜索结果\"></no-data>\n                </block>\n              </scroll-view>\n            </view>\n          </view>\n        </halfScreenDialog>\n        <halfScreenDialog :show=\" isDiagnoseDialogShowCn \" :maskClosable=\"true\" title=\"诊断\" bind:close=\"diagnoseClose\">\n          <view slot=\"desc\">\n            <view class=\"diagnose-container\"> \n              <view class=\"search-container\"> \n                <view class=\"input-container\">  \n                  <image mode=\"widthFix\" class=\"search-icon search-icon\" src=\"../../../../images/search-icon-black.png\"></image>\n                  <input type=\"text\" class=\"search-input\" :value=\" keyword \" bindinput=\"onKeywordText\" placeholder=\"请输入诊断\"></input>\n                  <image v-if=\" keyword \" class=\"search-icon\" bindtap=\"clearKeyword\" mode=\"widthFix\" src=\"../../../../images/search_clear.png\"></image>\n                </view>\n                <view class=\"search-btn pub-text\" bindtap=\"getDiagnosticsListCn\">搜索\n                </view>\n              </view>\n              <scroll-view scroll-y=\"true\" bindscrolltolower=\"refresh\" class=\"scroll-view-container\">  \n                <block v-if=\" (keyword || isSearch) && isData \">\n                  <view class=\"diagnose-list\">\n                    <view class=\"diagnose-list-item\" v-for=\"(item, diagnosticCooe) in  diagnoseListCn \" :key=\"diagnosticCooe\" bindtap=\"onChoiceDiagnoseInSearchCn\" :data-item=\" item \">\n                      <rich-text :nodes=\" item.richTextName \"></rich-text>\n                    </view>\n                  </view>\n                </block>\n                <block v-else-if=\" !keyword && !isSearch \"> \n                  <view class=\"pub-text tab-title\">常用诊断\n                  </view>\n                  <view class=\"pub-tab\">\n                    <view :class=\"[pub-tab-item,( item.isActive? 'pub-tab-item-active':'' )]\" v-for=\"(item, diagnosticCooe) in  diseaseItemCn \" :key=\"diagnosticCooe\" :data-item=\" item \" bindtap=\"onChoiceDiagnoseCn\">\n\t\t\t\t\t\t\t\t\t{{ item.diagnosticName }}\n\t\t\t\t\t\t\t\t\n                    </view>\n                  </view>\n                </block>\n                <block v-else-if=\" (keyword || isSearch) && !isData \">\n                  <no-data zhi=\"scanNoData\" imageUrl=\"{{ cdnLink }}images/require-list-empty.png\" textval=\"暂无搜索结果\"></no-data>\n                </block>\n              </scroll-view>\n            </view>\n          </view>\n        </halfScreenDialog>\n        <halfScreenDialog :show=\" isDiagnoseDesShow \" :maskClosable=\"true\" title=\"病情描述\" bind:close=\"diagnoseClose\">\n          <view slot=\"desc\">\n            <view class=\"diagnose-des-container\"> \n              <view class=\"textarea-container\"> \n                <textarea :value=\" diseaseDes \" bindinput=\"getDiseaseDes\" cols=\"30\" rows=\"10\" maxlength=\"50\" placeholder=\"请描述您现在的主要症状，如：腰酸背痛\" placeholder-class=\"placeholder-class\"></textarea>\n                <view class=\"word-number\"> \n                  <text>{{ wordNumbers }}\n                  </text>\n                  <text class=\"limit-number\">/50\n                  </text>\n                </view>\n              </view>\n              <view class=\"diagnose-btn-container\">\n                <view class=\"diagnose-finish-btn\" bindtap=\"onDiseaseDesFinish\">保存\n                </view>\n              </view>\n            </view>\n          </view>\n        </halfScreenDialog>\n        <halfScreenDialog :show=\" isAllergyShow \" :maskClosable=\"true\" title=\"过敏史\" bind:close=\"diagnoseClose\">\n          <view slot=\"desc\">\n            <view class=\"allergy-container\"> \n              <view class=\"textarea-container\"> \n                <textarea :value=\" allergyDes \" bindinput=\"getAllergyDes\" cols=\"30\" rows=\"10\" maxlength=\"50\" placeholder=\"请输入过敏史\" placeholder-class=\"placeholder-class\"></textarea>\n                <view class=\"word-number\"> \n                  <text>{{ allergyDesNum }}\n                  </text>\n                  <text class=\"limit-number\">/50\n                  </text>\n                </view>\n              </view>\n              <view class=\"allergy-btn-container\">\n                <view class=\"allergy-finish-btn\" bindtap=\"onAllergyFinish\">保存\n                </view>\n              </view>\n            </view>\n          </view>\n        </halfScreenDialog>\n      </view>\n      <block class=\"not-login-view\" v-if=\" !isLoginSuc \"> \n        <navBar :title-text=\"drugStoreName\" :showCapsule=\" false \"></navBar>\n        <missingData-view zhi=\"new1\" textval2=\"登录后开始咨询\" :imageUrl=\" cdnLink + 'images/empty-log.png' \" bind:action=\"toLogin\" buttonText=\"点击登录\"></missingData-view>\n      </block>\n    </view>\n  </view>","js":"\nimport {throttle, ajax, ajax2, cdnStaticResourceUrl, getH5AbsoluteUrl, checkedDoctorStatus} from '../../../../utils/util'\nimport { initIMSingle } from \"../../../../common/toChatroom\"\nimport xcxIM  from '../../../../im/im';\nconst app = getApp()\nconst apiUrl = {\n  createPrescriptionUrl: 'api/patientinfo/createPrescription',    // 创建问诊单\n  getPatientListUrl: 'api/userPatient/selectUserPatientList',      // 患者列表\n  getDiagnosticsHotUrl: 'api/chat/inquiry/diagnosticsHot',   // 获取常用诊断\n  getDiagnosticsListUrl: 'api/chat/inquiry/diagnostics',      // 搜索诊断list\n  codeMedicine: 'codeDosing/codeMedicine', // 扫码找药\n  getCodeDosingInfo: 'codeDosing/getCodeDosingInfo',    // 获取去问诊页面信息\n  selectMedicineDiagnosis: 'codeDosing/selectMedicineDiagnosis', // 药查询诊断\n  getUsageProcessing:'codeDosing/getUsageProcessing', // 获取用法用量字典\n}\nPage({\n  data: {\n    hasInquiryStatus: false,                // 当前是否有进行中的问诊\n    newbieLeadShow: false,                  // 新手引导提示\n    inquiryType: 'image',                   // 问诊类型\n    organSign: '',                          // 机构id\n    organSignFlag: false,                   // 是否展示当前界面，只有门店有效的时展示当前面\n    patientName: '',                        // 患者\n    userPatientId: '',                      // 患者id\n    userPatientUserId: '',                  // 患者userId\n    userGender: 1,                          // 患者性别 1男 2女\n    medicineType:0,                         // 用药类型，0西药｜1中药，默认0\n    drugText: '',                           // 药品\n    drugTextCn: '',                           // 药品\n    drugObj: [],                            // 药品详情\n    drugObjCn: [],                            // 药品详情\n    diagnoseText: '',                       // 诊断\n    diagnosisCode: '',                      // 诊断code\n    offlineDiagnosis: '1',                  // 是否复诊\n    diseases: [],                           // 选中的主诉tab\n    diseaseDes: '',                         // 症状描述\n    liverAndRenalFunction: '0',             // 肝、肾功能是否异常\n    pregnancyAndLactation: '0',             // 是否妊娠、哺乳期\n    isReadAndAgree: true,                   // 是否阅读并同意\n    wordNumbers: 0,                         // 症状描述字数\n    isDiagnoseDialogShow: false,            // 诊断dialog\n    isDiagnoseDialogShowCn: false,          // 中药诊断dialog\n    isBtn: true,                            // 是否显示去问诊按钮\n    isLookAgreement: false,                 // 是否跳转过协议\n    isGoDrug: false,                        // 是否跳转过购药\n    radioArr: [\n      {\n        id: 'no',\n        value: '0',\n        name: '否',\n        label: '无'\n      },\n      {\n        id: 'yes',\n        value: '1',\n        name: '是',\n        label: '有'\n      }\n    ],\n    medicineTypeArr: [\n      {\n        id: 0,\n        value: 0,\n        name: '西药',\n        label: '西药'\n      },\n      {\n        id: 1,\n        value: 1,\n        name: '中药',\n        label: '中药'\n      }\n    ],\n    diseaseArr: [],                         // 病情描述 - 主诉\n    isInquiry: false,                       // 避免重复问诊\n    modalMsg: '根据国家互联网医院管理办法，平台仅为复诊患者提供服务，本次无法发起问诊',\n    offlineDiagnosisArr: [\n      {\n        id: 'no',\n        value: '2',\n        name: '否'\n      },\n      {\n        id: 'yes',\n        value: '1',\n        name: '是'\n      }\n    ],\n    isSubsequentArr: [\n      {\n        id: 'yes',\n        value: '1',\n        name: '是'\n      },\n      {\n        id: 'no',\n        value: '2',\n        name: '否'\n      }\n    ],\n    dosageAndUsage:{\n      tcmTotalDosage:'', // 总计\n      tcmDailyDosage: '', // 每日几剂\n      tcmDailyFrequency:'', // 每剂几次\n      tcmUsage: '', // 用法\n      tcmProcessingMethod: '', // 用量\n    },\n    tcmUsageArr:[],\n    tcmProcessingMethodArr:[],\n    iconRightSrc: '/images/icon-arrow.png',\n    checkedSrc: '../../images/checked.png',\n    checkDefaultSrc: '../../images/check-default.png',\n    navBarHeight: app.globalData.navBarHeight,\n    windowHeight: wx.getSystemInfoSync().windowHeight,\n    isClose: false,\n    addPatientShow: false,                  // 展示添加就诊人底部弹出视图\n    drugStoreName: '扫码问医生',                      // 药店名称\n    isLoginSuc: true,\n    cdnLink: cdnStaticResourceUrl,\n    roomInfo: {}, // 视频问诊房间信息\n    microphoneAuthorized: null, // 微信麦克风权限\n    cameraAuthorized: null, // 微信相机权限\n    inquiryTypeList: [], // c端视频图文权限\n    inquiryTypeStatus: false,\n    isIPX: getApp().globalData.isIPX,\n    scanText: '',\n    notIsActive: true, // 过敏史选无状态\n    notStatus: 1, // 判断过敏史是否选中无 1有0无\n    allergyList: [], // 过敏史列表\n    allergySelectItemList: [], // 过敏史选中列表\n    allergyDes: '', // 过敏史value\n    allergyDesNum: 0, // 输入框过敏史字数\n    allergyAllNums: 0, // 过敏史总字数\n    isAllergyShow: false, // 过敏史dialog\n    medicinalDiagnoseList: [], // 预购药品带出诊断列表\n    // 诊断\n    strNum: 0,                                // 选择诊断字数\n    keyword: '',                              // 搜索框关键字\n    isShowSearchDel: false,                   // 搜索框清楚icon\n    choicedDiagnose: [],                      // 已选择诊断list\n    choicedDiagnoseCn: [],                    // 已选择诊断list 中药\n    currentDiagnoseLength: 0,                 // 已选诊断字数长度\n    diagnoseList: [],                         // 搜索list\n    diagnoseListCn: [],                       // 搜索list\n    diseaseItem: [],                          // 常用诊断\n    diseaseItemCn: [],                          // 常用诊断\n    isSearch: false,\n    pageNum: 1,\n    pageSize: 20,\n    isData: true,                             // 是否有数据\n    // 初始患者信息\n    patientList: {},\n    createPrescriptionParams: {},             // 创建问诊单数据\n    redDot: 0,\n    isStatus: 0 ,                              // 登陆样式判断\n    pickerShowUsage:false,\n    pickerShowMethod:false,\n    dataList:[],\n    usageTitle:'用法',\n    methodTitle:'加工方式',\n    // 绿地返回购药\n    thirdOrderNo: '', // 订单编号\n    lvdiInquirySource: 3, // 扫码问诊-3默认，绿地来源-7\n    pageFrom: null\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    wx.removeStorageSync('preorderdrugCart')\n    wx.removeStorageSync('preorderChinesedrugCart')\n    if (options.scene) { //扫描小程序码进入\n      this.setData({\n        organSign: options.scene,\n        pageFrom: options.pageFrom\n        // organSign: 'ZHL00000275'\n      })\n    }\n    if (options.source && options.orderID) {\n      if (options.source == 'exrternal_lvdi') {\n        this.setData({\n          lvdiInquirySource: 7,\n          thirdOrderNo: options.orderID,\n        })\n      }\n    }\n    let status = wx.getStorageSync('newbieLeadStatus')\n    if (!status) {\n      this.setData({\n        newbieLeadShow: true,\n        isBtn: false,\n        isStatus: 1\n      })\n    }\n    let userId = wx.getStorageSync('userInfo') ? wx.getStorageSync('userInfo').userId : ''\n    getApp().globalData.burySpotSDK.track('page_scanCodeInfoExpo', {\n      userId: userId,\n      scene: options.scene\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    wx.removeStorageSync('newAddDrug')\n    wx.setStorageSync('newbieLeadStatus', 1) // 初次进来\n    let medicinalDiagnoseList = wx.getStorageSync('preorderdrugCart')\n    if (!getApp().globalData.sess_key) {\n      this.setData({\n        isLoginSuc: false\n      })\n      return;\n    }else {\n      this.setData({\n        isLoginSuc: true,\n        isInquiry: false\n      })\n    }\n    if (this.data.organSign.length > 0 && getApp().globalData.sess_key) {\n      this.requestDrugStoreIdEffective()\n      medicinalDiagnoseList.length ? this.getDiagnosis(medicinalDiagnoseList) : this.getDiagnosis([])\n    }\n    this.getUsageProcessing(1) // 获取用法\n    this.getUsageProcessing(2) // 获取用量\n  },\n  getUsageProcessing(type){\n    ajax2('post', apiUrl.getUsageProcessing, {type:type}, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        if(type===1){\n          this.setData({\n            tcmUsageArr : res.data.result\n          })\n        }else if(type===2){\n          this.setData({\n            tcmProcessingMethodArr : res.data.result\n        })\n        }\n      } \n    })\n  },\n  // 切换用药类型\n  handleChangeMedicineType(e){\n    let value = e.detail.value\n    let type = e.currentTarget.dataset.type\n    this.setData({\n      medicineType: value\n    })\n  },\n  // 关闭新手引导\n  closeNewbieLead(){\n    this.setData({\n      newbieLeadShow: false,\n      isBtn: true\n    })\n  },\n  // 关闭询问是否有问诊弹窗\n  backInquiry () {\n    this.createPrescriptionRequestRes(this.data.createPrescriptionParams)\n    this.setData({\n      hasInquiryStatus: false,\n      isBtn: true\n    })\n  },\n  /**\n   * @description: 根据药品查询诊断\n   * @return\n   */\n  getDiagnosis(medicinalDiagnoseList){\n    wx.showLoading({\n      title: '加载中...'\n    })\n    let list = []\n    if (medicinalDiagnoseList.length) {\n      medicinalDiagnoseList.forEach(item => {\n        let name = item.commonName? item.commonName:item.productName\n        list.push({\n          pref: item.pref,\n          productName: name\n        })\n      })\n    }\n    ajax2('post', apiUrl.selectMedicineDiagnosis, {list}, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        this.addDiagnosis(res.data.result)\n      } else if (res.data.code === 1) {\n        this.addDiagnosis([])\n      }\n    })\n  },\n  // 添加诊断\n  addDiagnosis(data) {\n    for(let i = 0; i < this.data.choicedDiagnose.length; i++) {\n      if (this.data.choicedDiagnose[i].pref && !this.data.choicedDiagnose[i].isActive) {\n          this.data.choicedDiagnose.splice(i, 1)\n          i--\n      }\n    }\n    data.forEach((item, key) => {\n      item.diagnosticName = item.diagnosisName\n      item.diagnosticCooe = item.diagnosisCode\n      item.isActive = false\n      let cooeIndex = this.data.choicedDiagnose.findIndex(value => value.diagnosticCooe == item.diagnosticCooe)\n      if (cooeIndex === -1) {\n        this.data.choicedDiagnose.push(item)\n      }\n    })\n    this.setData({\n      choicedDiagnose: this.data.choicedDiagnose\n    })\n  },\n  // 信息填写页面选择诊断\n  onChooseIllness(e) {\n    let IllnessTtem = e.currentTarget.dataset.item\n    let hotStatus = this.data.diseaseItem.findIndex(value => value.diagnosticCooe === IllnessTtem.diagnosticCooe)\n    let chooseStatus = this.data.choicedDiagnose.findIndex(value => value.diagnosticCooe === IllnessTtem.diagnosticCooe)\n    let hotActive = `diseaseItem[${hotStatus}].isActive`\n    let chooseActive = `choicedDiagnose[${chooseStatus}].isActive`\n    let arr = []\n    this.data.choicedDiagnose.forEach((item, key) => {\n      item.isActive ? arr.push(item.isActive) : ''\n    })\n    if (chooseStatus > -1) {\n      if (this.data.choicedDiagnose[chooseStatus].isActive) {\n        this.data.choicedDiagnose[chooseStatus].isActive = false\n        this.setData({\n          [chooseActive]: false,\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n      } else {\n        if (!this.wordsNum(IllnessTtem)) {\n          return false\n        }\n        this.data.choicedDiagnose[chooseStatus].isActive = true\n        this.setData({\n          [chooseActive]: true,\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n      }\n    }\n    if (hotStatus > -1) {\n      if (this.data.diseaseItem[hotStatus].isActive) {\n        this.data.diseaseItem[hotStatus].isActive = false\n        this.setData({\n          [hotActive]: false,\n          diseaseItem: this.data.diseaseItem\n        })\n      } else {\n        this.data.diseaseItem[hotStatus].isActive = true\n        this.setData({\n          [hotActive]: true,\n          diseaseItem: this.data.diseaseItem\n        })\n      }\n      // this.data.diseaseItem[hotStatus].isActive = !this.data.diseaseItem[hotStatus].isActive\n      // this.setData({\n      //   [hotActive]: !this.data.diseaseItem[hotStatus].isActive,\n      //   diseaseItem: this.data.diseaseItem\n      // })\n    }\n  },\n  // 检验不能输入多个小数点\n  checkCarnums(e) {\n    let value = e.detail.value\n    return {\n      value: value.replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\"),\n    }\n  },\n  onChooseIllnessCn(e) {\n    let IllnessTtem = e.currentTarget.dataset.item\n    let hotStatus = this.data.diseaseItemCn.findIndex(value => value.diagnosticCooe === IllnessTtem.diagnosticCooe)\n    let chooseStatus = this.data.choicedDiagnoseCn.findIndex(value => value.diagnosticCooe === IllnessTtem.diagnosticCooe)\n    let hotActive = `diseaseItemCn[${hotStatus}].isActive`\n    let chooseActive = `choicedDiagnoseCn[${chooseStatus}].isActive`\n    let arr = []\n    this.data.choicedDiagnoseCn.forEach((item, key) => {\n      item.isActive ? arr.push(item.isActive) : ''\n    })\n    if (chooseStatus > -1) {\n      if (this.data.choicedDiagnoseCn[chooseStatus].isActive) {\n        this.data.choicedDiagnoseCn[chooseStatus].isActive = false\n        this.setData({\n          [chooseActive]: false,\n          choicedDiagnoseCn: this.data.choicedDiagnoseCn\n        })\n      } else {\n        if (!this.wordsNumCn(IllnessTtem)) {\n          return false\n        }\n        this.data.choicedDiagnoseCn[chooseStatus].isActive = true\n        this.setData({\n          [chooseActive]: true,\n          choicedDiagnoseCn: this.data.choicedDiagnoseCn\n        })\n      }\n    }\n    if (hotStatus > -1) {\n      if (this.data.diseaseItemCn[hotStatus].isActive) {\n        this.data.diseaseItemCn[hotStatus].isActive = false\n        this.setData({\n          [hotActive]: false,\n          diseaseItemCn: this.data.diseaseItemCn\n        })\n      } else {\n        this.data.diseaseItemCn[hotStatus].isActive = true\n        this.setData({\n          [hotActive]: true,\n          diseaseItemCn: this.data.diseaseItemCn\n        })\n      }\n      // this.data.diseaseItem[hotStatus].isActive = !this.data.diseaseItem[hotStatus].isActive\n      // this.setData({\n      //   [hotActive]: !this.data.diseaseItem[hotStatus].isActive,\n      //   diseaseItem: this.data.diseaseItem\n      // })\n    }\n  },\n  // 获取常用诊断\n  getDiagnosticsHot() {\n    wx.showLoading({\n      title: '加载中...'\n    })\n    ajax('post', apiUrl.getDiagnosticsHotUrl, {diagnosisType:0}, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        this.setData({\n          diseaseItem: res.data.result.map((item, key) => {\n            return {\n              ...item,\n              isActive: false\n            }\n          })\n        },function () {\n          this.data.choicedDiagnose.map((item, key) => {\n            let index = this.data.diseaseItem.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n            let isActive = `diseaseItem[${index}].isActive`\n            if (index > -1 && item.isActive) {\n              this.setData({\n                [isActive]: true,\n                diseaseItem: this.data.diseaseItem\n              })\n            }\n          })\n        })\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 获取常用诊断\n  getDiagnosticsHotCn() {\n    wx.showLoading({\n      title: '加载中...'\n    })\n    ajax('post', apiUrl.getDiagnosticsHotUrl, {diagnosisType:1}, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        this.setData({\n          diseaseItemCn: res.data.result.map((item, key) => {\n            return {\n              ...item,\n              isActive: false\n            }\n          })\n        },function () {\n          this.data.choicedDiagnoseCn.map((item, key) => {\n            let index = this.data.diseaseItemCn.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n            let isActive = `diseaseItemCn[${index}].isActive`\n            if (index > -1 && item.isActive) {\n              this.setData({\n                [isActive]: true,\n                diseaseItemCn: this.data.diseaseItemCn\n              })\n            }\n          })\n        })\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 搜索诊断list\n  getDiagnosticsList(isRefresh) {\n    this.setData({\n      isSearch: true\n    })\n    let params = {\n      diagnosticName: this.data.keyword,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize,\n      diagnosisType:0\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    ajax('post', apiUrl.getDiagnosticsListUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result !== null && res.data.result.list && res.data.result.list.length) {\n          // let reg = new RegExp(`(${this.data.keyword})`, 'g')\n          let reg = new RegExp(`(${this.data.keyword.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\")})`, 'g')\n          let tempList = res.data.result.list.map((item, key) => {\n            return {\n              ...item,\n              richTextName: `${item.diagnosticName.replace(reg, `<font style=\"color:#FF5630\">${this.data.keyword}</font>`)}`\n            }\n          })\n          let diagnoseList = isRefresh === 'refresh'? [...this.data.diagnoseList, ...tempList]:tempList\n          this.setData({\n            diagnoseList: diagnoseList,\n            isData: true\n          })\n        } else {\n          if (isRefresh !== 'refresh') {\n            this.setData({\n              diagnoseList: [],\n              isData: false\n            })\n          }\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  getDiagnosticsListCn(isRefresh) {\n    this.setData({\n      isSearch: true\n    })\n    let params = {\n      diagnosticName: this.data.keyword,\n      pageNum: this.data.pageNum,\n      pageSize: this.data.pageSize,\n      diagnosisType:1\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    ajax('post', apiUrl.getDiagnosticsListUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result !== null && res.data.result.list && res.data.result.list.length) {\n          // let reg = new RegExp(`(${this.data.keyword})`, 'g')\n          let reg = new RegExp(`(${this.data.keyword.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\")})`, 'g')\n          let tempList = res.data.result.list.map((item, key) => {\n            return {\n              ...item,\n              richTextName: `${item.diagnosticName.replace(reg, `<font style=\"color:#FF5630\">${this.data.keyword}</font>`)}`\n            }\n          })\n          let diagnoseList = isRefresh === 'refresh'? [...this.data.diagnoseList, ...tempList]:tempList\n          this.setData({\n            diagnoseListCn: diagnoseList,\n            isData: true\n          })\n        } else {\n          if (isRefresh !== 'refresh') {\n            this.setData({\n              diagnoseListCn: [],\n              isData: false\n            })\n          }\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 下拉加载\n  refresh() {\n    if (this.data.isData && this.data.isSearch && this.data.keyword) {\n      this.data.pageNum += 1\n      this.getDiagnosticsList('refresh')\n    }\n  },\n  // 输入框校验表情特殊符号\n  checkEmojiSymbol (value) {\n    const emoji = /[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030/\n    if (emoji.test(value)) {\n      wx.showToast({\n        title: '不可输入emoji',\n        icon: 'none'\n      })\n      return false\n    }\n    return true\n  },\n  // 诊断50字检验\n  wordsNum(item) {\n    let arr = []\n    let currentDiagnoseLength = 0\n    this.data.choicedDiagnose.forEach((chooseItem, key) => {\n      if (chooseItem.isActive) {\n        currentDiagnoseLength += chooseItem.diagnosticName.length\n        arr.push(chooseItem.isActive)\n      }\n    })\n    currentDiagnoseLength += item.diagnosticName.length\n    if (arr.length > 4) {\n      wx.showToast({\n        title: '诊断不能超过5个',\n        icon: 'none'\n      })\n      return false\n    }\n    if (currentDiagnoseLength > 50) {\n      wx.showToast({\n        title: '诊断字数超过限制',\n        icon: 'none'\n      })\n      return false\n    }\n    return true\n  },\n  wordsNumCn(item) {\n    let arr = []\n    let currentDiagnoseLength = 0\n    this.data.choicedDiagnoseCn.forEach((chooseItem, key) => {\n      if (chooseItem.isActive) {\n        currentDiagnoseLength += chooseItem.diagnosticName.length\n        arr.push(chooseItem.isActive)\n      }\n    })\n    currentDiagnoseLength += item.diagnosticName.length\n    if (arr.length > 4) {\n      wx.showToast({\n        title: '诊断不能超过5个',\n        icon: 'none'\n      })\n      return false\n    }\n    if (currentDiagnoseLength > 50) {\n      wx.showToast({\n        title: '诊断字数超过限制',\n        icon: 'none'\n      })\n      return false\n    }\n    return true\n  },\n  // 常用诊断诊断\n  onChoiceDiagnose(e) {\n    let item = e.currentTarget.dataset.item\n    let i = this.data.choicedDiagnose.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let index = this.data.diseaseItem.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let temp = `diseaseItem[${index}].isActive`\n    if (i === -1) {\n      if (!this.wordsNum(item)) {\n        return false\n      }\n      item.isActive = true\n      this.data.choicedDiagnose.push(item)\n      index > -1 && this.setData({\n        [temp]: true,\n        choicedDiagnose: this.data.choicedDiagnose\n      })\n    } else {\n      if (this.data.choicedDiagnose[i].isActive) {\n        this.data.choicedDiagnose[i].isActive = false\n        this.setData({\n          [temp]: false,\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n      } else {\n        if (!this.wordsNum(item)) {\n          return false\n        }\n        this.data.choicedDiagnose[i].isActive = true\n        this.setData({\n          [temp]: true,\n          choicedDiagnose: this.data.choicedDiagnose\n        })\n      }\n    }\n    this.setData({\n      isDiagnoseDialogShow: false,\n      isBtn: true\n    })\n  },\n  // 常用诊断诊断\n  onChoiceDiagnoseCn(e) {\n    let item = e.currentTarget.dataset.item\n    let i = this.data.choicedDiagnoseCn.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let index = this.data.diseaseItemCn.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let temp = `diseaseItemCn[${index}].isActive`\n    getApp().globalData.burySpotSDK.track('diagnosisCn',  {\n      diagnosisCode: item.diagnosticCooe,\n      diagnosisName: item.diagnosticName\n    });\n    if (i === -1) {\n      if (!this.wordsNumCn(item)) {\n        return false\n      }\n      item.isActive = true\n      this.data.choicedDiagnoseCn.push(item)\n      index > -1 && this.setData({\n        [temp]: true,\n        choicedDiagnoseCn: this.data.choicedDiagnoseCn\n      })\n    } else {\n      if (this.data.choicedDiagnoseCn[i].isActive) {\n        this.data.choicedDiagnoseCn[i].isActive = false\n        this.setData({\n          [temp]: false,\n          choicedDiagnoseCn: this.data.choicedDiagnoseCn\n        })\n      } else {\n        if (!this.wordsNumCn(item)) {\n          return false\n        }\n        this.data.choicedDiagnoseCn[i].isActive = true\n        this.setData({\n          [temp]: true,\n          choicedDiagnoseCn: this.data.choicedDiagnoseCn\n        })\n      }\n    }\n    this.setData({\n      isDiagnoseDialogShowCn: false,\n      isBtn: true\n    })\n  },\n  // 选择问诊 - 搜索\n  onChoiceDiagnoseInSearch(e) {\n    let item = e.currentTarget.dataset.item\n    let i = this.data.choicedDiagnose.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let index = this.data.diseaseItem.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let temp = `diseaseItem[${index}].isActive`\n    this.setData({\n      keyword: '',\n      isSearch: false,\n      diagnoseList: []\n    })\n    if (i === -1) {\n      if (!this.wordsNum(item)) {\n        return false\n      }\n      item.isActive = true\n      this.data.choicedDiagnose.push(item)\n      this.setData({\n        choicedDiagnose: this.data.choicedDiagnose\n      })\n      index > -1 && this.setData({\n        [temp]: true,\n      })\n    } else {\n      if (!this.data.choicedDiagnose[i].isActive) {\n        if (!this.wordsNum(item)) {\n          return false\n        }\n        this.data.choicedDiagnose[i].isActive = true\n        this.setData({\n          choicedDiagnose: this.data.choicedDiagnose,\n        })\n        index > -1 && this.setData({\n          [temp]: true,\n        })\n      } else {\n        wx.showToast({\n          title: '您已经添加过该诊断了',\n          icon: 'none'\n        })\n        return\n      }\n    }\n    this.setData({\n      isDiagnoseDialogShow: false,\n      isBtn: true\n    })\n  },\n  onChoiceDiagnoseInSearchCn(e) {\n    let item = e.currentTarget.dataset.item\n    let i = this.data.choicedDiagnoseCn.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let index = this.data.diseaseItemCn.findIndex(value => value.diagnosticCooe === item.diagnosticCooe)\n    let temp = `diseaseItemCn[${index}].isActive`\n    this.setData({\n      keyword: '',\n      isSearch: false,\n      diagnoseListCn: []\n    })\n    if (i === -1) {\n      if (!this.wordsNumCn(item)) {\n        return false\n      }\n      item.isActive = true\n      this.data.choicedDiagnoseCn.push(item)\n      this.setData({\n        choicedDiagnoseCn: this.data.choicedDiagnoseCn\n      })\n      index > -1 && this.setData({\n        [temp]: true,\n      })\n    } else {\n      if (!this.data.choicedDiagnoseCn[i].isActive) {\n        if (!this.wordsNumCn(item)) {\n          return false\n        }\n        this.data.choicedDiagnoseCn[i].isActive = true\n        this.setData({\n          choicedDiagnoseCn: this.data.choicedDiagnoseCn,\n        })\n        index > -1 && this.setData({\n          [temp]: true,\n        })\n      } else {\n        wx.showToast({\n          title: '您已经添加过该诊断了',\n          icon: 'none'\n        })\n        return\n      }\n    }\n    this.setData({\n      isDiagnoseDialogShowCn: false,\n      isBtn: true\n    })\n  },\n  // 搜索框input事件\n  onKeywordText(e) {\n    this.setData({\n      keyword: e.detail.value\n    })\n    if (e.detail.value) {\n      this.data.pageNum = 1\n      if(this.data.medicineType==0){\n        this.getDiagnosticsList()\n      }else if(this.data.medicineType == 1){\n        this.getDiagnosticsListCn()\n      }\n      \n    } else {\n      this.setData({\n        keyword: '',\n        isSearch: false,\n        diagnoseList: []\n      })\n    }\n  },\n  // 清楚搜索关键字\n  clearKeyword() {\n    this.setData({\n      keyword: '',\n      isSearch: false,\n      diagnoseList: []\n    })\n  },\n  // 弹起病情描述\n  openDiseaseDes() {\n    if (this.data.diseases.length > 4) {\n      wx.showToast({\n        title: '病情描述不能超过5个',\n        icon: 'none'\n      })\n      return\n    }\n    this.setData({\n      isDiagnoseDesShow: true,\n      isBtn: false,\n    })\n  },\n  // 添加病情描述完成\n  onDiseaseDesFinish() {\n    this.data.diseaseDes = this.data.diseaseDes.replace(/\\s/g,\"\")\n    if (!this.data.diseaseDes) {\n      wx.showToast({\n        title: '请输入病情描述',\n        icon: 'none'\n      })\n      return\n    }\n    let index = this.data.diseaseArr.findIndex(value => value.name == this.data.diseaseDes)\n    if (index === -1) {\n      let obj = {\n        name: this.data.diseaseDes,\n        isActive: true\n      };\n      this.data.strNum += obj.name.length\n      if (this.data.strNum > 195) {\n        this.data.strNum -= obj.name.length\n        wx.showToast({\n          title: '病情描述总字数不可超过195字',\n          icon: 'none'\n        })\n        return\n      }\n      this.data.diseaseArr.push(obj)\n      this.data.diseases.push(obj)\n      this.setData({\n        diseaseArr: this.data.diseaseArr,\n        diseases: this.data.diseases,\n        isDiagnoseDesShow: false,\n        isBtn: true,\n        wordNumbers: 0,\n        diseaseDes: ''\n      })\n    } else {\n      wx.showToast({\n        title: '请勿重复输入',\n        icon: 'none'\n      })\n      this.setData({\n        isDiagnoseDesShow: false,\n        wordNumbers: 0,\n        isBtn: true,\n        diseaseDes: ''\n      })\n    }\n  },\n  // 选择病情描述 - 症状tab\n  onChoiceDisease(e) {\n    let diseaseTtem = e.currentTarget.dataset.item\n    let index = this.data.diseases.findIndex(item => item.name === diseaseTtem.name)\n    this.data.diseaseArr.forEach((item, key) => {\n      let temp = `diseaseArr[${key}].isActive`\n      if (item.name === diseaseTtem.name) {\n        if (this.data.diseaseArr[key].isActive) {\n          this.data.strNum -=diseaseTtem.name.length\n          diseaseTtem.isActive = false\n          this.data.diseases.splice(index, 1)\n          this.setData({\n            [temp]: false,\n          })\n        } else {\n          if (this.data.diseases.length > 4) {\n            wx.showToast({\n              title: '病情描述不能超过5个',\n              icon: 'none'\n            })\n            return\n          }\n          if (this.data.strNum + diseaseTtem.name.length > 195) {\n            wx.showToast({\n              title: '病情描述总字数不可超过195字',\n              icon: 'none'\n            })\n            return\n          }\n          this.data.strNum +=diseaseTtem.name.length\n          diseaseTtem.isActive = true\n          this.data.diseases.push(diseaseTtem)\n          this.setData({\n            [temp]: true,\n          })\n        }\n      }\n    })\n  },\n  // 病情描述\n  getDiseaseDes(e) {\n    let value = e.detail.value.length > 50? e.detail.value.substring(0, 50):e.detail.value\n    if (!this.checkEmojiSymbol(value)) {\n      return ''\n    }\n    let numbers = 0\n    if (e.detail.value.match(/^[ ]*$/)) {\n      this.data.diseaseDes = ''\n      numbers = 0\n    } else {\n      numbers = value.length\n    }\n    this.setData({\n      wordNumbers: numbers,\n      diseaseDes: value\n    })\n  },\n  // 点击药物过敏史标签\n  onChoiceAllergyItem(e) {\n    let allergyItem = e.currentTarget.dataset.item;\n    let index = this.data.allergySelectItemList.findIndex(value => value.name === allergyItem.name)\n    this.data.allergyList.forEach((item, key) => {\n      let temp = `allergyList[${key}].isActive`\n      if (item.name === allergyItem.name) {\n        if (this.data.allergyList[key].isActive) {\n          allergyItem.isActive = false\n          this.data.allergySelectItemList.splice(index, 1)\n          this.data.allergyAllNums -= item.name.length\n          this.setData({\n            [temp]: false,\n            notIsActive: false,\n            notStatus: 0\n          })\n        } else {\n          if (this.data.allergyAllNums + allergyItem.name.length > 50) {\n            wx.showToast({\n              title: '过敏史总字数不可超过50字',\n              icon: 'none'\n            })\n            return\n          }\n          allergyItem.isActive = true\n          this.data.allergyAllNums += item.name.length\n          this.data.allergySelectItemList.push(allergyItem)\n          this.setData({\n            [temp]: true,\n            notIsActive: false,\n            notStatus: 1\n          })\n        }\n      }\n    })\n  },\n  // 过敏史选无\n  chooseNot () {\n    this.data.allergyList.forEach((item, index) => {\n      let temp = `allergyList[${index}].isActive`\n      this.setData({\n        [temp]: false,\n        notIsActive: true,\n        notStatus: 1,\n        allergySelectItemList: [],\n        allergyAllNums: 0\n      })\n    })\n  },\n  // 打开过敏史弹窗\n  openAllergy(){\n    this.setData({\n      isAllergyShow: true,\n      isBtn: false,\n      allergyDes: ''\n    })\n  },\n  // 过敏史字数\n  getAllergyDes(e) {\n    let value = e.detail.value.length > 50? e.detail.value.substring(0, 50):e.detail.value\n    if (!this.checkEmojiSymbol(value)) {\n      return ''\n    }\n    let numbers = 0\n    if (e.detail.value.match(/^[ ]*$/)) {\n      this.data.allergyDes = ''\n      numbers = 0\n    } else {\n      numbers = value.length\n    }\n    this.setData({\n      allergyDesNum: numbers,\n      allergyDes: value\n    })\n  },\n  // 过敏史完成\n  onAllergyFinish(){\n    this.data.allergyDes = this.data.allergyDes.replace(/\\s/g,\"\")\n    if (!this.data.allergyDes) {\n      wx.showToast({\n        title: '请输入过敏史',\n        icon: 'none'\n      })\n      return\n    }\n    if (this.data.allergyAllNums + this.data.allergyDesNum > 50) {\n      wx.showToast({\n        title: '过敏史总字数不可超过50字',\n        icon: 'none'\n      })\n      return\n    }\n    let index = this.data.allergyList.findIndex(value => value.name == this.data.allergyDes)\n    if (index === -1) {\n      let obj = {\n        id: this.data.allergyList.length,\n        name: this.data.allergyDes,\n        isActive: true\n      }\n      this.data.allergyList.push(obj)\n      this.data.allergySelectItemList.push(obj)\n      this.data.allergyAllNums += this.data.allergyDesNum\n      this.setData({\n        allergyList: this.data.allergyList,\n        isAllergyShow: false,\n        allergyDesNum: 0,\n        notIsActive: false,\n        isBtn: true,\n        allergyDes: '',\n      })\n    } else {\n      wx.showToast({\n        title: '请勿重复输入',\n        icon: 'none'\n      })\n      this.setData({\n        isAllergyShow: false,\n        allergyDesNum: 0,\n        notIsActive: false,\n        isBtn: true,\n        allergyDes: ''\n      })\n    }\n  },\n  // 过敏史、病情描述默认转换\n  getPatientBringFn(all, bring, arr, type){\n    // 推荐hot\n    let hotList = all.trim().split(' ')\n    if (hotList.length > 6) {\n      hotList = hotList.slice(0, 6)\n    } else if (hotList[0] === '') {\n      hotList = []\n    }\n    let hotListObj = hotList.map((item, key) => {\n      return {\n        name: item,\n        isActive: false\n      }\n    })\n    // 患者上一次带出\n    if (bring.length) {\n      let defaultList = bring.trim().split(' ')\n      let newArr = defaultList.filter(item => item)\n      let defaultListObj = newArr.map((item, key) => {\n        return {\n          name: item,\n          isActive: true\n        }\n      })\n      defaultListObj.map((item, key) => {\n        let index = hotListObj.findIndex(value => value.name == item.name)\n        index > -1 ? hotListObj.splice(index, 1) : ''\n        arr = [...defaultListObj, ...hotListObj]\n        if (type === 'disease') {\n          this.setData({\n            diseaseArr: arr,\n            diseases: defaultListObj\n          },function(){\n            this.data.strNum += item.name.length\n          })\n        } else if (type === 'allergy') {\n          this.setData({\n            allergyList: arr,\n            allergySelectItemList: defaultListObj,\n            notIsActive: false\n          }, function (){\n            this.data.allergyAllNums +=item.name.length\n          })\n        }\n      })\n    } else {\n      if (type === 'disease') {\n        this.setData({\n          diseaseArr: hotListObj,\n        })\n      } else if (type === 'allergy') {\n        this.setData({\n          allergyList: hotListObj,\n          notIsActive: true\n        })\n      }\n    }\n  },\n  // 获取患者id\n  getPatientList () {\n    let params = {\n      userId: wx.getStorageSync('userInfo').userId\n    }\n    ajax2('post', apiUrl.getPatientListUrl, params, res => {\n      if (res.data.code === 0) {\n        if (res.data.result && res.data.result.length) {\n          // let patientInfo = res.data.result[res.data.result.length - 1]\n          let patientInfo = res.data.result[0]\n          getApp().globalData.loggerSDK.info(`getPatientListUrl接口获取患者第一位ID userPatientId: ${patientInfo.id}`)\n          this.setData({\n            patientName: patientInfo.patientName,\n            userPatientId: patientInfo.id,\n            userGender: patientInfo.patientSex,\n            userPatientUserId: patientInfo.userId\n          },function () {\n            this.getPatientInfo(wx.getStorageSync('userInfo').userId, this.data.patientName)\n          })\n        } else {\n          this.getPatientInfo(wx.getStorageSync('userInfo').userId, '')\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * @description: 根据药品查询诊断（西药）\n   * @return\n   */\n  getDiagnosisByMedicine(list){\n    // 默认诊断code\n    let diagnosisDefaultCode = this.data.patientList.diagnosisDefaultCode.trim().split('|')\n    // 默认诊断\n    let diagnosisDefault = this.data.patientList.diagnosisDefault.trim().split('|')\n    let diagnosisDefaultArr = []\n    if (diagnosisDefault[0] && diagnosisDefaultCode[0]) {\n      diagnosisDefaultArr = diagnosisDefault.map((item,key) => {\n        return{\n          diagnosticName: item,\n          isActive: true,\n          diagnosticCooe: diagnosisDefaultCode[key]\n        }\n      })\n    }\n    if (this.data.patientList.ext.length) {\n      ajax2('post', apiUrl.selectMedicineDiagnosis, {list}, res => {\n        if (res.data.code === 0) {\n          let data = res.data.result\n          data.forEach((item, key) => {\n            item.diagnosticName = item.diagnosisName\n            item.diagnosticCooe = item.diagnosisCode\n            item.isActive = false\n            let index = diagnosisDefaultArr.findIndex(value => value.diagnosticCooe == item.diagnosticCooe)\n            if (index === -1) {\n              diagnosisDefaultArr.push(item)\n            }\n          })\n          this.setData({\n            choicedDiagnose: diagnosisDefaultArr\n          })\n        }\n      })\n    }\n    this.setData({\n      choicedDiagnose: diagnosisDefaultArr\n    })\n  },\n    /**\n   * @description: 根据药品查询诊断（中药）\n   * @return\n   */\n  getDiagnosisByMedicineCn(list){\n    // 默认诊断code\n    let diagnosisDefaultCode = this.data.patientList.diagnosisDefaultCode.trim().split('|')\n    // 默认诊断\n    let diagnosisDefault = this.data.patientList.diagnosisDefault.trim().split('|')\n    let diagnosisDefaultArr = []\n    if (diagnosisDefault[0] && diagnosisDefaultCode[0]) {\n      diagnosisDefaultArr = diagnosisDefault.map((item,key) => {\n        return{\n          diagnosticName: item,\n          isActive: true,\n          diagnosticCooe: diagnosisDefaultCode[key]\n        }\n      })\n    }\n    // if (this.data.patientList.ext.length) {\n    //   ajax2('post', apiUrl.selectMedicineDiagnosis, {list}, res => {\n    //     if (res.data.code === 0) {\n    //       let data = res.data.result\n    //       data.forEach((item, key) => {\n    //         item.diagnosticName = item.diagnosisName\n    //         item.diagnosticCooe = item.diagnosisCode\n    //         item.isActive = false\n    //         let index = diagnosisDefaultArr.findIndex(value => value.diagnosticCooe == item.diagnosticCooe)\n    //         if (index === -1) {\n    //           diagnosisDefaultArr.push(item)\n    //         }\n    //       })\n    //       this.setData({\n    //         choicedDiagnose: diagnosisDefaultArr\n    //       })\n    //     }\n    //   })\n    // }\n    this.setData({\n      choicedDiagnoseCn: diagnosisDefaultArr\n    })\n  },\n  // 重置信息\n  resetInfo() {\n    this.setData({\n      drugText: '',\n      drugTextCn: '',\n      drugObj: [],\n      drugObjCn: [],\n      diseases: [],\n      diseaseDes: '',\n      choicedDiagnose:[],\n      choicedDiagnoseCn:[],\n      liverAndRenalFunction: '0',\n      pregnancyAndLactation: '0',\n      wordNumbers: 0,\n      diseaseArr: [],\n      allergySelectItemList: [],\n      allergyAllNums: 0,\n      medicinalDiagnoseList: [],\n      strNum: 0,\n      currentDiagnoseLength: 0,\n      notStatus: 1,\n      dosageAndUsage:{\n        tcmTotalDosage:'', // 总计\n        tcmDailyDosage: '', // 每日几剂\n        tcmDailyFrequency:'', // 每剂几次\n        tcmUsage: '', // 用法\n        tcmProcessingMethod: '', // 用量\n      },\n    })\n  },\n  // 药品字符转译\n  toChangeFn(params) {\n    let drugsStr = '' ,resStr = '',list = []\n    if (params.ext) {\n      let data = JSON.parse(params.ext)\n      data.forEach((item, key) => {\n        let name = item.commonName? item.commonName:item.productName\n        drugsStr += name + 'x' + item.quantity + '；'\n        list.push({\n          pref: item.pref,\n          productName: name\n        })\n      })\n      resStr = drugsStr.substring(0, drugsStr.length - 1)\n    }\n    this.setData({\n      drugText: resStr,\n    })\n    this.getDiagnosisByMedicine(list)\n  },\n  toChangeFnCn(params) {\n    let drugsStr = '' ,resStr = '',list = []\n    if (params.prescriptionTCMDetail) {\n      let data = JSON.parse(params.prescriptionTCMDetail)\n      data.forEach((item, key) => {\n        let name = item.commonName? item.commonName:item.productName\n        drugsStr += name+'；'\n        list.push({\n          pref: item.pref,\n          productName: name\n        })\n      })\n      resStr = drugsStr.substring(0, drugsStr.length - 1)\n    }\n    this.setData({\n      drugTextCn: resStr,\n    })\n    // this.getDiagnosisByMedicineCn(list)\n  },\n  handleDrugTextCn(params) {\n    let drugsStr = '' ,resStr = '',list = []\n    if (params.length>0) {\n      let data = params\n      data.forEach((item, key) => {\n        let name = item.commonName? item.commonName:item.productName\n        drugsStr += name +'；'\n        list.push({\n          pref: item.pref,\n          productName: name\n        })\n      })\n      resStr = drugsStr.substring(0, drugsStr.length - 1)\n    }\n    this.setData({\n      drugTextCn: resStr,\n    })\n    // this.getDiagnosisByMedicineCn(list)\n  },\n  // 获取患者列表\n  getPatientInfo(id, name) {\n    wx.removeStorageSync('preorderdrugCart')\n    wx.removeStorageSync('preorderChinesedrugCart')\n    this.resetInfo()\n    wx.showLoading({\n      title: '加载中...'\n    })\n    let params = {\n      scanUserId: id,\n      userName: name,\n      thirdOrderNo: this.data.thirdOrderNo,\n      inquirySource: this.data.lvdiInquirySource\n    }\n    ajax2('post', apiUrl.getCodeDosingInfo, params , res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        this.data.patientList = res.data.result\n        getApp().globalData.burySpotSDK.track('getCodeDosingInfo', {\n          id: params.scanUserId,\n          data: res.data.result\n        });\n        if (this.data.allergyList) {\n          this.setData({\n            notIsActive: false\n          })\n        }\n        \n        this.setData({\n          medicineType:this.data.patientList.medicineType,\n          redDot: this.data.patientList.redDot,\n          patientName: this.data.patientList.userPatientListVo.patientName,\n          pregnancyAndLactation: this.data.patientList.pregnancyAndLactation.toString(),\n          liverAndRenalFunction: this.data.patientList.liverAndRenalFunction.toString()\n          \n        })\n        // 药品缓存处理，同步添加药品页\n        if(this.data.patientList.medicineType==0){\n          this.setData({\n            dosageAndUsage:{\n              tcmTotalDosage:'',\n              tcmDailyDosage: '',\n              tcmDailyFrequency:'',\n              tcmUsage: '',\n              tcmProcessingMethod: '', \n            }\n          })\n          if (this.data.patientList.ext.length) {\n            this.toChangeFn(this.data.patientList)\n            wx.setStorageSync('preorderdrugCart', JSON.parse(this.data.patientList.ext))\n            this.setData({\n              drugObj:JSON.parse(this.data.patientList.ext)\n            })\n\n          } else {\n            wx.setStorageSync('preorderdrugCart', [])\n            wx.setStorageSync('preorderChinesedrugCart', [])\n          }\n        }else{\n          if (this.data.patientList.prescriptionTCMDetail.length) {\n            this.toChangeFnCn(this.data.patientList)\n            wx.setStorageSync('preorderChinesedrugCart', JSON.parse(this.data.patientList.prescriptionTCMDetail))\n            this.setData({\n              dosageAndUsage:JSON.parse(this.data.patientList.dosageAndUsage),\n              drugObjCn : JSON.parse(this.data.patientList.prescriptionTCMDetail)\n            })\n            if(this.data.patientList.diagnosisDefault.trim().length>0){\n              this.initDiagnose(this.data.patientList.diagnosisDefault.split('|'),this.data.patientList.diagnosisDefaultCode.split('|'))\n            }\n          }else{\n            wx.setStorageSync('preorderdrugCart', [])\n            wx.setStorageSync('preorderChinesedrugCart', [])\n          }\n          \n        }\n        \n        // 过敏史 病情描述带入\n        this.getPatientBringFn(this.data.patientList.mainSuit, this.data.patientList.mainSuitDefault, this.data.diseaseArr, 'disease')\n        if (this.data.patientList.allergySymptomDefault == '无' || this.data.patientList.allergySymptomDefault.length > 50) {\n          this.getPatientBringFn(this.data.patientList.allergySymptom, [], this.data.allergyList, 'allergy')\n          this.setData({\n            notIsActive: true\n          })\n        } else {\n          this.getPatientBringFn(this.data.patientList.allergySymptom, this.data.patientList.allergySymptomDefault, this.data.allergyList, 'allergy')\n        }\n        // 同步常用诊断\n        this.getDiagnosticsHot()\n        this.getDiagnosticsHotCn()\n      } else {\n        wx.showToast({\n          title: res.data.msg || \"服务器异常请重试...\",\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    })\n  },\n  onHide(){\n    if(this.data.isLoginSuc){\n      this.data.isGoDrug = true;\n    }\n  },\n  initDiagnose(a,b){\n    let arr = []\n    a.forEach((item,index)=>{\n      arr.push({\n        diagnosticCooe:b[index],\n        diagnosticName:item,\n        isActive:true\n      })\n    })\n    this.setData({\n      choicedDiagnoseCn:arr\n    })\n  },\n  // 去诊断\n  showDiagnoseDialog() {\n    this.setData({\n      isClose: false,\n      isDiagnoseDialogShow: true,\n      isBtn: false,\n      keyword:'',\n      isSearch:false\n    })\n  },\n  // 去诊断\n  showDiagnoseDialogCn() {\n    this.setData({\n      isClose: false,\n      isDiagnoseDialogShowCn: true,\n      isBtn: false,\n      keyword:'',\n      isSearch:false\n    })\n  },\n  // 过敏史关闭\n  diagnoseClose() {\n    this.setData({\n      isClose: true,\n      isBtn: true,\n      diseaseDes: '',\n      wordNumbers: 0,\n      allergyDesNum: 0\n    })\n  },\n  // radio change事件\n  radioChange(e) {\n    let value = e.detail.value\n    let type = e.currentTarget.dataset.type\n    if (type === 'offlineDiagnosis' && value === '2') {\n      wx.showModal({\n        content: this.data.modalMsg,\n        showCancel: false,\n        confirmText: '知道了',\n        confirmColor: app.globalData.mainColor\n      })\n    }\n    this.setData({\n      [type]: value\n    })\n  },\n  // 去购药\n  goPreorderDrug() {\n    this.data.isGoDrug = true\n    if(this.data.medicineType==0){\n      wx.navigateTo({\n        url: `../preorderDrug/preorderDrug?organSign=${this.data.organSign}`\n      })\n    }else{\n      wx.setStorageSync('preorderChinesedrugCart', this.data.drugObjCn)\n      wx.navigateTo({\n        url: `../preorderChineseDrug/preorderChineseDrug?organSign=${this.data.organSign}`\n      })\n    }\n  },\n  // 扫码购药\n  getCameraScan () {\n    wx.showLoading({\n      title: '加载中...'\n    })\n    const that = this\n    wx.scanCode({\n      onlyFromCamera: true,\n      success (res) {\n        ajax2('post', apiUrl.codeMedicine, {barCode:res.result}, res => {\n          wx.hideLoading()\n          if (res.data.code === 0) {\n            if (res.data.result[0]) {\n              res.data.result[0].quantity = 0\n              that.setData({\n                scanText: res.data.result[0]\n              }, function() {\n                that.data.isGoDrug = true\n                wx.navigateTo({\n                  url: `../preorderDrug/preorderDrug?organSign=${that.data.organSign}&scanText=${JSON.stringify(that.data.scanText)}&type=scan`\n                })\n              })\n            } else {\n              that.data.isGoDrug = true\n              wx.navigateTo({\n                url: `../preorderDrug/preorderDrug?organSign=${that.data.organSign}&scanText=&type=scan`\n              })\n            }\n          }\n        })\n      },\n      fail (err) {\n        wx.hideLoading()\n        wx.showToast({\n          title: '扫码失败',\n          icon: 'none'\n        })\n        console.log(err)\n      }\n    })\n  },\n  // 去问诊记录\n  goInquiryRecord () {\n    wx.navigateTo({\n      url: '/pages/note/inquiryRecord/inquiryRecord'\n    })\n    this.setData({\n      hasInquiryStatus: false,\n      isBtn: true\n    })\n    let userId = wx.getStorageSync('userInfo') ? wx.getStorageSync('userInfo').userId : ''\n    getApp().globalData.burySpotSDK.track('action_scanCodeInfoConsulationRecordClick',  {\n      userId: userId,\n      organSign: this.data.organSign\n    });\n  },\n  // 去问诊\n  goInquiry: throttle((that,e) => {\n    if (that.data.isInquiry) {\n      return\n    }\n    that.data.diagnoseText = ''\n    that.data.diagnosisCode = ''\n    if(that.data.medicineType == 0){\n      that.data.choicedDiagnose.forEach(item => {\n        if (item.isActive) {\n          that.data.diagnoseText += item.diagnosticName + '；'\n          that.data.diagnosisCode += item.diagnosticCooe + '|'\n        }\n      })\n      that.data.diagnoseText = that.data.diagnoseText.substring(0, that.data.diagnoseText.length - 1)\n      that.data.diagnosisCode = that.data.diagnosisCode.substring(0, that.data.diagnosisCode.length - 1)\n    }else{\n      that.data.choicedDiagnoseCn.forEach(item => {\n        if (item.isActive) {\n          that.data.diagnoseText += item.diagnosticName + '；'\n          that.data.diagnosisCode += item.diagnosticCooe + '|'\n        }\n      })\n      that.data.diagnoseText = that.data.diagnoseText.substring(0, that.data.diagnoseText.length - 1)\n      that.data.diagnosisCode = that.data.diagnosisCode.substring(0, that.data.diagnosisCode.length - 1)\n    }\n    let toastText = ''\n    if (!that.data.patientName) {\n      toastText = '请添加患者信息'\n    } else if (that.data.medicineType==0 && !that.data.drugText && that.data.inquiryType === 'image') {\n      toastText = '请选择预购药品'\n    } else if (that.data.medicineType==1 && !that.data.drugTextCn && that.data.inquiryType === 'image'){\n      toastText = '请选择预购药品'\n    } else if (that.data.medicineType==0 && !that.data.diagnoseText && that.data.inquiryType === 'image') {\n      toastText = '诊断不能为空'\n    } else if (that.data.medicineType==1 && !that.data.diagnoseText && that.data.inquiryType === 'image') {\n      toastText = '诊断不能为空'\n    }else if(that.data.inquiryType==='image'&&that.data.medicineType==1 && !that.data.dosageAndUsage.tcmTotalDosage){\n      toastText = '副数不能为空'\n    } else if (!that.data.allergySelectItemList.length && !that.data.notStatus) {\n      toastText = '过敏史不能为空'\n    } else if (that.data.offlineDiagnosis === '2') {\n      toastText = that.data.modalMsg\n    } else if (!that.data.isReadAndAgree) {\n      toastText = '请勾选协议'\n    }\n    if (toastText) {\n      wx.showToast({\n        title: toastText,\n        icon: 'none',\n        duration: 2000\n      })\n    } else {\n      that.data.isInquiry = true\n      if (that.data.inquiryType === 'video') {\n        that.onInquiry()\n      } else {\n        initIMSingle(that.onInquiry())\n      }\n      getApp().globalData.burySpotSDK.track('handleClickMedicineType',  {\n        medicineType: that.data.medicineType\n      });\n    }\n  }, 1500),\n  // 图文问诊\n  onInquiry() {\n    let mainSuit = ''\n    let tempMainArr = []\n    if (this.data.diseases.length) {\n      this.data.diseases.forEach(item => {\n        tempMainArr.push(item.name)\n      })\n      mainSuit = tempMainArr.join(' ')\n    }\n    if (this.data.diseaseDes) {\n      let spaceStr = mainSuit? ' ':''\n      mainSuit = mainSuit + spaceStr + this.data.diseaseDes\n    }\n    let allergySymptomExplain = ''\n    if(!this.data.allergySelectItemList.length) {\n      allergySymptomExplain = '无'\n    } else {\n      this.data.allergySelectItemList.forEach(item => {\n        allergySymptomExplain += item.name + ' '\n      })\n      allergySymptomExplain = allergySymptomExplain.substring(0, allergySymptomExplain.length - 1)\n    }\n    let lastDiagnosis\n    if(this.data.medicineType==0){\n      lastDiagnosis = {\n        offlineDiagnosis: this.data.offlineDiagnosis,                   // 是否复诊 1是 2否\n        mainSuit: mainSuit,                                             // 主诉 空格隔开\n        diagnosis: this.data.diagnoseText.replace(/；/g, '|'),          // 诊断名称\n        diagnosisCode: this.data.diagnosisCode,                         // 诊断code\n        prescriptionDetail: this.data.drugObj                           // 药品详情\n      }\n    }else{\n      lastDiagnosis = {\n        offlineDiagnosis: this.data.offlineDiagnosis,                   // 是否复诊 1是 2否\n        mainSuit: mainSuit,                                             // 主诉 空格隔开\n        diagnosis: this.data.diagnoseText.replace(/；/g, '|'),          // 诊断名称\n        diagnosisCode: this.data.diagnosisCode,                         // 诊断code\n        prescriptionTCMDetail: this.data.drugObjCn,                     // 中药详情\n        dosageAndUsage:this.data.dosageAndUsage,                        // 中药用法用量   \n        prescriptionDetail:[]\n      }\n    }\n    getApp().globalData.loggerSDK.info(`创建问诊单参数 userPatientId: ${this.data.userPatientId}`)\n    let params = {\n      userPatientId: this.data.userPatientId,                                 // 患者id\n      organSign: this.data.organSign,                                         // 机构id\n      lastDiagnosis: JSON.stringify(lastDiagnosis),                           // 药品详情\n      liverAndRenalFunction: Number(this.data.liverAndRenalFunction),         // 肝、肾功能异常 0无   1 有\n      inquiryType: this.data.inquiryType == 'video' ? 0 : 1, // 0 视频问诊 1图文问诊\n      historyDrugAllergy: allergySymptomExplain,  // 过敏史\n      medicineType:this.data.medicineType,\n      thirdOrderNo: this.data.thirdOrderNo,\n      inquirySource: this.data.lvdiInquirySource\n    }\n    getApp().globalData.burySpotSDK.track('createPrescriptionUrl', {\n      id: params.userPatientId,\n    });\n    if (this.data.userGender === 2) {\n      params.pregnancyAndLactation = Number(this.data.pregnancyAndLactation)  // 是否妊娠、哺乳期 0 否  1 是\n    } else {\n      params.pregnancyAndLactation = 0\n    }\n    if (this.data.inquiryType === 'video') {\n      return this.getAuthSetting(params);\n    }\n    console.log('_______params', params)\n    // 提交给接口 创建问诊单\n    this.createPrescriptionRequest(params);\n  },\n  createPrescriptionRequest(params){\n    this.data.createPrescriptionParams = params\n    if (params.inquiryType === 1) {\n      let data = {\n        scanUserId: wx.getStorageSync('userInfo').userId,\n        userName: this.data.patientName,\n        thirdOrderNo: this.data.thirdOrderNo,\n        inquirySource: this.data.lvdiInquirySource\n      }\n      ajax2('post', apiUrl.getCodeDosingInfo, data, res => {\n        if (res.data.code === 0) {\n          this.data.redDot = res.data.result.redDot\n          if (this.data.redDot) {\n            this.setData({\n              hasInquiryStatus: true,\n              isBtn: false\n            })\n          } else {\n            this.createPrescriptionRequestRes(params)\n          }\n        } else {\n          wx.showToast({\n            title: res.data.msg || \"服务器异常请重试...\",\n            icon: 'none',\n            duration: 2000\n          })\n        }\n      })\n    } else {\n      this.createPrescriptionRequestRes(params)\n    }\n  },\n  /**\n   * @description 图文 视频问诊 创建问诊单！\n   * @param { Object } params 图文 & 视频问诊请求参数 \n   * @returns void\n   */\n  createPrescriptionRequestRes(params) {\n    wx.showLoading({\n      title: '加载中...'\n    })\n    // if(!xcxIM.checkStatus(this.createPrescriptionRequestRes,params)){\n    //   return\n    // }\n    ajax2('post', apiUrl.createPrescriptionUrl, params, res => {\n      if (res.data.code === 0) {\n        wx.hideLoading()\n        if (res.data.result.inquiryReportGuid && params.inquiryType == 1) {\n          // 图文问诊\n          wx.removeStorageSync('preorderdrugCart') \n          wx.navigateTo({\n            url: `/pages/inquiry/doctorWait/doctorWait?inquiryId=${res.data.result.inquiryReportGuid}&organSign=${this.data.organSign}`\n          })\n          let userId = wx.getStorageSync('userInfo') ? wx.getStorageSync('userInfo').userId : ''\n          getApp().globalData.burySpotSDK.track('action_offlineInquiry_goInquiryClick', {\n            userId: userId,\n            inquiryType: '图文',\n            organSign: this.data.organSign\n          })\n        } else if (res.data.result.userSign && params.inquiryType == 0) {\n          // 视频问诊\n          wx.setStorageSync('inqueryInfo', res.data.result);\n          wx.navigateTo({\n            url: `/pages/inquiry/trtc/trtcRoom`\n          })\n          let userId = wx.getStorageSync('userInfo') ? wx.getStorageSync('userInfo').userId : ''\n          getApp().globalData.burySpotSDK.track('action_offlineInquiry_goInquiryClick', {\n            userId: userId,\n            inquiryType: '视频',\n            organSign: this.data.organSign\n          });\n        }\n      } else {\n        this.data.isInquiry = false  \n        wx.hideLoading()\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      this.data.isInquiry = false\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  /**\n   * 添加患者、药品、诊断症状\n   * @param patientName   患者\n   * @param userPatientId 患者id\n   * @param userGender    患者性别\n   * @param drugText      药品\n   * @param diagnoseText  诊断\n   * @param diagnosisCode 诊断code\n   */\n  addText(e) {\n    getApp().globalData.loggerSDK.info(`子组件调用addText方法 userPatientId: ${e.detail.userPatientId}`)\n    this.setData({\n      [e.detail.dialogName]: false,\n      [e.detail.p]: e.detail.text,\n      [e.detail.userGenderStr]: e.detail.userGender,\n      [e.detail.userPatientIdStr]: e.detail.userPatientId,\n      [e.detail.diagnosisCodeStr]: e.detail.diagnosisCode,\n      [e.detail.isBtnStr]: e.detail.isBtnVal,\n      [e.detail.userPatientUserIdStr]: e.detail.userPatientUserId\n    })\n    this.getPatientInfo(wx.getStorageSync('userInfo').userId, e.detail.text)\n  },\n  readAndAgreeChange(e) {\n    this.setData({\n      isReadAndAgree: e.detail.value.length > 0? true:false\n    })\n  },\n  addPatient: function() {\n    this.setData({\n      addPatientShow: true,\n      isBtn: false\n    });\n    this.selectComponent('#patientinfoRef').getPatientList(true)\n  },\n  dialogClose() {\n    this.setData({\n      isBtn: true\n    })\n  },\n  toLogin() {\n    wx.navigateTo({\n      url: '/pages/note/login/login'\n    })\n  },\n  // 判断药店套餐是否有效\n  requestDrugStoreIdEffective: function() {\n    ajax('POST', 'api/patient/drugstore/getDrugstoreQrCode', {\n      organSign: this.data.organSign\n    }, (res) => {\n      if (res.data.code == 0) {\n        // 这里判断是否有效，有效跳转扫码补方，无效跳转极速问诊\n        let _drugName = res.data.result.drugstoreName || '';\n        let name = _drugName.length > 8 ? _drugName.substring(0, 8) + '...': _drugName\n        this.setData({\n          drugStoreName: name,\n          inquiryTypeList: res.data.result && res.data.result.inquiryTypeList ? res.data.result.inquiryTypeList : []  // 判断c端视频、图文权限\n        })\n        if (this.data.inquiryTypeList.length === 0) {\n          let userInfo = {\n            token: getApp().globalData.sess_key,\n            userId: wx.getStorageSync('userInfo').userId,\n            organSignValid: 1\n          }\n          getApp().globalData.inquirySource = 1;\n          getApp().globalData.inquiryChannel = 1;\n          wx.redirectTo({\n            url: `/pages/inquiry/guidance/guidance?userInfo=${ JSON.stringify(userInfo) }`\n          })\n        } else if (this.data.inquiryTypeList.includes('21') && !this.data.inquiryTypeList.includes('22')) {\n          this.setData({\n            inquiryTypeStatus: false,\n            inquiryType: 'video'\n          })\n        } else if (this.data.inquiryTypeList.includes('22') && !this.data.inquiryTypeList.includes('21')) {\n          this.setData({\n            inquiryTypeStatus: false,\n            inquiryType: 'image'\n          })\n        } else if (this.data.inquiryTypeList.includes('21') && this.data.inquiryTypeList.includes('22')) {\n          this.setData({\n            inquiryTypeStatus: true\n          })\n        }\n\n        // isValid 等于 1 ，套餐有效停留当前页面，否则跳转极速问诊\n        if (res.data.result.isValid != 1) {\n          this.setData({\n            organSignFlag: false\n          })\n          let userInfo = {\n            token: getApp().globalData.sess_key,\n            userId: wx.getStorageSync('userInfo').userId,\n            organSignValid: 1\n          }\n          getApp().globalData.inquirySource = 1;\n          wx.redirectTo({\n            url: `/pages/inquiry/guidance/guidance?userInfo=${ JSON.stringify(userInfo) }`\n          })\n        }else {\n          this.setData({\n            organSignFlag: true\n          })\n          if (!this.data.isLookAgreement && !this.data.isGoDrug) {\n            this.getPatientList()\n          }\n        }\n      } else {\n        wx.showToast({\n          icon: 'none',\n          title: res.data.msg,\n        })\n      }\n    })\n  },\n  goWebviewLoadUrl(e) {\n    let _linkurl = e.currentTarget.dataset.linkurl;\n    let num = _linkurl === '1'? 4:3\n    let url = getH5AbsoluteUrl(`#/serviceAgreement?num=${num}`)\n    this.data.isLookAgreement = true\n    wx.navigateTo({\n      url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n    })\n  },\n  inquiryTypeChoose(e){\n    let type = e.currentTarget.dataset.type\n    if (type === 'image') {\n      this.setData({\n        inquiryType: 'image'\n      })\n    } else if (type === 'video') {\n      this.setData({\n        inquiryType: 'video'\n      })\n    }\n  },\n  // 公用方法\n  getAuthSetting (params) {\n    let that = this\n    that.data.isInquiry = false\n    wx.getSystemInfo({\n      success (res) {\n        that.setData({\n          microphoneAuthorized: res.microphoneAuthorized,\n          cameraAuthorized: res.cameraAuthorized\n        })\n      },\n      fail () {\n        console.log('获取微信权限失败')\n      }\n    })\n    if (this.data.microphoneAuthorized && this.data.cameraAuthorized) {\n      wx.getSetting({\n        success: (res) => {\n          let cameraAuth = res.authSetting['scope.camera']\n          let recordAuth = res.authSetting['scope.record']\n          if (cameraAuth == false || recordAuth == false) {\n            // 打开微信授权设置开关\n            wx.showModal({\n              title: '提示',\n              content: '小程序需要获取您的摄像头、麦克风权限以发起视频问诊。',\n              showCancel: false,\n              confirmText: '去开启',\n              success: function (res) {\n                if (res.confirm) {\n                  // 确定按钮\n                  // 新版禁用，需要通过按钮触发\n                  wx.openSetting({\n                    success: function (res) {\n                      let cameraAuth = res.authSetting['scope.camera']\n                      let recordAuth = res.authSetting['scope.record']\n                      if (cameraAuth && recordAuth) {\n                        wx.showToast({\n                          title: \"授权成功\",\n                          icon: \"success\"\n                        })\n                        that.createPrescriptionRequest(params);\n                      } else {\n                        let describeX\n                        if (cameraAuth == false) {\n                          describeX = '摄像头'\n                        } else if (recordAuth === false) {\n                          describeX = '麦克风'\n                        }\n                        wx.showToast({\n                          title: `${describeX}尚未进行授权`,\n                          icon: \"none\"\n                        })\n                      }\n                    }\n                  })\n                }\n              }\n            })\n          } else if (cameraAuth == true && recordAuth == true) {\n            that.createPrescriptionRequest(params);\n          } else {\n            // 第一次进来，未发起授权\n            wx.authorize({\n              scope: 'scope.camera',\n              success: () => {\n                wx.showToast({\n                  title: \"授权成功\",\n                  icon: \"success\"\n                })\n              }\n            })\n            wx.authorize({\n              scope: 'scope.record',\n              success: () => {\n                wx.showToast({\n                  title: \"授权成功\",\n                  icon: \"success\"\n                })\n              }\n            })\n          }\n        },\n        fail: function () {\n          console.log('请打开微信权限')\n        }\n      })\n    } else {\n      let describeW\n      if (this.data.microphoneAuthorized == false) {\n        describeW = '麦克风'\n      } else if (this.data.cameraAuthorized == false) {\n        describeW = '摄像头'\n      }\n      wx.showToast({\n        title: `您需要现在系统设置中为微信开启${describeW}使用权限`,\n        icon: \"none\"\n      })\n    }\n  },\n  setIpt(e){\n    let value = e.detail.value\n    value = value.replace(/^\\./g,\"0.\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n    value = value>999?999:this.trans(value)\n    var arr = this.data.drugObjCn;\n    var index = e.currentTarget.dataset.index||e.target.dataset.index;\n    console.log(value)\n    if(!value || value==0){\n      arr.splice(index,1)\n    }else{\n      arr[index].quantity = value;\n    }\n    this.setData({ drugObjCn: arr });\n    this.handleDrugTextCn(this.data.drugObjCn)\n},\ntrans(num){\n  let arr = num.split('')\n  if(arr[arr.length-1]==='.'){\n      arr.splice((arr.length-1),1)\n      return this.trans(arr.join(''))\n  }else{\n      return num\n  }\n},\nblurDosageAndUsage(e){\n  const type = e.currentTarget.dataset.type\n    let value = e.detail.value\n    value = value.replace(/^\\./g,\"0.\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n    this.setData({\n      dosageAndUsage:{\n        ...this.data.dosageAndUsage,\n        [type]:value>999?999:this.trans(value)\n      }\n    })\n},\n  editDosageAndUsage(e){\n    const type = e.currentTarget.dataset.type\n    let value = e.detail.value\n    value = value.replace(/^\\./g,\"0.\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n    this.setData({\n      dosageAndUsage:{\n        ...this.data.dosageAndUsage,\n        [type]:value>999?999:value\n      }\n    })\n  },\n delItem (e) {\n  var index = e.currentTarget.dataset.index||e.target.dataset.index;\n  var arr= this.data.drugObjCn;\n  arr.splice(index,1)\n  this.setData({\n    drugObjCn: arr,\n  })\n  if(arr.length===0){\n    this.setData({\n      dosageAndUsage:{\n        tcmTotalDosage:'', // 总计\n        tcmDailyDosage: '', // 每日几剂\n        tcmDailyFrequency:'', // 每剂几次\n        tcmUsage: '', // 用法\n        tcmProcessingMethod: '', // 用量\n      },\n      drugTextCn:''\n    })\n  }\n  // this.toChangeFnCn(this.data.drugObjCn)\n  this.handleDrugTextCn(this.data.drugObjCn)\n},\nchangePicker(e){\n   var index = e.currentTarget.dataset.index||e.target.dataset.index;\n   var title = ''\n   if(index==1){\n      title ='用法'\n      this.setData({\n        pickerShowUsage:true,\n        pickerType:index,\n        isBtn:false\n      })\n    }else{\n      // 加工方式\n      title =''\n      this.setData({\n        pickerShowMethod:true,\n        pickerType:index,\n        isBtn:false\n      })\n    }\n},\nclosePicker(){\n  this.setData({\n    pickerShowUsage:false,\n    pickerShowMethod:false,\n    isBtn:true\n  })\n},\nselectUsage(e){\n  this.setData({\n    'dosageAndUsage.tcmUsage':e.currentTarget.dataset.item.tcmUsage\n  })\n  this.setData({\n    pickerShowUsage:false,\n    isBtn:true\n  })\n},\nselectProcessingMethod(e){\n  this.setData({\n    'dosageAndUsage.tcmProcessingMethod':e.currentTarget.dataset.item.tcmProcessingMethod\n  })\n  this.setData({\n    pickerShowMethod:false,\n    isBtn:true\n  })\n},\n})"},"convertDir/pages/scan/pages/newAddDrug/newAddDrug":{"json":{},"js":"const app = getApp()\n\nimport { ajax2 } from '../../../../utils/util'\n\nconst apiUrl = {\n  addMedicine: '/codeDosing/addMedicine',                  // 新增药品\n}\n\nexport default {\n  data: function() {\n    return {\n      drugName: '', // 中药名字\n      newAddNum: 10, // 默认10g\n      btnStatus: 0, // 控制按钮是否能被点击\n      navBarHeight: app.globalData.navBarHeight,\n      windowHeight: Taro.getSystemInfoSync().windowHeight,\n      organSign: ''  // 门店机构id\n    };\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.organSign = options.organSign\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    Taro.removeStorageSync('newAddDrug')\n  },\n  // 获取药名\n  getDrugName(e) {\n    this.setData({\n      drugName: e.detail.value\n    }, function (){\n      this.data.drugName ? this.setData({btnStatus: 1}) : this.setData({btnStatus: 0})\n    })\n  },\n  // 加\n  pubAddNums() {\n    this.data.newAddNum++\n    if (this.data.newAddNum > 999) {\n      Taro.showToast({\n        title: '剂量不能超过999克',\n        icon: 'none'\n      })\n      this.data.newAddNum = 999\n    }\n    this.setData({\n      newAddNum: this.data.newAddNum\n    })\n  },\n  // 减\n  reduceNums() {\n    this.data.newAddNum--\n    if (this.data.newAddNum < 0) {\n      Taro.showToast({\n        title: '剂量不能少于0克',\n        icon: 'none'\n      })\n      this.data.newAddNum = 0\n    }\n    this.setData({\n      newAddNum: this.data.newAddNum\n    })\n  },\n  // 输入药品剂量\n  changeCarnums(e) {\n    this.data.newAddNum = Number(e.detail.value)\n    if (this.data.newAddNum > 999) {\n      Taro.showToast({\n        title: '剂量不能超过999克',\n        icon: 'none'\n      })\n      this.data.newAddNum = 999\n    }\n    if (this.data.newAddNum < 0) {\n      Taro.showToast({\n        title: '剂量不能少于0克',\n        icon: 'none'\n      })\n      this.data.newAddNum = 0\n    }\n    this.setData({\n      newAddNum: this.data.newAddNum\n    })\n  },\n  // 检验不能输入多个小数点\n  checkCarnums(e) {\n    let value = e.detail.value\n    return {\n      value: value.replace(/[^\\d.]/g,\"\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n    }\n  },\n  // 确定\n  submitDrug() {\n    Taro.showLoading({\n      title: '加载中...'\n    })\n    console.log(this.data.drugName, this.data.newAddNum)\n    let params = {\n      commonName: this.data.drugName,\n      singleDose: this.data.newAddNum,\n      organSign: this.data.organSign\n    }\n    ajax2('post', apiUrl.addMedicine, params, res => {\n      Taro.hideLoading()\n      if (res.data.code === 0) {\n        if ( res.data.result ) {\n          console.log('......', res.data.result)\n          let pref = res.data.result\n          let data = {\n            attributeSpecification: null,\n            barCode: null,\n            commonName: this.data.drugName,\n            directions: null,\n            instructionsDto: null,\n            manufacturer: null,\n            organSign: null,\n            pharmacyPref: null,\n            pref: pref,\n            prescriptionYn: \"0\",\n            producingArea: null,\n            productName: \"\",\n            productType: null,\n            remindContent: null,\n            retailPrice: null,\n            singleDose: \"\",\n            singleDoseValue: \"\",\n            singleUnit: null,\n            singleUnitValue: null,\n            smartfaceOrganSign: null,\n            specifications: null,\n            stockNumber: null,\n            systemType: null,\n            thirdChannel: null,\n            type: 1,\n            unitId: null,\n            unitName: null,\n            useFrequency: null,\n            useFrequencyValue: null,\n            quantity: this.data.newAddNum\n          }\n          Taro.setStorage({\n            key: 'newAddDrug',\n            data: data,\n            success: function(res) {\n              Taro.navigateBack({\n                delta: 1\n              })\n            },\n            fail: function() {\n              console.log('缓存未成功')\n            }\n          })\n        }\n      } else {\n        Taro.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    })\n  }\n};","wxml":"\n  <view class=\"newAddDrug-auto-container\"> \n    <navBar title-text=\"新增药品\" :showBackCapsule=\"true\" :showCapsule=\"false\"></navBar>\n    <view class=\"newAddDrug\" :style=\"{height:  windowHeight - navBarHeight px}\">    \n      <view class=\"newAdd-title\">基本信息\n      </view>\n      <view class=\"newAdd-drug\">  \n        <view class=\"red\">*\n        </view>\n        <view>通用信息\n        </view>\n        <input class=\"newAdd-input\" maxlength=\"50\" :value=\" drugName \" placeholder=\"请输入药品通用名\" bindinput=\"getDrugName\"></input>\n      </view>\n      <view class=\"newAdd-drug\">  \n        <view class=\"red\">*\n        </view>\n        <view>剂量\n        </view>\n        <view class=\"newAdd-weight\">   \n          <image class=\"newAdd-icon\" bindtap=\"reduceNums\" mode=\"widthFix\" src=\"../../images/reduce.png\"></image>\n          <input class=\"newAdd-input-num\" type=\"text\" :value=\" newAddNum \" bindblur=\"changeCarnums\" bindinput=\"checkCarnums\"></input>\n          <image class=\"newAdd-icon\" bindtap=\"pubAddNums\" mode=\"widthFix\" src=\"../../images/add.png\"></image>\n          <text>g\n          </text>\n        </view>\n      </view>\n      <view v-if=\"btnStatus && newAddNum > 0\" class=\"submit-btn is-submit\" bindtap=\"submitDrug\">确定\n      </view>\n      <view v-else class=\"submit-btn\">确定\n      </view>\n    </view>\n  </view>","wxss":".newAddDrug {\n  box-sizing: border-box;\n  width: 100%;\n  background: #fff;\n}\n.newAdd-title{\n  width: 100%;\n  height: 90rpx;\n  background: #f7f7f7;\n  line-height: 90rpx;\n  font-weight: 700;\n  padding: 0 40rpx;\n}\n.newAdd-drug{\n  height: 120rpx;\n  line-height: 120rpx;\n  padding: 0 40rpx;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #f7f7f7;\n}\n.newAdd-input {\n  flex-grow: 1;\n  height: 120rpx;\n  padding-left: 80rpx;\n}\n.newAdd-input-num{\n  width: 75rpx;\n  height: 120rpx;\n  text-align: center;\n}\n.newAdd-weight{\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  justify-content: flex-end;\n}\n.newAdd-weight text{\n  margin-left: 20rpx;\n}\n.newAdd-icon{\n  width: 40rpx;\n  height: 40rpx;\n}\n.red{\n  color: red;\n}\n.submit-btn {\n  position: fixed;\n  bottom: 30rpx;\n  color: #FFFFFF;\n  width: 92%;\n  margin-left: 4%;\n  font-size: 32rpx;\n  font-weight: 600;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background-color: #E2E4EA;\n  border-radius: 48rpx;\n}\n.submit-btn.is-submit {\n  background: #00b955;\n}"},"convertDir/pages/scan/pages/preorderChineseDrug/preorderChineseDrug":{"json":{"halfScreenDialog":"../../../../component/halfScreenDialog/halfScreenDialog","preorderDialog":"../../component/preorderChineseDialog/preorderChineseDialog","no-data":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"preorderChineseDrug-auto-container\"> \n    <navBar title-text=\"预购药品\" :showBackCapsule=\"true\" :showCapsule=\"false\"></navBar>\n    <view :class=\"[preorder-drug,( isFixed? 'is-fixed':'' )]\">   \n      <view class=\"top-fixed-box\" :style=\"{top:  navBarHeight }\">\n        <view class=\"search-container\">\n          <view class=\"input-container\">   \n            <image mode=\"widthFix\" src=\"../../../../images/search-icon-black.png\" class=\"search-icon\"></image>\n            <input type=\"text\" class=\"search-input\" :value=\" keyword \" bindinput=\"onKeywordText\" placeholder=\"请输入药品名称\"></input>\n            <image v-if=\" keyword \" class=\"search-icon\" bindtap=\"clearKeyword\" mode=\"widthFix\" src=\"../../../../images/search_clear.png\"></image>\n            <view class=\"search-btn\" bindtap=\"getProductsNameByItem\" data-name>搜索\n            </view>\n          </view>\n        </view>\n      </view>\n      <scroll-view :scroll-y=\" isScroll \" :class=\"[drug-list,( keyword && !isData? 'pt440':'' )]\" :style=\"{height:  windowHeight - navBarHeight px}\">  \n        <block v-if=\" keyword && isSuggest && suggestList.length > 0 \">\n          <view class=\"inp-search-item\" bindtap=\"getProductsNameByItem\" :data-name=\" item.name \" v-for=\"(item, key) in  suggestList \" :key=\"key\">\n            <rich-text :nodes=\" item.richTextName \"></rich-text>\n          </view>\n        </block>\n        <block v-else-if=\" keyword && isProducts && productsList.length > 0 \">\n          <view class=\"inp-search-item\" v-for=\"(item, key) in  productsList \" :key=\"key\"> \n            <view class=\"item-left\">\n              <view class=\"drug-name\"> \n                <text class=\"is-recipe\" v-if=\" item.prescriptionYn === '1' \">Rx\n                </text>\n                <text>{{ item.commonName || item.productName }}\n                </text>\n              </view>\n            </view>\n            <view class=\"inp-search-item-option\">    \n              <image v-if=\" item.quantity > 0 \" class=\"option-icon\" bindtap=\"reduceCardNums\" :data-item=\" item \" mode=\"widthFix\" src=\"../../images/reduce.png\"></image>\n              <input v-if=\" item.quantity > 0 \" class=\"drug-nums\" type=\"text\" :value=\" item.quantity  \" bindblur=\"changeCarnums\" bindinput=\"checkCarnums\" :data-item=\"item\"></input>\n              <image v-if=\" item.quantity > 0 \" class=\"option-icon\" bindtap=\"pubAddCardNum\" :data-item=\" item \" mode=\"widthFix\" src=\"../../images/add.png\"></image>\n              <image v-if=\" item.quantity <= 0 \" class=\"option-icon\" bindtap=\"addDrugs\" :data-item=\" item \" mode=\"widthFix\" src=\"../../images/add.png\"></image>\n              <text v-if=\" item.quantity > 0 \">g\n              </text>\n            </view>\n          </view>\n        </block>\n        <block v-else-if=\" !isData \">\n          <view class=\"no-data\"> \n            <no-data v-if=\" true \" zhi=\"new1\" imageUrl=\"{{ cdnLink }}images/empty-log.png\" textval=\"暂无搜索结果\" textval2=\"请调整关键词搜索或【新增药品】\"></no-data>\n            <view bindtap=\"toNewAddDrug\" class=\"newAddDrugs\">新增药品\n            </view>\n          </view>\n        </block>\n      </scroll-view>\n      <view class=\"btn-container\" id=\"btnContainer\"> \n        <view class=\"drugs\" bindtap=\"showDrugListDialog\"> \n          <view class=\"drugs-icon-container\"> \n            <image class=\"drugs-icon\" mode=\"widthFix\" src=\"../../images/scan-drug-list.png\"></image>\n            <view class=\"red-dot\" v-if=\" categoryNums !== 0 \">{{ categoryNums }}\n            </view>\n          </view>\n          <view>药品列表\n          </view>\n        </view>\n        <view :class=\"[submit-btn,( categoryNums > 0? 'is-submit':'' )]\" bindtap=\"submitDrug\">确定\n        </view>\n      </view>\n      <halfScreenDialog :show=\"preorderDialogShow\" title=\"预购药品\" bind:close=\"dialogClose\">\n        <preorderDialog :drugList=\" drugList \" id=\"preorderDialogRef\" slot=\"desc\" bind:changeCardNumsComp=\"changeCarnums\" bind:getNewCategoryNums=\"getNewCategoryNums\" bind:deleteCardNumsComp=\"deleteCarCardNums\" bind:addCardNumsComp=\"pubAddCardNum\" bind:reduceCardNumsComp=\"reduceCardNums\"></preorderDialog>\n      </halfScreenDialog>\n    </view>\n  </view>","wxss":".preorder-drug {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 32rpx;\n  background-color: #fff;\n}\n.preorder-drug.is-fixed {\n  position: fixed;\n}\n.top-fixed-box {\n  box-sizing: border-box;\n  position: fixed;\n  left: 0;\n  width: 100%;\n  padding: 0 32rpx;\n} \n.search-container {\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  background-color: #fff;\n  padding: 20rpx 0;\n}\n.input-container {\n  box-sizing: border-box;\n  flex: 1;\n  display: flex;\n  align-items: center;\n  height: 74rpx;\n  background-color: #F1F2F6;\n  border-radius: 437rpx;\n  padding: 16rpx 22rpx;\n  position: relative;\n}\n.input-container .search-icon {\n  width: 30rpx;\n  height: 30rpx;\n}\n.search-btn {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 116rpx;\n  height: 76rpx;\n  background: #d9ebff;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #00b955;\n  text-align: center;\n  line-height: 76rpx;\n}\n.search-input {\n  width: 69%;\n  height: 100%;\n  padding: 0 21rpx;\n}\n\n.pub-text {\n  color: #111734;\n  font-size: 32rpx;\n  font-weight: 600;\n}\n.drug-list {\n  box-sizing: border-box;\n  background-color: #fff;\n  padding: 130rpx 0 156rpx;\n}\n.drug-list.pt440 {\n  /*padding-top: 440rpx;*/\n}\n.drug-list-title {\n  margin-bottom: 10rpx;\n}\n.drug-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 30rpx 0;\n  border-bottom: 1rpx solid #F7F7F7;\n}\n.drug-list-item .item-left {\n  flex: 1;\n  display: flex;\n}\n.is-recipe {\n  color: #EF4D4D;\n  font-size: 24rpx;\n  width: 46rpx;\n  height: 32rpx;\n  border: 1rpx solid #EF4D4D;\n  border-radius: 6rpx;\n  margin-right: 12rpx;\n  padding: 4rpx 10rpx;\n}\n.drug-list-item .item-right {\n  color: #00b955;\n  width: 70rpx;\n}\n.drugs-icon-container {\n  position: relative;\n}\n.red-dot {\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  width: 28rpx;\n  height: 28rpx;\n  line-height: 28rpx;\n  text-align: center;\n  border-radius: 50%;\n  background-color: #FF5630;\n}\n.sort-icon {\n  width: 38rpx;\n  height: 38rpx;\n  text-align: center;\n  margin-right: 20rpx;\n}\n.drug-name {\n  color: #111734;\n  font-size: 30rpx;\n  overflow: hidden;\n  white-space:nowrap;\n  text-overflow: ellipsis;\n  width: 440rpx;\n  padding: 4rpx 0;\n}\n.drug-size {\n  color: #9AA0B5;\n  font-size: 24rpx;\n}\n.inp-search-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1rpx solid #F7F7F7;\n  padding: 30rpx 0;\n}\n.option-icon {\n  width: 40rpx;\n  height: 40rpx;\n}\n.drug-nums {\n  width: 80rpx;\n  text-align: center;\n}\n.inp-search-item-option {\n  display: flex;\n  align-items: center;\n  margin-left: 5rpx;\n}\n.inp-search-item-option >text{\n  margin-left: 20rpx;\n}\n.btn-container {\n  box-sizing: border-box;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  z-index: 5001;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  background-color: #fff;\n  padding: 30rpx 32rpx;\n}\n.drugs {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  color: #41465D;\n  font-size: 24rpx;\n  width: 100rpx;\n  margin-right: 50rpx;\n  padding: 5rpx 0;\n}\n.drugs-icon {\n  width: 40rpx;\n}\n.submit-btn {\n  flex: 1;\n  color: #FFFFFF;\n  font-size: 32rpx;\n  font-weight: 600;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background-color: #E2E4EA;\n  border-radius: 48rpx;\n}\n.submit-btn.is-submit {\n  background: #00b955;\n}\n.no-data {\n   margin-top: -130rpx;\n}\n.newAddDrugs{\n  width: 200rpx;\n  height: 65rpx;\n  background: #00b955;\n  border-radius: 10rpx;\n  text-align: center;\n  line-height: 65rpx;\n  color: #fff;\n  font-size: 25rpx;\n  margin: auto;\n  margin-top: -30rpx;\n}","js":"const app = getApp()\n\nimport { ajax2, cdnStaticResourceUrl } from '../../../../utils/util'\n\nconst apiUrl = {\n  getSuggestNameUrl: 'api/patient/drugstore/getSuggestNamesByProductsName',   // 药品补全\n  getProductsNameUrl: 'api/patient/drugstore/getProductsByNameAndSpec',        // 药品及规格\n}\nPage({\n  data: {\n    cdnLink: cdnStaticResourceUrl,\n    organSign: '',                                      // 门店机构id\n    keyword: '',                                        // 搜索框关键字\n    isProducts: false,\n    isSuggest: false,\n    drugList: [],                                       // 药品列表 - 传给子组件\n    suggestList: [],                                    // suggest数据\n    hotProductsList: [],                                // 常用药品列表\n    categoryNums: 0,                                    // 药品种类\n    productsList: [],                                   // 药品列表\n    isData: true,                                       // 是否有数据\n    isFixed: false,                                     // dialog弹框是否展示出来啦\n    isScroll: true,\n    searchHeight: '',\n    btnContainerHeight: '',\n    firstImgUrl: '../../images/scan-first.png',\n    secondImgUrl: '../../images/scan-second.png',\n    thirdImgUrl: '../../images/scan-third.png',\n    navBarHeight: app.globalData.navBarHeight,\n    windowHeight: wx.getSystemInfoSync().windowHeight,\n    preorderDialogShow: false,                           // 展示预购dialog\n    hotListShow: true,                                   // 热门药品\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.data.organSign = options.organSign\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    let preorderChinesedrugCart = wx.getStorageSync('preorderChinesedrugCart')\n    let newAddDrug = wx.getStorageSync('newAddDrug')\n    if (newAddDrug) {\n      preorderChinesedrugCart.push(newAddDrug)\n      if (preorderChinesedrugCart.length > 33) {\n        wx.showToast({\n          title: '添加失败，最多可添加33种药品',\n          icon: 'none',\n          duration: 2000\n        })\n        return\n      }\n    }\n    wx.setStorageSync('preorderChinesedrugCart', preorderChinesedrugCart)\n    if (preorderChinesedrugCart.length) {\n      preorderChinesedrugCart.forEach(item => {\n        item.pref = item.pref ? item.pref : item.productPref\n      })\n      this.setData({\n        drugList: preorderChinesedrugCart\n      })\n    }\n    this.getNewCategoryNums()\n  },\n  // 获取最新药品种类\n  getNewCategoryNums() {\n    this.setData({\n      categoryNums: wx.getStorageSync('preorderChinesedrugCart').length\n    })\n  },\n  // 关闭dialog\n  dialogClose() {\n    this.getNewCategoryNums()\n    this.setData({\n      isFixed: false,\n      isScroll: true\n    })\n  },\n  showDrugListDialog() {\n    this.setData({\n      preorderDialogShow: true,\n      isFixed: true,\n      isScroll: false\n    })\n  },\n  // 搜索框input事件\n  onKeywordText(e) {\n    this.setData({\n      keyword: e.detail.value\n    })\n    this.getSuggestName()\n  },\n  // 清楚搜索关键字\n  clearKeyword() {\n    this.setData({\n      keyword: ''\n    })\n  },\n  // suggest搜索\n  getSuggestName() {\n    let that = this\n    let keyword = this.data.keyword\n    console.log('..............keyword', keyword)\n    let params = {\n      productName: keyword.split(' ')[0],\n      attributeSpecification: keyword.split(' ')[1],\n      organSign: this.data.organSign,\n      productType: 1 // 1中药 0西药\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    that.setData({\n      isSuggest: true,\n      isProducts: false\n    })\n    ajax2('post', apiUrl.getSuggestNameUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        if ( res.data.result && res.data.result.length) {\n          let reg = new RegExp(`(${keyword.split(' ')[0].replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\")})`, 'g')\n          let tempList = res.data.result.map(item => {\n            return {\n              name: item,\n              richTextName: `${item.replace(reg, `<font style=\"color:#FF5630\">${keyword.split(' ')[0]}</font>`)}`\n            }\n          })\n          that.setData({\n            isData: true,\n            suggestList: tempList\n          })\n          getApp().globalData.burySpotSDK.track('searchMedicineCn',  {\n            searchVal: this.data.keyword\n          });\n        } else {\n          that.setData({\n            suggestList: [],\n            isData: false\n          })\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 通过列表调用搜索方法\n  getProductsNameByItem(e) {\n    let p = e.currentTarget.dataset.name\n    this.getProductsName(p)\n  },\n  // 搜索药品及规格\n  getProductsName(p) {\n    let that = this\n    if (p) {\n      this.setData({\n        keyword: p\n      })\n    }\n    let keyword = this.data.keyword\n    console.log('..............keyword', keyword)\n    let params = {\n      productName: p || keyword.split(' ')[0],\n      attributeSpecification: keyword.split(' ')[1],\n      organSign: this.data.organSign,\n      productType: 1 // 1中药 0西药\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    that.setData({\n      isSuggest: false,\n      isProducts: true\n    })\n    ajax2('post', apiUrl.getProductsNameUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0 ) {\n        if (res.data.result && res.data.result.length) {\n          let list = res.data.result.map(item => {\n            return {\n              ...item,\n              quantity: 0\n            }\n          })\n          let resArr = that.dealWithArr(list)\n          that.setData({\n            isData: true,\n            productsList: resArr\n          })\n          getApp().globalData.burySpotSDK.track('searchMedicineCn',  {\n            searchVal: this.data.keyword\n          });\n        } else {\n          that.setData({\n            productsList: [],\n            isData: false\n          })\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 确定\n  submitDrug(isReduce) {\n    let preorderChinesedrugCart = wx.getStorageSync('preorderChinesedrugCart')\n    let drugsStr = ''\n    let resStr = ''\n    if (preorderChinesedrugCart.length) {\n      preorderChinesedrugCart.forEach(item => {\n        let name = item.commonName? item.commonName:item.productName\n        drugsStr += name + '；'\n      })\n      resStr = drugsStr.substring(0, drugsStr.length - 1)\n    }\n    let pages = getCurrentPages()\n    let prevPage = pages[pages.length - 2]\n    prevPage.setData({\n      drugTextCn: resStr,\n      drugObjCn: preorderChinesedrugCart\n    })\n    if (this.data.categoryNums > 0 && isReduce !== 'reduce') {\n      wx.navigateBack({\n        delta: 1\n      })\n    }\n  },\n  // 检验不能输入多个小数点\n  checkCarnums(e) {\n    let value = e.detail.value\n    return {\n      value: value.replace(/[^\\d.]/g,\"\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n    }\n    // return {\n    //   value: value.replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")\n    // }\n  },\n  // 输入药品剂量\n  changeCarnums(e) {\n    let item\n    if (e.detail.type === 'drugsCar') {\n      item = e.detail.changeItem\n    } else {\n      item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    }\n    let drugsInput = Number(e.detail.value)\n    if (drugsInput > 999) {\n      wx.showToast({\n        title: '剂量不能超过999克',\n        icon: 'none'\n      })\n      drugsInput = 999\n    }\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n    if (i > -1) {\n      this.data.productsList[i].quantity = drugsInput\n      this.setData({\n        productsList: this.data.productsList\n      })\n    }\n    this.data.drugList[index].quantity = drugsInput\n    if (this.data.drugList[index].quantity <= 0) {\n      this.data.drugList.splice(index, 1)\n      this.setData({\n        drugList: this.data.drugList,\n        categoryNums: this.data.drugList.length\n      },function (){\n        wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n        this.submitDrug('reduce')\n      })\n    } else {\n      this.setData({\n        drugList: this.data.drugList,\n        categoryNums: this.data.drugList.length\n      }, function() {\n        wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n        this.submitDrug('reduce')\n      })\n    }\n  },\n  // 删除\n  deleteCarCardNums(e) {\n    let item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    this.data.drugList.splice(index, 1)\n    this.setData({\n      drugList: this.data.drugList,\n      categoryNums: this.data.drugList.length\n    })\n    if (i > -1) {\n      let productsListTemp = `productsList[${i}].quantity`\n      this.setData({\n        [productsListTemp]: 0\n      })\n    }\n    wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n    this.submitDrug('reduce')\n  },\n  // 第一步加药\n  addDrugs(e) {\n    let item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    if (index === -1) {\n      if (this.data.categoryNums === 33) {\n        wx.showToast({\n          title: '添加失败，最多可添加33种药品',\n          icon: 'none',\n          duration: 2000\n        })\n        return\n      }\n      let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n      if (i > -1) {\n        this.data.productsList[i].quantity = 10\n        this.setData({\n          productsList: this.data.productsList,\n        })\n      }\n      item.quantity = 10\n      this.data.drugList.push(item)\n      this.setData({\n        drugList: this.data.drugList,\n        categoryNums: this.data.drugList.length\n      },function (){\n        wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n        this.submitDrug('reduce')\n      })\n    }\n  },\n  // 加\n  pubAddCardNum(e) {\n    let item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n    if (i > -1) {\n      let productsListTemp = `productsList[${i}].quantity`\n      let _value = this.data.productsList[i].quantity + 1\n      if (_value > 999) {\n        wx.showToast({\n          title: '剂量不能超过999克',\n          icon: 'none'\n        })\n        return false\n      }\n      this.setData({\n        [productsListTemp]: _value\n      })\n    }\n    if (index > -1) {\n      let drugListTemp = `drugList[${index}].quantity`\n      let _value = this.data.drugList[index].quantity + 1\n      if (_value > 999) {\n        wx.showToast({\n          title: '剂量不能超过999克',\n          icon: 'none'\n        })\n        return false\n      }\n      this.setData({\n        [drugListTemp]: _value\n      })\n    }\n    wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n    this.submitDrug('reduce')\n  },\n  // 减\n  reduceCardNums(e) {\n    let item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n    if (i > -1) {\n      let productsListTemp = `productsList[${i}].quantity`\n      let _value = this.data.productsList[i].quantity - 1\n      this.setData({\n        [productsListTemp]: _value\n      })\n    }\n    this.data.drugList[index].quantity -= 1\n    if (this.data.drugList[index].quantity <= 0) {\n      this.data.drugList.splice(index, 1)\n      this.setData({\n        drugList: this.data.drugList,\n        categoryNums: this.data.drugList.length\n      }, function (){\n        wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n        this.submitDrug('reduce')\n      })\n    } else {\n      this.setData({\n        drugList: this.data.drugList,\n        categoryNums: this.data.drugList.length\n      }, function() {\n        wx.setStorageSync('preorderChinesedrugCart', this.data.drugList)\n        this.submitDrug('reduce')\n      })\n    }\n\n  },\n  dealWithArr(list) {\n    let productsList = list.map(item => {\n      return {\n        ...item,\n        quantity: 0\n      }\n    })\n    let preorderChinesedrugCart = wx.getStorageSync('preorderChinesedrugCart')\n    if (preorderChinesedrugCart.length === 0) {\n      productsList.forEach((item, index) => {\n        item.quantity = 0\n      })\n    } else {\n      preorderChinesedrugCart.forEach(item => {\n        productsList.forEach((value, index) => {\n          if (item.pref === value.pref) {\n            value.quantity = item.quantity\n          }\n        })\n      })\n    }\n    return productsList\n  },\n  // 跳转新增药品\n  toNewAddDrug() {\n    // 新增药品埋点\n    getApp().globalData.burySpotSDK.track('newMedicineCn');\n    wx.navigateTo({\n      url: `../newAddDrug/newAddDrug?organSign=${this.data.organSign}`\n    })\n  }\n})"},"convertDir/pages/scan/pages/preorderDrug/preorderDrug":{"json":{"halfScreenDialog":"../../../../component/halfScreenDialog/halfScreenDialog","preorderDialog":"../../component/preorderDialog/preorderDialog","no-data":"../../../../component/missingData/missingData"},"wxml":"\n  <view class=\"preorderDrug-auto-container\"> \n    <navBar title-text=\"预购药品\" :showBackCapsule=\"true\" :showCapsule=\"false\"></navBar>\n    <view :class=\"[preorder-drug,( isFixed? 'is-fixed':'' )]\">   \n      <view class=\"top-fixed-box\" :style=\"{top:  navBarHeight }\"> \n        <view class=\"search-container\"> \n          <view class=\"input-container\">  \n            <image mode=\"widthFix\" class=\"search-icon\" src=\"../../../../images/search-icon-black.png\"></image>\n            <input type=\"text\" class=\"search-input\" :value=\" keyword \" bindinput=\"onKeywordText\" placeholder=\"请输入药品名称\"></input>\n            <view class=\"search-btn\" bindtap=\"getProductsNameByItem\" data-name>搜索\n            </view>\n          </view>\n          <view class=\"info-item-scan\" bindtap=\"getCameraScan\"> \n            <image class=\"icon-scan\" mode=\"widthFix\" src=\"../../../../images/icon-scan.png\"></image>\n            <view>扫码加药\n            </view>\n          </view>\n        </view>\n        <view class=\"remind-text\">可输入药品名称或首拼+空格+规格搜索 例：头孢 0.25*10\n        </view>\n      </view>\n      <scroll-view :scroll-y=\" isScroll \" :class=\"[drug-list,( keyword && !isData? 'pt440':'' )]\" :style=\"{height:  windowHeight - navBarHeight px}\">   \n        <block v-if=\" !keyword && hotListShow \"> \n          <view class=\"drug-list-title pub-text\" v-if=\" hotProductsList.length \">常用药品推荐\n          </view>\n          <view class=\"drug-list-item\" v-for=\"(item, pref) in  hotProductsList \" :key=\"pref\"> \n            <view class=\"item-left\"> \n              <view>   \n                <image class=\"sort-icon\" v-if=\" index === 0 \" mode=\"widthFix\" :src=\" firstImgUrl \"></image>\n                <image class=\"sort-icon\" v-else-if=\" index === 1 \" :src=\" secondImgUrl \"></image>\n                <image class=\"sort-icon\" v-else-if=\" index === 2 \" :src=\" thirdImgUrl \"></image>\n                <view class=\"sort-icon\" :wx:else=\" index > 2 \">{{ index + 1 }}\n                </view>\n              </view>\n              <view> \n                <view class=\"drug-name\"> \n                  <text class=\"is-recipe\" v-if=\" item.prescriptionYn === 1 \">Rx\n                  </text>\n                  <text>{{ item.commonName || item.productName }}\n                  </text>\n                </view>\n                <view class=\"drug-size\">{{ item.attributeSpecification }}\n                </view>\n              </view>\n            </view>\n            <view class=\"item-right\" bindtap=\"addDrug\" :data-item=\" item \">添加\n            </view>\n          </view>\n        </block>\n        <block v-else-if=\" isSuggest && suggestList.length > 0 \">\n          <view class=\"inp-search-item\" bindtap=\"getProductsNameByItem\" :data-name=\" item.name \" v-for=\"(item, key) in  suggestList \" :key=\"key\">\n            <rich-text :nodes=\" item.richTextName \"></rich-text>\n          </view>\n        </block>\n        <block v-else-if=\" isProducts && productsList.length > 0 \">\n          <view class=\"inp-search-item\" v-for=\"(item, key) in  productsList \" :key=\"key\"> \n            <view class=\"item-left\"> \n              <view class=\"drug-name\"> \n                <text class=\"is-recipe\" v-if=\" item.prescriptionYn === '1' \">Rx\n                </text>\n                <text>{{ item.commonName || item.productName }}\n                </text>\n              </view>\n              <view class=\"drug-size\">{{ item.attributeSpecification }}\n              </view>\n            </view>\n            <view class=\"inp-search-item-option\">  \n              <image v-if=\" item.quantity > 0 \" class=\"option-icon\" bindtap=\"reduceCardNums\" :data-item=\" item \" mode=\"widthFix\" src=\"../../images/reduce.png\"></image>\n              <text v-if=\" item.quantity > 0 \" class=\"drug-nums\">{{ item.quantity }}\n              </text>\n              <image class=\"option-icon\" bindtap=\"addCardNums\" :data-item=\" item \" mode=\"widthFix\" src=\"../../images/add.png\"></image>\n            </view>\n          </view>\n        </block>\n        <block v-else-if=\" !isData \">\n          <view class=\"no-data\">\n            <no-data v-if=\" true \" zhi=\"new1\" imageUrl=\"{{ cdnLink }}images/empty-log.png\" textval=\"暂无搜索结果\" textval2=\"请使用关键词进行搜索\"></no-data>\n          </view>\n        </block>\n      </scroll-view>\n      <view class=\"btn-container\" id=\"btnContainer\"> \n        <view class=\"drugs\" bindtap=\"showDrugListDialog\"> \n          <view class=\"drugs-icon-container\"> \n            <image class=\"drugs-icon\" mode=\"widthFix\" src=\"../../images/scan-drug-list.png\"></image>\n            <view class=\"red-dot\" v-if=\" categoryNums !== 0 \">{{ categoryNums }}\n            </view>\n          </view>\n          <view>药品列表\n          </view>\n        </view>\n        <view :class=\"[submit-btn,( categoryNums > 0? 'is-submit':'' )]\" bindtap=\"submitDrug\">确定\n        </view>\n      </view>\n      <halfScreenDialog :show=\"preorderDialogShow\" maskClosable=\"ture\" title=\"预购药品\" bind:close=\"dialogClose\">\n        <preorderDialog :drugList=\" drugList \" id=\"preorderDialogRef\" slot=\"desc\" bind:getNewCategoryNums=\"getNewCategoryNums\" bind:addCardNumsComp=\"addCardNums\" bind:reduceCardNumsComp=\"reduceCardNums\"></preorderDialog>\n      </halfScreenDialog>\n    </view>\n  </view>","wxss":".preorder-drug {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 32rpx;\n  background-color: #fff;\n}\n.preorder-drug.is-fixed {\n  position: fixed;\n}\n.top-fixed-box {\n  box-sizing: border-box;\n  position: fixed;\n  left: 0;\n  width: 100%;\n  padding: 0 32rpx;\n} \n.search-container {\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  background-color: #fff;\n  padding: 20rpx 0;\n}\n.input-container {\n  box-sizing: border-box;\n  flex: 1;\n  display: flex;\n  align-items: center;\n  height: 74rpx;\n  background-color: #F1F2F6;\n  border-radius: 437rpx;\n  padding: 16rpx 22rpx;\n  position: relative;\n}\n.input-container .search-icon {\n  width: 40rpx;\n  height: 40rpx;\n}\n.search-btn {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 116rpx;\n  height: 76rpx;\n  background: #e8fff3;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n  font-weight: 400;\n  color: #00b955;\n  text-align: center;\n  line-height: 76rpx;\n}\n.search-input {\n  width: 69%;\n  height: 100%;\n  padding: 0 14rpx;\n}\n.remind-text {\n  color: #99664d;\n  font-size: 24rpx;\n  height: 68rpx;\n  line-height: 68rpx;\n  text-align: center;\n  border-radius: 10rpx;\n  background-color: #fff7ef;\n}\n.pub-text {\n  color: #111734;\n  font-size: 32rpx;\n  font-weight: 600;\n}\n.drug-list {\n  box-sizing: border-box;\n  background-color: #fff;\n  padding: 204rpx 0 156rpx;\n}\n.drug-list.pt440 {\n  /*padding-top: 440rpx;*/\n}\n.drug-list-title {\n  margin-bottom: 10rpx;\n}\n.drug-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 30rpx 0;\n  border-bottom: 1rpx solid #F7F7F7;\n}\n.drug-list-item .item-left {\n  flex: 1;\n  display: flex;\n}\n.is-recipe {\n  color: #EF4D4D;\n  font-size: 24rpx;\n  width: 46rpx;\n  height: 32rpx;\n  border: 1rpx solid #EF4D4D;\n  border-radius: 6rpx;\n  margin-right: 12rpx;\n  padding: 4rpx 10rpx;\n}\n.drug-list-item .item-right {\n  color: #00b955;\n  width: 70rpx;\n}\n.drugs-icon-container {\n  position: relative;\n}\n.red-dot {\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  width: 28rpx;\n  height: 28rpx;\n  line-height: 28rpx;\n  text-align: center;\n  border-radius: 50%;\n  background-color: #FF5630;\n}\n.sort-icon {\n  width: 38rpx;\n  height: 38rpx;\n  text-align: center;\n  margin-right: 20rpx;\n}\n.drug-name {\n  color: #111734;\n  font-size: 30rpx;\n  margin-bottom: 20rpx;\n}\n.drug-size {\n  color: #9AA0B5;\n  font-size: 24rpx;\n}\n.inp-search-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1rpx solid #F7F7F7;\n  padding: 30rpx 0;\n}\n.option-icon {\n  width: 40rpx;\n  height: 40rpx;\n}\n.drug-nums {\n  width: 80rpx;\n  text-align: center;\n}\n.inp-search-item-option {\n  display: flex;\n  align-items: center;\n  margin-left: 5rpx;\n}\n.btn-container {\n  box-sizing: border-box;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  z-index: 5001;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  background-color: #fff;\n  padding: 30rpx 32rpx;\n}\n.drugs {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  color: #41465D;\n  font-size: 24rpx;\n  width: 100rpx;\n  margin-right: 50rpx;\n  padding: 5rpx 0;\n}\n.drugs-icon {\n  width: 40rpx;\n}\n.submit-btn {\n  flex: 1;\n  color: #FFFFFF;\n  font-size: 32rpx;\n  font-weight: 600;\n  height: 96rpx;\n  line-height: 96rpx;\n  text-align: center;\n  background-color: #E2E4EA;\n  border-radius: 48rpx;\n}\n.submit-btn.is-submit {\n  background: #00b955;\n}\n.no-data {\n   margin-top: -130rpx;\n}\n/**********扫码************/\n.info-item-scan{\n  text-align: center;\n  padding: 0 0rpx 0 15rpx;\n  margin-left: 20rpx;\n}\n.info-item-scan >view{\n  font-size: 22rpx;\n  color: #00b955;\n}\n.icon-scan {\n  width: 48rpx;\n  height: 48rpx;\n  vertical-align: bottom;\n  margin-bottom: 5rpx;\n}\n/*************************/","js":"const app = getApp()\n\nimport { ajax2, cdnStaticResourceUrl } from '../../../../utils/util'\n\nconst apiUrl = {\n  getHotProductsUrl: 'api/patient/drugstore/getHotProducts',                  // 热销药品\n  getSuggestNameUrl: 'api/patient/drugstore/getSuggestNamesByProductsName',   // 药品补全\n  getProductsNameUrl: 'api/patient/drugstore/getProductsByNameAndSpec',        // 药品及规格\n  codeMedicine: 'codeDosing/codeMedicine', // 扫码找药\n}\nPage({\n  data: {\n    cdnLink: cdnStaticResourceUrl,\n    organSign: '',                                      // 门店机构id\n    keyword: '',                                        // 搜索框关键字\n    isProducts: false,\n    isSuggest: false,\n    drugList: [],                                       // 药品列表 - 传给子组件\n    suggestList: [],                                    // suggest数据\n    hotProductsList: [],                                // 常用药品列表\n    categoryNums: 0,                                    // 药品种类\n    productsList: [],                                   // 药品列表\n    isData: true,                                       // 是否有数据\n    isFixed: false,                                     // dialog弹框是否展示出来啦\n    isScroll: true,\n    searchHeight: '',\n    btnContainerHeight: '',\n    firstImgUrl: '../../images/scan-first.png',\n    secondImgUrl: '../../images/scan-second.png',\n    thirdImgUrl: '../../images/scan-third.png',\n    navBarHeight: app.globalData.navBarHeight,\n    windowHeight: wx.getSystemInfoSync().windowHeight,\n    preorderDialogShow: false,                           // 展示预购dialog\n    scanText: '',                                        // 扫码药品名字\n    hotListShow: true                                    // 热门药品\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.getHotProducts(options.organSign)\n    this.data.organSign = options.organSign\n    let preorderdrugCart = wx.getStorageSync('preorderdrugCart')\n    if (preorderdrugCart) {\n      preorderdrugCart.forEach(item => {\n        item.pref = item.pref ? item.pref : item.productPref\n      })\n      this.setData({\n        drugList: preorderdrugCart\n      })\n    }\n    console.log('options.scanText', options)\n    //防止参数数据格式有问题导诊json转换失败报错\n    options.scanText= encodeURIComponent(options.scanText);\n    if (options.scanText && options.type) {\n      this.setData({\n        scanText: JSON.parse(decodeURIComponent(options.scanText))\n      }, function (){\n        let list = [{\n          ...this.data.scanText,\n          quantity: 0\n        }]\n        let resArr = this.dealWithArr(list)\n        this.setData({\n          isData: true,\n          productsList: resArr,\n          hotListShow: false,\n          isProducts: true,\n        })\n        this.pubAddCardNum(this.data.scanText)\n      })\n    } else if (options.type) {\n      this.setData({\n        isData: false,\n        keyword: '',\n        hotListShow: false\n      })\n    }\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    this.getNewCategoryNums()\n  },\n  // 热销药品\n  getHotProducts(organSign) {\n    let that = this\n    let params = {\n      organSign: organSign\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    ajax2('post', apiUrl.getHotProductsUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        if (res.data.result && res.data.result.length) {\n          that.setData({\n            hotProductsList: res.data.result.map(item => {\n              return {\n                ...item,\n                quantity: 0\n              }\n            })\n          })\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 获取最新药品种类\n  getNewCategoryNums() {\n    this.setData({\n      categoryNums: wx.getStorageSync('preorderdrugCart').length\n    })\n  },\n  // 关闭dialog\n  dialogClose() {\n    this.getNewCategoryNums()\n    this.setData({\n      isFixed: false,\n      isScroll: true\n    })\n  },\n  showDrugListDialog() {\n    this.setData({\n      preorderDialogShow: true,\n      isFixed: true,\n      isScroll: false\n    })\n  },\n  // 搜索框input事件\n  onKeywordText(e) {\n    this.setData({\n      keyword: e.detail.value\n    })\n    this.getSuggestName()\n  },\n  // 清楚搜索关键字\n  clearKeyword() {\n    this.setData({\n      keyword: ''\n    })\n  },\n  // suggest搜索\n  getSuggestName() {\n    let that = this\n    let keyword = this.data.keyword\n    let params = {\n      productName: keyword.split(' ')[0],\n      attributeSpecification: keyword.split(' ')[1],\n      organSign: this.data.organSign,\n      productType: 0 // 1中药 0西药\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    that.setData({\n      isSuggest: true,\n      isProducts: false\n    })\n    ajax2('post', apiUrl.getSuggestNameUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0) {\n        if ( res.data.result && res.data.result.length) {\n          // let reg = new RegExp(`(${keyword.split(' ')[0]})`, 'g')\n          let reg = new RegExp(`(${keyword.split(' ')[0].replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\")})`, 'g')\n          let tempList = res.data.result.map(item => {\n            return {\n              name: item,\n              richTextName: `${item.replace(reg, `<font style=\"color:#FF5630\">${keyword.split(' ')[0]}</font>`)}`\n            }\n          })\n          that.setData({\n            isData: true,\n            suggestList: tempList\n          })\n        } else {\n          that.setData({\n            suggestList: [],\n            isData: false\n          })\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 通过列表调用搜索方法\n  getProductsNameByItem(e) {\n    let p = e.currentTarget.dataset.name\n    this.getProductsName(p)\n  },\n  // 搜索药品及规格\n  getProductsName(p) {\n    let that = this\n    if (p) {\n      this.setData({\n        keyword: p\n      })\n    }\n    let keyword = this.data.keyword\n    let params = {\n      productName: p || keyword.split(' ')[0],\n      attributeSpecification: keyword.split(' ')[1],\n      organSign: this.data.organSign,\n      productType: 0 // 1中药 0西药\n    }\n    wx.showLoading({\n      title: '加载中...'\n    })\n    that.setData({\n      isSuggest: false,\n      isProducts: true\n    })\n    ajax2('post', apiUrl.getProductsNameUrl, params, res => {\n      wx.hideLoading()\n      if (res.data.code === 0 ) {\n        if (res.data.result && res.data.result.length) {\n          let list = res.data.result.map(item => {\n            return {\n              ...item,\n              quantity: 0\n            }\n          })\n          let resArr = that.dealWithArr(list)\n          that.setData({\n            isData: true,\n            productsList: resArr\n          })\n        } else {\n          that.setData({\n            productsList: [],\n            isData: false\n          })\n        }\n      } else {\n        wx.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    }, err => {\n      wx.hideLoading()\n      wx.showToast({\n        title: err.msg || '操作失败',\n        icon: 'none'\n      })\n    })\n  },\n  // 确定\n  submitDrug(isReduce) {\n    let preorderdrugCart = wx.getStorageSync('preorderdrugCart')\n    let drugsStr = ''\n    let resStr = ''\n    // let list = []\n    if (preorderdrugCart.length) {\n      preorderdrugCart.forEach(item => {\n        let name = item.commonName? item.commonName:item.productName\n        drugsStr += name + 'x' + item.quantity + '；'\n      })\n      resStr = drugsStr.substring(0, drugsStr.length - 1)\n    }\n    let pages = getCurrentPages()\n    let prevPage = pages[pages.length - 2]\n    prevPage.setData({\n      drugText: resStr,\n      drugObj: preorderdrugCart\n    })\n    if (this.data.categoryNums > 0 && isReduce !== 'reduce') {\n      wx.navigateBack({\n        delta: 1\n      })\n      // wx.navigateTo({\n      //   url: `../addInformation/addInformation?drugText=${resStr}&drugStr=${encodeURIComponent(JSON.stringify(preorderdrugCart))}`\n      // })\n    }\n  },\n  // 热销药品添加\n  addDrug(e) {\n    let item = e.currentTarget.dataset.item\n    this.pubAddCardNum(item, 'hot')\n  },\n  pubAddCardNum(item, isHot) {\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    if (index === -1) {\n      if (this.data.categoryNums === 5) {\n        wx.showToast({\n          title: '添加失败，最多可添加5种药品',\n          icon: 'none',\n          duration: 2000\n        })\n        return\n      }\n      this.data.drugList.push(item)\n      this.setData({\n        drugList: this.data.drugList\n      })\n      index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    }\n    if (isHot !== 'hot') {\n      let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n      if (i > -1) {\n        let productsListTemp = `productsList[${i}].quantity`\n        let _value = this.data.productsList[i].quantity + 1\n        this.setData({\n          [productsListTemp]: _value\n        })\n      }\n    }\n    let temp = `drugList[${index}].quantity`\n    let value = this.data.drugList[index].quantity + 1\n    this.setData({\n      [temp]: value,\n      categoryNums: this.data.drugList.length\n    })\n    wx.setStorageSync('preorderdrugCart', this.data.drugList)\n    this.submitDrug('reduce')\n  },\n  // 加\n  addCardNums(e) {\n    let item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    this.pubAddCardNum(item)\n  },\n  // 减\n  reduceCardNums(e) {\n    let item = e.detail.pref? e.detail:e.currentTarget.dataset.item\n    // wx.setStorageSync('reduceDrug', item)\n    let index = this.data.drugList.findIndex(value => value.pref === item.pref)\n    let i = this.data.productsList.findIndex(value => value.pref === item.pref)\n    if (!this.data.drugList[index]) {\n      return\n    }\n    if (i > -1) {\n      let productsListTemp = `productsList[${i}].quantity`\n      let _value = this.data.productsList[i].quantity - 1\n      this.setData({\n        [productsListTemp]: _value\n      })\n    }\n    let temp = `drugList[${index}].quantity`\n    let value = this.data.drugList[index].quantity - 1\n    if (value === 0) {\n      this.data.drugList.splice(index, 1)\n      this.setData({\n        drugList: this.data.drugList,\n        categoryNums: this.data.drugList.length\n      })\n      wx.setStorageSync('preorderdrugCart', this.data.drugList)\n      this.submitDrug('reduce')\n    } else {\n      this.setData({\n        [temp]: value,\n        categoryNums: this.data.drugList.length\n      }, function() {\n        wx.setStorageSync('preorderdrugCart', this.data.drugList)\n        this.submitDrug('reduce')\n      })\n    }\n\n  },\n  dealWithArr(list) {\n    let productsList = list.map(item => {\n      return {\n        ...item,\n        quantity: 0\n      }\n    })\n    let preorderdrugCart = wx.getStorageSync('preorderdrugCart')\n    if (preorderdrugCart.length === 0) {\n      productsList.forEach((item, index) => {\n        item.quantity = 0\n      })\n    } else {\n      preorderdrugCart.forEach(item => {\n        productsList.forEach((value, index) => {\n          if (item.pref === value.pref) {\n            value.quantity = item.quantity\n          }\n        })\n      })\n    }\n    return productsList\n  },\n  // 扫码购药\n  getCameraScan () {\n    wx.showLoading({\n      title: '加载中...'\n    })\n    const that = this\n    wx.scanCode({\n      onlyFromCamera: true,\n      success (res) {\n        ajax2('post', apiUrl.codeMedicine, {barCode:res.result}, res => {\n          wx.hideLoading()\n          if (res.data.code === 0) {\n            if (res.data.result[0]) {\n              res.data.result[0].quantity = 0\n              let list = [{\n                ...res.data.result[0],\n                quantity: 0\n              }]\n              let resArr = that.dealWithArr(list)\n              that.setData({\n                isData: true,\n                productsList: resArr,\n                hotListShow: false,\n                isProducts: true,\n              })\n              that.pubAddCardNum(res.data.result[0])\n            } else {\n              that.setData({\n                isData: false,\n                hotListShow: false,\n                keyword: '',\n                suggestList: [],\n                productsList: []\n              })\n            }\n          }\n        })\n      },\n      fail (err) {\n        wx.hideLoading()\n        wx.showToast({\n          title: '扫码失败',\n          icon: 'none'\n        })\n        console.log(err)\n      }\n    })\n  },\n})"},"convertDir/pages/webView/webView":{"js":"// pages/webView/webView.js\nimport {\n  url,\n  ajax,\n  getUrlParams,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\n// 给链接加上时间戳，防止缓存\nfunction urlWithNoCache(link) {\n  let hashTagIndex = link.indexOf('#')\n\n  // 初始化链接的hash部分和非hash部分\n  // 初始化成没hash的\n  let hash = ''\n  let linkWithoutHash = link\n\n  // 有hash覆写\n  if (hashTagIndex >= 0) {\n    hash = link.substring(hashTagIndex + 1)\n    linkWithoutHash = link.substring(0, hashTagIndex)\n  }\n\n  //-- 根据有没有query string 进行相应处理\n  let qsIndex = linkWithoutHash.indexOf('?')\n  let versionStr = '_t=' + new Date().getTime()\n\n  // 有query string\n  if (qsIndex >= 0) {\n    linkWithoutHash = linkWithoutHash + '&' + versionStr\n\n  // 没query string\n  } else {\n    linkWithoutHash = linkWithoutHash + '?' + versionStr\n  }\n\n  //-- 再把hash拼上\n  if (hash === '') {\n    return linkWithoutHash\n\n  } else {\n    return linkWithoutHash + '#' + hash\n  }\n}\n\nexport default {\n  data: function() {\n    return {\n      link: '',\n      url_link: cdnStaticResourceUrl,\n      article_title:'',\n      article_img:''\n    };\n  },\n  onLoad: function (options) {\n    this.setData({ \n      options,\n      timeStamp:+new Date()\n    })\n\n    if (options.link) {\n      this.setData({\n        link: urlWithNoCache(decodeURIComponent(options.link))\n      })\n      console.log('webview实际访问url: ', this.data.link)\n      this.checkLinkType()\n    }\n  },\n\n  checkLinkType(){\n    let link = this.data.link,\n          article_title = getUrlParams(link).Article_title,\n          article_img = getUrlParams(link).Article_img,\n          contentId = getUrlParams(link).notesId || 0,\n          activityPageShare = getUrlParams(link).activityPageShare || '';\n\n    //文章分享\n    if (article_title && article_img){\n      this.setData({\n        article_title,\n        article_img,\n        contentId\n      })\n      this.dataCount(0)\n    }\n    activityPageShare = this.percent2percent25(activityPageShare);\n    //banner活动分享\n    if (activityPageShare){\n      this.setData({ \n        activityPageShare: decodeURIComponent(activityPageShare)\n      })\n    }\n\n  },\n  percent2percent25 (URI) {\n    if(URI.indexOf('%') > -1) {\n      return URI.replace(/%/g,'%25')\n    }else{\n      return URI;\n    }\n  },\n  //文章需求接口埋点\n  dataCount(type = 0) {\n    const { article_title,article_img,contentId } = this.data,\n          url = `miniapp/ykqContentNumber/modifyYkqContentNum`;\n    //仅文章详情需求接口埋点\n    if(article_title && article_img){\n      ajax('post', url, {\n        numberType: type,\n        contentId: contentId\n      }, () => {})\n    }\n  },\n\n  onShareAppMessage: function(){\n    const { article_title, article_img, link, contentId, activityPageShare='' } = this.data;\n    let shareObj={};\n    if (article_title && article_img){\n      //埋点\n      this.dataCount(2)\n      // const path = `${link}&Article_title=${article_title}&Article_img=${article_img}`;\n\n      shareObj={\n        title : article_title,\n        path : `pages/webView/webView?link=${encodeURIComponent(link)}`,\n        imageUrl : article_img || this.data.url_link + 'images/share.png'\n      }\n    } else if (activityPageShare){\n      const pageShare = JSON.parse(activityPageShare)\n      let activityPageLink = ''\n      if(pageShare.shareUrl){\n        if(pageShare.shareUrl.indexOf('?')>-1){\n          activityPageLink = `${pageShare.shareUrl}&activityPageShare=${encodeURIComponent(activityPageShare)}`\n        }else{\n          activityPageLink = `${pageShare.shareUrl}?activityPageShare=${encodeURIComponent(activityPageShare)}`\n        }\n        activityPageLink = activityPageLink + '&token=' + getApp().globalData.sess_key;\n      }else{\n        activityPageLink = link\n      }\n\n      shareObj = {\n        title: pageShare.shareDesc || \"荷叶健康|问诊买药药店送药到家\", \n        path: `pages/webView/webView?link=${encodeURIComponent(activityPageLink)}`,\n        imageUrl: pageShare.sharePic || this.data.url_link + 'images/share.png', \n      }\n    }else{\n      shareObj = {\n        title: \"荷叶健康|问诊买药药店送药到家\", // 默认是小程序的名称(可以写slogan等)\n        path: 'pages/noteIndex/noteIndex', // 默认是当前页面，必须是以‘/’开头的完整路径\n        imageUrl: this.data.url_link + 'images/share.png', //../../images/share-image-2.png\n      }\n    } \n    return shareObj\n  },\n\n  onHide(){\n    const time = +new Date() - this.data.timeStamp, \n          { article_title,article_img,contentId } = this.data;\n    \n  },\n\n  onUnload(){\n    const time = +new Date() - this.data.timeStamp, \n          { article_title,article_img,contentId } = this.data;\n    \n  }\n\n};","json":{},"wxml":"\n  <view class=\"webView-auto-container\">\n    <web-view :src=\"link\" :style=\"{top:navBarHeightpx}\"></web-view>\n  </view>","wxss":"/* pages/webView/webView.wxss */"},"convertDir/component/b2cShopCart/shopCart":{"wxml":"\n  <view class=\"shopCart-auto-container\">\n    <view class=\"shop-cart-content\">\n      <slot></slot>\n    </view>\n  </view>","json":{},"wxss":"/* pages/b2c/component/shopCart/shopCart.wxss */\n","js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n\n  },\n  data: function() {\n    return {\n    };\n  },\n  lifetimes: {\n    // attached() {\n\n    // }\n  },\n  methods: {\n    /**\n     * @description 合计购物车中勾选的商品数量\n     * @returns Number\n     */\n    getCurMedicineNum() {\n      let b2cCart = Taro.getStorageSync('b2cCart') || [];\n      let addUpNum = 0; // 合计数量\n\n      if (b2cCart.length) {\n        b2cCart.forEach(itm => {\n          itm.skus.forEach(medicine => {\n            if (medicine.checked) {\n              addUpNum += parseInt(medicine.skuNum, 10);\n            }\n          })\n        })\n      }\n\n      return addUpNum;\n    },\n    /**\n     * @description 获取本地商品信息\n     * @param { Number } drugstoreId 门店id\n     * @param { Number } skuId  商品id\n     * @returns { Object }  当前缓存中的购物车list、 当前门店下标、 当前商品在门店中下标\n     */\n    getB2cCartInfo(drugstoreId, skuId) {\n      let b2cCart = Taro.getStorageSync('b2cCart') || [];\n      let curDrugstoreIndex = b2cCart.findIndex(itm => itm.drugstoreId == drugstoreId); // 当前门店\n      let curGoodIndex = -1; // 当前商品index 默认 -1\n\n      // 因为门店存在 药品列表长度必定 > 1 所以无需容错\n      if (b2cCart[curDrugstoreIndex]) {\n        curGoodIndex = b2cCart[curDrugstoreIndex].skus.findIndex(itm => itm.skuId == skuId);\n      }\n\n      return { b2cCart, curDrugstoreIndex, curGoodIndex };\n    },\n    /**\n     * @description 添加购物车前的拦截器\n     * @param { Array }  b2cCart 本地购物车数据\n     * @param { Number } curDrugstoreIndex 当前药店下标\n     * @param { Number } curGoodIndex 当前商品下标\n     * @param { Number } 加购数量\n     * @param { Number } 库存数量\n     * @param { Number } 限购数量\n     * @returns Boolean\n     */\n    interceptorBeforeAdded(b2cCart, curDrugstoreIndex, curGoodIndex, skuNum, stock, surplusLimitPurchaseNum) {\n      let tag = true;\n      let curSkuNum = 0;\n\n      if (curDrugstoreIndex !== -1 && curGoodIndex !== -1) {\n        // 药品存在 取当前数量\n        curSkuNum = b2cCart[curDrugstoreIndex].skus[curGoodIndex].skuNum;\n      }\n\n      // 没库存\n      if ((curSkuNum + skuNum) > stock) {\n        Taro.showToast({\n          title: '加购件数（包含已加购件数）已超过库存',\n          icon: 'none',\n          duration: 5000\n        })\n\n        tag = false;\n      }\n\n      // 是否超出限购\n      if ((surplusLimitPurchaseNum || surplusLimitPurchaseNum == 0) && ((curSkuNum + skuNum) > surplusLimitPurchaseNum)) {\n        Taro.showToast({\n          title: '加购件数（包含已加购件数）已超过最大购买限制',\n          icon: 'none',\n          duration: 5000\n        })\n\n        tag = false;\n      }\n\n      return tag;\n    },\n    /**\n     * @description 加入购物车操作\n     * @param { Number } drugstoreId 门店id\n     * @param { Number } skuId 商品id\n     * @param { Number } skuNum 需要添加的商品数量\n     * @param { Number } stock 库存数量\n     * @param { Number } surplusLimitPurchaseNum 剩余可购数\n     * @param { String } source 加购来源, ‘notImpactRankingAct’代表来自不影响排序的操作, 此操作不更新店+品 updateTime\n     * @return void\n     */\n    addGoods(params) {\n      let { drugstoreId, skuId, skuNum, stock, surplusLimitPurchaseNum, source } = params;\n      let { b2cCart, curDrugstoreIndex, curGoodIndex } = this.getB2cCartInfo(drugstoreId, skuId);\n\n      skuNum = skuNum || 1; // 加购商品数量 默认不传skuNum时 为 +1 操作\n\n      // 拦截器\n      let flag = this.interceptorBeforeAdded(b2cCart, curDrugstoreIndex, curGoodIndex, skuNum, stock, surplusLimitPurchaseNum);\n\n      if (!flag) return false; \n\n      // 商品已存在skuNum更新 \n      if (curGoodIndex !== -1) { \n        // console.log('已加购商品, 需更新num, 选中状态');\n        b2cCart[curDrugstoreIndex].skus[curGoodIndex].skuNum += skuNum;\n        b2cCart[curDrugstoreIndex].skus[curGoodIndex].checked = true;\n\n        // updateTime是否更新看加购来源\n        if (source !== 'notImpactRankingAct') { \n          b2cCart[curDrugstoreIndex].updateTime = new Date().getTime();\n          b2cCart[curDrugstoreIndex].skus[curGoodIndex].updateTime = new Date().getTime();\n        }\n\n        // 如果店铺下面药品没有未勾选 店铺勾选\n        let notAllChecked = b2cCart[curDrugstoreIndex].skus.find(item => !(item.checked));\n    \n        b2cCart[curDrugstoreIndex].checked = notAllChecked ? false : true;\n\n        Taro.setStorageSync('b2cCart', b2cCart); \n      } else {\n        // console.log('新商品, 需判断门店是否加购去做加购操作', params);\n        this.newGoodsAdd2Cart(drugstoreId, skuId, skuNum);\n      }\n      return true;\n    },\n    /**\n     * @description 新商品添加至购物车 门店是否存在的处理逻辑\n     * @param { Number } drugstoreId 门店id\n     * @param { Number }  skuId 商品id\n     */\n    newGoodsAdd2Cart(drugstoreId, skuId, skuNum) {\n      let { b2cCart, curDrugstoreIndex } = this.getB2cCartInfo(drugstoreId, skuId);\n\n      if (!b2cCart[curDrugstoreIndex]) { // 门店不存在 购物车列表push一个门店 且默认勾选\n        const data = {\n          drugstoreId,\n          checked: true,\n          updateTime: new Date().getTime(),\n          skus: [{\n            skuId,\n            skuNum,\n            updateTime: new Date().getTime(),\n            checked: true\n          }]\n        }\n\n        b2cCart.push(data);\n      } else { // 门店存在 门店下商品列表push一条新商品 更新门店 updateTime\n        b2cCart[curDrugstoreIndex].updateTime = new Date().getTime();\n        b2cCart[curDrugstoreIndex].skus.push({\n          skuId,\n          skuNum,\n          updateTime: new Date().getTime(),\n          checked: true\n        });\n\n        // 如果店铺下面药品没有未勾选 店铺勾选\n        let notAllChecked = b2cCart[curDrugstoreIndex].skus.find(item => !(item.checked));\n\n        b2cCart[curDrugstoreIndex].checked = notAllChecked ? false : true;\n      }\n      Taro.setStorageSync('b2cCart', b2cCart);\n    },\n    /**\n     * @description 清空购物车所有商品\n     * @returns void\n     */\n    clearCart() {\n      Taro.removeStorageSync('b2cCart');\n      Taro.hideTabBarRedDot({\n        index: 2\n      })\n    },\n    /**\n     * @description 购物车逐个删除单商品 & 单商品批量删除 & 清空某商品\n     * @param { Number } drugstoreId 药店id\n     * @param { Number } skuId 商品id\n     * @param { Number & String } skuNum 要删除的商品数量, 如果为 'all' 则清空该商品\n     * @param { String } source 删减按钮来源页面, ‘notImpactRankingAct’代表来自不影响排序的操作, 此操作不更新店+品 updateTime\n     */\n    removeGoods(drugstoreId, skuId, skuNum, source) {\n      let { b2cCart, curDrugstoreIndex, curGoodIndex } = this.getB2cCartInfo(drugstoreId, skuId);\n     skuNum = skuNum || 1; // 默认逐条删除\n      \n      // 容错\n      if (curDrugstoreIndex == -1 || curGoodIndex == -1) {\n        Taro.showToast({\n          title: '购物车无此商品',\n        })\n\n        return false;\n      }\n\n      b2cCart[curDrugstoreIndex].skus[curGoodIndex].checked = true; // 勾选\n\n      // updateTime是否更新看加购来源\n      if (source !== 'notImpactRankingAct') { \n        b2cCart[curDrugstoreIndex].updateTime = new Date().getTime();\n        b2cCart[curDrugstoreIndex].skus[curGoodIndex].updateTime = new Date().getTime();\n      }\n\n      // 更新num\n      if (skuNum !== 'all') {\n\n        b2cCart[curDrugstoreIndex].skus[curGoodIndex].skuNum -= skuNum;\n      } else {\n        b2cCart[curDrugstoreIndex].skus.splice(curGoodIndex, 1);\n      }\n\n      // 如果某商品num为0 则从门店下商品list中移除此条商品\n      if (skuNum !== 'all' && b2cCart[curDrugstoreIndex].skus[curGoodIndex].skuNum == 0) {\n        b2cCart[curDrugstoreIndex].skus.splice(curGoodIndex, 1);\n      }\n\n      // 如果某药店下商品全部删除 则删除该药店\n      if (!b2cCart[curDrugstoreIndex].skus.length) {\n        b2cCart.splice(curDrugstoreIndex, 1);\n      }\n\n      Taro.setStorageSync('b2cCart', b2cCart);\n    },\n    /**\n     * 购物车列表移除传递进来的全部商品 (下单成功 批量清空 目前没有同商品拆单支付的场景)\n     * @param { Array } drugstoreList 要移除的药店 -> 商品列表\n     * @param { String } source 加购来源, ‘notImpactRankingAct’代表来自不影响排序的操作, 此操作不更新店+品 updateTime\n     */\n    batchRemove(drugstoreList, source) {\n      drugstoreList.forEach(sotre => {\n        sotre.skus.forEach(sku => {\n          this.removeGoods(sotre.drugstoreId, sku.skuId, 'all', source);\n        });\n      });\n    }\n  }\n};\n"},"convertDir/component/countDown/countDown":{"js":"export default {\n  // 组件所在页面的生命周期函数\n  onHide: function () {\n    clearInterval(this.data.timer);\n  },\n\n  onShow:function () {\n    let t = this.data.endtime - new Date().getTime();\n    if (t >= 0) {\n      this.countDown(t / 1000);\n    }\n  },\n\n  options: {\n    multipleSlots: true // 在组件定义时的选项中启用多slot支持\n  },\n\n  props: {\n    count:{\n      type: String,\n      default: ''\n    },\n    //结束时间,毫秒格式（距1970的时间）\n    endclear:{\n      type: String,\n      default: 'true'\n    },\n    endtime: {\n      type: null,\n      default: \"\"\n    },\n    classType: {\n      type: Number,\n      default: 0\n    },\n  },\n\n  data: function() {\n    return {\n      times: {\n        day:'0',\n        hour: \"00\",\n        minute: \"00\",\n        second: \"00\",\n      },\n      timer:''\n    };\n  },\n\n  methods: {\n    countDown: function (t) {\n      let times = 0;\n      if (!isNaN(t)) {\n        times = t;\n      } else {\n        //如果传入的是 时，分，秒\n        let {\n          day,\n          hour,\n          minute,\n          second\n        } = t;\n        times = Number(hour) * 3600 + Number(minute) * 60 + Number(second);\n      }\n      clearInterval(this.data.timer);\n      times--;\n      if (times < 0) {\n        clearInterval(this.data.timer);\n      } else {\n        let day = Math.floor(times / 3600 / 24);\n        let hour = Math.floor(times / 3600 - day * 24);\n        let minute = Math.floor((times - (hour * 3600 + day * 3600 * 24)) / 60);\n        let second = Math.floor(times - day * 3600 * 24 - hour * 3600 - minute * 60);\n        this.setData({\n          times: {\n            day: day.toString().length < 2 ? \"0\" + day : day,\n            hour: hour.toString().length < 2 ? \"0\" + hour : hour,\n            minute: minute.toString().length < 2 ? \"0\" + minute : minute,\n            second: second.toString().length < 2 ? \"0\" + second : second,\n          }\n        });\n      }\n      let time = setInterval(() => {\n        times--;\n        if (times < 0 || this.data.endclear == 'false') {\n          clearInterval(this.data.timer);\n          this.triggerEvent(\"updataList\");\n        } else {\n          let day = Math.floor(times / 3600 / 24);\n          let hour = Math.floor(times / 3600 - day * 24);\n          let minute = Math.floor((times - (hour * 3600 + day * 3600 * 24)) / 60);\n          let second = Math.floor(times - day * 3600 * 24 - hour * 3600 - minute * 60);\n          this.setData({\n            times: {\n              day: day.toString().length < 2 ? \"0\" + day : day,\n              hour: hour.toString().length < 2 ? \"0\" + hour : hour,\n              minute: minute.toString().length < 2 ? \"0\" + minute : minute,\n              second: second.toString().length < 2 ? \"0\" + second : second,\n            }\n          });\n        }\n      }, 1000);\n      this.data.timer = time\n    }\n  },\n\n  watch: {\n    count: function (newVal, oldVal){\n      this.setData({\n        count:newVal\n      })\n      console.log(newVal, oldVal)\n    },\n\n    endclear: function (newVal, oldVal){\n      console.log('时间状态变了：'+newVal)\n      if (!newVal) {\n        clearInterval(this.data.timer);\n      } else if (newVal) {\n        let t = this.data.endtime - new Date().getTime();\n        if (t >= 0) {\n          this.countDown(t / 1000);\n        } else {\n          //剩余时间小于0s,或事件格式不正确\n        }\n      }\n    },\n\n    endtime: function (newVal, oldVal) {\n      console.log('结束时间数据更新：' + newVal)\n      if (newVal) {\n        let newVal_var = parseInt(newVal)\n        let t = newVal - new Date().getTime();\n        console.log(new Date().getTime())\n        if (t >= 0) {\n          this.countDown(t / 1000);\n          console.log(t)\n        } else {\n          //剩余时间小于0s,或事件格式不正确\n        }\n      }\n    }\n  }\n};","json":{},"wxml":"\n  <view class=\"countDown-auto-container\"> \n    <block v-if=\"classType < 4\">\n      <view :class=\"[times,(classType == 2 ? 'note_count':'')]\">        \n        <text :class=\"[(classType == 2 ? 'note_before': '')]\">\n          <slot name=\"before\"></slot>\n        </text>\n        <block v-if=\"count == ''\">\n          <text>\n            <slot name=\"before\"></slot>\n          </text>\n        </block>\n        <block v-if=\"count != ''\">\n          <text>还差人拼团成功，剩余\n            <text class=\"people\">{{count}}\n            </text>\n          </text>\n        </block>\n        <block v-if=\"times.day != '00'\"> \n          <view v-if=\"times.day != '00'\" :class=\"[time_item,hour,(classType==1?'time_item1':''),(classType == 2 ? 'time_item_note': ''),(classType==3?'time_item3':'')]\">{{times.day}}\n          </view>\n          <text :class=\"[count_time,(classType == 2 ? 'count_time_note': ''),(classType == 3 ? 'count_time3': '')]\">天\n          </text>\n        </block>\n        <block v-if=\"times.hour != '00'\"> \n          <view :class=\"[time_item,hour,(classType==1?'time_item1':''),(classType == 2 ? 'time_item_note': ''),(classType==3?'time_item3':'')]\">{{times.hour}}\n          </view>\n          <text :class=\"[count_time,(classType == 2 ? 'count_time_note': ''),(classType == 3 ? 'count_time3': '')]\">时\n          </text>\n        </block>\n        <block v-if=\"times.minute != '00'\"> \n          <view :class=\"[time_item,minute,(classType==1?'time_item1':''),(classType == 2 ? 'time_item_note': ''),(classType==3?'time_item3':'')]\">{{times.minute}}\n          </view>\n          <text :class=\"[count_time,(classType == 2 ? 'count_time_note': ''),(classType == 3 ? 'count_time3': '')]\">分\n          </text>\n        </block>\n        <view :class=\"[time_item,second,(classType==1?'time_item1':''),(classType == 2 ? 'time_item_note': ''),(classType==3?'time_item3':'')]\">{{times.second}}\n        </view>\n        <text :class=\"[count_time,(classType == 2 ? 'count_time_note': ''),(classType == 3 ? 'count_time3': '')]\">秒\n        </text>\n        <text :class=\"[(classType == 2 ? 'note_after': '')]\">\n          <slot name=\"after\"></slot>\n        </text>\n      </view>\n    </block>\n    <block v-else>\n      <view v-if=\"classType == 4\" class=\"ms-box\">   \n        <block>\n          <view v-if=\"times.day != '00'\" class=\"ms-day\">{{times.day}}天\n          </view>\n        </block>\n        <block> \n          <view class=\"ms-kuai\">{{times.hour}}\n          </view>\n          <text class=\"ms-text\">:\n          </text>\n        </block>\n        <block> \n          <view class=\"ms-kuai\">{{times.minute}}\n          </view>\n          <text class=\"ms-text\">:\n          </text>\n        </block>\n        <block>\n          <view class=\"ms-kuai\">{{times.second}}\n          </view>\n        </block>\n      </view>\n    </block>\n  </view>","wxss":".times {\n  width: 100%;\n  margin-bottom: 10rpx;\n}\n\n.times .time_item {\n  display: inline-block;\n}\n\n.times .time_item1 {\n  /* min-width: 40rpx; */\n  background: #272727;\n  border-radius: 6.61rpx;\n  color: #fff;\n  letter-spacing: 1.65rpx;\n  padding: 0 4rpx;\n  width: 42rpx;\n  height: 42rpx;\n  font-size: 28rpx;\n}\n\n.times .count_time {\n  font-size: 20rpx;\n  padding: 0 5rpx 0 5rpx;\n  color: #666;\n}\n\n.times .count_time_note {\n  font-size: 22rpx;\n  color: #666;\n}\n\n.times .time_item_note {\n  background: #a9c0dd;\n  color: #fff;\n  width: 34rpx;\n  height: 34rpx;\n  line-height: 34rpx;\n  text-align: center;\n  font-size: 22rpx;\n  border-radius: 4rpx;\n}\n\n.times .time_item3 {\n  background: #ff4938;\n  color: #ffdfa2;\n  font-size: 22rpx;\n  padding: 4rpx 6rpx;\n}\n\n.times .count_time3 {\n  color: #ffde9f;\n  font-size: 22rpx;\n}\n\n.note_count {\n  margin: 0;\n}\n\n.note_after {\n  font-size: 22rpx;\n  color: #666;\n}\n\n.note_before {\n  font-size: 26rpx;\n}\n\n.ms-box {\n  font-size: 20rpx;\n  color: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.ms-day {\n  font-size: 24rpx;\n  color: #994517;\n  padding-left: 15rpx;\n  margin-right: 5rpx;\n}\n\n.ms-kuai {\n  width: 39rpx;\n  height: 38rpx;\n  line-height: 38rpx;\n  text-align: center;\n  background: #994517;\n  border-radius: 4px;\n}\n.ms-text{\n  color: #994517;\n  padding: 0 4rpx;\n  font-weight: bolder;\n}"},"convertDir/component/couponsList/couponsList":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    couponsData:{\n      type: Array,\n      default: ''\n    },\n    pageFrom: {\n      type: String,\n      default: '',\n    }\n  },\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      receiveStatusTxt: [ '领取', '已抢光', '已领取', '去使用'],\n      fold_type: -1,\n      isIPX: getApp().globalData.isIPX,\n      selectedId: null,\n      couponStatuText: {\n        'NOTUSED': '立即使用',\n        'ALREADYUSED': '已使用',\n        'EXPIRED': '已过期'\n      }\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    fold_btn(e){\n      let index = e.currentTarget.dataset.index;\n      this.setData({\n        fold_type: index == this.data.fold_type ? -1 : index\n      })\n    },\n    //使用优惠券\n    usedCoupon(e) {\n      let coupon = e.currentTarget.dataset.coupon;\n      this.triggerEvent(\"action\", coupon);\n      this.setData({\n        selectedId: coupon.id\n      })\n    },\n    //不使用优惠券\n    notUse() {\n      this.triggerEvent(\"action\", {});\n      this.setData({\n        selectedId: null\n      })\n    },\n    //点击跳转\n    jumpLink(e){\n      let coupon = e.currentTarget.dataset.coupon;\n      if(coupon.couponStatus != 'NOTUSED') return false;\n      this.triggerEvent(\"action\", coupon);\n    }\n  },\n\n  watch: {\n    couponsData: function(newVal, oldVal){\n      if(newVal.length > 0 && newVal[0].defaultOption == 1) {\n        this.setData({\n          selectedId: newVal[0].id\n        })\n      }\n    }\n  }\n};\n","wxml":"\n  <view class=\"couponsList-auto-container\"> \n    <view class=\"common_section coupon_section\" :style=\"{padding-bottom:  pageFrom == 'guidance' ? (isIpx ? '120rpx' : '166rpx') : 0}\">\n      <block v-for=\"(item, index) in  couponsData \" :key=\"index\"> \n        <view :class=\"[cell,( (item.couponStatus == 'ALREADYUSED' || item.couponStatus == 'EXPIRED') && pageFrom != 'inquiry' ? 'cell_gray' : '')]\" :bindtap=\" pageFrom == 'guidance' ? 'usedCoupon' : ''\" :data-coupon=\" item \">    \n          <view class=\"cell_left\">     \n            <view class=\"price\" v-if=\"item.couponDiscountWay == 2\">{{ item.couponDiscountFactorStr }}\n              <text class=\"symbol\">折\n              </text>\n            </view>\n            <view class=\"price\" v-else>{{ item.couponCash }}\n              <text class=\"symbol\">¥\n              </text>\n            </view>\n            <view class=\"text\" v-if=\"item.couponDiscountWay == 3\">下单立减\n            </view>\n            <view class=\"text\" v-else-if=\"item.couponUseLimit > 0\">满{{ item.couponUseLimit }}元可用\n            </view>\n            <view class=\"text\" v-else>无门槛使用\n            </view>\n            <text class=\"tag\">{{item.couponDiscountWayStr}}·{{ item.category == 1 ? '问诊' : '商品' }}\n            </text>\n          </view>\n          <view class=\"cell_center\">    \n            <view class=\"name\">{{ item.goodsTips || '' }}\n            </view>\n            <view class=\"text\">{{item.preferentialDesc}}\n            </view>\n            <view class=\"text\" v-if=\" pageFrom == 'inquiry' \">{{ item.explain }}\n            </view>\n            <text class=\"text\" v-if=\"item.receiveStatus == 2 || item.receiveStatus == 3 || pageFrom != 'drugList' || pageFrom == 'guidance'\">有效日期:{{item.couponUseStartDate}} - {{item.couponUseEndDate}}\n            </text>\n            <text class=\"text\" v-else>领取后{{item.couponExpiryDay}}天有效\n            </text>\n          </view>\n          <view class=\"cell_right\">  \n            <view :class=\"[button,(item.receiveStatus == 1 ||item.receiveStatus == 2 ?'gray':'')]\" v-if=\" pageFrom == 'drugList' \" bindtap=\"usedCoupon\" :data-coupon=\"item\">{{ receiveStatusTxt[item.receiveStatus] }}\n            </view>\n            <view :class=\"[button,( item.couponStatus != 'NOTUSED' ? 'gray' : '' )]\" v-else-if=\" pageFrom == 'inquiry' \" bindtap=\"jumpLink\" :data-coupon=\"item\">{{ couponStatuText[item.couponStatus] }}\n            </view>\n            <view :class=\"[button,( item.couponTandF ? '' : 'gray' )]\" v-else-if=\"item.couponStatus == 'NOTUSED'\" bindtap=\"usedCoupon\" :data-coupon=\"item\">去使用\n            </view>\n          </view>\n          <view class=\"img_box\" v-if=\" pageFrom != 'inquiry' \"> \n            <image src=\"../../images/coupon-used.png\" v-if=\"item.couponStatus == 'ALREADYUSED'\"></image>\n            <image src=\"../../images/coupon-expired.png\" v-else-if=\"item.couponStatus == 'EXPIRED'\"></image>\n          </view>\n          <image src=\"../../images/icon-checked-right.png\" class=\"selectedImg\" v-if=\"pageFrom == 'guidance' && selectedId == item.id\"></image>\n        </view>\n        <view :class=\"[rule-box,( item.couponStatus == 'ALREADYUSED' || item.couponStatus == 'EXPIRED' ? 'cell_gray' : '')]\" v-if=\" item.usageRules.length > 0 \" bindtap=\"fold_btn\" :data-index=\" index \">  \n          <view class=\"rule-box__text\"> \n            <block v-if=\" fold_type == index \">\n              <view class=\"text\" v-for=\"(item, key) in  item.usageRules \" :key=\"key\">{{item}}\n              </view>\n            </block>\n            <block v-else>\n              <view class=\"text\" v-for=\"(item, key) in  item.usageRules \" :key=\"key\" v-if=\" index < 1 \">{{item}}\n              </view>\n            </block>\n          </view>\n          <view class=\"rule-box__btn\">使用规则\n          </view>\n          <view :class=\"[rule-box__arrow,( fold_type == index ? 'rotate' : '' )]\"></view>\n        </view>\n      </block>\n    </view>\n    <view class=\"not-use\" :style=\"{padding-bottom:  isIpx ? '0' : '46rpx'}\" bindtap=\"notUse\" v-if=\" pageFrom == 'guidance' && couponsData.length > 0 \">不使用优惠券\n    </view>\n  </view>","wxss":"@import '/common/tableView.wxss';\n.not-use {\n  height: 100rpx;\n  line-height: 100rpx;\n  text-align: center;\n  border-top: 1rpx solid #eeeeee;\n  background: #ffffff;\n  margin-top: 20rpx;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n.section-padding {\n  padding-bottom: 120rpx;\n}"},"convertDir/component/djk-index/djk-index":{"js":"import {\n  ajax,\n  ajax2,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  onShow: function() {\n    this.data.sess_key = Taro.getStorageSync('sess_key') || null;\n\n    // 登录才会调验证电子医保卡是否绑定接口 已绑定显示查看 未绑定显示领取\n    this.data.sess_key && this.checkBind(); \n  },\n\n  onHide: function() {\n    // 页面被隐藏\n  },\n\n  onResize: function(size) {\n    // 页面尺寸变化\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    nearbyDrugstoreList: {\n      type: Array,\n      default: []\n    },\n    medicareDrugs: { // 医保卡列表\n      type: Array,\n      default: []\n    },\n    hasNextPageMedicareCardMed: { // 是否还有下一页医保药品\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data: function() {\n    return {\n      cdnLink: cdnStaticResourceUrl,\n      severeCaseClassify: [],\n      sess_key: '',\n      navsList: [\n        {\n          url: '/pages/djk/pages/medicareCard/medicareCard',\n          // url:\"/pages/djk/pages/electronCard/electronCard\",\n          text: '电子社保卡'\n        },{\n          url: '/pages/note/nearbyDrugstoreList/nearbyDrugstoreList',\n          text: '附近药店'\n        },{\n          url: '/pages/b2c/pages/productSearch/productSearch?type=all',\n          text: '便民购药'\n        },{\n          url: '/pages/djk/pages/socialSecurity/socialSecurity',\n          text: '社保保障'\n        }\n      ],\n      tabbarHeight: null,\n      address_data: getApp().address_data,\n      isBindYBCard: false // 是否绑定医保卡  false -> 电子医保卡 领取 按钮  true -> 查看 按钮\n    };\n  },\n\n  lifetimes: {\n    attached: function() {\n      console.log(getApp().address_data);\n      setTimeout(() => console.log(`setTimeout${ JSON.stringify(getApp().address_data) }`), 1200);\n      // 在组件实例进入页面节点树时执行\n      this.setData({\n        tabbarHeight: Taro.getStorageSync('tabbarHeight') || 82\n      })\n    }\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    jumpPage(e) {\n      let url = e.currentTarget.dataset.url;\n      let index = e.currentTarget.dataset.index;\n      if (index == 0) {\n        if(!this.data.sess_key) {\n          Taro.navigateTo({\n            url: `/pages/note/login/login?backUrl=/pages/djk/pages/medicareCard/medicareCard`\n          })\n        }\n      }\n      // 跳转药店添加经纬度\n      if (index == 1) {\n        url = `${ this.data.navsList[1].url }?data=${ JSON.stringify(getApp().address_data) }&pageTitle=附近药店`;\n      }\n      Taro.navigateTo({ url });\n    },\n    jumpLink(e) {\n      let link = e.currentTarget.dataset.link;\n      if(!link) return false;\n      Taro.navigateTo({\n        url: `/pages/webView/webView?link=${ encodeURIComponent(link) }`\n      })\n    },\n    // 跳转附近药店列表\n    tapNearbyDrugstore(){\n      let data = JSON.stringify(getApp().address_data);\n      \n      getApp().globalData.burySpotSDK.track(`sy-fjyd-more`);\n      Taro.navigateTo({\n        url: `/pages/note/nearbyDrugstoreList/nearbyDrugstoreList?data=${ data }`\n      })\n    },\n    // 点击药店\n    nearbyDrugstoreBtn(e){\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${e.currentTarget.dataset.id}`\n      })\n    },\n    // 点击医保药品\n    toCheckPro(e){\n      const proItem = e.currentTarget.dataset.item;\n\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${ proItem.medicineId }&drugStoreId=${ proItem.drugstoreId }&classifyId=${ proItem.classifyId }`\n      })\n    },\n    // 查询是否绑定过医保卡\n    checkBind() {\n      ajax2('get', 'api/medicarecard/queryMedicareCard', {}, ({ data } = { data: {} }) => {\n        if (data.code == 0) {\n          this.setData({\n            isBindYBCard: true\n          });\n        } else {\n          this.setData({\n            isBindYBCard: false\n          });\n        }\n      }, res => {\n        this.setData({\n          isBindYBCard: false\n        });\n        Taro.showToast({\n          title: res.msg || '请求失败',\n          icon: 'none'\n        })\n      })\n    } \n  }\n};\n","json":{"medList":"../../component/medList/medList"},"wxml":"\n  <view class=\"djk-index-auto-container\">\n    <view class=\"container\">      \n      <view class=\"banner\">\n        <image :src=\"''+ cdnLink +'images/djk-banner.jpg'\"></image>\n      </view>\n      <view class=\"service-tag\">   \n        <view> 到店自取\n    \n          <image src=\"../../images/self-pick.png\"></image>\n        </view>\n        <view> 2小时快送\n    \n          <image src=\"../../images/one-hour.png\"></image>\n        </view>\n        <view> 医保支付\n    \n          <image src=\"../../images/medicare-pay.png\"></image>\n        </view>\n        <view> 24小时守护\n    \n          <image src=\"../../images/24-hour.png\"></image>\n        </view>\n      </view>\n      <view class=\"navs-list\">\n        <view class=\"nav\" v-for=\"(item, index) in  navsList \" :key=\"index\" bindtap=\"jumpPage\" :data-url=\" item.url \" :data-index=\" index \"> \n          <image :src=\"'../../images/djk-index-nav'+ index + 1 +'.png'\"></image>\n          <text>{{ item.text }}\n          </text>\n        </view>\n      </view>\n      <view class=\"notice\"> \n        <image src=\"../../images/djk-notice-icon.png\"></image>\n        <text>线上复诊开药，药品配送到家\n        </text>\n      </view>\n      <view class=\"medical-insurance\" bindtap=\"jumpPage\" data-url=\"/pages/djk/pages/medicareCard/medicareCard\" data-index=\"0\"> \n        <text>电子社保卡\n        </text>\n        <view class=\"button\">{{ isBindYBCard ? '\b查看' : '领取' }}\n        </view>\n      </view>\n      <view class=\"nearby-drug-store\" v-if=\" nearbyDrugstoreList.length > 0 \"> \n        <view class=\"nearby-drug-store__title\"> \n          <view>附近药店\n          </view>\n          <view bindtap=\"tapNearbyDrugstore\" class=\"nearby-drug-store_more sy-fjyd-more\">\n            <image src=\"../../images/djk-more-icon.png\"></image>\n          </view>\n        </view>\n        <scroll-view v-if=\" nearbyDrugstoreList.length > 0 \" scroll-with-animation=\"true\" scroll-x=\"true\">\n          <view class=\"nearby-drug-store__list\">\n            <view class=\"nearby-drug-store__cell\" :data-id=\" item.id \" bindtap=\"nearbyDrugstoreBtn\" v-for=\"(item, key) in  nearbyDrugstoreList \" :key=\"key\"> \n              <view class=\"drug-left-photo\"> \n                <image class=\"nearby-drug-store__head-photo\" mode=\"aspectFill\" :src=\" item.doorheadPhoto ? item.doorheadPhoto : cdnLink + '/images/drugstore-djk-mr.jpg' \"></image>\n                <view class=\"drug-left-photo-text\">\n                  <image src=\"../../images/icon_time.png\"></image>\n                  <text>{{item.businessHours}}\n                  </text>\n                </view>\n              </view>\n              <view class=\"nearby-drug-store__cell__center\">   \n                <view class=\"nearby-drug-store__cell_title\">{{ item.drugstore_name }}\n                </view>\n                <block v-if=\" item.activities \">\n                  <view class=\"nearby-drug-store__cell_active\" v-for=\"(item, index) in  item.activities \">{{ item.label }}\n                  </view>\n                </block>\n                <view class=\"nearby-drug-store__cell_time\">\n                  <text :class=\"[( label == '医保在线支付' ? 'activity-style' : '' )]\" v-for=\"(label, key) in  item.labelList \" :key=\"key\">{{ label }}\n                  </text>\n                </view>\n                <view class=\"nearby-drug-store__cell_distance\" catchtap=\"openMap\" :data-item=\" item \"> \n                  <image mode=\"widthFix\" src=\"../../images/index-fj-yd.png\"></image>\n                  <text>{{ item.distance }}\n                  </text>\n                </view>\n              </view>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n      <view class=\"proList sp_list\" v-if=\" medicareDrugs.length \">  \n        <view class=\"nearby-drug-store__title\">\n          <view>医保药品\n          </view>\n        </view>\n        <view class=\"proItem\" v-for=\"(item, index) in  medicareDrugs \" :key=\"index\">\n          <view class=\"itemTop flex\" :data-item=\" item \" :data-index=\" index \" bindtap=\"toCheckPro\"> \n            <image :src=\" item.medicineMainImage \"></image>\n            <view class=\"itemInfo\">   \n              <view class=\"title\">\n            {{ item.medicineName }} {{ item.medicineCommonName }}\n          \n                <view class=\"b2c_cf\" v-if=\" item.medicinesIsPrescribe \">处方药\n                </view>\n                <text v-if=\" item.limitPurchaseAct \">限{{ item.limitPurchaseAct.limitNum }}件\n                </text>\n              </view>\n              <view class=\"specifications\">{{ item.medicineSpecifications }}\n              </view>\n              <view class=\"active_tag\" v-if=\" item.securitycardOnlinePayLabel \">\n                <view class=\"tag\">{{ item.securitycardOnlinePayLabel }}\n                </view>\n              </view>\n              <view class=\"price\">\n            ¥{{ item.customPrice }}\n          \n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"tip\" v-if=\" !hasNextPageMedicareCardMed && medicareDrugs.length > 10 \">已经到底了\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".banner {\n  margin: 0 30rpx; \n  border-radius: 12rpx;\n  overflow: hidden;\n  height: 230rpx;\n}\n\n.banner image {\n  width: 100%;\n  height: 230rpx;\n}\n\n.service-tag {\n  display: flex;\n  justify-content: space-between;\n  margin: 30rpx 30rpx 0 30rpx;\n  font-size: 24rpx;\n  font-weight: 500;\n  color: #999;\n}\n\n.service-tag image {\n  position: relative;\n  top: 4rpx;\n  width: 24rpx;\n  height: 24rpx;\n}\n\n.navs-list {\n  display: flex;\n  justify-content: space-between;\n  margin: 30rpx 54rpx 25rpx;\n}\n\n.navs-list .nav {\n  /* width: 100rpx; */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n\n.navs-list .nav image {\n  width: 88rpx;\n  height: 88rpx;\n}\n\n.navs-list .nav text {\n  position: relative;\n  /* left: -6rpx; */\n  display: inline-block;\n  /* width: 150rpx; */\n  margin-top: 10rpx;\n  font-size: 24rpx;\n  color: #666666;\n}\n\n.notice {\n  background: #F9F9F9;\n  margin: 0 30rpx;\n  display: flex;\n  padding: 22rpx 20rpx;\n  border-radius: 12rpx;\n}\n\n.notice image {\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 20rpx;\n}\n\n.notice text {\n  font-size: 28rpx;\n  color: #333333;\n}\n\n.medical-insurance {\n  background: linear-gradient(90deg,#f8fbff, #eef3ff 101%);\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  margin: 30rpx 30rpx 10rpx;\n  padding: 33rpx 30rpx;\n  border-radius: 12rpx;\n}\n\n.medical-insurance text {\n  font-size: 36rpx;\n  color: #333333;\n  flex: 1\n}\n\n.medical-insurance .button {\n  padding: 0 30rpx;\n  height: 54rpx;\n  line-height: 54rpx;\n  color: #00B955;\n  border: 1rpx solid #00B955;\n  display: inline-block;\n  border-radius: 54rpx;\n}\n\n.title {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.title .text {\n  flex: 1;\n  font-size: 36rpx;\n  color: #333333;\n  font-weight: bold;\n}\n\n.title image {\n  width: 38rpx;\n  height: 38rpx;\n}\n\n.classifyList {\n  padding: 0 20rpx;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.classifyList .item {\n  background: #F5F8FC;\n  font-size: 28rpx;\n  color: #333333;\n  padding: 25rpx 20rpx;\n  margin: 10rpx;\n  border-radius: 8rpx;\n  width: calc(50% - 20rpx);\n  box-sizing: border-box;\n  display: flex;\n}\n\n.classifyList .item view {\n  flex: 1;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  word-break: break-all;\n  font-weight: bold;\n}\n\n.classifyList .item image {\n  width: 60rpx;\n  height: 60rpx;\n  margin-left: 35rpx;\n}\n\n/* 附近药店 */\n\n.nearby-drug-store {\n  padding: 0 30rpx;\n}\n\n.nearby-drug-store__title {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 0 20rpx 0;\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n}\n\n.nearby-drug-store_more {\n  width: 42rpx;\n  height: 42rpx;\n}\n\n.nearby-drug-store_more image {\n  width: 42rpx;\n  height: 42rpx;\n}\n\n.nearby-drug-store__list {\n  width: 100%;\n  display: flex;\n  padding-bottom: 20rpx;\n}\n\n.nearby-drug-store__cell {\n  flex-shrink: 0;\n  width: 640rpx;\n  display: flex;\n  border-radius: 8rpx;\n  background: #F9F9F9;\n  overflow: hidden;\n  margin-right: 20rpx;\n}\n\n.nearby-drug-store__head-photo {\n  width: 228rpx;\n  height: 172rpx;\n  display: block;\n  overflow: hidden;\n}\n\n.nearby-drug-store__cell__center{\n  flex: 1;\n  position: relative;\n  padding: 10rpx 20rpx 0;\n}\n\n.nearby-drug-store__cell_title {\n  width: 70%;\n  max-height: 58rpx;\n  font-weight: bold;\n  font-size: 30rpx;\n  line-height: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nearby-drug-store__cell_time text {\n  font-size: 20rpx;\n  color: #999;\n  margin-top: 8rpx;\n  margin-right: 8rpx;\n  border-radius: 2rpx;\n  border: 1rpx solid #e1e1e1;\n  padding: 2rpx 5rpx;\n  display: inline-block;\n}\n.nearby-drug-store__cell_active {\n  display: inline-block;\n  height: 40rpx;\n  margin-top: 12rpx;\n  margin-right: 10rpx;\n  line-height: 40rpx;\n  padding: 0 8rpx;\n  background: rgba(255, 33, 33, 0.05);\n  border-radius: 4rpx;\n  font-size: 20rpx;\n  color: #FF2121;\n}\n\n.nearby-drug-store__cell_distance {\n  font-size: 20rpx;\n  color: #666;\n  position: absolute;\n  top: 15rpx;\n  right: 20rpx;\n  display: flex;\n  align-items: center;\n  height: 28rpx;\n  line-height: 28rpx;\n}\n\n.nearby-drug-store__cell_distance image {\n  position: absolute;\n  left: 0;\n  top: 3rpx;\n  width: 22rpx;\n  height: 22rpx;\n  flex-shrink: 0;\n}\n\n.nearby-drug-store__cell_distance text {\n  padding-left: 28rpx;\n  color: #999999;\n}\n\n.scrollbar1 {\n  width: 60rpx;\n  height: 4rpx;\n  background-color: rgba(239, 239, 239, 1);\n  margin: 0 auto;\n  border-radius: 6rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.scrollbar1 view {\n  height: 100%;\n  position: absolute;\n  transition: all 0.2s;\n  left: 0;\n  top: 0;\n  background-color: rgba(161, 165, 176, 1);\n}\n\n\n\n.proList, .drugstore_list {\n  background: #fff;\n  overflow: hidden;\n}\n\n.proItem {\n  font-size: 26rpx;\n  color: #666;\n  padding-bottom: 30rpx;\n  position: relative;\n  padding: 30rpx;\n}\n.proItem::after{\n  content: '';\n  width: 100%;\n  height: 1rpx;\n  background-color: #f2f2f2;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n\n.proItem .itemTop image {\n  width: 228rpx;\n  min-width: 228rpx;\n  height: 228rpx;\n  background: #ccc;\n  margin-right: 15rpx;\n}\n\n.proItem .itemTop .itemInfo {\n  width: 500rpx;\n  height: 228rpx;\n  position: relative;\n  padding-bottom: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .title {\n  font-weight: bold;\n  font-size: 30rpx;\n  color: rgba(41, 38, 38, 1);\n  line-height: 34rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.proItem .itemTop .itemInfo .title2 {\n  color: rgba(153, 153, 153, 1);\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.proItem .itemTop .itemInfo .money {\n  font-size: 30rpx;\n  font-weight: 500;\n  color: rgba(224, 46, 36, 1);\n  line-height: 30rpx;\n  margin-top: 20rpx;\n}\n\n.proItem .itemTop .itemInfo .money text {\n  font-size: 20rpx;\n  color: rgba(102, 102, 102, 1);\n  text-decoration: line-through;\n  margin-left: 10rpx;\n}\n\n.proItem .itemTop .itemInfo .buyBtn {\n  width: 150rpx;\n  height: 50rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  font-size: 30rpx;\n  color: rgba(0, 185, 173, 1);\n  text-align: center;\n  line-height: 50rpx;\n}\n\n.djk .proItem {\n  padding-bottom: 0;\n  border-bottom: 20rpx solid #F7F7F7;\n}\n\n.proItem .bottom {\n  height: 80rpx;\n  line-height: 80rpx;\n  text-align: center;\n  border-top: 1rpx solid #f2f2f2;\n}\n\n.itemBottom {\n  height: 90rpx;\n  line-height: 90rpx;\n  padding: 0 30rpx;\n  border-top: 1px solid rgba(245, 247, 248, 1);\n  position: relative;\n}\n\n.storeName {\n  max-width: 480rpx;\n  font-size: 24rpx;\n  color: rgba(153, 153, 153, 1);\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  margin-right: 10rpx;\n  -webkit-box-orient: vertical;\n  position: relative;\n  padding-right: 10rpx;\n}\n\n.storeName::after {\n  content: '';\n  display: block;\n  width: 1rpx;\n  height: 20rpx;\n  position: absolute;\n  top: 9rpx;\n  right: 1rpx;\n  background-color: rgba(238, 238, 238, 1);\n}\n\n.tip {\n  color: #666;\n  text-align: center;\n  font-size: 26rpx;\n  padding: 30rpx 0;\n  background: #f7f7f7;\n}\n\n.flex {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.flex2 {\n  display: flex;\n  margin-top: 20rpx;\n}\n\n.storeKm {\n  font-size: 26rpx;\n  color: rgba(153, 153, 153, 1);\n}\n\n.itemBottom .dr {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  padding-left: 192rpx;\n}\n\n.itemBottom_img {\n  width: 24rpx;\n  height: 26rpx;\n  position: absolute;\n  right: 20rpx;\n  top: 34rpx;\n}\n\n.active_tag,.active_tag2{\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 10rpx;\n}\n.active_tag2{\n  margin-top: 0rpx;\n}\n.active_tag .tag {\n  padding: 0 9rpx;\n  height: 30rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  border: 1px solid #FF8A8A;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  color: #FF2121;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n  margin-bottom: 13rpx;\n}\n\n.activity-style {\n  background: #FFF4F4;\n  border: 1px solid #FF8A8A !important;\n  color: #FF2121 !important;\n}\n\n.active_tag2 .tag{\n  background: #fff;\n  border: 1px solid #e1e1e1;\n  color: #666666;\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  border-radius: 4rpx;\n  margin-right: 10rpx;\n}\n\n.sp_list .nearby-drug-store__title {\n  padding-left: 30rpx;\n}\n\n.specifications {\n  margin-top: 10rpx;\n  font-size: 24rpx;\n  color: #999999;\n}\n\n.price{\n  color: #FF2121;\n  font-size: 40rpx;\n  margin-top: 29rpx;\n  position: relative;\n  font-weight: bold;\n}\n\n.price text{\n  font-size: 20rpx;\n  color: #999999;\n  margin-left: 12rpx;\n  text-decoration:line-through;\n}\n\n.nearby-drug-store__head-photo {\n  width: 228rpx;\n  height: 172rpx;\n  display: block;\n  overflow: hidden;\n}\n\n.drug-left-photo{\n  position: relative;\n}\n.drug-left-photo-text{\n  width: 228rpx;\n  height: 34rpx;\n  line-height: 34rpx;\n  color: #fff;\n  font-size: 20rpx;\n  overflow: hidden;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  text-align: center;\n  border-bottom-right-radius: 8rpx;\n}\n.drug-left-photo-text::after{\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  opacity: 0.5;\n  left: 0;\n  top: 0;\n}\n.drug-left-photo-text text{\n  position: relative;\n  z-index: 2;\n}\n.drug-left-photo-text image{\n  display: inline-block;\n  vertical-align: middle;\n  width: 20rpx;\n  height: 20rpx;\n  position: relative;\n  z-index: 2;\n  margin-right: 10rpx;\n  margin-top: -2rpx;\n}\n"},"convertDir/component/doctorHelper/doctorHelper":{"js":"export default {\n  data: function() {\n    return {\n    };\n  },\n  props: {\n    inquiryInfo: { // 用药申请卡面信息\n      type: Object,\n      default: {},\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"doctorHelper-auto-container\">\n    <view class=\"im-doctor-helper\">  \n      <view class=\"talk\"> \n        <view class=\"cell_box cell_box_l\"> \n          <image class=\"cell_img\" src=\"../../images/assistant-photo.png\"></image>\n          <view class=\"cell_text\"> \n            <view class=\"name\">医生小助\n            </view>\n            <view class=\"text\">请问您是否有过敏史？\n            </view>\n          </view>\n        </view>\n        <view class=\"cell_box cell_box_r\"> \n          <view class=\"cell_text\"> \n            <view class=\"name\">{{inquiryInfo.patientName}}\n            </view>\n            <view class=\"text\">{{inquiryInfo.allergySymptom === 1 ? \"无\" : inquiryInfo.allergySymptomExplain}}\n            </view>\n          </view>\n          <image class=\"cell_img\" src=\"../../images/user-photo.png\"></image>\n        </view>\n      </view>\n      <view class=\"talk\"> \n        <view class=\"cell_box cell_box_l\"> \n          <image class=\"cell_img\" src=\"../../images/assistant-photo.png\"></image>\n          <view class=\"cell_text\"> \n            <view class=\"name\">医生小助\n            </view>\n            <view class=\"text\">请问是否有肝、肾功能损害？\n            </view>\n          </view>\n        </view>\n        <view class=\"cell_box cell_box_r\"> \n          <view class=\"cell_text\"> \n            <view class=\"name\">{{inquiryInfo.patientName}}\n            </view>\n            <view class=\"text\">{{inquiryInfo.liverAndRenalFunction === 0 ? \"无\" : \"有\"}}\n            </view>\n          </view>\n          <image class=\"cell_img\" src=\"../../images/user-photo.png\"></image>\n        </view>\n      </view>\n      <view class=\"talk\" v-if=\"inquiryInfo.patientSex === 2\"> \n        <view class=\"cell_box cell_box_l\"> \n          <image class=\"cell_img\" src=\"../../images/assistant-photo.png\"></image>\n          <view class=\"cell_text\"> \n            <view class=\"name\">医生小助\n            </view>\n            <view class=\"text\">请问当前是否为妊娠或者哺乳期？\n            </view>\n          </view>\n        </view>\n        <view class=\"cell_box cell_box_r\"> \n          <view class=\"cell_text\"> \n            <view class=\"name\">{{inquiryInfo.patientName}}\n            </view>\n            <view class=\"text\">{{inquiryInfo.pregnancyAndLactation === 0 ? \"否\" : \"是\"}}\n            </view>\n          </view>\n          <image class=\"cell_img\" src=\"../../images/user-photo.png\"></image>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".cell_box{\n  margin-bottom: 36rpx;\n}\n.talk:first-child{\n  margin-top: 172rpx;\n}\n.cell_box .apply .main >view:nth-child(4) text{\n  display: inline-block;\n  line-height: 0;\n}\n.cell_box_l{\n  margin-left: 32rpx;\n  display: flex;\n}\n.cell_box_l .cell_img{\n  width: 80rpx;\n  height: 80rpx;\n  margin-right: 20rpx;\n}\n.cell_box_l .cell_text .name{\n  font-size: 22rpx;\n  color: #9AA0B5;\n  margin-bottom: 10rpx;\n}\n.cell_box_l .cell_text .text{\n  padding: 0 20rpx;\n  height: 82rpx;\n  background: #ffffff;\n  border-radius: 0rpx 20rpx 20rpx;\n  text-align: center;\n  line-height: 82rpx;\n  font-size: 30rpx;\n}\n.cell_box_r{\n  margin-right: 32rpx;\n  display: flex;\n  justify-content:flex-end;\n}\n.cell_box_r .cell_img{\n  width: 80rpx;\n  height: 80rpx;\n  margin-left: 20rpx;\n  flex-shrink: 0;\n}\n.cell_box_r .cell_text .name{\n  text-align: right;\n  font-size: 22rpx;\n  color: #9AA0B5;\n  margin-bottom: 10rpx;\n}\n.cell_box_r .cell_text .text{\n  float: right;\n  background: #00b955;\n  border-radius: 20rpx 0rpx 20rpx 20rpx;\n  text-align: left;\n  font-size: 30rpx;\n  color: #fff;\n  padding: 24rpx 20rpx;\n  margin-left: 132rpx;\n  white-space:normal;\n  word-break:break-all;\n}"},"convertDir/component/doctorList/doctorList":{"js":"// component/doctorList/doctorList.js\nconst app = getApp();\n\nexport default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    lists: Object,\n    pageFrom: String,\n    type:String\n  },\n\n  data: function() {\n    return {\n      lists: {},\n      type:\"\"\n    };\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    onShow() {\n      console.log('onShow监听小程序显示');\n    },\n    // 点击医生-跳转到医生主页\n    nearbyDoctorBtn(e) {\n      Taro.navigateTo({\n        url: `/pages/hospital/doctorDetail/doctorDetail?id=${e.currentTarget.dataset.id}`\n      })\n      if (this.properties.pageFrom == 'search') {\n        getApp().globalData.burySpotSDK.track(`action_seacHospitalHome_doctorListClick-${e.currentTarget.dataset.id}`);\n      }\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"doctorList-auto-container\">\n    <view :class=\"[nearbyDoctor-list,( type === '2' ? 'showBorder' : '' )]\" :data-id=\"item.id\" bindtap=\"nearbyDoctorBtn\" v-for=\"(item, key) in lists\" :key=\"key\">   \n      <view class=\"nl-right-title\">  \n        <text class=\"title-name\" v-if=\"item.doctorName\">{{item.doctorName}}\n        </text>\n        <text v-if=\"item.doctorTitle\">{{item.doctorTitle}}\n        </text>\n        <text v-if=\"item.firstDepartmentConfName\">{{item.firstDepartmentConfName}}\n        </text>\n      </view>\n      <view class=\"nl-right-address\" v-if=\"item.hospitalName\">{{item.hospitalName}}\n      </view>\n      <view class=\"nl-right-special\" v-if=\"item.goodAt\">擅长：{{item.goodAt}}\n      </view>\n      <block>  \n        <view class=\"nl-right-icon\" v-if=\"item.scienceTitle\">{{item.scienceTitle}}\n        </view>\n        <view class=\"nl-right-icon\" v-if=\"item.educateTitle\">{{item.educateTitle}}\n        </view>\n        <view class=\"nl-right-icon\" v-if=\"item.doctorTitle\">{{item.doctorTitle}}\n        </view>\n      </block>\n    </view>\n  </view>","wxss":"\n/* 医生列表 */\n.nearbyDoctor-list {\n  padding: 24rpx;\n  position: relative;\n  margin-bottom:20rpx;\n  border-radius: 10px;\n  background-color: #fff;\n}\n.nearbyDoctor-list.showBorder{\n  border-radius: 0;\n  margin-bottom:0;\n  border-bottom:1rpx solid #eeeeee;\n}\n.nearbyDoctor-list.showBorder:last-child{\n  border:0;\n}\n.nl-right-title {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 400;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n.nl-right-title text{\n  margin-right: 10rpx;\n}\n.nl-right-title .title-name{\n  font-size: 32rpx;\n  font-weight: 700;\n}\n.nl-right-special{\n  width: 100%;\n  font-size: 24rpx;\n  color: #666883;\n  margin-top: 13rpx;\n  line-height:33rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-address {\n  width: 100%;\n  font-size: 24rpx;\n  color: #666883;\n  margin-top: 13rpx;\n  line-height:33rpx;\n  height:33rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-icon {\n  display: inline-block;\n  margin-top: 11rpx;\n  margin-right: 10rpx;\n  padding: 1rpx 8rpx;\n  background:#f6f8fd;\n  border-radius: 4rpx;\n  font-size: 20rpx;\n  color: #666883;\n}\n\n\n"},"convertDir/component/famousDoctorsList/famousDoctorsList":{"js":"import {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2\n} from '../../utils/util';\nconst app = getApp();\nconst apiUrl = {\n  getDepartmentTab: 'api/doctor/dept/list', // 医生搜索页科室列表\n  getDoctorList: 'api/doctor/query/list', // 医生搜索页科室列表\n  inquiringPrice: 'api/extremeInterrogation/inquiringPrice/V2' // 获取极速问诊卡面\n}\n\nexport default {\n  // 组件所在页面的生命周期函数\n  onHide: function () {\n  },\n\n  onShow:function () {\n  },\n\n  lifetimes:{\n    created() {\n    },\n    attached() {\n      this.getInquiryData()\n      if (!this.properties.famousDoctorConfigStatus) {\n        this.getDepartmentTab()\n        this.getDoctorsNameByItem()\n      }\n    }\n  },\n\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      keyword: '', // 搜索框关键字\n      department: [], // 科室列表\n      inquiryData: {}, // 问医生\n      doctorList: [], // 医生列表\n      doctorSigns: [], // 医生标签\n      docDeptCode: '', // 科室ID\n      pageNum: 1,\n      pageSize: 50,\n      lastPage: null, // 总页数\n      isSearch: false // 是否搜索过\n    };\n  },\n\n  props: {\n    drugStore: {\n      type: Object,\n      default: {}\n    },\n    tabTop: {\n      type: Number,\n      default: 0\n    },\n    adsorbentTop: {\n      type: Boolean,\n      default: false\n    },\n    famousDoctorConfigStatus:{\n      type: Number,\n      default: ''\n    }, // 名医  0：开启  1：关闭\n    speedConfigStatus:{\n      type: Number,\n      default: ''\n    }, // 极速  0：开启  1：关闭\n  },\n\n  methods: {\n    /**\n     * @description: 获取问诊卡片\n     * @return: void\n     */\n    getInquiryData() {\n      ajax('POST', apiUrl.inquiringPrice, {\n        thirdChannel: 2 //渠道code 1:平台 2 药店 3 保险 4 您健康\n      }, res=> {\n        if (res.data.code == 0) {\n          this.setData({\n            inquiryData: res.data.result\n          })\n        }else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    },\n    // 医生搜索页科室列表\n    getDepartmentTab() {\n      Taro.showLoading({\n        title: '加载中...'\n      })\n      ajax2('post', apiUrl.getDepartmentTab, {}, res => {\n        Taro.hideLoading()\n        if (res.data.code === 0) {\n          if (res.data.result && res.data.result.length) {\n            res.data.result[0].isActive = true\n            this.setData({\n              department: res.data.result,\n            })\n          }\n        } else {\n          Taro.showToast({\n            title: res.data.msg || '服务器异常请重试',\n            icon: 'none',\n            duration: 2000\n          })\n        }\n      })\n    },\n    /**\n     * 页面上拉触底事件的处理函数\n     */\n    onBottom: function () {\n      if (this.data.pageNum >= this.data.lastPage) {\n        Taro.showToast({\n          title: '没有更多了',\n          icon: 'none'\n        })\n      } else {\n        this.data.pageNum++\n        this.getDoctorsNameByItem('bottom')\n      }\n    },\n    // 搜索医生\n    getDoctorsNameByItem(pageType) {\n      Taro.showLoading({\n        title: '加载中...'\n      })\n      let keyword = this.data.keyword\n      console.log('.....搜索', this.data.keyword)\n      let params = {\n        doctorName: keyword.split(' ')[0],\n        deptId: this.data.docDeptCode,\n        pageNum: this.data.pageNum,\n        pageSize: this.data.pageSize\n      }\n      ajax('post', apiUrl.getDoctorList, params, res => {\n        Taro.hideLoading()\n        if (res.data.code === 0 ) {\n          if (res.data.result) {\n            let data = res.data.result.list\n            if (data && data.length) {\n              data.forEach((item, index) => {\n                if (item.doctorSigns) {\n                  item.doctorSigns = item.doctorSigns.split(',')\n                }\n              })\n            }\n            this.setData({\n              doctorList: pageType == 'bottom' ? this.data.doctorList.concat(res.data.result.list) : res.data.result.list || [],\n              lastPage: res.data.result.lastPage,\n              isSearch: true\n            })\n            console.log('.......list', res.data.result.list, this.data.doctorList)\n          }\n        } else {\n          Taro.showToast({\n            title: res.data.msg || '服务器异常请重试',\n            icon: 'none'\n          })\n        }\n      })\n    },\n    // 选择科室\n    chooseTab(e) {\n      let tabItem = e.currentTarget.dataset.item\n      if (this.data.department.length && this.data.department) {\n        this.data.department.forEach((item, key) => {\n          if (item.docDeptCode === tabItem.docDeptCode) {\n            item.isActive = true\n            this.setData({\n              docDeptCode: Number(tabItem.docDeptCode),\n              pageNum: 1\n            },function (){\n              this.getDoctorsNameByItem()\n            })\n          } else{\n            item.isActive = false\n          }\n        })\n      }\n\n      this.setData({\n        department: this.data.department,\n        isSearch: true\n      })\n    },\n    // 跳转极速问诊\n    toInquiry() {\n      getApp().globalData.burySpotSDK.track('toGuidancePage');\n      getApp().globalData.inquiryChannel = 2;\n      if(getApp().globalData.sess_key){\n        let url\n        getApp().globalData.publicDomain == 0?url = `/pages/inquiry/guidance/guidance?isHideBtn=1&drugstoreId=${this.properties.drugStore.lzId}`: url = `/pages/inquiry/guidance/guidance?drugstoreId=${this.properties.drugStore.lzId}`\n        Taro.navigateTo({\n          url: url\n        })\n      } else {\n        let url\n        getApp().globalData.publicDomain == 0? url = encodeURIComponent(`/pages/inquiry/guidance/guidance?isHideBtn=1&drugstoreId=${this.properties.drugStore.lzId}`):url = encodeURIComponent(`/pages/inquiry/guidance/guidance?drugstoreId=${this.properties.drugStore.lzId}`)\n        Taro.navigateTo({\n          url: '/pages/note/login/login?backUrl='+ url\n        })\n      }\n    },\n    // 选择医生跳转\n    chooseDoctor(e) {\n      let doctorId = e.currentTarget.dataset.item.guid\n      console.log('.....', doctorId)\n      let url\n      getApp().globalData.publicDomain == 0?url=`/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${doctorId}&isHideBtn=1&drugstoreId=${this.properties.drugStore.lzId}`:url=`/pages/famousDoctors/page/myDoctor/myDoctor?doctorId=${doctorId}&drugstoreId=${this.properties.drugStore.lzId}`\n      Taro.navigateTo({\n        url:url\n      })\n    }\n  },\n\n  watch: {\n    adsorbentTop:function(newVal,oldVal,change){\n      console.log(newVal)\n    },\n\n    famousDoctorConfigStatus:function(newVal,oldVal,change){\n      console.log(newVal)\n    },\n\n    speedConfigStatus:function(newVal,oldVal,change){\n      console.log(newVal)\n    }\n  }\n};","json":{},"wxml":"\n  <view class=\"famousDoctorsList-auto-container\">\n    <view class=\"doctor-list-box\"> \n      <view class=\"doctor-list-header\" :style=\"{adsorbentTop?'position: fixed,':'',top:  tabToppx}\" v-if=\"!famousDoctorConfigStatus\">\n        <scroll-view class=\"doctor-wrapper\" scroll-x=\"true\">\n          <view class=\"doctor-list-tab\">\n            <view :class=\"[(item.isActive ? 'choose-active' : '')]\" v-for=\"(item, id) in department\" :key=\"id\" :data-item=\" item \" bindtap=\"chooseTab\">\n                    {{item.docDeptName}}\n                \n            </view>\n          </view>\n        </scroll-view>\n      </view>\n      <view class=\"doctor-list\" v-if=\"doctorList.length || !speedConfigStatus\" :style=\"{adsorbentTop? 'margin-top:80rpx':''}\"> \n        <view class=\"js-inquiry\" v-if=\"!speedConfigStatus\">  \n          <image src=\"../../images/icon-js-doctor.png\"></image>\n          <view class=\"js-inquiry-center\">  \n            <view class=\"title\">极速问诊\n            </view>\n            <view class=\"text\">{{ inquiryData.speed.doctorSuggests }}\n            </view>\n            <view class=\"price\">  \n              <text v-if=\"inquiryData.speed.askDoctors > 0\">￥{{inquiryData.speed.askDoctors}}\n              </text>\n              <text v-if=\"inquiryData.speed.askDoctors == 0\">免费\n              </text>\n              <text v-if=\"inquiryData.speed.linePrice\">￥{{inquiryData.speed.linePrice}}\n              </text>\n            </view>\n          </view>\n          <view class=\"js-inquiry-btn\" bindtap=\"toInquiry\">\n                立即咨询\n            \n          </view>\n        </view>\n        <view class=\"doctor-list-cards\" v-for=\"(item, id) in doctorList\" :key=\"id\" :data-item=\" item \" bindtap=\"chooseDoctor\" v-if=\"!famousDoctorConfigStatus\"> \n          <view class=\"doctor-list-cards-left\"> \n            <image class=\"doctor-list-img\" :src=\"item.headPortrait ? item.headPortrait : '/pages/famousDoctors/images/icon-doctor.png'\"></image>\n            <view class=\"doctor-list-cards-star\" v-if=\"item.headPortraitSign\">{{item.headPortraitSign}}\n            </view>\n          </view>\n          <view class=\"doctor-list-cards-right\">    \n            <view class=\"name\"> \n              <text class=\"doctor-list-cards-name\">{{item.name}} \n              </text>\n              <text>{{item.titleName}}\n              </text>\n            </view>\n            <view class=\"doctor-list-cards-hospital\"> \n              <text>{{item.workInstName}}\n              </text>\n              <text>{{item.docDeptName}}\n              </text>\n            </view>\n            <view class=\"doctor-list-cards-professional\">擅长：{{item.professional ? item.professional : '暂无描述'}}\n            </view>\n            <view class=\"doctor-list-cards-tag\" v-if=\"item.doctorSigns\">\n              <view v-for=\"(item, key) in  item.doctorSigns \" :key=\"key\">\n                <view>{{item}}\n                </view>\n              </view>\n            </view>\n            <view class=\"doctor-list-cards-price\" v-if=\"item.ykqProductSkuDtoList\"> \n              <image src=\"../../pages/famousDoctors/images/icon-inquiry.png\"></image>\n              <view>元\n                <text style=\"font-weight: bold;color: #FF2121;\">￥{{item.ykqProductSkuDtoList.price}}\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".doctor-list-box{\n    /*padding-top: 75rpx;*/\n}\n.doctor-list-header{\n    z-index: 80;\n    /*position: fixed;*/\n    /*left: 0;*/\n    /*z-index: 80;*/\n}\n.doctor-wrapper{\n    overflow-x: scroll;\n    /*white-space: nowrap;*/\n    background: #fff;\n    /*position: fixed;*/\n    height: 85rpx;\n}\n.doctor-list-tab{\n    width: 100%;\n    height: 80rpx;\n    background: #fff;\n    display: flex;\n    font-size: 28rpx;\n    color: #666883;\n}\n.doctor-list-tab >view{\n    margin: -2rpx 40rpx;\n    height: 80rpx;\n    line-height: 80rpx;\n    text-align: center;\n    flex-shrink: 0;\n}\n\n.choose-active{\n    color: #00b955;\n    border-bottom: 6rpx solid #00b955;\n    font-weight: 700;\n}\n.doctor-list{\n    padding: 23rpx 24rpx;\n}\n/*极速问诊卡面*/\n.js-inquiry {\n    background: #ffffff;\n    border-radius: 13rpx;\n    margin-bottom: 20rpx;\n    border: 1rpx solid #e2e3ea;\n    display: flex;\n    padding: 23rpx;\n    position: relative;\n}\n.js-inquiry >image{\n    width: 100rpx;\n    height: 100rpx;\n    margin-right: 31rpx;\n}\n.js-inquiry-center .title{\n    font-size: 32rpx;\n    color: #111334;\n    margin-bottom: 13rpx;\n    font-weight: 700;\n}\n.js-inquiry-center .text{\n    font-size: 24rpx;\n    color: #666883;\n    margin-bottom: 22rpx;\n}\n\n.js-inquiry-center .price >text:first-child{\n    font-size: 30rpx;\n    color: #ff2121;\n    margin-right: 8rpx;\n}\n.js-inquiry-center .price >text:nth-child(2){\n    font-size: 20rpx;\n    color: #9aa0b5;\n    text-decoration: line-through;\n}\n.js-inquiry-btn{\n    position: absolute;\n    z-index: 10;\n    bottom: 16rpx;\n    right: 24rpx;\n    width: 152rpx;\n    height: 48rpx;\n    line-height: 44rpx;\n    border: 2rpx solid #00b955;\n    border-radius: 26rpx;\n    color: #00b955;\n    font-weight: 700;\n    font-size: 26rpx;\n    text-align: center;\n}\n.doctor-list-cards{\n    /*height: 289rpx;*/\n    border-radius: 12rpx;\n    background: #fff;\n    padding: 24rpx 20rpx 0 20rpx;\n    display: flex;\n    margin-bottom: 20rpx;\n}\n.doctor-list-cards-left >image{\n    width: 100rpx;\n    height: 100rpx;\n    border-radius: 50%;\n}\n.doctor-list-cards-star{\n    width: 104rpx;\n    height: 32rpx;\n    background: linear-gradient(138deg,#ffb02b 15%, #ff854c 83%);\n    border-radius: 4rpx;\n    box-shadow: 0rpx 4rpx 8rpx 0rpx #ffdcbf;\n    font-size: 22rpx;\n    color: #fff;\n    text-align: center;\n    margin-top: -26rpx;\n    position: absolute;\n    z-index: 50;\n}\n.doctor-list-cards-right{\n    margin-left: 30rpx;\n    color: #111334;\n    font-size: 28rpx;\n}\n.doctor-list-cards-right >view{\n    margin-bottom: 17rpx;\n}\n.doctor-list-cards-hospital{\n    width: 500rpx;\n    display: flex;\n}\n.doctor-list-cards-hospital >text:first-child{\n    overflow: hidden;\n    text-overflow:ellipsis;\n    white-space: nowrap;\n    margin-right: 10rpx;\n}\n.doctor-list-cards-hospital >text:last-child{\n    flex-shrink: 0;\n}\n\n.doctor-list-cards-name{\n    font-size: 32rpx;\n    font-weight: bold;\n}\n.doctor-list-cards-right .doctor-list-cards-professional{\n    font-size: 24rpx;\n    color: #666883;\n    letter-spacing: 0;\n    overflow: hidden;\n    display: -webkit-box;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 2;  /*要显示的行数*/\n    -webkit-box-orient: vertical;\n}\n.doctor-list-cards-tag >view{\n    padding: 0 10rpx;\n    border: 1rpx solid #00b955;\n    border-radius: 5rpx;\n    font-size: 22rpx;\n    color: #00b955;\n    margin-right: 10rpx;\n    margin-bottom: 10rpx;\n}\n.doctor-list-cards-right .doctor-list-cards-tag{\n    display: flex;\n    flex-wrap: wrap;\n}\n.doctor-list-cards-right .doctor-list-cards-price{\n    display: flex;\n    align-items: center;\n}\n.doctor-list-cards-right .doctor-list-cards-price >image{\n    width: 24rpx;\n    height: 24rpx;\n    margin-right: 12rpx;\n}\n.doctor-list-cards-right .doctor-list-cards-price >view{\n    font-size: 30rpx;\n    color: #111334;\n}"},"convertDir/component/halfScreenDialog/halfScreenDialog":{"js":"export default {\n  onShow: function() {\n    // 页面被展示\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n\n  options: {\n    multipleSlots: true,\n    addGlobalClass: true\n  },\n\n  props: {\n    // 关闭弹窗状态\n    closabled: {\n      type: Boolean,\n      default: true\n    },\n    // 弹窗标题\n    title: {\n      type: String,\n      default: ''\n    },\n    // 蒙层状态\n    maskClosable: {\n      type: Boolean,\n      default: true\n    },\n    // 蒙层\n    mask: {\n      type: Boolean,\n      default: true\n    },\n    // 是否有数据\n    hasData: {\n      type: Boolean,\n      default: false\n    },\n    // 是否需要标题部位的分割线\n    hasLine: {\n      type: Boolean,\n      default: false\n    },\n    // 显示状态\n    show: {\n      type: Boolean,\n      default: false\n    },\n    // 弹框类型\n    type: {\n      type: String,\n      default: 1,//默认1，为旧弹框，2为新增弹框\n    },\n    // 按钮text，type为2才会用到\n    btnText: {\n      type: String,\n      default: '',\n    },\n    // 弹框限高\n    showLimitHeight: {\n      type: Boolean,\n      default: true\n    },\n  },\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    };\n  },\n\n  methods: {    \n    // 关闭函数\n    close: function close(e) {\n      let type = e.currentTarget.dataset.type;\n      if (this.data.maskClosable || type === 'close') {\n        this.setData({ show: false});\n        this.triggerEvent('close');\n      }\n    },\n    // // 阻止用户滚动穿透\n    // doNotThroughMove: function () {\n    //   console.log('stop user scroll it!');\n    //   return;\n    // }\n  },\n\n  watch: {\n    show: '_showChange'\n  }\n};\n","json":{},"wxml":"\n  <view class=\"halfScreenDialog-auto-container\">\n    <view :class=\"[(show ? 'weui-show' :'weui-hidden')]\">  \n      <view class=\"weui-mask init\" v-if=\"mask\" bindtap=\"close\" data-type=\"tap\"></view>\n      <view v-if=\"type == 1\" :class=\"[weui-half-screen-dialog,( hasData ? 'weui-half-screen-dialog__hd__box_bgcolor_0' :'weui-half-screen-dialog__hd__box_bgcolor_1' ),( showLimitHeight ? 'show-limit-height' :'' )]\"> \n        <view :class=\"[weui-half-screen-dialog__hd__box,( hasLine ? 'weui-half-screen-dialog__hd__box_line' : '' )]\">\n          <view class=\"weui-half-screen-dialog__hd\"> \n            <view class=\"weui-half-screen-dialog__hd__main\">\n              <block v-if=\"title\">\n                <text class=\"weui-half-screen-dialog__title\">{{title}}\n                </text>\n              </block>\n            </view>\n            <view v-if=\"closabled\" class=\"weui-half-screen-dialog__hd__side\" bindtap=\"close\" data-type=\"close\">\n              <view class=\"weui-icon-btn weui-icon-btn_close\">\n                <image src=\"../../images/half-screen-dialog-close.png\"></image>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view class=\"weui-half-screen-dialog__bd\">\n          <slot name=\"desc\"></slot>\n        </view>\n      </view>\n      <view v-else class=\"type2_box\">\n        <block v-if=\"show\">  \n          <view class=\"type2_box_title\">{{title}}\n          </view>\n          <view class=\"type2_box_slot\">\n            <slot name=\"desc\"></slot>\n          </view>\n          <view class=\"type2_box_btnText\" bindtap=\"close\" data-type=\"close\">\n        {{btnText}}\n      \n          </view>\n        </block>\n      </view>\n    </view>\n  </view>","wxss":".weui-half-screen-dialog {\n\tposition:fixed;\n\tleft:0;\n\tright:0;\n\tbottom:0;\n  /* height: 597rpx; */\n\tz-index:5000;\n\tline-height:1.4;\n\tborder-top-left-radius:20rpx;\n\tborder-top-right-radius:20rpx;\n\toverflow:hidden;\n}\n.weui-half-screen-dialog__hd__box_bgcolor_0{\n  background:rgba(245,245,245,1);\n}\n.weui-half-screen-dialog__hd__box_bgcolor_1{\n  background:rgba(255,255,255,1);\n}\n.weui-half-screen-dialog__hd__box{\n  height: 100rpx;\n\tpadding:0 24rpx;\n\tbackground: #FFFFFF;\n}\n.weui-half-screen-dialog__hd__box_line{\n  border-bottom:1rpx solid rgba(238, 238, 238, 1);\n}\n.weui-half-screen-dialog__hd {\n\tfont-size:32rpx;\n\theight: 100rpx;\n\tline-height: 100rpx;\n\tposition: relative;\n}\n.weui-half-screen-dialog__hd .weui-icon-btn {\n\tposition:absolute;\n\ttop:50%;\n\t-webkit-transform:translateY(-50%);\n\ttransform:translateY(-50%);\n}\n.weui-half-screen-dialog__hd__side {\n\tposition: absolute;\n\tright: -45rpx;\n  top: 0;\n  width: 100rpx;\n  height: 100rpx;\n}\n.weui-half-screen-dialog__hd__main {\n\tflex:1;\n}\n.weui-half-screen-dialog__hd__side+.weui-half-screen-dialog__hd__main {\n\ttext-align:center;\n\tpadding:0 40rpx;\n}\n\n.weui-half-screen-dialog__hd__main+.weui-half-screen-dialog__hd__side .weui-icon-btn {\n\tright:50%;\n}\n.weui-half-screen-dialog__title {\n\tdisplay:block;\n\tfont-family:PingFangSC-Medium,PingFang SC;\n  font-weight:500;\n  color:rgba(51,51,51,1);\n\tfont-size: 32rpx;\n\ttext-align: center;\n}\n.weui-half-screen-dialog__bd {\n  /* height: 500rpx; */\n\toverflow-y:auto;\n  padding:0 24rpx;\n}\n.weui-icon-btn {\n\tbackground-color:transparent;\n\tbackground-repeat:no-repeat;\n\tbackground-position:50% 50%;\n\tbackground-size:100%;\n\tborder:0;\n\toutline:0;\n\tfont-size:0;\n}\n.weui-icon-btn_close {\n\twidth: 38rpx;\n\theight: 38rpx;\n}\n.weui-icon-btn_close image{\n  width: 100%;\n\theight: 100%;\n\tdisplay: block;\n}\n.weui-mask {\n\tposition:fixed;\n\tz-index:1000;\n\ttop:0;\n\tright:0;\n\tleft:0;\n\tbottom:0;\n\tbackground:rgba(0,0,0,0.5);\n}\n.weui-mask_transparent {\n\tposition:fixed;\n\tz-index:1000;\n\ttop:0;\n\tright:0;\n\tleft:0;\n\tbottom:0;\n}\n.weui-mask,.weui-half-screen-dialog {\n\ttransition:all .3s\n}\n.weui-hidden .weui-mask {\n\tvisibility:hidden;\n\topacity:0;\n}\n.weui-hidden .weui-half-screen-dialog {\n\ttransform:translateY(100%)\n}\n.weui-show .weui-mask {\n\topacity:1;\n\tvisibility:visible;\n}\n.weui-show .weui-half-screen-dialog {\n\ttransform:translateY(0%);\n}\n/* 1号项目新增弹框 */\n.type2_box{\n  top: 20%;\n  width: 600rpx;\n  height: auto;\n  left: calc(50% - 300rpx);\n  border-radius: 14rpx;\n  background-color: #FFFFFF;\n  overflow: hidden;\n  position: fixed;\n  z-index: 99999;\n}\n.type2_box_title{\n  font-size: 30rpx;\n  color: #111334;\n  text-align: center;\n  padding-top: 30rpx;\n\tpadding-bottom: 30rpx;\n\tfont-weight: bold;\n}\n.type2_box_slot{\n  padding-left: 30rpx;\n  padding-right: 30rpx;\n  padding-bottom: 30rpx;\n\tfont-size: 28rpx;\n\twhite-space:pre-wrap;\n\tline-height: 40rpx;\n}\n\n.type2_box_slot view {\n\tmax-height: 750rpx;\n\toverflow: scroll;\n}\n\n.type2_box_btnText{\n  width: 100%;\n  height: 86rpx;\n  color: #00b955;\n  line-height: 86rpx;\n  text-align: center;\n  border-top:1px solid #eeeeee;\n\tfont-size: 30rpx;\n}\n/* 限制弹窗高度 */\n.show-limit-height{\n  overflow:auto;\n  max-height: 996rpx;\n  border-top-left-radius: 20rpx;\n  border-top-right-radius: 20rpx;\n}\n.show-limit-height .weui-half-screen-dialog__hd__box_line{\n  max-height: 900rpx;\n}\n"},"convertDir/component/hospitalList/hospitalList":{"js":"// component/medList/medList.js\nconst app = getApp();\nimport {\n  cdnStaticResourceUrl,\n  open_wechatMap\n} from \"../../utils/util\";\n\nexport default {\n  onShow: function() {\n    // 页面被展示\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    lists:Object,\n    pageFrom: String,\n    //true：首页横向滑动布局  false：列表布局\n    type:Boolean\n  },\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      lists: {},\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    onShow() {\n      console.log('onShow监听小程序显示');\n    },\n    // 点击医院\n    nearbyDrugstoreBtn(e) {\n      console.log(this.properties)\n      if (this.properties.pageFrom == 'hospitalIndex') {\n        getApp().globalData.burySpotSDK.track(`action_hospitalHome_hospitalClick-${e.currentTarget.dataset.id}`);\n      }\n      Taro.navigateTo({\n        url: `/pages/hospital/hospitalDetails/hospitalDetails?id=${e.currentTarget.dataset.id}`\n      })\n    },\n    //导航到药店\n    openMap: function (e) {\n      let data = e.currentTarget.dataset.item;\n      console.log(data)\n      open_wechatMap(data.latitude, data.longitude, data.drugstore_name, data.address);\n    },\n  }\n};\n","json":{},"wxml":"\n  <view class=\"hospitalList-auto-container\">\n    <view class=\"nearbyHospital-list\" :data-id=\"item.id\" bindtap=\"nearbyDrugstoreBtn\" v-for=\"(item, key) in lists\" :key=\"key\">  \n      <image mode=\"aspectFit\" :src=\"item.logo ? item.logo : '../../images/hospital-logo-new.png' \"></image>\n      <view class=\"nearbyDrugstore-list-right\">  \n        <view class=\"nl-right-title\">{{item.hospitalName}}\n        </view>\n        <block>  \n          <view class=\"nl-right-icon first\" v-if=\"item.levelName\">{{item.levelName}}\n          </view>\n          <view class=\"nl-right-icon\" v-if=\"item.typeName\">{{item.typeName}}\n          </view>\n          <view class=\"nl-right-icon\" v-if=\"item.ownerName\">{{item.ownerName}}\n          </view>\n        </block>\n        <view class=\"blue-tag\" v-if=\"item.addressList.length\">{{item.addressList[0]}}\n        </view>\n      </view>\n      <view class=\"nl-right-km\" catchtap=\"openMap\" :data-item=\" item \" v-if=\"item.distance\"> \n        <image mode=\"widthFix\" class=\"nl-right-km-icon\" src=\"../../images/index-fj-yd.png\"></image>\n        <text>{{item.distance}}\n        </text>\n      </view>\n    </view>\n  </view>","wxss":"\n/* 医院列表 */\n.wrap{\n  /* margin-bottom:20rpx; */\n}\n\n.nearbyDrugstore-title-left {\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n  padding: 0;\n}\n.nearbyDrugstore-title-right {\n  font-size: 28rpx;\n  color: #999;\n  margin-top: 5rpx;\n  position: relative;\n  padding: 10rpx 30rpx;\n}\n\n.nearbyHospital-list {\n  display: flex;\n  padding: 30rpx 24rpx;\n  position: relative;\n  margin-bottom:20rpx;\n  background-color: #fff;\n  border-radius: 12rpx;\n}\n\n.nearbyHospital-list image {\n  width: 110rpx;\n  height: 110rpx;\n  display: block;\n  border-radius: 50%;\n}\n\n.nearbyDrugstore-list-right {\n  width: 401rpx;\n  /* calc(100% - 236rpx); */\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  /* width: 70%; */\n  font-size: 30rpx;\n  color: #333;\n  font-weight: 500;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-icon.first{\n  color: #ffffff;\n  background: #00b955;\n}\n.nl-right-icon {\n  display: inline-block;\n  height: 28rpx;\n  margin-top: 12rpx;\n  margin-right: 18rpx;\n  line-height: 28rpx;\n  padding: 0 8rpx;\n  background:#f6f8fd;\n  border-radius: 4rpx;\n  font-size: 20rpx;\n  color: #666883;\n}\n\n.blue-tag {\n  color: #666883;\n  border: 0;\n  font-size: 24rpx;\n  line-height:33rpx;\n  height:33rpx;\n  margin-top:13rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n}\n\n.nl-right-icon image {\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 5rpx;\n  width: 10rpx;\n  height: 16rpx;\n  position: relative;\n  margin-top: -6rpx;\n}\n\n.nl-right-flag text {\n  display: inline-block;\n  color: #666883;\n  font-size: 22rpx;\n  padding: 1rpx 8rpx;\n  margin-right: 12rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  border-radius: 8rpx;\n  background-color: #F6F8FD;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 20rpx;\n  color: #666883;\n  position: absolute;\n  font-weight: 400;\n  bottom: 30rpx;\n  right: 24rpx;\n  display: flex;\n  align-items: center;\n}\n\n.nearbyHospital-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}"},"convertDir/component/imTabBar/tabBar":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    active: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data: function() {\n    return {\n      tabbarHeight: null\n    };\n  },\n  lifetimes: {\n    attached() {\n      \n    }\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n\n  }\n};\n","json":{},"wxml":"\n  <view class=\"tabBar-auto-container\">\n    <view class=\"im-tab-bar-container\">        \n      <view></view>\n      <view :class=\"[im-tab-bar-item,( active === '1'?'active':'' )]\">医生助理\n      </view>\n      <image mode=\"widthFix\" class=\"im-icon-right-tab-bar\" src=\"../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im-tab-bar-item,( active === '2'?'active':'' )]\">医生咨询\n      </view>\n      <image mode=\"widthFix\" class=\"im-icon-right-tab-bar\" src=\"../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im-tab-bar-item,( active === '3'?'active':'' )]\">咨询建议\n      </view>\n      <image mode=\"widthFix\" class=\"im-icon-right-tab-bar\" src=\"../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im-tab-bar-item,( active === '4'?'active':'' )]\">咨询评价\n      </view>\n      <view></view>\n    </view>\n  </view>","wxss":".im-tab-bar-container {\n  /* position: fixed; */\n  /* left: 0; */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 72rpx;\n  background-color: #FFFFFF;\n}\n\n.im-tab-bar-item {\n  font-size: 28rpx;\n  color: #999999;\n}\n\n.im-tab-bar-item.active {\n  color: #00b955;\n}\n\n.im-icon-right-tab-bar {\n  width: 20rpx;\n  height: 20rpx;\n}"},"convertDir/component/index-list/index-list":{"js":"const throttle = function throttle(func, wait, options) {\n  let context = void 0;\n  let args = void 0;\n  let result = void 0;\n  let timeout = null;\n  let previous = 0;\n  if (!options) options = {};\n  const later = function later() {\n      previous = options.leading === false ? 0 : Date.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n  };\n  return function () {\n      const now = Date.now();\n      if (!previous && options.leading === false) previous = now;\n      const remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n          clearTimeout(timeout);\n          timeout = null;\n          previous = now;\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n          timeout = setTimeout(later, remaining);\n      }\n      return result;\n  };\n};\n\nexport default {\n    behaviors: [],\n\n    options: {\n      addGlobalClass: true,\n      pureDataPattern: /^_/\n    },\n\n    props: {\n      list: {\n          type: Array,\n          default: []\n      },\n      vibrated: {\n          type: Boolean,\n          default: true\n      }\n    },\n\n    data: function() {\n        return {\n          windowHeight: 612,\n          current: 'A',\n          intoView: '',\n          touching: false,\n          alphabet: [],\n          _tops: [],\n          _anchorItemH: 0,\n          _anchorItemW: 0,\n          _anchorTop: 0,\n          _listUpperBound: 0\n        };\n    },\n\n    lifetimes: {\n      created() {\n\n      },\n      attached() {\n        this.__scrollTo = throttle(this._scrollTo, 100, {});\n        this.__onScroll = throttle(this._onScroll, 100, {});\n\n        const _wx$getSystemInfoSync = Taro.getSystemInfoSync(), windowHeight = _wx$getSystemInfoSync.windowHeight;\n\n        this.setData({ windowHeight: windowHeight });\n      },\n    },\n\n    methods: {\n      choose(e) {\n        const item = e.target.dataset.item;\n        this.triggerEvent('choose', { item: item });\n      },\n      scrollTo(e) {\n        console.log(e)\n        this.__scrollTo(e);\n      },\n      _scrollTo(e) {\n        const data = this.data;\n        const clientY = e.changedTouches[0].clientY;\n        const index = Math.floor((clientY - data._anchorTop) / data._anchorItemH);\n        const current = data.alphabet[index];\n        this.setData({ current: current, intoView: current, touching: true });\n        if (data.vibrated) Taro.vibrateShort();\n      },\n      computedSize() {\n        const data = this.data;\n        const query = this.createSelectorQuery();\n        query.selectAll('.city_list_item').boundingClientRect(function (rects) {\n            const result = rects;\n            data._tops = result.map(function (item) {\n                return item.top;\n            });\n        }).exec();\n        query.select('.anchor-list').boundingClientRect(function (rect) {\n            data._anchorItemH = rect.height / data.alphabet.length;\n            data._anchorItemW = rect.width;\n            data._anchorTop = rect.top;\n        }).exec();\n        query.select('.page-select-city').boundingClientRect(function (rect) {\n            data._listUpperBound = rect.top;\n        });\n      },\n      removeTouching: function removeTouching() {\n        const _this2 = this;\n\n        setTimeout(function () {\n            _this2.setData({ touching: false });\n        }, 150);\n    },\n      onScroll: function onScroll(e) {\n          this.__onScroll(e);\n      },\n      _onScroll: function _onScroll(e) {\n          const data = this.data;\n          const _tops = data._tops, alphabet = data.alphabet;\n\n          const scrollTop = e.detail.scrollTop;\n          let current = '';\n          if (scrollTop < _tops[0]) {\n              current = alphabet[0];\n          } else {\n              for (let i = 0, len = _tops.length; i < len - 1; i++) {\n                  if (scrollTop >= _tops[i] && scrollTop < _tops[i + 1]) {\n                      current = alphabet[i];\n                  }\n              }\n          }\n          if (!current) current = alphabet[alphabet.length - 1];\n          this.setData({ current: current });\n        } \n      },\n\n    watch: {\n        list: function observer(newVal) {\n            const _this = this;\n            if (newVal.length === 0) return;\n            const data = this.data;\n            const alphabet = data.list.map(function (item) {\n                return item.alpha;\n            });\n            this.setData({\n                alphabet: alphabet,\n                current: alphabet[0]\n            }, function () {\n                _this.computedSize();\n            });\n        }\n    }\n};\n","json":{},"wxml":"\n  <view class=\"index-list-auto-container\"> \n    <scroll-view class=\"page page-select-city\" :style=\"{height: windowHeight - 50px,margin-top:50px}\" enable-back-to-top :scroll-into-view=\"intoView\" scroll-y bindscroll=\"onScroll\"> \n      <view>\n        <slot></slot>\n      </view>\n      <view class=\"city_list_item\" v-for=\"(item, alpha) in list\" :key=\"alpha\" :id=\"item.alpha\"> \n        <view class=\"city-group__title font-size-26 tips-color\">{{item.alpha}}\n        </view>\n        <view class=\"city-group__content\">\n          <view class=\"city-group__list\">\n            <block v-for=\"(subItem, name) in item.subItems\" :key=\"name\">\n              <view class=\"city-group__item thin-border-bottom\" hover-class=\"bg-highlight\" :data-item=\"subItem\" bindtap=\"choose\">\n              {{subItem.name}}\n          \n              </view>\n            </block>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n    <view class=\"anchor-bar__wrp wx-flex\" catchtouchstart=\"scrollTo\" catchtouchmove=\"scrollTo\" catchtouchend=\"removeTouching\">\n      <view class=\"anchor-bar wx-flex__item\">\n        <view class=\"anchor-list\">\n          <block v-for=\"alpha in alphabet\" :key=\"alpha\">\n            <view :class=\"[anchor-item,(current == alpha ? ( touching ? 'selected tapped' : 'selected' ): '')]\" :data-alpha=\"alpha\"> \n              <view class=\"anchor-item__inner\">{{alpha}}\n              </view>\n              <view class=\"anchor-item__pop\">{{alpha}}\n              </view>\n            </view>\n          </block>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".wx-flex {\n  display: flex;\n  align-items: center\n}\n\n.wx-flex__item {\n  flex: 1\n}\n\n.thin-border-bottom {\n  position: relative\n}\n\n.thin-border-bottom:after {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  height: 1px;\n  border-bottom: 1px solid #EAEAEA;\n  color: #e5e5e5;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scaleY(.5);\n  transform: scaleY(.5);\n  z-index: 2\n}\n\n.thin-border-top {\n  position: relative\n}\n\n.thin-border-top:after {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  height: 1px;\n  border-bottom: 1px solid #EAEAEA;\n  color: #e5e5e5;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scaleY(.5);\n  transform: scaleY(.5);\n  z-index: 2\n}\n\n.square-tag {\n  color: #9a9a9a;\n  text-align: center;\n  height: 30px;\n  line-height: 30px;\n  box-sizing: border-box;\n  border-radius: 2px;\n  background-color: #f7f7f7;\n  font-size: 24rpx;\n  position: relative\n}\n\n.square-tag:after {\n  content: \"\";\n  width: 200%;\n  height: 200%;\n  border: 1px solid #f7f7f7;\n  transform: scale(.5);\n  transform-origin: 0 0;\n  position: absolute;\n  left: 0;\n  top: 0;\n  box-sizing: border-box;\n  border-radius: 4px\n}\n\n.square-tag.selected {\n  background: rgba(26, 173, 25, 0.1);\n  color: #00b955;\n}\n\n.square-tag.selected:after {\n  border: 1px solid #00b955;\n}\n\n.select-city__hd {\n  padding: 0 30rpx;\n  position: fixed;\n  height: 50px;\n  background-color: #fff;\n  left: 0;\n  right: 0;\n  z-index: 990\n}\n\n.select-city__hd.thin-border-bottom:after {\n  left: 24rpx;\n  right: 24rpx\n}\n\n.current-city__name {\n  display: inline-block;\n  margin-right: 20rpx;\n  margin-left: 12rpx\n}\n\n.city-group_part .city-group__content {\n  padding: 0 30rpx\n}\n\n.city-group_part .city-group__title {\n  padding-bottom: 24rpx\n}\n\n.city-group__title {\n  padding: 24rpx 24rpx 12rpx\n}\n\n.city-group__content {\n  font-size: 0\n}\n\n.square-tag {\n  width: 200rpx;\n  display: inline-block;\n  margin-right: 24rpx;\n  margin-bottom: 24rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  font-size: 30rpx;\n  color: #000;\n  background-color: rgba(0, 0, 0, 0.02);\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis\n}\n\n.city-group__item {\n  padding: 30rpx 24rpx;\n  font-size: 30rpx\n}\n\n.city-group__item.thin-border-bottom:after {\n  left: 24rpx\n}\n\n.city-group_all {\n  padding-bottom: 100rpx\n}\n\n.fixed__top {\n  position: fixed;\n  top: 0\n}\n\n.anchor-bar__wrp {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 60rpx;\n  z-index: 999\n}\n\n.anchor-item {\n  font-size: 0;\n  text-align: center;\n  position: relative\n}\n\n.anchor-item__inner {\n  line-height: 28rpx;\n  height: 28rpx;\n  width: 28rpx;\n  border-radius: 50%;\n  display: inline-block;\n  font-size: 20rpx;\n  margin: 2rpx 0;\n  font-weight: 500\n}\n\n.tapped .anchor-item__pop {\n  display: block\n}\n\n.anchor-item__pop {\n  position: absolute;\n  font-size: 64rpx;\n  width: 100rpx;\n  height: 100rpx;\n  line-height: 100rpx;\n  color: #fff;\n  background-color: #C9C9C9;\n  border-radius: 50%;\n  right: 80rpx;\n  top: 50%;\n  transform: translateY(-50%);\n  display: none\n}\n\n.anchor-item__pop:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  width: 0;\n  height: 0;\n  left: 80rpx;\n  border: 40rpx solid;\n  border-color: transparent transparent transparent #C9C9C9;\n  top: 50%;\n  transform: translateY(-50%)\n}\n\n.anchor-item.selected .anchor-item__inner {\n  color: #fff;\n  background-color: #00b955;\n}\n"},"convertDir/component/inquiryHome/inquiryHome":{"js":"import {\n  ajax,\n  url,\n  cdnStaticResourceUrl, ajax2\n} from '../../utils/util';\nconst app = getApp();\nconst apiUrl = {\n  inquiringPrice: 'api/extremeInterrogation/inquiringPrice/V2' // 获取极速问诊卡面\n}\n\nexport default {\n  // 组件所在页面的生命周期函数\n  onHide: function () {\n  },\n\n  onShow:function () {\n  },\n\n  lifetimes:{\n    created() {\n    },\n    attached() {\n      let query = Taro.createSelectorQuery().in(this);\n      query.select('.inquiry-tab').boundingClientRect((target) => {\n        console.log('.....', target.height)\n        this.setData({\n          topHeight: target.height + app.globalData.navBarHeight\n        })\n      }).exec()\n      this.setData({\n        source: getApp().globalData.publicDomain,\n        drugStoreTitle: this.properties.drugStore.drugstoreName.length > 7 ? `${this.properties.drugStore.drugstoreName.substr(0, 7)}...` : this.properties.drugStore.drugstoreName\n      })\n      let status = Taro.getStorageSync('guideShow')\n      if (!status) {\n        this.setData({\n          guideShow: true\n        })\n      }\n      Taro.setStorageSync('guideShow', 1);\n      this.getInquiryData()\n    }\n  },\n\n  data: function() {\n    return {\n      // gz_type: false,\n      // drugStore: {},\n      url_link: cdnStaticResourceUrl,\n      navBarHeight: app.globalData.navBarHeight, //自定义导航高度\n      menuFixed: false,\n      topHeight: 0,\n      isDoctorList: true,\n      higherNav: true,//通栏导航\n      guideShow: false, // 控制引导页\n      publicDomain: app.globalData.publicDomain,\n      closeStatus: false,\n      drugStoreTitle: '',\n      source: '' // 1公域 0私域\n    };\n  },\n\n  props: {\n    drugStore: {\n      type: Object,\n      default: {},\n    },\n    organSign:{\n      type: String,\n      default: ''\n    },\n    gz_type: {\n      type: Boolean,\n      default: false\n    },\n    famousDoctorConfigStatus:{\n      type: Number,\n      default: ''\n    }, // 名医  0：开启  1：关闭\n    speedConfigStatus:{\n      type: Number,\n      default: ''\n    }, // 极速  0：开启  1：关闭\n    canInquiry:{\n      type: Number,\n      default: ''\n    }  // 复诊  1：开启  0：关闭\n  },\n\n  methods: {\n    pageScrolltolower(){\n      this.selectComponent('#famousDoctor').onBottom();\n    },\n    pageScroll(e){\n      this.setData({\n        closeStatus: true\n      })\n      // 吸顶滑动高度\n      let top\n      getApp().globalData.publicDomain == 1 ? top = 135:top = 210\n      // 导航条定位\n      if(e.detail.scrollTop >= top) {\n        if (!this.data.menuFixed) {\n          this.setData({\n            menuFixed: true\n          })\n        }\n        if (this.data.higherNav) {\n          this.setData({\n            higherNav: false\n          })\n        }\n      }else {\n        if (this.data.menuFixed) {\n          this.setData({\n            menuFixed: false\n          })\n        }\n        if (!this.data.higherNav) {\n          this.setData({\n            higherNav: true\n          })\n        }\n      }\n    },\n    // 跳转扫码补方\n    toScanInquiry(){\n      getApp().globalData.burySpotSDK.track('toScanAddInfoPage');\n      Taro.navigateTo({\n        url: `/pages/scan/pages/addInformation/addInformation?scene=${this.properties.organSign}`\n      })\n    },\n    // 跳转极速问诊\n    // toInquiry() {\n    //   getApp().globalData.burySpotSDK.track('toGuidancePage');\n    //   getApp().globalData.inquiryChannel = 2;\n    //   if(getApp().globalData.sess_key){\n    //     Taro.navigateTo({\n    //       url: `/pages/inquiry/guidance/guidance?isHideBtn=1&drugstoreId=${this.properties.drugStore.lzId}`\n    //     })\n    //   } else {\n    //     let url = encodeURIComponent(`/pages/inquiry/guidance/guidance?isHideBtn=1&drugstoreId=${this.properties.drugStore.lzId}`)\n    //     Taro.navigateTo({\n    //       url: '/pages/note/login/login?backUrl='+ url\n    //     })\n    //   }\n    // },\n    /**\n     * @description: 获取问诊卡片\n     * @return: void\n     */\n    getInquiryData() {\n      ajax('POST', apiUrl.inquiringPrice, {\n        thirdChannel: 2 //渠道code 1:平台 2 药店 3 保险 4 您健康\n      }, res=> {\n        if (res.data.code == 0) {\n          this.setData({\n            inquiryData: res.data.result\n          })\n        }else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    },\n    /**\n     * @description: 关注\n     * @return: void\n     */\n    handleFollow(){\n      if (!getApp().globalData.sess_key) {\n        Taro.navigateTo({\n          url: '/pages/note/login/login',\n        })\n      }else{\n        if (this.properties.gz_type) {\n          Taro.showToast({\n            title: '已取消，将无法在[我的→我关注的店铺]中找到我',\n            icon: 'none'\n          })\n          this.setData({\n            gz_type: false,\n            [\"drugStore.attentionUserCount\"]: this.properties.drugStore.attentionUserCount-1\n          })\n          this.getFollow(0);\n        } else {\n          Taro.showToast({\n            title: '已关注，您可在[我的→我关注的店铺]中找到我',\n            icon: 'none'\n          })\n          this.setData({\n            gz_type: true,\n            [\"drugStore.attentionUserCount\"]: this.properties.drugStore.attentionUserCount+1\n          })\n          this.getFollow(1);\n        }\n      }\n    },\n    getFollow(type){\n      ajax('post', 'miniapp/miniappDrugstore/drugstoreAttention', {\n        drugstoreId: this.data.drugStore.id,\n        status:type // 0：取消关注   1：关注\n      }, res => {\n        console.log(res);\n      })\n    },\n    // 关闭引导\n    closeGuide(){\n      this.setData({\n        guideShow: false\n      })\n    }\n  }\n};","json":{"famous-doctors-list":"/component/famousDoctorsList/famousDoctorsList","my-tools":"/component/myTools/myTools"},"wxml":"\n  <view class=\"inquiryHome-auto-container\">  \n    <navBar higherNav=\"true\" :background=\" higherNav ? 'none' : '#FFFFFF' \" :titleText=\" higherNav ? '':drugStoreTitle\" titleColor=\"#000000\" :showCapsule=\" false \"></navBar>\n    <scroll-view :scroll-y=\"true\" :style=\"{isDoctorList? 'height: 100vh,': ''}\" bindscroll=\"pageScroll\" bindscrolltolower=\"pageScrolltolower\">  \n      <view class=\"inquiry-home\" :style=\"{menuFixed? 'margin-top:110rpx': ''}\">  \n        <view class=\"inquiry-home-header\">   \n          <view class=\"inquiry-home-header-mb\"></view>\n          <image :src=\" drugStore.doorheadPhoto ? drugStore.doorheadPhoto : url_link + 'images/drug_store_header.png' \"></image>\n          <view :class=\"[attention,( gz_type ? 'gray' : '' )]\" catchtap=\"handleFollow\"> \n            <image src=\"../../images/attention.png\" v-if=\" !gz_type \"></image>\n            <text>{{gz_type?'已关注':'关注'}}\n            </text>\n          </view>\n          <view class=\"card\"> \n            <view class=\"card-left\"> \n              <view class=\"name\">{{drugStore.drugstoreName}}\n              </view>\n              <view class=\"address\">{{drugStore.address}}\n              </view>\n            </view>\n            <view class=\"card-right\"> \n              <view v-if=\" drugStore.brandId > 0 \" class=\"tag\">连锁\n              </view>\n              <image :src=\" drugStore.doorheadPhoto ? drugStore.doorheadPhoto : url_link + 'images/drug_store_header.png' \"></image>\n            </view>\n          </view>\n        </view>\n        <view class=\"inquiry-again\" v-if=\" !source \" bindtap=\"toScanInquiry\">  \n          <view class=\"inquiry-again-left\">\n            <image src=\"../../images/icon-inquiry-again.png\"></image>\n          </view>\n          <view class=\"inquiry-again-center\"> \n            <view class=\"title\">问医生 复诊开方\n            </view>\n            <view class=\"text\">3万+医生 3秒接通\n            </view>\n          </view>\n          <view class=\"inquiry-again-btn\">\n                免费咨询\n            \n          </view>\n        </view>\n        <view class=\"inquiry-tab\" :style=\"{menuFixed?'position: fixed,z-index: 150,':'',top: navBarHeightpx}\">\n          <view>精选名医\n          </view>\n        </view>\n      </view>\n      <my-tools v-if=\"!source\" :closeStatus=\"closeStatus\"></my-tools>\n      <famous-doctors-list id=\"famousDoctor\" :drugStore=\"drugStore\" :famousDoctorConfigStatus=\"famousDoctorConfigStatus\" :speedConfigStatus=\"speedConfigStatus\" :tabTop=\"topHeight\" v-if=\"isDoctorList\" :adsorbentTop=\"menuFixed ? true : false\"></famous-doctors-list>\n    </scroll-view>\n    <view class=\"guide-page\" v-if=\"guideShow\"> \n      <image class=\"icon-guide\" :src=\" url_link + 'images/icon-guide.png' \"></image>\n      <view class=\"guide-btn\" bindtap=\"closeGuide\">\n        知道了\n    \n      </view>\n    </view>\n  </view>","wxss":".inquiry-home{\n    background: #fff;\n    /*padding-bottom: 15rpx;*/\n}\n.inquiry-home-header{\n    position: relative;\n    margin-bottom: 85rpx;\n}\n.inquiry-home-header >image{\n    width: 750rpx;\n    height: 340rpx;\n}\n.attention{\n    width: 136rpx;\n    height: 60rpx;\n    line-height: 50rpx;\n    display: flex;\n    align-items: center;\n    border: 1rpx solid #FFFFFF;\n    border-radius: 30rpx;\n    padding: 0 14rpx;\n    box-sizing: border-box;\n    position: absolute;\n    top: 180rpx;\n    right: 24rpx;\n    z-index: 10;\n}\n.attention image{\n    width: 36rpx;\n    height: 36rpx;\n    margin-right: 12rpx;\n}\n.attention text{\n    font-size: 24rpx;\n    color: #ffffff;\n}\n.gray {\n    opacity: 0.5;\n    display: inline-block;\n    text-align: center;\n}\n.inquiry-home-header .card{\n    width: 654rpx;\n    height: 100rpx;\n    background: #fefffe;\n    border-radius: 12rpx;\n    position: absolute;\n    top: 260rpx;\n    left: 24rpx;\n    z-index: 10;\n    box-shadow: 0rpx 12rpx 20rpx 0rpx rgba(48,48,60,0.04);\n    display: flex;\n    padding: 24rpx;\n}\n.card-left{\n    flex: 1;\n}\n.card-left .name{\n    font-size: 40rpx;\n    font-weight: 700;\n    color: #111334;\n    margin-bottom: 10rpx;\n    width: 530rpx;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n.card-left .address{\n    font-size: 24rpx;\n    color: #41465d;\n    width: 530rpx;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n.card-right{\n    position: relative;\n}\n.card-right >image{\n    width: 100rpx;\n    height: 100rpx;\n    border-radius: 10rpx;\n}\n.card-right .tag{\n    width: 60rpx;\n    height: 32rpx;\n    line-height: 32rpx;\n    text-align: center;\n    background: #00b955;\n    border-radius: 4rpx;\n    position: absolute;\n    top: -10rpx;\n    left: -10rpx;\n    font-size: 22rpx;\n    color: #fff;\n}\n.inquiry-again{\n    width: 654rpx;\n    height: 130rpx;\n    background: #fefffe;\n    border: 1rpx solid #eeeeee;\n    border-radius: 13rpx;\n    margin-left: 24rpx;\n    margin-bottom: 20rpx;\n    display: flex;\n    align-items: center;\n    padding: 0 24rpx;\n}\n.inquiry-again-left >image{\n    width: 152rpx;\n    height: 132rpx;\n}\n.inquiry-again-center{\n    flex: 1;\n}\n.inquiry-again-center .title{\n    font-size: 32rpx;\n    color: #111334;\n    font-weight: 700;\n    margin-bottom: 10rpx;\n}\n.inquiry-again-center .text{\n    font-size: 26rpx;\n    color: #666883;\n}\n.inquiry-again-btn{\n    width: 152rpx;\n    height: 48rpx;\n    line-height: 48rpx;\n    text-align: center;\n    background: #00b955;\n    border-radius: 24rpx;\n    font-size: 26rpx;\n    color: #fff;\n    font-weight: 700;\n}\n.inquiry-tab{\n    width: 702rpx;\n    background: #fff;\n    height: 80rpx;\n    line-height: 80rpx;\n    padding: 0 24rpx;\n    font-size: 32rpx;\n    font-weight: 700;\n    color: #111334;\n    padding-bottom: 10rpx;\n}\n.inquiry-tab >view{\n    display: inline-block;\n    padding: 0 10rpx;\n    border-bottom: 6rpx solid #00b955;\n}\n\n/*极速问诊卡面*/\n.js-inquiry {\n    background: #ffffff;\n    border-radius: 13rpx;\n    border: 1rpx solid #e2e3ea;\n    display: flex;\n    padding: 23rpx;\n    position: relative;\n    margin: 15rpx 24rpx 0rpx 24rpx;\n}\n.js-inquiry >image{\n    width: 100rpx;\n    height: 100rpx;\n    margin-right: 31rpx;\n}\n.js-inquiry-center .title{\n    font-size: 32rpx;\n    color: #111334;\n    margin-bottom: 13rpx;\n    font-weight: 700;\n}\n.js-inquiry-center .text{\n    font-size: 24rpx;\n    color: #666883;\n    margin-bottom: 22rpx;\n}\n\n.js-inquiry-center .price >text:first-child{\n    font-size: 30rpx;\n    color: #ff2121;\n    margin-right: 8rpx;\n}\n.js-inquiry-center .price >text:nth-child(2){\n    font-size: 20rpx;\n    color: #9aa0b5;\n    text-decoration: line-through;\n}\n.js-inquiry-btn{\n    position: absolute;\n    z-index: 10;\n    bottom: 16rpx;\n    right: 24rpx;\n    width: 152rpx;\n    height: 48rpx;\n    line-height: 44rpx;\n    border: 2rpx solid #00b955;\n    border-radius: 26rpx;\n    color: #00b955;\n    font-weight: 700;\n    font-size: 26rpx;\n    text-align: center;\n}\n.guide-page{\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 200;\n    background: rgba(0,0,0,.7);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.guide-btn{\n    width: 220rpx;\n    height: 80rpx;\n    line-height: 80rpx;\n    border: 2rpx solid #ffffff;\n    border-radius: 46rpx;\n    font-size: 32rpx;\n    color: #fff;\n    text-align: center;\n    position: absolute;\n    bottom: 99rpx;\n    left: 265rpx;\n}\n\n.icon-guide{\n    width: 702rpx;\n    height: 765rpx;\n}\n.inquiry-home-header-mb{\n    position: absolute;\n    width: 750rpx;\n    height: 340rpx;\n    background: rgba(0,0,0,.5);\n    z-index: 10;\n}"},"convertDir/component/interrogationTime/interrogationTime":{"js":"export default {\n  options: {\n    multipleSlots: true // 在组件定义时的选项中启用多slot支持\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    routeType: {\n      type: String,\n      default: 1,\n    },\n    timer: {\n      type: Boolean,\n      default: false,\n    },\n    timeType: {\n      type: null,\n      default: true\n    },\n    time:{\n      type: String,\n      default: 0\n    }\n    \n  },\n\n  data: function() {\n    return {\n      time_text:'',//转换成功后的文本\n      time_s:'',//秒数\n      interval:''\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    time(value){/**获取秒数转时分秒 */\n      let that = this;\n      let secondTime = parseInt(value);// 秒\n      let minuteTime = 0;// 分\n      let hourTime = 0;// 小时\n      if (secondTime > 60) {//如果秒数大于60，将秒数转换成整数\n        //获取分钟，除以60取整数，得到整数分钟\n        minuteTime = parseInt(secondTime / 60);\n        //获取秒数，秒数取佘，得到整数秒数\n        secondTime = parseInt(secondTime % 60);\n        //如果分钟大于60，将分钟转换成小时\n        if (minuteTime > 60) {\n          //获取小时，获取分钟除以60，得到整数小时\n          hourTime = parseInt(minuteTime / 60);\n          //获取小时后取佘的分，获取分钟除以60取佘的分\n          minuteTime = parseInt(minuteTime % 60);\n        }\n      }\n      let result = \"\" + parseInt(secondTime) + \"秒\";\n\n      if (minuteTime > 0) {\n        result = \"\" + parseInt(minuteTime) + \"分\" + result;\n      }else{\n        result = \"\" + parseInt(minuteTime) + \"分\" + result;\n      }\n      if (hourTime > 0) {\n        result = \"\" + parseInt(hourTime) + \"小时\" + result;\n      }else{\n        result = \"0\" + \"小时\" + result;\n      }\n      // console.log(this.data.timeType);\n      // console.log(result);\n      this.setData({\n        time_text: result\n      })\n      if (this.data.time_s <= 0 && !this.data.timer) {\n        setTimeout(function(){\n          that.triggerEvent(\"updataList\");\n        },2000)\n        clearInterval(this.data.interval);\n      }\n      if (this.data.time_s >= 1800 && this.data.timer) {\n        setTimeout(function () {\n          that.triggerEvent(\"updataList\");\n        }, 2000)\n        clearInterval(this.data.interval);\n      }\n    },\n    time2(value) {/**获取秒数转时分秒 */\n      let that = this;\n      let secondTime = parseInt(value);// 秒\n      let minuteTime = 0;// 分\n      let hourTime = 0;// 小时\n      if (secondTime > 60) {//如果秒数大于60，将秒数转换成整数\n        //获取分钟，除以60取整数，得到整数分钟\n        minuteTime = parseInt(secondTime / 60);\n        //获取秒数，秒数取佘，得到整数秒数\n        secondTime = parseInt(secondTime % 60);\n        //如果分钟大于60，将分钟转换成小时\n        if (minuteTime > 60) {\n          //获取小时，获取分钟除以60，得到整数小时\n          hourTime = parseInt(minuteTime / 60);\n          //获取小时后取佘的分，获取分钟除以60取佘的分\n          minuteTime = parseInt(minuteTime % 60);\n        }\n      }\n      let result = \"\" + parseInt(secondTime) + \"秒\";\n\n      if (minuteTime > 0) {\n        result = \"\" + parseInt(minuteTime) + \"分\" + result;\n      } else {\n        result = \"\" + parseInt(minuteTime) + \"分\" + result;\n      }\n      if (hourTime > 0) {\n        result = \"\" + parseInt(hourTime) + \"小时\" + result;\n      }\n      // console.log(this.data.timeType);\n      // console.log(result);\n      this.setData({\n        time_text: result\n      })\n      if (this.data.time_s <= 0 && !this.data.timer) {\n        setTimeout(function () {\n          that.triggerEvent(\"updataList\");\n        }, 2000)\n        clearInterval(this.data.interval);\n      }\n      if (this.data.time_s >= 1800 && this.data.timer) {\n        setTimeout(function () {\n          that.triggerEvent(\"updataList\");\n        }, 2000)\n        clearInterval(this.data.interval);\n      }\n    }\n  },\n\n  watch: {\n    timeType: function (newVal, oldVal) {\n      let that = this;\n      // 如果阀门为false  则关闭定时器（关闭页面或者跳出页面就停止interval）\n      console.log(!newVal)\n      if (!newVal) {\n        clearInterval(that.data.interval);\n      }\n    },\n\n    time: function (newVal, oldVal) {\n      let newTime = parseInt(newVal);\n      newTime = parseInt(parseInt(newVal)/1000);\n      if (newVal == 0 || newVal == '') {\n        if (!this.data.timer){\n          clearInterval(interval);\n          return false;\n        }\n      }\n      this.data.time_s = newTime\n      // 拿到秒数后转时分秒\n      if (this.data.routeType == 1){\n        this.time(newTime)\n      }else{\n        this.time2(newTime)\n      }\n      // 执行定时器\n      let interval = setInterval(()=>{\n        // 判断是递增还是递减（默认递减）\n        if (this.data.timer){\n          ++this.data.time_s\n        }else{\n          --this.data.time_s\n        }\n        // 如果为阀门为false就不执行倒计时\n        if (!this.data.timeType) {\n          clearInterval(interval);\n          return false;\n        }\n        \n        // console.log(that.data.time_s);\n        if (this.data.routeType == 1){\n          this.time(this.data.time_s)\n        }else{\n          this.time2(this.data.time_s)\n        }\n        this.data.interval = interval\n      },1000)\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"interrogationTime-auto-container\">\n    <slot name=\"before\"></slot>\n    <text>{{time_text}}\n    </text>\n  </view>","wxss":"/* component/interrogationTime/interrogationTime.wxss */"},"convertDir/component/loginPhone/loginPhone":{"js":"import {\n  url,\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\nconst app = getApp();\n\nexport default {\n  props: {\n    // 这里定义了innerText属性，属性值可以在组件使用时指定\n    innerText: {\n      type: String,\n      default: 'default value',\n    }\n  },\n  data: function() {\n    return {\n      authorize: false,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  methods: {\n    toLoginPhone(){\n      this.triggerEvent(\"action\");\n      Taro.navigateTo({\n        url: '/pages/note/logonPhone/logonPhone'\n      });\n    },\n    getPhoneNumber(e) {\n      console.log(e.detail.errMsg)\n      console.log(e.detail.iv)\n      console.log(e.detail.encryptedData)\n    }\n  }\n};","json":{},"wxml":"\n  <view class=\"loginPhone-auto-container\">\n    <view class=\"login_phone\"> \n      <view class=\"black_bg\"></view>\n      <view class=\"alert_box\">\n        <block>  \n          <image :src=\"''+url_link+'images/logonPhone.png'\"></image>\n          <view class=\"text\">为了更好的为您提供服务，该功能需要使用您的手机号\n          </view>\n          <button class=\"button\" bindtap=\"toLoginPhone\">自行绑定手机号\n          </button>\n        </block>\n      </view>\n    </view>\n  </view>","wxss":"/* component/login_phone/login_phone.wxss */\n.login_phone {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n}\n.login_phone .black_bg {\n  background: #000;\n  opacity: 0.5;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.login_phone .alert_box {\n  position: fixed;\n  top: 30%;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: 500rpx;\n  min-height: 300rpx;\n  background: #FFFFFF;\n  border-radius: 16rpx;\n  font-size: 30rpx;\n  padding-bottom: 10rpx;\n}\n.login_phone .alert_box image {\n  width: 100%;\n  height: 190rpx;\n  margin-top: -80rpx;\n}\n.login_phone .alert_box .text {\n  /* margin: 54rpx 80rpx 36rpx; */\n  margin: 80rpx 80rpx 70rpx;\n}\n.login_phone .alert_box .button {\n  width: 330rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  border-radius: 40rpx;\n  background: #e4393b;\n  color: #FFFFFF;\n  text-align: center;\n  margin: 0 auto 20rpx;\n}"},"convertDir/component/medList/medList":{"js":"// component/medList/medList.js\nconst app = getApp();\nimport {\n  cdnStaticResourceUrl,\n  open_wechatMap\n} from \"../../utils/util\";\n\nexport default {\n  onShow: function() {\n    // 页面被展示\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    lists:Object,\n    pageFrom: String,\n    //true：首页横向滑动布局  false：列表布局\n    type:Boolean\n  },\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      lists: {},\n      cdnLink: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    onShow() {\n      console.log('onShow监听小程序显示');\n    },\n    // 点击药店\n    nearbyDrugstoreBtn(e) {\n      console.log(this.properties)\n      if(this.properties.pageFrom == 'noteIndex') {\n        getApp().globalData.burySpotSDK.track(`sy-fjyd-${e.currentTarget.dataset.id}`);\n      }\n      if(e.currentTarget.dataset.isb2c == 1){\n        Taro.navigateTo({\n          url: `/pages/b2c/pages/pharmacyHomepage/pharmacyHomepage?drugstoreId=${e.currentTarget.dataset.id}`\n        })\n      }else{\n        Taro.navigateTo({\n          url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${e.currentTarget.dataset.id}`\n        })\n      }\n    },\n    //导航到药店\n    openMap: function (e) {\n      let data = e.currentTarget.dataset.item;\n      console.log(data)\n      open_wechatMap(data.latitude, data.longitude, data.drugstore_name, data.address);\n    },\n  }\n};\n","wxml":"\n  <view class=\"medList-auto-container\"> \n    <block v-if=\"type\">\n      <view class=\"nearby-drug-store__list\">\n        <view class=\"nearby-drug-store__cell\" :data-id=\" lists.id \" bindtap=\"nearbyDrugstoreBtn\"> \n          <view class=\"drug-left-photo\"> \n            <image class=\"nearby-drug-store__head-photo\" mode=\"aspectFill\" :src=\" lists.doorheadPhoto ? lists.doorheadPhoto : cdnLink + '/images/drugstore-djk-mr.jpg' \"></image>\n            <view class=\"drug-left-photo-text\">\n              <image src=\"../../images/icon_time.png\"></image>\n              <text>{{lists.businessHours}}\n              </text>\n            </view>\n          </view>\n          <view class=\"nearby-drug-store__cell__center\">    \n            <view class=\"nearby-drug-store__cell_title\">{{ lists.drugstore_name }}\n            </view>\n            <block v-if=\" lists.activities \">\n              <view class=\"nearby-drug-store__cell_active\" v-for=\"(item, index) in  lists.activities \" :key=\"index\">{{ item.label }}\n              </view>\n            </block>\n            <view class=\"nl-right-icon blue-tag\" v-if=\" lists.conditionDeliveryLabel \">{{ lists.conditionDeliveryLabel }}\n            </view>\n            <view class=\"nearby-drug-store__cell_time\">\n              <text v-for=\"(label, key) in  lists.labelList \" :key=\"key\">{{ label }}\n              </text>\n            </view>\n            <view class=\"nearby-drug-store__cell_distance\" catchtap=\"openMap\" :data-item=\" lists \"> \n              <image mode=\"widthFix\" src=\"../../images/index-fj-yd.png\"></image>\n              <text>{{ lists.distance }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </block>\n    <block v-else>\n      <view :class=\"[nearbyDrugstore-list,(pageFrom == 'noteIndex' ? 'sy-fjyd' : '')]\" :data-id=\"item.id\" bindtap=\"nearbyDrugstoreBtn\" v-for=\"(item, key) in lists\" :key=\"key\" :data-nearby_drugstore_id=\"item.id\" :data-isb2c=\"item.isB2c\"> \n        <image :src=\"item.doorheadPhoto?item.doorheadPhoto+'@216x144': cdnLink + '/images/drugstore-mr-new.png' \"></image>\n        <view class=\"nearbyDrugstore-list-right\">    \n          <view class=\"nl-right-title\">{{item.drugstore_name}}\n          </view>\n          <block v-if=\" item.activities \">\n            <view class=\"nl-right-icon\" v-for=\"(item, index) in  item.activities \" :key=\"index\">{{ item.label }}\n            </view>\n          </block>\n          <view class=\"nl-right-icon blue-tag\" v-if=\" item.conditionDeliveryLabel \">{{ item.conditionDeliveryLabel }}\n          </view>\n          <view class=\"nl-right-flag\"> \n            <block v-for=\"(label, label) in  item.labelList \" :key=\"label\">\n              <text class=\"red\" v-if=\"label==='医保在线支付' && isDjk\">{{label}}\n              </text>\n            </block>\n            <block v-for=\"(label, label) in  item.labelList \" :key=\"label\">\n              <text v-if=\"label!=='医保在线支付'\">{{ label }}\n              </text>\n            </block>\n          </view>\n          <view class=\"nl-right-km\" catchtap=\"openMap\" :data-item=\" item \"> \n            <image mode=\"widthFix\" class=\"nl-right-km-icon\" src=\"../../images/index-fj-yd.png\"></image>\n            <text>{{item.distance}}\n            </text>\n          </view>\n        </view>\n      </view>\n    </block>\n  </view>","json":{},"wxss":"\n/* 附近药店 */\n\n.nearbyDrugstore {\n  padding: 0 24rpx 0 24rpx;\n}\n\n.nearbyDrugstore-title {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 20rpx 0 20rpx 0;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n}\n\n.nearbyDrugstore-title-left {\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n  padding: 0;\n}\n\n.nearbyDrugstore-title-right {\n  font-size: 28rpx;\n  color: #999;\n  margin-top: 5rpx;\n  position: relative;\n  padding: 10rpx 30rpx;\n}\n\n.nearbyDrugstore-list {\n  display: flex;\n  padding: 20rpx 0 20rpx;\n  position: relative;\n  border-bottom: 1px solid rgba(245, 245, 245, 1);\n  background-color: #fff;\n}\n.nearbyDrugstore-list:last-child {\n  border: 0;\n}\n\n.nearbyDrugstore-list image {\n  width: 216rpx;\n  height: 144rpx;\n  display: block;\n}\n\n.nearbyDrugstore-list-right {\n  width: calc(100% - 236rpx);\n  margin-left: 20rpx;\n  position: relative;\n}\n\n.nl-right-title {\n  width: 70%;\n  font-size: 30rpx;\n  color: #333;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n/* .nl-right-address {\n  width: 70%;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  line-clamp: 1;\n  -webkit-box-orient: vertical;\n} */\n\n.nl-right-icon {\n  display: inline-block;\n  height: 32rpx;\n  margin-top: 12rpx;\n  margin-right: 10rpx;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n  background:#FFEEEF;\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #F93A4A;\n}\n\n.blue-tag {\n  background: #e8fff3;\n  color: #00b955;\n  border: 0;\n  font-size: 22rpx;\n}\n\n.nl-right-icon image {\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 5rpx;\n  width: 10rpx;\n  height: 16rpx;\n  position: relative;\n  margin-top: -6rpx;\n}\n\n.nl-right-flag text {\n  display: inline-block;\n  color: #666883;\n  font-size: 22rpx;\n  padding: 1rpx 8rpx;\n  margin-right: 12rpx;\n  height: 32rpx;\n  line-height: 32rpx;\n  border-radius: 8rpx;\n  background-color: #F6F8FD;\n}\n\n.ntr-img {\n  position: absolute;\n  right: 0;\n  top: 16rpx;\n  padding-top: 0;\n}\n\n.nl-right-km {\n  font-size: 26rpx;\n  color: #999999;\n  position: absolute;\n  font-weight: 400;\n  top: -20rpx;\n  right: 0rpx;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 10rpx;\n}\n\n.nearbyDrugstore-default {\n  width: 100%;\n  height: 210rpx;\n  background: rgba(250, 250, 250, 1);\n  border-radius: 6px;\n}\n\n.nearbyDrugstore-default-text {\n  font-size: 28rpx;\n  color: rgba(102, 102, 102, 1);\n  width: 90%;\n  margin: 0 auto;\n  padding-top: 40rpx;\n  text-align: center;\n}\n\n.nearbyDrugstore-default-btn {\n  width: 160rpx;\n  height: 60rpx;\n  text-align: center;\n  line-height: 60rpx;\n  border-radius: 30rpx;\n  border: 1px solid rgba(0, 185, 173, 1);\n  color: rgba(0, 185, 173, 1);\n  margin: 0 auto;\n  margin-top: 30rpx;\n}\n\n.scrollbar1 {\n  width: 60rpx;\n  height: 4rpx;\n  background-color: rgba(239, 239, 239, 1);\n  margin: 0 auto;\n  margin-top: 20rpx;\n  border-radius: 6rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.scrollbar1 view {\n  height: 100%;\n  position: absolute;\n  transition: all 0.2s;\n  left: 0;\n  top: 0;\n  background-color: rgba(161, 165, 176, 1);\n}\n\n.nearbyDrugstore-list .nl-right-km-icon {\n  width: 24rpx;\n  height: 24rpx;\n  margin-right: 6rpx;\n}\n/* 附近药店首页布局 */\n.nearby-drug-store__title {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 0 20rpx 0;\n  font-size: 36rpx;\n  color: #333;\n  font-weight: bold;\n}\n\n.nearby-drug-store_more {\n  width: 42rpx;\n  height: 42rpx;\n}\n\n.nearby-drug-store_more image {\n  width: 42rpx;\n  height: 42rpx;\n}\n\n.nearby-drug-store__list {\n  width: 100%;\n  display: flex;\n  /* padding-bottom: 20rpx; */\n  background-color: #FCFCFC;\n}\n\n.nearby-drug-store__cell {\n  flex-shrink: 0;\n  width: 100%;\n  display: flex;\n  border-radius: 8rpx;\n  background: #fff;\n  overflow: hidden;\n  padding-bottom: 20rpx;\n}\n\n.nearby-drug-store__head-photo {\n  width: 182rpx;\n  height: 126rpx;\n  display: block;\n  overflow: hidden;\n  border-radius: 8rpx;\n}\n\n.nearby-drug-store__cell__center{\n  flex: 1;\n  position: relative;\n  padding: 0 24rpx;\n  background-color: #fff;\n}\n\n.nearby-drug-store__cell_title {\n  width: 70%;\n  font-size: 30rpx;\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.nearby-drug-store__cell_time text {\n  font-size: 22rpx;\n  color: #666883;\n  margin-top: 12rpx;\n  margin-right: 12rpx;\n  border-radius: 4rpx;\n  background-color: #F6F8FD;\n  height: 32rpx;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n  display: inline-block;\n}\n.nearby-drug-store__cell_active {\n  display: inline-block;\n  height: 32rpx;\n  margin-top: 12rpx;\n  margin-right: 10rpx;\n  line-height: 32rpx;\n  padding: 0 8rpx;\n  background: rgba(255, 33, 33, 0.05);\n  border-radius: 4rpx;\n  font-size: 22rpx;\n  color: #FF2121;\n}\n\n.nearby-drug-store__cell_distance {\n  font-size: 20rpx;\n  color: #666;\n  position: absolute;\n  top: 0;\n  right: 20rpx;\n  display: flex;\n  align-items: center;\n  height: 28rpx;\n  line-height: 28rpx;\n}\n\n.nearby-drug-store__cell_distance image {\n  position: absolute;\n  left: 0;\n  top: 4rpx;\n  width: 20rpx;\n  height: 19rpx;\n  flex-shrink: 0;\n}\n\n.nearby-drug-store__cell_distance text {\n  padding-left: 28rpx;\n  color: #9D9FB8;\n  font-size: 24rpx;\n}\n.drug-left-photo{\n  height: 126rpx;\n  position: relative;\n  margin-left: 24rpx;\n  border-radius: 8rpx;\n  overflow: hidden;\n  background-color: #fff;\n}\n.drug-left-photo-text{\n  width: 100%;\n  height: 34rpx;\n  line-height: 34rpx;\n  color: #fff;\n  font-size: 20rpx;\n  overflow: hidden;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  text-align: center;\n  background: rgba(17,19,52,0.45);\n  border-radius: 0px 0px 8rpx 8rpx;\n}\n.drug-left-photo-text::after{\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  opacity: 0.5;\n  left: 0;\n  top: 0;\n}\n.drug-left-photo-text text{\n  position: relative;\n  z-index: 2;\n}\n.drug-left-photo-text image{\n  display: inline-block;\n  vertical-align: middle;\n  width: 20rpx;\n  height: 20rpx;\n  position: relative;\n  z-index: 2;\n  margin-right: 10rpx;\n  margin-top: -2rpx;\n}\n.nl-right-flag .red{\n  background: rgba(255,59,48,0.05);\n  border: 1px solid #ff3b30;\n  border-radius: 8rpx;\n  color: #ff3b30;\n  text-align: center;\n}"},"convertDir/component/medicineCard/medicineCard":{"js":"export default {\n  data: function() {\n    return {\n\n    };\n  },\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    inquiryInfo: { // 用药申请卡面信息\n      type: Object,\n      default: {},\n    },\n    code: null, // 调用接口判断状态\n    lastDiagnosis: { // 预购药品信息\n      type: Object,\n      default: {},\n    }\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n  }\n};\n","json":{},"wxml":"\n  <view class=\"medicineCard-auto-container\">\n    <view class=\"im-doctor-helper\">\n      <view class=\"cell_box cell_box_r\"> \n        <view class=\"cell_text\"> \n          <view class=\"name\">{{inquiryInfo.patientName}}\n          </view>\n          <view class=\"apply\"> \n            <view class=\"header\">\n          用药申请\n        \n            </view>\n            <view class=\"main\">          \n              <block v-if=\"inquiryInfo.patientSex\">\n                <view>  \n                  <text>{{inquiryInfo.patientName}}\n                  </text>\n                  <text>{{inquiryInfo.patientSex === 1 ? \"男\" : \"女\"}}\n                  </text>\n                  <text>{{inquiryInfo.patientAge}}\n                  </text>\n                </view>\n              </block>\n              <view> \n                <text class=\"grey\">过往病史\n                </text>\n                <text>{{inquiryInfo.medicalHistory ? inquiryInfo.medicalHistory : '无'}}\n                </text>\n              </view>\n              <view> \n                <text class=\"grey\">药物过敏史\n                </text>\n                <text>{{inquiryInfo.allergySymptom === 1 ? \"无\" : inquiryInfo.allergySymptomExplain}}\n                </text>\n              </view>\n              <view> \n                <text class=\"grey\">用药类型\n                </text>\n                <text>{{inquiryInfo.medicineType === 0 ? \"西药\" : '中药'}}\n                </text>\n              </view>\n              <view v-if=\"inquiryInfo.medicineType==0\">  \n                <text class=\"grey\">预购药品\n                </text>\n                <view class=\"wold_break\" v-for=\"(item, index) in lastDiagnosis.prescriptionDetail\" :key=\"index\">\n              {{lastDiagnosis.prescriptionDetail[index].commonName ? lastDiagnosis.prescriptionDetail[index].commonName + \"x\" + lastDiagnosis.prescriptionDetail[index].quantity + \"，\" : lastDiagnosis.prescriptionDetail[index].productName + \"x\" + lastDiagnosis.prescriptionDetail[index].quantity + \"，\"}}\n            \n                </view>\n                <text v-if=\"lastDiagnosis.prescriptionDetail && lastDiagnosis.prescriptionDetail.length > 0\">\n              共{{lastDiagnosis.prescriptionDetail.length}}种药品\n            \n                </text>\n              </view>\n              <view v-if=\"inquiryInfo.medicineType==1\">  \n                <text class=\"grey\">预购药品\n                </text>\n                <view class=\"wold_break\" v-for=\"(item, index) in lastDiagnosis.prescriptionTCMDetail\" :key=\"index\">\n              {{lastDiagnosis.prescriptionTCMDetail[index].commonName ? lastDiagnosis.prescriptionTCMDetail[index].commonName + \" \" + lastDiagnosis.prescriptionTCMDetail[index].quantity + \"g，\" : lastDiagnosis.prescriptionTCMDetail[index].productName + \" \" + lastDiagnosis.prescriptionTCMDetail[index].quantity + \"g，\"}}\n            \n                </view>\n                <text v-if=\"lastDiagnosis.prescriptionTCMDetail && lastDiagnosis.prescriptionTCMDetail.length > 0\">\n              共{{lastDiagnosis.prescriptionTCMDetail.length}}种药品\n            \n                </text>\n              </view>\n              <view> \n                <text class=\"grey\">诊断\n                </text>\n                <text>{{lastDiagnosis.diagnosis}}\n                </text>\n              </view>\n              <view> \n                <text class=\"grey\">病情描述\n                </text>\n                <text>{{lastDiagnosis.mainSuit ? lastDiagnosis.mainSuit : '无'}}\n                </text>\n              </view>\n              <view> \n                <text class=\"grey\">肝、肾功能异常\n                </text>\n                <text v-if=\"inquiryInfo.liverAndRenalFunction != null\">{{inquiryInfo.liverAndRenalFunction === 0 ? \"无\" : \"有\"}}\n                </text>\n              </view>\n              <view v-if=\"inquiryInfo.patientSex === 2\"> \n                <text class=\"grey\">是否妊娠、哺乳期\n                </text>\n                <text v-if=\"inquiryInfo.pregnancyAndLactation != null\">{{inquiryInfo.pregnancyAndLactation === 0 ? \"否\" : \"是\"}}\n                </text>\n              </view>\n              <view> \n                <text class=\"grey\">是否复诊\n                </text>\n                <text v-if=\"lastDiagnosis.offlineDiagnosis != null\">{{lastDiagnosis.offlineDiagnosis === 0 ? \"否\" : \"是\"}}\n                </text>\n              </view>\n            </view>\n          </view>\n        </view>\n        <image class=\"cell_img\" src=\"../../images/user-photo.png\"></image>\n      </view>\n    </view>\n  </view>","wxss":".cell_box{\n  margin-bottom: 36rpx;\n}\n.cell_box .apply .main >view:nth-child(4) text{\n  display: inline-block;\n  line-height: 0;\n}\n.cell_box_r{\n  margin-right: 32rpx;\n  display: flex;\n  justify-content:flex-end;\n}\n.cell_box_r .cell_img{\n  width: 80rpx;\n  height: 80rpx;\n  margin-left: 20rpx;\n}\n.cell_box_r .cell_text .name{\n  text-align: right;\n  font-size: 22rpx;\n  color: #9AA0B5;\n  margin-bottom: 10rpx;\n}\n.cell_box_r .cell_text .text{\n  width: 70rpx;\n  float: right;\n  height: 82rpx;\n  background: #00b955;\n  border-radius: 0rpx 20rpx 20rpx;\n  text-align: center;\n  line-height: 82rpx;\n  font-size: 30rpx;\n  color: #fff;\n}\n.cell_box_r .cell_text .apply{\n  width: 486rpx;\n  background: #fff;\n  border-radius: 12px;\n  font-size: 32rpx;\n  font-weight: 500;\n  color: #111734;\n}\n.cell_box_r .cell_text .apply .header {\n  height: 96rpx;\n  line-height: 96rpx;\n  border-bottom: 1px solid #f7f7f7;\n  padding: 0 24rpx;\n}\n.cell_box_r .cell_text .apply .main{\n  padding: 24rpx;\n  font-size: 30rpx;\n}\n.cell_box_r .cell_text .apply .main >view{\n  margin-bottom: 20rpx;\n}\n.cell_box_r .cell_text .apply .main >view:first-child{\n  font-size: 32rpx;\n  font-weight: 500;\n  color: #111734;\n}\n.cell_box_r .cell_text .apply .main >view >text{\n  margin-right: 30rpx;\n  white-space:normal;\n  word-break:break-all;\n}\n.cell_box_r .cell_text .apply .main .grey{\n  color: #9AA0B5;\n}\n.wold_break{\n  white-space:normal;\n  word-break:break-all;\n}"},"convertDir/component/message-list/message-list":{"js":"/**\n * desc: 会话列表页\n */\nlet disp = require(\"../../im/utils/broadcast\")\nimport xcxIM from '../../im/im'\n\nlet _this\n\nexport default {\n  onShow: function () {\n    console.log(\"messageList onShow\")\n  },\n\n  onHide: function () {\n    this.data.currentPageName = '';\n  },\n\n  props: {\n    messageList: {\n      type: Array,\n      default: []\n    },\n    userInfo: {\n      type: Object,\n      default: {}\n    },\n    windowHeight: {\n      type: Number,\n      default: ''\n    }\n  },\n\n  data: function() {\n    return {\n      messageList: [],\n      inquiryArray: [],\n      windowHeight: Taro.getSystemInfoSync().windowHeight,\n      currentPageName: 'messageLst'\n    };\n  },\n\n  mounted: function () {\n    _this = this\n    Taro.setStorageSync('guidance', false)\n    disp.on('em.chat.unReadMsg', this.dispUnReadMsg)\n\n    this.setUnReadMsgUI()\n  },\n\n  destroyed: function () {\n    disp.off('em.chat.unReadMsg', this.dispUnReadMsg)\n  },\n\n  methods: {\n    pullDownRefresh(e) {\n      console.log(e, '下一页');\n      this.triggerEvent('action')\n    },\n    handleToChatroom(e) {\n      console.log(e)\n      let status = e.currentTarget.dataset.status\n      if (status != 3 && status != 5 && status != 7 && status != 8) {\n        // 问诊中的单子 判断im状态机\n        if (xcxIM.status == 0) {\n          xcxIM.initIM(this.handleToChatroom, e)\n        }\n        \n      }\n      Taro.setStorageSync('inquiryId', e.currentTarget.dataset.inquiryid)\n      this.triggerEvent('toChatRoom', e.currentTarget.dataset.inquiryid)\n    },\n    getUnreadMessage(curSessionMap) {\n      console.log('---:', curSessionMap)\n      this.data.messageList.forEach(item => {\n        if (curSessionMap[item.inquiryId]) {\n          item.hasUnread = true;\n          item.lastMsgText = curSessionMap[item.inquiryId];\n        }\n      })\n      console.log(this.data.messageList)\n      this.setData({\n        messageList: this.data.messageList\n      })\n    },\n    setUnReadMsgUI() {\n      let curSessionMap = Taro.getStorageSync('sessionMap');\n      console.log('未读消息', curSessionMap)\n      this.getUnreadMessage(curSessionMap);\n    },\n    dispUnReadMsg(globalMsgMap) {\n      console.log('em.chat.unReadMsg:', globalMsgMap)\n      console.log('测试未读消息', _this.data.currentPageName === 'messageLst')\n      if (_this.data.currentPageName === 'messageLst') _this.getUnreadMessage(globalMsgMap)\n    }\n  },\n\n  watch: {\n    messageList: function (newVal, oldVal, changedPath) {\n      this.setData({ messageList: newVal });\n      this.setUnReadMsgUI()\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"message-list-auto-container\"> \n    <wxs module=\"filter\">\n  var inquiryStatusFilter = function (value) {\n    if (value == 3 || value == 5 || value == 7 || value == 8) {\n      return \"已完成\"\n    } else {\n      return \"问诊中\"\n    }\n  }\n  module.exports = {\n    inquiryStatusFilter: inquiryStatusFilter\n  }\n\n    </wxs>\n    <scroll-view class=\"common_section\" scroll-y=\"true\" :style=\"{height: windowHeight px}\" bindscrolltolower=\"pullDownRefresh\" lower-threshold=\"100\">\n      <view class=\"cell\" bindtap=\"handleToChatroom\" :data-inquiryId=\"item.inquiryId\" :data-status=\"item.status\" v-for=\"(item, index) in  messageList \" :key=\"index\">    \n        <view class=\"cell_left\"> \n          <image src=\"../../images/doctor-photo.png\"></image>\n          <view class=\"red-point\" v-if=\" item.hasUnread \"></view>\n        </view>\n        <view class=\"cell_center\">  \n          <view class=\"name\">{{ item.physicianName }}\n          </view>\n          <text class=\"text\" v-if=\"item.inquiryType != 4\">{{ item.speedStatus == 5 ? '问诊已退费退诊' : item.lastMsgText }}\n          </text>\n          <text class=\"text\" v-if=\"item.inquiryType === 4\">{{ item.speedStatus == 1 ? '问诊已结束' : (item.speedStatus == 5 ? '问诊已退费退诊' :item.lastMsgText)}}\n          </text>\n        </view>\n        <block v-if=\"item.inquiryType === 2\">\n          <view :class=\"[cell_right,( item.speedStatus == 0 ? 'active' : '' )]\">{{ item.speedStatus == 0 ? '问诊中' : '已完成' }}\n      \n          </view>\n        </block>\n        <block v-if=\"item.inquiryType === 4\">\n          <view :class=\"[cell_right,( item.speedStatus == 0 ? 'active' : '' )]\">{{ item.speedStatus == 0 ? '问诊中' : '已完成' }}\n      \n          </view>\n        </block>\n        <block v-if=\"item.inquiryType === 1\">\n          <view :class=\"[cell_right,( (item.status == 3 || item.status == 5 || item.status == 7 || item.status == 8 ) ? '' : 'active' )]\">\n        {{ filter.inquiryStatusFilter(item.status) }}\n          </view>\n        </block>\n      </view>\n    </scroll-view>\n  </view>","wxss":"@import '../../common/tableView.wxss';\r\n.common_section {\r\n  overflow: hidden;\r\n}\r\n.common_section .cell {\r\n  padding: 32rpx;\r\n  align-items: flex-start;\r\n  color: #999999;\r\n}\r\n\r\n.common_section .cell_left {\r\n  width: 90rpx;\r\n  height: 90rpx;\r\n  border-radius: 90rpx;\r\n  position: relative;\r\n  margin-right: 24rpx;\r\n}\r\n\r\n.common_section .cell_left image {\r\n  border-radius: 50rpx;\r\n}\r\n\r\n.common_section .cell_left .red-point {\r\n  width: 20rpx;\r\n  height: 20rpx;\r\n  border-radius: 20rpx;\r\n  border: 1rpx solid #FFFFFF;\r\n  background: #FF4531;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n}\r\n\r\n.common_section .cell_center {\r\n  flex: 1;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.common_section .cell_center .name {\r\n  font-size: 32rpx;\r\n  color: #111334;\r\n  font-weight: 500;\r\n}\r\n\r\n.common_section .cell_center .text{\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 1;\r\n  overflow: hidden;\r\n  word-break: break-all;\r\n  color: #666883;\r\n  font-size: 28rpx;\r\n  margin-top: 11rpx;\r\n}\r\n\r\n.common_section .cell_right {\r\n  font-size: 28rpx;\r\n  color: #9D9FB8;\r\n}\r\n\r\n.common_section .cell_right.active {\r\n  color: #00b955;\r\n}"},"convertDir/component/missingData/missingData":{"js":"// component/missingData/missingData.js\nimport {\n  url,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  onShow: function() {\n    // 页面被展示\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    zhi:{\n      type: String,\n      default:'',\n    },\n    textval: {\n      type: String,\n      default: '',\n    },\n    textval2: {\n      type: String,\n      default: '',\n    },\n    buttonText: {\n      type: String,\n      default: ''\n    },\n    notPadding: {\n      type: Number,\n      default: ''\n    },\n    buttonText: {\n      type: String,\n      default: '',\n    },\n    buttonColor: {\n      type: String,\n      default: '',\n    },\n    imageUrl: {\n      type: String,\n      default: '',\n    },\n    paddingValue: {\n      type: String,\n      default: '',\n    }\n  },\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    fun() {\n      this.triggerEvent(\"action\");\n      //triggerEvent函数接受三个值：事件名称、数据、选项值  \n    },\n    tologin() {\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"missingData-auto-container\">\n    <view class=\"content\" :id=\" zhi \" v-if=\" zhi == \"new1\" \" :style=\"{padding:  paddingValue }\">   \n      <image class=\"missing_img new_missing_img\" mode=\"widthFix\" :src=\" imageUrl \"></image>\n      <view class=\"text_zi big\" v-if=\" textval \">{{ textval }}\n      </view>\n      <view class=\"text_zi\" v-if=\" textval2 \">{{ textval2 }}\n      </view>\n      <view class=\"miss_btn theme-text\" bindtap=\"fun\" v-if=\" buttonText \">{{ buttonText }}\n      </view>\n    </view>\n  </view>","wxss":"/* component/missingData/missingData.wxss */\n@import '../../common/tableView.wxss';\n.content{\n  width: 100%;\n  height: auto;\n  padding: 35% 0 100rpx 0;\n  font-size: 30rpx;\n  color: #999;\n  text-align: center;\n  box-sizing: border-box;\n}\n\n.new_missing_img {\n  width: 464rpx;\n  height: 293rpx;\n  margin: auto;\n}\n.text_zi{\n  color: #9D9FB8;\n  font-size: 24rpx;\n}\n.text_zi.big {\n  color: #111334;\n  font-size: 32rpx;\n  margin-bottom: 10rpx;\n}\n\n.miss_btn{\n  width: 200rpx;\n  height: 72rpx;\n  border-radius: 90rpx;\n  border: 1px solid #00b955;\n  text-align: center;\n  margin: 40rpx auto 0;\n  font-size: 28rpx;\n  line-height: 72rpx;\n  font-weight: bold;\n}\n.long_miss {\n  padding: 40% 24rpx 100rpx;\n}\n.long_miss image {\n  width: 320rpx;\n  height: 260rpx;\n}\n.long_miss .miss_btn {\n  border: 0;\n  width: 100%;\n  height: 90rpx;\n  line-height: 90rpx;\n  border-radius: 90rpx;\n  font-size: 36rpx;\n  color: #FFFFFF;\n  background: linear-gradient(to right, #09C1CB , #05D9A0);\n}"},"convertDir/component/myInfo/myInfo":{"json":{"loginPhone":"/component/loginPhone/loginPhone","halfScreenDialog":"/component/halfScreenDialog/halfScreenDialog"},"wxss":"@import '/common/tableView.wxss';\n@import '/app.wxss';\npages {\n  background: #F5F6FA;\n}\n\n.header {\n  width: 100%;\n  padding: 20rpx 24rpx 36rpx;\n  padding-bottom: 40rpx;\n  display: flex;\n  align-items: center;\n  position: relative;\n  box-sizing: border-box;\n}\n\n.header .icon_user {\n  width: 127rpx;\n  height: 127rpx;\n  border-radius: 50%;\n  border: 2rpx solid #ffffff;\n}\n\n.header .user_name {\n  font-size: 42rpx;\n  color: #111334;\n  font-weight: 600;\n  margin-left: 24rpx;\n}\n\n.header .text {\n  font-size: 26rpx;\n  color: #666883;\n  margin-top: 10rpx;\n  font-weight: normal;\n}\n\n.header .hide_control {\n  width: 100rpx;\n  height: 100rpx;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.common_section .cell::before {\n  border: 0;\n}\n\n.nav-box {\n  margin: 0 24rpx;\n  border-radius: 12rpx;\n}\n\n.nav-box .cell {\n  padding: 20rpx 24rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #111334;\n}\n\n.nav-box .cell .cell_right {\n  flex: 1;\n  text-align: right;\n  font-size: 26rpx;\n  color: #9D9FB8;\n  font-weight: normal;\n}\n\n.nav-box .flex-boxs{\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20rpx 0 33rpx;\n  color: #41435D;\n  font-size: 24rpx;\n}\n\n.nav-box .flex-box {\n  text-align: center;\n  flex: 1;\n}\n\n.nav-box .flex-box__icons {\n  position: relative;\n  width: 56rpx;\n  height: 56rpx;\n  margin: 0 auto 13rpx;\n}\n\n.nav-box .flex-box__count {\n  position: absolute;\n  top: -14rpx;\n  right: -14rpx;\n  min-width: 28rpx;\n  height: 28rpx;\n  border: 2rpx solid #F93A4A;\n  box-sizing: border-box;\n  color: #F93A4A;\n  font-size: 20rpx;\n  font-weight: bold;\n  background: #FFFFFF;\n  line-height: 28rpx;\n  border-radius: 15rpx;\n}\n\n.nav-box .flex-box__icon {\n  width: 100%;\n  height: 100%;\n}\n\n.btns-box {\n  margin: 20rpx 24rpx;\n  border-radius: 12rpx;\n  background: #FFFFFF;\n}\n\n.btns-box .cell {\n  padding: 27rpx 24rpx;\n  color: #111334;\n  font-size: 30rpx;\n}\n\n.btns-box .cell-img {\n  width: 46rpx;\n  height: 46rpx;\n  margin-right: 24rpx;\n}\n\n.btns-box .cell_center {\n  flex: 1;\n}\n\n.cell-arrow {\n  width: 28rpx;\n  height: 28rpx;\n}\n\n.login-out {\n  text-align: center;\n  border: 0;\n  height: 90rpx;\n  line-height: 90rpx;\n  background: #FFFFFF;\n  position: relative;\n  margin: 0 24rpx 24rpx;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  color: #111334;\n}\n\n.scanCode {\n  height: 60rpx;\n  width: 250rpx;\n  color: #FFFFFF;\n  text-align: center;\n  line-height: 60rpx;\n  border-radius: 30rpx;\n  margin: 10rpx 0;\n}\n.alert_box .text {\n  height: 80rpx;\n  line-height: 80rpx;\n  margin-bottom: 20rpx;\n}\n.alert_box navigator{\n  height: 90rpx;\n  line-height: 90rpx;\n  border-top: 1rpx solid #E1E1E1;\n} \n.control-tool__title {\n  padding: 50rpx 0 10rpx;\n  border-bottom: 1rpx solid #EEEEEE;\n  margin-bottom: 20rpx;\n  color: #666666\n}\n\n/* 扫码问诊 */\n.banner{\n  display: block;\n  width: 702rpx;\n  height: 135rpx;\n  margin: 0 auto;\n  margin-top: 20rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n}\n/* 推广 */\n.promotion{\n  line-height: 128rpx;\n  background-color: #fff;\n  display: flex;\n  margin: 20rpx 24rpx;\n  margin-top: 20rpx;\n  align-content: center;\n  justify-content: space-between;\n  border-radius: 12rpx;\n}\n.promotion_left{\n  display: flex;\n  padding-left: 24rpx;\n}\n.promotion_left_box{\n  line-height: initial;\n}\n.promotion_left image{\n  width: 66rpx;\n  display: block;\n  margin-top: 39rpx;\n  margin-right: 24rpx;\n  height: 56rpx;\n}\n.promotion_left_box_title{\n  color: #111734;\n  font-size: 32rpx;\n  margin-top: 24rpx;\n}\n.promotion_left_box_text{\n  font-size: 22rpx;\n  color: #9D9FB8;\n}\n.promotion_right{\n  padding-right: 24rpx;\n}\n.promotion_right image{\n  width: 28rpx;\n  height: 28rpx;\n  margin-top: 51rpx;\n}\n.input_box {\n  height: 60rpx;\n  padding: 2rpx 10rpx;\n  border: 1rpx solid #E1E1E1;\n  font-size: 30rpx;\n  margin-bottom: 10rpx;\n}\n.top-tab{\n  height: 80rpx;\n  width: 100%;\n  background-color: #fff;\n  display: flex;\n}\n.top-tab__item {\n  text-align: center;\n  font-size: 28rpx;\n  line-height: 80rpx;\n  position: relative;\n  letter-spacing: 1.11rpx;\n  flex: 1;\n  color: #666883;\n}\n\n.top-tab__item.active{\n  font-weight: bold;\n}\n\n.top-tab__item.active:after {\n  display: block;\n  width: 40rpx;\n  height: 6rpx;\n  background: #00b955;\n  content: \"\";\n  left: 50%;\n  margin-left: -25rpx;\n  border-radius: 3rpx;\n  bottom: 0px;\n  position: absolute;\n}\n","js":"// pages/my/myDrug/myInfo/myInfo.js\nimport {\n  ajax,\n  isLogonPhone,\n  cdnStaticResourceUrl,\n  getMedicineCateNum\n} from \"../../utils/util\";\nimport IMTOOL from '../../im/imTool'\nconst imTool = new IMTOOL()\nComponent({\n  properties: {\n    status: {\n      type: Boolean,\n      value: false\n    }\n  },\n  data: {\n    promotionInfo: null,//推广员信息\n    banner: null,\n    isDjk: getApp().globalData.src_whyb ? true : false,\n    url_link: cdnStaticResourceUrl,\n    userInfo: {},//用户信息\n    navNum: {},//导航订单数量\n    LogonPhone: false,// 判断是否绑定手机号\n    sess_key: null,\n    currentEnv: 'prod',\n    isReport: false,\n    controlBoxShow: false,\n    restart: false,\n    ENVList: [\n      {\n        'value': 'prod',\n        'name': '线上'\n      },\n      {\n        'value': 'stage',\n        'name': '预发'\n      },\n      {\n        'value': 'test',\n        'name': '测试'\n      },\n      {\n        'value': 'dev',\n        'name': '开发'\n      }\n    ],\n    controlBox: true,\n    tabbarHeight: null,\n    pageUrl: '',\n    tabsArr: [{\n      'value': 0,\n      'text': '常用工具类'\n    }, {\n      'value': 1,\n      'text': '问诊'\n    }],\n    value: 0\n  },\n  lifetimes: {\n    attached() {\n      // onload\n      this.setData({\n        tabbarHeight: wx.getStorageSync('tabbarHeight') || 82\n      })\n\n      //线上环境隐藏隐藏事件\n      if (__wxConfig && __wxConfig.envVersion && __wxConfig.envVersion == 'release') {\n        this.setData({ controlBox: false });\n      }\n\n      //更新缓存数据\n      if (wx.getStorageSync('CONTROL_TOOL_DATA')) {\n        this.setData({\n          currentEnv: wx.getStorageSync('CONTROL_TOOL_DATA').globalEnv,\n          isReport: wx.getStorageSync('CONTROL_TOOL_DATA').isReport\n        })\n      }\n      this.getBanner();\n    }\n  },\n  pageLifetimes: {\n    // 组件所在页面的生命周期函数\n    hide: function () {\n    },\n    show: function () {\n      // onShow\n      //获取订单状态信息\n      this.getNavNum();\n      this.data.sess_key = getApp().globalData.sess_key;\n\n      //登录状态检查手机绑定状态 反之清空订单数量展示\n      if (this.data.sess_key) {\n        this.checkLogonPhone();\n      } else {\n        this.data.navNum = {};\n      }\n\n      this.setData({\n        sess_key: this.data.sess_key,\n        isDjk: getApp().globalData.src_whyb ? true : false,\n        navNum: this.data.navNum\n      })\n\n      //自定义底部导航，需要在当前页面修改selected的值 否则无效\n      if (typeof this.getTabBar === 'function' && this.getTabBar()) {\n        let cateNum = getMedicineCateNum();\n\n        this.getTabBar().setData({\n          selected: this.data.isDjk ? 1 : 4,  //这里指的是该页面对应在tabBar的索引\n          brageNum: cateNum || 0\n        })\n      }\n      // 获取推广员信息\n      this.getPromotionType();\n    }\n  },\n  methods: {\n    handlePromotionGoodsList() {\n      let promotionInfo = this.data.promotionInfo;\n      wx.navigateTo({\n        url: `/pages/my/myPage/promoteGoods/promoteGoods?promoterId=${promotionInfo.promoterId}&drugstoreId=${promotionInfo.drugstoreId}&drugstoreName=${promotionInfo.drugstoreName}`\n      })\n    },\n    getPromotionType() {\n      let that = this;\n      wx.showLoading({\n        title: '加载中',\n      })\n      let userInfo = wx.getStorageSync('userInfo');\n      // 如果没有用户信息或者没有登录状态  则不去请求推广员信息接口\n      if (!userInfo || !this.data.sess_key) {\n        return false\n      }\n      ajax('get', 'miniapp/popularize/promoter/info', {\n        userId: userInfo.userId\n      }, function (res) {\n        wx.hideLoading();\n        if (res.data.code == 0) {\n          that.setData({\n            promotionInfo: res.data.result\n          })\n        }\n      }, function (res) {\n        wx.showToast({\n          title: '请求失败',\n          icon: 'none',\n        })\n      })\n    },\n    getBanner() {\n      ajax('get', `miniapp/notify/getPurchaseBanner`, { adType: 9 }, (res) => {\n        if (res.data.code == 0) {\n          this.setData({ banner: res.data.result })\n        }\n      })\n    },\n    /**\n     * @description: 判断是否绑定手机号\n     */\n    checkLogonPhone() {\n      isLogonPhone((callback) => {\n        if (callback == 2) {\n          wx.removeStorageSync('sess_key');\n          getApp().globalData.sess_key = null;\n          this.setData({ sess_key: null });\n          return false;\n        }\n\n        //获取用户信息\n        this.getUserInfo();\n        //需要绑定手机号callback返回true 反之false\n        this.setData({ LogonPhone: callback });\n      })\n    },\n    /**\n     * @description: 获取 url 参数\n     * @params  {String} url\n     * return {String} 格式化后的 url\n     */\n    getCompleteUrl(url) {\n      let resultUrl = '';\n      // 分割url\n      let urlArray = url.split('?');\n      // 获取全局sess_key\n      let token = getApp().globalData.sess_key;\n      // 区分 url 后是否带参数\n      if (urlArray[1]) {\n        resultUrl = `${urlArray[0]}?${urlArray[1]}&token=${token}`;\n      } else {\n        resultUrl = `${urlArray[0]}?token=${token}`;\n      }\n      return resultUrl;\n    },\n    tolink() {\n      getApp().globalData.burySpotSDK.track('action_personal_bannerClick');\n      let data = this.data.banner[0];\n\n      // bannerUrlType 2自定义页面，3小程序页面；\n      let url = this.getCompleteUrl(data.bannerUrl);\n      if (data.bannerUrlType == 2) {\n        if (data.activityPageShare) {\n          const activityPageShare = JSON.stringify(data.activityPageShare)\n          if (data.bannerUrl.indexOf('?') > -1) {\n            url = `${data.bannerUrl}&activityPageShare=${encodeURIComponent(activityPageShare)}`\n          } else {\n            url = `${data.bannerUrl}?activityPageShare=${encodeURIComponent(activityPageShare)}`\n          }\n        }\n        console.log(url)\n        // 参数格式化\n        wx.navigateTo({\n          url: `/pages/webView/webView?link=${encodeURIComponent(url)}`\n        })\n      } else {\n        wx.navigateTo({\n          url: data.bannerUrl\n        })\n      }\n    },\n    // 绑定手机号回调主页面方法\n    loginPhone_fun: function () {\n      this.setData({ LogonPhone: false });\n    },\n    toLogin() {\n      wx.navigateTo({\n        url: '/pages/note/login/login',\n      })\n    },\n    //获取用户信息\n    getUserInfo: function () {\n      wx.getStorage({\n        key: 'sess_key',\n        success: res => {\n          let token = res.data;\n          if (token) {\n            ajax('get', `miniapp/miniappController/getUserRole/${token}`, {}, (res) => {\n              if (res == 2) {\n                return false;\n              }\n              if (res.data.code === 0 && res.data.result) {\n                this.setData({\n                  userInfo: res.data.result\n                })\n                wx.setStorage({\n                  key: 'userInfo',\n                  data: {\n                    ...wx.getStorageSync('userInfo'),\n                    ...{ userId: this.data.userInfo.userId },\n                    ...{ nickname: this.data.userInfo.nickName },\n                    ...{ avatarUrl: this.data.userInfo.avatarUrl },\n                    ...{ userRole: this.data.userInfo.userRole },\n                    ...{ personnelType: this.data.userInfo.personnelType }, // 推广人员类别 BD: 普通推广人员 ，BDMANAGER : 推广管理人员\n                    ...{ userType: this.data.userInfo.userType },//用户身份   0:普通用户,1:小药药销售,2:药店店员,3:药店用户\n                    ...{ phoneType: this.data.userInfo.phoneType },//是否绑定手机号   0:已绑定,1:未绑定\n                    ...{ easeMoUserId: this.data.userInfo.easeMoUserId },\n                    ...{ easeMoUserPassword: this.data.userInfo.easeMoUserPassword },\n                    ...{ name: this.data.userInfo.name },\n                  }\n                })\n              } else {\n                wx.showToast({\n                  title: res.data.msg,\n                  icon: 'none'\n                })\n              }\n            })\n          }\n        }\n      })\n    },\n    //获取订单信息状态\n    getNavNum: function () {\n      wx.showLoading({\n        title: '加载中'\n      });\n      ajax('get', `api/ykq/order/r/user/order/statistic`, {}, (res) => {\n        wx.hideLoading();\n        if (res == 2) return false;\n        if (res.data.code === 0) {\n          this.setData({\n            navNum: res.data.result\n          })\n        }\n      })\n    },\n    //订单列表\n    openIndentList(e) {\n      let status = e.currentTarget.dataset.status;\n      wx.navigateTo({\n        url: `/pages/note/myGroupIndent/myGroupIndent?status=${status}`\n      })\n    },\n    // 关注的店铺\n    openFollowingDrugStore() {\n      getApp().globalData.burySpotSDK.track('sy-my-wgzddp');\n      wx.navigateTo({\n        url: \"/pages/followingDrugstore/followingDrugstore\"\n      })\n    },\n    //我的优惠券\n    openCoupon: function (e) {\n      getApp().globalData.burySpotSDK.track('sy-my-wdyhq');\n      wx.navigateTo({\n        url: \"/pages/note/myCoupon/myCoupon\"\n      })\n    },\n    //药店会员卡包\n    vipCardList: function () {\n      getApp().globalData.burySpotSDK.track('sy-my-ydhy');\n      wx.navigateTo({\n        url: \"/pages/my/myPage/vipCardList/vipCardList\"\n      })\n    },\n    // 我的医生\n    myDoctor: function () {\n      // getApp().globalData.burySpotSDK.track('sy-my-ydhy');\n      wx.navigateTo({\n        url: \"/pages/my/myDoctor/doctorList/doctorList\"\n      })\n    },\n    //我的医疗凭证\n    linkToMedicinesCard: function (e) {\n      wx.navigateTo({\n        url: \"/pages/djk/pages/medicareCard/medicareCard\"\n      })\n    },\n    //我的名片 我的二维码\n    openMyCard: function (e) {\n      wx.navigateTo({\n        url: \"/pages/my/promoPicture/promoPicture\"\n      })\n    },\n    //我的统计\n    openMyCount: function (e) {\n      let url = \"\";\n      // 我的推广码，仅地推人员和药店店员才展示，其他类型的人员不展示；\n      // 0.普通用户 1.小药药销售,2:药店店员,3:药店用户\n      // this.data.userInfo.userType=1;\n      // this.data.userInfo.personnelType = \"BDMANAGER\";\n      switch (this.data.userInfo.userType) {\n        case 1:\n          // BD: 普通地推人员 BDMANAGER: 地推管理人员\n          this.data.userInfo.personnelType == \"BDMANAGER\" ? url = \"/pages/note/myCountBD/mycountBD\" : url = \"/pages/note/myCount/mycount\"\n          break;\n        case 2:\n          // 药店店员直接进入普通统计\n          url = \"/pages/note/myCount/mycount\"\n          break;\n        default:\n          break;\n      }\n\n      wx.navigateTo({ url });\n    },\n    //平台资质\n    openQualification() {\n      wx.navigateTo({\n        url: '/pages/note/ruleDetail/ruleDetail'\n      })\n    },\n    //联系客服\n    toContactService() {\n      wx.navigateTo({\n        url: '/pages/note/contactService/contactService'\n      })\n    },\n    //购药问诊记录\n    toInquiryRecord() {\n      getApp().globalData.burySpotSDK.track('sy-my-wzjl');\n      wx.navigateTo({\n        url: '/pages/note/inquiryRecord/inquiryRecord'\n      })\n    },\n    //切换环境\n    switchEnv() {\n      this.setData({ controlBoxShow: true });\n    },\n    scanCode() {\n      wx.scanCode({\n        success(res) {\n          if (res.path) {\n            wx.navigateTo({\n              url: `/${res.path}`\n            })\n          }\n        }\n      })\n    },\n    //变更环境数据\n    uploadControl(e) {\n      let type = e.currentTarget.dataset.type;\n      let controlData = wx.getStorageSync('CONTROL_TOOL_DATA') || {};\n      if (e.detail.value && type == 'env') {\n        controlData.globalEnv = e.detail.value;\n        this.data.restart = true;\n        this.data.currentEnv = controlData.globalEnv;\n      } else {\n        controlData.isReport = e.detail.value;\n      }\n\n      //切换主题\n      // else if(e.detail.value && type == 'switchTheme') {\n      //   this.data.restart = true;\n      //   if(e.detail.value == 0) {\n      //     getApp().globalData.src_whyb = 1;\n      //   }else{\n      //     getApp().globalData.src_whyb = null\n      //   }\n      //   console.log(getApp().globalData.src_whyb)\n      //   wx.switchTab({\n      //     url: '/pages/noteIndex/noteIndex',\n      //   })\n      //   return false;\n      // }\n\n      wx.setStorageSync('CONTROL_TOOL_DATA', controlData);\n      this.setData({\n        controlBoxShow: false,\n        restart: this.data.restart,\n        currentEnv: this.data.currentEnv\n      })\n    },\n    handleClearStorage() {\n      wx.showModal({\n        title: '确定退出？',\n        content: '退出登录无法查看订单，重新登录即可查看',\n        confirmText: '确定',\n        cancelText: '取消',\n        confirmColor: getApp().globalData.mainColor,\n        success: (result) => {\n          if (result.confirm) {\n            wx.clearStorage({\n              success: (e) => {\n                getApp().globalData.sess_key = null;\n                let navNum = this.data.navNum\n                navNum.userOrderStatistics && navNum.userOrderStatistics.forEach(item => item.count = 0);\n                this.setData({\n                  userInfo: {},\n                  promotionInfo: null,\n                  navNum\n                })\n                wx.showToast({\n                  title: '退出成功',\n                  icon: 'none',\n                });\n              }\n            })\n          }\n        },\n      });\n    },\n     // 跳转到指定路径 \n  goPage() {\n    wx.navigateTo({\n      url: this.data.pageUrl,\n    })\n  },\n  switchTabs(e) {\n    console.log(e)\n    let value = e.target.dataset.current || 0;\n    if (value == this.data.value) return false;\n    this.setData({\n      value: value\n    });\n  },\n  login() {\n    imTool.login()\n  },\n  logout(){\n    imTool.logout()\n  }  ,\n  // 模拟扫码进入\n  setIpt(e) {\n    this.setData({\n      pageUrl: e.detail.value\n    })\n  },\n  },\n})","wxml":"\n  <view class=\"myInfo-auto-container\"> \n    <view :class=\"[container,( isDjk ? 'djk-view' : '' )]\" :style=\"{padding-bottom:  status? 25 :tabbarHeight px}\">        \n      <view class=\"header\" :bindtap=\" sess_key && userInfo.phoneType == 0 ? '' : 'toLogin' \">  \n        <image class=\"image icon_user\" :src=\" sess_key && userInfo.avatarUrl ? userInfo.avatarUrl : '/images/defaultAvatar.png' \"></image>\n        <view class=\"user_name\"> \n          <view>{{ sess_key && userInfo.phoneType == 0 ? userInfo.nickName : \"点击登录\" }}\n          </view>\n          <view class=\"text\">{{ sess_key && userInfo.phoneType == 0 ? '关注身体健康，收获生活惊喜' : \"点击登录，享受更多精彩\" }}\n          </view>\n        </view>\n        <view class=\"hide_control\" bindlongpress=\"switchEnv\" v-if=\" controlBox \"></view>\n      </view>\n      <view class=\"common_section nav-box\"> \n        <view class=\"cell\">  \n          <view class=\"cell_left\">我的预约\n          </view>\n          <view class=\"cell_right\" bindtap=\"openIndentList\" data-status=\"0\">全部预约\n          </view>\n          <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n        </view>\n        <view class=\"flex-boxs\">\n          <view class=\"flex-box\" bindtap=\"openIndentList\" :data-status=\" item.status \" v-for=\"(item, key) in  navNum.userOrderStatistics \" :key=\"key\"> \n            <view class=\"flex-box__icons\"> \n              <view class=\"flex-box__count\" v-if=\" item.count > 0 \">{{ item.count }}\n              </view>\n              <image class=\"flex-box__icon\" :src=\"'../../images/'+isDjk?'djkMy':'icon-indent-status'+''+ item.status +'.png'\"></image>\n            </view>\n            <view class=\"flex-box__text\">{{ item.statusDesc }}\n            </view>\n          </view>\n        </view>\n      </view>\n      <block v-if=\"promotionInfo\">\n        <view class=\"promotion\" bindtap=\"handlePromotionGoodsList\"> \n          <view class=\"promotion_left\"> \n            <image src=\"../../images/my_info_tg.png\" mode=\"widthFix\"></image>\n            <view class=\"promotion_left_box\"> \n              <view class=\"promotion_left_box_title\">商品推广\n              </view>\n              <view class=\"promotion_left_box_text\">分享商品，线上快速下单\n              </view>\n            </view>\n          </view>\n          <view class=\"promotion_right\">\n            <image src=\"../../images/icon-arrow.png\" mode=\"widthFix\"></image>\n          </view>\n        </view>\n      </block>\n      <block v-if=\" banner[0] \">\n        <image class=\"banner\" mode=\"aspectFill\" lazy-load :src=\" banner[0].bannerImage \" bindtap=\"tolink\"></image>\n      </block>\n      <view class=\"common_section btns-box\">  \n        <block v-if=\" sess_key && userInfo.phoneType == 0 \">       \n          <view class=\"cell\" bindtap=\"toInquiryRecord\">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-inquiry-record.png\"></image>\n            <view class=\"cell_center\">问诊记录\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view class=\"cell\" bindtap=\"openFollowingDrugStore\">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-focus.png\"></image>\n            <view class=\"cell_center\">我关注的店铺\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view class=\"cell\" bindtap=\"openCoupon\" v-if=\" !isDjk \">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-coupon.png\"></image>\n            <view class=\"cell_center\">我的优惠券\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view class=\"cell\" bindtap=\"vipCardList\">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-vipcard.png\"></image>\n            <view class=\"cell_center\">药店会员卡包\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view class=\"cell\" bindtap=\"myDoctor\">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-doctor.png\"></image>\n            <view class=\"cell_center\">我的医生\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view :class=\"[cell,( userInfo.userType == 0 || userInfo.userType == 3 ? 'hide' : '' )]\" bindtap=\"openMyCard\">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-promo.png\"></image>\n            <view class=\"cell_center\">我的推广码\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view :class=\"[cell,( userInfo.userType == 0 || userInfo.userType == 3 ? 'hide' : '' )]\" bindtap=\"openMyCount\">  \n            <image class=\"cell-img\" src=\"../../images/icon-my-count.png\"></image>\n            <view class=\"cell_center\">推广统计\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n          <view class=\"cell\" bindtap=\"linkToMedicinesCard\" v-if=\" isDjk \">  \n            <image class=\"cell-img\" src=\"../../images/health-care-icon.png\"></image>\n            <view class=\"cell_center\">我的医疗凭证\n            </view>\n            <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n          </view>\n        </block>\n        <view class=\"cell\" bindtap=\"openQualification\" v-if=\" !isDjk \">  \n          <image class=\"cell-img\" src=\"../../images/icon-my-qualification.png\"></image>\n          <view class=\"cell_center\">资质与规则\n          </view>\n          <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n        </view>\n        <view class=\"cell\" bindtap=\"toContactService\" v-if=\" !isDjk \">  \n          <image class=\"cell-img\" src=\"../../images/icon-my-tel.png\"></image>\n          <view class=\"cell_center\">联系客服\n          </view>\n          <image class=\"cell-arrow\" src=\"../../images/icon-arrow.png\"></image>\n        </view>\n      </view>\n      <view class=\"login-out\" bindtap=\"handleClearStorage\" v-if=\" sess_key && userInfo.phoneType == 0 \">退出登录\n      </view>\n      <view class=\"black_box\" v-if=\" restart \"></view>\n      <view class=\"alert_box\" v-if=\" restart \"> \n        <view class=\"text\">更新成功，重启小程序\n        </view>\n        <navigator target=\"miniProgram\" open-type=\"exit\" app-id=\"wx776afedbfae3a228\" path=\"/pages/noteIndex/noteIndex\" extra-data version=\"trial\" class=\"theme-text\">确定\n        </navigator>\n      </view>\n      <halfScreenDialog :show=\" controlBoxShow \" maskClosable=\"ture\" title=\"工具\" hasLine=\"true\">\n        <view slot=\"desc\" class=\"control-tool\" :style=\"{padding-bottom:  tabbarHeight px}\">   \n          <view class=\"top-tab\">\n            <view :class=\"[top-tab__item,( value == item.value ? 'active theme-text' : '' )]\" :data-current=\" item.value \" bindtap=\"switchTabs\" v-for=\"(item, index) in  tabsArr \" :key=\"index\">{{ item.text }}\n            </view>\n          </view>\n          <view v-if=\"value==0\">        \n            <view class=\"control-tool__title\">网络环境\n            </view>\n            <radio-group name=\"radioGroup\" class=\"control-tool__body\" bindchange=\"uploadControl\" data-type=\"env\">\n              <label v-for=\"(item, key) in  ENVList \" :key=\"key\">{{ item.name }}\n        \n                <radio :value=\" item.value \" :checked=\" item.value == currentEnv \"></radio>\n              </label>\n            </radio-group>\n            <view class=\"control-tool__title\">小程序码\n            </view>\n            <view class=\"scanCode theme-bg\" bindtap=\"scanCode\">扫一扫\n            </view>\n            <view class=\"control-tool__title\">开启埋点\n            </view>\n            <radio-group name=\"radioGroup\" bindchange=\"uploadControl\"> \n              <label>是\n        \n                <radio value=\"1\" :checked=\" isReport \"></radio>\n              </label>\n              <label>否\n        \n                <radio value=\"0\" :checked=\" !isReport \"></radio>\n              </label>\n            </radio-group>\n            <view class=\"control-tool__title\">页面跳转\n            </view>\n            <input class=\"input_box\" type=\"text\" bindinput=\"setIpt\"></input>\n            <button class=\"scanCode theme-bg\" bindtap=\"goPage\">点击跳转\n            </button>\n          </view>\n          <view v-if=\"value==1\" style=\"height:700rpx\"> \n            <button class=\"scanCode theme-bg\" bindtap=\"login\">环信登陆\n            </button>\n            <button class=\"scanCode theme-bg\" bindtap=\"logout\">环信登出\n            </button>\n          </view>\n          <view style=\"height: 60rpx\"></view>\n        </view>\n      </halfScreenDialog>\n    </view>\n    <loginPhone v-if=\"LogonPhone\" bind:action=\"loginPhone_fun\"></loginPhone>\n  </view>"},"convertDir/component/myTools/myTools":{"js":"import {\n  url,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  onShow: function() {\n\n  },\n\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    closeStatus: {\n      type: Boolean,\n      default: true\n    },\n  },\n  data: function() {\n    return {\n    };\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    closeTools() {\n      this.setData({\n        closeStatus: true\n      })\n    },\n    openTools(){\n      this.setData({\n        closeStatus: false\n      })\n    },\n    toRecordPage(){\n      Taro.navigateTo({\n        url: `/pages/note/inquiryRecord/inquiryRecord?source=drugstore`\n      })\n    },\n    toMyPage(){\n      Taro.navigateTo({\n        url: `/pages/my/myDrug/drugstoreToMyInfo/drugstoreToMyInfo`\n      })\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"myTools-auto-container\">\n    <view>\n      <view :class=\"[my-tools,(closeStatus ? 'closeAnim' : '')]\">   \n        <view bindtap=\"openTools\">\n          <image v-if=\"closeStatus\" class=\"arrow\" src=\"../../images/icon-left-arrow.png\"></image>\n        </view>\n        <view bindtap=\"closeTools\">\n          <image v-if=\"!closeStatus\" class=\"arrow\" src=\"../../images/icon-right-arrow.png\"></image>\n        </view>\n        <view class=\"my\" bindtap=\"toMyPage\"> \n          <image src=\"../../images/icon-my.png\"></image>\n          <view>我的\n          </view>\n        </view>\n        <view class=\"inquiry\" bindtap=\"toRecordPage\"> \n          <image src=\"../../images/icon-doctor.png\"></image>\n          <view>问诊单\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".my-tools{\n    width: 190rpx;\n    height: 88rpx;\n    background: #00b955;\n    border-radius: 100rpx 0rpx 0rpx 100rpx;\n    position: fixed;\n    right: 0;\n    bottom: 250rpx;\n    z-index: 100;\n    display: flex;\n    align-items: center;\n}\n\n.closeAnim{\n    right: -140rpx;\n}\n\n.my-tools .arrow{\n    width: 13rpx;\n    height: 18rpx;\n    margin-left: 20rpx;\n    margin-right: 24rpx;\n}\n.my-tools .my{\n    margin-right: 27rpx;\n}\n.my-tools .my,.my-tools .inquiry{\n    font-size: 19rpx;\n    color: #fff;\n    text-align: center;\n}\n.my-tools .my >image{\n    width: 32rpx;\n    height: 32rpx;\n    display: inline-block!important;\n}\n.my-tools .inquiry >image{\n    width: 29rpx;\n    height: 30rpx;\n    display: inline-block!important;\n}"},"convertDir/component/navBar/navBar":{"js":"// pages/navBar/navBar.js\nconst app = getApp();\nlet navBarInfo=app.globalData.navBarInfo;\n\nexport default {\n    /**\n     * 组件的属性列表\n     */\n    props: {\n      customPage: {\n        type: String,\n        default: ''\n      },\n      isCustom: {// 是否为自定义;默认为false\n        type: Boolean,\n        default: false\n      },\n      leftStatus: {\n        type: Boolean,\n        default: false\n      },\n      isIconHide: {\n        type: Boolean,\n        default: false\n      },\n      higherNav: { // 高度更高的组件 可以设置背景图 关注药店主页用\n        type: Boolean,\n        default: false\n      },\n      background: {\n        type: String,\n        default: '#fff'\n      },\n      showCapsule:{\n        type: Boolean,\n        default: true\n      },\n      showBackCapsule: {\n        type: Boolean,\n        default:false\n      },\n      titleText: {\n          type: String,\n          default: '导航栏'\n      },\n      titleColor: {\n        type: String,\n        default: ''\n      },\n      titleOtherText:{\n        type: String,\n        default: ''\n      },\n      backIcon: {\n        type: String,\n        default: '/images/nav-bar-back.png'\n      },\n      drugBackIcon: {\n        type: String,\n        default: '/images/nav-bar-back2.png'\n      },\n      homeIcon: {\n        type: String,\n        default: '/images/nav-bar-home.png'\n      },\n      drugHomeIcon: {\n        type: String,\n        default: '/images/nav-bar-home2.png'\n      },\n      addressData: {\n        type: Object,\n        default: ''\n      },\n      pageFrom: {\n        type: String,\n        default: ''\n      }\n    },\n    data: function() {\n      return {\n        publicDomain: 0\n      };\n    },\n    mounted: function(){\n      this.setNavSize();\n      this.setData({\n        publicDomain: getApp().globalData.publicDomain\n      })\n      console.log(this.data.publicDomain, getApp().globalData.publicDomain)\n      // 带背景图的nav 主题色是白色\n      if (this.data.higherNav) {\n        Taro.setNavigationBarColor({\n          frontColor: '#ffffff',\n          backgroundColor: '#000000',\n          animation: {\n            duration: 400,\n            timingFunc: 'easeIn'\n          }\n        })\n      }\n    },\n    methods: {\n      /**\n       * @description:计算导航栏高度 微信：胶囊的上下padding距离 6 胶囊的高度 32 胶囊的宽度 88  \n       */\n      setNavSize: function() {\n\t\t\t  let capsule = ['width: ' + navBarInfo.width + 'px','height: ' + navBarInfo.height + 'px'].join(';');\n        this.setData({\n          capsule,\n          status: navBarInfo.top,\n          navHeight:navBarInfo.height\n        })\n      },\n      back: function(){\n        if(getCurrentPages().length>1){\n          Taro.navigateBack({\n            delta: 1\n          })\n        }else{\n          Taro.switchTab({\n            url: '/pages/noteIndex/noteIndex'\n          })\n        }\n      },\n      home: function() {\n        Taro.switchTab({\n          url: '/pages/noteIndex/noteIndex'\n        }) \n      },\n      toLink:function (){\n        Taro.navigateTo({\n          url: this.data.customPage\n        })\n      },\n      selectAddress(){\n        this.triggerEvent(\"action\");\n      }\n    }\n};\n","json":{},"wxml":"\n  <view class=\"navBar-auto-container\">\n    <view :class=\"[nav,(higherNav ? 'higher-nav' : '')]\" :style=\"{height: status + navHeight + 6px}\"> \n      <view class=\"status\" :style=\"{height: statuspx,background: background || '#FFFFFF'}\"></view>\n      <view class=\"navbar\" :style=\"{height:navHeightpx,background: background || '#FFFFFF',top:statuspx}\">    \n        <view class=\"capsule\" :style=\"{capsule}\" v-if=\"showBackCapsule\">\n          <view class=\"back-icon\" bindtap=\"back\">\n            <image class=\"img\" :src=\"backIcon\"></image>\n          </view>\n        </view>\n        <block v-if=\"isCustom\">\n          <view v-if=\"!isIconHide\" class=\"custom_box\" bindtap=\"back\">\n            <image class=\"zdy_img\" mode=\"widthFix\" :src=\"backIcon\"></image>\n          </view>\n        </block>\n        <block v-else>\n          <view class=\"capsule\" :style=\"{capsule}\" v-if=\"showCapsule\">  \n            <view class=\"back-icon\" bindtap=\"back\">\n              <image class=\"img\" :src=\"higherNav?drugBackIcon:backIcon\"></image>\n            </view>\n            <view class=\"line\"></view>\n            <view class=\"home-icon\" bindtap=\"home\" v-if=\" publicDomain == 1 \">\n              <image class=\"img\" :src=\"higherNav?drugHomeIcon:homeIcon\"></image>\n            </view>\n          </view>\n        </block>\n        <view class=\"location\" bindtap=\"selectAddress\" v-if=\" pageFrom == 'noteIndex'\">  \n          <image class=\"location__img\" src=\"../../images/index-location.png\"></image>\n          <view class=\"location__title\">{{ addressData.address ? addressData.address : '定位中...' }}\n          </view>\n          <image class=\"location__arrow\" src=\"../../images/bottom-arrow.png\"></image>\n        </view>\n        <view :class=\"[(leftStatus ? 'nav-title-left' : 'nav-title')]\" :style=\"{line-height: navHeightpx}\"> \n          <view v-if=\"titleOtherText\">  \n            <text :style=\"{color:  titleColor }\">{{titleText}}\n            </text>\n            <text class=\"title-other-point\"> • \n            </text>\n            <text class=\"title-other-text\">{{titleOtherText}}\n            </text>\n          </view>\n          <view v-else>\n            <text :style=\"{color:  titleColor }\">{{titleText}}\n            </text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".nav{\n  position: relative;\n  /* background: #fff; */\n}\n.higher-nav{\n  background: none;\n}\n.nav::before {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  /* border-bottom: 2rpx solid #EEEEEE; */\n  transform: scaleY(0.5);\n}\n.higher-nav::before{\n  border: none;\n}\n.status{\n  background: #fff;\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  z-index: 9999;\n}\n.navbar{\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 9999;\n\tpadding-bottom: 6px;\n  padding-left: 10px;\n  display: flex;\n  align-items: center;\n}\n.navbar .capsule{\n\tborder:1px solid rgba(235,235,235,1);\n\tborder-radius: 32px;\n\tdisplay: flex;\n\tjustify-content:space-around;\n\tbox-sizing: border-box;\n\t/* padding: 0 12px; */\n\talign-items: center;\n}\n.capsule .line{\n\tflex: none;\n\theight: 16px;\n\twidth: 1px;\n\tbackground: rgba(204,204,204,0.2);\n}\n.back-icon,.home-icon{\n\theight: 100%;\n\tflex: auto;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n.back-icon .img{\n  width: 17rpx;\n  height: 30rpx;\n}\n.home-icon .img{\n  width: 32rpx;\n  height: 32rpx;\n}\n.nav-title-left{\n    position: absolute;\n    transform: translate(0%, -50%);\n    left: 32rpx;\n    top: 45%;\n    color: #111334;\n    font-size:32rpx;\n    font-weight: bold;\n    text-align: center;\n}\n.nav-title{\n  position: absolute;\n  transform: translate(-50%, -50%);\n  left: 50%;\n  top: 45%;\n\tcolor: #111334;\n\tfont-size:32rpx;\n\tfont-weight: bold;\n  text-align: center;\n}\n.title-other-text{\n  position: relative;\n  top: -2rpx;\n  font-size:24rpx;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(153,153,153,1);\n}\n.title-other-point {\n  color:rgba(0,185,173,1);\n}\n\n.higher-nav {\n  position: fixed;\n  width: 100vw;\n  z-index: 100;\n  top: 0;\n}\n\n.higher-nav .nav-title {\n  color: #fff;\n}\n.higher-nav .capsule{\n  border:1px solid rgba(238,238,238,0.5);\n\tborder-radius: 32px;\n\tdisplay: flex;\n\tjustify-content:space-around;\n\tbox-sizing: border-box;\n\t/* padding: 0 12px; */\n  align-items: center;\n  background:rgba(0,0,0,0.1);\n}\n/* 自定义navbar */\n.custom_box{\n  width: 50rpx;\n  height: 50rpx;\n}\n.custom_box .zdy_img{\n  width: 19rpx;\n  height: 35rpx;\n  margin: 10rpx auto;\n}\n.location {\n  max-width: 500rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #FFFFFF;\n  display: flex;\n  align-items: center;\n}\n\n.location__title {\n  height: 42rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.location__img {\n  width: 36rpx;\n  height: 36rpx;\n  padding-right: 8rpx;\n  flex-shrink: 0;\n  margin-top: 2rpx;\n}\n\n.location__arrow {\n  width: 14rpx;\n  height: 14rpx;\n  flex-shrink: 0;\n  margin-left: 10rpx;\n}"},"convertDir/component/passWord/passWord":{"js":"export default {\n  options: {\n    multipleSlots: true,\n    addGlobalClass: true\n  },\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    defalutTitle: {\n      type: String,\n      default: '请设置线上医保支付密码'\n    },\n    hasOkBtn: {\n      type:Boolean,\n      default: false\n    },\n    //是否显示输入框\n    showPayPwdInput: {\n      type:Boolean,\n      default: false\n    },\n    // 是否自动聚焦\n    payFocus:{\n      type:Boolean,\n      default: true\n    },\n    // 是否有关闭按钮\n    hasCloseBtn: {\n      type: Boolean,\n      default: true\n    }\n  },\n  mounted: function(){\n\n  },\n  data: function() {\n    return {\n      pwdVal: '',  //输入的密码\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n  /**\n   * 显示支付密码输入层\n   */\n    showInputLayer: function(){\n      this.setData({ showPayPwdInput: true, payFocus: true });\n    },\n    /**\n     * 隐藏支付密码输入层\n     */\n    hidePayLayer: function(){\n      var val = this.data.pwdVal;\n      this.setData({ showPayPwdInput: false, payFocus: false, pwdVal: '' }, function(){\n        this.triggerEvent('getPassVal', val);\n      });\n    },\n    /**\n     * 获取焦点\n     */\n    getFocus: function(){\n      this.setData({ payFocus: true });\n    },\n     /**\n     * 确认按钮\n     */\n    handleOkBtn: function(){\n      this.hidePayLayer();\n    },\n    /**\n     * 输入密码监听\n     */\n    inputPwd: function(e){\n        this.setData({ pwdVal: e.detail.value });\n        if (e.detail.value.length >= 6 && !this.data.hasOkBtn){\n          this.hidePayLayer();\n        }\n    }\n  }\n};\n","json":{},"wxml":"\n  <view class=\"passWord-auto-container\">\n    <view v-if=\"showPayPwdInput\"> \n      <view class=\"bg_layer\"></view>\n      <view class=\"input_main\">    \n        <view class=\"input_title\">\n          <view v-if=\"hasCloseBtn\" class=\"input_back\" catchtap=\"hidePayLayer\">\n            <image src=\"../../images/half-screen-dialog-close.png\"></image>\n          </view>\n        </view>\n        <view class=\"input-content\"> \n          <view class=\"input_title-title\">{{defalutTitle}}\n          </view>\n          <slot name=\"desc\"></slot>\n        </view>\n        <view class=\"input_row\" catchtap=\"getFocus\">\n          <view class=\"pwd_item\" v-for=\"(item, item) in 6\" :key=\"item\" wx:for-index=\"i\">\n            <text v-if=\"pwdVal.length>i\"></text>\n          </view>\n        </view>\n        <view class=\"btn-ok\" v-if=\"hasOkBtn\" catchtap=\"handleOkBtn\">确认\n        </view>\n        <input class=\"input_control\" password type=\"number\" :focus=\"payFocus\" bindinput=\"inputPwd\" maxlength=\"6\" adjust-position></input>\n      </view>\n    </view>\n  </view>","wxss":"/* 支付密码css start */\n.bg_layer {\n  position: fixed;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 9998;\n}\n\n.input_main {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  width: 640rpx;\n  min-height: 200rpx;\n  border-radius: 12rpx;\n  background-color: #fff;\n  z-index: 9999;\n  transform:translate(-50%,-50%);\n}\n.input-content{\n  text-align: center;\n  font-size: 32rpx;\n  font-family: PingFangSC, PingFangSC-Regular;\n  font-weight: 400;\n  color: #333333;\n\n}\n.input_title-title{\n  margin: -30rpx 0 30rpx;\n}\n\n.input_title {\n  width: 100%;\n  height: 90rpx;\n  line-height: 90rpx;\n}\n.pay-je{\n  font-size: 38rpx;\n}\n\n.input_back {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 80rpx;\n  height: 90rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.input_back image {\n  width: 20rpx;\n  height: 20rpx;\n}\n\n.input_tip {\n  margin: 30rpx;\n  font-size: 24rpx;\n  color: #888;\n}\n\n/* 密码掩码模拟 */\n.input_row {\n  width: 580rpx;\n  margin: 65rpx auto 40rpx;\n  height: 95rpx;\n  position: relative;\n  display: flex;\n  align-items: center;\n  border: 2rpx solid #e2e2e2;\n}\n\n.input_row .pwd_item {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  border-right: 2rpx solid #e2e4ea;\n  position: relative;\n}\n\n.pwd_item:nth-last-of-type(1) {\n  border-right: 0;\n}\n\n.pwd_item text {\n  width: 30rpx;\n  height: 30rpx;\n  border-radius: 30rpx;\n  background-color: #555;\n}\n\n.forget_pwd {\n  float: right;\n  margin: 30rpx;\n  width: 100rpx;\n  text-align: right;\n  font-size: 24rpx;\n  color: #ff7800;\n}\n\n/* 文本输入框位置: 设置到左边隐藏 */\n.input_control {\n  position: relative;\n  left: -300rpx;\n  bottom: 0;\n  width: 100rpx;\n}\n\n.btn-ok{\n  width: 100%;\n  font-size: 36rpx;\n  font-family: PingFangSC, PingFangSC-Medium;\n  font-weight: 500;\n  text-align: center;\n  color: #307dff;\n  line-height: 100rpx;\n  border-top: 1rpx solid #e5e5e5;\n}"},"convertDir/component/passWord/passWord1":{"js":"export default {\n  options: {\n    multipleSlots: true,\n    addGlobalClass: true\n  },\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    defalutTitle: {\n      type: String,\n      default: '请设置线上医保支付密码'\n    },\n    hasOkBtn: {\n      type:Boolean,\n      default: false\n    },\n    //是否显示输入框\n    showPayPwdInput: {\n      type:Boolean,\n      default: false\n    },\n    // 是否自动聚焦\n    payFocus:{\n      type:Boolean,\n      default: true\n    }\n  },\n  options: {\n    multipleSlots: true,\n    addGlobalClass: true\n  },\n  mounted: function(){\n    this.showInputLayer();\n  },\n  data: function() {\n    return {\n      pwdVal: '',  //输入的密码\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n  /**\n   * 显示支付密码输入层\n   */\n    showInputLayer: function(){\n      this.setData({ showPayPwdInput: true, payFocus: true });\n    },\n    /**\n     * 隐藏支付密码输入层\n     */\n    hidePayLayer: function(){\n      var val = this.data.pwdVal;\n      this.setData({ showPayPwdInput: false, payFocus: false, pwdVal: '' }, function(){\n        this.triggerEvent('getPassVal', val);\n      });\n    },\n    /**\n     * 获取焦点\n     */\n    getFocus: function(){\n      this.setData({ payFocus: true });\n    },\n    /**\n     * 输入密码监听\n     */\n    inputPwd: function(e){\n        this.setData({ pwdVal: e.detail.value });\n        if (e.detail.value.length >= 6 && this.data.hasOkBtn){\n          this.hidePayLayer();\n        }\n    }\n  }\n};\n"},"convertDir/component/patientInfo/patientInfo":{"js":"/*\n * @Description: In User Settings Edit\n * @Author: your name\n * @Date: 2019-08-26 12:23:43\n * @LastEditTime: 2019-08-30 16:04:25\n * @LastEditors: Please set LastEditors\n */\nimport {\n  ajax2,\n  ajaxNotRepeat\n} from \"../../utils/util\";\n\nexport default {\n  onShow() {\n    console.log('patientInfo--pageLifetimes');\n    if (this.data.currentPatientId) {\n      console.log('购药补方编辑患者--', this.data.currentPatientId);\n      this.getPatient();\n    }\n  }, \n  props: {\n    pageFrom: {\n      type: String,\n      default: '',\n    },\n    currentPatientId: {\n      type: Number,\n      default: '',\n    }\n  },\n  data: function() {\n    return {\n      isSrc_whyb: getApp().globalData.src_whyb,\n      patientId: '',\n      patientName: '',\n      patientIdCard: '',\n      pastMedicalHistory: '',//病史\n      historyDrugAllergy: '',//过敏史\n      currentPatientId: null,\n      isEdit: false,\n      isShowText: false,\n      onFacus: false,\n    };\n  },\n  lifetimes: {\n    attached: function() {\n      console.log('patientInfo--attached');\n      if (this.data.currentPatientId) {\n        console.log('极速问诊编辑患者--', this.data.currentPatientId);\n        this.getPatient();\n      }\n    }\n  },\n  methods: {\n    onShowTextare() {\n      this.setData({\n        isShowText: false,\n        onFacus: true\n      })\n    },\n    onShowText() {\n      this.setData({\n        isShowText: true,\n        onFacus: false\n      })\n    },\n    getPatient() {\n      ajax2('POST', 'api/userPatient/viewUserPatient', {\n        id: this.data.currentPatientId,\n        userId: Taro.getStorageSync('userInfo').userId\n      }, (res) => {\n        if(res.data.code == 0) {\n          this.data.patientId = res.data.result.id;\n          this.setData({\n            patientName: res.data.result.patientName,\n            patientIdCard: res.data.result.patientIdCard,\n            pastMedicalHistory: res.data.result.pastMedicalHistory,\n            historyDrugAllergy: res.data.result.historyDrugAllergy\n          })\n          this.data.isEdit = true;\n        }else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg,\n          })\n        }\n      })\n    },\n    getName(e) {\n      this.setData({\n        patientName: (e.detail.value).replace(/^ +| +$/g, '')\n      })\n    },\n    checkedCard(e) {\n      let idCardReg = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$/;\n      if (idCardReg.test(e.detail.value)) {\n        this.data.patientIdCard = e.detail.value;\n        this.setData({\n          patientIdCard: this.data.patientIdCard\n        })\n      } else {\n        this.data.patientIdCard = null;\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入正确的身份证号'\n        })\n      }\n    },\n    getMedicalHistory(e) {\n      if (e.detail.value.match(/^[ ]*$/)) {\n        console.log(\"为空或全为空格\");\n        this.data.pastMedicalHistory = ''\n      } else {\n        this.data.pastMedicalHistory = e.detail.value\n      }\n      this.setData({\n        pastMedicalHistory: this.data.pastMedicalHistory\n      })\n    },\n    getHistoryDrugAllergy(e) {\n      if (e.detail.value.match(/^[ ]*$/)) {\n        console.log(\"为空或全为空格\");\n        this.data.historyDrugAllergy = ''\n      } else {\n        this.data.historyDrugAllergy = e.detail.value\n      }\n      this.setData({\n        historyDrugAllergy: this.data.historyDrugAllergy\n      })\n    },\n    submitInfo() {\n      if (!this.data.patientName) {\n        Taro.showToast({\n          title: '请输入姓名',\n          icon: 'none',\n          mask: true\n        });\n        return false\n      }\n      if (!this.data.patientIdCard) {\n        Taro.showToast({\n          title: '请输入正确的身份证号',\n          icon: 'none',\n          mask: true\n        });\n        return false\n      }\n      let data = {\n        patientName: this.data.patientName,\n        patientIdCard: this.data.patientIdCard,\n        pastMedicalHistory: this.data.pastMedicalHistory,\n        historyDrugAllergy: this.data.historyDrugAllergy,\n        userId: Taro.getStorageSync('userInfo').userId\n      }\n      let url;\n      if (this.data.isEdit) {\n        url = 'api/userPatient/updateUserPatient';\n        data.id = this.data.patientId\n      } else {\n        url = 'api/userPatient/saveUserPatient'\n      }\n      ajaxNotRepeat('POST', url, data, \"application/json\", (res) => {\n        if(res.data.code == 0) {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n          if(this.data.pageFrom == 'currentPage') {\n            this.triggerEvent('updata');\n            return false;\n          }\n\n          if (this.data.pageFrom == 'inquiryInfo') {\n            var pages = getCurrentPages();\n            var prevPage = pages[pages.length - 2];\n            prevPage.setData({\n              patientObj: {\n                patientName: res.data.result.patientName,\n                patientSex: res.data.result.patientSex,\n                patientAge: res.data.result.patientAge,\n                id: res.data.result.id\n              }\n            })\n          }\n          Taro.navigateBack({\n            delta: 1\n          }) \n        }else{\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    }\n  }\n};","json":{},"wxml":"\n  <view class=\"patientInfo-auto-container\">\n    <view :class=\"[container,( isSrc_whyb ? 'djk-view' : '' )]\"> \n      <view class=\"tips\">提示：为了问诊和处方的有效性，请您仔细填写个人信息，确保姓名和身份证信息填写无误\n      </view>\n      <view class=\"common_section\">    \n        <view class=\"cell\"> \n          <view class=\"cell_left\">姓名\n          </view>\n          <view class=\"cell_center\">\n            <input placeholder=\"请输入\" type=\"text\" placeholder-class=\"phcolor\" bindinput=\"getName\" maxlength=\"8\" :value=\" patientName \"></input>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"cell_left\">身份证号\n          </view>\n          <view class=\"cell_center\">\n            <input placeholder=\"请输入\" placeholder-class=\"phcolor\" bindblur=\"checkedCard\" maxlength=\"18\" :value=\" patientIdCard \"></input>\n          </view>\n        </view>\n        <view class=\"cell\">\n          <view class=\"cell_center\">  \n            <view>过往病史\n            </view>\n            <textarea placeholder=\"没有病史请填写“无”\" maxlength=\"300\" placeholder-class=\"phcolor\" bindinput=\"getMedicalHistory\" :value=\" pastMedicalHistory \"></textarea>\n            <view class=\"count\">{{pastMedicalHistory.length}}/300\n            </view>\n          </view>\n        </view>\n        <view class=\"cell\">\n          <view class=\"cell_center\">   \n            <view>药物过敏史\n            </view>\n            <textarea placeholder=\"没有药物过敏史请填写“无”\" maxlength=\"300\" placeholder-class=\"phcolor\" bindinput=\"getHistoryDrugAllergy\" :value=\" historyDrugAllergy \" :focus=\" onFacus \" bindconfirm=\"onShowText\" v-if=\" !isShowText \"></textarea>\n            <text class=\"text_show\" :style=\"{color: historyDrugAllergy.length > 0 ? '#666666' : '#cccccc' }\" bindtap=\"onShowTextare\" v-else>{{ historyDrugAllergy.length > 0 ? historyDrugAllergy : '没有药物过敏史请填写“无”'}}\n            </text>\n            <view class=\"count\">{{historyDrugAllergy.length}}/300\n            </view>\n          </view>\n        </view>\n        <view class=\"common_footer\"> \n          <button v-if=\" patientName && patientIdCard && pastMedicalHistory && historyDrugAllergy \" class=\"active\" bindtap=\"submitInfo\">保存\n          </button>\n          <button v-else>保存\n          </button>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"@import '/common/tableView.wxss';\n\n.tips {\n  background: #FFFBE6;\n  font-size: 28rpx;\n  color: #F8890A;\n  padding: 20rpx 24rpx;\n}\n.common_section {\n  padding-bottom: 140rpx;\n}\n.common_section .cell {\n  padding: 24rpx;\n  font-size: 30rpx;\n  color: #333333;\n}\n.common_section .cell .cell_left {\n  min-width: 120rpx;\n  margin-right: 40rpx;\n}\n.common_section .cell .cell_center {\n  flex: 1;\n}\n.common_section .cell .cell_center .count{\n  text-align: right;\n  color: #999999;\n  font-size: 24rpx;\n}\n.common_section .cell textarea {\n  margin-top: 10rpx;\n  color: #666666;\n  width: 100%;\n  height: 180rpx;\n}\n.common_section .cell .text_show {\n  width: 100%;\n  height: 150px;\n  color: #666666;\n  display: inline-block;\n  margin-top: 10rpx;\n}\n.phcolor {\n  color: #CCCCCC\n}\n.common_footer {\n  background: #FFFFFF\n}"},"convertDir/component/register/register":{"js":"/*\n * @Description: In User Settings Edit\n * @Author: your name\n * @Date: 2019-08-26 12:23:43\n * @LastEditTime: 2019-08-30 16:04:25\n * @LastEditors: Please set LastEditors\n */\nimport {\n  url,\n  ajax,\n  ajax2\n} from \"../../utils/util\";\nconst app = getApp();\n\nexport default {\n  onShow: function() {\n    // 页面被展示\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n  },\n\n  props: {\n    buttonType: {\n      type: String,\n      default: '',\n    },\n    source: {\n      type: Boolean,\n      default: '',\n    },\n    userData: {\n      type: Object,\n      default: ''\n    },\n  },\n\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      registerInfo: {\n        name: '',\n        idCard: '',\n        phone: '',\n        validateCode: ''    \n      },\n      codeStatus: false,\n      sendMsg: \"60s重发\",\n      addClickTime: false,\n      buttonActive: false\n    };\n  },\n\n  methods: {\n    getPhone(e){\n      this.data.registerInfo.phone = e.detail.value;\n    },\n    //发送验证码\n    getCode: function () {\n      let phone = this.data.registerInfo.phone;\n      if (phone) {\n        if (phone.length < 11) {\n          Taro.showToast({\n            title: '请输入11位数手机号',\n            icon: 'none',\n            mask: true\n          });\n          return false\n        }\n        ajax(\"get\", \"mimiapp/userCertification/sendVerifier\", {\n          phone: phone\n        }, res => {\n          console.log(res);\n          if (res.data.code == 0) {\n            var time = 60;\n            var codeTime = setInterval(() => {\n              time--;\n              if (time <= 0) {\n                this.setData({\n                  codeStatus: false,\n                  sendMsg: '获取验证码'\n                });\n                clearInterval(codeTime);\n              } else {\n                this.setData({\n                  codeStatus: true,\n                  sendMsg: time + 's重发'\n                });\n              }\n            }, 1000)\n          }\n          this.setData({\n            codeStatus: false,\n          });\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none',\n            mask: true\n          });\n        }, res => {\n          Taro.showToast({\n            title: '发送失败',\n            icon: 'none',\n            mask: true\n          });\n          this.setData({\n            codeStatus: false,\n          });\n        })\n      } else {\n        Taro.showToast({\n          title: '请输入手机号码',\n          icon: 'none',\n          mask: true,\n        });\n      }\n    },\n    formSubmit(e) {\n      //避免重复点击\n      if (new Date() - this.data.addClickTime < 2000) {\n        return false;\n      }\n      this.data.addClickTime = new Date();\n      Taro.showLoading({\n        mask: true,\n        title: '加载中',\n      })\n      let formData = e.detail.value;\n      this.data.registerInfo.name = formData.name.trim();\n      this.data.registerInfo.idCard = formData.idCard;\n      this.data.registerInfo.validateCode = formData.validateCode;\n      this.data.registerInfo.phone = formData.phone;\n      if (!this.data.registerInfo.name) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入姓名'\n        })\n        return false;\n      }\n      let idCardReg = /\\d{14}(\\d{3})?[0-9xX]/;\n      if (!idCardReg.test(this.data.registerInfo.idCard)) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入正确的身份证号'\n        })\n        return false;\n      }\n      if (!this.data.registerInfo.phone || this.data.registerInfo.phone.length < 11) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入正确的手机号'\n        })\n        return false;\n      }\n      if (!this.data.registerInfo.validateCode || this.data.registerInfo.validateCode.length < 4) {\n        Taro.showToast({\n          icon: 'none',\n          title: '请输入正确的验证码'\n        })\n        return false;\n      }\n      let url = this.data.buttonType == '1' || !this.data.userData ? 'mimiapp/userCertification/addUserCertification' : 'mimiapp/userCertification/updateUserCertification';\n      ajax2('post', url, this.data.registerInfo, res => {\n        Taro.hideLoading();\n        if(res.data.code == 0) {\n          Taro.showToast({\n            title: res.data.msg\n          })\n          //1代表活动入口新增，2代表修改实名信息\n          if (this.data.buttonType == '1') {\n            this.triggerEvent(\"success\");\n          }else{\n            var pages = getCurrentPages();\n            var prevPage = pages[pages.length - 2]; //上一个页面\n            prevPage && prevPage.setData({\n              selectedUserInfo: this.data.registerInfo\n            })\n            Taro.showToast({\n              icon: 'none',\n              title: res.data.msg\n            })\n            setTimeout(x => {\n              Taro.navigateBack({\n                delta: 1\n              })\n            },1000)\n          }\n        }else {\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg\n          })\n        }\n      })\n    }\n  },\n\n  watch: {\n    userData: function (newVal, oldVal) {\n      if (this.data.buttonType == '2' && this.data.userData) {\n        this.setData({\n          registerInfo: this.data.userData\n        })\n      }\n    }\n  }\n};","json":{},"wxss":"/* component/register/register.wxss */\n@import '../../common/tableView.wxss';\n.register {\n  padding: 0 30rpx;\n}\n.register .title {\n  font-size: 36rpx;\n  display: flex;\n  justify-content: center;\n  margin: 80rpx auto;\n}\n.register .title image{\n  width: 44rpx;\n  height: 44rpx;\n  margin-right: 10rpx;\n}\n.register .content .cell {\n  margin-bottom: 50rpx;\n}\n.register .content .cell .name {\n  font-size: 32rpx;\n  margin-bottom: 6rpx;\n  position: relative;\n  padding-left: 30rpx;\n}\n.register .content .cell .name::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 50%;\n  margin-top: -10rpx;\n  width: 20rpx;\n  height: 20rpx;\n  background-image: url('https://tuan-static.ybm100.com/ykq/miniapp/images/star_icon.png');\n  background-size: 100%;\n}\n.register .content .cell .input_box {\n  margin: 0 30rpx;\n  height: 90rpx;\n  border-bottom: 1rpx solid #E1E1E1;\n  display: flex;\n  justify-content: space-between\n}\n.register .content .cell .input_box input {\n  width: 100%;\n  height: 100%;\n  font-size: 30rpx;\n}\n.register .content .cell .input_box .change_width {\n  width: 60%;\n}\n.register .content .cell .input_box button {\n  background: none;\n  margin: 0;\n  font-size: 30rpx; \n}\n.register .content .cell .input_box .sending_code {\n  color: #999999\n}\n.register .submit_btns {\n  color: #FFFFFF;\n  font-size: 36rpx;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100rpx;\n  opacity:0.3;\n}\n.register .submit_btns.active{\n  opacity: 1;\n}\n.register .tips {\n  position: fixed;\n  bottom: 100rpx;\n  margin: 30rpx auto;\n  display: flex;\n  left: 0;\n  right: 0;\n  justify-content: center;\n  align-items: flex-start;\n  color: #666666;\n  font-size: 24rpx;\n  line-height: 33rpx;\n}\n.register .tips image {\n  width: 122rpx;\n  height: 32rpx;\n  margin-right: 4rpx;\n}\n\n.wuhan_register .title {\n  color: #5065A8;\n}\n.wuhan_register .content .cell .input_box button {\n  color: #5065A8;\n}\n.wuhan_register .submit_btns {\n  background: #5065A8\n}","wxml":"\n  <view class=\"register-auto-container\">\n    <view :class=\"[register,( source ? 'wuhan_register' : '' ),(isDjk?'djk':'')]\"> \n      <view class=\"title theme-text\"> \n        <image src=\"../../images/djk_smrz_user.png\"></image>\n        <text>实名登记\n        </text>\n      </view>\n      <form bindsubmit=\"formSubmit\" class=\"content\">     \n        <view class=\"cell\"> \n          <view class=\"name\">姓名\n          </view>\n          <view class=\"input_box\">\n            <input placeholder=\"请填写姓名\" name=\"name\" :value=\" registerInfo.name \" type=\"text\"></input>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"name\">身份证号\n          </view>\n          <view class=\"input_box\">\n            <input placeholder=\"请输入身份证号\" name=\"idCard\" type=\"text\" :value=\" registerInfo.idCard \" maxlength=\"18\"></input>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"name\">联系方式\n          </view>\n          <view class=\"input_box\">\n            <input placeholder=\"请输入手机号\" name=\"phone\" type=\"number\" :value=\" registerInfo.phone \" maxlength=\"11\" bindinput=\"getPhone\" bindblur=\"getPhone\"></input>\n          </view>\n        </view>\n        <view class=\"cell\"> \n          <view class=\"name\">验证码\n          </view>\n          <view class=\"input_box\"> \n            <input placeholder=\"请输入验证码\" type=\"number\" maxlength=\"4\" name=\"validateCode\" :value=\"registerInfo.validateCode \" class=\"change_width\"></input>\n            <button :disabled=\"codeStatus\" :class=\"[theme-text,(codeStatus?'sending_code':'')]\" bindtap=\"getCode\">{{codeStatus?sendMsg:'获取验证码'}}\n            </button>\n          </view>\n        </view>\n        <view class=\"tips\" v-if=\" buttonType == '1' \"> \n          <image src=\"../../pages/onlineGoods/images/mini_logo.png\"></image>\n          <text>提供技术支持\n          </text>\n        </view>\n        <button class=\"submit_btns active theme-bg\" formType=\"submit\">{{ buttonType == '1' ? '去预约' : '确认' }}\n        </button>\n      </form>\n    </view>\n  </view>"},"convertDir/component/scanCodeTabBar/tabBar":{"json":{},"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    active: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data: function() {\n    return {\n      tabbarHeight: null\n    };\n  },\n  lifetimes: {\n    attached() {\n      \n    }\n  },\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n\n  }\n};\n","wxss":".im_tabbar {\n  width: 100%;\n  height: 84rpx;\n  line-height: 84rpx;\n  text-align: center;\n  background-color: #FFFFFF;\n}\n.im_tabbar >view{\n  display: inline-block;\n}\n.im_tabbar_item {\n  font-size: 28rpx;\n  color: #999999;\n}\n\n.im_tabbar_item.active {\n  color: #00b955;\n}\n\n.right_icon {\n  width: 20rpx;\n  height: 20rpx;\n  margin-left: 30rpx;\n  margin-right: 30rpx;\n}","wxml":"\n  <view class=\"tabBar-auto-container\">\n    <view class=\"im_tabbar\">      \n      <view></view>\n      <view :class=\"[im_tabbar_item,( active === '1'?'active':'' )]\">填写信息\n      </view>\n      <image mode=\"widthFix\" class=\"right_icon\" src=\"../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im_tabbar_item,( active === '2'?'active':'' )]\">咨询医生\n      </view>\n      <image mode=\"widthFix\" class=\"right_icon\" src=\"../../images/icon_right_tab_bar.png\"></image>\n      <view :class=\"[im_tabbar_item,( active === '3'?'active':'' )]\">查看处方\n      </view>\n      <view></view>\n    </view>\n  </view>"},"convertDir/component/shopCart/shopCart":{"json":{"missingData-view":"../missingData/missingData"},"wxml":"\n  <view class=\"shopCart-auto-container\">\n    <view :class=\"[shopCart,(isDjk?'djk':'')]\">    \n      <view class=\"common_section shopList\" v-if=\" goodsList.list.length > 0 || isSearch == 0\"> \n        <view class=\"cell\" v-for=\"(item, key) in goodsList.list\" :key=\"key\" wx:for-index=\"index\" :id=\"'b'+index\" catchtap=\"toOrderDetail\" :data-item=\"item\"> \n          <view class=\"cell_left\"> \n            <image :src=\"item.img\"></image>\n            <view class=\"over_status\" v-if=\"item.stock <= 0\">已抢光\n            </view>\n          </view>\n          <view class=\"cell_center\">   \n            <view class=\"name\">{{item.medicinesName}} {{item.commonName}}\n              <text v-if=\"item.limitPurchaseAct\">限{{item.limitPurchaseAct.limitNum}}件\n              </text>\n            </view>\n            <view class=\"spec\">{{item.product_spec}}\n            </view>\n            <view class=\"active_tag\">\n              <view class=\"tag\" v-for=\"(nameItem, key) in  item.activityNameList \" :key=\"key\">{{ nameItem }}\n              </view>\n            </view>\n            <view class=\"detail\"> \n              <view class=\"widthControl\"> \n                <text class=\"price\">{{ item.activityInfo ? item.activityInfo.actPrice : item.sellingPric }}\n                  <text class=\"symbol\">¥\n                  </text>\n                </text>\n                <text class=\"common-line-price\" v-if=\"item.activityInfo\">¥{{item.price}}\n                </text>\n              </view>\n              <view class=\"cart_button\" v-if=\"item.stock > 0\">  \n                <view class=\"button less\" v-if=\"item.number > 0 \" catchtap=\"lessDrug\" :data-item=\"item\" :data-index=\"index\">\n                  <view>-\n                  </view>\n                </view>\n                <view class=\"text\" v-if=\" item.number > 0 \">{{item.number}}\n                </view>\n                <view class=\"button\" catchtap=\"addDrug\" :data-item=\"item\" :data-index=\"index\">\n                  <view>+\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n        <view :style=\"{height:  isIPX ? 146 : 100 rpx}\" v-if=\" pageFrom != 'drugList'\"></view>\n      </view>\n      <block v-else>\n        <missingData-view zhi=\"new1\" textval2=\"未找到符合条件的商品\" :imageUrl=\" url_link + 'images/empty-check-list.png' \"></missingData-view>\n      </block>\n      <view class=\"black_box\" v-if=\"cartShow && shopCart.totalNumer >0\" bindtap=\"cartDetail\"></view>\n      <view class=\"fixed-boxs\" v-if=\"cartShow && shopCart.totalNumer >0\" :style=\"{bottom:  isIPX ? '148rpx' : '126rpx' }\"> \n        <view class=\"head\">  \n          <view class=\"title\">已选商品\n          </view>\n          <image src=\"../../images/clear_ss.png\" bindtap=\"clearCart\"></image>\n          <view bindtap=\"clearCart\">清空\n          </view>\n        </view>\n        <view class=\"cart_list common_section\">\n          <view class=\"cell\" v-for=\"(item, index) in shopCart.list\"> \n            <view class=\"cell_left\">{{item.medicinesName}} {{item.commonName}}\n              <text class=\"mark-icon\" v-if=\"item.activityInfo\">惠\n              </text>\n            </view>\n            <view class=\"cell_bottom\"> \n              <view class=\"cell_center\">   \n                <text>¥{{item.actPriceCount}}\n                </text>\n                <text v-if=\"item.activityInfo\" class=\"common-line-price text\">¥{{item.priceCount}}\n                </text>\n                <text class=\"text\" v-if=\"item.activityInfo && item.activityInfo.realDiscountCount == 0\">活动商品购买数量已达上限\n                </text>\n                <text class=\"text\" v-else-if=\"item.activityInfo && item.number > item.activityInfo.realDiscountCount\">含{{item.activityInfo.realDiscountCount}}件活动商品\n                </text>\n              </view>\n              <view class=\"cart_button cell_right\">  \n                <view class=\"button less\" bindtap=\"lessDrug\" :data-item=\"item\">\n                  <view>-\n                  </view>\n                </view>\n                <view class=\"text\">{{item.number}}\n                </view>\n                <view class=\"button\" bindtap=\"addDrug\" :data-item=\"item\">\n                  <view>+\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view :class=\"[fixed-bottom,( cartShow && shopCart.totalNumer >0 ? 'fixed-bg' : '' )]\" :style=\"{padding-bottom:  isIPX ? '46rpx' : '26rpx' }\">\n        <view class=\"fixed-bottom__content\">   \n          <view class=\"left\" bindtap=\"cartDetail\"> \n            <view class=\"cart-img\">\n              <image src=\"../../pages/onlineGoods/images/icon-cart.png\"></image>\n            </view>\n            <view class=\"number\" v-if=\" shopCart.totalNumer > 0 \">{{shopCart.totalNumer >= 100 ? '99+' : shopCart.totalNumer}}\n            </view>\n          </view>\n          <view class=\"center\">  \n            <view class=\"price\" v-if=\" shopCart.actTotalPrice > 0 && shopCart.totalNumer > 0 \">{{ shopCart.actTotalPrice }}\n              <text>¥\n              </text>\n            </view>\n            <view class=\"price price--white\" v-else>未选购商品\n            </view>\n            <view class=\"text\">商品金额 ¥{{shopCart.totalPrice}}  优惠 ¥{{shopCart.discountTotalPrice}}\n            </view>\n          </view>\n          <view class=\"right\" bindtap=\"toOrder\" v-if=\"sess_key\">提交需求\n          </view>\n          <view class=\"right\" bindtap=\"toLogin\" v-else>登录确认信息\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":"@import '../../common/tableView.wxss';\n\n.shopList .cell {\n  padding: 24rpx 30rpx 15rpx;\n}\n\n.shopList scroll-view {\n  box-sizing: border-box;\n  -webkit-overflow-scrolling: touch;\n}\n\n.shopList .cell_left {\n  width: 160rpx;\n  height: 160rpx;\n  background: #eee;\n  margin-right: 20rpx;\n  flex: inherit;\n  flex-shrink: 0;\n  position: relative;\n}\n\n.shopList .cell_left .over_status {\n  width: 110rpx;\n  height: 110rpx;\n  text-align: center;\n  line-height: 110rpx;\n  border-radius: 100rpx;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -55rpx 0 0 -55rpx;\n  font-size: 24rpx;\n}\n\n.shopList .cell_center {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.shopList .cell_center .name {\n  color: #292626;\n  font-weight: bold;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n.shopList .cell_center .name text {\n  background: linear-gradient(to right, #FF884A, #FF3232);\n  height: 30rpx;\n  font-size: 20rpx;\n  color: #FFFFFF;\n  border-radius: 2rpx;\n  padding: 0 4rpx;\n  margin-right: 8rpx;\n}\n\n.shopList .cell_center .spec {\n  color: #9D9FB8;\n  font-size: 24rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n  word-break: break-all;\n}\n\n.shopList .cell_center .detail {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.shopList .cell_center .detail .price {\n  color: #e02e24;\n  font-weight: bold;\n  font-size: 32rpx;\n}\n\n.shopList .cell_center .detail .widthControl {\n  max-width: 220rpx;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 20rpx;\n}\n\n/* .shopList .cell_center .detail .price text {\n  font-size: 20rpx;\n  color: #8a8080;\n  position: relative;\n  margin-left: 12rpx;\n  font-weight: normal;\n}\n\n.shopList .cell_center .detail .price text::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 100%;\n  height: 2rpx;\n  background: #8a8080;\n} */\n\n.shopList .cell_center .detail .price .symbol {\n  font-size: 24rpx;\n  font-weight: bold;\n  color: #e02e24;\n}\n\n/* 公用加减按钮样式 */\n\n.cart_button {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.cart_button .bubble {\n  position: absolute;\n  right: -6rpx;\n  top: -6rpx;\n  width: 30rpx;\n  height: 30rpx;\n  border-radius: 1rpx solid #FFFFFF;\n  background: #FF4B33;\n  color: #FFFFFF;\n  font-size: 20rpx;\n  text-align: center;\n  border-radius: 30rpx;\n}\n\n.cart_button .text {\n  padding: 0 20rpx;\n  font-size: 26rpx;\n}\n\n.cart_button .button {\n  padding: 10rpx;\n}\n\n.cart_button .button view {\n  width: 44rpx;\n  height: 44rpx;\n  line-height: 36rpx;\n  border-radius: 44rpx;\n  text-align: center;\n  background: #00b955;\n  color: #fff;\n  font-size: 44rpx;\n}\n\n.cart_button .less view {\n  border: 1px solid #00b955;\n  background: none;\n  color: #00b955;\n  box-sizing: border-box;\n  line-height: 28rpx;\n}\n\n/* 结束 */\n\n.black_box {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 4;\n}\n\n.fixed-boxs {\n  position: fixed;\n  bottom: 140rpx;\n  left: 0;\n  width: 100%;\n  z-index: 4;\n  background: #FFFFFF;\n  border-top-left-radius: 16rpx;\n  border-top-right-radius: 16rpx;\n  overflow: hidden;\n}\n\n.fixed-boxs .head {\n  height: 70rpx;\n  line-height: 70rpx;\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  color: #8a8080;\n  font-size: 28rpx;\n  background: #f4f4f4;\n  padding: 0 30rpx;\n}\n\n.fixed-boxs .head .title {\n  flex: 1;\n}\n\n.fixed-boxs .head image {\n  width: 24rpx;\n  height: 26rpx;\n  margin-right: 6rpx;\n  margin-top: 22rpx;\n}\n\n.fixed-boxs .cart_list {\n  max-height: 500rpx;\n  overflow-y: scroll;\n}\n\n.fixed-boxs .cart_list .cell {\n  min-height: 100rpx;\n  display: block;\n  padding: 20rpx 30rpx;\n}\n\n.fixed-boxs .cart_list .cell_left {\n  white-space: nowrap;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.fixed-boxs .cart_list .cell_bottom {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.fixed-boxs .cart_list .cell .cell_center {\n  color: #e3383b;\n  margin-top: 10rpx;\n  font-size: 28rpx;\n}\n.fixed-boxs .cart_list .cell .cell_center .text{\n  font-size: 20rpx;\n  color: #999999;\n  margin-right: 10rpx;\n}\n.fixed-bottom {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  box-sizing: border-box;\n  z-index: 2;\n  background: #FFFFFF;\n}\n.fixed-bg {\n  background: #FFFFFF;\n  z-index: 4;\n  border-top: 2rpx solid #EEEEEE;\n}\n.fixed-bottom__content {\n  height: 100rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #9AA0B5;\n  font-size: 24rpx;\n  padding-right: 24rpx;\n}\n\n.fixed-bottom .left {\n  position: relative;\n  padding: 0 17rpx;\n}\n\n.fixed-bottom .left .cart-img {\n  width: 90rpx;\n  padding: 22rpx 0;\n  text-align: center;\n}\n.fixed-bottom .left .cart-img image {\n  width: 48rpx;\n  height: 48rpx;\n  margin: auto;\n}\n.fixed-bottom .left .number {\n  position: absolute;\n  top: 10rpx;\n  right: 20rpx;\n  padding: 0 6rpx;\n  text-align: center;\n  line-height: 30rpx;\n  color: #fff;\n  font-size: 20rpx;\n  background: #FF4531;\n  border-radius: 50rpx;\n  min-width: 20rpx;\n}\n\n.fixed-bottom .center {\n  flex: 1;\n}\n\n.fixed-bottom .center .price {\n  color: #111734;\n  font-size: 36rpx;\n  font-weight: bold;\n}\n.fixed-bottom .center .price--white {\n  color: #111734;\n  font-size: 32rpx;\n  padding-top: 8rpx;\n}\n\n.fixed-bottom .right {\n  padding: 0 28rpx;\n  height: 100%;\n  text-align: center;\n  height: 72rpx;\n  line-height: 72rpx;\n  background: #00b955;\n  color: #fff;\n  font-size: 28rpx;\n  font-weight: bold;\n  border-radius: 36rpx;\n}\n\n.searchTips {\n  font-size: 28rpx;\n  color: #8a8080;\n  padding-left: 20rpx;\n  padding-top: 20rpx;\n}\n.active_tag {\n  display: flex;\n  flex-wrap: wrap;\n}\n.active_tag .tag{\n  padding: 0 10rpx;\n  height: 30rpx;\n  border-radius: 4rpx;\n  background: #FFF4F4;\n  border-radius: 2rpx;\n  line-height: 30rpx;\n  text-align: center;\n  font-size: 20rpx;\n  color: #FF2121;\n  margin: 10rpx 10rpx 0 0;\n}","js":"import {\n  url,\n  ajax,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n// Object.value Polyfill\nif (!Object.values) Object.values = function(obj) {\n    if (obj !== Object(obj))\n        throw new TypeError('Object.values called on a non-object');\n    var val=[],key;\n    for (key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj,key)) {\n            val.push(obj[key]);\n        }\n    }\n    return val;\n}\nconst app = getApp();\n\nexport default {\n  onShow() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n    this.setData({\n      sess_key: getApp().globalData.sess_key,\n      isIPX: getApp().globalData.isIPX,\n      // isAddCart: null\n    })      \n    this.getOnlineGoods();\n  },\n  props: {\n    areaId: Number,\n    goodsId: Number,\n    drugStoreId: Number,\n    isAddCart: Number,\n    goodsName: String,\n    pageName: Number,\n    searchEmpty: String,\n    couponId: String,\n    textvalName: String,\n    isSearch: Number, //判断是否展示缺省图\n    pageFrom: String,\n    scrollHeight: Number,\n    type: String,\n    accountId: String,\n    scrollY: Boolean\n  },\n  data: function() {\n    return {\n      url_link: cdnStaticResourceUrl,\n      isDjk: getApp().globalData.src_whyb ? true : false,\n      goodsList: {},//在线商品列表\n      currentPage: 1,\n      cart: Taro.getStorageSync('cart') || {},\n      shopCart: {\n        list: [],\n        totalNumer: 0,\n        totalPrice: 0,\n        actTotalPrice: 0,\n        discountTotalPrice: 0\n      },\n      cartShow: false,\n      empty: false,\n      isclick: true,\n      cartLength: 0,\n      sess_key: getApp().globalData.sess_key,\n      toView: null,\n      isIPX: getApp().globalData.isIPX,\n    };\n  },\n  mounted() {\n    this.setData({\n      sess_key: getApp().globalData.sess_key\n    })\n  },\n  methods: {\n    toLogin(){\n      Taro.navigateTo({\n        url: '/pages/note/login/login',\n      })\n    },\n    updateCart(){\n      this.data.cart = Taro.getStorageSync('cart') || {}\n    },\n    //获取在线商品列表\n    getOnlineGoods(goodsId, orderByType) {\n      // Taro.showLoading({\n      //   title: '加载中',\n      // })\n      let data = {};\n      let url = '';\n      //couponid存在代表展示优惠券聚合商品\n      if(this.properties.couponId) {\n        url = 'couponController/queryMedicinesByCouponId';\n        data = {\n          couponId: this.properties.couponId\n        }\n      }else {\n        if(getApp().globalData.src_whyb){\n          url = '/miniapp/bighealth/medicine/getDrugstoreGoodsByClassifyId';\n        }else{\n          url = 'mimiapp/drugStoreClassify/getDrugstoreGoodsByClassifyId';\n        }\n        \n        data = {\n          drugstoreId: this.properties.drugStoreId,\n          channel: 'MINI'\n        }\n        if (this.properties.goodsName.length > 0) {\n          data.searchText = this.properties.goodsName;\n          this.setData({\n            isSearch: 1\n          })\n        }else{\n          data.classifyId = this.properties.areaId\n        }\n      }\n      //价格排序\n      data.orderByType = orderByType || ''; \n      if(orderByType) data.orderByField = 'price';\n      ajax('get', url, data, res => {\n        Taro.hideLoading();\n        if (res.data.code == 0) {\n          let goodsList = {};\n          if(!res.data.result){\n            goodsList = {};\n            this.data.empty = true;\n          }else{\n            this.data.empty = false;\n            goodsList = this.data.goodsList;\n            if (this.data.currentPage == 1) {\n              goodsList = res.data.result;\n            } else {\n              goodsList.list = [...goodsList.list, ...res.data.result.list]\n            }\n            for (let i in goodsList.list) {\n              goodsList.list[i].number = 0;\n            }\n            this.data.goodsList = goodsList;\n            goodsList.list.forEach((item, index) => {\n              if (goodsId == item.medicinesId){\n                this.data.toView = `b${index}`;\n                console.log(this.properties.isAddCart, this.data.isAddCart)\n                if (this.properties.isAddCart == 1){\n                  let cart = Taro.getStorageSync('cart') || {};\n                  item.number = cart[this.properties.drugStoreId] && cart[this.properties.drugStoreId][goodsId] ? cart[this.properties.drugStoreId][goodsId].number : 0\n                  this.addDrug(null, item)\n                }\n                return false;\n              }\n            })\n            this.cartCount();\n          }\n          this.setData({\n            goodsList: goodsList,\n            empty: this.data.empty,\n            toView: this.data.toView\n          })    \n        }else{\n          Taro.showToast({\n            icon: 'none',\n            title: res.data.msg,\n          })\n        }\n      })\n    },\n    //添加购物车\n    addDrug(e, value, isShow, callback){\n      // 判断是否登录\n      if (!getApp().globalData.sess_key) {\n        Taro.navigateTo({\n          url: `/pages/note/login/login`\n        })\n        return false;\n      }\n      let cart = Taro.getStorageSync('cart') || {};\n      let currentItem = value || e.currentTarget.dataset.item;\n      let currentIndex = e ? e.currentTarget.dataset.index : -1;\n      cart[this.properties.drugStoreId] = Taro.getStorageSync('cart')[this.properties.drugStoreId] || {};\n      //判断是否有库存\n      if (currentItem.stock - currentItem.number <= 0) {\n        Taro.showToast({\n          title: '超过最大可售库存',\n          icon: 'none'\n        })\n        //返回实际加购物数量\n        callback && callback(currentItem.number);\n        return false;\n      }\n      //判断是否超过限购库存\n      if(currentItem.limitPurchaseAct && (currentItem.number >= currentItem.limitPurchaseAct.surplusLimitPurchaseNum)) {\n        Taro.showToast({\n          title: '商品超出限购数量',\n          icon: 'none'\n        })\n        callback && callback(currentItem.number);\n        return false;\n      }\n      console.log(Number(currentItem.medicinesIsNumb),'含麻')\n      //判断购物车中含麻商品数量\n      if (Number(currentItem.medicinesIsNumb)) {\n        let hempLength = 1;\n        Object.values(cart[this.properties.drugStoreId]).forEach(item => {\n          console.log(item, item.medicinesIsNumb, hempLength)\n          if (Number(item.medicinesIsNumb)) {\n            hempLength += hempLength * item.number;\n            console.log(hempLength)\n          }\n        })\n        if (hempLength > 2) {\n          Taro.showToast({\n            title: '购买含麻药品已达上限，请明天再试',\n            icon: 'none'\n          })\n          callback && callback(currentItem.number);\n          return false;\n        }\n      }\n      //如果直接传递了要加入购物车的索引 主要用于区分组件内加购和调用组件加购\n      if (currentIndex >= 0) { \n        this.data.goodsList.list[currentIndex].number++;\n        currentItem.number = this.data.goodsList.list[currentIndex].number;\n      } else {\n        //商品详情加购goodsList.list为空，\n        if (this.data.goodsList.list && isShow) {\n          let cartIndex;\n          //查找对应药品的索引值\n          this.data.goodsList.list.forEach((item, index) => {\n            if (item.medicinesId == currentItem.medicinesId) {\n              cartIndex = index;\n            }\n          })\n          if (cartIndex >= 0) {\n            this.data.goodsList.list[cartIndex].number++;\n            currentItem.number = this.data.goodsList.list[cartIndex].number;\n          } else {\n            currentItem.number++;\n          }\n        } else {\n          let matchItem;\n          if(Object.values(cart[this.properties.drugStoreId]).length > 0) {\n            Object.values(cart[this.properties.drugStoreId]).forEach(item => {\n              console.log(item, currentItem)\n              if (item.medicinesId == currentItem.medicinesId) {\n                matchItem = item;\n              }\n            })\n            currentItem.number = matchItem ? matchItem.number+1 : 1;\n          }else {\n            currentItem.number++\n          } \n        }\n      }\n      cart[this.properties.drugStoreId][currentItem.medicinesId] = currentItem\n      Taro.setStorageSync('cart', cart);\n      this.setData({\n        goodsList: this.data.goodsList\n      })\n      callback && callback(currentItem.number);\n      this.cartTotal();\n    },\n    //删减购物车\n    lessDrug(e, value, name) {\n      let cart = Taro.getStorageSync('cart') || {};\n      let currentItem = value || e.currentTarget.dataset.item;\n      let currentIndex = e ? (e.currentTarget.dataset.index || -1) : -1;\n      if (currentIndex >= 0) {\n        this.data.goodsList.list[currentIndex].number--;\n        currentItem.number = this.data.goodsList.list[currentIndex].number;\n        if(currentItem.number < 0) return;//异常逻辑处理\n      } else {\n        //订单是否有列表且来源不是热销爆款商品（其实就是组件内没有列表的商品，直接减购物数据）\n        if (this.data.goodsList.list && currentItem.type != 'hotGoods') {\n          let cartIndex;\n          this.data.goodsList.list.forEach((item, index) => {\n            if (item.medicinesId == currentItem.medicinesId) {\n              cartIndex = index;\n            }\n          })\n          if (cartIndex >= 0) {\n            this.data.goodsList.list[cartIndex].number--;\n            currentItem.number = this.data.goodsList.list[cartIndex].number;\n          } else {\n            currentItem.number--;\n          }\n        } else {\n          Object.values(cart[this.properties.drugStoreId]).forEach(item => {\n            console.log(item, currentItem)\n            if (item.medicinesId == currentItem.medicinesId) {\n              currentItem.number--\n            }\n          })\n        }\n      }\n      cart[this.properties.drugStoreId][currentItem.medicinesId] = currentItem;\n      console.log(cart[this.properties.drugStoreId][currentItem.medicinesId].number)\n      if (cart[this.properties.drugStoreId][currentItem.medicinesId].number <= 0){\n        delete cart[this.properties.drugStoreId][currentItem.medicinesId];\n      }\n\n      if (cart[this.properties.drugStoreId] && Object.keys(cart[this.properties.drugStoreId]).length == 0) {\n        delete cart[this.properties.drugStoreId];\n        this.data.cartShow = false;\n      }\n      Taro.setStorageSync('cart', cart);\n      this.setData({\n        goodsList: this.data.goodsList,\n        cartShow: this.data.cartShow\n      })\n      this.cartTotal();\n      this.triggerEvent(\"hotGoods\", currentItem);\n    },\n    //同步购物车和药店列表数据\n    cartCount(){\n      let cart = Taro.getStorageSync('cart') || {};\n      this.data.goodsList.list && this.data.goodsList.list.forEach((item, index)=>{\n        if (cart[this.properties.drugStoreId] && cart[this.properties.drugStoreId][item.medicinesId]){\n          item.number = cart[this.properties.drugStoreId][item.medicinesId].number\n        }else {\n          item.number = 0;\n        }\n      })\n      this.data.cart = cart;\n      this.setData({\n        goodsList: this.data.goodsList\n      })\n      this.cartTotal();\n    },\n    //购物车总计\n    cartTotal(){\n      let cart = Taro.getStorageSync('cart') || {};\n      this.data.shopCart = {\n        list: [],\n        totalNumer: 0,\n        totalPrice: 0,\n        actTotalPrice: 0,\n        discountTotalPrice: 0\n      };\n      if (cart[this.properties.drugStoreId]){\n        Object.values(cart[this.properties.drugStoreId]).forEach(item => {\n          console.log(item)\n          if(item.activityInfo) {\n            //判断是否超出活动库存，超出则用原价计算\n            if(item.number <= item.activityInfo.realDiscountCount){\n              item.actPriceCount = item.activityInfo.actPrice * item.number;//单个商品活动总价\n            }else {\n              item.actPriceCount = (item.activityInfo.actPrice * item.activityInfo.realDiscountCount) + (item.price * (item.number - item.activityInfo.realDiscountCount));//单个商品活动总价 \n            }\n          }else {\n            item.actPriceCount = item.price * item.number;\n          }\n          item.actPriceCount = (item.actPriceCount).toFixed(2);\n          item.priceCount = (item.price * item.number).toFixed(2);//单个商品总价\n          item.discountCount = item.priceCount - item.actPriceCount;//单个商品优惠金额\n          this.data.shopCart.list.push(item);\n          this.data.shopCart.totalNumer += item.number;\n          this.data.shopCart.actTotalPrice += parseFloat(item.actPriceCount);\n          this.data.shopCart.totalPrice += parseFloat(item.priceCount);\n          this.data.shopCart.discountTotalPrice += parseFloat(item.discountCount);\n        })\n        this.data.shopCart.actTotalPrice = this.data.shopCart.actTotalPrice.toFixed(2);\n        this.data.shopCart.totalPrice = this.data.shopCart.totalPrice.toFixed(2);\n        this.data.shopCart.discountTotalPrice = this.data.shopCart.discountTotalPrice.toFixed(2);\n      }\n      this.data.cartLength = cart[this.properties.drugStoreId] ? Object.values(cart[this.properties.drugStoreId]).length : 0\n      this.setData({\n        shopCart: this.data.shopCart,\n        cartLength: this.data.cartLength\n      })\n      console.log(this.data.shopCart)\n      this.triggerEvent(\"action\");\n    },\n    cartDetail(){\n      if(this.data.shopCart.totalNumer <= 0) {\n        return false;\n      }\n      this.setData({\n        cartShow: !this.data.cartShow\n      })\n    },\n    //下拉加载更多\n    scrollBottom() {\n      if (this.data.goodsList.list.length < this.data.goodsList.recordCount) {\n        this.data.currentPage++;\n        this.getOnlineGoods();\n      }else{\n        Taro.showToast({\n          title: '没有更多数据了',\n          icon: 'none'\n        })\n      }\n    },\n    clearGoodsList(){\n      this.setData({\n        goodsList: {},\n        currentPage: 1,\n        empty: false,\n        isSearch: 0\n      })\n    },\n    toOrder(){\n      if(this.data.shopCart.totalNumer <= 0) {\n        return false;\n      }\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/onlinePlaceOrder/onlinePlaceOrder?drugStoreId=${ this.data.drugStoreId }`\n      })\n    },\n    toOrderDetail(e){\n      console.log(e, this.data.drugStoreId)\n      let goodsId = e.currentTarget.dataset.item.medicinesId;\n      let classifyId = e.currentTarget.dataset.item.classifyId;\n      let drugStoreId = this.data.drugStoreId;\n      this.setData({\n        toView: null\n      })\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/onlineGoodsDetail/onlineGoodsDetail?goodsId=${goodsId}&drugStoreId=${drugStoreId}&classifyId=${classifyId}`\n      })\n    },\n    //清除购物车\n    clearCart(){\n      delete this.data.cart[this.properties.drugStoreId];\n      Taro.setStorageSync('cart', this.data.cart);\n      this.cartCount();\n      this.setData({\n        cartShow: false\n      })\n      this.triggerEvent(\"hotGoods\", null);\n    }\n  }\n};"},"convertDir/component/slideview/slideview":{"js":"module.exports =\n  /******/\n  (function(modules) { // webpackBootstrap\n    /******/ // The module cache\n    /******/\n    var installedModules = {};\n    /******/\n    /******/ // The require function\n    /******/\n    function __webpack_require__(moduleId) {\n      /******/\n      /******/ // Check if module is in cache\n      /******/\n      if (installedModules[moduleId]) {\n        /******/\n        return installedModules[moduleId].exports;\n        /******/\n      }\n      /******/ // Create a new module (and put it into the cache)\n      /******/\n      var module = installedModules[moduleId] = {\n        /******/\n        i: moduleId,\n        /******/\n        l: false,\n        /******/\n        exports: {}\n        /******/\n      };\n      /******/\n      /******/ // Execute the module function\n      /******/\n      modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n      /******/\n      /******/ // Flag the module as loaded\n      /******/\n      module.l = true;\n      /******/\n      /******/ // Return the exports of the module\n      /******/\n      return module.exports;\n      /******/\n    }\n    /******/\n    /******/\n    /******/ // expose the modules object (__webpack_modules__)\n    /******/\n    __webpack_require__.m = modules;\n    /******/\n    /******/ // expose the module cache\n    /******/\n    __webpack_require__.c = installedModules;\n    /******/\n    /******/ // define getter function for harmony exports\n    /******/\n    __webpack_require__.d = function(exports, name, getter) {\n      /******/\n      if (!__webpack_require__.o(exports, name)) {\n        /******/\n        Object.defineProperty(exports, name, {\n          enumerable: true,\n          get: getter\n        });\n        /******/\n      }\n      /******/\n    };\n    /******/\n    /******/ // define __esModule on exports\n    /******/\n    __webpack_require__.r = function(exports) {\n      /******/\n      if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n        /******/\n        Object.defineProperty(exports, Symbol.toStringTag, {\n          value: 'Module'\n        });\n        /******/\n      }\n      /******/\n      Object.defineProperty(exports, '__esModule', {\n        value: true\n      });\n      /******/\n    };\n    /******/\n    /******/ // create a fake namespace object\n    /******/ // mode & 1: value is a module id, require it\n    /******/ // mode & 2: merge all properties of value into the ns\n    /******/ // mode & 4: return value when already ns object\n    /******/ // mode & 8|1: behave like require\n    /******/\n    __webpack_require__.t = function(value, mode) {\n      /******/\n      if (mode & 1) value = __webpack_require__(value);\n      /******/\n      if (mode & 8) return value;\n      /******/\n      if ((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n      /******/\n      var ns = Object.create(null);\n      /******/\n      __webpack_require__.r(ns);\n      /******/\n      Object.defineProperty(ns, 'default', {\n        enumerable: true,\n        value: value\n      });\n      /******/\n      if (mode & 2 && typeof value != 'string')\n        for (var key in value) __webpack_require__.d(ns, key, function(key) {\n          return value[key];\n        }.bind(null, key));\n      /******/\n      return ns;\n      /******/\n    };\n    /******/\n    /******/ // getDefaultExport function for compatibility with non-harmony modules\n    /******/\n    __webpack_require__.n = function(module) {\n      /******/\n      var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n      /******/\n      __webpack_require__.d(getter, 'a', getter);\n      /******/\n      return getter;\n      /******/\n    };\n    /******/\n    /******/ // Object.prototype.hasOwnProperty.call\n    /******/\n    __webpack_require__.o = function(object, property) {\n      return Object.prototype.hasOwnProperty.call(object, property);\n    };\n    /******/\n    /******/ // __webpack_public_path__\n    /******/\n    __webpack_require__.p = \"\";\n    /******/\n    /******/\n    /******/ // Load entry module and return exports\n    /******/\n    return __webpack_require__(__webpack_require__.s = 18);\n    /******/\n  })\n/************************************************************************/\n/******/\n({\n\n  /***/\n  18:\n    /***/\n    (function(module, exports, __webpack_require__) {\n\n      \"use strict\";\n\n\n      Component({\n        options: {\n          addGlobalClass: true,\n          multipleSlots: true\n        },\n        properties: {\n          extClass: {\n            type: String,\n            value: ''\n          },\n          buttons: {\n            type: Array,\n            value: [],\n            observer: function observer(newVal) {\n              this.addClassNameForButton();\n            }\n          },\n          disable: {\n            type: Boolean,\n            value: false\n          },\n          icon: {\n            type: Boolean,\n            value: false\n          },\n          show: {\n            type: Boolean,\n            value: false\n          },\n          duration: {\n            type: Number,\n            value: 350\n          },\n          throttle: {\n            type: Number,\n            value: 40\n          },\n          rebounce: {\n            type: Number,\n            value: 0\n          }\n        },\n        data: {\n          size: null\n        },\n        ready: function ready() {\n          this.updateRight();\n          this.addClassNameForButton();\n        },\n\n        methods: {\n          updateRight: function updateRight() {\n            var _this = this;\n            var data = this.data;\n            var query = Taro.createSelectorQuery().in(this);\n            query.select('.left').boundingClientRect(function(res) {\n              var btnQuery = Taro.createSelectorQuery().in(_this);\n              btnQuery.selectAll('.btn').boundingClientRect(function(rects) {\n                _this.setData({\n                  size: {\n                    buttons: rects,\n                    button: res,\n                    show: data.show,\n                    disable: data.disable,\n                    throttle: data.throttle,\n                    rebounce: data.rebounce\n                  }\n                });\n              }).exec();\n            }).exec();\n          },\n          addClassNameForButton: function addClassNameForButton() {\n            var _data = this.data,\n              buttons = _data.buttons,\n              icon = _data.icon;\n\n            buttons.forEach(function(btn) {\n              if (icon) {\n                btn.className = '';\n              } else if (btn.type === 'warn') {\n                btn.className = 'weui-slideview__btn-group_warn';\n              } else {\n                btn.className = 'weui-slideview__btn-group_default';\n              }\n            });\n            this.setData({\n              buttons: buttons\n            });\n          },\n          buttonTapByWxs: function buttonTapByWxs(data) {\n            this.triggerEvent('buttontap', data, {});\n          },\n          hide: function hide() {\n            this.triggerEvent('hide', {}, {});\n          },\n          show: function show() {\n            this.triggerEvent('show', {}, {});\n          },\n          transitionEnd: function transitionEnd() {\n            console.log('transitiion end');\n          }\n        }\n      });\n\n      /***/\n    })\n\n  /******/\n});","json":{},"wxml":"\n  <view class=\"slideview-auto-container\"> \n    <wxs module=\"handler\"></wxs>\n    <view :class=\"[weui-slideview,weui-movable-view,(icon ? 'weui-slideview_icon' : ''),(extClass)]\" style=\"width: 100%;height: 100%;\"> \n      <view :bindtransitionend=\"handler.transitionEnd\" :show=\"show\" :change:show=\"handler.showChange\" :rebounce=\"rebounce\" :change:rebounce=\"handler.rebounceChange\" :duration=\"duration\" :change:duration=\"handler.durationChange\" :change:disable=\"handler.disableChange\" :disable=\"disable\" :change:prop=\"handler.sizeReady\" :prop=\"size\" :bindtouchstart=\"handler.touchstart\" :bindtouchmove=\"handler.touchmove\" :bindtouchend=\"handler.touchend\" class=\"weui-slideview__left left\" style=\"width:100%;\">\n        <slot></slot>\n      </view>\n      <view class=\"weui-slideview__right right\">\n        <view class=\"weui-slideview__buttons\" style=\"height:100%;width:100%;\" v-if=\"buttons && buttons.length\">\n          <view v-for=\"(item, index) in buttons\" :class=\"[btn,weui-slideview__btn__wrp,(item.className),(item.extClass)]\">\n            <view :bindtap=\"handler.hideButton\" :data-data=\"item.data\" :data-index=\"index\" class=\"weui-slideview__btn\"> \n              <text v-if=\"!icon\">{{item.text}}\n              </text>\n              <image class=\"weui-slideview__btn__icon\" v-else :src=\"item.src\"></image>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":":host{width:100%}.weui-slideview{overflow:hidden;position:relative}.weui-slideview{position:relative}.weui-slideview__left{position:relative;z-index:10}.weui-slideview__right{position:absolute;z-index:1;left:100%;top:0;height:100%}.weui-slideview__btn__wrp{position:absolute;left:0;bottom:0;text-align:center;min-width:69px;height:100%;white-space:nowrap}.weui-slideview__btn{color:#FFFFFF;padding:0 17px}.weui-slideview__btn-group_default .weui-slideview__btn{background:#C7C7CC}.weui-slideview__btn-group_default~.weui-slideview__btn-group_default:before{content:\" \";position:absolute;left:0;top:0;width:1px;bottom:0;border-left:1rpx solid #FFFFFF;color:#FFFFFF}.weui-slideview__btn-group_default:first-child:before{display:none}.weui-slideview__btn-group_warn .weui-slideview__btn{background:#FE3B30}.weui-slideview__btn-group_warn~.weui-slideview__btn-group_warn:before{content:\" \";position:absolute;left:0;top:0;width:1px;bottom:0;border-left:1rpx solid #FFFFFF;color:#FFFFFF}.weui-slideview__btn-group_warn:first-child:before{display:none}.weui-slideview_icon .weui-slideview__btn__wrp{background:transparent;font-size:0}.weui-slideview_icon .weui-slideview__btn__wrp:after{content:\"\";width:0;height:100%;vertical-align:middle;display:inline-block}.weui-slideview_icon .weui-slideview__btn__wrp:first-child{padding-left:16px}.weui-slideview_icon .weui-slideview__btn__wrp:last-child{padding-right:8px}.weui-slideview_icon .weui-slideview__btn{width:48px;height:48px;line-height:48px;padding:0;display:inline-block;vertical-align:middle;border-radius:50%;background-color:#FFFFFF}.weui-slideview_icon .weui-slideview__btn__icon{display:inline-block;vertical-align:middle;width:22px;height:22px}","wxs":"/* eslint-disable */\nvar touchstart = function(event, ownerInstance) {\n    var ins = event.instance\n    var st = ins.getState()\n    if (st.disable) return // disable的逻辑\n    // console.log('touchstart st', JSON.stringify(st))\n    if (!st.size) return\n    // console.log('touchstart', JSON.stringify(event))\n    st.isMoving = true\n    st.startX = event.touches[0].pageX\n    st.startY = event.touches[0].pageY\n    st.firstAngle = 0\n}\nvar touchmove = function(event, ownerInstance) {\n    var ins = event.instance\n    var st = ins.getState()\n    if (!st.size || !st.isMoving) return\n    // console.log('touchmove', JSON.stringify(event))\n    var pagex = event.touches[0].pageX - st.startX\n    var pagey = event.touches[0].pageY - st.startY\n    // 左侧45度角为界限，大于45度则允许水平滑动\n    if (st.firstAngle === 0) {\n        st.firstAngle = Math.abs(pagex) - Math.abs(pagey)\n    }\n    if (st.firstAngle < 0) {\n        return\n    }\n    var movex = pagex > 0 ? Math.min(st.max, pagex) : Math.max(-st.max, pagex)\n    // 往回滑动的情况\n    if (st.out) {\n        // 已经是划出来了，还要往左滑动，忽略\n        if (movex < 0) return\n        ins.setStyle({\n            'transform': 'translateX(' + (st.transformx + movex) + 'px)',\n            'transition': ''\n        })\n        var btns = ownerInstance.selectAllComponents('.btn')\n        var transformTotal = 0\n        var len = btns.length\n        var i = len - 1;\n        for (;i >= 0; i--) {\n            var transform = st.size.buttons[i].width / st.max * movex\n            var transformx = st.size.buttons[i].max - Math.min(st.size.buttons[i].max, transform + transformTotal)\n            btns[i].setStyle({\n                'transform': 'translateX(' + (-transformx) + 'px)',\n                'transition': ''\n            })\n            transformTotal += transform\n        }\n        return false\n    }\n    if (movex > 0) movex = 0\n    ins.setStyle({\n        'transform': 'translateX(' + movex + 'px)',\n        'transition': ''\n    })\n    st.transformx = movex\n    var btns = ownerInstance.selectAllComponents('.btn')\n    var transformTotal = 0\n    var len = btns.length\n    var i = len - 1;\n    for (;i >= 0; i--) {\n        var transform = st.size.buttons[i].width / st.max * movex\n        var transformx = Math.max(-st.size.buttons[i].max, transform + transformTotal)\n        btns[i].setStyle({\n            'transform': 'translateX(' + transformx + 'px)',\n            'transition': ''\n        })\n        st.size.buttons[i].transformx = transformx\n        transformTotal += transform\n    }\n    return false // 禁止垂直方向的滑动\n}\nvar touchend = function(event, ownerInstance) {\n    var ins = event.instance\n    var st = ins.getState()\n    if (!st.size || !st.isMoving) return\n    // 左侧45度角为界限，大于45度则允许水平滑动\n    if (st.firstAngle < 0) {\n        return\n    }\n    var duration = st.duration / 1000\n    st.isMoving = false\n    // console.log('touchend', JSON.stringify(event))\n    var btns = ownerInstance.selectAllComponents('.btn')\n    var len = btns.length\n    var i = len - 1\n    // console.log('len size', len)\n    if (Math.abs(event.changedTouches[0].pageX - st.startX) < st.throttle || event.changedTouches[0].pageX - st.startX > 0) { // 方向也要控制\n        st.out = false\n        ins.setStyle({\n            'transform': 'translate3d(0px, 0, 0)',\n            'transition': 'transform ' + (duration) + 's'\n        })\n        for (;i >= 0; i--) {\n            btns[i].setStyle({\n                'transform': 'translate3d(0px, 0, 0)',\n                'transition': 'transform ' + (duration) + 's'\n            })\n        }\n        ownerInstance.callMethod('hide')\n        return\n    }\n    showButtons(ins, ownerInstance, duration)\n    ownerInstance.callMethod('show')\n}\nvar REBOUNCE_TIME = 0.2\nvar showButtons = function(ins, ownerInstance, withDuration) {\n    var st = ins.getState()\n    if (!st.size) return\n    var rebounceTime = st.rebounce ? REBOUNCE_TIME : 0\n    var movex = st.max\n    st.out = true\n    var btns = ownerInstance.selectAllComponents('.btn')\n    var rebounce = st.rebounce || 0\n    var len = btns.length\n    var i = len - 1\n    ins.setStyle({\n        'transform': 'translate3d(' + (-movex - rebounce) + 'px, 0, 0)',\n        'transition': 'transform ' + (withDuration) + 's'\n    })\n    st.transformx = -movex\n    var transformTotal = 0\n    for (;i >= 0; i--) {\n        var transform = st.size.buttons[i].width / st.max * movex\n        var transformx = (-(transform + transformTotal))\n        btns[i].setStyle({\n            'transform': 'translate3d(' + transformx + 'px, 0, 0)',\n            'transition': 'transform ' + (withDuration ? withDuration + rebounceTime : withDuration) + 's'\n        })\n        st.size.buttons[i].transformx = transformx\n        transformTotal += transform\n    }\n}\nvar innerHideButton = function(ownerInstance) {\n    var ins = ownerInstance.selectComponent('.left')\n    var st = ins.getState()\n    if (!st.size) return\n    var duration = st.duration ? st.duration / 1000 : 0\n    var btns = ownerInstance.selectAllComponents('.btn')\n    var len = btns.length\n    var i = len - 1\n    ins.setStyle({\n        'transform': 'translate3d(0px, 0, 0)',\n        'transition': 'transform ' + (duration) + 's'\n    })\n    st.transformx = 0\n    for (;i >= 0; i--) {\n        btns[i].setStyle({\n            'transform': 'translate3d(0px, 0, 0)',\n            'transition': 'transform ' + (duration) + 's'\n        })\n        st.size.buttons[i].transformx = 0\n    }\n}\nvar hideButton = function(event, ownerInstance) {\n    innerHideButton(ownerInstance)\n    ownerInstance.callMethod('buttonTapByWxs', {index: event.currentTarget.dataset.index, data: event.currentTarget.dataset.data})\n    return false\n}\nvar sizeReady = function(newVal, oldVal, ownerInstance, ins) {\n    var st = ins.getState()\n    // st.disable = newVal && newVal.disable\n    if (newVal && newVal.button && newVal.buttons) {\n        st.size = newVal\n        st.transformx = 0\n        // var min = newVal.button.width\n        var max = 0\n        var len = newVal.buttons.length\n        var i = newVal.buttons.length - 1;\n        var total = 0\n        for (; i >= 0; i--) {\n            max += newVal.buttons[i].width\n            // if (min > newVal.buttons[i]) {\n            //     min = newVal.buttons[i].width\n            // }\n            total += newVal.buttons[i].width\n            newVal.buttons[i].max = total\n            newVal.buttons[i].transformx = 0\n        }\n        st.throttle = st.size.throttle || 40 // 固定值\n        st.rebounce = st.size.rebounce\n        st.max = max\n        ownerInstance.selectComponent('.right').setStyle({\n            'line-height': newVal.button.height + 'px',\n            left: (newVal.button.width) + 'px',\n            width: max + 'px'\n        })\n        // console.log('st size', JSON.stringify(newVal))\n        if (!st.size.disable && st.size.show) {\n            showButtons(ins, ownerInstance)\n        }\n    }\n}\nvar disableChange = function(newVal, oldVal, ownerInstance, ins) {\n    var st = ins.getState()\n    st.disable = newVal\n}\nvar durationChange = function(newVal, oldVal, ownerInstance, ins) {\n    var st = ins.getState()\n    st.duration = newVal || 400\n}\nvar showChange = function(newVal, oldVal, ownerInstance, ins) {\n    var st = ins.getState()\n    st.show = newVal\n    if (st.disable) return\n    // console.log('show change')\n    if (st.show) {\n        showButtons(ins, ownerInstance, st.duration)\n    } else {\n        innerHideButton(ownerInstance)\n    }\n}\nvar rebounceChange = function(newVal, oldVal, ownerInstance, ins) {\n    var st = ins.getState()\n    // console.log('rebounce', st.rebounce)\n    st.rebounce = newVal\n}\nvar transitionEnd = function(event, ownerInstance) {\n    // console.log('transition')\n    var ins = event.instance\n    var st = ins.getState()\n    // 回弹效果\n    if (st.out && st.rebounce) {\n        console.log('transition rebounce', st.rebounce)\n        ins.setStyle({\n            'transform': 'translate3d(' + (-st.max) + 'px, 0, 0)',\n            'transition': 'transform ' + REBOUNCE_TIME +'s'\n        })\n    }\n}\nmodule.exports = {\n    touchstart: touchstart,\n    touchmove: touchmove,\n    touchend: touchend,\n    hideButton: hideButton,\n    sizeReady: sizeReady,\n    disableChange: disableChange,\n    durationChange: durationChange,\n    showChange: showChange,\n    rebounceChange: rebounceChange,\n    transitionEnd: transitionEnd\n}"},"convertDir/component/textarea/index":{"js":"export default {\n  /**\n   * 组件的属性列表\n   */\n  externalClasses: ['textarea-class', 'wrap-class', 'placeholder-class'],\n  props: {\n    value: String, \n    disabled: Boolean,\n    maxlength: {\n      type: Number,\n      default: -1\n    },\n    \"auto-focus\": Boolean,\n    focus: Boolean,\n    \"auto-height\": Boolean,\n    fixed: Boolean,\n    \"placeholder-style\": String,\n    \"textarea-style\": String,\n    \"virtual_textarea_style\": String,\n    placeholder: String,\n    \"cursor-spacing\": {\n      type: Number,\n      default: 0\n    },\n    cursor: {\n      type: Number,\n      default: -1\n    },\n    \"show-confirm-bar\": {\n      type: Boolean, \n      default: true\n    },\n    \"show-confirm-bar\": {\n      type: Number,\n      default: -1\n    },\n    \"selection-end\": {\n      type: Number,\n      default: -1\n    },\n    \"adjust-position\": {\n      type: Boolean,\n      default: true\n    },\n    \"hold-keyboard\": Boolean,\n\n  },\n\n  data: function() {\n    return {\n      showTextArea: false,\n      autoFocus: false\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    handleInput(e) {\n      console.log('handleInput')\n      this.setData({\n        value: e.detail.value\n      })\n      this.triggerEvent(\"input\", e.detail)\n    },\n    handleTap() {\n      console.log('handleTap')\n      this.setData({\n        showTextArea: true,\n        autoFocus: true\n      })\n    },\n    handleBlur(e) {\n      console.log('handleBlur')\n      this.setData({\n        showTextArea: false\n      })\n      this.triggerEvent(\"blur\", e.detail)\n    },\n    handleFocus(e) {\n      console.log('handleFocus')\n      this.triggerEvent(\"focus\", e.detail)\n    },\n    bindkeyboardheightchange(e) {\n      console.log('bindkeyboardheightchange')\n      this.triggerEvent(\"bindkeyboardheightchange\", e.detail)\n    }\n  }\n};","json":{},"wxml":"\n  <view class=\"index-auto-container\">\n    <view class=\"wrap wrap-class\">  \n      <view class=\"placeholder placeholder-class\" :style=\"{placeholder-style}\" :hidden=\"value\">{{placeholder}}\n      </view>\n      <textarea v-if=\"showTextArea\" class=\"curTextarea textarea-class\" :value=\"value\" :disabled=\"disabled\" maxlength=\"50\" :auto-focus=\"autoFocus\" disable-default-padding=\"true\" :focus=\"focus\" :fixed=\"fixed\" :auto-height=\"auto-height\" bindinput=\"handleInput\" bindfocus=\"handleFocus\" bindblur=\"handleBlur\" :bindconfirm=\"handleConfirm\" bindkeyboardheightchange=\"bindkeyboardheightchange\" cursor-spacing=\"20\"></textarea>\n      <view v-else class=\"content textarea-class\" bindtap=\"handleTap\" :style=\"{virtual_textarea_style}\">\n    {{value}}\n  \n      </view>\n    </view>\n  </view>","wxss":"/* component/textarea/index.wxss */\n.wrap {\n  position: relative;\n  box-sizing: border-box;\n  background: #F7F8FA;\n  color: #666666;\n  width: 686rpx;\n  height: 200rpx;\n}\n.placeholder {\n  position:absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;  \n}\n.curTextarea, .content {\n  display: block;\n  padding: 24rpx;\n  height: 100%;\n  margin: 0;\n  line-height: 1;\n}\n"},"convertDir/component/uploader/uploader":{"json":{},"wxml":"\n  <view class=\"uploader-auto-container\">\n    <view :class=\"[weui-uploader,(extClass)]\"> \n      <view class=\"weui-uploader__hd\"> \n        <view v-if=\"tips\" class=\"weui-uploader__tips\">{{tips}}\n        </view>\n        <view v-else>\n          <slot name=\"tips\"></slot>\n        </view>\n      </view>\n      <view class=\"weui-uploader__bd\">\n        <view class=\"weui-uploader__files\"> \n          <block v-for=\"item in currentFiles\" :key=\"item\">\n            <view :data-src=\"item.url\" bindtap=\"previewImage\" :class=\"[weui-uploader__file,( item.error || item.loading ? 'weui-uploader__file_status' : '' )]\">   \n              <block v-if=\"item.error\"> \n                <image class=\"weui-uploader__img\" :src=\"item.url\" mode=\"aspectFill\"></image>\n                <view class=\"weui-uploader__file-content\">\n                  <image class=\"error_img\" src=\"../../images/error_img.png\"></image>\n                </view>\n              </block>\n              <block v-else-if=\"item.loading\"> \n                <image class=\"weui-uploader__img\" :src=\"item.url\" mode=\"aspectFill\"></image>\n                <view class=\"weui-uploader__file-content\">\n                  <view class=\"weui-loading\"></view>\n                </view>\n              </block>\n              <block v-else>\n                <image class=\"weui-uploader__img\" :src=\"item.url\" mode=\"aspectFill\"></image>\n              </block>\n              <image class=\"close_img\" src=\"../../images/search_clear.png\" mode=\"aspectFill\" catchtap=\"deletePic\" :data-index=\"index\"></image>\n            </view>\n          </block>\n          <view v-if=\"currentFiles.length < maxCount\" class=\"weui-uploader__input-box\">\n            <view class=\"weui-uploader__input\" bindtap=\"chooseImage\">\n              <view class=\"weui-uploader__info\"> \n                <view>{{title}}\n                </view>\n                <view v-if=\"maxCount > 1\">({{currentFiles.length}}/{{maxCount}})\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>","wxss":".weui-uploader {\n  margin-bottom: 20rpx;\n}\n\n.weui-uploader__hd {\n  padding-bottom: 20rpx;\n}\n\n.weui-uploader__overview {\n  display: flex;\n  align-items: center;\n}\n\n.weui-uploader__title {\n  flex: 1;\n}\n.weui-uploader__files {\n  display: flex;\n  flex-wrap: wrap;\n}\n.weui-uploader__tips {\n  color: rgba(0, 0, 0, 0.3);\n  font-size: 24rpx;\n  line-height: 1.4;\n  padding-top: 4px;\n}\n\n.weui-uploader__file {\n  margin-right: 21rpx;\n  margin-bottom: 21rpx;\n  position: relative;\n}\n.close_img {\n  width: 40rpx;\n  height: 40rpx;\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n}\n.weui-uploader__file:nth-child(4n){\n  margin-right: 0\n}\n.weui-uploader__img {\n  display: block;\n  width: 150rpx;\n  height: 150rpx;\n}\n\n.weui-uploader__file_status {\n  position: relative;\n}\n\n.weui-uploader__file_status:before {\n  content: \" \";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.weui-uploader__file-content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #fff;\n}\n.weui-uploader__file-content .error_img {\n  width: 46rpx;\n  height: 46rpx;\n}\n\n.weui-uploader__input-box {\n  float: left;\n  position: relative;\n  width: 150rpx;\n  height: 150rpx;\n  box-sizing: border-box;\n  border: 2rpx dashed #E7EAEC;\n}\n\n.weui-uploader__info {\n  position: absolute;\n  top: 98rpx;\n  left: 50%;\n  width: 100%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-size: 24rpx;\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.weui-uploader__input-box:before, .weui-uploader__input-box:after {\n  content: \" \";\n  position: absolute;\n  top: 40rpx;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #E7EAEC;\n}\n\n.weui-uploader__input-box:before {\n  width: 6rpx;\n  height: 48rpx;\n}\n\n.weui-uploader__input-box:after {\n  width: 48rpx;\n  height: 6rpx;\n}\n\n.weui-uploader__input-box.active {\n  border-color: #8b8b8b;\n  color: #8b8b8b;\n}\n\n.weui-uploader__info.active {\n  color: #8b8b8b;\n}\n.active{\n  color: #8b8b8b;\n}\n/* .weui-uploader__input-box:active:before, .weui-uploader__input-box:active:after {\n  background-color: #8b8b8b;\n} */\n\n.weui-uploader__input {\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.weui-loading {\n  margin: 0 5px;\n  width: 20px;\n  height: 20px;\n  display: inline-block;\n  vertical-align: middle;\n  animation: weuiLoading 1s steps(12, end) infinite;\n  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=) no-repeat;\n  background-size: 100%;\n}\n\n.weui-loading.weui-loading_transparent {\n  background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 100 100'%3E%3Cpath fill='none' d='M0 0h100v100H0z'/%3E%3Crect xmlns='http://www.w3.org/2000/svg' width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.56)' rx='5' ry='5' transform='translate(0 -30)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.5)' rx='5' ry='5' transform='rotate(30 105.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.43)' rx='5' ry='5' transform='rotate(60 75.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.38)' rx='5' ry='5' transform='rotate(90 65 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.32)' rx='5' ry='5' transform='rotate(120 58.66 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.28)' rx='5' ry='5' transform='rotate(150 54.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.25)' rx='5' ry='5' transform='rotate(180 50 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.2)' rx='5' ry='5' transform='rotate(-150 45.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.17)' rx='5' ry='5' transform='rotate(-120 41.34 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.14)' rx='5' ry='5' transform='rotate(-90 35 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.1)' rx='5' ry='5' transform='rotate(-60 24.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.03)' rx='5' ry='5' transform='rotate(-30 -5.98 65)'/%3E%3C/svg%3E\");\n}\n\n@keyframes weuiLoading {\n  0% {\n    transform: rotate3d(0, 0, 1, 0deg);\n  }\n\n  100% {\n    transform: rotate3d(0, 0, 1, 360deg);\n  }\n}\n","js":"module.exports =\n  /******/\n  (function(modules) { // webpackBootstrap\n    /******/ // The module cache\n    /******/\n    var installedModules = {};\n    /******/\n    /******/ // The require function\n    /******/\n    function __webpack_require__(moduleId) {\n      /******/\n      /******/ // Check if module is in cache\n      /******/\n      if (installedModules[moduleId]) {\n        /******/\n        return installedModules[moduleId].exports;\n        /******/\n      }\n      /******/ // Create a new module (and put it into the cache)\n      /******/\n      var module = installedModules[moduleId] = {\n        /******/\n        i: moduleId,\n        /******/\n        l: false,\n        /******/\n        exports: {}\n        /******/\n      };\n      /******/\n      /******/ // Execute the module function\n      /******/\n      modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n      /******/\n      /******/ // Flag the module as loaded\n      /******/\n      module.l = true;\n      /******/\n      /******/ // Return the exports of the module\n      /******/\n      return module.exports;\n      /******/\n    }\n    /******/\n    /******/\n    /******/ // expose the modules object (__webpack_modules__)\n    /******/\n    __webpack_require__.m = modules;\n    /******/\n    /******/ // expose the module cache\n    /******/\n    __webpack_require__.c = installedModules;\n    /******/\n    /******/ // define getter function for harmony exports\n    /******/\n    __webpack_require__.d = function(exports, name, getter) {\n      /******/\n      if (!__webpack_require__.o(exports, name)) {\n        /******/\n        Object.defineProperty(exports, name, {\n          enumerable: true,\n          get: getter\n        });\n        /******/\n      }\n      /******/\n    };\n    /******/\n    /******/ // define __esModule on exports\n    /******/\n    __webpack_require__.r = function(exports) {\n      /******/\n      if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n        /******/\n        Object.defineProperty(exports, Symbol.toStringTag, {\n          value: 'Module'\n        });\n        /******/\n      }\n      /******/\n      Object.defineProperty(exports, '__esModule', {\n        value: true\n      });\n      /******/\n    };\n    /******/\n    /******/ // create a fake namespace object\n    /******/ // mode & 1: value is a module id, require it\n    /******/ // mode & 2: merge all properties of value into the ns\n    /******/ // mode & 4: return value when already ns object\n    /******/ // mode & 8|1: behave like require\n    /******/\n    __webpack_require__.t = function(value, mode) {\n      /******/\n      if (mode & 1) value = __webpack_require__(value);\n      /******/\n      if (mode & 8) return value;\n      /******/\n      if ((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n      /******/\n      var ns = Object.create(null);\n      /******/\n      __webpack_require__.r(ns);\n      /******/\n      Object.defineProperty(ns, 'default', {\n        enumerable: true,\n        value: value\n      });\n      /******/\n      if (mode & 2 && typeof value != 'string')\n        for (var key in value) __webpack_require__.d(ns, key, function(key) {\n          return value[key];\n        }.bind(null, key));\n      /******/\n      return ns;\n      /******/\n    };\n    /******/\n    /******/ // getDefaultExport function for compatibility with non-harmony modules\n    /******/\n    __webpack_require__.n = function(module) {\n      /******/\n      var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n      /******/\n      __webpack_require__.d(getter, 'a', getter);\n      /******/\n      return getter;\n      /******/\n    };\n    /******/\n    /******/ // Object.prototype.hasOwnProperty.call\n    /******/\n    __webpack_require__.o = function(object, property) {\n      return Object.prototype.hasOwnProperty.call(object, property);\n    };\n    /******/\n    /******/ // __webpack_public_path__\n    /******/\n    __webpack_require__.p = \"\";\n    /******/\n    /******/\n    /******/ // Load entry module and return exports\n    /******/\n    return __webpack_require__(__webpack_require__.s = 22);\n    /******/\n  })\n/************************************************************************/\n/******/\n({\n\n  /***/\n  22:\n    /***/\n    (function(module, exports, __webpack_require__) {\n\n      \"use strict\";\n      Component({\n        options: {\n          addGlobalClass: true\n        },\n        properties: {\n          title: {\n            type: String,\n            value: '点击上传'\n          },\n          sizeType: {\n            type: Array,\n            value: ['original', 'compressed']\n          },\n          sourceType: {\n            type: Array,\n            value: ['album', 'camera']\n          },\n          maxSize: {\n            type: Number,\n            value: 3 * 1024 * 1024\n          },\n          maxCount: {\n            type: Number,\n            value: 1\n          },\n          files: {\n            type: Array,\n            value: [],\n            observer: function observer(newVal, oldVal, changedP) {\n              console.log(newVal)\n              this.setData({\n                currentFiles: newVal\n              });\n            }\n          },\n          select: {\n            type: Function,\n            value: function value() {}\n          },\n          upload: {\n            type: Function,\n            value: null\n          },\n          tips: {\n            type: String,\n            value: ''\n          },\n          extClass: {\n            type: String,\n            value: ''\n          },\n          showDelete: {\n            type: Boolean,\n            value: true\n          }\n        },\n        data: {\n          currentFiles: [],\n          showPreview: false,\n          previewImageUrls: []\n        },\n        ready: function ready() {},\n\n        methods: {\n          previewImage: function previewImage(e) {\n            var current = e.currentTarget.dataset.src;\n\n            var previewImageUrls = [];\n            this.data.files.map(function(item) {\n              previewImageUrls.push(item.url);\n            });\n            Taro.previewImage({\n              current,\n              urls: previewImageUrls\n            })\n          },\n          chooseImage: function chooseImage(e) {\n            var _this = this;\n            if (this.uploading) return;\n            Taro.chooseImage({\n              count: this.data.maxCount - this.data.files.length,\n              sizeType: ['compressed'],\n              success: function success(res) {\n                Taro.showLoading({\n                  title: '图片上传中',\n                })\n                var invalidIndex = -1;\n                res.tempFiles.forEach(function(item, index) {\n                  console.log(item.size, 'size', _this.data.maxSize)\n                  if (item.size > _this.data.maxSize) {\n                    invalidIndex = index;\n                  }\n                });\n                if (typeof _this.data.select === 'function') {\n                  var ret = _this.data.select(res);\n                  if (ret === false) {\n                    Taro.hideLoading();\n                    return;\n                  }\n                }\n                if (invalidIndex >= 0) {\n                  _this.triggerEvent('fail', {\n                    type: 1,\n                    errMsg: '图片过大，无法上传',\n                    total: res.tempFilePaths.length,\n                    index: invalidIndex\n                  }, {});\n                  Taro.hideLoading();\n                  return;\n                }\n                var mgr = Taro.getFileSystemManager();\n                var contents = res.tempFilePaths.map(function(item) {\n                  var fileContent = mgr.readFileSync(item);\n                  return fileContent;\n                });\n                var obj = {\n                  tempFilePaths: res.tempFilePaths,\n                  tempFiles: res.tempFiles,\n                  contents: contents\n                };\n                _this.triggerEvent('select', obj, {});\n                var files = res.tempFilePaths.map(function(item, i) {\n                  return {\n                    loading: true,\n                    url: 'data:image/jpg;base64,' + Taro.arrayBufferToBase64(contents[i])\n                  };\n                });\n                if (!files || !files.length) return;\n                if (typeof _this.data.upload === 'function') {\n                  var len = _this.data.files.length;\n                  var newFiles = _this.data.files.concat(files);\n                  _this.setData({\n                    files: newFiles,\n                    currentFiles: newFiles\n                  });\n                  Taro.hideLoading();\n                  _this.loading = true;\n                  console.log(files)\n                  //遍历图片，一次只上传一张\n                  files.forEach((item, indexF) => {\n                    _this.data.upload(obj.tempFilePaths[indexF], obj.contents[indexF]).then(function(json) {\n                      _this.loading = false;\n                      if (json.urls) {\n                        var oldFiles = _this.data.files;\n                        oldFiles[len + indexF] = {\n                          url: json.urls[0],\n                          loading: false\n                        }\n                        _this.setData({\n                          files: oldFiles,\n                          currentFiles: newFiles\n                        });\n                        _this.triggerEvent('success', json, {});\n                      } else {\n                        _this.triggerEvent('fail', {\n                          type: 3,\n                          errMsg: '上传失败'\n                        }, {});\n                      }\n                    }).catch(function(err) {\n                      _this.loading = false;\n                      var oldFiles = _this.data.files;\n                      oldFiles[len + indexF] = {\n                        error: true,\n                        loading: false\n                      }\n                      _this.setData({\n                        files: oldFiles,\n                        currentFiles: newFiles\n                      });\n                      _this.triggerEvent('fail', {\n                        type: 3,\n                        errMsg: '上传失败',\n                        error: err\n                      }, {});\n                    });\n                  })\n\n                }\n              },\n              fail: function fail(_fail) {\n                if (_fail.errMsg.indexOf('chooseImage:fail cancel') >= 0) {\n                  _this.triggerEvent('cancel', {}, {});\n                  return;\n                }\n                _fail.type = 2;\n                _this.triggerEvent('fail', _fail, {});\n              }\n            });\n          },\n          deletePic: function deletePic(e) {\n            Taro.showModal({\n              content: '确认要删除此图片？',\n              confirmColor: getApp().globalData.mainColor,\n              success: (res) => {\n                if (res.confirm) {\n                  console.log(e)\n                  var index = e.currentTarget.dataset.index;\n                  var files = this.data.files;\n                  //如果图片上传失败只更新组件就行\n                  if (!files[index].error) {\n                    this.triggerEvent('update', index); //更新上传后的图片\n                  }\n                  var file = files.splice(index, 1);\n                  this.setData({\n                    files: files,\n                    currentFiles: files\n                  });\n                }\n              }\n            })\n          }\n        }\n      });\n\n      /***/\n    })\n\n  /******/\n});"},"convertDir/component/vipCard/vipCard":{"js":"// component/vipCard/vipCard.js\nimport {\n  ajax2,\n  url,\n  cdnStaticResourceUrl\n} from \"../../utils/util\";\n\nexport default {\n  onShow() {\n    this.setData({\n      isDjk:getApp().globalData.src_whyb ? true : false,\n    })\n    if(this.properties.pageFrom != 'drugList') {\n      this.getCardDetail()\n    }\n  },\n  /**\n   * 组件的属性列表\n   */\n  props: {\n    drugstoreSign:{\n      type: String,\n      default: '',\n    },\n    pageFrom: {\n      type: String,\n      default: '',\n    }\n  },\n  data: function() {\n    return {\n      isDjk:getApp().globalData.src_whyb ? true : false,\n      cardDetail: null,\n      joinSuccess: false,\n      url_link: cdnStaticResourceUrl\n    };\n  },\n\n  /**\n   * 组件的方法列表\n   */\n  methods: {\n    /**\n     * 获取会员卡详情\n     */\n    getCardDetail() {\n      Taro.showLoading({\n        title: '加载中',\n        mask: true\n      })\n      const sendData = {\n        drugstoreSign: this.data.drugstoreSign,\n        phone: Taro.getStorageSync('userInfo').phone\n      }\n      ajax2('post', `member/detail`, sendData, res => {\n        if (res.data.code == 0) {\n          const resData = res.data.result;\n          resData && this.setData({\n            cardDetail: resData\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none',\n          })\n        }\n        Taro.hideLoading();\n      }, function () {\n        Taro.hideLoading();\n        Taro.showToast({\n          title: '请求失败',\n          icon: 'none',\n        })\n      })\n    },\n\n    /**\n     * 赢取更多积分\n     */\n    toDrugStore(){\n      const drugstoreId = this.data.cardDetail.drugstoreId\n      Taro.navigateTo({\n        url: `/pages/onlineGoods/drugList/drugList?drugStoreId=${drugstoreId}`\n      })\n    },\n    // 加入会员\n    joinVip() {\n      Taro.showLoading({\n        title: '加载中',\n        mask: true\n      })\n      let data = {\n        drugstoreSign: this.data.drugstoreSign,\n        phone: Taro.getStorageSync('userInfo').phone,\n        levelId: this.data.cardDetail.levelId\n      }\n      ajax2('post', `member/add`, data, res => {\n        if (res.data.code == 0) {\n          this.setData({\n            joinSuccess: true\n          })\n        } else {\n          Taro.showToast({\n            title: res.data.msg,\n            icon: 'none',\n          })\n        }\n        Taro.hideLoading();\n      }, function () {\n        Taro.hideLoading();\n        Taro.showToast({\n          title: '请求失败',\n          icon: 'none',\n        })\n      })\n    },\n    // 关闭弹窗\n    closeBox(){\n      this.setData({\n        joinSuccess: false\n      })\n      this.getCardDetail()\n    }\n  }\n};\n","wxml":"\n  <view class=\"vipCard-auto-container\">\n    <view v-if=\"cardDetail\">     \n      <view class=\"header\"> \n        <image class=\"headerImg\" :src=\"''+url_link+'images/vipCardDetail.png'\" mode=\"widthFix\"></image>\n        <view class=\"headerInfo\"> \n          <block v-if=\" cardDetail.memberNumber \"> \n            <view class=\"info\"> \n              <image :src=\"cardDetail.headPortrait\" class=\"img\"></image>\n              <text class=\"name\">{{cardDetail.name}}\n              </text>\n            </view>\n            <view class=\"drugStore\"> \n              <view class=\"text\">{{cardDetail.drugstoreName}}\n              </view>\n              <view>NO.{{cardDetail.memberNumber}}\n              </view>\n            </view>\n          </block>\n          <block v-else>\n            <view class=\"info not_join\"> \n              <image src=\"../../images/level.png\" class=\"img\"></image>\n              <view class=\"text_block\"> \n                <view class=\"name\">成为店铺会员\n                </view>\n                <view>独享丰富权益\n                </view>\n              </view>\n            </view>\n          </block>\n        </view>\n      </view>\n      <image class=\"marginImg\" src=\"../../images/vipCardWhite.png\" mode=\"widthFix\"></image>\n      <view class=\"black_box\" v-if=\"joinSuccess\"></view>\n      <view class=\"alert_box\" v-if=\"joinSuccess\"> \n        <image :src=\"''+url_link+'images/vip_alert_img.png'\"></image>\n        <view class=\"contents\">  \n          <view class=\"title\">您已成为【{{cardDetail.drugstoreName}}】尊贵会员\n          </view>\n          <view class=\"tips\">在店内消费可赢取积分，享受更多会员专属特权~\n          </view>\n          <view class=\"btns\" bindtap=\"closeBox\">确认\n          </view>\n        </view>\n      </view>\n      <view class=\"infoBox\"> \n        <block v-if=\" pageFrom == 'drugList' && !cardDetail.memberNumber\">\n          <view class=\"getScoreBtn join_vip_btn\" bindtap=\"joinVip\">立即加入会员\n          </view>\n        </block>\n        <block v-else> \n          <view class=\"levelInfo\"> \n            <view class=\"levelItem\"> \n              <view class=\"top\"> \n                <image src=\"../../images/score.png\"></image>\n                <view>当前积分\n                </view>\n              </view>\n              <view class=\"weight\">{{cardDetail.memberShipPoint}}\n              </view>\n            </view>\n            <view class=\"levelItem\"> \n              <view class=\"top\"> \n                <image src=\"../../images/level.png\"></image>\n                <view>会员等级\n                </view>\n              </view>\n              <view class=\"weight\">{{cardDetail.levelName}}\n              </view>\n            </view>\n          </view>\n          <view v-if=\" pageFrom != 'drugList' \"> \n            <view class=\"getScoreBtn\" bindtap=\"toDrugStore\">赢取更多积分\n            </view>\n            <view class=\"tip\" v-if=\"cardDetail.memberPointExchangeRule\">{{cardDetail.memberPointExchangeRule}}\n            </view>\n          </view>\n        </block>\n      </view>\n      <view class=\"vipDetail\">  \n        <view class=\"title\">会员特权 \n          <text>请前往线下实体门店享受会员权益\n          </text>\n        </view>\n        <block v-if=\"cardDetail.listForFront.length\"> \n          <view class=\"cardBox\" v-for=\"(item, index) in cardDetail.listForFront\">  \n            <view class=\"number\">特权{{index+1}}\n            </view>\n            <view class=\"title_\">{{item.title}}\n            </view>\n            <view class=\"item\" v-for=\"(item, index) in item.list\"> \n              <image src=\"../../images/arrow.png\"></image>\n              <text>{{item}}\n              </text>\n            </view>\n          </view>\n          <view class=\"bottomTip\"> - 实际会员福利，以线下实体门店为准 - \n          </view>\n        </block>\n        <block v-else>\n          <missingData-view :imageUrl=\" url_link + 'images/empty.png' \" zhi=\"new1\" textval=\"更多福利即将来袭~\"></missingData-view>\n        </block>\n      </view>\n    </view>\n  </view>","json":{"missingData-view":"../missingData/missingData"},"wxss":"/* pages/my/myDrug/vipCardDetail/vipCardDetail.wxss */\n@import '../../common/tableView.wxss';\nimage{\n    width: 100%;\n    display: block;\n}\n.header{\n  position: relative;\n  background-color: #FFFFFF;\n  position: relative;\n}\n.header .headerImg{\n    width: 100%;\n}\n.header .headerInfo{\n    width: 100%;\n    position: absolute;\n    top: 0;\n}\n.header .headerInfo .info .img{\n    width:88rpx;\n    height:88rpx;\n    border:2px solid rgba(234,206,165,1); \n    border-radius: 50%;\n    margin-right: 24rpx;\n}\n.header .headerInfo .not_join .img{\n  width: 45rpx;\n  height: 45rpx;\n  padding: 22rpx;\n}\n.header .headerInfo .not_join .text_block{\n  font-size: 24rpx;\n  color: #835A34\n}\n.header .headerInfo .info{\n  margin: 46rpx 75rpx 16rpx;\n  font-size:36rpx;\n  color:rgba(85,38,1,1);\n  line-height:50rpx;\n  display: flex;\n  align-items: center;\n}\n.header .headerInfo .info .name{\n  max-width: 500rpx;\n  overflow: hidden;\n  text-overflow:ellipsis;\n  white-space: nowrap;\n  font-size: 36rpx;\n  color: #552601\n}\n.header .headerInfo .drugStore{\n    margin: 0 55rpx 0 75rpx;\n    font-size:26rpx;\n    color:rgba(85,38,1,1);\n    line-height:37rpx;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.header .headerInfo .drugStore .text {\n  width: 76%;\n  overflow: hidden;\n  text-overflow:ellipsis;\n  white-space: nowrap\n}\n.marginImg{\n    position: relative;\n    z-index: 1;\n    margin-top: -50rpx;\n}\n.infoBox{\n    \n    background: white;\n}\n.levelInfo{\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.levelInfo .levelItem{\n  width: 50%;\n  font-size:30rpx;\n  text-align: center;\n  line-height:42rpx;\n}\n.levelInfo .levelItem .top{\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color:rgba(102,102,102,1);\n}\n.levelInfo .levelItem:first-child {\n  border-right: 1px solid #DDDDDD\n}\n.levelInfo .levelItem image{\n    width: 48rpx;\n    height: 48rpx;\n    margin-right: 10rpx;\n}\n.levelInfo .levelItem .weight{\n  font-size: 28rpx;\n  font-weight: 500;\n  color: #292626;\n  line-height: 40rpx;\n  margin: auto;\n  width: 224rpx;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n.infoBox {\n  padding: 0 30rpx 30rpx;\n  border-bottom: 1px solid #F5F5F5\n}\n.infoBox .getScoreBtn{\n  height: 90rpx;\n  line-height: 90rpx;\n  text-align: center;\n  border: 1px solid rgba(210,155,71,1);\n  border-radius: 45rpx;\n  font-size:36rpx;\n  font-weight:500;\n  color:rgba(210,155,71,1);\n  margin: 20rpx 0;\n  margin-bottom: 30rpx;\n}\n.infoBox .join_vip_btn {\n  background: linear-gradient(to right, #D89352,#BB7A3C);\n  color: #FFFFFF;\n  margin: 0\n}\n.infoBox .tip{\n  text-align: center;\n  font-size:26rpx;\n  color:rgba(153,153,153,1);\n  line-height:37rpx;\n}\n\n.vipDetail{\n    background: white;\n    margin-top: 20rpx;\n    height: 100%\n}\n.vipDetail .title{\n    font-size:36rpx;\n    color:rgba(41,38,38,1);\n    line-height:50rpx;\n    padding: 30rpx 24rpx;\n}\n.vipDetail .title text{\n    font-size:26rpx;\n    color:rgba(153,153,153,1);\n    line-height:37rpx;\n}\n\n.cardBox{\n    margin: 0 24rpx 47rpx;\n    background:rgba(255,255,255,1);\n    box-shadow:0px 3px 16rpx 0px rgba(48,48,60,0.08);\n    border-radius:10rpx;\n    padding: 30rpx;\n    position: relative;\n}\n.cardBox .number{\n    background:linear-gradient(270deg,rgba(215,179,127,1) 0%,rgba(253,231,199,1) 100%);\n    border-radius:22px;\n    font-size:24rpx;\n    color:rgba(85,38,1,1);\n    line-height:33rpx;\n    display: inline-block;\n    padding: 5rpx 18rpx;\n    position: absolute;\n    top: -20rpx;\n    left: 30rpx;\n}\n.cardBox .title_{\n    font-size:32rpx;\n    font-weight:500;\n    color:rgba(41,38,38,1);\n    line-height:45rpx;\n    margin: 20rpx 0;\n}\n.cardBox .item{\n    font-size:28rpx;\n    color:rgba(41,38,38,1);\n    line-height:40rpx;\n    display: flex;\n    align-items:flex-start;\n    margin-bottom: 10rpx;\n}\n.cardBox .item image{\n    width: 12rpx;\n    height: 16rpx;\n    margin-right: 10rpx;\n    margin-top: 8rpx;\n}\n\n\n.bottomTip{\n    font-size:24rpx;\n    color:rgba(153,153,153,1);\n    line-height:33rpx; \n    text-align: center;\n    padding: 0 0 20rpx;\n}\n\n.alert_box {\n  background: none;\n  width: 520rpx;\n  padding: 0\n}\n.alert_box image{\n  height: 240rpx;\n}\n.alert_box .contents {\n  background: #FFFFFF;\n  text-align: left;\n  padding: 30rpx;\n  font-size: 28rpx;\n}\n.alert_box .contents .tips {\n  color: #999999;\n  margin: 30rpx 0;\n  font-size: 24rpx;\n  line-height: 38rpx;\n  position: relative;\n  padding-left: 25rpx;\n}\n.alert_box .contents .tips::before {\n  content: '';\n  position: absolute;\n  top: 13rpx;\n  left: 0;\n  width: 12rpx;\n  height: 12rpx;\n  transform: rotate(45deg);\n  background: linear-gradient(to bottom, #F5D7AD, #E4B779);\n}\n.alert_box .contents .btns {\n  width: 460rpx;\n  height: 90rpx;\n  background: linear-gradient(to right, #D69151, #BC7B3D);\n  text-align: center;\n  color: #FFFFFF;\n  font-size: 30rpx;\n  line-height: 90rpx;\n  border-radius: 90rpx;\n}"},"convertDir/pages/inquiry/trtc/components/controller/user-controller":{"js":"import Event from '../utils/event.js'\nimport User from '../model/user.js'\nimport Stream from '../model/stream.js'\nimport { EVENT } from '../common/constants.js'\n\nconst TAG_NAME = 'UserController'\n/**\n * 通讯成员管理\n */\nclass UserController {\n  constructor(componentContext) {\n    // userMap 用于存储完整的数据结构\n    this.userMap = new Map()\n    // userList 用于存储简化的用户数据 Object，包括 {userID hasMainAudio hasMainVideo hasAuxAudio hasAuxVideo}\n    this.userList = []\n    // streamList 存储steam 对象列表，用于 trtc-room 渲染 player\n    this.streamList = []\n    this._emitter = new Event()\n    this.componentContext = componentContext\n    this.isNewVersion = componentContext.isNewVersion\n  }\n  userEventHandler(event) {\n    const code = event.detail.code\n    let data\n    if (event.detail.message && typeof event.detail.message === 'string') {\n      try {\n        data = JSON.parse(event.detail.message)\n      } catch (exception) {\n        console.warn(TAG_NAME, 'userEventHandler 数据格式错误', exception)\n        return false\n      }\n    } else {\n      console.warn(TAG_NAME, 'userEventHandler 数据格式错误')\n      return false\n    }\n    switch (code) {\n      case 1020:\n        // console.log(TAG_NAME, '远端用户全量列表更新：', code)\n        if (!this.isNewVersion) {\n          // TODO 旧版SDK处理逻辑，返回全量的用户列表,需要对userList 进行前后对比，筛选出新增用户，暂不实现\n        }\n        break\n      case 1031:\n        // console.log(TAG_NAME, '远端用户进房通知：', code)\n        // 1031 有新用户\n        // {\n        //   \"userlist\":[\n        //          {\n        //              \"userid\":\"webrtc11\"\n        //          }\n        //      ]\n        // }\n        this.addUser(data)\n        break\n      case 1032:\n        // console.log(TAG_NAME, '远端用户退房通知：', code)\n        // 1032 有用户退出\n        this.removeUser(data)\n        break\n      case 1033:\n        // console.log(TAG_NAME, '远端用户视频状态位变化通知：', code)\n        // 1033 用户视频状态变化，新增stream或者更新stream 状态\n        // {\n        //   \"userlist\":[\n        //          {\n        //              \"userid\":\"webrtc11\",\n        //              \"playurl\":\" room://rtc.tencent.com?userid=xxx&streamtype=main\",\n        //              \"streamtype\":\"main\",\n        //              \"hasvideo\":true\n        //          }\n        //      ]\n        // }\n        this.updateUserVideo(data)\n        break\n      case 1034:\n        // console.log(TAG_NAME, '远端用户音频状态位变化通知：', code)\n        // 1034 用户音频状态变化\n        // {\n        //   \"userlist\":[\n        //          {\n        //              \"userid\":\"webrtc11\",\n        //              \"playurl\":\" room://rtc.tencent.com?userid=xxx&streamtype=main\",\n        //              \"hasaudio\":false\n        //          }\n        //      ]\n        // }\n        this.updateUserAudio(data)\n        break\n    }\n  }\n  /**\n   * 处理用户进房事件\n   * @param {Object} data pusher 下发的数据\n   */\n  addUser(data) {\n    // console.log(TAG_NAME, 'addUser', data)\n    const incomingUserList = data.userlist\n    const userMap = this.userMap\n    if (Array.isArray(incomingUserList) && incomingUserList.length > 0) {\n      incomingUserList.forEach((item) => {\n        const userID = item.userid\n        // 已经在 map 中的用户\n        let user = this.getUser(userID)\n        if (!user) {\n          // 新增用户\n          user = new User({ userID: userID })\n          this.userList.push({\n            userID: userID,\n          })\n        }\n        userMap.set(userID, user)\n        this._emitter.emit(EVENT.REMOTE_USER_JOIN, { userID: userID, userList: this.userList })\n        // console.log(TAG_NAME, 'addUser', item, userMap.get(userID), this.userMap)\n      })\n    }\n  }\n  /**\n   * 处理用户退房事件\n   * @param {Object} data pusher 下发的数据 {userlist}\n   */\n  removeUser(data) {\n    // console.log(TAG_NAME, 'removeUser', data)\n    const incomingUserList = data.userlist\n    if (Array.isArray(incomingUserList) && incomingUserList.length > 0) {\n      incomingUserList.forEach((item) => {\n        const userID = item.userid\n        let user = this.getUser(userID)\n        // 偶现SDK触发退房事件前没有触发进房事件\n        if (!user || !user.streams) {\n          return\n        }\n        // 从userList 里删除指定的用户和 stream\n        this._removeUserAndStream(userID)\n        // 重置\n        user.streams['main'] && user.streams['main'].reset()\n        user.streams['aux'] && user.streams['aux'].reset()\n        // 用户退出，释放引用，外部调用该 user 所有stream 的 playerContext.stop() 方法停止播放\n        // TODO 触发时机提前了，方便外部用户做出处理，时机仍需进一步验证\n        this._emitter.emit(EVENT.REMOTE_USER_LEAVE, { userID: userID, userList: this.userList, streamList: this.streamList })\n        user = undefined\n        this.userMap.delete(userID)\n        // console.log(TAG_NAME, 'removeUser', this.userMap)\n      })\n    }\n  }\n  /**\n   * 处理用户视频通知事件\n   * @param {Object} data pusher 下发的数据 {userlist}\n   */\n  updateUserVideo(data) {\n    console.log(TAG_NAME, 'updateUserVideo', data)\n    const incomingUserList = data.userlist\n    if (Array.isArray(incomingUserList) && incomingUserList.length > 0) {\n      incomingUserList.forEach((item) => {\n        const userID = item.userid\n        const streamType = item.streamtype\n        const streamID = userID + '_' + streamType\n        const hasVideo = item.hasvideo\n        const src = item.playurl\n        const user = this.getUser(userID)\n        // 更新指定用户的属性\n        if (user) {\n          // 查找对应的 stream\n          let stream = user.streams[streamType]\n          console.log(TAG_NAME, 'updateUserVideo start', user, streamType, stream)\n          // 常规逻辑\n          // 新来的stream，新增到 user.steams 和 streamList，streamList 包含所有用户(有音频或视频)的 stream\n          if (!stream) {\n            // 不在 user streams 里，需要新建\n            user.streams[streamType] = stream = new Stream({ userID, streamID, hasVideo, src, streamType })\n            this._addStream(stream)\n          } else {\n            // 更新 stream 属性\n            stream.setProperty({ hasVideo })\n            if (!hasVideo && !stream.hasAudio) {\n              this._removeStream(stream)\n            }\n            // or\n            // if (hasVideo) {\n            //   stream.setProperty({ hasVideo })\n            // } else if (!stream.hasAudio) {\n            //   // hasVideo == false && hasAudio == false\n            //   this._removeStream(stream)\n            // }\n          }\n          // 特殊逻辑\n          if (streamType === 'aux') {\n            if (hasVideo) {\n              // 辅流需要修改填充模式\n              stream.objectFit = 'contain'\n              this._addStream(stream)\n            } else {\n              // 如果是辅流要移除该 stream，否则需要移除 player\n              this._removeStream(stream)\n            }\n          }\n          // 更新所属user 的 hasXxx 值\n          this.userList.find((item)=>{\n            if (item.userID === userID) {\n              item[`has${streamType.replace(/^\\S/, (s) => s.toUpperCase())}Video`] = hasVideo\n              return true\n            }\n          })\n          console.log(TAG_NAME, 'updateUserVideo end', user, streamType, stream)\n          const eventName = hasVideo ? EVENT.REMOTE_VIDEO_ADD : EVENT.REMOTE_VIDEO_REMOVE\n          this._emitter.emit(eventName, { stream: stream, streamList: this.streamList, userList: this.userList })\n          // console.log(TAG_NAME, 'updateUserVideo', user, stream, this.userMap)\n        }\n      })\n    }\n  }\n  /**\n   * 处理用户音频通知事件\n   * @param {Object} data pusher 下发的数据 {userlist}\n   */\n  updateUserAudio(data) {\n    // console.log(TAG_NAME, 'updateUserAudio', data)\n    const incomingUserList = data.userlist\n    if (Array.isArray(incomingUserList) && incomingUserList.length > 0) {\n      incomingUserList.forEach((item) => {\n        const userID = item.userid\n        // 音频只跟着 stream main ，这里只修改 main\n        const streamType = 'main'\n        const streamID = userID + '_' + streamType\n        const hasAudio = item.hasaudio\n        const src = item.playurl\n        const user = this.getUser(userID)\n        if (user) {\n          let stream = user.streams[streamType]\n          // if (!stream) {\n          //   user.streams[streamType] = stream = new Stream({ streamType: streamType })\n          //   this._addStream(stream)\n          // }\n\n          // 常规逻辑\n          // 新来的stream，新增到 user.steams 和 streamList，streamList 包含所有用户的 stream\n          if (!stream) {\n            // 不在 user streams 里，需要新建\n            user.streams[streamType] = stream = new Stream({ userID, streamID, hasAudio, src, streamType })\n            this._addStream(stream)\n          } else {\n            // 更新 stream 属性\n            stream.setProperty({ hasAudio })\n            if (!hasAudio && !stream.hasVideo) {\n              this._removeStream(stream)\n            }\n            // or\n            // if (hasAudio) {\n            //   stream.setProperty({ hasAudio })\n            // } else if (!stream.hasVideo) {\n            // // hasVideo == false && hasAudio == false\n            //   this._removeStream(stream)\n            // }\n          }\n\n          // stream.userID = userID\n          // stream.streamID = userID + '_' + streamType\n          // stream.hasAudio = hasAudio\n          // stream.src = src\n          // 更新所属 user 的 hasXxx 值\n          this.userList.find((item)=>{\n            if (item.userID === userID) {\n              item[`has${streamType.replace(/^\\S/, (s) => s.toUpperCase())}Audio`] = hasAudio\n              return true\n            }\n          })\n          const eventName = hasAudio ? EVENT.REMOTE_AUDIO_ADD : EVENT.REMOTE_AUDIO_REMOVE\n          this._emitter.emit(eventName, { stream: stream, streamList: this.streamList, userList: this.userList })\n          // console.log(TAG_NAME, 'updateUserAudio', user, stream, this.userMap)\n        }\n      })\n    }\n  }\n  /**\n   *\n   * @param {String} userID 用户ID\n   * @returns {Object}\n   */\n  getUser(userID) {\n    return this.userMap.get(userID)\n  }\n  getStream({ userID, streamType }) {\n    const user = this.userMap.get(userID)\n    if (user) {\n      return user.streams[streamType]\n    }\n    return undefined\n  }\n  getUserList() {\n    return this.userList\n  }\n  getStreamList() {\n    return this.streamList\n  }\n  /**\n   * 重置所有user 和 steam\n   * @returns {Object}\n   */\n  reset() {\n    this.streamList.forEach((item)=>{\n      item.reset()\n    })\n    this.streamList = []\n    this.userList = []\n    this.userMap.clear()\n    return {\n      userList: this.userList,\n      streamList: this.streamList,\n    }\n  }\n  on(eventCode, handler, context) {\n    this._emitter.on(eventCode, handler, context)\n  }\n  off(eventCode, handler) {\n    this._emitter.off(eventCode, handler)\n  }\n  /**\n   * 删除用户和所有的 stream\n   * @param {String} userID 用户ID\n   */\n  _removeUserAndStream(userID) {\n    this.streamList = this.streamList.filter((item)=>{\n      return item.userID !== userID && item.userID !== ''\n    })\n    this.userList = this.userList.filter((item)=>{\n      return item.userID !== userID\n    })\n  }\n  _addStream(stream) {\n    if (!this.streamList.includes(stream)) {\n      this.streamList.push(stream)\n    }\n  }\n  _removeStream(stream) {\n    this.streamList = this.streamList.filter((item)=>{\n      if (item.userID === stream.userID && item.streamType === stream.streamType) {\n        return false\n      }\n      return true\n    })\n    const user = this.getUser(stream.userID)\n    user.streams[stream.streamType] = undefined\n  }\n}\n\nexport default UserController\n"},"convertDir/pages/onlineGoods/cityList/allcity":{"js":"var city=[[{\"id\":\"110000\",\"name\":\"北京\",\"fullname\":\"北京市\",\"pinyin\":[\"bei\",\"jing\"],\"location\":{\"lat\":39.90469,\"lng\":116.40717},\"cidx\":[0,15]},{\"id\":\"120000\",\"name\":\"天津\",\"fullname\":\"天津市\",\"pinyin\":[\"tian\",\"jin\"],\"location\":{\"lat\":39.0851,\"lng\":117.19937},\"cidx\":[16,31]},{\"id\":\"150000\",\"name\":\"内蒙古\",\"fullname\":\"内蒙古自治区\",\"pinyin\":[\"nei\",\"meng\",\"gu\"],\"location\":{\"lat\":40.81733,\"lng\":111.76522},\"cidx\":[54,65]},{\"id\":\"310000\",\"name\":\"上海\",\"fullname\":\"上海市\",\"pinyin\":[\"shang\",\"hai\"],\"location\":{\"lat\":31.23037,\"lng\":121.4737},\"cidx\":[102,117]},{\"id\":\"450000\",\"name\":\"广西\",\"fullname\":\"广西壮族自治区\",\"pinyin\":[\"guang\",\"xi\"],\"location\":{\"lat\":22.81521,\"lng\":108.32754},\"cidx\":[264,277]},{\"id\":\"500000\",\"name\":\"重庆\",\"fullname\":\"重庆市\",\"pinyin\":[\"chong\",\"qing\"],\"location\":{\"lat\":29.56471,\"lng\":106.55073},\"cidx\":[297,334]},{\"id\":\"540000\",\"name\":\"西藏\",\"fullname\":\"西藏自治区\",\"pinyin\":[\"xi\",\"zang\"],\"location\":{\"lat\":29.64725,\"lng\":91.11748},\"cidx\":[381,387]},{\"id\":\"640000\",\"name\":\"宁夏\",\"fullname\":\"宁夏回族自治区\",\"pinyin\":[\"ning\",\"xia\"],\"location\":{\"lat\":38.47117,\"lng\":106.25867},\"cidx\":[420,424]},{\"id\":\"650000\",\"name\":\"新疆\",\"fullname\":\"新疆维吾尔自治区\",\"pinyin\":[\"xin\",\"jiang\"],\"location\":{\"lat\":43.79343,\"lng\":87.6271},\"cidx\":[425,448]},{\"id\":\"710000\",\"name\":\"台湾\",\"fullname\":\"台湾\",\"pinyin\":[\"tai\",\"wan\"],\"location\":{\"lat\":25.030724,\"lng\":121.520076},\"cidx\":[449,468]},{\"id\":\"810000\",\"name\":\"香港\",\"fullname\":\"香港特别行政区\",\"pinyin\":[\"xiang\",\"gang\"],\"location\":{\"lat\":22.27534,\"lng\":114.16546},\"cidx\":[469,486]},{\"id\":\"820000\",\"name\":\"澳门\",\"fullname\":\"澳门特别行政区\",\"pinyin\":[\"ao\",\"men\"],\"location\":{\"lat\":22.19875,\"lng\":113.54913},\"cidx\":[487,490]},{\"id\":\"130100\",\"name\":\"石家庄\",\"fullname\":\"石家庄市\",\"pinyin\":[\"shi\",\"jia\",\"zhuang\"],\"location\":{\"lat\":38.04276,\"lng\":114.5143},\"cidx\":[0,21]},{\"id\":\"130200\",\"name\":\"唐山\",\"fullname\":\"唐山市\",\"pinyin\":[\"tang\",\"shan\"],\"location\":{\"lat\":39.63048,\"lng\":118.18058},\"cidx\":[22,36]},{\"id\":\"130300\",\"name\":\"秦皇岛\",\"fullname\":\"秦皇岛市\",\"pinyin\":[\"qin\",\"huang\",\"dao\"],\"location\":{\"lat\":39.93545,\"lng\":119.59964},\"cidx\":[37,43]},{\"id\":\"130400\",\"name\":\"邯郸\",\"fullname\":\"邯郸市\",\"pinyin\":[\"han\",\"dan\"],\"location\":{\"lat\":36.62556,\"lng\":114.53918},\"cidx\":[44,61]},{\"id\":\"130500\",\"name\":\"邢台\",\"fullname\":\"邢台市\",\"pinyin\":[\"xing\",\"tai\"],\"location\":{\"lat\":37.07055,\"lng\":114.50443},\"cidx\":[62,80]},{\"id\":\"130600\",\"name\":\"保定\",\"fullname\":\"保定市\",\"pinyin\":[\"bao\",\"ding\"],\"location\":{\"lat\":38.87396,\"lng\":115.46459},\"cidx\":[81,104]},{\"id\":\"130700\",\"name\":\"张家口\",\"fullname\":\"张家口市\",\"pinyin\":[\"zhang\",\"jia\",\"kou\"],\"location\":{\"lat\":40.82444,\"lng\":114.88755},\"cidx\":[105,120]},{\"id\":\"130800\",\"name\":\"承德\",\"fullname\":\"承德市\",\"pinyin\":[\"cheng\",\"de\"],\"location\":{\"lat\":40.9515,\"lng\":117.9634},\"cidx\":[121,131]},{\"id\":\"130900\",\"name\":\"沧州\",\"fullname\":\"沧州市\",\"pinyin\":[\"cang\",\"zhou\"],\"location\":{\"lat\":38.30441,\"lng\":116.83869},\"cidx\":[132,147]},{\"id\":\"131000\",\"name\":\"廊坊\",\"fullname\":\"廊坊市\",\"pinyin\":[\"lang\",\"fang\"],\"location\":{\"lat\":39.53775,\"lng\":116.68376},\"cidx\":[148,157]},{\"id\":\"131100\",\"name\":\"衡水\",\"fullname\":\"衡水市\",\"pinyin\":[\"heng\",\"shui\"],\"location\":{\"lat\":37.73886,\"lng\":115.67054},\"cidx\":[158,168]},{\"id\":\"140100\",\"name\":\"太原\",\"fullname\":\"太原市\",\"pinyin\":[\"tai\",\"yuan\"],\"location\":{\"lat\":37.87059,\"lng\":112.55067},\"cidx\":[169,178]},{\"id\":\"140200\",\"name\":\"大同\",\"fullname\":\"大同市\",\"pinyin\":[\"da\",\"tong\"],\"location\":{\"lat\":40.07637,\"lng\":113.30001},\"cidx\":[179,188]},{\"id\":\"140300\",\"name\":\"阳泉\",\"fullname\":\"阳泉市\",\"pinyin\":[\"yang\",\"quan\"],\"location\":{\"lat\":37.85668,\"lng\":113.58047},\"cidx\":[189,193]},{\"id\":\"140400\",\"name\":\"长治\",\"fullname\":\"长治市\",\"pinyin\":[\"chang\",\"zhi\"],\"location\":{\"lat\":36.19581,\"lng\":113.11649},\"cidx\":[194,205]},{\"id\":\"140500\",\"name\":\"晋城\",\"fullname\":\"晋城市\",\"pinyin\":[\"jin\",\"cheng\"],\"location\":{\"lat\":35.49039,\"lng\":112.85113},\"cidx\":[206,211]},{\"id\":\"140600\",\"name\":\"朔州\",\"fullname\":\"朔州市\",\"pinyin\":[\"shuo\",\"zhou\"],\"location\":{\"lat\":39.33155,\"lng\":112.43286},\"cidx\":[212,217]},{\"id\":\"140700\",\"name\":\"晋中\",\"fullname\":\"晋中市\",\"pinyin\":[\"jin\",\"zhong\"],\"location\":{\"lat\":37.68702,\"lng\":112.75278},\"cidx\":[218,228]},{\"id\":\"140800\",\"name\":\"运城\",\"fullname\":\"运城市\",\"pinyin\":[\"yun\",\"cheng\"],\"location\":{\"lat\":35.02628,\"lng\":111.00699},\"cidx\":[229,241]},{\"id\":\"140900\",\"name\":\"忻州\",\"fullname\":\"忻州市\",\"pinyin\":[\"xin\",\"zhou\"],\"location\":{\"lat\":38.4167,\"lng\":112.73418},\"cidx\":[242,255]},{\"id\":\"141000\",\"name\":\"临汾\",\"fullname\":\"临汾市\",\"pinyin\":[\"lin\",\"fen\"],\"location\":{\"lat\":36.08822,\"lng\":111.51962},\"cidx\":[256,272]},{\"id\":\"141100\",\"name\":\"吕梁\",\"fullname\":\"吕梁市\",\"pinyin\":[\"lv\",\"liang\"],\"location\":{\"lat\":37.51934,\"lng\":111.14165},\"cidx\":[273,285]},{\"id\":\"150100\",\"name\":\"呼和浩特\",\"fullname\":\"呼和浩特市\",\"pinyin\":[\"hu\",\"he\",\"hao\",\"te\"],\"location\":{\"lat\":40.84149,\"lng\":111.75199},\"cidx\":[286,294]},{\"id\":\"150200\",\"name\":\"包头\",\"fullname\":\"包头市\",\"pinyin\":[\"bao\",\"tou\"],\"location\":{\"lat\":40.65781,\"lng\":109.84021},\"cidx\":[295,303]},{\"id\":\"150300\",\"name\":\"乌海\",\"fullname\":\"乌海市\",\"pinyin\":[\"wu\",\"hai\"],\"location\":{\"lat\":39.65384,\"lng\":106.79546},\"cidx\":[304,306]},{\"id\":\"150400\",\"name\":\"赤峰\",\"fullname\":\"赤峰市\",\"pinyin\":[\"chi\",\"feng\"],\"location\":{\"lat\":42.2586,\"lng\":118.88894},\"cidx\":[307,318]},{\"id\":\"150500\",\"name\":\"通辽\",\"fullname\":\"通辽市\",\"pinyin\":[\"tong\",\"liao\"],\"location\":{\"lat\":43.65247,\"lng\":122.24469},\"cidx\":[319,326]},{\"id\":\"150600\",\"name\":\"鄂尔多斯\",\"fullname\":\"鄂尔多斯市\",\"pinyin\":[\"e\",\"er\",\"duo\",\"si\"],\"location\":{\"lat\":39.60845,\"lng\":109.78087},\"cidx\":[327,335]},{\"id\":\"150700\",\"name\":\"呼伦贝尔\",\"fullname\":\"呼伦贝尔市\",\"pinyin\":[\"hu\",\"lun\",\"bei\",\"er\"],\"location\":{\"lat\":49.21163,\"lng\":119.76584},\"cidx\":[336,349]},{\"id\":\"150800\",\"name\":\"巴彦淖尔\",\"fullname\":\"巴彦淖尔市\",\"pinyin\":[\"ba\",\"yan\",\"nao\",\"er\"],\"location\":{\"lat\":40.74317,\"lng\":107.38773},\"cidx\":[350,356]},{\"id\":\"150900\",\"name\":\"乌兰察布\",\"fullname\":\"乌兰察布市\",\"pinyin\":[\"wu\",\"lan\",\"cha\",\"bu\"],\"location\":{\"lat\":40.99391,\"lng\":113.13376},\"cidx\":[357,367]},{\"id\":\"152200\",\"name\":\"兴安\",\"fullname\":\"兴安盟\",\"pinyin\":[\"xing\",\"an\"],\"location\":{\"lat\":46.08208,\"lng\":122.03818},\"cidx\":[368,373]},{\"id\":\"152500\",\"name\":\"锡林郭勒\",\"fullname\":\"锡林郭勒盟\",\"pinyin\":[\"xi\",\"lin\",\"guo\",\"le\"],\"location\":{\"lat\":43.9332,\"lng\":116.04775},\"cidx\":[374,385]},{\"id\":\"152900\",\"name\":\"阿拉善\",\"fullname\":\"阿拉善盟\",\"pinyin\":[\"a\",\"la\",\"shan\"],\"location\":{\"lat\":38.85153,\"lng\":105.72898},\"cidx\":[386,388]},{\"id\":\"210100\",\"name\":\"沈阳\",\"fullname\":\"沈阳市\",\"pinyin\":[\"shen\",\"yang\"],\"location\":{\"lat\":41.67718,\"lng\":123.4631},\"cidx\":[389,401]},{\"id\":\"210200\",\"name\":\"大连\",\"fullname\":\"大连市\",\"pinyin\":[\"da\",\"lian\"],\"location\":{\"lat\":38.91369,\"lng\":121.61476},\"cidx\":[402,411]},{\"id\":\"210300\",\"name\":\"鞍山\",\"fullname\":\"鞍山市\",\"pinyin\":[\"an\",\"shan\"],\"location\":{\"lat\":41.10777,\"lng\":122.9946},\"cidx\":[412,418]},{\"id\":\"210400\",\"name\":\"抚顺\",\"fullname\":\"抚顺市\",\"pinyin\":[\"fu\",\"shun\"],\"location\":{\"lat\":41.87971,\"lng\":123.95722},\"cidx\":[419,425]},{\"id\":\"210500\",\"name\":\"本溪\",\"fullname\":\"本溪市\",\"pinyin\":[\"ben\",\"xi\"],\"location\":{\"lat\":41.29413,\"lng\":123.76686},\"cidx\":[426,431]},{\"id\":\"210600\",\"name\":\"丹东\",\"fullname\":\"丹东市\",\"pinyin\":[\"dan\",\"dong\"],\"location\":{\"lat\":39.9998,\"lng\":124.35601},\"cidx\":[432,437]},{\"id\":\"210700\",\"name\":\"锦州\",\"fullname\":\"锦州市\",\"pinyin\":[\"jin\",\"zhou\"],\"location\":{\"lat\":41.09515,\"lng\":121.12703},\"cidx\":[438,444]},{\"id\":\"210800\",\"name\":\"营口\",\"fullname\":\"营口市\",\"pinyin\":[\"ying\",\"kou\"],\"location\":{\"lat\":40.66683,\"lng\":122.2349},\"cidx\":[445,450]},{\"id\":\"210900\",\"name\":\"阜新\",\"fullname\":\"阜新市\",\"pinyin\":[\"fu\",\"xin\"],\"location\":{\"lat\":42.02166,\"lng\":121.67011},\"cidx\":[451,457]},{\"id\":\"211000\",\"name\":\"辽阳\",\"fullname\":\"辽阳市\",\"pinyin\":[\"liao\",\"yang\"],\"location\":{\"lat\":41.26809,\"lng\":123.23736},\"cidx\":[458,464]},{\"id\":\"211100\",\"name\":\"盘锦\",\"fullname\":\"盘锦市\",\"pinyin\":[\"pan\",\"jin\"],\"location\":{\"lat\":41.11996,\"lng\":122.07078},\"cidx\":[465,468]},{\"id\":\"211200\",\"name\":\"铁岭\",\"fullname\":\"铁岭市\",\"pinyin\":[\"tie\",\"ling\"],\"location\":{\"lat\":42.2862,\"lng\":123.84241},\"cidx\":[469,475]},{\"id\":\"211300\",\"name\":\"朝阳\",\"fullname\":\"朝阳市\",\"pinyin\":[\"chao\",\"yang\"],\"location\":{\"lat\":41.57347,\"lng\":120.4508},\"cidx\":[476,482]},{\"id\":\"211400\",\"name\":\"葫芦岛\",\"fullname\":\"葫芦岛市\",\"pinyin\":[\"hu\",\"lu\",\"dao\"],\"location\":{\"lat\":40.711,\"lng\":120.83699},\"cidx\":[483,488]},{\"id\":\"220100\",\"name\":\"长春\",\"fullname\":\"长春市\",\"pinyin\":[\"chang\",\"chun\"],\"location\":{\"lat\":43.81602,\"lng\":125.32357},\"cidx\":[489,498]},{\"id\":\"220200\",\"name\":\"吉林\",\"fullname\":\"吉林市\",\"pinyin\":[\"ji\",\"lin\"],\"location\":{\"lat\":43.83784,\"lng\":126.54944},\"cidx\":[499,507]},{\"id\":\"220300\",\"name\":\"四平\",\"fullname\":\"四平市\",\"pinyin\":[\"si\",\"ping\"],\"location\":{\"lat\":43.16646,\"lng\":124.35036},\"cidx\":[508,513]},{\"id\":\"220400\",\"name\":\"辽源\",\"fullname\":\"辽源市\",\"pinyin\":[\"liao\",\"yuan\"],\"location\":{\"lat\":42.88805,\"lng\":125.14368},\"cidx\":[514,517]},{\"id\":\"220500\",\"name\":\"通化\",\"fullname\":\"通化市\",\"pinyin\":[\"tong\",\"hua\"],\"location\":{\"lat\":41.72829,\"lng\":125.9399},\"cidx\":[518,524]},{\"id\":\"220600\",\"name\":\"白山\",\"fullname\":\"白山市\",\"pinyin\":[\"bai\",\"shan\"],\"location\":{\"lat\":41.9408,\"lng\":126.42443},\"cidx\":[525,530]},{\"id\":\"220700\",\"name\":\"松原\",\"fullname\":\"松原市\",\"pinyin\":[\"song\",\"yuan\"],\"location\":{\"lat\":45.1411,\"lng\":124.82515},\"cidx\":[531,535]},{\"id\":\"220800\",\"name\":\"白城\",\"fullname\":\"白城市\",\"pinyin\":[\"bai\",\"cheng\"],\"location\":{\"lat\":45.6196,\"lng\":122.83871},\"cidx\":[536,540]},{\"id\":\"222400\",\"name\":\"延边\",\"fullname\":\"延边朝鲜族自治州\",\"pinyin\":[\"yan\",\"bian\"],\"location\":{\"lat\":42.89119,\"lng\":129.5091},\"cidx\":[541,548]},{\"id\":\"230100\",\"name\":\"哈尔滨\",\"fullname\":\"哈尔滨市\",\"pinyin\":[\"ha\",\"er\",\"bin\"],\"location\":{\"lat\":45.80216,\"lng\":126.5358},\"cidx\":[549,566]},{\"id\":\"230200\",\"name\":\"齐齐哈尔\",\"fullname\":\"齐齐哈尔市\",\"pinyin\":[\"qi\",\"qi\",\"ha\",\"er\"],\"location\":{\"lat\":47.35431,\"lng\":123.91796},\"cidx\":[567,582]},{\"id\":\"230300\",\"name\":\"鸡西\",\"fullname\":\"鸡西市\",\"pinyin\":[\"ji\",\"xi\"],\"location\":{\"lat\":45.29524,\"lng\":130.96954},\"cidx\":[583,591]},{\"id\":\"230400\",\"name\":\"鹤岗\",\"fullname\":\"鹤岗市\",\"pinyin\":[\"he\",\"gang\"],\"location\":{\"lat\":47.34989,\"lng\":130.29785},\"cidx\":[592,599]},{\"id\":\"230500\",\"name\":\"双鸭山\",\"fullname\":\"双鸭山市\",\"pinyin\":[\"shuang\",\"ya\",\"shan\"],\"location\":{\"lat\":46.64658,\"lng\":131.1591},\"cidx\":[600,607]},{\"id\":\"230600\",\"name\":\"大庆\",\"fullname\":\"大庆市\",\"pinyin\":[\"da\",\"qing\"],\"location\":{\"lat\":46.58758,\"lng\":125.10307},\"cidx\":[608,616]},{\"id\":\"230700\",\"name\":\"伊春\",\"fullname\":\"伊春市\",\"pinyin\":[\"yi\",\"chun\"],\"location\":{\"lat\":47.72752,\"lng\":128.84049},\"cidx\":[617,626]},{\"id\":\"230800\",\"name\":\"佳木斯\",\"fullname\":\"佳木斯市\",\"pinyin\":[\"jia\",\"mu\",\"si\"],\"location\":{\"lat\":46.79977,\"lng\":130.31882},\"cidx\":[627,636]},{\"id\":\"230900\",\"name\":\"七台河\",\"fullname\":\"七台河市\",\"pinyin\":[\"qi\",\"tai\",\"he\"],\"location\":{\"lat\":45.77065,\"lng\":131.00306},\"cidx\":[637,640]},{\"id\":\"231000\",\"name\":\"牡丹江\",\"fullname\":\"牡丹江市\",\"pinyin\":[\"mu\",\"dan\",\"jiang\"],\"location\":{\"lat\":44.55269,\"lng\":129.63244},\"cidx\":[641,650]},{\"id\":\"231100\",\"name\":\"黑河\",\"fullname\":\"黑河市\",\"pinyin\":[\"hei\",\"he\"],\"location\":{\"lat\":50.24523,\"lng\":127.52852},\"cidx\":[651,656]},{\"id\":\"231200\",\"name\":\"绥化\",\"fullname\":\"绥化市\",\"pinyin\":[\"sui\",\"hua\"],\"location\":{\"lat\":46.65246,\"lng\":126.96932},\"cidx\":[657,666]},{\"id\":\"232700\",\"name\":\"大兴安岭\",\"fullname\":\"大兴安岭地区\",\"pinyin\":[\"da\",\"xing\",\"an\",\"ling\"],\"location\":{\"lat\":51.92398,\"lng\":124.59216},\"cidx\":[667,670]},{\"id\":\"320100\",\"name\":\"南京\",\"fullname\":\"南京市\",\"pinyin\":[\"nan\",\"jing\"],\"location\":{\"lat\":32.05838,\"lng\":118.79647},\"cidx\":[671,681]},{\"id\":\"320200\",\"name\":\"无锡\",\"fullname\":\"无锡市\",\"pinyin\":[\"wu\",\"xi\"],\"location\":{\"lat\":31.49099,\"lng\":120.31237},\"cidx\":[682,688]},{\"id\":\"320300\",\"name\":\"徐州\",\"fullname\":\"徐州市\",\"pinyin\":[\"xu\",\"zhou\"],\"location\":{\"lat\":34.2044,\"lng\":117.28577},\"cidx\":[689,698]},{\"id\":\"320400\",\"name\":\"常州\",\"fullname\":\"常州市\",\"pinyin\":[\"chang\",\"zhou\"],\"location\":{\"lat\":31.81072,\"lng\":119.97365},\"cidx\":[699,704]},{\"id\":\"320500\",\"name\":\"苏州\",\"fullname\":\"苏州市\",\"pinyin\":[\"su\",\"zhou\"],\"location\":{\"lat\":31.29834,\"lng\":120.58319},\"cidx\":[705,713]},{\"id\":\"320600\",\"name\":\"南通\",\"fullname\":\"南通市\",\"pinyin\":[\"nan\",\"tong\"],\"location\":{\"lat\":31.97958,\"lng\":120.89371},\"cidx\":[714,721]},{\"id\":\"320700\",\"name\":\"连云港\",\"fullname\":\"连云港市\",\"pinyin\":[\"lian\",\"yun\",\"gang\"],\"location\":{\"lat\":34.59669,\"lng\":119.22295},\"cidx\":[722,727]},{\"id\":\"320800\",\"name\":\"淮安\",\"fullname\":\"淮安市\",\"pinyin\":[\"huai\",\"an\"],\"location\":{\"lat\":33.61016,\"lng\":119.01595},\"cidx\":[728,734]},{\"id\":\"320900\",\"name\":\"盐城\",\"fullname\":\"盐城市\",\"pinyin\":[\"yan\",\"cheng\"],\"location\":{\"lat\":33.34951,\"lng\":120.16164},\"cidx\":[735,743]},{\"id\":\"321000\",\"name\":\"扬州\",\"fullname\":\"扬州市\",\"pinyin\":[\"yang\",\"zhou\"],\"location\":{\"lat\":32.39358,\"lng\":119.41269},\"cidx\":[744,749]},{\"id\":\"321100\",\"name\":\"镇江\",\"fullname\":\"镇江市\",\"pinyin\":[\"zhen\",\"jiang\"],\"location\":{\"lat\":32.18959,\"lng\":119.425},\"cidx\":[750,755]},{\"id\":\"321200\",\"name\":\"泰州\",\"fullname\":\"泰州市\",\"pinyin\":[\"tai\",\"zhou\"],\"location\":{\"lat\":32.45546,\"lng\":119.92554},\"cidx\":[756,761]},{\"id\":\"321300\",\"name\":\"宿迁\",\"fullname\":\"宿迁市\",\"pinyin\":[\"su\",\"qian\"],\"location\":{\"lat\":33.96193,\"lng\":118.27549},\"cidx\":[762,766]},{\"id\":\"330100\",\"name\":\"杭州\",\"fullname\":\"杭州市\",\"pinyin\":[\"hang\",\"zhou\"],\"location\":{\"lat\":30.27415,\"lng\":120.15515},\"cidx\":[767,779]},{\"id\":\"330200\",\"name\":\"宁波\",\"fullname\":\"宁波市\",\"pinyin\":[\"ning\",\"bo\"],\"location\":{\"lat\":29.87386,\"lng\":121.55027},\"cidx\":[780,789]},{\"id\":\"330300\",\"name\":\"温州\",\"fullname\":\"温州市\",\"pinyin\":[\"wen\",\"zhou\"],\"location\":{\"lat\":27.99492,\"lng\":120.69939},\"cidx\":[790,801]},{\"id\":\"330400\",\"name\":\"嘉兴\",\"fullname\":\"嘉兴市\",\"pinyin\":[\"jia\",\"xing\"],\"location\":{\"lat\":30.74501,\"lng\":120.7555},\"cidx\":[802,808]},{\"id\":\"330500\",\"name\":\"湖州\",\"fullname\":\"湖州市\",\"pinyin\":[\"hu\",\"zhou\"],\"location\":{\"lat\":30.89305,\"lng\":120.08805},\"cidx\":[809,813]},{\"id\":\"330600\",\"name\":\"绍兴\",\"fullname\":\"绍兴市\",\"pinyin\":[\"shao\",\"xing\"],\"location\":{\"lat\":30.03033,\"lng\":120.5802},\"cidx\":[814,819]},{\"id\":\"330700\",\"name\":\"金华\",\"fullname\":\"金华市\",\"pinyin\":[\"jin\",\"hua\"],\"location\":{\"lat\":29.07812,\"lng\":119.64759},\"cidx\":[820,828]},{\"id\":\"330800\",\"name\":\"衢州\",\"fullname\":\"衢州市\",\"pinyin\":[\"qu\",\"zhou\"],\"location\":{\"lat\":28.93592,\"lng\":118.87419},\"cidx\":[829,834]},{\"id\":\"330900\",\"name\":\"舟山\",\"fullname\":\"舟山市\",\"pinyin\":[\"zhou\",\"shan\"],\"location\":{\"lat\":29.98539,\"lng\":122.20778},\"cidx\":[835,838]},{\"id\":\"331000\",\"name\":\"台州\",\"fullname\":\"台州市\",\"pinyin\":[\"tai\",\"zhou\"],\"location\":{\"lat\":28.65611,\"lng\":121.42056},\"cidx\":[839,847]},{\"id\":\"331100\",\"name\":\"丽水\",\"fullname\":\"丽水市\",\"pinyin\":[\"li\",\"shui\"],\"location\":{\"lat\":28.4672,\"lng\":119.92293},\"cidx\":[848,856]},{\"id\":\"340100\",\"name\":\"合肥\",\"fullname\":\"合肥市\",\"pinyin\":[\"he\",\"fei\"],\"location\":{\"lat\":31.82057,\"lng\":117.22901},\"cidx\":[857,865]},{\"id\":\"340200\",\"name\":\"芜湖\",\"fullname\":\"芜湖市\",\"pinyin\":[\"wu\",\"hu\"],\"location\":{\"lat\":31.35246,\"lng\":118.43313},\"cidx\":[866,873]},{\"id\":\"340300\",\"name\":\"蚌埠\",\"fullname\":\"蚌埠市\",\"pinyin\":[\"beng\",\"bu\"],\"location\":{\"lat\":32.91548,\"lng\":117.38932},\"cidx\":[874,880]},{\"id\":\"340400\",\"name\":\"淮南\",\"fullname\":\"淮南市\",\"pinyin\":[\"huai\",\"nan\"],\"location\":{\"lat\":32.62549,\"lng\":116.9998},\"cidx\":[881,887]},{\"id\":\"340500\",\"name\":\"马鞍山\",\"fullname\":\"马鞍山市\",\"pinyin\":[\"ma\",\"an\",\"shan\"],\"location\":{\"lat\":31.67067,\"lng\":118.50611},\"cidx\":[888,893]},{\"id\":\"340600\",\"name\":\"淮北\",\"fullname\":\"淮北市\",\"pinyin\":[\"huai\",\"bei\"],\"location\":{\"lat\":33.95479,\"lng\":116.79834},\"cidx\":[894,897]},{\"id\":\"340700\",\"name\":\"铜陵\",\"fullname\":\"铜陵市\",\"pinyin\":[\"tong\",\"ling\"],\"location\":{\"lat\":30.94486,\"lng\":117.81232},\"cidx\":[898,901]},{\"id\":\"340800\",\"name\":\"安庆\",\"fullname\":\"安庆市\",\"pinyin\":[\"an\",\"qing\"],\"location\":{\"lat\":30.54294,\"lng\":117.06354},\"cidx\":[902,911]},{\"id\":\"341000\",\"name\":\"黄山\",\"fullname\":\"黄山市\",\"pinyin\":[\"huang\",\"shan\"],\"location\":{\"lat\":29.71517,\"lng\":118.33866},\"cidx\":[912,918]},{\"id\":\"341100\",\"name\":\"滁州\",\"fullname\":\"滁州市\",\"pinyin\":[\"chu\",\"zhou\"],\"location\":{\"lat\":32.30181,\"lng\":118.31683},\"cidx\":[919,926]},{\"id\":\"341200\",\"name\":\"阜阳\",\"fullname\":\"阜阳市\",\"pinyin\":[\"fu\",\"yang\"],\"location\":{\"lat\":32.88963,\"lng\":115.81495},\"cidx\":[927,934]},{\"id\":\"341300\",\"name\":\"宿州\",\"fullname\":\"宿州市\",\"pinyin\":[\"su\",\"zhou\"],\"location\":{\"lat\":33.64614,\"lng\":116.96391},\"cidx\":[935,939]},{\"id\":\"341500\",\"name\":\"六安\",\"fullname\":\"六安市\",\"pinyin\":[\"liu\",\"an\"],\"location\":{\"lat\":31.73488,\"lng\":116.52324},\"cidx\":[940,946]},{\"id\":\"341600\",\"name\":\"亳州\",\"fullname\":\"亳州市\",\"pinyin\":[\"bo\",\"zhou\"],\"location\":{\"lat\":33.84461,\"lng\":115.77931},\"cidx\":[947,950]},{\"id\":\"341700\",\"name\":\"池州\",\"fullname\":\"池州市\",\"pinyin\":[\"chi\",\"zhou\"],\"location\":{\"lat\":30.66469,\"lng\":117.49142},\"cidx\":[951,954]},{\"id\":\"341800\",\"name\":\"宣城\",\"fullname\":\"宣城市\",\"pinyin\":[\"xuan\",\"cheng\"],\"location\":{\"lat\":30.94078,\"lng\":118.75866},\"cidx\":[955,961]},{\"id\":\"350100\",\"name\":\"福州\",\"fullname\":\"福州市\",\"pinyin\":[\"fu\",\"zhou\"],\"location\":{\"lat\":26.07421,\"lng\":119.29647},\"cidx\":[962,974]},{\"id\":\"350200\",\"name\":\"厦门\",\"fullname\":\"厦门市\",\"pinyin\":[\"xia\",\"men\"],\"location\":{\"lat\":24.47951,\"lng\":118.08948},\"cidx\":[975,980]},{\"id\":\"350300\",\"name\":\"莆田\",\"fullname\":\"莆田市\",\"pinyin\":[\"pu\",\"tian\"],\"location\":{\"lat\":25.454,\"lng\":119.00771},\"cidx\":[981,985]},{\"id\":\"350400\",\"name\":\"三明\",\"fullname\":\"三明市\",\"pinyin\":[\"san\",\"ming\"],\"location\":{\"lat\":26.26385,\"lng\":117.63922},\"cidx\":[986,997]},{\"id\":\"350500\",\"name\":\"泉州\",\"fullname\":\"泉州市\",\"pinyin\":[\"quan\",\"zhou\"],\"location\":{\"lat\":24.87389,\"lng\":118.67587},\"cidx\":[998,1009]},{\"id\":\"350600\",\"name\":\"漳州\",\"fullname\":\"漳州市\",\"pinyin\":[\"zhang\",\"zhou\"],\"location\":{\"lat\":24.51347,\"lng\":117.64725},\"cidx\":[1010,1020]},{\"id\":\"350700\",\"name\":\"南平\",\"fullname\":\"南平市\",\"pinyin\":[\"nan\",\"ping\"],\"location\":{\"lat\":27.33175,\"lng\":118.12043},\"cidx\":[1021,1030]},{\"id\":\"350800\",\"name\":\"龙岩\",\"fullname\":\"龙岩市\",\"pinyin\":[\"long\",\"yan\"],\"location\":{\"lat\":25.07504,\"lng\":117.01722},\"cidx\":[1031,1037]},{\"id\":\"350900\",\"name\":\"宁德\",\"fullname\":\"宁德市\",\"pinyin\":[\"ning\",\"de\"],\"location\":{\"lat\":26.66571,\"lng\":119.54819},\"cidx\":[1038,1046]},{\"id\":\"360100\",\"name\":\"南昌\",\"fullname\":\"南昌市\",\"pinyin\":[\"nan\",\"chang\"],\"location\":{\"lat\":28.68202,\"lng\":115.85794},\"cidx\":[1047,1055]},{\"id\":\"360200\",\"name\":\"景德镇\",\"fullname\":\"景德镇市\",\"pinyin\":[\"jing\",\"de\",\"zhen\"],\"location\":{\"lat\":29.26869,\"lng\":117.17839},\"cidx\":[1056,1059]},{\"id\":\"360300\",\"name\":\"萍乡\",\"fullname\":\"萍乡市\",\"pinyin\":[\"ping\",\"xiang\"],\"location\":{\"lat\":27.62289,\"lng\":113.85427},\"cidx\":[1060,1064]},{\"id\":\"360400\",\"name\":\"九江\",\"fullname\":\"九江市\",\"pinyin\":[\"jiu\",\"jiang\"],\"location\":{\"lat\":29.70548,\"lng\":116.00146},\"cidx\":[1065,1077]},{\"id\":\"360500\",\"name\":\"新余\",\"fullname\":\"新余市\",\"pinyin\":[\"xin\",\"yu\"],\"location\":{\"lat\":27.81776,\"lng\":114.91713},\"cidx\":[1078,1079]},{\"id\":\"360600\",\"name\":\"鹰潭\",\"fullname\":\"鹰潭市\",\"pinyin\":[\"ying\",\"tan\"],\"location\":{\"lat\":28.26019,\"lng\":117.06919},\"cidx\":[1080,1082]},{\"id\":\"360700\",\"name\":\"赣州\",\"fullname\":\"赣州市\",\"pinyin\":[\"gan\",\"zhou\"],\"location\":{\"lat\":25.83109,\"lng\":114.93476},\"cidx\":[1083,1100]},{\"id\":\"360800\",\"name\":\"吉安\",\"fullname\":\"吉安市\",\"pinyin\":[\"ji\",\"an\"],\"location\":{\"lat\":27.11382,\"lng\":114.99376},\"cidx\":[1101,1113]},{\"id\":\"360900\",\"name\":\"宜春\",\"fullname\":\"宜春市\",\"pinyin\":[\"yi\",\"chun\"],\"location\":{\"lat\":27.81443,\"lng\":114.41612},\"cidx\":[1114,1123]},{\"id\":\"361000\",\"name\":\"抚州\",\"fullname\":\"抚州市\",\"pinyin\":[\"fu\",\"zhou\"],\"location\":{\"lat\":27.94781,\"lng\":116.35809},\"cidx\":[1124,1134]},{\"id\":\"361100\",\"name\":\"上饶\",\"fullname\":\"上饶市\",\"pinyin\":[\"shang\",\"rao\"],\"location\":{\"lat\":28.45463,\"lng\":117.94357},\"cidx\":[1135,1146]},{\"id\":\"370100\",\"name\":\"济南\",\"fullname\":\"济南市\",\"pinyin\":[\"ji\",\"nan\"],\"location\":{\"lat\":36.65184,\"lng\":117.12009},\"cidx\":[1147,1158]},{\"id\":\"370200\",\"name\":\"青岛\",\"fullname\":\"青岛市\",\"pinyin\":[\"qing\",\"dao\"],\"location\":{\"lat\":36.06623,\"lng\":120.38299},\"cidx\":[1159,1168]},{\"id\":\"370300\",\"name\":\"淄博\",\"fullname\":\"淄博市\",\"pinyin\":[\"zi\",\"bo\"],\"location\":{\"lat\":36.8131,\"lng\":118.0548},\"cidx\":[1169,1176]},{\"id\":\"370400\",\"name\":\"枣庄\",\"fullname\":\"枣庄市\",\"pinyin\":[\"zao\",\"zhuang\"],\"location\":{\"lat\":34.81071,\"lng\":117.32196},\"cidx\":[1177,1182]},{\"id\":\"370500\",\"name\":\"东营\",\"fullname\":\"东营市\",\"pinyin\":[\"dong\",\"ying\"],\"location\":{\"lat\":37.43365,\"lng\":118.67466},\"cidx\":[1183,1187]},{\"id\":\"370600\",\"name\":\"烟台\",\"fullname\":\"烟台市\",\"pinyin\":[\"yan\",\"tai\"],\"location\":{\"lat\":37.46353,\"lng\":121.44801},\"cidx\":[1188,1199]},{\"id\":\"370700\",\"name\":\"潍坊\",\"fullname\":\"潍坊市\",\"pinyin\":[\"wei\",\"fang\"],\"location\":{\"lat\":36.70686,\"lng\":119.16176},\"cidx\":[1200,1211]},{\"id\":\"370800\",\"name\":\"济宁\",\"fullname\":\"济宁市\",\"pinyin\":[\"ji\",\"ning\"],\"location\":{\"lat\":35.41459,\"lng\":116.58724},\"cidx\":[1212,1222]},{\"id\":\"370900\",\"name\":\"泰安\",\"fullname\":\"泰安市\",\"pinyin\":[\"tai\",\"an\"],\"location\":{\"lat\":36.19994,\"lng\":117.0884},\"cidx\":[1223,1228]},{\"id\":\"371000\",\"name\":\"威海\",\"fullname\":\"威海市\",\"pinyin\":[\"wei\",\"hai\"],\"location\":{\"lat\":37.51348,\"lng\":122.12171},\"cidx\":[1229,1232]},{\"id\":\"371100\",\"name\":\"日照\",\"fullname\":\"日照市\",\"pinyin\":[\"ri\",\"zhao\"],\"location\":{\"lat\":35.41646,\"lng\":119.52719},\"cidx\":[1233,1236]},{\"id\":\"371300\",\"name\":\"临沂\",\"fullname\":\"临沂市\",\"pinyin\":[\"lin\",\"yi\"],\"location\":{\"lat\":35.10465,\"lng\":118.35646},\"cidx\":[1237,1248]},{\"id\":\"371400\",\"name\":\"德州\",\"fullname\":\"德州市\",\"pinyin\":[\"de\",\"zhou\"],\"location\":{\"lat\":37.4355,\"lng\":116.35927},\"cidx\":[1249,1259]},{\"id\":\"371500\",\"name\":\"聊城\",\"fullname\":\"聊城市\",\"pinyin\":[\"liao\",\"cheng\"],\"location\":{\"lat\":36.45702,\"lng\":115.98549},\"cidx\":[1260,1267]},{\"id\":\"371600\",\"name\":\"滨州\",\"fullname\":\"滨州市\",\"pinyin\":[\"bin\",\"zhou\"],\"location\":{\"lat\":37.38211,\"lng\":117.97279},\"cidx\":[1268,1274]},{\"id\":\"371700\",\"name\":\"菏泽\",\"fullname\":\"菏泽市\",\"pinyin\":[\"he\",\"ze\"],\"location\":{\"lat\":35.23363,\"lng\":115.48115},\"cidx\":[1275,1283]},{\"id\":\"410100\",\"name\":\"郑州\",\"fullname\":\"郑州市\",\"pinyin\":[\"zheng\",\"zhou\"],\"location\":{\"lat\":34.74725,\"lng\":113.62493},\"cidx\":[1284,1295]},{\"id\":\"410200\",\"name\":\"开封\",\"fullname\":\"开封市\",\"pinyin\":[\"kai\",\"feng\"],\"location\":{\"lat\":34.79726,\"lng\":114.30731},\"cidx\":[1296,1304]},{\"id\":\"410300\",\"name\":\"洛阳\",\"fullname\":\"洛阳市\",\"pinyin\":[\"luo\",\"yang\"],\"location\":{\"lat\":34.61812,\"lng\":112.45361},\"cidx\":[1305,1319]},{\"id\":\"410400\",\"name\":\"平顶山\",\"fullname\":\"平顶山市\",\"pinyin\":[\"ping\",\"ding\",\"shan\"],\"location\":{\"lat\":33.76609,\"lng\":113.19241},\"cidx\":[1320,1329]},{\"id\":\"410500\",\"name\":\"安阳\",\"fullname\":\"安阳市\",\"pinyin\":[\"an\",\"yang\"],\"location\":{\"lat\":36.09771,\"lng\":114.3931},\"cidx\":[1330,1338]},{\"id\":\"410600\",\"name\":\"鹤壁\",\"fullname\":\"鹤壁市\",\"pinyin\":[\"he\",\"bi\"],\"location\":{\"lat\":35.747,\"lng\":114.29745},\"cidx\":[1339,1343]},{\"id\":\"410700\",\"name\":\"新乡\",\"fullname\":\"新乡市\",\"pinyin\":[\"xin\",\"xiang\"],\"location\":{\"lat\":35.30323,\"lng\":113.92675},\"cidx\":[1344,1355]},{\"id\":\"410800\",\"name\":\"焦作\",\"fullname\":\"焦作市\",\"pinyin\":[\"jiao\",\"zuo\"],\"location\":{\"lat\":35.21563,\"lng\":113.24201},\"cidx\":[1356,1365]},{\"id\":\"410900\",\"name\":\"濮阳\",\"fullname\":\"濮阳市\",\"pinyin\":[\"pu\",\"yang\"],\"location\":{\"lat\":35.76189,\"lng\":115.02932},\"cidx\":[1366,1371]},{\"id\":\"411000\",\"name\":\"许昌\",\"fullname\":\"许昌市\",\"pinyin\":[\"xu\",\"chang\"],\"location\":{\"lat\":34.0357,\"lng\":113.85233},\"cidx\":[1372,1377]},{\"id\":\"411100\",\"name\":\"漯河\",\"fullname\":\"漯河市\",\"pinyin\":[\"luo\",\"he\"],\"location\":{\"lat\":33.58149,\"lng\":114.01681},\"cidx\":[1378,1382]},{\"id\":\"411200\",\"name\":\"三门峡\",\"fullname\":\"三门峡市\",\"pinyin\":[\"san\",\"men\",\"xia\"],\"location\":{\"lat\":34.77261,\"lng\":111.2003},\"cidx\":[1383,1388]},{\"id\":\"411300\",\"name\":\"南阳\",\"fullname\":\"南阳市\",\"pinyin\":[\"nan\",\"yang\"],\"location\":{\"lat\":32.99073,\"lng\":112.52851},\"cidx\":[1389,1401]},{\"id\":\"411400\",\"name\":\"商丘\",\"fullname\":\"商丘市\",\"pinyin\":[\"shang\",\"qiu\"],\"location\":{\"lat\":34.41427,\"lng\":115.65635},\"cidx\":[1402,1410]},{\"id\":\"411500\",\"name\":\"信阳\",\"fullname\":\"信阳市\",\"pinyin\":[\"xin\",\"yang\"],\"location\":{\"lat\":32.14714,\"lng\":114.09279},\"cidx\":[1411,1420]},{\"id\":\"411600\",\"name\":\"周口\",\"fullname\":\"周口市\",\"pinyin\":[\"zhou\",\"kou\"],\"location\":{\"lat\":33.62583,\"lng\":114.69695},\"cidx\":[1421,1430]},{\"id\":\"411700\",\"name\":\"驻马店\",\"fullname\":\"驻马店市\",\"pinyin\":[\"zhu\",\"ma\",\"dian\"],\"location\":{\"lat\":33.01142,\"lng\":114.02299},\"cidx\":[1431,1440]},{\"id\":\"419001\",\"name\":\"济源\",\"fullname\":\"济源市\",\"pinyin\":[\"ji\",\"yuan\"],\"location\":{\"lat\":35.06707,\"lng\":112.60273}},{\"id\":\"420100\",\"name\":\"武汉\",\"fullname\":\"武汉市\",\"pinyin\":[\"wu\",\"han\"],\"location\":{\"lat\":30.59276,\"lng\":114.30525},\"cidx\":[1441,1453]},{\"id\":\"420200\",\"name\":\"黄石\",\"fullname\":\"黄石市\",\"pinyin\":[\"huang\",\"shi\"],\"location\":{\"lat\":30.19953,\"lng\":115.0389},\"cidx\":[1454,1459]},{\"id\":\"420300\",\"name\":\"十堰\",\"fullname\":\"十堰市\",\"pinyin\":[\"shi\",\"yan\"],\"location\":{\"lat\":32.62918,\"lng\":110.79801},\"cidx\":[1460,1467]},{\"id\":\"420500\",\"name\":\"宜昌\",\"fullname\":\"宜昌市\",\"pinyin\":[\"yi\",\"chang\"],\"location\":{\"lat\":30.69186,\"lng\":111.28642},\"cidx\":[1468,1480]},{\"id\":\"420600\",\"name\":\"襄阳\",\"fullname\":\"襄阳市\",\"pinyin\":[\"xiang\",\"yang\"],\"location\":{\"lat\":32.009,\"lng\":112.12255},\"cidx\":[1481,1489]},{\"id\":\"420700\",\"name\":\"鄂州\",\"fullname\":\"鄂州市\",\"pinyin\":[\"e\",\"zhou\"],\"location\":{\"lat\":30.39085,\"lng\":114.89495},\"cidx\":[1490,1492]},{\"id\":\"420800\",\"name\":\"荆门\",\"fullname\":\"荆门市\",\"pinyin\":[\"jing\",\"men\"],\"location\":{\"lat\":31.03546,\"lng\":112.19945},\"cidx\":[1493,1497]},{\"id\":\"420900\",\"name\":\"孝感\",\"fullname\":\"孝感市\",\"pinyin\":[\"xiao\",\"gan\"],\"location\":{\"lat\":30.92483,\"lng\":113.91645},\"cidx\":[1498,1504]},{\"id\":\"421000\",\"name\":\"荆州\",\"fullname\":\"荆州市\",\"pinyin\":[\"jing\",\"zhou\"],\"location\":{\"lat\":30.33479,\"lng\":112.24069},\"cidx\":[1505,1512]},{\"id\":\"421100\",\"name\":\"黄冈\",\"fullname\":\"黄冈市\",\"pinyin\":[\"huang\",\"gang\"],\"location\":{\"lat\":30.45347,\"lng\":114.87238},\"cidx\":[1513,1522]},{\"id\":\"421200\",\"name\":\"咸宁\",\"fullname\":\"咸宁市\",\"pinyin\":[\"xian\",\"ning\"],\"location\":{\"lat\":29.84126,\"lng\":114.32245},\"cidx\":[1523,1528]},{\"id\":\"421300\",\"name\":\"随州\",\"fullname\":\"随州市\",\"pinyin\":[\"sui\",\"zhou\"],\"location\":{\"lat\":31.69013,\"lng\":113.38262},\"cidx\":[1529,1531]},{\"id\":\"422800\",\"name\":\"恩施\",\"fullname\":\"恩施土家族苗族自治州\",\"pinyin\":[\"en\",\"shi\"],\"location\":{\"lat\":30.27217,\"lng\":109.48817},\"cidx\":[1532,1539]},{\"id\":\"429004\",\"name\":\"仙桃\",\"fullname\":\"仙桃市\",\"pinyin\":[\"xian\",\"tao\"],\"location\":{\"lat\":30.36251,\"lng\":113.4545}},{\"id\":\"429005\",\"name\":\"潜江\",\"fullname\":\"潜江市\",\"pinyin\":[\"qian\",\"jiang\"],\"location\":{\"lat\":30.40147,\"lng\":112.8993}},{\"id\":\"429006\",\"name\":\"天门\",\"fullname\":\"天门市\",\"pinyin\":[\"tian\",\"men\"],\"location\":{\"lat\":30.66339,\"lng\":113.16614}},{\"id\":\"429021\",\"name\":\"神农架\",\"fullname\":\"神农架林区\",\"pinyin\":[\"shen\",\"nong\",\"jia\"],\"location\":{\"lat\":31.74452,\"lng\":110.67598}},{\"id\":\"430100\",\"name\":\"长沙\",\"fullname\":\"长沙市\",\"pinyin\":[\"chang\",\"sha\"],\"location\":{\"lat\":28.22778,\"lng\":112.93886},\"cidx\":[1540,1548]},{\"id\":\"430200\",\"name\":\"株洲\",\"fullname\":\"株洲市\",\"pinyin\":[\"zhu\",\"zhou\"],\"location\":{\"lat\":27.82767,\"lng\":113.13396},\"cidx\":[1549,1557]},{\"id\":\"430300\",\"name\":\"湘潭\",\"fullname\":\"湘潭市\",\"pinyin\":[\"xiang\",\"tan\"],\"location\":{\"lat\":27.82975,\"lng\":112.94411},\"cidx\":[1558,1562]},{\"id\":\"430400\",\"name\":\"衡阳\",\"fullname\":\"衡阳市\",\"pinyin\":[\"heng\",\"yang\"],\"location\":{\"lat\":26.89324,\"lng\":112.57195},\"cidx\":[1563,1574]},{\"id\":\"430500\",\"name\":\"邵阳\",\"fullname\":\"邵阳市\",\"pinyin\":[\"shao\",\"yang\"],\"location\":{\"lat\":27.2389,\"lng\":111.4677},\"cidx\":[1575,1586]},{\"id\":\"430600\",\"name\":\"岳阳\",\"fullname\":\"岳阳市\",\"pinyin\":[\"yue\",\"yang\"],\"location\":{\"lat\":29.35728,\"lng\":113.12919},\"cidx\":[1587,1595]},{\"id\":\"430700\",\"name\":\"常德\",\"fullname\":\"常德市\",\"pinyin\":[\"chang\",\"de\"],\"location\":{\"lat\":29.03158,\"lng\":111.69854},\"cidx\":[1596,1604]},{\"id\":\"430800\",\"name\":\"张家界\",\"fullname\":\"张家界市\",\"pinyin\":[\"zhang\",\"jia\",\"jie\"],\"location\":{\"lat\":29.11667,\"lng\":110.47839},\"cidx\":[1605,1608]},{\"id\":\"430900\",\"name\":\"益阳\",\"fullname\":\"益阳市\",\"pinyin\":[\"yi\",\"yang\"],\"location\":{\"lat\":28.55391,\"lng\":112.35516},\"cidx\":[1609,1614]},{\"id\":\"431000\",\"name\":\"郴州\",\"fullname\":\"郴州市\",\"pinyin\":[\"chen\",\"zhou\"],\"location\":{\"lat\":25.77063,\"lng\":113.01485},\"cidx\":[1615,1625]},{\"id\":\"431100\",\"name\":\"永州\",\"fullname\":\"永州市\",\"pinyin\":[\"yong\",\"zhou\"],\"location\":{\"lat\":26.42034,\"lng\":111.61225},\"cidx\":[1626,1636]},{\"id\":\"431200\",\"name\":\"怀化\",\"fullname\":\"怀化市\",\"pinyin\":[\"huai\",\"hua\"],\"location\":{\"lat\":27.56974,\"lng\":110.0016},\"cidx\":[1637,1648]},{\"id\":\"431300\",\"name\":\"娄底\",\"fullname\":\"娄底市\",\"pinyin\":[\"lou\",\"di\"],\"location\":{\"lat\":27.69728,\"lng\":111.99458},\"cidx\":[1649,1653]},{\"id\":\"433100\",\"name\":\"湘西\",\"fullname\":\"湘西土家族苗族自治州\",\"pinyin\":[\"xiang\",\"xi\"],\"location\":{\"lat\":28.31173,\"lng\":109.73893},\"cidx\":[1654,1661]},{\"id\":\"440100\",\"name\":\"广州\",\"fullname\":\"广州市\",\"pinyin\":[\"guang\",\"zhou\"],\"location\":{\"lat\":23.12908,\"lng\":113.26436},\"cidx\":[1662,1672]},{\"id\":\"440200\",\"name\":\"韶关\",\"fullname\":\"韶关市\",\"pinyin\":[\"shao\",\"guan\"],\"location\":{\"lat\":24.81039,\"lng\":113.59723},\"cidx\":[1673,1682]},{\"id\":\"440300\",\"name\":\"深圳\",\"fullname\":\"深圳市\",\"pinyin\":[\"shen\",\"zhen\"],\"location\":{\"lat\":22.54286,\"lng\":114.05956},\"cidx\":[1683,1691]},{\"id\":\"440400\",\"name\":\"珠海\",\"fullname\":\"珠海市\",\"pinyin\":[\"zhu\",\"hai\"],\"location\":{\"lat\":22.27073,\"lng\":113.57668},\"cidx\":[1692,1695]},{\"id\":\"440500\",\"name\":\"汕头\",\"fullname\":\"汕头市\",\"pinyin\":[\"shan\",\"tou\"],\"location\":{\"lat\":23.3535,\"lng\":116.68221},\"cidx\":[1696,1702]},{\"id\":\"440600\",\"name\":\"佛山\",\"fullname\":\"佛山市\",\"pinyin\":[\"fo\",\"shan\"],\"location\":{\"lat\":23.02185,\"lng\":113.12192},\"cidx\":[1703,1707]},{\"id\":\"440700\",\"name\":\"江门\",\"fullname\":\"江门市\",\"pinyin\":[\"jiang\",\"men\"],\"location\":{\"lat\":22.57865,\"lng\":113.08161},\"cidx\":[1708,1714]},{\"id\":\"440800\",\"name\":\"湛江\",\"fullname\":\"湛江市\",\"pinyin\":[\"zhan\",\"jiang\"],\"location\":{\"lat\":21.27134,\"lng\":110.35894},\"cidx\":[1715,1723]},{\"id\":\"440900\",\"name\":\"茂名\",\"fullname\":\"茂名市\",\"pinyin\":[\"mao\",\"ming\"],\"location\":{\"lat\":21.66329,\"lng\":110.92523},\"cidx\":[1724,1728]},{\"id\":\"441200\",\"name\":\"肇庆\",\"fullname\":\"肇庆市\",\"pinyin\":[\"zhao\",\"qing\"],\"location\":{\"lat\":23.0469,\"lng\":112.46528},\"cidx\":[1729,1736]},{\"id\":\"441300\",\"name\":\"惠州\",\"fullname\":\"惠州市\",\"pinyin\":[\"hui\",\"zhou\"],\"location\":{\"lat\":23.11075,\"lng\":114.41679},\"cidx\":[1737,1741]},{\"id\":\"441400\",\"name\":\"梅州\",\"fullname\":\"梅州市\",\"pinyin\":[\"mei\",\"zhou\"],\"location\":{\"lat\":24.28844,\"lng\":116.12264},\"cidx\":[1742,1749]},{\"id\":\"441500\",\"name\":\"汕尾\",\"fullname\":\"汕尾市\",\"pinyin\":[\"shan\",\"wei\"],\"location\":{\"lat\":22.78566,\"lng\":115.37514},\"cidx\":[1750,1753]},{\"id\":\"441600\",\"name\":\"河源\",\"fullname\":\"河源市\",\"pinyin\":[\"he\",\"yuan\"],\"location\":{\"lat\":23.74365,\"lng\":114.70065},\"cidx\":[1754,1759]},{\"id\":\"441700\",\"name\":\"阳江\",\"fullname\":\"阳江市\",\"pinyin\":[\"yang\",\"jiang\"],\"location\":{\"lat\":21.85829,\"lng\":111.98256},\"cidx\":[1760,1763]},{\"id\":\"441800\",\"name\":\"清远\",\"fullname\":\"清远市\",\"pinyin\":[\"qing\",\"yuan\"],\"location\":{\"lat\":23.68201,\"lng\":113.05615},\"cidx\":[1764,1771]},{\"id\":\"441900\",\"name\":\"东莞\",\"fullname\":\"东莞市\",\"pinyin\":[\"dong\",\"guan\"],\"location\":{\"lat\":23.02067,\"lng\":113.75179},\"cidx\":[1772,1772]},{\"id\":\"442000\",\"name\":\"中山\",\"fullname\":\"中山市\",\"pinyin\":[\"zhong\",\"shan\"],\"location\":{\"lat\":22.51595,\"lng\":113.3926},\"cidx\":[1773,1773]},{\"id\":\"445100\",\"name\":\"潮州\",\"fullname\":\"潮州市\",\"pinyin\":[\"chao\",\"zhou\"],\"location\":{\"lat\":23.6567,\"lng\":116.62296},\"cidx\":[1774,1776]},{\"id\":\"445200\",\"name\":\"揭阳\",\"fullname\":\"揭阳市\",\"pinyin\":[\"jie\",\"yang\"],\"location\":{\"lat\":23.54972,\"lng\":116.37271},\"cidx\":[1777,1781]},{\"id\":\"445300\",\"name\":\"云浮\",\"fullname\":\"云浮市\",\"pinyin\":[\"yun\",\"fu\"],\"location\":{\"lat\":22.91525,\"lng\":112.04453},\"cidx\":[1782,1786]},{\"id\":\"450100\",\"name\":\"南宁\",\"fullname\":\"南宁市\",\"pinyin\":[\"nan\",\"ning\"],\"location\":{\"lat\":22.81673,\"lng\":108.3669},\"cidx\":[1787,1798]},{\"id\":\"450200\",\"name\":\"柳州\",\"fullname\":\"柳州市\",\"pinyin\":[\"liu\",\"zhou\"],\"location\":{\"lat\":24.32543,\"lng\":109.41552},\"cidx\":[1799,1808]},{\"id\":\"450300\",\"name\":\"桂林\",\"fullname\":\"桂林市\",\"pinyin\":[\"gui\",\"lin\"],\"location\":{\"lat\":25.27361,\"lng\":110.29002},\"cidx\":[1809,1825]},{\"id\":\"450400\",\"name\":\"梧州\",\"fullname\":\"梧州市\",\"pinyin\":[\"wu\",\"zhou\"],\"location\":{\"lat\":23.47691,\"lng\":111.27917},\"cidx\":[1826,1832]},{\"id\":\"450500\",\"name\":\"北海\",\"fullname\":\"北海市\",\"pinyin\":[\"bei\",\"hai\"],\"location\":{\"lat\":21.48112,\"lng\":109.12008},\"cidx\":[1833,1836]},{\"id\":\"450600\",\"name\":\"防城港\",\"fullname\":\"防城港市\",\"pinyin\":[\"fang\",\"cheng\",\"gang\"],\"location\":{\"lat\":21.68713,\"lng\":108.35472},\"cidx\":[1837,1840]},{\"id\":\"450700\",\"name\":\"钦州\",\"fullname\":\"钦州市\",\"pinyin\":[\"qin\",\"zhou\"],\"location\":{\"lat\":21.9797,\"lng\":108.65431},\"cidx\":[1841,1844]},{\"id\":\"450800\",\"name\":\"贵港\",\"fullname\":\"贵港市\",\"pinyin\":[\"gui\",\"gang\"],\"location\":{\"lat\":23.11306,\"lng\":109.59764},\"cidx\":[1845,1849]},{\"id\":\"450900\",\"name\":\"玉林\",\"fullname\":\"玉林市\",\"pinyin\":[\"yu\",\"lin\"],\"location\":{\"lat\":22.65451,\"lng\":110.18098},\"cidx\":[1850,1856]},{\"id\":\"451000\",\"name\":\"百色\",\"fullname\":\"百色市\",\"pinyin\":[\"bai\",\"se\"],\"location\":{\"lat\":23.90216,\"lng\":106.61838},\"cidx\":[1857,1868]},{\"id\":\"451100\",\"name\":\"贺州\",\"fullname\":\"贺州市\",\"pinyin\":[\"he\",\"zhou\"],\"location\":{\"lat\":24.40346,\"lng\":111.56655},\"cidx\":[1869,1873]},{\"id\":\"451200\",\"name\":\"河池\",\"fullname\":\"河池市\",\"pinyin\":[\"he\",\"chi\"],\"location\":{\"lat\":24.69291,\"lng\":108.0854},\"cidx\":[1874,1884]},{\"id\":\"451300\",\"name\":\"来宾\",\"fullname\":\"来宾市\",\"pinyin\":[\"lai\",\"bin\"],\"location\":{\"lat\":23.7521,\"lng\":109.22238},\"cidx\":[1885,1890]},{\"id\":\"451400\",\"name\":\"崇左\",\"fullname\":\"崇左市\",\"pinyin\":[\"chong\",\"zuo\"],\"location\":{\"lat\":22.37895,\"lng\":107.36485},\"cidx\":[1891,1897]},{\"id\":\"460100\",\"name\":\"海口\",\"fullname\":\"海口市\",\"pinyin\":[\"hai\",\"kou\"],\"location\":{\"lat\":20.04422,\"lng\":110.19989},\"cidx\":[1898,1901]},{\"id\":\"460200\",\"name\":\"三亚\",\"fullname\":\"三亚市\",\"pinyin\":[\"san\",\"ya\"],\"location\":{\"lat\":18.25248,\"lng\":109.51209},\"cidx\":[1902,1905]},{\"id\":\"460300\",\"name\":\"三沙\",\"fullname\":\"三沙市\",\"pinyin\":[\"san\",\"sha\"],\"location\":{\"lat\":16.83272,\"lng\":112.33356},\"cidx\":[1906,1908]},{\"id\":\"460400\",\"name\":\"儋州\",\"fullname\":\"儋州市\",\"pinyin\":[\"dan\",\"zhou\"],\"location\":{\"lat\":19.52093,\"lng\":109.58069},\"cidx\":[1909,1909]},{\"id\":\"469001\",\"name\":\"五指山\",\"fullname\":\"五指山市\",\"pinyin\":[\"wu\",\"zhi\",\"shan\"],\"location\":{\"lat\":18.77515,\"lng\":109.51696}},{\"id\":\"469002\",\"name\":\"琼海\",\"fullname\":\"琼海市\",\"pinyin\":[\"qiong\",\"hai\"],\"location\":{\"lat\":19.25838,\"lng\":110.47464}},{\"id\":\"469005\",\"name\":\"文昌\",\"fullname\":\"文昌市\",\"pinyin\":[\"wen\",\"chang\"],\"location\":{\"lat\":19.54329,\"lng\":110.79774}},{\"id\":\"469006\",\"name\":\"万宁\",\"fullname\":\"万宁市\",\"pinyin\":[\"wan\",\"ning\"],\"location\":{\"lat\":18.79532,\"lng\":110.38975}},{\"id\":\"469007\",\"name\":\"东方\",\"fullname\":\"东方市\",\"pinyin\":[\"dong\",\"fang\"],\"location\":{\"lat\":19.09614,\"lng\":108.65367}},{\"id\":\"469021\",\"name\":\"定安\",\"fullname\":\"定安县\",\"pinyin\":[\"ding\",\"an\"],\"location\":{\"lat\":19.68121,\"lng\":110.3593}},{\"id\":\"469022\",\"name\":\"屯昌\",\"fullname\":\"屯昌县\",\"pinyin\":[\"tun\",\"chang\"],\"location\":{\"lat\":19.35182,\"lng\":110.10347}},{\"id\":\"469023\",\"name\":\"澄迈\",\"fullname\":\"澄迈县\",\"pinyin\":[\"cheng\",\"mai\"],\"location\":{\"lat\":19.73849,\"lng\":110.00487}},{\"id\":\"469024\",\"name\":\"临高\",\"fullname\":\"临高县\",\"pinyin\":[\"lin\",\"gao\"],\"location\":{\"lat\":19.91243,\"lng\":109.69077}},{\"id\":\"469025\",\"name\":\"白沙\",\"fullname\":\"白沙黎族自治县\",\"pinyin\":[\"bai\",\"sha\"],\"location\":{\"lat\":19.22543,\"lng\":109.45167}},{\"id\":\"469026\",\"name\":\"昌江\",\"fullname\":\"昌江黎族自治县\",\"pinyin\":[\"chang\",\"jiang\"],\"location\":{\"lat\":19.29828,\"lng\":109.05559}},{\"id\":\"469027\",\"name\":\"乐东\",\"fullname\":\"乐东黎族自治县\",\"pinyin\":[\"le\",\"dong\"],\"location\":{\"lat\":18.74986,\"lng\":109.17361}},{\"id\":\"469028\",\"name\":\"陵水\",\"fullname\":\"陵水黎族自治县\",\"pinyin\":[\"ling\",\"shui\"],\"location\":{\"lat\":18.50596,\"lng\":110.0372}},{\"id\":\"469029\",\"name\":\"保亭\",\"fullname\":\"保亭黎族苗族自治县\",\"pinyin\":[\"bao\",\"ting\"],\"location\":{\"lat\":18.63905,\"lng\":109.70259}},{\"id\":\"469030\",\"name\":\"琼中\",\"fullname\":\"琼中黎族苗族自治县\",\"pinyin\":[\"qiong\",\"zhong\"],\"location\":{\"lat\":19.03334,\"lng\":109.83839}},{\"id\":\"510100\",\"name\":\"成都\",\"fullname\":\"成都市\",\"pinyin\":[\"cheng\",\"du\"],\"location\":{\"lat\":30.5702,\"lng\":104.06476},\"cidx\":[1910,1929]},{\"id\":\"510300\",\"name\":\"自贡\",\"fullname\":\"自贡市\",\"pinyin\":[\"zi\",\"gong\"],\"location\":{\"lat\":29.3392,\"lng\":104.77844},\"cidx\":[1930,1935]},{\"id\":\"510400\",\"name\":\"攀枝花\",\"fullname\":\"攀枝花市\",\"pinyin\":[\"pan\",\"zhi\",\"hua\"],\"location\":{\"lat\":26.58228,\"lng\":101.71872},\"cidx\":[1936,1940]},{\"id\":\"510500\",\"name\":\"泸州\",\"fullname\":\"泸州市\",\"pinyin\":[\"lu\",\"zhou\"],\"location\":{\"lat\":28.8717,\"lng\":105.44257},\"cidx\":[1941,1947]},{\"id\":\"510600\",\"name\":\"德阳\",\"fullname\":\"德阳市\",\"pinyin\":[\"de\",\"yang\"],\"location\":{\"lat\":31.12679,\"lng\":104.3979},\"cidx\":[1948,1953]},{\"id\":\"510700\",\"name\":\"绵阳\",\"fullname\":\"绵阳市\",\"pinyin\":[\"mian\",\"yang\"],\"location\":{\"lat\":31.46751,\"lng\":104.6796},\"cidx\":[1954,1962]},{\"id\":\"510800\",\"name\":\"广元\",\"fullname\":\"广元市\",\"pinyin\":[\"guang\",\"yuan\"],\"location\":{\"lat\":32.43549,\"lng\":105.84357},\"cidx\":[1963,1969]},{\"id\":\"510900\",\"name\":\"遂宁\",\"fullname\":\"遂宁市\",\"pinyin\":[\"sui\",\"ning\"],\"location\":{\"lat\":30.53286,\"lng\":105.59273},\"cidx\":[1970,1974]},{\"id\":\"511000\",\"name\":\"内江\",\"fullname\":\"内江市\",\"pinyin\":[\"nei\",\"jiang\"],\"location\":{\"lat\":29.58015,\"lng\":105.05844},\"cidx\":[1975,1979]},{\"id\":\"511100\",\"name\":\"乐山\",\"fullname\":\"乐山市\",\"pinyin\":[\"le\",\"shan\"],\"location\":{\"lat\":29.55221,\"lng\":103.76539},\"cidx\":[1980,1990]},{\"id\":\"511300\",\"name\":\"南充\",\"fullname\":\"南充市\",\"pinyin\":[\"nan\",\"chong\"],\"location\":{\"lat\":30.83731,\"lng\":106.11073},\"cidx\":[1991,1999]},{\"id\":\"511400\",\"name\":\"眉山\",\"fullname\":\"眉山市\",\"pinyin\":[\"mei\",\"shan\"],\"location\":{\"lat\":30.07563,\"lng\":103.84851},\"cidx\":[2000,2005]},{\"id\":\"511500\",\"name\":\"宜宾\",\"fullname\":\"宜宾市\",\"pinyin\":[\"yi\",\"bin\"],\"location\":{\"lat\":28.7513,\"lng\":104.6417},\"cidx\":[2006,2015]},{\"id\":\"511600\",\"name\":\"广安\",\"fullname\":\"广安市\",\"pinyin\":[\"guang\",\"an\"],\"location\":{\"lat\":30.45596,\"lng\":106.63322},\"cidx\":[2016,2021]},{\"id\":\"511700\",\"name\":\"达州\",\"fullname\":\"达州市\",\"pinyin\":[\"da\",\"zhou\"],\"location\":{\"lat\":31.20864,\"lng\":107.46791},\"cidx\":[2022,2028]},{\"id\":\"511800\",\"name\":\"雅安\",\"fullname\":\"雅安市\",\"pinyin\":[\"ya\",\"an\"],\"location\":{\"lat\":30.01053,\"lng\":103.0424},\"cidx\":[2029,2036]},{\"id\":\"511900\",\"name\":\"巴中\",\"fullname\":\"巴中市\",\"pinyin\":[\"ba\",\"zhong\"],\"location\":{\"lat\":31.86715,\"lng\":106.74733},\"cidx\":[2037,2041]},{\"id\":\"512000\",\"name\":\"资阳\",\"fullname\":\"资阳市\",\"pinyin\":[\"zi\",\"yang\"],\"location\":{\"lat\":30.12859,\"lng\":104.62798},\"cidx\":[2042,2044]},{\"id\":\"513200\",\"name\":\"阿坝\",\"fullname\":\"阿坝藏族羌族自治州\",\"pinyin\":[\"a\",\"ba\"],\"location\":{\"lat\":31.8994,\"lng\":102.22477},\"cidx\":[2045,2057]},{\"id\":\"513300\",\"name\":\"甘孜\",\"fullname\":\"甘孜藏族自治州\",\"pinyin\":[\"gan\",\"zi\"],\"location\":{\"lat\":30.04932,\"lng\":101.96254},\"cidx\":[2058,2075]},{\"id\":\"513400\",\"name\":\"凉山\",\"fullname\":\"凉山彝族自治州\",\"pinyin\":[\"liang\",\"shan\"],\"location\":{\"lat\":27.88164,\"lng\":102.26746},\"cidx\":[2076,2092]},{\"id\":\"520100\",\"name\":\"贵阳\",\"fullname\":\"贵阳市\",\"pinyin\":[\"gui\",\"yang\"],\"location\":{\"lat\":26.64702,\"lng\":106.63024},\"cidx\":[2093,2102]},{\"id\":\"520200\",\"name\":\"六盘水\",\"fullname\":\"六盘水市\",\"pinyin\":[\"liu\",\"pan\",\"shui\"],\"location\":{\"lat\":26.59336,\"lng\":104.83023},\"cidx\":[2103,2106]},{\"id\":\"520300\",\"name\":\"遵义\",\"fullname\":\"遵义市\",\"pinyin\":[\"zun\",\"yi\"],\"location\":{\"lat\":27.72545,\"lng\":106.92723},\"cidx\":[2107,2120]},{\"id\":\"520400\",\"name\":\"安顺\",\"fullname\":\"安顺市\",\"pinyin\":[\"an\",\"shun\"],\"location\":{\"lat\":26.25367,\"lng\":105.9462},\"cidx\":[2121,2126]},{\"id\":\"520500\",\"name\":\"毕节\",\"fullname\":\"毕节市\",\"pinyin\":[\"bi\",\"jie\"],\"location\":{\"lat\":27.29847,\"lng\":105.30504},\"cidx\":[2127,2134]},{\"id\":\"520600\",\"name\":\"铜仁\",\"fullname\":\"铜仁市\",\"pinyin\":[\"tong\",\"ren\"],\"location\":{\"lat\":27.69066,\"lng\":109.18099},\"cidx\":[2135,2144]},{\"id\":\"522300\",\"name\":\"黔西南\",\"fullname\":\"黔西南布依族苗族自治州\",\"pinyin\":[\"qian\",\"xi\",\"nan\"],\"location\":{\"lat\":25.08988,\"lng\":104.90437},\"cidx\":[2145,2152]},{\"id\":\"522600\",\"name\":\"黔东南\",\"fullname\":\"黔东南苗族侗族自治州\",\"pinyin\":[\"qian\",\"dong\",\"nan\"],\"location\":{\"lat\":26.58364,\"lng\":107.98416},\"cidx\":[2153,2168]},{\"id\":\"522700\",\"name\":\"黔南\",\"fullname\":\"黔南布依族苗族自治州\",\"pinyin\":[\"qian\",\"nan\"],\"location\":{\"lat\":26.25427,\"lng\":107.52226},\"cidx\":[2169,2180]},{\"id\":\"530100\",\"name\":\"昆明\",\"fullname\":\"昆明市\",\"pinyin\":[\"kun\",\"ming\"],\"location\":{\"lat\":24.87966,\"lng\":102.83322},\"cidx\":[2181,2194]},{\"id\":\"530300\",\"name\":\"曲靖\",\"fullname\":\"曲靖市\",\"pinyin\":[\"qu\",\"jing\"],\"location\":{\"lat\":25.49002,\"lng\":103.79625},\"cidx\":[2195,2203]},{\"id\":\"530400\",\"name\":\"玉溪\",\"fullname\":\"玉溪市\",\"pinyin\":[\"yu\",\"xi\"],\"location\":{\"lat\":24.3518,\"lng\":102.54714},\"cidx\":[2204,2212]},{\"id\":\"530500\",\"name\":\"保山\",\"fullname\":\"保山市\",\"pinyin\":[\"bao\",\"shan\"],\"location\":{\"lat\":25.11205,\"lng\":99.16181},\"cidx\":[2213,2217]},{\"id\":\"530600\",\"name\":\"昭通\",\"fullname\":\"昭通市\",\"pinyin\":[\"zhao\",\"tong\"],\"location\":{\"lat\":27.33817,\"lng\":103.7168},\"cidx\":[2218,2228]},{\"id\":\"530700\",\"name\":\"丽江\",\"fullname\":\"丽江市\",\"pinyin\":[\"li\",\"jiang\"],\"location\":{\"lat\":26.85648,\"lng\":100.2271},\"cidx\":[2229,2233]},{\"id\":\"530800\",\"name\":\"普洱\",\"fullname\":\"普洱市\",\"pinyin\":[\"pu\",\"er\"],\"location\":{\"lat\":22.82521,\"lng\":100.96624},\"cidx\":[2234,2243]},{\"id\":\"530900\",\"name\":\"临沧\",\"fullname\":\"临沧市\",\"pinyin\":[\"lin\",\"cang\"],\"location\":{\"lat\":23.88426,\"lng\":100.08884},\"cidx\":[2244,2251]},{\"id\":\"532300\",\"name\":\"楚雄\",\"fullname\":\"楚雄彝族自治州\",\"pinyin\":[\"chu\",\"xiong\"],\"location\":{\"lat\":25.04495,\"lng\":101.52767},\"cidx\":[2252,2261]},{\"id\":\"532500\",\"name\":\"红河\",\"fullname\":\"红河哈尼族彝族自治州\",\"pinyin\":[\"hong\",\"he\"],\"location\":{\"lat\":23.36422,\"lng\":103.3756},\"cidx\":[2262,2274]},{\"id\":\"532600\",\"name\":\"文山\",\"fullname\":\"文山壮族苗族自治州\",\"pinyin\":[\"wen\",\"shan\"],\"location\":{\"lat\":23.39849,\"lng\":104.21504},\"cidx\":[2275,2282]},{\"id\":\"532800\",\"name\":\"西双版纳\",\"fullname\":\"西双版纳傣族自治州\",\"pinyin\":[\"xi\",\"shuang\",\"ban\",\"na\"],\"location\":{\"lat\":22.00749,\"lng\":100.79739},\"cidx\":[2283,2285]},{\"id\":\"532900\",\"name\":\"大理\",\"fullname\":\"大理白族自治州\",\"pinyin\":[\"da\",\"li\"],\"location\":{\"lat\":25.60648,\"lng\":100.26764},\"cidx\":[2286,2297]},{\"id\":\"533100\",\"name\":\"德宏\",\"fullname\":\"德宏傣族景颇族自治州\",\"pinyin\":[\"de\",\"hong\"],\"location\":{\"lat\":24.43232,\"lng\":98.58486},\"cidx\":[2298,2302]},{\"id\":\"533300\",\"name\":\"怒江\",\"fullname\":\"怒江傈僳族自治州\",\"pinyin\":[\"nu\",\"jiang\"],\"location\":{\"lat\":25.81763,\"lng\":98.8567},\"cidx\":[2303,2306]},{\"id\":\"533400\",\"name\":\"迪庆\",\"fullname\":\"迪庆藏族自治州\",\"pinyin\":[\"di\",\"qing\"],\"location\":{\"lat\":27.81908,\"lng\":99.70305},\"cidx\":[2307,2309]},{\"id\":\"540100\",\"name\":\"拉萨\",\"fullname\":\"拉萨市\",\"pinyin\":[\"la\",\"sa\"],\"location\":{\"lat\":29.64415,\"lng\":91.1145},\"cidx\":[2310,2317]},{\"id\":\"540200\",\"name\":\"日喀则\",\"fullname\":\"日喀则市\",\"pinyin\":[\"ri\",\"ka\",\"ze\"],\"location\":{\"lat\":29.26705,\"lng\":88.88116},\"cidx\":[2318,2335]},{\"id\":\"540300\",\"name\":\"昌都\",\"fullname\":\"昌都市\",\"pinyin\":[\"chang\",\"du\"],\"location\":{\"lat\":31.14073,\"lng\":97.17225},\"cidx\":[2336,2346]},{\"id\":\"540400\",\"name\":\"林芝\",\"fullname\":\"林芝市\",\"pinyin\":[\"lin\",\"zhi\"],\"location\":{\"lat\":29.64895,\"lng\":94.36155},\"cidx\":[2347,2353]},{\"id\":\"540500\",\"name\":\"山南\",\"fullname\":\"山南市\",\"pinyin\":[\"shan\",\"nan\"],\"location\":{\"lat\":29.23705,\"lng\":91.77313},\"cidx\":[2354,2365]},{\"id\":\"540600\",\"name\":\"那曲\",\"fullname\":\"那曲市\",\"pinyin\":[\"na\",\"qu\"],\"location\":{\"lat\":31.47614,\"lng\":92.05136},\"cidx\":[2366,2376]},{\"id\":\"542500\",\"name\":\"阿里\",\"fullname\":\"阿里地区\",\"pinyin\":[\"a\",\"li\"],\"location\":{\"lat\":30.40051,\"lng\":81.1454},\"cidx\":[2377,2383]},{\"id\":\"610100\",\"name\":\"西安\",\"fullname\":\"西安市\",\"pinyin\":[\"xi\",\"an\"],\"location\":{\"lat\":34.34127,\"lng\":108.93984},\"cidx\":[2384,2396]},{\"id\":\"610200\",\"name\":\"铜川\",\"fullname\":\"铜川市\",\"pinyin\":[\"tong\",\"chuan\"],\"location\":{\"lat\":34.89673,\"lng\":108.94515},\"cidx\":[2397,2400]},{\"id\":\"610300\",\"name\":\"宝鸡\",\"fullname\":\"宝鸡市\",\"pinyin\":[\"bao\",\"ji\"],\"location\":{\"lat\":34.36194,\"lng\":107.23732},\"cidx\":[2401,2412]},{\"id\":\"610400\",\"name\":\"咸阳\",\"fullname\":\"咸阳市\",\"pinyin\":[\"xian\",\"yang\"],\"location\":{\"lat\":34.32932,\"lng\":108.70929},\"cidx\":[2413,2426]},{\"id\":\"610500\",\"name\":\"渭南\",\"fullname\":\"渭南市\",\"pinyin\":[\"wei\",\"nan\"],\"location\":{\"lat\":34.49997,\"lng\":109.51015},\"cidx\":[2427,2437]},{\"id\":\"610600\",\"name\":\"延安\",\"fullname\":\"延安市\",\"pinyin\":[\"yan\",\"an\"],\"location\":{\"lat\":36.58529,\"lng\":109.48978},\"cidx\":[2438,2450]},{\"id\":\"610700\",\"name\":\"汉中\",\"fullname\":\"汉中市\",\"pinyin\":[\"han\",\"zhong\"],\"location\":{\"lat\":33.06761,\"lng\":107.02377},\"cidx\":[2451,2461]},{\"id\":\"610800\",\"name\":\"榆林\",\"fullname\":\"榆林市\",\"pinyin\":[\"yu\",\"lin\"],\"location\":{\"lat\":38.2852,\"lng\":109.73458},\"cidx\":[2462,2473]},{\"id\":\"610900\",\"name\":\"安康\",\"fullname\":\"安康市\",\"pinyin\":[\"an\",\"kang\"],\"location\":{\"lat\":32.68486,\"lng\":109.02932},\"cidx\":[2474,2483]},{\"id\":\"611000\",\"name\":\"商洛\",\"fullname\":\"商洛市\",\"pinyin\":[\"shang\",\"luo\"],\"location\":{\"lat\":33.87036,\"lng\":109.94041},\"cidx\":[2484,2490]},{\"id\":\"620100\",\"name\":\"兰州\",\"fullname\":\"兰州市\",\"pinyin\":[\"lan\",\"zhou\"],\"location\":{\"lat\":36.06138,\"lng\":103.83417},\"cidx\":[2491,2498]},{\"id\":\"620200\",\"name\":\"嘉峪关\",\"fullname\":\"嘉峪关市\",\"pinyin\":[\"jia\",\"yu\",\"guan\"],\"location\":{\"lat\":39.77194,\"lng\":98.28971},\"cidx\":[2499,2499]},{\"id\":\"620300\",\"name\":\"金昌\",\"fullname\":\"金昌市\",\"pinyin\":[\"jin\",\"chang\"],\"location\":{\"lat\":38.52006,\"lng\":102.18759},\"cidx\":[2500,2501]},{\"id\":\"620400\",\"name\":\"白银\",\"fullname\":\"白银市\",\"pinyin\":[\"bai\",\"yin\"],\"location\":{\"lat\":36.5447,\"lng\":104.13773},\"cidx\":[2502,2506]},{\"id\":\"620500\",\"name\":\"天水\",\"fullname\":\"天水市\",\"pinyin\":[\"tian\",\"shui\"],\"location\":{\"lat\":34.58085,\"lng\":105.72486},\"cidx\":[2507,2513]},{\"id\":\"620600\",\"name\":\"武威\",\"fullname\":\"武威市\",\"pinyin\":[\"wu\",\"wei\"],\"location\":{\"lat\":37.9282,\"lng\":102.63797},\"cidx\":[2514,2517]},{\"id\":\"620700\",\"name\":\"张掖\",\"fullname\":\"张掖市\",\"pinyin\":[\"zhang\",\"ye\"],\"location\":{\"lat\":38.92592,\"lng\":100.44981},\"cidx\":[2518,2523]},{\"id\":\"620800\",\"name\":\"平凉\",\"fullname\":\"平凉市\",\"pinyin\":[\"ping\",\"liang\"],\"location\":{\"lat\":35.54303,\"lng\":106.6653},\"cidx\":[2524,2530]},{\"id\":\"620900\",\"name\":\"酒泉\",\"fullname\":\"酒泉市\",\"pinyin\":[\"jiu\",\"quan\"],\"location\":{\"lat\":39.73255,\"lng\":98.49394},\"cidx\":[2531,2537]},{\"id\":\"621000\",\"name\":\"庆阳\",\"fullname\":\"庆阳市\",\"pinyin\":[\"qing\",\"yang\"],\"location\":{\"lat\":35.70978,\"lng\":107.64292},\"cidx\":[2538,2545]},{\"id\":\"621100\",\"name\":\"定西\",\"fullname\":\"定西市\",\"pinyin\":[\"ding\",\"xi\"],\"location\":{\"lat\":35.58113,\"lng\":104.62524},\"cidx\":[2546,2552]},{\"id\":\"621200\",\"name\":\"陇南\",\"fullname\":\"陇南市\",\"pinyin\":[\"long\",\"nan\"],\"location\":{\"lat\":33.401,\"lng\":104.92166},\"cidx\":[2553,2561]},{\"id\":\"622900\",\"name\":\"临夏\",\"fullname\":\"临夏回族自治州\",\"pinyin\":[\"lin\",\"xia\"],\"location\":{\"lat\":35.60122,\"lng\":103.21091},\"cidx\":[2562,2569]},{\"id\":\"623000\",\"name\":\"甘南\",\"fullname\":\"甘南藏族自治州\",\"pinyin\":[\"gan\",\"nan\"],\"location\":{\"lat\":34.98327,\"lng\":102.91102},\"cidx\":[2570,2577]},{\"id\":\"630100\",\"name\":\"西宁\",\"fullname\":\"西宁市\",\"pinyin\":[\"xi\",\"ning\"],\"location\":{\"lat\":36.61729,\"lng\":101.77782},\"cidx\":[2578,2584]},{\"id\":\"630200\",\"name\":\"海东\",\"fullname\":\"海东市\",\"pinyin\":[\"hai\",\"dong\"],\"location\":{\"lat\":36.48209,\"lng\":102.40173},\"cidx\":[2585,2590]},{\"id\":\"632200\",\"name\":\"海北\",\"fullname\":\"海北藏族自治州\",\"pinyin\":[\"hai\",\"bei\"],\"location\":{\"lat\":36.95454,\"lng\":100.90096},\"cidx\":[2591,2594]},{\"id\":\"632300\",\"name\":\"黄南\",\"fullname\":\"黄南藏族自治州\",\"pinyin\":[\"huang\",\"nan\"],\"location\":{\"lat\":35.51991,\"lng\":102.01507},\"cidx\":[2595,2598]},{\"id\":\"632500\",\"name\":\"海南\",\"fullname\":\"海南藏族自治州\",\"pinyin\":[\"hai\",\"nan\"],\"location\":{\"lat\":36.28663,\"lng\":100.62037},\"cidx\":[2599,2603]},{\"id\":\"632600\",\"name\":\"果洛\",\"fullname\":\"果洛藏族自治州\",\"pinyin\":[\"guo\",\"luo\"],\"location\":{\"lat\":34.47141,\"lng\":100.24475},\"cidx\":[2604,2609]},{\"id\":\"632700\",\"name\":\"玉树\",\"fullname\":\"玉树藏族自治州\",\"pinyin\":[\"yu\",\"shu\"],\"location\":{\"lat\":33.00528,\"lng\":97.0065},\"cidx\":[2610,2615]},{\"id\":\"632800\",\"name\":\"海西\",\"fullname\":\"海西蒙古族藏族自治州\",\"pinyin\":[\"hai\",\"xi\"],\"location\":{\"lat\":37.3771,\"lng\":97.37122},\"cidx\":[2616,2622]},{\"id\":\"640100\",\"name\":\"银川\",\"fullname\":\"银川市\",\"pinyin\":[\"yin\",\"chuan\"],\"location\":{\"lat\":38.48644,\"lng\":106.23248},\"cidx\":[2623,2628]},{\"id\":\"640200\",\"name\":\"石嘴山\",\"fullname\":\"石嘴山市\",\"pinyin\":[\"shi\",\"zui\",\"shan\"],\"location\":{\"lat\":38.9841,\"lng\":106.38418},\"cidx\":[2629,2631]},{\"id\":\"640300\",\"name\":\"吴忠\",\"fullname\":\"吴忠市\",\"pinyin\":[\"wu\",\"zhong\"],\"location\":{\"lat\":37.99755,\"lng\":106.19879},\"cidx\":[2632,2636]},{\"id\":\"640400\",\"name\":\"固原\",\"fullname\":\"固原市\",\"pinyin\":[\"gu\",\"yuan\"],\"location\":{\"lat\":36.0158,\"lng\":106.24259},\"cidx\":[2637,2641]},{\"id\":\"640500\",\"name\":\"中卫\",\"fullname\":\"中卫市\",\"pinyin\":[\"zhong\",\"wei\"],\"location\":{\"lat\":37.50026,\"lng\":105.19676},\"cidx\":[2642,2644]},{\"id\":\"650100\",\"name\":\"乌鲁木齐\",\"fullname\":\"乌鲁木齐市\",\"pinyin\":[\"wu\",\"lu\",\"mu\",\"qi\"],\"location\":{\"lat\":43.82663,\"lng\":87.61688},\"cidx\":[2645,2652]},{\"id\":\"650200\",\"name\":\"克拉玛依\",\"fullname\":\"克拉玛依市\",\"pinyin\":[\"ke\",\"la\",\"ma\",\"yi\"],\"location\":{\"lat\":45.57999,\"lng\":84.88927},\"cidx\":[2653,2656]},{\"id\":\"650400\",\"name\":\"吐鲁番\",\"fullname\":\"吐鲁番市\",\"pinyin\":[\"tu\",\"lu\",\"fan\"],\"location\":{\"lat\":42.9513,\"lng\":89.18954},\"cidx\":[2657,2659]},{\"id\":\"650500\",\"name\":\"哈密\",\"fullname\":\"哈密市\",\"pinyin\":[\"ha\",\"mi\"],\"location\":{\"lat\":42.81855,\"lng\":93.51538},\"cidx\":[2660,2662]},{\"id\":\"652300\",\"name\":\"昌吉\",\"fullname\":\"昌吉回族自治州\",\"pinyin\":[\"chang\",\"ji\"],\"location\":{\"lat\":44.01117,\"lng\":87.30822},\"cidx\":[2663,2669]},{\"id\":\"652700\",\"name\":\"博州\",\"fullname\":\"博尔塔拉蒙古自治州\",\"pinyin\":[\"bo\",\"zhou\"],\"location\":{\"lat\":44.90597,\"lng\":82.06665},\"cidx\":[2670,2673]},{\"id\":\"652800\",\"name\":\"巴州\",\"fullname\":\"巴音郭楞蒙古自治州\",\"pinyin\":[\"ba\",\"zhou\"],\"location\":{\"lat\":41.76404,\"lng\":86.14517},\"cidx\":[2674,2682]},{\"id\":\"652900\",\"name\":\"阿克苏\",\"fullname\":\"阿克苏地区\",\"pinyin\":[\"a\",\"ke\",\"su\"],\"location\":{\"lat\":41.16842,\"lng\":80.26008},\"cidx\":[2683,2691]},{\"id\":\"653000\",\"name\":\"克州\",\"fullname\":\"克孜勒苏柯尔克孜自治州\",\"pinyin\":[\"ke\",\"zhou\"],\"location\":{\"lat\":39.7153,\"lng\":76.16661},\"cidx\":[2692,2695]},{\"id\":\"653100\",\"name\":\"喀什\",\"fullname\":\"喀什地区\",\"pinyin\":[\"ka\",\"shi\"],\"location\":{\"lat\":39.47042,\"lng\":75.98976},\"cidx\":[2696,2707]},{\"id\":\"653200\",\"name\":\"和田\",\"fullname\":\"和田地区\",\"pinyin\":[\"he\",\"tian\"],\"location\":{\"lat\":37.11431,\"lng\":79.92247},\"cidx\":[2708,2715]},{\"id\":\"654000\",\"name\":\"伊犁\",\"fullname\":\"伊犁哈萨克自治州\",\"pinyin\":[\"yi\",\"li\"],\"location\":{\"lat\":43.91689,\"lng\":81.32416},\"cidx\":[2716,2726]},{\"id\":\"654200\",\"name\":\"塔城\",\"fullname\":\"塔城地区\",\"pinyin\":[\"ta\",\"cheng\"],\"location\":{\"lat\":46.74532,\"lng\":82.98046},\"cidx\":[2727,2733]},{\"id\":\"654300\",\"name\":\"阿勒泰\",\"fullname\":\"阿勒泰地区\",\"pinyin\":[\"a\",\"le\",\"tai\"],\"location\":{\"lat\":47.84564,\"lng\":88.14023},\"cidx\":[2734,2740]},{\"id\":\"659001\",\"name\":\"石河子\",\"fullname\":\"石河子市\",\"pinyin\":[\"shi\",\"he\",\"zi\"],\"location\":{\"lat\":44.30653,\"lng\":86.07893}},{\"id\":\"659002\",\"name\":\"阿拉尔\",\"fullname\":\"阿拉尔市\",\"pinyin\":[\"a\",\"la\",\"er\"],\"location\":{\"lat\":40.54798,\"lng\":81.28067}},{\"id\":\"659003\",\"name\":\"图木舒克\",\"fullname\":\"图木舒克市\",\"pinyin\":[\"tu\",\"mu\",\"shu\",\"ke\"],\"location\":{\"lat\":39.86495,\"lng\":79.06902}},{\"id\":\"659004\",\"name\":\"五家渠\",\"fullname\":\"五家渠市\",\"pinyin\":[\"wu\",\"jia\",\"qu\"],\"location\":{\"lat\":44.16799,\"lng\":87.54017}},{\"id\":\"659005\",\"name\":\"北屯\",\"fullname\":\"北屯市\",\"pinyin\":[\"bei\",\"tun\"],\"location\":{\"lat\":47.36327,\"lng\":87.80014}},{\"id\":\"659006\",\"name\":\"铁门关\",\"fullname\":\"铁门关市\",\"pinyin\":[\"tie\",\"men\",\"guan\"],\"location\":{\"lat\":41.86868,\"lng\":85.67583}},{\"id\":\"659007\",\"name\":\"双河\",\"fullname\":\"双河市\",\"pinyin\":[\"shuang\",\"he\"],\"location\":{\"lat\":44.84418,\"lng\":82.35501}},{\"id\":\"659008\",\"name\":\"可克达拉\",\"fullname\":\"可克达拉市\",\"pinyin\":[\"ke\",\"ke\",\"da\",\"la\"],\"location\":{\"lat\":43.94799,\"lng\":81.04476}},{\"id\":\"659009\",\"name\":\"昆玉\",\"fullname\":\"昆玉市\",\"pinyin\":[\"kun\",\"yu\"],\"location\":{\"lat\":37.20948,\"lng\":79.29133}},{\"id\":\"659010\",\"name\":\"胡杨河\",\"fullname\":\"胡杨河市\",\"pinyin\":[\"hu\",\"yang\",\"he\"],\"location\":{\"lat\":44.69295,\"lng\":84.827387}},{\"id\":\"710100\",\"name\":\"台北\",\"fullname\":\"台北市\",\"pinyin\":[\"tai\",\"bei\"],\"location\":{\"lat\":25.030724,\"lng\":121.520076},\"cidx\":[2741,2752]},{\"id\":\"710200\",\"name\":\"高雄\",\"fullname\":\"高雄市\",\"pinyin\":[\"gao\",\"xiong\"],\"location\":{\"lat\":22.630576,\"lng\":120.306839},\"cidx\":[2753,2790]},{\"id\":\"710300\",\"name\":\"台南\",\"fullname\":\"台南市\",\"pinyin\":[\"tai\",\"nan\"],\"location\":{\"lat\":22.998601,\"lng\":120.187817},\"cidx\":[2791,2827]},{\"id\":\"710400\",\"name\":\"台中\",\"fullname\":\"台中市\",\"pinyin\":[\"tai\",\"zhong\"],\"location\":{\"lat\":24.143171,\"lng\":120.679882},\"cidx\":[2828,2856]},{\"id\":\"710600\",\"name\":\"南投\",\"fullname\":\"南投县\",\"pinyin\":[\"nan\",\"tou\"],\"location\":{\"lat\":23.919619,\"lng\":120.670008},\"cidx\":[2857,2869]},{\"id\":\"710700\",\"name\":\"基隆\",\"fullname\":\"基隆市\",\"pinyin\":[\"ji\",\"long\"],\"location\":{\"lat\":25.122105,\"lng\":121.741526},\"cidx\":[2870,2876]},{\"id\":\"710800\",\"name\":\"新竹\",\"fullname\":\"新竹市\",\"pinyin\":[\"xin\",\"zhu\"],\"location\":{\"lat\":24.784924,\"lng\":120.990745},\"cidx\":[2877,2879]},{\"id\":\"710900\",\"name\":\"嘉义\",\"fullname\":\"嘉义市\",\"pinyin\":[\"jia\",\"yi\"],\"location\":{\"lat\":23.485079,\"lng\":120.472462},\"cidx\":[2880,2881]},{\"id\":\"711100\",\"name\":\"新北\",\"fullname\":\"新北市\",\"pinyin\":[\"xin\",\"bei\"],\"location\":{\"lat\":25.1853,\"lng\":121.663675},\"cidx\":[2882,2910]},{\"id\":\"711200\",\"name\":\"宜兰\",\"fullname\":\"宜兰县\",\"pinyin\":[\"yi\",\"lan\"],\"location\":{\"lat\":24.759707,\"lng\":121.754442},\"cidx\":[2911,2922]},{\"id\":\"711300\",\"name\":\"新竹\",\"fullname\":\"新竹县\",\"pinyin\":[\"xin\",\"zhu\"],\"location\":{\"lat\":24.839233,\"lng\":121.002012},\"cidx\":[2923,2935]},{\"id\":\"711400\",\"name\":\"桃园\",\"fullname\":\"桃园市\",\"pinyin\":[\"tao\",\"yuan\"],\"location\":{\"lat\":24.982757,\"lng\":121.213608},\"cidx\":[2936,2948]},{\"id\":\"711500\",\"name\":\"苗栗\",\"fullname\":\"苗栗县\",\"pinyin\":[\"miao\",\"li\"],\"location\":{\"lat\":24.696762,\"lng\":120.884337},\"cidx\":[2949,2966]},{\"id\":\"711700\",\"name\":\"彰化\",\"fullname\":\"彰化县\",\"pinyin\":[\"zhang\",\"hua\"],\"location\":{\"lat\":24.068523,\"lng\":120.557479},\"cidx\":[2967,2992]},{\"id\":\"711900\",\"name\":\"嘉义\",\"fullname\":\"嘉义县\",\"pinyin\":[\"jia\",\"yi\"],\"location\":{\"lat\":23.434473,\"lng\":120.624255},\"cidx\":[2993,3010]},{\"id\":\"712100\",\"name\":\"云林\",\"fullname\":\"云林县\",\"pinyin\":[\"yun\",\"lin\"],\"location\":{\"lat\":23.664943,\"lng\":120.480738},\"cidx\":[3011,3030]},{\"id\":\"712400\",\"name\":\"屏东\",\"fullname\":\"屏东县\",\"pinyin\":[\"ping\",\"dong\"],\"location\":{\"lat\":22.666716,\"lng\":120.492005},\"cidx\":[3031,3063]},{\"id\":\"712500\",\"name\":\"台东\",\"fullname\":\"台东县\",\"pinyin\":[\"tai\",\"dong\"],\"location\":{\"lat\":22.764364,\"lng\":121.113207},\"cidx\":[3064,3079]},{\"id\":\"712600\",\"name\":\"花莲\",\"fullname\":\"花莲县\",\"pinyin\":[\"hua\",\"lian\"],\"location\":{\"lat\":24.000674,\"lng\":121.59729},\"cidx\":[3080,3092]},{\"id\":\"712700\",\"name\":\"澎湖\",\"fullname\":\"澎湖县\",\"pinyin\":[\"peng\",\"hu\"],\"location\":{\"lat\":23.552351,\"lng\":119.58457},\"cidx\":[3093,3098]}]];\nmodule.exports=city;"}}